const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dagre-6UL2VRFP-Cu0MxO-b.js","assets/graph-DNgfYy-x.js","assets/_baseUniq-C9YVh23f.js","assets/layout-Y0svMPbG.js","assets/_basePickBy-Bx8rmCbf.js","assets/clone-C4WnXLad.js","assets/index-NMlnWx0q.js","assets/index-CQKdrN5M.css","assets/cose-bilkent-S5V4N54A-B1C9nAk-.js","assets/cytoscape.esm-BQaXIfA_.js","assets/c4Diagram-YG6GDRKO-D_WkdgRy.js","assets/chunk-TZMSLE5B-cCLGSHx7.js","assets/flowDiagram-NV44I4VS-BnXqoiXX.js","assets/chunk-FMBD7UC4-BbNWeMbz.js","assets/chunk-55IACEB6-By0fucvG.js","assets/chunk-QN33PNHL-Cs-673Cr.js","assets/channel-DqkuDJmn.js","assets/erDiagram-Q2GNP2WA-mP_DCDhy.js","assets/gitGraphDiagram-NY62KEGX-GbWlaZLA.js","assets/chunk-4BX2VUAB-CidHJEuw.js","assets/chunk-QZHKN3VN-B8tCQUWI.js","assets/treemap-KMMF4GRG-COinunbt.js","assets/ganttDiagram-JELNMOA3-nsLlBof4.js","assets/linear-DC7gSCeZ.js","assets/init-Gi6I4Gst.js","assets/defaultLocale-C4B-KCzX.js","assets/infoDiagram-WHAUD3N6-VtcS2txe.js","assets/pieDiagram-ADFJNKIX-B9muYHs1.js","assets/arc-D-vIPLnx.js","assets/ordinal-Cboi1Yqb.js","assets/quadrantDiagram-AYHSOK5B-sGW8MkfD.js","assets/xychartDiagram-PRI3JC2R-RO-HcwHh.js","assets/requirementDiagram-UZGBJVZJ-gfxBknfs.js","assets/sequenceDiagram-WL72ISMW-AyL4R3rI.js","assets/classDiagram-2ON5EDUG-5QWwwlxu.js","assets/chunk-B4BG7PRW-CN_bDQYK.js","assets/classDiagram-v2-WZHVMYZB-5QWwwlxu.js","assets/stateDiagram-FKZM4ZOC-iRqIyXIj.js","assets/chunk-DI55MBZ5-Cp8YSubZ.js","assets/stateDiagram-v2-4FDKWEC3-DwLEcpWB.js","assets/journeyDiagram-XKPGCS4Q-yq5F92cG.js","assets/timeline-definition-IT6M3QCI-BvEm4897.js","assets/mindmap-definition-VGOIOE7T--22p56CA.js","assets/kanban-definition-3W4ZIXB7-DPVINvTw.js","assets/sankeyDiagram-TZEHDZUN-BEmiGWzK.js","assets/diagram-S2PKOQOG-O2sQKrXL.js","assets/diagram-QEK2KX5R-74t69ZBx.js","assets/blockDiagram-VD42YOAC-OTABfBjk.js","assets/architectureDiagram-VXUJARFQ-C67vR_Mp.js","assets/diagram-PSM6KHXK-BQWVV-2o.js"])))=>i.map(i=>d[i]);
var gO=Object.defineProperty;var mO=(t,e,n)=>e in t?gO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var lt=(t,e,n)=>mO(t,typeof e!="symbol"?e+"":e,n);import{c as rw,r as iw,g as gm,R as sr,a as L,j as _,b as yO,d as sw,l as j,u as ki,_ as nt,e as ow,f as aw,h as bO,i as lw,k as jr,m as Jl,P as oo,n as qr,A as cw,o as Ql,p as uw,q as dw,s as hw,t as fw,v as pw,F as gw,D as mw,C as xO,w as vO,x as Ot,y as wO,z as CO,B as Cl,E as kO,I as df}from"./index-NMlnWx0q.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],_O=rw("search",SO);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],TO=rw("x",EO);var hf={exports:{}},ff={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py;function MO(){if(Py)return ff;Py=1;var t=iw();function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(d,h){var f=h(),p=r({inst:{value:f,getSnapshot:h}}),g=p[0].inst,m=p[1];return s(function(){g.value=f,g.getSnapshot=h,l(g)&&m({inst:g})},[d,f,h]),i(function(){return l(g)&&m({inst:g}),d(function(){l(g)&&m({inst:g})})},[d]),o(f),f}function l(d){var h=d.getSnapshot;d=d.value;try{var f=h();return!n(d,f)}catch{return!0}}function c(d,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return ff.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,ff}var $y;function yw(){return $y||($y=1,hf.exports=MO()),hf.exports}var bw=yw();function Jt(t){this.content=t}Jt.prototype={constructor:Jt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new Jt(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Jt(n)},addToStart:function(t,e){return new Jt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Jt(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new Jt(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Jt.from(t),t.size?new Jt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Jt.from(t),t.size?new Jt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Jt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Jt.from=function(t){if(t instanceof Jt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Jt(e)};function xw(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=xw(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function vw(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=vw(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class V{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new V(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new V(r,i)}cutByIndex(e,n){return e==n?V.empty:e==0&&n==this.content.length?this:new V(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new V(i,s)}addToStart(e){return new V([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new V(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return xw(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return vw(this,e,n,r)}findIndex(e){if(e==0)return Ec(0,e);if(e==this.size)return Ec(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=e)return s==e?Ec(n+1,s):Ec(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return V.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new V(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return V.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new V(n||e,r)}static from(e){if(!e)return V.empty;if(e instanceof V)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new V([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}V.empty=new V([],0);const pf={index:0,offset:0};function Ec(t,e){return pf.index=t,pf.offset=e,pf}function Lu(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Lu(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Lu(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let ht=class Ep{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Lu(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Ep.none;if(e instanceof Ep)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};ht.none=[];class Ru extends Error{}class re{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Cw(this.content,e+this.openStart,n);return r&&new re(r,this.openStart,this.openEnd)}removeBetween(e,n){return new re(ww(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return re.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new re(V.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new re(e,r,i)}}re.empty=new re(V.empty,0,0);function ww(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(ww(s.content,e-i-1,n-i-1)))}function Cw(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=Cw(o.content,e-s-1,n,o);return a&&t.replaceChild(i,o.copy(a))}function AO(t,e,n){if(n.openStart>t.depth)throw new Ru("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Ru("Inconsistent open depths");return kw(t,e,n,0)}function kw(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=kw(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return Bs(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=NO(n,t);return Bs(s,_w(t,o,a,e,r))}else return Bs(s,Iu(t,e,r))}function Sw(t,e){if(!e.type.compatibleContent(t.type))throw new Ru("Cannot join "+e.type.name+" onto "+t.type.name)}function Tp(t,e,n){let r=t.node(n);return Sw(r,e.node(n)),r}function Ds(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function rl(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Ds(t.nodeAfter,r),s++));for(let a=s;a<o;a++)Ds(i.child(a),r);e&&e.depth==n&&e.textOffset&&Ds(e.nodeBefore,r)}function Bs(t,e){return t.type.checkContent(e),t.copy(e)}function _w(t,e,n,r,i){let s=t.depth>i&&Tp(t,e,i+1),o=r.depth>i&&Tp(n,r,i+1),a=[];return rl(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(Sw(s,o),Ds(Bs(s,_w(t,e,n,r,i+1)),a)):(s&&Ds(Bs(s,Iu(t,e,i+1)),a),rl(e,n,i,a),o&&Ds(Bs(o,Iu(n,r,i+1)),a)),rl(r,null,i,a),new V(a)}function Iu(t,e,n){let r=[];if(rl(null,t,n,r),t.depth>n){let i=Tp(t,e,n+1);Ds(Bs(i,Iu(t,e,n+1)),r)}return rl(e,null,n,r),new V(r)}function NO(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(V.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class kl{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return ht.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Du(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new kl(n,r,s)}static resolveCached(e,n){let r=Fy.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else Fy.set(e,r=new OO);let i=r.elts[r.i]=kl.resolve(e,n);return r.i=(r.i+1)%LO,i}}class OO{constructor(){this.elts=[],this.i=0}}const LO=12,Fy=new WeakMap;class Du{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const RO=Object.create(null);let qi=class Mp{constructor(e,n,r,i=ht.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||V.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Lu(this.attrs,n||e.defaultAttrs||RO)&&ht.sameSet(this.marks,r||ht.none)}copy(e=null){return e==this.content?this:new Mp(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Mp(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return re.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new re(c,i.depth-o,s.depth-o)}replace(e,n,r){return AO(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return kl.resolveCached(this,e)}resolveNoCache(e){return kl.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Ew(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=V.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ht.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!ht.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=V.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};qi.prototype.text=void 0;class Bu extends qi{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Ew(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Bu(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Bu(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Ew(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Us{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new IO(e,n);if(r.next==null)return Us.empty;let i=Tw(r);r.next&&r.err("Unexpected trailing text");let s=HO(zO(i));return WO(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return V.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let h=s(d,a.concat(u));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}Us.empty=new Us(!0);class IO{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Tw(t){let e=[];do e.push(DO(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function DO(t){let e=[];do e.push(BO(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function BO(t){let e=FO(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=PO(t,e);else break;return e}function zy(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function PO(t,e){let n=zy(t),r=n;return t.eat(",")&&(t.next!="}"?r=zy(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function $O(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function FO(t){if(t.eat("(")){let e=Tw(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=$O(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function zO(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Mw(t,e){return e-t}function Hy(t,e){let n=[];return r(e),n.sort(Mw);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function HO(t){let e=Object.create(null);return n(Hy(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);Hy(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new Us(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(Mw);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function WO(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Aw(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Nw(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Ow(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function Lw(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new jO(t,r,e[r]);return n}let Wy=class Rw{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Lw(e,r.attrs),this.defaultAttrs=Aw(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Us.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Nw(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new qi(this,this.computeAttrs(e),V.from(n),ht.setFrom(r))}createChecked(e=null,n,r){return n=V.from(n),this.checkContent(n),new qi(this,this.computeAttrs(e),n,ht.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=V.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(V.empty,!0);return s?new qi(this,e,n.append(s),ht.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Ow(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:ht.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new Rw(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function UO(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class jO{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?UO(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class uh{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=Lw(e,i.attrs),this.excluded=null;let s=Aw(this.attrs);this.instance=s?new ht(this,s):null}create(e=null){return!e&&this.instance?this.instance:new ht(this,Nw(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new uh(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Ow(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Iw{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Jt.from(e.nodes),n.marks=Jt.from(e.marks||{}),this.nodes=Wy.compile(this.spec.nodes,this),this.marks=uh.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=Us.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?Uy(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:Uy(this,o.split(" "))}this.nodeFromJSON=i=>qi.fromJSON(this,i),this.markFromJSON=i=>ht.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Wy){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Bu(r,r.defaultAttrs,e,ht.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Uy(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function qO(t){return t.tag!=null}function VO(t){return t.style!=null}class Vi{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(qO(i))this.tags.push(i);else if(VO(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new qy(this,n,!1);return r.addAll(e,ht.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new qy(this,n,!0);return r.addAll(e,ht.none,n.from,n.to),re.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(YO(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Vy(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Vy(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Vi(e,Vi.schemaRules(e)))}}const Dw={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},GO={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Bw={ol:!0,ul:!0},Sl=1,Ap=2,il=4;function jy(t,e,n){return e!=null?(e?Sl:0)|(e==="full"?Ap:0):t&&t.whitespace=="pre"?Sl|Ap:n&~il}class Tc{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=ht.none,this.match=s||(o&il?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(V.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Sl)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=V.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(V.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Dw.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class qy{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=jy(null,n.preserveWhitespace,0)|(r?il:0);i?s=new Tc(i.type,i.attrs,ht.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new Tc(null,null,ht.none,!0,null,o):s=new Tc(e.schema.topNodeType,null,ht.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&Ap?"full":this.localPreserveWS||(i.options&Sl)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(o.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;Bw.hasOwnProperty(o)&&this.parser.normalizeLists&&KO(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:GO.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(Dw.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!i||i.length>c.length+a)&&(i=c,s=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=ht.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):Gy(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=jy(e,s,o.options);o.options&il&&o.content.length==0&&(a|=il);let l=ht.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):Gy(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Tc(e,n,l,i,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Sl)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function KO(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Bw.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function YO(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Vy(t){let e={};for(let n in t)e[n]=t[n];return e}function Gy(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}class ao{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=gf(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=cu(gf(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&cu(gf(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return cu(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ao(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Ky(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Ky(e.marks)}}function Ky(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function gf(t){return t.document||window.document}const Yy=new WeakMap;function XO(t){let e=Yy.get(t);return e===void 0&&Yy.set(t,e=ZO(t)),e}function ZO(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function cu(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=XO(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let a,l=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let h=d.indexOf(" ");h>0?l.setAttributeNS(d.slice(0,h),d.slice(h+1),c[d]):d=="style"&&l.style?l.style.cssText=c[d]:l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let h=e[d];if(h===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:f,contentDOM:p}=cu(t,h,n,r);if(l.appendChild(f),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const Pw=65535,$w=Math.pow(2,16);function JO(t,e){return t+e*$w}function Xy(t){return t&Pw}function QO(t){return(t-(t&Pw))/$w}const Fw=1,zw=2,uu=4,Hw=8;class Np{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Hw)>0}get deletedBefore(){return(this.delInfo&(Fw|uu))>0}get deletedAfter(){return(this.delInfo&(zw|uu))>0}get deletedAcross(){return(this.delInfo&uu)>0}}class Vn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Vn.empty)return Vn.empty}recover(e){let n=0,r=Xy(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+QO(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],d=l+c;if(e<=d){let h=c?e==l?-1:e==d?1:n:n,f=l+i+(h<0?0:u);if(r)return f;let p=e==(n<0?l:d)?null:JO(a/3,e-l),g=e==l?zw:e==d?Fw:uu;return(n<0?e!=l:e!=d)&&(g|=Hw),new Np(f,g,p)}i+=u-c}return r?e+i:new Np(e+i,0,null)}touches(e,n){let r=0,i=Xy(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new Vn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Vn.empty:new Vn(e<0?[0,-e,0]:[0,0,e])}}Vn.empty=new Vn([]);class _l{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new _l(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new _l;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new Np(e,i,null)}}const mf=Object.create(null);let bn=class{getMap(){return Vn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=mf[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in mf)throw new RangeError("Duplicate use of step JSON ID "+e);return mf[e]=n,n.prototype.jsonID=e,n}};class Rt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Rt(e,null)}static fail(e){return new Rt(null,e)}static fromReplace(e,n,r,i){try{return Rt.ok(e.replace(n,r,i))}catch(s){if(s instanceof Ru)return Rt.fail(s.message);throw s}}}function mm(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(mm(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return V.fromArray(r)}class zi extends bn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new re(mm(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Rt.fromReplace(e,this.from,this.to,s)}invert(){return new Sr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new zi(n.pos,r.pos,this.mark)}merge(e){return e instanceof zi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new zi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new zi(n.from,n.to,e.markFromJSON(n.mark))}}bn.jsonID("addMark",zi);class Sr extends bn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new re(mm(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Rt.fromReplace(e,this.from,this.to,r)}invert(){return new zi(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Sr(n.pos,r.pos,this.mark)}merge(e){return e instanceof Sr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Sr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Sr(n.from,n.to,e.markFromJSON(n.mark))}}bn.jsonID("removeMark",Sr);class Hi extends bn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Rt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Rt.fromReplace(e,this.pos,this.pos+1,new re(V.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Hi(this.pos,n.marks[i]);return new Hi(this.pos,this.mark)}}return new js(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Hi(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Hi(n.pos,e.markFromJSON(n.mark))}}bn.jsonID("addNodeMark",Hi);class js extends bn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Rt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Rt.fromReplace(e,this.pos,this.pos+1,new re(V.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Hi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new js(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new js(n.pos,e.markFromJSON(n.mark))}}bn.jsonID("removeNodeMark",js);class Ut extends bn{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Op(e,this.from,this.to)?Rt.fail("Structure replace would overwrite content"):Rt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Vn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ut(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ut(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Ut)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?re.empty:new re(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ut(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?re.empty:new re(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ut(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ut(n.from,n.to,re.fromJSON(e,n.slice),!!n.structure)}}bn.jsonID("replace",Ut);class jt extends bn{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(Op(e,this.from,this.gapFrom)||Op(e,this.gapTo,this.to)))return Rt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Rt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Rt.fromReplace(e,this.from,this.to,r):Rt.fail("Content does not fit in gap")}getMap(){return new Vn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new jt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new jt(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new jt(n.from,n.to,n.gapFrom,n.gapTo,re.fromJSON(e,n.slice),n.insert,!!n.structure)}}bn.jsonID("replaceAround",jt);function Op(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function eL(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),f=Math.min(c+l.nodeSize,n),p=r.addToSet(d);for(let g=0;g<d.length;g++)d[g].isInSet(p)||(o&&o.to==h&&o.mark.eq(d[g])?o.to=f:i.push(o=new Sr(h,f,d[g])));a&&a.to==h?a.to=f:s.push(a=new zi(h,f,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function tL(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof uh){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],h;for(let f=0;f<i.length;f++){let p=i[f];p.step==s-1&&d.eq(i[f].style)&&(h=p)}h?(h.to=c,h.step=s):i.push({style:d,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new Sr(o.from,o.to,o.style)))}function ym(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)o.push(new Ut(a,u,re.empty));else{r=d;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new Sr(a,u,c.marks[h]));if(i&&c.isText&&n.whitespace!="pre"){let h,f=/\r?\n|\r/g,p;for(;h=f.exec(c.text);)p||(p=new re(V.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new Ut(a+h.index,a+h.index+h[0].length,p))}}a=u}if(!r.validEnd){let l=r.fillBefore(V.empty,!0);t.replace(a,a,new re(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function nL(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function ya(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,s=0;;--r){let o=t.$from.node(r),a=t.$from.index(r)+i,l=t.$to.indexAfter(r)-s;if(r<t.depth&&o.canReplace(a,l,n))return r;if(r==0||o.type.spec.isolating||!nL(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function rL(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=V.empty,d=0;for(let p=s,g=!1;p>n;p--)g||r.index(p)>0?(g=!0,u=V.from(r.node(p).copy(u)),d++):l--;let h=V.empty,f=0;for(let p=s,g=!1;p>n;p--)g||i.after(p+1)<i.end(p)?(g=!0,h=V.from(i.node(p).copy(h)),f++):c++;t.step(new jt(l,c,o,a,new re(u.append(h),d,f),u.size-d,!0))}function bm(t,e,n=null,r=t){let i=iL(t,e),s=i&&sL(r,e);return s?i.map(Zy).concat({type:e,attrs:n}).concat(s.map(Zy)):null}function Zy(t){return{type:t,attrs:null}}function iL(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function sL(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function oL(t,e,n){let r=V.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=V.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new jt(i,s,i,s,new re(r,0,0),n.length,!0))}function aL(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,l)&&lL(t.doc,t.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let f=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);f&&!p?c=!1:!f&&p&&(c=!0)}c===!1&&Uw(t,o,a,s),ym(t,t.mapping.slice(s).map(a,1),r,void 0,c===null);let u=t.mapping.slice(s),d=u.map(a,1),h=u.map(a+o.nodeSize,1);return t.step(new jt(d,h,d+1,h-1,new re(V.from(r.create(l,null,o.marks)),0,0),1,!0)),c===!0&&Ww(t,o,a,s),!1}})}function Ww(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function Uw(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function lL(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function cL(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new jt(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new re(V.from(o),0,0),1,!0))}function gi(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let d=i.node(c),h=i.index(c);if(d.type.spec.isolating)return!1;let f=d.content.cutByIndex(h,d.childCount),p=r&&r[u+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let g=r&&r[u]||d;if(!d.canReplace(h+1,d.childCount)||!g.type.validContent(f))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function uL(t,e,n=1,r){let i=t.doc.resolve(e),s=V.empty,o=V.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){s=V.from(i.node(a).copy(s));let u=r&&r[c];o=V.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}t.step(new Ut(e,e,new re(s.append(o),n,n),!0))}function ss(t,e){let n=t.resolve(e),r=n.index();return jw(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function dL(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function jw(t,e){return!!(t&&e&&!t.isLeaf&&dL(t,e))}function dh(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&jw(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function hL(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let u=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);Uw(t,u.node(),u.before(),a)}o.inlineContent&&ym(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new Ut(c,l.map(e+n,-1),re.empty,!0)),r===!0){let u=t.doc.resolve(c);Ww(t,u.node(),u.before(),t.steps.length)}return t}function fL(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function xm(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function hh(t,e,n=e,r=re.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return qw(i,s,r)?new Ut(e,n,r):new pL(i,s,r).fit()}function qw(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class pL{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=V.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=V.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new re(s,o,a);return e>-1?new jt(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Ut(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=yf(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(o?c.matchType(o.type)||(d=c.fillBefore(V.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=yf(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new re(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=yf(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new re(ja(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new re(ja(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[n];if(i){for(let g=0;g<i.childCount;g++)u.push(i.child(g));d=d.matchFragment(i)}let f=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let g=a.child(c),m=d.matchType(g.type);if(!m)break;c++,(c>1||l==0||g.content.size)&&(d=m,u.push(Vw(g.mark(h.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=qa(this.placed,n,V.from(u)),this.frontier[n].match=d,p&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,m=a;g<f;g++){let y=m.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),m=y.content}this.unplaced=p?e==0?re.empty:new re(ja(o.content,e-1,1),e-1,f<0?o.openEnd:e-1):new re(ja(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!bf(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=bf(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=bf(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=qa(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=qa(this.placed,this.depth,V.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(V.empty,!0);n.childCount&&(this.placed=qa(this.placed,this.frontier.length,n))}}function ja(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(ja(t.firstChild.content,e-1,n)))}function qa(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(qa(t.lastChild.content,e-1,n)))}function yf(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Vw(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Vw(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(V.empty,!0)))),t.copy(r)}function bf(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!gL(n,s.content,o)?a:null}function gL(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function mL(t){return t.spec.defining||t.spec.definingForContent}function yL(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(qw(i,s,r))return t.step(new Ut(e,n,r));let o=Kw(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let h=i.depth,f=i.pos-1;h>0;h--,f--){let p=i.node(h).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(h)>-1?a=h:i.before(h)==f&&o.splice(1,0,-h)}let l=o.indexOf(a),c=[],u=r.openStart;for(let h=r.content,f=0;;f++){let p=h.firstChild;if(c.push(p),f==r.openStart)break;h=p.content}for(let h=u-1;h>=0;h--){let f=c[h],p=mL(f.type);if(p&&!f.sameMarkup(i.node(Math.abs(a)-1)))u=h;else if(p||!f.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let f=(h+u+1)%(r.openStart+1),p=c[f];if(p)for(let g=0;g<o.length;g++){let m=o[(g+l)%o.length],y=!0;m<0&&(y=!1,m=-m);let b=i.node(m-1),C=i.index(m-1);if(b.canReplaceWith(C,C,p.type,p.marks))return t.replace(i.before(m),y?s.after(m):n,new re(Gw(r.content,0,r.openStart,f),f,r.openEnd))}}let d=t.steps.length;for(let h=o.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>d));h--){let f=o[h];f<0||(e=i.before(f),n=s.after(f))}}function Gw(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(Gw(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(V.empty,!0))}return t}function bL(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=fL(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new re(V.from(r),0,0))}function xL(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=Kw(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function Kw(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class $o extends bn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Rt.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Rt.fromReplace(e,this.pos,this.pos+1,new re(V.from(i),0,n.isLeaf?0:1))}getMap(){return Vn.empty}invert(e){return new $o(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new $o(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new $o(n.pos,n.attr,n.value)}}bn.jsonID("attr",$o);class El extends bn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Rt.ok(r)}getMap(){return Vn.empty}invert(e){return new El(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new El(n.attr,n.value)}}bn.jsonID("docAttr",El);let Jo=class extends Error{};Jo=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Jo.prototype=Object.create(Error.prototype);Jo.prototype.constructor=Jo;Jo.prototype.name="TransformError";let vm=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new _l}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Jo(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=re.empty){let i=hh(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new re(V.from(r),0,0))}delete(e,n){return this.replace(e,n,re.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return yL(this,e,n,r),this}replaceRangeWith(e,n,r){return bL(this,e,n,r),this}deleteRange(e,n){return xL(this,e,n),this}lift(e,n){return rL(this,e,n),this}join(e,n=1){return hL(this,e,n),this}wrap(e,n){return oL(this,e,n),this}setBlockType(e,n=e,r,i=null){return aL(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return cL(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new $o(e,n,r)),this}setDocAttribute(e,n){return this.step(new El(e,n)),this}addNodeMark(e,n){return this.step(new Hi(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof ht)n.isInSet(r.marks)&&this.step(new js(e,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new js(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,n=1,r){return uL(this,e,n,r),this}addMark(e,n,r){return eL(this,e,n,r),this}removeMark(e,n,r){return tL(this,e,n,r),this}clearIncompatible(e,n,r){return ym(this,e,n,r),this}};const xf=Object.create(null);let Ie=class{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Yw(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=re.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?re.empty:n),a==0&&eb(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),eb(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Te(e):_o(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?_o(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):_o(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Kn(e.node(0))}static atStart(e){return _o(e,e,0,0,1)||new Kn(e)}static atEnd(e){return _o(e,e,e.content.size,e.childCount,-1)||new Kn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=xf[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in xf)throw new RangeError("Duplicate use of selection JSON ID "+e);return xf[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Te.between(this.$anchor,this.$head).getBookmark()}};Ie.prototype.visible=!0;class Yw{constructor(e,n){this.$from=e,this.$to=n}}let Jy=!1;function Qy(t){!Jy&&!t.parent.inlineContent&&(Jy=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Te extends Ie{constructor(e,n=e){Qy(e),Qy(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Ie.near(r);let i=e.resolve(n.map(this.anchor));return new Te(i.parent.inlineContent?i:r,r)}replace(e,n=re.empty){if(super.replace(e,n),n==re.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Te&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new fh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Te(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Ie.findFrom(n,r,!0)||Ie.findFrom(n,-r,!0);if(s)n=s.$head;else return Ie.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(Ie.findFrom(e,-r,!0)||Ie.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Te(e,n)}}Ie.jsonID("text",Te);class fh{constructor(e,n){this.anchor=e,this.head=n}map(e){return new fh(e.map(this.anchor),e.map(this.head))}resolve(e){return Te.between(e.resolve(this.anchor),e.resolve(this.head))}}class xe extends Ie{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?Ie.near(s):new xe(s)}content(){return new re(V.from(this.node),0,0)}eq(e){return e instanceof xe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new wm(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new xe(e.resolve(n.anchor))}static create(e,n){return new xe(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}xe.prototype.visible=!1;Ie.jsonID("node",xe);class wm{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new fh(r,r):new wm(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&xe.isSelectable(r)?new xe(n):Ie.near(n)}}class Kn extends Ie{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=re.empty){if(n==re.empty){e.delete(0,e.doc.content.size);let r=Ie.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Kn(e)}map(e){return new Kn(e)}eq(e){return e instanceof Kn}getBookmark(){return vL}}Ie.jsonID("all",Kn);const vL={map(){return this},resolve(t){return new Kn(t)}};function _o(t,e,n,r,i,s=!1){if(e.inlineContent)return Te.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&xe.isSelectable(a))return xe.create(t,n-(i<0?a.nodeSize:0))}else{let l=_o(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function eb(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Ut||i instanceof jt))return;let s=t.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(Ie.near(t.doc.resolve(o),n))}const tb=1,Mc=2,nb=4;class wL extends vm{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|tb)&~Mc,this.storedMarks=null,this}get selectionSet(){return(this.updated&tb)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Mc,this}ensureMarks(e){return ht.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Mc)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Mc,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ht.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Ie.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=nb,this}get scrolledIntoView(){return(this.updated&nb)>0}}function rb(t,e){return!e||!t?t:t.bind(e)}class Va{constructor(e,n,r){this.name=e,this.init=rb(n.init,r),this.apply=rb(n.apply,r)}}const CL=[new Va("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Va("selection",{init(t,e){return t.selection||Ie.atStart(e.doc)},apply(t){return t.selection}}),new Va("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Va("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class vf{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=CL.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Va(r.key,r.spec.state,r))})}}class Bo{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Bo(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new wL(this)}static create(e){let n=new vf(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Bo(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new vf(this.schema,e.plugins),r=n.fields,i=new Bo(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new vf(e.schema,e.plugins),s=new Bo(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=qi.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=Ie.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=c.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function Xw(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Xw(i,e,{})),n[r]=i}return n}class Ge{constructor(e){this.spec=e,this.props={},e.props&&Xw(e.props,this,this.props),this.key=e.key?e.key.key:Zw("plugin")}getState(e){return e[this.key]}}const wf=Object.create(null);function Zw(t){return t in wf?t+"$"+ ++wf[t]:(wf[t]=0,t+"$")}class rt{constructor(e="key"){this.key=Zw(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Cm=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Jw(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Qw=(t,e,n)=>{let r=Jw(t,n);if(!r)return!1;let i=km(r);if(!i){let o=r.blockRange(),a=o&&ya(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(lC(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Qo(s,"end")||xe.isSelectable(s)))for(let o=r.depth;;o--){let a=hh(t.doc,r.before(o),r.after(o),re.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Qo(s,"end")?Ie.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):xe.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},kL=(t,e,n)=>{let r=Jw(t,n);if(!r)return!1;let i=km(r);return i?eC(t,i,e):!1},SL=(t,e,n)=>{let r=nC(t,n);if(!r)return!1;let i=Sm(r);return i?eC(t,i,e):!1};function eC(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=hh(t.doc,s,l,re.empty);if(!c||c.from!=s||c instanceof Ut&&c.slice.size>=l-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(Te.create(u.doc,s)),n(u.scrollIntoView())}return!0}function Qo(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const tC=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=km(r)}let o=s&&s.nodeBefore;return!o||!xe.isSelectable(o)?!1:(e&&e(t.tr.setSelection(xe.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function km(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function nC(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const rC=(t,e,n)=>{let r=nC(t,n);if(!r)return!1;let i=Sm(r);if(!i)return!1;let s=i.nodeAfter;if(lC(t,i,e,1))return!0;if(r.parent.content.size==0&&(Qo(s,"start")||xe.isSelectable(s))){let o=hh(t.doc,r.before(),r.after(),re.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Qo(s,"start")?Ie.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):xe.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},iC=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=Sm(r)}let o=s&&s.nodeAfter;return!o||!xe.isSelectable(o)?!1:(e&&e(t.tr.setSelection(xe.create(t.doc,s.pos)).scrollIntoView()),!0)};function Sm(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const _L=(t,e)=>{let n=t.selection,r=n instanceof xe,i;if(r){if(n.node.isTextblock||!ss(t.doc,n.from))return!1;i=n.from}else if(i=dh(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(xe.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},EL=(t,e)=>{let n=t.selection,r;if(n instanceof xe){if(n.node.isTextblock||!ss(t.doc,n.to))return!1;r=n.to}else if(r=dh(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},TL=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&ya(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},sC=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function _m(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const ML=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=_m(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Ie.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},oC=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Kn||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=_m(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Te.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},aC=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(gi(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&ya(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function AL(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof xe&&e.selection.node.isBlock)return!r.parentOffset||!gi(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let f=r.depth;;f--)if(r.node(f).isBlock){l=r.end(f)==r.pos+(r.depth-f),c=r.start(f)==r.pos-(r.depth-f),a=_m(r.node(f-1).contentMatchAt(r.indexAfter(f-1))),s.unshift(l&&a?{type:a}:null),o=f;break}else{if(f==1)return!1;s.unshift(null)}let u=e.tr;(e.selection instanceof Te||e.selection instanceof Kn)&&u.deleteSelection();let d=u.mapping.map(r.pos),h=gi(u.doc,d,s.length,s);if(h||(s[0]=a?{type:a}:null,h=gi(u.doc,d,s.length,s)),!h)return!1;if(u.split(d,s.length,s),!l&&c&&r.node(o).type!=a){let f=u.mapping.map(r.before(o)),p=u.doc.resolve(f);a&&r.node(o-1).canReplaceWith(p.index(),p.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(o)),a)}return n&&n(u.scrollIntoView()),!0}}const NL=AL(),OL=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(xe.create(t.doc,i))),!0)};function LL(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||ss(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function lC(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&LL(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(n){let f=e.pos+s.nodeSize,p=V.empty;for(let y=o.length-1;y>=0;y--)p=V.from(o[y].create(null,p));p=V.from(i.copy(p));let g=t.tr.step(new jt(e.pos-1,f,e.pos,f,new re(p,1,0),o.length,!0)),m=g.doc.resolve(f+2*o.length);m.nodeAfter&&m.nodeAfter.type==i.type&&ss(g.doc,m.pos)&&g.join(m.pos),n(g.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&l?null:Ie.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),h=d&&ya(d);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(d,h).scrollIntoView()),!0;if(c&&Qo(s,"start",!0)&&Qo(i,"end")){let f=i,p=[];for(;p.push(f),!f.isTextblock;)f=f.lastChild;let g=s,m=1;for(;!g.isTextblock;g=g.firstChild)m++;if(f.canReplace(f.childCount,f.childCount,g.content)){if(n){let y=V.empty;for(let C=p.length-1;C>=0;C--)y=V.from(p[C].copy(y));let b=t.tr.step(new jt(e.pos-p.length,e.pos+s.nodeSize,e.pos+m,e.pos+s.nodeSize-m,new re(y,p.length,0),0,!0));n(b.scrollIntoView())}return!0}}return!1}function cC(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Te.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const RL=cC(-1),IL=cC(1);function DL(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&bm(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function ib(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}function Em(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}Em(Cm,Qw,tC);Em(Cm,rC,iC);Em(sC,oC,aC,NL);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function BL(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let a=r?n.tr:null;return PL(a,o,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function PL(t,e,n,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new Du(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Du(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=bm(s,n,r,e);return a?(t&&$L(t,e,a,i,n),!0):!1}function $L(t,e,n,r,i){let s=V.empty;for(let u=n.length-1;u>=0;u--)s=V.from(n[u].type.create(n[u].attrs,s));t.step(new jt(e.start-(r?2:0),e.end,e.start,e.end,new re(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,h=!0;u<d;u++,h=!1)!h&&gi(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function FL(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?zL(e,n,t,s):HL(e,n,s):!0:!1}}function zL(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new jt(s-1,o,s,o,new re(V.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Du(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=ya(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return ss(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function HL(t,e,n){let r=t.tr,i=n.parent;for(let f=n.end,p=n.endIndex-1,g=n.startIndex;p>g;p--)f-=i.child(p).nodeSize,r.delete(f-1,f+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?V.empty:V.from(i))))return!1;let d=s.pos,h=d+o.nodeSize;return r.step(new jt(d-(a?1:0),h+(l?1:0),d+1,h-1,new re((a?V.empty:V.from(i.copy(V.empty))).append(l?V.empty:V.from(i.copy(V.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function WL(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=V.from(c?t.create():null),d=new re(V.from(t.create(null,V.from(a.type.create(null,u)))),c?3:1,0),h=s.start,f=s.end;n(e.tr.step(new jt(h-(c?3:1),f,h,f,d,1,!0)).scrollIntoView())}return!0}}const tn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},ea=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Lp=null;const fi=function(t,e,n){let r=Lp||(Lp=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},UL=function(){Lp=null},qs=function(t,e,n,r){return n&&(sb(t,e,n,r,-1)||sb(t,e,n,r,1))},jL=/^(img|br|input|textarea|hr)$/i;function sb(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:ir(t))){let o=t.parentNode;if(!o||o.nodeType!=1||ec(t)||jL.test(t.nodeName)||t.contentEditable=="false")return!1;e=tn(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?ir(t):0}else return!1}}function ir(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function qL(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=ir(t)}else if(t.parentNode&&!ec(t))e=tn(t),t=t.parentNode;else return null}}function VL(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!ec(t))e=tn(t)+1,t=t.parentNode;else return null}}function GL(t,e,n){for(let r=e==0,i=e==ir(t);r||i;){if(t==n)return!0;let s=tn(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==ir(t)}}function ec(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const ph=function(t){return t.focusNode&&qs(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function _s(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function KL(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function YL(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(ir(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(ir(r.startContainer),r.startOffset)}}}const Kr=typeof navigator<"u"?navigator:null,ob=typeof document<"u"?document:null,as=Kr&&Kr.userAgent||"",Rp=/Edge\/(\d+)/.exec(as),uC=/MSIE \d/.exec(as),Ip=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(as),Bn=!!(uC||Ip||Rp),Gi=uC?document.documentMode:Ip?+Ip[1]:Rp?+Rp[1]:0,or=!Bn&&/gecko\/(\d+)/i.test(as);or&&+(/Firefox\/(\d+)/.exec(as)||[0,0])[1];const Dp=!Bn&&/Chrome\/(\d+)/.exec(as),fn=!!Dp,dC=Dp?+Dp[1]:0,_n=!Bn&&!!Kr&&/Apple Computer/.test(Kr.vendor),ta=_n&&(/Mobile\/\w+/.test(as)||!!Kr&&Kr.maxTouchPoints>2),nr=ta||(Kr?/Mac/.test(Kr.platform):!1),XL=Kr?/Win/.test(Kr.platform):!1,pi=/Android \d/.test(as),tc=!!ob&&"webkitFontSmoothing"in ob.documentElement.style,ZL=tc?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function JL(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function ri(t,e){return typeof t=="number"?t:t[e]}function QL(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function ab(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=ea(o);continue}let a=o,l=a==s.body,c=l?JL(s):QL(a),u=0,d=0;if(e.top<c.top+ri(r,"top")?d=-(c.top-e.top+ri(i,"top")):e.bottom>c.bottom-ri(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+ri(i,"top")-c.top:e.bottom-c.bottom+ri(i,"bottom")),e.left<c.left+ri(r,"left")?u=-(c.left-e.left+ri(i,"left")):e.right>c.right-ri(r,"right")&&(u=e.right-c.right+ri(i,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let f=a.scrollLeft,p=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let g=a.scrollLeft-f,m=a.scrollTop-p;e={left:e.left-g,top:e.top-m,right:e.right-g,bottom:e.bottom-m}}let h=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(h))break;o=h=="absolute"?o.offsetParent:ea(o)}}function eR(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:hC(t.dom)}}function hC(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=ea(r));return e}function tR({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;fC(n,r==0?0:r-e)}function fC(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let vo=null;function nR(t){if(t.setActive)return t.setActive();if(vo)return t.focus(vo);let e=hC(t);t.focus(vo==null?{get preventScroll(){return vo={preventScroll:!0},!0}}:void 0),vo||(vo=!1,fC(e,0))}function pC(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=fi(u).getClientRects();else continue;for(let f=0;f<h.length;f++){let p=h[f];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let g=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(g<r){n=u,r=g,i=g&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&g&&(s=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=d+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?rR(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:pC(n,i)}function rR(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=Oi(r,1);if(s.top!=s.bottom&&Tm(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function Tm(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function iR(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function sR(t,e,n){let{node:r,offset:i}=pC(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function oR(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function gC(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Tm(e,c))return gC(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function aR(t,e){let n=t.dom.ownerDocument,r,i=0,s=YL(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!Tm(e,c)||(o=gC(t.dom,e,c),!o))return null}if(_n)for(let c=o;r&&c;c=ea(c))c.draggable&&(r=void 0);if(o=iR(o,e),r){if(or&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;tc&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=oR(t,r,i,e))}a==null&&(a=sR(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function lb(t){return t.top<t.bottom||t.left<t.right}function Oi(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(lb(r))return r}return Array.prototype.find.call(n,lb)||t.getBoundingClientRect()}const lR=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function mC(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=tc||or;if(r.nodeType==3)if(o&&(lR.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=Oi(fi(r,i,i),n);if(or&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=Oi(fi(r,i-1,i-1),-1);if(c.top==l.top){let u=Oi(fi(r,i,i+1),-1);if(u.top!=l.top)return Ta(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,Ta(Oi(fi(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==ir(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return Cf(l.getBoundingClientRect(),!1)}if(s==null&&i<ir(r)){let l=r.childNodes[i];if(l.nodeType==1)return Cf(l.getBoundingClientRect(),!0)}return Cf(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==ir(r))){let l=r.childNodes[i-1],c=l.nodeType==3?fi(l,ir(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Ta(Oi(c,1),!1)}if(s==null&&i<ir(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?fi(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return Ta(Oi(c,-1),!0)}return Ta(Oi(r.nodeType==3?fi(r):r,-n),n>=0)}function Ta(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Cf(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function yC(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function cR(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return yC(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=mC(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=fi(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const uR=/[\u0590-\u08ac]/;function dR(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return a?!uR.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:yC(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let f=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:g}=t.domSelectionRange(),m=p&&!f.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==g;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),m}):r.pos==r.start()||r.pos==r.end()}let cb=null,ub=null,db=!1;function hR(t,e,n){return cb==e&&ub==n?db:(cb=e,ub=n,db=n=="up"||n=="down"?cR(t,e,n):dR(t,e,n))}const ar=0,hb=1,Es=2,Yr=3;class nc{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=ar,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>tn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof xC){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof bC&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?tn(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?tn(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){i=tn(h.dom)+1;break}e-=h.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=tn(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let f=0,p=0;f<this.children.length;f++){let g=this.children[f],m=p+g.size;if(s>p&&o<m)return g.setSelection(e-p-g.border,n-p-g.border,r,i);p=m}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((or||_n)&&e==n){let{node:f,offset:p}=a;if(f.nodeType==3){if(d=!!(p&&f.nodeValue[p-1]==`
`),d&&p==f.nodeValue.length)for(let g=f,m;g;g=g.parentNode){if(m=g.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:tn(m)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=f.childNodes[p-1];d=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(or&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let f=u.focusNode.childNodes[u.focusOffset];f&&f.contentEditable=="false"&&(i=!0)}if(!(i||d&&_n)&&qs(a.node,a.offset,u.anchorNode,u.anchorOffset)&&qs(l.node,l.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==n)&&!(d&&or)){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let p=a;a=l,l=p}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?Es:hb,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Yr:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Es:Yr}r=o}this.dirty=Es}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Es:hb;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class bC extends nc{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==ar&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class fR extends nc{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Vs extends nc{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=ao.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Vs(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Yr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Yr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ar){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ar}}slice(e,n,r){let i=Vs.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=Pp(s,n,o,r)),e>0&&(s=Pp(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ki extends nc{constructor(e,n,r,i,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=ao.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=CC(u,r,n),c?l=new pR(e,n,r,i,u,d||null,h,c,s,o+1):n.isText?new gh(e,n,r,i,u,h,s):new Ki(e,n,r,i,u,d||null,h,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>V.empty)}return e}matchesNode(e,n,r){return this.dirty==ar&&e.eq(this.node)&&Pu(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new mR(this,o&&o.node,e);xR(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?ht.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,d,h)=>{l.syncToMarks(c.marks,r,e);let f;l.findNodeMatch(c,u,d,h)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(f=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,f,e)||l.updateNextNode(c,u,d,e,h,i)||l.addNode(c,u,d,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Es)&&(o&&this.protectLocalComposition(e,o),vC(this.contentDOM,this.children,e),ta&&vR(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Te)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=wR(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new fR(this,s,n,i);e.input.compositionNodes.push(o),this.children=Pp(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==Yr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=ar}updateOuterDeco(e){if(Pu(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=wC(this.dom,this.nodeDOM,Bp(this.outerDeco,this.node,n),Bp(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function fb(t,e,n,r,i){CC(r,e,t);let s=new Ki(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class gh extends Ki{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Yr||this.dirty!=ar&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ar||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=ar,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new gh(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Yr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class xC extends nc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ar&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class pR extends Ki{constructor(e,n,r,i,s,o,a,l,c,u){super(e,n,r,i,s,o,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==Yr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function vC(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=pb(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof Vs){let l=r?r.previousSibling:t.lastChild;vC(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=pb(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const sl=function(t){t&&(this.nodeName=t)};sl.prototype=Object.create(null);const Ts=[new sl];function Bp(t,e,n){if(t.length==0)return Ts;let r=n?Ts[0]:new sl,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new sl(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new sl(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function wC(t,e,n,r){if(n==Ts&&r==Ts)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Ts[0]),i=l}gR(i,a||Ts[0],o)}return i}function gR(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function CC(t,e,n){return wC(t,t,Ts,Bp(e,n,t.nodeType!=1))}function Pu(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function pb(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class mR{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=yR(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=ar,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Vs.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==Yr&&o.dom==o.contentDOM&&(o.dirty=Es),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Ki){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,d,h=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Yr&&Pu(n,l.outerDeco));if(!h&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(l,e,n,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Es,d.updateChildren(i,o+1),d.dirty=ar),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Pu(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Ki.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=Ki.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new bC(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Vs;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof gh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((_n||fn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new xC(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function yR(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof Vs)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function bR(t,e){return t.type.side-e.type.side}function xR(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d;for(;o<i.length&&i[o].to==s;){let m=i[o++];m.widget&&(u?(d||(d=[u])).push(m):u=m)}if(u)if(d){d.sort(bR);for(let m=0;m<d.length;m++)n(d[m],c,!!l)}else n(u,c,!!l);let h,f;if(l)f=-1,h=l,l=null;else if(c<t.childCount)f=c,h=t.child(c++);else break;for(let m=0;m<a.length;m++)a[m].to<=s&&a.splice(m--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+h.nodeSize;if(h.isText){let m=p;o<i.length&&i[o].from<m&&(m=i[o].from);for(let y=0;y<a.length;y++)a[y].to<m&&(m=a[y].to);m<p&&(l=h.cut(m-s),h=h.cut(0,m-s),p=m,f=-1)}else for(;o<i.length&&i[o].to<p;)o++;let g=h.isInline&&!h.isLeaf?a.filter(m=>!m.inline):a.slice();r(h,g,e.forChild(s,h),f),s=p}}function vR(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function wR(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function Pp(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function Mm(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(ph(n)){for(l=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&xe.isSelectable(d)&&i.parent&&!(d.isInline&&GL(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;c=new xe(o==h?a:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,h=o;for(let f=0;f<n.rangeCount;f++){let p=n.getRangeAt(f);d=Math.min(d,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(d<0)return null;[l,o]=h==t.state.selection.anchor?[h,d]:[d,h],a=r.resolve(o)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=Am(t,u,a,d)}return c}function kC(t){return t.editable?t.hasFocus():_C(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function mi(t,e=!1){let n=t.state.selection;if(SC(t,n),!!kC(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&fn){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&qs(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)kR(t);else{let{anchor:r,head:i}=n,s,o;gb&&!(n instanceof Te)&&(n.$from.parent.inlineContent||(s=mb(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=mb(t,n.to))),t.docView.setSelection(r,i,t,e),gb&&(s&&yb(s),o&&yb(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&CR(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const gb=_n||fn&&dC<63;function mb(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(_n&&i&&i.contentEditable=="false")return kf(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return kf(i);if(s)return kf(s)}}function kf(t){return t.contentEditable="true",_n&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function yb(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function CR(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!kC(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function kR(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,tn(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Bn&&Gi<=11&&(n.disabled=!0,n.disabled=!1)}function SC(t,e){if(e instanceof xe){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(bb(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else bb(t)}function bb(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Am(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Te.between(e,n,r)}function xb(t){return t.editable&&!t.hasFocus()?!1:_C(t)}function _C(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function SR(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return qs(e.node,e.offset,n.anchorNode,n.anchorOffset)}function $p(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Ie.findFrom(s,e)}function Ri(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function vb(t,e,n){let r=t.state.selection;if(r instanceof Te)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Ri(t,new Te(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=$p(t.state,e);return i&&i instanceof xe?Ri(t,i):!1}else if(!(nr&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?xe.isSelectable(s)?Ri(t,new xe(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):tc?Ri(t,new Te(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof xe&&r.node.isInline)return Ri(t,new Te(e>0?r.$to:r.$from));{let i=$p(t.state,e);return i?Ri(t,i):!1}}}function $u(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ol(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function wo(t,e){return e<0?_R(t):ER(t)}function _R(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(or&&n.nodeType==1&&r<$u(n)&&ol(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(ol(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(EC(n))break;{let a=n.previousSibling;for(;a&&ol(a,-1);)i=n.parentNode,s=tn(a),a=a.previousSibling;if(a)n=a,r=$u(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?Fp(t,n,r):i&&Fp(t,i,s)}function ER(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=$u(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(ol(a,1))s=n,o=++r;else break}else{if(EC(n))break;{let a=n.nextSibling;for(;a&&ol(a,1);)s=a.parentNode,o=tn(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=$u(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&Fp(t,s,o)}function EC(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function TR(t,e){for(;t&&e==t.childNodes.length&&!ec(t);)e=tn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function MR(t,e){for(;t&&!e&&!ec(t);)e=tn(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Fp(t,e,n){if(e.nodeType!=3){let s,o;(o=TR(e,n))?(e=o,n=0):(s=MR(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(ph(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&mi(t)},50)}function wb(t,e){let n=t.state.doc.resolve(e);if(!(fn||XL)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Cb(t,e,n){let r=t.state.selection;if(r instanceof Te&&!r.empty||n.indexOf("s")>-1||nr&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=$p(t.state,e);if(o&&o instanceof xe)return Ri(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof Kn?Ie.near(o,e):Ie.findFrom(o,e);return a?Ri(t,a):!1}return!1}function kb(t,e){if(!(t.state.selection instanceof Te))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function Sb(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function AR(t){if(!_n||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Sb(t,r,"true"),setTimeout(()=>Sb(t,r,"false"),20)}return!1}function NR(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function OR(t,e){let n=e.keyCode,r=NR(e);if(n==8||nr&&n==72&&r=="c")return kb(t,-1)||wo(t,-1);if(n==46&&!e.shiftKey||nr&&n==68&&r=="c")return kb(t,1)||wo(t,1);if(n==13||n==27)return!0;if(n==37||nr&&n==66&&r=="c"){let i=n==37?wb(t,t.state.selection.from)=="ltr"?-1:1:-1;return vb(t,i,r)||wo(t,i)}else if(n==39||nr&&n==70&&r=="c"){let i=n==39?wb(t,t.state.selection.from)=="ltr"?1:-1:1;return vb(t,i,r)||wo(t,i)}else{if(n==38||nr&&n==80&&r=="c")return Cb(t,-1,r)||wo(t,-1);if(n==40||nr&&n==78&&r=="c")return AR(t)||Cb(t,1,r)||wo(t,1);if(r==(nr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Nm(t,e){t.someProp("transformCopied",f=>{e=f(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let o=t.someProp("clipboardSerializer")||ao.fromSchema(t.state.schema),a=LC(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=OC[c.nodeName.toLowerCase()]);){for(let f=u.length-1;f>=0;f--){let p=a.createElement(u[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",f=>f(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function TC(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=!!e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,s||r,t)}),s)return a=new re(V.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",h=>{a=h(a,t,!0)}),a;let d=t.someProp("clipboardTextParser",h=>h(e,i,r,t));if(d)a=d;else{let h=i.marks(),{schema:f}=t.state,p=ao.fromSchema(f);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let m=o.appendChild(document.createElement("p"));g&&m.appendChild(p.serializeNode(f.text(g,h)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=DR(n),tc&&BR(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=o.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;o=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Vi.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!LR.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=PR(_b(a,+u[1],+u[2]),u[4]);else if(a=re.maxOpen(RR(a.content,i),!0),a.openStart||a.openEnd){let d=0,h=0;for(let f=a.content.firstChild;d<a.openStart&&!f.type.spec.isolating;d++,f=f.firstChild);for(let f=a.content.lastChild;h<a.openEnd&&!f.type.spec.isolating;h++,f=f.lastChild);a=_b(a,d,h)}return t.someProp("transformPasted",d=>{a=d(a,t,l)}),a}const LR=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function RR(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&AC(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=NC(o[o.length-1],s.length));let u=MC(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return V.from(o)}return t}function MC(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,V.from(t));return t}function AC(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=AC(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(V.from(MC(n,t,i+1))))}}function NC(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,NC(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(V.empty,!0);return t.copy(n.append(r))}function zp(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=zp(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(V.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function _b(t,e,n){return e<t.openStart&&(t=new re(zp(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new re(zp(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const OC={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Eb=null;function LC(){return Eb||(Eb=document.implementation.createHTMLDocument("title"))}let Sf=null;function IR(t){let e=window.trustedTypes;return e?(Sf||(Sf=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Sf.createHTML(t)):t}function DR(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=LC().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&OC[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=IR(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function BR(t){let e=t.querySelectorAll(fn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function PR(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=V.from(l.create(r[a+1],i)),s++,o++}return new re(i,s,o)}const En={},Tn={},$R={touchstart:!0,touchmove:!0};class FR{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function zR(t){for(let e in En){let n=En[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{WR(t,r)&&!Om(t,r)&&(t.editable||!(r.type in Tn))&&n(t,r)},$R[e]?{passive:!0}:void 0)}_n&&t.dom.addEventListener("input",()=>null),Hp(t)}function Wi(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function HR(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Hp(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Om(t,r))})}function Om(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function WR(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function UR(t,e){!Om(t,e)&&En[e.type]&&(t.editable||!(e.type in Tn))&&En[e.type](t,e)}Tn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!IC(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(pi&&fn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ta&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,_s(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||OR(t,n)?n.preventDefault():Wi(t,"key")};Tn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Tn.keypress=(t,e)=>{let n=e;if(IC(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||nr&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Te)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function mh(t){return{left:t.clientX,top:t.clientY}}function jR(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Lm(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Fo(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function qR(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&xe.isSelectable(r)?(Fo(t,new xe(n)),!0):!1}function VR(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof xe&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(xe.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Fo(t,xe.create(t.state.doc,i)),!0):!1}function GR(t,e,n,r,i){return Lm(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?VR(t,n):qR(t,n))}function KR(t,e,n,r){return Lm(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function YR(t,e,n,r){return Lm(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||XR(t,n,r)}function XR(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Fo(t,Te.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)Fo(t,Te.create(r,a+1,a+1+o.content.size));else if(xe.isSelectable(o))Fo(t,xe.create(r,a));else continue;return!0}}function Rm(t){return Fu(t)}const RC=nr?"metaKey":"ctrlKey";En.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Rm(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&jR(n,t.input.lastClick)&&!n[RC]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=t.posAtCoords(mh(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new ZR(t,o,n,!!r)):(s=="doubleClick"?KR:YR)(t,o.pos,o.inside,n)?n.preventDefault():Wi(t,"pointer"))};class ZR{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[RC],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof xe&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&or&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Wi(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>mi(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(mh(e))),this.updateAllowDefault(e),this.allowDefault||!n?Wi(this.view,"pointer"):GR(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||_n&&this.mightDrag&&!this.mightDrag.node.isAtom||fn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Fo(this.view,Ie.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Wi(this.view,"pointer")}move(e){this.updateAllowDefault(e),Wi(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}En.touchstart=t=>{t.input.lastTouch=Date.now(),Rm(t),Wi(t,"pointer")};En.touchmove=t=>{t.input.lastTouch=Date.now(),Wi(t,"pointer")};En.contextmenu=t=>Rm(t);function IC(t,e){return t.composing?!0:_n&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const JR=pi?5e3:-1;Tn.compositionstart=Tn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Te&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Fu(t,!0),t.markCursor=null;else if(Fu(t,!e.selection.empty),or&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}DC(t,JR)};Tn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,DC(t,20))};function DC(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Fu(t),e))}function BC(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=eI());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function QR(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=qL(e.focusNode,e.focusOffset),r=VL(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function eI(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Fu(t,e=!1){if(!(pi&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),BC(t),e||t.docView&&t.docView.dirty){let n=Mm(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function tI(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Tl=Bn&&Gi<15||ta&&ZL<604;En.copy=Tn.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Tl?null:n.clipboardData,o=r.content(),{dom:a,text:l}=Nm(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):tI(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function nI(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function rI(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Ml(t,r.value,null,i,e):Ml(t,r.textContent,r.innerHTML,i,e)},50)}function Ml(t,e,n,r,i){let s=TC(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||re.empty)))return!0;if(!s)return!1;let o=nI(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function PC(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Tn.paste=(t,e)=>{let n=e;if(t.composing&&!pi)return;let r=Tl?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Ml(t,PC(r),r.getData("text/html"),i,n)?n.preventDefault():rI(t,n)};class $C{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const iI=nr?"altKey":"ctrlKey";function FC(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[iI]}En.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(mh(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof xe?i.to-1:i.to))){if(r&&r.mightDrag)o=xe.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=xe.create(t.state.doc,d.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:u}=Nm(t,a);(!n.dataTransfer.files.length||!fn||dC>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Tl?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Tl||n.dataTransfer.setData("text/plain",c),t.dragging=new $C(u,FC(t,n),o)};En.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Tn.dragover=Tn.dragenter=(t,e)=>e.preventDefault();Tn.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(mh(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",p=>{o=p(o,t,!1)}):o=TC(t,PC(n.dataTransfer),Tl?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&FC(t,n));if(t.someProp("handleDrop",p=>p(t,n,o||re.empty,a))){n.preventDefault();return}if(!o)return;n.preventDefault();let l=o?xm(t.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(h))return;let f=c.doc.resolve(u);if(d&&xe.isSelectable(o.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new xe(f));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,m,y,b)=>p=b),c.setSelection(Am(t,f,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};En.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&mi(t)},20))};En.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};En.beforeinput=(t,e)=>{if(fn&&pi&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,_s(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Tn)En[t]=Tn[t];function Al(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class zu{constructor(e,n){this.toDOM=e,this.spec=n||Ps,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new St(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof zu&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Al(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Yi{constructor(e,n){this.attrs=e,this.spec=n||Ps}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new St(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Yi&&Al(this.attrs,e.attrs)&&Al(this.spec,e.spec)}static is(e){return e.type instanceof Yi}destroy(){}}class Im{constructor(e,n){this.attrs=e,this.spec=n||Ps}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new St(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof Im&&Al(this.attrs,e.attrs)&&Al(this.spec,e.spec)}destroy(){}}class St{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new St(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new St(e,e,new zu(n,r))}static inline(e,n,r,i){return new St(e,n,new Yi(r,i))}static node(e,n,r,i){return new St(e,n,new Im(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Yi}get widget(){return this.type instanceof zu}}const Eo=[],Ps={};class at{constructor(e,n){this.local=e.length?e:Eo,this.children=n.length?n:Eo}static create(e,n){return n.length?Hu(n,e,0,Ps):hn}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==hn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Ps)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?sI(this.children,o||[],e,n,r,i,s):o?new at(o.sort($s),Eo):hn}add(e,n){return n.length?this==hn?at.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=HC(n,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,Hu(u,a,c+1,Ps)),s+=3}});let o=zC(s?WC(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new at(o.length?this.local.concat(o).sort($s):this.local,i||this.children)}remove(e){return e.length==0||this==hn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=hn?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new at(i,r):hn}forChild(e,n){if(this==hn)return this;if(n.isLeaf)return at.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Yi){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new at(i.sort($s),Eo);return r?new Pi([a,r]):a}return r||hn}eq(e){if(this==e)return!0;if(!(e instanceof at)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Dm(this.localsInner(e))}localsInner(e){if(this==hn)return Eo;if(e.inlineContent||!this.local.some(Yi.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Yi||n.push(this.local[r]);return n}forEachSet(e){e(this)}}at.empty=new at([],[]);at.removeOverlap=Dm;const hn=at.empty;class Pi{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Ps));return Pi.from(r)}forChild(e,n){if(n.isLeaf)return at.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=hn&&(s instanceof Pi?r=r.concat(s.members):r.push(s))}return Pi.from(r)}eq(e){if(!(e instanceof Pi)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?Dm(r?n:n.sort($s)):Eo}static from(e){switch(e.length){case 0:return hn;case 1:return e[0];default:return new Pi(e.every(n=>n instanceof at)?e:e.reduce((n,r)=>n.concat(r instanceof at?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function sI(t,e,n,r,i,s,o){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((h,f,p,g)=>{let m=g-p-(f-h);for(let y=0;y<a.length;y+=3){let b=a[y+1];if(b<0||h>b+u-d)continue;let C=a[y]+u-d;f>=C?a[y+1]=h<=C?-2:-1:h>=u&&m&&(a[y]+=m,a[y+1]+=m)}d+=m}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let h=n.map(t[c+1]+s,-1),f=h-i,{index:p,offset:g}=r.content.findIndex(d),m=r.maybeChild(p);if(m&&g==d&&g+m.nodeSize==f){let y=a[c+2].mapInner(n,m,u+1,t[c]+s+1,o);y!=hn?(a[c]=d,a[c+1]=f,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=oI(a,t,e,n,i,s,o),u=Hu(c,r,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let f=u.children[d];for(;h<a.length&&a[h]<f;)h+=3;a.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new at(e.sort($s),a)}function zC(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new St(i.from+e,i.to+e,i.type))}return n}function oI(t,e,n,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?n.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function HC(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function WC(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Hu(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let c=HC(t,a,l+n);if(c){s=!0;let u=Hu(c,a,n+l+1,r);u!=hn&&i.push(l,l+a.nodeSize,u)}});let o=zC(s?WC(t):t,-n).sort($s);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new at(o,i):hn}function $s(t,e){return t.from-e.from||t.to-e.to}function Dm(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),Tb(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),Tb(e,i,r.copy(s.from,r.to)));break}}}return e}function Tb(t,e,n){for(;e<t.length&&$s(n,t[e])>0;)e++;t.splice(e,0,n)}function _f(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=hn&&e.push(r)}),t.cursorWrapper&&e.push(at.create(t.state.doc,[t.cursorWrapper.deco])),Pi.from(e)}const aI={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},lI=Bn&&Gi<=11;class cI{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class uI{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new cI,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Bn&&Gi<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),lI&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,aI)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(xb(this.view)){if(this.suppressingSelectionUpdates)return mi(this.view);if(Bn&&Gi<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&qs(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=ea(s))n.add(s);for(let s=e.anchorNode;s;s=ea(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&xb(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(or&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,h]=u;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of u){let f=h.parentNode;f&&f.nodeName=="LI"&&(!d||fI(e,d)!=f)&&h.remove()}}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&ph(r)&&(c=Mm(e))&&c.eq(Ie.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,mi(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),dI(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||mi(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Bn&&Gi<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let o=i&&i.parentNode==e.target?tn(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?tn(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Mb=new WeakMap,Ab=!1;function dI(t){if(!Mb.has(t)&&(Mb.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=or,Ab)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Ab=!0}}function Nb(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return qs(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function hI(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Nb(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Nb(t,n):null}function fI(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function pI(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],ph(l)||c.push({node:l.focusNode,offset:l.focusOffset})),fn&&t.input.lastKeyCode===8)for(let m=s;m>i;m--){let y=r.childNodes[m-1],b=y.pmViewDesc;if(y.nodeName=="BR"&&!b){s=m;break}if(!b||b.size)break}let d=t.state.doc,h=t.someProp("domParser")||Vi.fromSchema(t.state.schema),f=d.resolve(o),p=null,g=h.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:gI,context:f});if(c&&c[0].pos!=null){let m=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=m),p={anchor:m+o,head:y+o}}return{doc:g,sel:p,from:o,to:a}}function gI(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(_n&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||_n&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const mI=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function yI(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let S=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,E=Mm(t,S);if(E&&!t.state.selection.eq(E)){if(fn&&pi&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",$=>$(t,_s(13,"Enter"))))return;let I=t.state.tr.setSelection(E);S=="pointer"?I.setMeta("pointer",!0):S=="key"&&I.scrollIntoView(),s&&I.setMeta("composition",s),t.dispatch(I)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=pI(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),h,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,f="end"):(h=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let p=vI(d.content,c.doc.content,c.from,h,f);if(p&&t.input.domChangeCount++,(ta&&t.input.lastIOSEnter>Date.now()-225||pi)&&i.some(S=>S.nodeType==1&&!mI.test(S.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",S=>S(t,_s(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof Te&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let S=Ob(t,t.state.doc,c.sel);if(S&&!S.eq(t.state.selection)){let E=t.state.tr.setSelection(S);s&&E.setMeta("composition",s),t.dispatch(E)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof Te&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),Bn&&Gi<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let g=c.doc.resolveNoCache(p.start-c.from),m=c.doc.resolveNoCache(p.endB-c.from),y=u.resolve(p.start),b=g.sameParent(m)&&g.parent.inlineContent&&y.end()>=p.endA;if((ta&&t.input.lastIOSEnter>Date.now()-225&&(!b||i.some(S=>S.nodeName=="DIV"||S.nodeName=="P"))||!b&&g.pos<c.doc.content.size&&(!g.sameParent(m)||!g.parent.inlineContent)&&g.pos<m.pos&&!/\S/.test(c.doc.textBetween(g.pos,m.pos,"","")))&&t.someProp("handleKeyDown",S=>S(t,_s(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&xI(u,p.start,p.endA,g,m)&&t.someProp("handleKeyDown",S=>S(t,_s(8,"Backspace")))){pi&&fn&&t.domObserver.suppressSelectionUpdates();return}fn&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),pi&&!b&&g.start()!=m.start()&&m.parentOffset==0&&g.depth==m.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,m=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(S){return S(t,_s(13,"Enter"))})},20));let C=p.start,v=p.endA,k=S=>{let E=S||t.state.tr.replace(C,v,c.doc.slice(p.start-c.from,p.endB-c.from));if(c.sel){let I=Ob(t,E.doc,c.sel);I&&!(fn&&t.composing&&I.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(I.head==C||I.head==E.mapping.map(v)-1)||Bn&&I.empty&&I.head==C)&&E.setSelection(I)}return s&&E.setMeta("composition",s),E.scrollIntoView()},w;if(b)if(g.pos==m.pos){Bn&&Gi<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>mi(t),20));let S=k(t.state.tr.delete(C,v)),E=u.resolve(p.start).marksAcross(u.resolve(p.endA));E&&S.ensureMarks(E),t.dispatch(S)}else if(p.endA==p.endB&&(w=bI(g.parent.content.cut(g.parentOffset,m.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start())))){let S=k(t.state.tr);w.type=="add"?S.addMark(C,v,w.mark):S.removeMark(C,v,w.mark),t.dispatch(S)}else if(g.parent.child(g.index()).isText&&g.index()==m.index()-(m.textOffset?0:1)){let S=g.parent.textBetween(g.parentOffset,m.parentOffset),E=()=>k(t.state.tr.insertText(S,C,v));t.someProp("handleTextInput",I=>I(t,C,v,S,E))||t.dispatch(E())}else t.dispatch(k());else t.dispatch(k())}function Ob(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Am(t,e.resolve(n.anchor),e.resolve(n.head))}function bI(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(V.from(c).eq(t))return{mark:a,type:o}}function xI(t,e,n,r,i){if(n-e<=i.pos-r.pos||Ef(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Ef(s,!0,!0));return!o.parent.isTextblock||o.pos>n||Ef(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Ef(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function vI(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&Lb(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&Lb(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function Lb(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class UC{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new FR,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Pb),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Db(this),Ib(this),this.nodeViews=Bb(this),this.docView=fb(this.state.doc,Rb(this),_f(this),this.dom,this),this.domObserver=new uI(this,(r,i,s,o)=>yI(this,r,i,s,o)),this.domObserver.start(),zR(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Hp(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Pb),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(BC(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=Bb(this);CI(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&Hp(this),this.editable=Db(this),Ib(this);let l=_f(this),c=Rb(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(i.selection))&&(o=!0);let h=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&eR(this);if(o){this.domObserver.stop();let f=d&&(Bn||fn)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&wI(i.selection,e.selection);if(d){let p=fn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=QR(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=fb(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&SR(this))?mi(this,f):(SC(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&tR(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof xe){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&ab(this,n.getBoundingClientRect(),e)}else ab(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new $C(e.slice,e.move,i<0?void 0:xe.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Bn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&nR(this.dom),mi(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return aR(this,e)}coordsAtPos(e,n=1){return mC(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return hR(this,n||this.state,e)}pasteHTML(e,n){return Ml(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Ml(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Nm(this,e)}destroy(){this.docView&&(HR(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],_f(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,UL())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return UR(this,e)}domSelectionRange(){let e=this.domSelection();return e?_n&&this.root.nodeType===11&&KL(this.dom.ownerDocument)==this.dom&&hI(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}UC.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function Rb(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[St.node(0,t.state.doc.content.size,e)]}function Ib(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:St.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Db(t){return!t.someProp("editable",e=>e(t.state)===!1)}function wI(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Bb(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function CI(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Pb(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Zi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Wu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},kI=typeof navigator<"u"&&/Mac/.test(navigator.platform),SI=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var nn=0;nn<10;nn++)Zi[48+nn]=Zi[96+nn]=String(nn);for(var nn=1;nn<=24;nn++)Zi[nn+111]="F"+nn;for(var nn=65;nn<=90;nn++)Zi[nn]=String.fromCharCode(nn+32),Wu[nn]=String.fromCharCode(nn);for(var Tf in Zi)Wu.hasOwnProperty(Tf)||(Wu[Tf]=Zi[Tf]);function _I(t){var e=kI&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||SI&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Wu:Zi)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const EI=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),TI=typeof navigator<"u"&&/Win/.test(navigator.platform);function MI(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))EI?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function AI(t){let e=Object.create(null);for(let n in t)e[MI(n)]=t[n];return e}function Mf(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function NI(t){return new Ge({props:{handleKeyDown:Bm(t)}})}function Bm(t){let e=AI(t);return function(n,r){let i=_I(r),s,o=e[Mf(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[Mf(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(TI&&r.ctrlKey&&r.altKey)&&(s=Zi[r.keyCode])&&s!=i){let a=e[Mf(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var OI=Object.defineProperty,Pm=(t,e)=>{for(var n in e)OI(t,n,{get:e[n],enumerable:!0})};function yh(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var bh=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...c)=>{const u=a(...c)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],a=!!t,l=t||i.tr,c=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(d=>d===!0)),u={...Object.fromEntries(Object.entries(n).map(([d,h])=>[d,(...p)=>{const g=this.buildProps(l,e),m=h(...p)(g);return o.push(m),u}])),run:c};return u}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>l(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:t,editor:r,view:s,state:yh({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...c)=>l(...c)(o)]))}};return o}},jC={};Pm(jC,{blur:()=>LI,clearContent:()=>RI,clearNodes:()=>II,command:()=>DI,createParagraphNear:()=>BI,cut:()=>PI,deleteCurrentNode:()=>$I,deleteNode:()=>FI,deleteRange:()=>zI,deleteSelection:()=>HI,enter:()=>WI,exitCode:()=>UI,extendMarkRange:()=>jI,first:()=>qI,focus:()=>VI,forEach:()=>GI,insertContent:()=>KI,insertContentAt:()=>ZI,joinBackward:()=>eD,joinDown:()=>QI,joinForward:()=>tD,joinItemBackward:()=>nD,joinItemForward:()=>rD,joinTextblockBackward:()=>iD,joinTextblockForward:()=>sD,joinUp:()=>JI,keyboardShortcut:()=>aD,lift:()=>lD,liftEmptyBlock:()=>cD,liftListItem:()=>uD,newlineInCode:()=>dD,resetAttributes:()=>hD,scrollIntoView:()=>fD,selectAll:()=>pD,selectNodeBackward:()=>gD,selectNodeForward:()=>mD,selectParentNode:()=>yD,selectTextblockEnd:()=>bD,selectTextblockStart:()=>xD,setContent:()=>vD,setMark:()=>BD,setMeta:()=>PD,setNode:()=>$D,setNodeSelection:()=>FD,setTextSelection:()=>zD,sinkListItem:()=>HD,splitBlock:()=>WD,splitListItem:()=>UD,toggleList:()=>jD,toggleMark:()=>qD,toggleNode:()=>VD,toggleWrap:()=>GD,undoInputRule:()=>KD,unsetAllMarks:()=>YD,unsetMark:()=>XD,updateAttributes:()=>ZD,wrapIn:()=>JD,wrapInList:()=>QD});var LI=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),RI=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),II=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),h=c.resolve(u.map(l+a.nodeSize)),f=d.blockRange(h);if(!f)return;const p=ya(f);if(a.type.isTextblock){const{defaultType:g}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(f.start,g)}(p||p===0)&&e.lift(f,p)})}),!0},DI=t=>e=>t(e),BI=()=>({state:t,dispatch:e})=>oC(t,e),PI=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Te(r.doc.resolve(Math.max(o-1,0)))),!0},$I=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1};function It(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var FI=t=>({tr:e,state:n,dispatch:r})=>{const i=It(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},zI=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},HI=()=>({state:t,dispatch:e})=>Cm(t,e),WI=()=>({commands:t})=>t.keyboardShortcut("Enter"),UI=()=>({state:t,dispatch:e})=>ML(t,e);function $m(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Uu(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:$m(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function qC(t,e,n={}){return t.find(r=>r.type===e&&Uu(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function $b(t,e,n={}){return!!qC(t,e,n)}function Fm(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!qC([...i.node.marks],e,n)))return;let o=i.index,a=t.start()+i.offset,l=o+1,c=a+i.node.nodeSize;for(;o>0&&$b([...t.parent.child(o-1).marks],e,n);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&$b([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Si(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var jI=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=Si(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){const d=Fm(l,s,e);if(d&&d.from<=c&&d.to>=u){const h=Te.create(o,d.from,d.to);n.setSelection(h)}}return!0},qI=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function VC(t){return t instanceof Te}function Ms(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function GC(t,e=null){if(!e)return null;const n=Ie.atStart(t),r=Ie.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Te.create(t,Ms(0,i,s),Ms(t.content.size,i,s)):Te.create(t,Ms(e,i,s),Ms(e,i,s))}function KC(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function xh(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var VI=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(xh()||KC())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!VC(n.state.selection))return o(),!0;const a=GC(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},GI=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),KI=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),YC=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&YC(r)}return t};function Ac(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return YC(n)}function Nl(t,e,n){if(t instanceof qi||t instanceof V)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return V.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Nl("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,a="";const l=new Iw({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Vi.fromSchema(l).parseSlice(Ac(t),n.parseOptions):Vi.fromSchema(l).parse(Ac(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=Vi.fromSchema(e);return n.slice?s.parseSlice(Ac(t),n.parseOptions).content:s.parse(Ac(t),n.parseOptions)}return Nl("",e,n)}function YI(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Ut||i instanceof jt))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(Ie.near(t.doc.resolve(o),n))}var XI=t=>!("type"in t),ZI=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=m=>{s.emit("contentError",{editor:s,error:m,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Nl(e,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(m){l(m)}try{a=Nl(e,s.schema,{parseOptions:c,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(m){return l(m),!1}let{from:u,to:d}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},h=!0,f=!0;if((XI(a)?a:[a]).forEach(m=>{m.check(),h=h?m.isText&&m.marks.length===0:!1,f=f?m.isBlock:!1}),u===d&&f){const{parent:m}=r.doc.resolve(u);m.isTextblock&&!m.type.spec.code&&!m.childCount&&(u-=1,d+=1)}let g;if(h){if(Array.isArray(e))g=e.map(m=>m.text||"").join("");else if(e instanceof V){let m="";e.forEach(y=>{y.text&&(m+=y.text)}),g=m}else typeof e=="object"&&e&&e.text?g=e.text:g=e;r.insertText(g,u,d)}else{g=a;const m=r.doc.resolve(u),y=m.node(),b=m.parentOffset===0,C=y.isText||y.isTextblock,v=y.content.size>0;b&&C&&v&&(u=Math.max(0,u-1)),r.replaceWith(u,d,g)}n.updateSelection&&YI(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:g}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:g})}return!0},JI=()=>({state:t,dispatch:e})=>_L(t,e),QI=()=>({state:t,dispatch:e})=>EL(t,e),eD=()=>({state:t,dispatch:e})=>Qw(t,e),tD=()=>({state:t,dispatch:e})=>rC(t,e),nD=()=>({state:t,dispatch:e,tr:n})=>{try{const r=dh(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},rD=()=>({state:t,dispatch:e,tr:n})=>{try{const r=dh(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},iD=()=>({state:t,dispatch:e})=>kL(t,e),sD=()=>({state:t,dispatch:e})=>SL(t,e);function XC(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function oD(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))xh()||XC()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var aD=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=oD(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function Ji(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?It(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(d,h)=>{if(d.isText)return;const f=Math.max(r,h),p=Math.min(i,h+d.nodeSize);a.push({node:d,from:f,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Uu(d.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((d,h)=>d+h.to-h.from,0)>=l}var lD=(t,e={})=>({state:n,dispatch:r})=>{const i=It(t,n.schema);return Ji(n,i,e)?TL(n,r):!1},cD=()=>({state:t,dispatch:e})=>aC(t,e),uD=t=>({state:e,dispatch:n})=>{const r=It(t,e.schema);return FL(r)(e,n)},dD=()=>({state:t,dispatch:e})=>sC(t,e);function vh(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Fb(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var hD=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=vh(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=It(t,r.schema)),a==="mark"&&(o=Si(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,Fb(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&n.addMark(u,u+c.nodeSize,o.create(Fb(d.attrs,e)))})})}),!0):!1},fD=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),pD=()=>({tr:t,dispatch:e})=>{if(e){const n=new Kn(t.doc);t.setSelection(n)}return!0},gD=()=>({state:t,dispatch:e})=>tC(t,e),mD=()=>({state:t,dispatch:e})=>iC(t,e),yD=()=>({state:t,dispatch:e})=>OL(t,e),bD=()=>({state:t,dispatch:e})=>IL(t,e),xD=()=>({state:t,dispatch:e})=>RL(t,e);function Wp(t,e,n={},r={}){return Nl(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var vD=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if(r.preserveWhitespace!=="full"){const c=Wp(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function ZC(t,e){const n=Si(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function zm(t,e){const n=new vm(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function wD(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function ju(t,e){const n=[];return t.descendants((r,i)=>{e(r)&&n.push({node:r,pos:i})}),n}function JC(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function QC(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function wh(t){return e=>QC(e.$from,t)}function Se(t,e,n){return t.config[e]===void 0&&t.parent?Se(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Se(t.parent,e,n):null}):t.config[e]}function Hm(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Se(e,"addExtensions",n);return r?[e,...Hm(r())]:e}).flat(10)}function Wm(t,e){const n=ao.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function ek(t){return typeof t=="function"}function Qe(t,e=void 0,...n){return ek(t)?e?t.bind(e)(...n):t(...n):t}function CD(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Ol(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function tk(t){const e=[],{nodeExtensions:n,markExtensions:r}=Ol(t),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=Se(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([h,f])=>{e.push({type:d,name:h,attribute:{...s,...f}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Se(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const h={...s,...d};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:o.name,name:u,attribute:h})})}),e}function Ze(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else if(i==="style"){const a=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,h]=u.split(":").map(f=>f.trim());c.set(d,h)}),a.forEach(u=>{const[d,h]=u.split(":").map(f=>f.trim());c.set(d,h)}),r[i]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[i]=s}),r},{})}function Ll(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Ze(n,r),{})}function kD(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function zb(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):kD(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function Hb(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&CD(n)?!1:n!=null))}function Wb(t){var e,n,r;const i={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&((n=t==null?void 0:t.attribute)==null?void 0:n.default)!==void 0&&(i.default=t.attribute.default),((r=t==null?void 0:t.attribute)==null?void 0:r.validate)!==void 0&&(i.validate=t.attribute.validate),[t.name,i]}function SD(t,e){var n;const r=tk(t),{nodeExtensions:i,markExtensions:s}=Ol(t),o=(n=i.find(c=>Se(c,"topNode")))==null?void 0:n.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(y=>y.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((y,b)=>{const C=Se(b,"extendNodeSchema",d);return{...y,...C?C(c):{}}},{}),f=Hb({...h,content:Qe(Se(c,"content",d)),marks:Qe(Se(c,"marks",d)),group:Qe(Se(c,"group",d)),inline:Qe(Se(c,"inline",d)),atom:Qe(Se(c,"atom",d)),selectable:Qe(Se(c,"selectable",d)),draggable:Qe(Se(c,"draggable",d)),code:Qe(Se(c,"code",d)),whitespace:Qe(Se(c,"whitespace",d)),linebreakReplacement:Qe(Se(c,"linebreakReplacement",d)),defining:Qe(Se(c,"defining",d)),isolating:Qe(Se(c,"isolating",d)),attrs:Object.fromEntries(u.map(Wb))}),p=Qe(Se(c,"parseHTML",d));p&&(f.parseDOM=p.map(y=>zb(y,u)));const g=Se(c,"renderHTML",d);g&&(f.toDOM=y=>g({node:y,HTMLAttributes:Ll(y,u)}));const m=Se(c,"renderText",d);return m&&(f.toText=m),[c.name,f]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(m=>m.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((m,y)=>{const b=Se(y,"extendMarkSchema",d);return{...m,...b?b(c):{}}},{}),f=Hb({...h,inclusive:Qe(Se(c,"inclusive",d)),excludes:Qe(Se(c,"excludes",d)),group:Qe(Se(c,"group",d)),spanning:Qe(Se(c,"spanning",d)),code:Qe(Se(c,"code",d)),attrs:Object.fromEntries(u.map(Wb))}),p=Qe(Se(c,"parseHTML",d));p&&(f.parseDOM=p.map(m=>zb(m,u)));const g=Se(c,"renderHTML",d);return g&&(f.toDOM=m=>g({mark:m,HTMLAttributes:Ll(m,u)})),[c.name,f]}));return new Iw({topNode:o,nodes:a,marks:l})}function _D(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function Um(t){return t.sort((n,r)=>{const i=Se(n,"priority")||100,s=Se(r,"priority")||100;return i>s?-1:i<s?1:0})}function nk(t){const e=Um(Hm(t)),n=_D(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function rk(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="";return t.nodesBetween(r,i,(l,c,u,d)=>{var h;l.isBlock&&c>r&&(a+=s);const f=o==null?void 0:o[l.type.name];if(f)return u&&(a+=f({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)==null?void 0:h.slice(Math.max(r,c)-c,i-c))}),a}function ED(t,e){const n={from:0,to:t.content.size};return rk(t,n,e)}function ik(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function TD(t,e){const n=It(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function sk(t,e){const n=vh(typeof e=="string"?e:e.name,t.schema);return n==="node"?TD(t,e):n==="mark"?ZC(t,e):{}}function MD(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function AD(t){const e=MD(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function jm(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=n[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),u=e.slice(s).map(l),d=e.invert().map(c,-1),h=e.invert().map(u);r.push({oldRange:{from:d,to:h},newRange:{from:c,to:u}})})}),AD(r)}function qm(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=Fm(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var ND=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===e?o=a:s-=1}return[o,s]};function Af(t,e){return e.nodes[t]||e.marks[t]||null}function du(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var OD=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)==null?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-s))}),n};function Up(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?Si(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>Uu(d.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:h})=>{const f=d.pos,p=h.pos;t.doc.nodesBetween(f,p,(g,m)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(f,m),b=Math.min(p,m+g.nodeSize),C=b-y;o+=C,a.push(...g.marks.map(v=>({mark:v,from:y,to:b})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>Uu(d.mark.attrs,n,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,h)=>d+h.to-h.from,0);return(l>0?l+c:l)>=o}function LD(t,e,n={}){if(!e)return Ji(t,null,n)||Up(t,null,n);const r=vh(e,t.schema);return r==="node"?Ji(t,e,n):r==="mark"?Up(t,e,n):!1}var RD=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const s=wh(a=>a.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},ID=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function Ub(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function jb(t,e){const{nodeExtensions:n}=Ol(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Qe(Se(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Ch(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(Ch(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function ok(t){return t instanceof xe}function DD(t,e,n){var r;const{selection:i}=e;let s=null;if(VC(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(c=>c.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,h)=>{if(c)return!1;if(u.isInline){const f=!h||h.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(g=>g.type.excludes(n));c=f&&p}return!c}),c})}var BD=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=Si(t,r.schema);if(i)if(o){const c=ZC(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(h,f)=>{const p=Math.max(f,u),g=Math.min(f+h.nodeSize,d);h.marks.find(y=>y.type===l)?h.marks.forEach(y=>{l===y.type&&n.addMark(p,g,l.create({...y.attrs,...e}))}):n.addMark(p,g,l.create(e))})});return DD(r,n,l)},PD=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),$D=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=It(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>ib(s,{...o,...e})(n)?!0:a.clearNodes()).command(({state:a})=>ib(s,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},FD=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Ms(t,0,r.content.size),s=xe.create(r,i);e.setSelection(s)}return!0},zD=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Te.atStart(r).from,a=Te.atEnd(r).to,l=Ms(i,o,a),c=Ms(s,o,a),u=Te.create(r,l,c);e.setSelection(u)}return!0},HD=t=>({state:e,dispatch:n})=>{const r=It(t,e.schema);return WL(r)(e,n)};function qb(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}var WD=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=du(c,a.node().type.name,a.node().attrs);if(s instanceof xe&&s.node.isBlock)return!a.parentOffset||!gi(o,a.pos)?!1:(r&&(t&&qb(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:wD(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=d&&h?[{type:h,attrs:u}]:void 0,p=gi(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!p&&gi(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(p=!0,f=h?[{type:h,attrs:u}]:void 0),r){if(p&&(s instanceof Te&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,f),h&&!d&&!a.parentOffset&&a.parent.type!==h)){const g=e.mapping.map(a.before()),m=e.doc.resolve(g);a.node(-1).canReplaceWith(m.index(),m.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&qb(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return p},UD=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const a=It(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const h=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let y=V.empty;const b=l.index(-1)?1:l.index(-2)?2:3;for(let E=l.depth-b;E>=l.depth-3;E-=1)y=V.from(l.node(E).copy(y));const C=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,v={...du(h,l.node().type.name,l.node().attrs),...e},k=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(v))||void 0;y=y.append(V.from(a.createAndFill(null,k)||void 0));const w=l.before(l.depth-(b-1));n.replace(w,l.after(-C),new re(y,4-b,0));let S=-1;n.doc.nodesBetween(w,n.doc.content.size,(E,I)=>{if(S>-1)return!1;E.isTextblock&&E.content.size===0&&(S=I+1)}),S>-1&&n.setSelection(Te.near(n.doc.resolve(S))),n.scrollIntoView()}return!0}const f=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,p={...du(h,d.type.name,d.attrs),...e},g={...du(h,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const m=f?[{type:a,attrs:p},{type:f,attrs:g}]:[{type:a,attrs:p}];if(!gi(n.doc,l.pos,2))return!1;if(i){const{selection:y,storedMarks:b}=r,{splittableMarks:C}=s.extensionManager,v=b||y.$to.parentOffset&&y.$from.marks();if(n.split(l.pos,2,m).scrollIntoView(),!v||!i)return!0;const k=v.filter(w=>C.includes(w.type.name));n.ensureMarks(k)}return!0},Nf=(t,e)=>{const n=wh(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&ss(t.doc,n.pos)&&t.join(n.pos),!0},Of=(t,e)=>{const n=wh(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&ss(t.doc,r)&&t.join(r),!0},jD=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=i.extensionManager,f=It(t,o.schema),p=It(e,o.schema),{selection:g,storedMarks:m}=o,{$from:y,$to:b}=g,C=y.blockRange(b),v=m||g.$to.parentOffset&&g.$from.marks();if(!C)return!1;const k=wh(w=>jb(w.type.name,d))(g);if(C.depth>=1&&k&&C.depth-k.depth<=1){if(k.node.type===f)return c.liftListItem(p);if(jb(k.node.type.name,d)&&f.validContent(k.node.content)&&a)return l().command(()=>(s.setNodeMarkup(k.pos,f),!0)).command(()=>Nf(s,f)).command(()=>Of(s,f)).run()}return!n||!v||!a?l().command(()=>u().wrapInList(f,r)?!0:c.clearNodes()).wrapInList(f,r).command(()=>Nf(s,f)).command(()=>Of(s,f)).run():l().command(()=>{const w=u().wrapInList(f,r),S=v.filter(E=>h.includes(E.type.name));return s.ensureMarks(S),w?!0:c.clearNodes()}).wrapInList(f,r).command(()=>Nf(s,f)).command(()=>Of(s,f)).run()},qD=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=Si(t,r.schema);return Up(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},VD=(t,e,n={})=>({state:r,commands:i})=>{const s=It(t,r.schema),o=It(e,r.schema),a=Ji(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...n})},GD=(t,e={})=>({state:n,commands:r})=>{const i=It(t,n.schema);return Ji(n,i,e)?r.lift(i):r.wrapIn(i,e)},KD=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},YD=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},XD=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=Si(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:h,to:f}=a;const p=(s=c.marks().find(m=>m.type===l))==null?void 0:s.attrs,g=Fm(c,l,p);g&&(h=g.from,f=g.to),n.removeMark(h,f,l)}else d.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},ZD=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=vh(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=It(t,r.schema)),a==="mark"&&(o=Si(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let d,h,f,p;n.selection.empty?r.doc.nodesBetween(c,u,(g,m)=>{s&&s===g.type&&(f=Math.max(m,c),p=Math.min(m+g.nodeSize,u),d=m,h=g)}):r.doc.nodesBetween(c,u,(g,m)=>{m<c&&s&&s===g.type&&(f=Math.max(m,c),p=Math.min(m+g.nodeSize,u),d=m,h=g),m>=c&&m<=u&&(s&&s===g.type&&n.setNodeMarkup(m,void 0,{...g.attrs,...e}),o&&g.marks.length&&g.marks.forEach(y=>{if(o===y.type){const b=Math.max(m,c),C=Math.min(m+g.nodeSize,u);n.addMark(b,C,o.create({...y.attrs,...e}))}}))}),h&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),o&&h.marks.length&&h.marks.forEach(g=>{o===g.type&&n.addMark(f,p,o.create({...g.attrs,...e}))}))}),!0):!1},JD=(t,e={})=>({state:n,dispatch:r})=>{const i=It(t,n.schema);return DL(i,e)(n,r)},QD=(t,e={})=>({state:n,dispatch:r})=>{const i=It(t,n.schema);return BL(i,e)(n,r)},eB=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},rc=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},tB=(t,e)=>{if($m(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Nc(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const d=OD(c)+s;return o.forEach(h=>{if(u)return;const f=tB(d,h.find);if(!f)return;const p=l.state.tr,g=yh({state:l.state,transaction:p}),m={from:r-(f[0].length-s.length),to:i},{commands:y,chain:b,can:C}=new bh({editor:n,state:g});h.handler({state:g,range:m,match:f,commands:y,chain:b,can:C})===null||!p.steps.length||(h.undoable&&p.setMeta(a,{transform:p,from:r,to:i,text:s}),l.dispatch(p),u=!0)}),u}function nB(t){const{editor:e,rules:n}=t,r=new Ge({state:{init(){return null},apply(i,s,o){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=Wm(V.from(u),o.schema);const{from:d}=l,h=d+u.length;Nc({editor:e,from:d,to:h,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return Nc({editor:e,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Nc({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Nc({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function rB(t){return Object.prototype.toString.call(t).slice(8,-1)}function Oc(t){return rB(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function ak(t,e){const n={...t};return Oc(t)&&Oc(e)&&Object.keys(e).forEach(r=>{Oc(e[r])&&Oc(t[r])?n[r]=ak(t[r],e[r]):n[r]=e[r]}),n}var Vm=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Qe(Se(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Qe(Se(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>ak(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},_i=class lk extends Vm{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new lk(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function iB(t){return typeof t=="number"}var sB=class{constructor(t){this.find=t.find,this.handler=t.handler}},oB=(t,e,n)=>{if($m(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function aB(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new bh({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(f,p)=>{var g,m,y,b,C;if((m=(g=f.type)==null?void 0:g.spec)!=null&&m.code||!(f.isText||f.isTextblock||f.isInline))return;const v=(C=(b=(y=f.content)==null?void 0:y.size)!=null?b:f.nodeSize)!=null?C:0,k=Math.max(r,p),w=Math.min(i,p+v);if(k>=w)return;const S=f.isText?f.text||"":f.textBetween(k-p,w-p,void 0,"");oB(S,s.find,o).forEach(I=>{if(I.index===void 0)return;const $=k+I.index+1,T=$+I[0].length,P={from:n.tr.mapping.map($),to:n.tr.mapping.map(T)},B=s.handler({state:n,range:P,match:I,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push(B)})}),d.every(f=>f!==null)}var Lc=null,lB=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function cB(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:h,rule:f,pasteEvt:p})=>{const g=u.tr,m=yh({state:u,transaction:g});if(!(!aB({editor:e,state:m,from:Math.max(d-1,0),to:h.b-1,rule:f,pasteEvent:p,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(u=>new Ge({view(d){const h=p=>{var g;r=(g=d.dom.parentElement)!=null&&g.contains(p.target)?d.dom.parentElement:null,r&&(Lc=e)},f=()=>{Lc&&(Lc=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",f),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",f)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(s=r===d.dom.parentElement,a=h,!s){const f=Lc;f!=null&&f.isEditable&&setTimeout(()=>{const p=f.state.selection;p&&f.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(d,h)=>{var f;const p=(f=h.clipboardData)==null?void 0:f.getData("text/html");return o=h,i=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(d,h,f)=>{const p=d[0],g=p.getMeta("uiEvent")==="paste"&&!i,m=p.getMeta("uiEvent")==="drop"&&!s,y=p.getMeta("applyPasteRules"),b=!!y;if(!g&&!m&&!b)return;if(b){let{text:k}=y;typeof k=="string"?k=k:k=Wm(V.from(k),f.schema);const{from:w}=y,S=w+k.length,E=lB(k);return l({rule:u,state:f,from:w,to:{b:S},pasteEvt:E})}const C=h.doc.content.findDiffStart(f.doc.content),v=h.doc.content.findDiffEnd(f.doc.content);if(!(!iB(C)||!v||C===v.b))return l({rule:u,state:f,from:C,to:v,pasteEvt:o})}}))}var kh=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=nk(t),this.schema=SD(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Af(e.name,this.schema)},r=Se(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return Um([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Af(r.name,this.schema)},s=[],o=Se(r,"addKeyboardShortcuts",i);let a={};if(r.type==="mark"&&Se(r,"exitable",i)&&(a.ArrowRight=()=>_i.handleExit({editor:t,mark:r})),o){const h=Object.fromEntries(Object.entries(o()).map(([f,p])=>[f,()=>p({editor:t})]));a={...a,...h}}const l=NI(a);s.push(l);const c=Se(r,"addInputRules",i);if(Ub(r,t.options.enableInputRules)&&c){const h=c();if(h&&h.length){const f=nB({editor:t,rules:h}),p=Array.isArray(f)?f:[f];s.push(...p)}}const u=Se(r,"addPasteRules",i);if(Ub(r,t.options.enablePasteRules)&&u){const h=u();if(h&&h.length){const f=cB({editor:t,rules:h});s.push(...f)}}const d=Se(r,"addProseMirrorPlugins",i);if(d){const h=d();s.push(...h)}return s})}get attributes(){return tk(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Ol(this.extensions);return Object.fromEntries(e.filter(n=>!!Se(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:It(n.name,this.schema)},s=Se(n,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const a=(l,c,u,d,h)=>{const f=Ll(l,r);return o({node:l,view:c,getPos:u,decorations:d,innerDecorations:h,editor:t,extension:n,HTMLAttributes:f})};return[n.name,a]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=Ol(this.extensions);return Object.fromEntries(e.filter(n=>!!Se(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Si(n.name,this.schema)},s=Se(n,"addMarkView",i);if(!s)return[];const o=(a,l,c)=>{const u=Ll(a,r);return s()({mark:a,view:l,inline:c,editor:t,extension:n,HTMLAttributes:u,updateAttributes:d=>{kB(a,t,d)}})};return[n.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Af(e.name,this.schema)};e.type==="mark"&&((n=Qe(Se(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=Se(e,"onBeforeCreate",r),s=Se(e,"onCreate",r),o=Se(e,"onUpdate",r),a=Se(e,"onSelectionUpdate",r),l=Se(e,"onTransaction",r),c=Se(e,"onFocus",r),u=Se(e,"onBlur",r),d=Se(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}};kh.resolve=nk;kh.sort=Um;kh.flatten=Hm;var uB={};Pm(uB,{ClipboardTextSerializer:()=>uk,Commands:()=>dk,Delete:()=>hk,Drop:()=>fk,Editable:()=>pk,FocusEvents:()=>mk,Keymap:()=>yk,Paste:()=>bk,Tabindex:()=>xk,focusEventsPluginKey:()=>gk});var Je=class ck extends Vm{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new ck(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},uk=Je.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ge({key:new rt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=ik(n);return rk(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),dk=Je.create({name:"commands",addCommands(){return{...jC}}}),hk=Je.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const s=()=>{var o,a,l,c;if((c=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?c:t.getMeta("y-sync$"))return;const u=zm(t.before,[t,...e]);jm(u).forEach(f=>{u.mapping.mapResult(f.oldRange.from).deletedAfter&&u.mapping.mapResult(f.oldRange.to).deletedBefore&&u.before.nodesBetween(f.oldRange.from,f.oldRange.to,(p,g)=>{const m=g+p.nodeSize-2,y=f.oldRange.from<=g&&m<=f.oldRange.to;this.editor.emit("delete",{type:"node",node:p,from:g,to:m,newFrom:u.mapping.map(g),newTo:u.mapping.map(m),deletedRange:f.oldRange,newRange:f.newRange,partial:!y,editor:this.editor,transaction:t,combinedTransform:u})})});const h=u.mapping;u.steps.forEach((f,p)=>{var g,m;if(f instanceof Sr){const y=h.slice(p).map(f.from,-1),b=h.slice(p).map(f.to),C=h.invert().map(y,-1),v=h.invert().map(b),k=(g=u.doc.nodeAt(y-1))==null?void 0:g.marks.some(S=>S.eq(f.mark)),w=(m=u.doc.nodeAt(b))==null?void 0:m.marks.some(S=>S.eq(f.mark));this.editor.emit("delete",{type:"mark",mark:f.mark,from:f.from,to:f.to,deletedRange:{from:C,to:v},newRange:{from:y,to:b},partial:!!(w||k),editor:this.editor,transaction:t,combinedTransform:u})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),fk=Je.create({name:"drop",addProseMirrorPlugins(){return[new Ge({key:new rt("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),pk=Je.create({name:"editable",addProseMirrorPlugins(){return[new Ge({key:new rt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),gk=new rt("focusEvents"),mk=Je.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Ge({key:gk,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),yk=Je.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:h,parent:f}=d,p=d.parent.isTextblock&&h>0?a.doc.resolve(h-1):d,g=p.parent.type.spec.isolating,m=d.pos-d.parentOffset,y=g&&p.parent.childCount===1?m===d.pos:Ie.atStart(c).from===h;return!u||!f.type.isTextblock||f.textContent.length||!y||y&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return xh()||XC()?s:i},addProseMirrorPlugins(){return[new Ge({key:new rt("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:a}=e.selection,l=Ie.atStart(e.doc).from,c=Ie.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!Ch(n.doc))return;const h=n.tr,f=yh({state:n,transaction:h}),{commands:p}=new bh({editor:this.editor,state:f});if(p.clearNodes(),!!h.steps.length)return h}})]}}),bk=Je.create({name:"paste",addProseMirrorPlugins(){return[new Ge({key:new rt("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),xk=Je.create({name:"tabindex",addProseMirrorPlugins(){return[new Ge({key:new rt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),dB=class To{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new To(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new To(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new To(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new To(a,this.editor,i,i?n:null);i&&(l.actualDepth=this.depth+1),e.push(new To(a,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(l=>n[l]===o.node.attrs[l])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},hB=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function fB(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var pB=class extends eB{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=GC(e,this.options.autofocus);this.editorState=Bo.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=fB(hB,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=ek(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[pk,uk.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),dk,mk,yk,xk,fk,bk,hk].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new kh(r,this)}createCommandManager(){this.commandManager=new bh({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=Wp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=Wp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new UC(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(c=>{var u;return(u=this.capturedTransaction)==null?void 0:u.step(c)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=n.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!n.some(c=>c.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return sk(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return LD(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Wm(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return ED(this.state.doc,{blockSeparator:e,textSerializers:{...ik(this.schema),...n}})}get isEmpty(){return Ch(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new dB(e,this)}get $doc(){return this.$pos(0)}};function Gs(t){return new rc({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Qe(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),u=c+o.length;if(qm(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(g=>g===t.type&&g!==f.mark.type)).filter(f=>f.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+l,c);const h=n.from+l+o.length;s.addMark(n.from+l,h,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function gB(t){return new rc({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Qe(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:t.undoable})}function jp(t){return new rc({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=Qe(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)},undoable:t.undoable})}function na(t){return new rc({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=Qe(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&bm(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:h}=e,{splittableMarks:f}=t.editor.extensionManager,p=h||d.$to.parentOffset&&d.$from.marks();if(p){const g=p.filter(m=>f.includes(m.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&ss(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)},undoable:t.undoable})}function mB(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof xe){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var yB={};Pm(yB,{createAtomBlockMarkdownSpec:()=>bB,createBlockMarkdownSpec:()=>xB,createInlineMarkdownSpec:()=>CB,parseAttributes:()=>Gm,parseIndentedBlocks:()=>qp,renderNestedMarkdownContent:()=>Ym,serializeAttributes:()=>Km});function Gm(t){if(!(t!=null&&t.trim()))return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,c=>(n.push(c),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const c=i.map(u=>u.trim().slice(1));e.class=c.join(" ")}const s=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,c,u])=>{var d;const h=parseInt(((d=u.match(/__QUOTED_(\d+)__/))==null?void 0:d[1])||"0",10),f=n[h];f&&(e[c]=f.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(u=>{u.match(/^[a-zA-Z][\w-]*$/)&&(e[u]=!0)}),e}function Km(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function bB(t){const{nodeName:e,name:n,parseAttributes:r=Gm,serializeAttributes:i=Km,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=t,l=n||e,c=u=>{if(!a)return u;const d={};return a.forEach(h=>{h in u&&(d[h]=u[h])}),d};return{parseMarkdown:(u,d)=>{const h={...s,...u.attributes};return d.createNode(e,h,[])},markdownTokenizer:{name:e,level:"block",start(u){var d;const h=new RegExp(`^:::${l}(?:\\s|$)`,"m"),f=(d=u.match(h))==null?void 0:d.index;return f!==void 0?f:-1},tokenize(u,d,h){const f=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),p=u.match(f);if(!p)return;const g=p[1]||"",m=r(g);if(!o.find(b=>!(b in m)))return{type:e,raw:p[0],attributes:m}}},renderMarkdown:u=>{const d=c(u.attrs||{}),h=i(d),f=h?` {${h}}`:"";return`:::${l}${f} :::`}}}function xB(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=Gm,serializeAttributes:s=Km,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,c=n||e,u=d=>{if(!l)return d;const h={};return l.forEach(f=>{f in d&&(h[f]=d[f])}),h};return{parseMarkdown:(d,h)=>{let f;if(r){const g=r(d);f=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?f=h.parseChildren(d.tokens||[]):f=h.parseInline(d.tokens||[]);const p={...o,...d.attributes};return h.createNode(e,p,f)},markdownTokenizer:{name:e,level:"block",start(d){var h;const f=new RegExp(`^:::${c}`,"m"),p=(h=d.match(f))==null?void 0:h.index;return p!==void 0?p:-1},tokenize(d,h,f){var p;const g=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),m=d.match(g);if(!m)return;const[y,b=""]=m,C=i(b);let v=1;const k=y.length;let w="";const S=/^:::([\w-]*)(\s.*)?/gm,E=d.slice(k);for(S.lastIndex=0;;){const I=S.exec(E);if(I===null)break;const $=I.index,T=I[1];if(!((p=I[2])!=null&&p.endsWith(":::"))){if(T)v+=1;else if(v-=1,v===0){const P=E.slice(0,$);w=P.trim();const B=d.slice(0,k+$+I[0].length);let A=[];if(w)if(a==="block")for(A=f.blockTokens(P),A.forEach(M=>{M.text&&(!M.tokens||M.tokens.length===0)&&(M.tokens=f.inlineTokens(M.text))});A.length>0;){const M=A[A.length-1];if(M.type==="paragraph"&&(!M.text||M.text.trim()===""))A.pop();else break}else A=f.inlineTokens(w);return{type:e,raw:B,attributes:C,content:w,tokens:A}}}}}},renderMarkdown:(d,h)=>{const f=u(d.attrs||{}),p=s(f),g=p?` {${p}}`:"",m=h.renderChildren(d.content||[],`

`);return`:::${c}${g}

${m}

:::`}}}function vB(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,i,s,o]=r;e[i]=s||o,r=n.exec(t)}return e}function wB(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function CB(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=vB,serializeAttributes:s=wB,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,c=n||e,u=h=>{if(!l)return h;const f={};return l.forEach(p=>{p in h&&(f[p]=h[p])}),f},d=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(h,f)=>{const p={...o,...h.attributes};if(a)return f.createNode(e,p);const g=r?r(h):h.content||"";return g?f.createNode(e,p,[f.createTextNode(g)]):f.createNode(e,p,[])},markdownTokenizer:{name:e,level:"inline",start(h){const f=a?new RegExp(`\\[${d}\\s*[^\\]]*\\]`):new RegExp(`\\[${d}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${d}\\]`),p=h.match(f),g=p==null?void 0:p.index;return g!==void 0?g:-1},tokenize(h,f,p){const g=a?new RegExp(`^\\[${d}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${d}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${d}\\]`),m=h.match(g);if(!m)return;let y="",b="";if(a){const[,v]=m;b=v}else{const[,v,k]=m;b=v,y=k||""}const C=i(b.trim());return{type:e,raw:m[0],content:y.trim(),attributes:C}}},renderMarkdown:h=>{let f="";r?f=r(h):h.content&&h.content.length>0&&(f=h.content.filter(y=>y.type==="text").map(y=>y.text).join(""));const p=u(h.attrs||{}),g=s(p),m=g?` ${g}`:"";return a?`[${c}${m}]`:`[${c}${m}]${f}[/${c}]`}}}function qp(t,e,n){var r,i,s,o;const a=t.split(`
`),l=[];let c="",u=0;const d=e.baseIndentSize||2;for(;u<a.length;){const h=a[u],f=h.match(e.itemPattern);if(!f){if(l.length>0)break;if(h.trim()===""){u+=1;continue}else return}const p=e.extractItemData(f),{indentLevel:g,mainContent:m}=p;c=`${c}${h}
`;const y=[m];for(u+=1;u<a.length;){const k=a[u];if(k.trim()===""){const S=a.slice(u+1).findIndex($=>$.trim()!=="");if(S===-1)break;if((((i=(r=a[u+1+S].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>g){y.push(k),c=`${c}${k}
`,u+=1;continue}else break}if((((o=(s=k.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>g)y.push(k),c=`${c}${k}
`,u+=1;else break}let b;const C=y.slice(1);if(C.length>0){const k=C.map(w=>w.slice(g+d)).join(`
`);k.trim()&&(e.customNestedParser?b=e.customNestedParser(k):b=n.blockTokens(k))}const v=e.createToken(p,b);l.push(v)}if(l.length!==0)return{items:l,raw:c.trim()}}function Ym(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const i=typeof n=="function"?n(r):n,[s,...o]=t.content,a=e.renderChildren([s]),l=[`${i}${a}`];return o&&o.length>0&&o.forEach(c=>{const u=e.renderChildren([c]);if(u){const d=u.split(`
`).map(h=>h?e.indent(h):"").join(`
`);l.push(d)}}),l.join(`
`)}function kB(t,e,n={}){const{state:r}=e,{doc:i,tr:s}=r,o=t;i.descendants((a,l)=>{const c=s.mapping.map(l),u=s.mapping.map(l)+a.nodeSize;let d=null;if(a.marks.forEach(f=>{if(f!==o)return!1;d=f}),!d)return;let h=!1;if(Object.keys(n).forEach(f=>{n[f]!==d.attrs[f]&&(h=!0)}),h){const f=t.type.create({...t.attrs,...n});s.removeMark(c,u,t.type),s.addMark(c,u,f)}}),s.docChanged&&e.view.dispatch(s)}var _t=class vk extends Vm{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new vk(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},SB=class{constructor(t,e,n){this.isDragging=!1,this.component=t,this.editor=e.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=e.extension,this.node=e.node,this.decorations=e.decorations,this.innerDecorations=e.innerDecorations,this.view=e.view,this.HTMLAttributes=e.HTMLAttributes,this.getPos=e.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var e,n,r,i,s,o,a;const{view:l}=this.editor,c=t.target,u=c.nodeType===3?(e=c.parentElement)==null?void 0:e.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||(n=this.contentDOM)!=null&&n.contains(c)||!u)return;let d=0,h=0;if(this.dom!==u){const b=this.dom.getBoundingClientRect(),C=u.getBoundingClientRect(),v=(i=t.offsetX)!=null?i:(r=t.nativeEvent)==null?void 0:r.offsetX,k=(o=t.offsetY)!=null?o:(s=t.nativeEvent)==null?void 0:s.offsetY;d=C.x-b.x+v,h=C.y-b.y+k}const f=this.dom.cloneNode(!0);try{const b=this.dom.getBoundingClientRect();f.style.width=`${Math.round(b.width)}px`,f.style.height=`${Math.round(b.height)}px`,f.style.boxSizing="border-box",f.style.pointerEvents="none"}catch{}let p=null;try{p=document.createElement("div"),p.style.position="absolute",p.style.top="-9999px",p.style.left="-9999px",p.style.pointerEvents="none",p.appendChild(f),document.body.appendChild(p),(a=t.dataTransfer)==null||a.setDragImage(f,d,h)}finally{p&&setTimeout(()=>{try{p==null||p.remove()}catch{}},0)}const g=this.getPos();if(typeof g!="number")return;const m=xe.create(l.state.doc,g),y=l.state.tr.setSelection(m);l.dispatch(y)}stopEvent(t){var e;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:t});const n=t.target;if(!(this.dom.contains(n)&&!((e=this.contentDOM)!=null&&e.contains(n))))return!1;const i=t.type.startsWith("drag"),s=t.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!s&&!i)return!0;const{isEditable:a}=this.editor,{isDragging:l}=this,c=!!this.node.type.spec.draggable,u=xe.isSelectable(this.node),d=t.type==="copy",h=t.type==="paste",f=t.type==="cut",p=t.type==="mousedown";if(!c&&u&&i&&t.target===this.dom&&t.preventDefault(),c&&i&&!l&&t.target===this.dom)return t.preventDefault(),!1;if(c&&a&&!l&&p){const g=n.closest("[data-drag-handle]");g&&(this.dom===g||this.dom.contains(g))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(l||s||d||h||f||p&&u)}ignoreMutation(t){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:t}):this.node.isLeaf||this.node.isAtom?!0:t.type==="selection"||this.dom.contains(t.target)&&t.type==="childList"&&(xh()||KC())&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(n=>n.isContentEditable)?!1:this.contentDOM===t.target&&t.type==="attributes"?!0:!this.contentDOM.contains(t.target)}updateAttributes(t){this.editor.commands.command(({tr:e})=>{const n=this.getPos();return typeof n!="number"?!1:(e.setNodeMarkup(n,void 0,{...this.node.attrs,...t}),!0)})}deleteNode(){const t=this.getPos();if(typeof t!="number")return;const e=t+this.node.nodeSize;this.editor.commands.deleteRange({from:t,to:e})}};function Qi(t){return new sB({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=Qe(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),h=d+a.length;if(qm(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(m=>m===t.type&&m!==p.mark.type)).filter(p=>p.to>d).length)return null;h<n.to&&o.delete(h,n.to),d>n.from&&o.delete(n.from+u,d),c=n.from+u+a.length,o.addMark(n.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}var Lf,Vb;function _B(){return Vb||(Vb=1,Lf=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}),Lf}var EB=_B();const TB=gm(EB);var Rf={exports:{}},If={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gb;function MB(){if(Gb)return If;Gb=1;var t=iw(),e=yw();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return If.useSyncExternalStoreWithSelector=function(c,u,d,h,f){var p=s(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=a(function(){function y(w){if(!b){if(b=!0,C=w,w=h(w),f!==void 0&&g.hasValue){var S=g.value;if(f(S,w))return v=S}return v=w}if(S=v,r(C,w))return S;var E=h(w);return f!==void 0&&f(S,E)?(C=w,S):(C=w,v=E)}var b=!1,C,v,k=d===void 0?null:d;return[function(){return y(u())},k===null?void 0:function(){return y(k())}]},[u,d,h,f]);var m=i(c,p[0],p[1]);return o(function(){g.hasValue=!0,g.value=m},[m]),l(m),m},If}var Kb;function AB(){return Kb||(Kb=1,Rf.exports=MB()),Rf.exports}var NB=AB(),OB=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},LB=({contentComponent:t})=>{const e=bw.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return _.jsx(_.Fragment,{children:Object.values(e)})};function RB(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:yO.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}var IB=class extends sr.Component{constructor(t){var e;super(t),this.editorContentRef=sr.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(t.view.dom),t.setOptions({element:e}),t.contentComponent=RB(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.firstChild))return;const n=document.createElement("div");n.append(e.view.dom),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return _.jsxs(_.Fragment,{children:[_.jsx("div",{ref:OB(e,this.editorContentRef),...n}),(t==null?void 0:t.contentComponent)&&_.jsx(LB,{contentComponent:t.contentComponent})]})}},DB=L.forwardRef((t,e)=>{const n=sr.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return sr.createElement(IB,{key:n,innerRef:e,...t})}),BB=sr.memo(DB),PB=typeof window<"u"?L.useLayoutEffect:L.useEffect,$B=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function FB(t){var e;const[n]=L.useState(()=>new $B(t.editor)),r=NB.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:TB);return PB(()=>n.watch(t.editor),[t.editor,n]),L.useDebugValue(r),r}var zB=!1,Vp=typeof window>"u",HB=Vp||!!(typeof window<"u"&&window.next),WB=class wk{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Vp||HB?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new pB(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?wk.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function UB(t={},e=[]){const n=L.useRef(t);n.current=t;const[r]=L.useState(()=>new WB(n)),i=bw.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return L.useDebugValue(i),L.useEffect(r.onRender(e)),FB({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var jB=L.createContext({editor:null});jB.Consumer;var Ck=L.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),kk=()=>L.useContext(Ck);function Xm({as:t="div",...e}){const{nodeViewContentRef:n,nodeViewContentChildren:r}=kk();return _.jsx(t,{...e,ref:n,"data-node-view-content":"",style:{whiteSpace:"pre-wrap",...e.style},children:r})}var Sh=sr.forwardRef((t,e)=>{const{onDragStart:n}=kk(),r=t.as||"div";return _.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function Yb(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function Xb(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.forward_ref)"||t.$$typeof.description==="react.forward_ref"))}function qB(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.memo)"||t.$$typeof.description==="react.memo"))}function VB(t){if(Yb(t)||Xb(t))return!0;if(qB(t)){const e=t.type;if(e)return Yb(e)||Xb(e)}return!1}function GB(){try{if(L.version)return parseInt(L.version.split(".")[0],10)>=19}catch{}return!1}var KB=class{constructor(t,{editor:e,props:n={},as:r="div",className:i=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=t,this.editor=e,this.props=n,this.element=document.createElement(r),this.element.classList.add("react-renderer"),i&&this.element.classList.add(...i.split(" ")),this.editor.isInitialized?sw.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var t;const e=this.component,n=this.props,r=this.editor,i=GB(),s=VB(e),o={...n};o.ref&&!(i||s)&&delete o.ref,!o.ref&&(i||s)&&(o.ref=a=>{this.ref=a}),this.reactElement=_.jsx(e,{...o}),(t=r==null?void 0:r.contentComponent)==null||t.setRenderer(this.id,this)}updateProps(t={}){this.props={...this.props,...t},this.render()}destroy(){var t;const e=this.editor;(t=e==null?void 0:e.contentComponent)==null||t.removeRenderer(this.id);try{this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}catch{}}updateAttributes(t){Object.keys(t).forEach(e=>{this.element.setAttribute(e,t[e])})}};sr.createContext({markViewContentRef:()=>{}});var YB=class extends SB{constructor(t,e,n){if(super(t,e,n),!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const r=this.dom.querySelector("[data-node-view-content]");if(!r)return;r.appendChild(this.contentDOMElement)}}mount(){const t={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(l={})=>this.updateAttributes(l),deleteNode:()=>this.deleteNode(),ref:L.createRef()};if(!this.component.displayName){const l=c=>c.charAt(0).toUpperCase()+c.substring(1);this.component.displayName=l(this.extension.name)}const r={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:l=>{l&&this.contentDOMElement&&l.firstChild!==this.contentDOMElement&&(l.hasAttribute("data-node-view-wrapper")&&l.removeAttribute("data-node-view-wrapper"),l.appendChild(this.contentDOMElement))}},i=this.component,s=L.memo(l=>_.jsx(Ck.Provider,{value:r,children:L.createElement(i,l)}));s.displayName="ReactNodeView";let o=this.node.isInline?"span":"div";this.options.as&&(o=this.options.as);const{className:a=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new KB(s,{editor:this.editor,props:t,as:o,className:`node-${this.node.type.name} ${a}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var t;if(this.renderer.element.firstElementChild&&!((t=this.renderer.element.firstElementChild)!=null&&t.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:t,to:e}=this.editor.state.selection,n=this.getPos();if(typeof n=="number")if(t<=n&&e>=n+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(t,e,n){const r=i=>{this.renderer.updateProps(i),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(t.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const i=this.node,s=this.decorations,o=this.innerDecorations;return this.node=t,this.decorations=e,this.innerDecorations=n,this.options.update({oldNode:i,oldDecorations:s,newNode:t,newDecorations:e,oldInnerDecorations:o,innerDecorations:n,updateProps:()=>r({node:t,decorations:e,innerDecorations:n})})}return t===this.node&&this.decorations===e&&this.innerDecorations===n||(this.node=t,this.decorations=e,this.innerDecorations=n,r({node:t,decorations:e,innerDecorations:n})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let t={};if(typeof this.options.attrs=="function"){const e=this.editor.extensionManager.attributes,n=Ll(this.node,e);t=this.options.attrs({node:this.node,HTMLAttributes:n})}else t=this.options.attrs;this.renderer.updateAttributes(t)}}};function _h(t,e){return n=>n.editor.contentComponent?new YB(t,n,e):{}}var qu=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},XB=/^\s*>\s$/,ZB=_t.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return qu("blockquote",{...Ze(this.options.HTMLAttributes,t),children:qu("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(i=>{const a=e.renderChildren([i]).split(`
`).map(l=>l.trim()===""?n:`${n} ${l}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[na({find:XB,type:this.type})]}}),JB=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,QB=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,eP=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,tP=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,nP=_i.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return qu("strong",{...Ze(this.options.HTMLAttributes,t),children:qu("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Gs({find:JB,type:this.type}),Gs({find:eP,type:this.type})]},addPasteRules(){return[Qi({find:QB,type:this.type}),Qi({find:tP,type:this.type})]}}),rP=/(^|[^`])`([^`]+)`(?!`)$/,iP=/(^|[^`])`([^`]+)`(?!`)/g,sP=_i.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Ze(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Gs({find:rP,type:this.type})]},addPasteRules(){return[Qi({find:iP,type:this.type})]}}),Df=4,oP=/^```([a-z]+)?[\s\n]$/,aP=/^~~~([a-z]+)?[\s\n]$/,Sk=_t.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Df,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Ze(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const i=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Df,{state:r}=t,{selection:i}=r,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(n);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:c,to:u}=i,f=r.doc.textBetween(c,u,`
`,`
`).split(`
`).map(p=>a+p).join(`
`);return l.replaceWith(c,u,r.schema.text(f)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Df,{state:r}=t,{selection:i}=r,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:c}=s,u=s.start(),d=s.end(),f=r.doc.textBetween(u,d,`
`,`
`).split(`
`);let p=0,g=0;const m=c-u;for(let w=0;w<f.length;w+=1){if(g+f[w].length>=m){p=w;break}g+=f[w].length+1}const b=((l=f[p].match(/^ */))==null?void 0:l[0])||"",C=Math.min(b.length,n);if(C===0)return!0;let v=u;for(let w=0;w<p;w+=1)v+=f[w].length+1;return a.delete(v,v+C),c-v<=C&&a.setSelection(Te.create(a.doc,v)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:c}=i,h=r.doc.textBetween(l,c,`
`,`
`).split(`
`).map(f=>{var p;const g=((p=f.match(/^ */))==null?void 0:p[0])||"",m=Math.min(g.length,n);return f.slice(m)}).join(`
`);return a.replaceWith(l,c,r.schema.text(h)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(Ie.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[jp({find:oP,type:this.type,getAttributes:t=>({language:t[1]})}),jp({find:aP,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Ge({key:new rt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Te.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),lP=Sk,cP=_t.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),uP=_t.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Ze(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const d=l.filter(h=>a.includes(h.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),_k=_t.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Ze(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,i="#".repeat(r);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>jp({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),dP=_k,hP=_t.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Ze(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!mB(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return ok(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(Te.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(xe.create(o.doc,l.pos)):o.setSelection(Te.create(o.doc,l.pos));else{const u=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,d=u==null?void 0:u.create();d&&(o.insert(c,d),o.setSelection(Te.create(o.doc,c+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[gB({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),fP=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,pP=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,gP=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,mP=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,yP=_i.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Ze(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Gs({find:fP,type:this.type}),Gs({find:gP,type:this.type})]},addPasteRules(){return[Qi({find:pP,type:this.type}),Qi({find:mP,type:this.type})]}});const bP="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",xP="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Gp="numeric",Kp="ascii",Yp="alpha",al="asciinumeric",Ga="alphanumeric",Xp="domain",Ek="emoji",vP="scheme",wP="slashscheme",Bf="whitespace";function CP(t,e){return t in e||(e[t]=[]),e[t]}function As(t,e,n){e[Gp]&&(e[al]=!0,e[Ga]=!0),e[Kp]&&(e[al]=!0,e[Yp]=!0),e[al]&&(e[Ga]=!0),e[Yp]&&(e[Ga]=!0),e[Ga]&&(e[Xp]=!0),e[Ek]&&(e[Xp]=!0);for(const r in e){const i=CP(r,n);i.indexOf(t)<0&&i.push(t)}}function kP(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Ln(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Ln.groups={};Ln.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||Ln.groups;let i;return e&&e.j?i=e:(i=new Ln(e),n&&r&&As(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||Ln.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,a=i.go(t);if(a?(o=new Ln,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Ln,s){if(r)if(o.t&&typeof o.t=="string"){const l=Object.assign(kP(o.t,r),n);As(s,l,r)}else n&&As(s,n,r);o.t=s}return i.j[t]=o,o}};const Fe=(t,e,n,r,i)=>t.ta(e,n,r,i),vt=(t,e,n,r,i)=>t.tr(e,n,r,i),Zb=(t,e,n,r,i)=>t.ts(e,n,r,i),ee=(t,e,n,r,i)=>t.tt(e,n,r,i),li="WORD",Zp="UWORD",Tk="ASCIINUMERICAL",Mk="ALPHANUMERICAL",Rl="LOCALHOST",Jp="TLD",Qp="UTLD",hu="SCHEME",Mo="SLASH_SCHEME",Zm="NUM",eg="WS",Jm="NL",ll="OPENBRACE",cl="CLOSEBRACE",Vu="OPENBRACKET",Gu="CLOSEBRACKET",Ku="OPENPAREN",Yu="CLOSEPAREN",Xu="OPENANGLEBRACKET",Zu="CLOSEANGLEBRACKET",Ju="FULLWIDTHLEFTPAREN",Qu="FULLWIDTHRIGHTPAREN",ed="LEFTCORNERBRACKET",td="RIGHTCORNERBRACKET",nd="LEFTWHITECORNERBRACKET",rd="RIGHTWHITECORNERBRACKET",id="FULLWIDTHLESSTHAN",sd="FULLWIDTHGREATERTHAN",od="AMPERSAND",ad="APOSTROPHE",ld="ASTERISK",Ii="AT",cd="BACKSLASH",ud="BACKTICK",dd="CARET",$i="COLON",Qm="COMMA",hd="DOLLAR",Fr="DOT",fd="EQUALS",e0="EXCLAMATION",tr="HYPHEN",ul="PERCENT",pd="PIPE",gd="PLUS",md="POUND",dl="QUERY",t0="QUOTE",Ak="FULLWIDTHMIDDLEDOT",n0="SEMI",zr="SLASH",hl="TILDE",yd="UNDERSCORE",Nk="EMOJI",bd="SYM";var Ok=Object.freeze({__proto__:null,ALPHANUMERICAL:Mk,AMPERSAND:od,APOSTROPHE:ad,ASCIINUMERICAL:Tk,ASTERISK:ld,AT:Ii,BACKSLASH:cd,BACKTICK:ud,CARET:dd,CLOSEANGLEBRACKET:Zu,CLOSEBRACE:cl,CLOSEBRACKET:Gu,CLOSEPAREN:Yu,COLON:$i,COMMA:Qm,DOLLAR:hd,DOT:Fr,EMOJI:Nk,EQUALS:fd,EXCLAMATION:e0,FULLWIDTHGREATERTHAN:sd,FULLWIDTHLEFTPAREN:Ju,FULLWIDTHLESSTHAN:id,FULLWIDTHMIDDLEDOT:Ak,FULLWIDTHRIGHTPAREN:Qu,HYPHEN:tr,LEFTCORNERBRACKET:ed,LEFTWHITECORNERBRACKET:nd,LOCALHOST:Rl,NL:Jm,NUM:Zm,OPENANGLEBRACKET:Xu,OPENBRACE:ll,OPENBRACKET:Vu,OPENPAREN:Ku,PERCENT:ul,PIPE:pd,PLUS:gd,POUND:md,QUERY:dl,QUOTE:t0,RIGHTCORNERBRACKET:td,RIGHTWHITECORNERBRACKET:rd,SCHEME:hu,SEMI:n0,SLASH:zr,SLASH_SCHEME:Mo,SYM:bd,TILDE:hl,TLD:Jp,UNDERSCORE:yd,UTLD:Qp,UWORD:Zp,WORD:li,WS:eg});const ii=/[a-z]/,Ma=new RegExp("\\p{L}","u"),Pf=new RegExp("\\p{Emoji}","u"),si=/\d/,$f=/\s/,Jb="\r",Ff=`
`,SP="",_P="",zf="";let Rc=null,Ic=null;function EP(t=[]){const e={};Ln.groups=e;const n=new Ln;Rc==null&&(Rc=Qb(bP)),Ic==null&&(Ic=Qb(xP)),ee(n,"'",ad),ee(n,"{",ll),ee(n,"}",cl),ee(n,"[",Vu),ee(n,"]",Gu),ee(n,"(",Ku),ee(n,")",Yu),ee(n,"<",Xu),ee(n,">",Zu),ee(n,"",Ju),ee(n,"",Qu),ee(n,"",ed),ee(n,"",td),ee(n,"",nd),ee(n,"",rd),ee(n,"",id),ee(n,"",sd),ee(n,"&",od),ee(n,"*",ld),ee(n,"@",Ii),ee(n,"`",ud),ee(n,"^",dd),ee(n,":",$i),ee(n,",",Qm),ee(n,"$",hd),ee(n,".",Fr),ee(n,"=",fd),ee(n,"!",e0),ee(n,"-",tr),ee(n,"%",ul),ee(n,"|",pd),ee(n,"+",gd),ee(n,"#",md),ee(n,"?",dl),ee(n,'"',t0),ee(n,"/",zr),ee(n,";",n0),ee(n,"~",hl),ee(n,"_",yd),ee(n,"\\",cd),ee(n,"",Ak);const r=vt(n,si,Zm,{[Gp]:!0});vt(r,si,r);const i=vt(r,ii,Tk,{[al]:!0}),s=vt(r,Ma,Mk,{[Ga]:!0}),o=vt(n,ii,li,{[Kp]:!0});vt(o,si,i),vt(o,ii,o),vt(i,si,i),vt(i,ii,i);const a=vt(n,Ma,Zp,{[Yp]:!0});vt(a,ii),vt(a,si,s),vt(a,Ma,a),vt(s,si,s),vt(s,ii),vt(s,Ma,s);const l=ee(n,Ff,Jm,{[Bf]:!0}),c=ee(n,Jb,eg,{[Bf]:!0}),u=vt(n,$f,eg,{[Bf]:!0});ee(n,zf,u),ee(c,Ff,l),ee(c,zf,u),vt(c,$f,u),ee(u,Jb),ee(u,Ff),vt(u,$f,u),ee(u,zf,u);const d=vt(n,Pf,Nk,{[Ek]:!0});ee(d,"#"),vt(d,Pf,d),ee(d,SP,d);const h=ee(d,_P);ee(h,"#"),vt(h,Pf,d);const f=[[ii,o],[si,i]],p=[[ii,null],[Ma,a],[si,s]];for(let g=0;g<Rc.length;g++)Ni(n,Rc[g],Jp,li,f);for(let g=0;g<Ic.length;g++)Ni(n,Ic[g],Qp,Zp,p);As(Jp,{tld:!0,ascii:!0},e),As(Qp,{utld:!0,alpha:!0},e),Ni(n,"file",hu,li,f),Ni(n,"mailto",hu,li,f),Ni(n,"http",Mo,li,f),Ni(n,"https",Mo,li,f),Ni(n,"ftp",Mo,li,f),Ni(n,"ftps",Mo,li,f),As(hu,{scheme:!0,ascii:!0},e),As(Mo,{slashscheme:!0,ascii:!0},e),t=t.sort((g,m)=>g[0]>m[0]?1:-1);for(let g=0;g<t.length;g++){const m=t[g][0],b=t[g][1]?{[vP]:!0}:{[wP]:!0};m.indexOf("-")>=0?b[Xp]=!0:ii.test(m)?si.test(m)?b[al]=!0:b[Kp]=!0:b[Gp]=!0,Zb(n,m,m,b)}return Zb(n,"localhost",Rl,{ascii:!0}),n.jd=new Ln(bd),{start:n,tokens:Object.assign({groups:e},Ok)}}function Lk(t,e){const n=TP(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let a=t,l=null,c=0,u=null,d=-1,h=-1;for(;o<r&&(l=a.go(n[o]));)a=l,a.accepts()?(d=0,h=0,u=a):d>=0&&(d+=n[o].length,h++),c+=n[o].length,s+=n[o].length,o++;s-=d,o-=h,c-=d,i.push({t:u.t,v:e.slice(s-c,s),s:s-c,e:s})}return i}function TP(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function Ni(t,e,n,r,i){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new Ln(r),s.jr=i.slice(),t.j[l]=s),t=s}return s=new Ln(n),s.jr=i.slice(),t.j[e[o-1]]=s,s}function Qb(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let s=0;for(;i.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(t[r]),r++}return e}const Il={defaultProtocol:"http",events:null,format:ex,formatHref:ex,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function r0(t,e=null){let n=Object.assign({},Il);t&&(n=Object.assign(n,t instanceof r0?t.o:t));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}r0.prototype={o:Il,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Il[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function ex(t){return t}function Rk(t,e){this.t="token",this.v=t,this.tk=e}Rk.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Il.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),s=this.toFormattedString(t),o={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),u=t.getObj("attributes",n,e),d=t.getObj("events",n,e);return o.href=r,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),u&&Object.assign(o,u),{tagName:i,attributes:o,content:s,eventListeners:d}}};function Eh(t,e){class n extends Rk{constructor(i,s){super(i,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const tx=Eh("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),nx=Eh("text"),MP=Eh("nl"),Dc=Eh("url",{isLink:!0,toHref(t=Il.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Rl&&t[1].t===$i}}),Qn=t=>new Ln(t);function AP({groups:t}){const e=t.domain.concat([od,ld,Ii,cd,ud,dd,hd,fd,tr,Zm,ul,pd,gd,md,zr,bd,hl,yd]),n=[ad,$i,Qm,Fr,e0,ul,dl,t0,n0,Xu,Zu,ll,cl,Gu,Vu,Ku,Yu,Ju,Qu,ed,td,nd,rd,id,sd],r=[od,ad,ld,cd,ud,dd,hd,fd,tr,ll,cl,ul,pd,gd,md,dl,zr,bd,hl,yd],i=Qn(),s=ee(i,hl);Fe(s,r,s),Fe(s,t.domain,s);const o=Qn(),a=Qn(),l=Qn();Fe(i,t.domain,o),Fe(i,t.scheme,a),Fe(i,t.slashscheme,l),Fe(o,r,s),Fe(o,t.domain,o);const c=ee(o,Ii);ee(s,Ii,c),ee(a,Ii,c),ee(l,Ii,c);const u=ee(s,Fr);Fe(u,r,s),Fe(u,t.domain,s);const d=Qn();Fe(c,t.domain,d),Fe(d,t.domain,d);const h=ee(d,Fr);Fe(h,t.domain,d);const f=Qn(tx);Fe(h,t.tld,f),Fe(h,t.utld,f),ee(c,Rl,f);const p=ee(d,tr);ee(p,tr,p),Fe(p,t.domain,d),Fe(f,t.domain,d),ee(f,Fr,h),ee(f,tr,p);const g=ee(f,$i);Fe(g,t.numeric,tx);const m=ee(o,tr),y=ee(o,Fr);ee(m,tr,m),Fe(m,t.domain,o),Fe(y,r,s),Fe(y,t.domain,o);const b=Qn(Dc);Fe(y,t.tld,b),Fe(y,t.utld,b),Fe(b,t.domain,o),Fe(b,r,s),ee(b,Fr,y),ee(b,tr,m),ee(b,Ii,c);const C=ee(b,$i),v=Qn(Dc);Fe(C,t.numeric,v);const k=Qn(Dc),w=Qn();Fe(k,e,k),Fe(k,n,w),Fe(w,e,k),Fe(w,n,w),ee(b,zr,k),ee(v,zr,k);const S=ee(a,$i),E=ee(l,$i),I=ee(E,zr),$=ee(I,zr);Fe(a,t.domain,o),ee(a,Fr,y),ee(a,tr,m),Fe(l,t.domain,o),ee(l,Fr,y),ee(l,tr,m),Fe(S,t.domain,k),ee(S,zr,k),ee(S,dl,k),Fe($,t.domain,k),Fe($,e,k),ee($,zr,k);const T=[[ll,cl],[Vu,Gu],[Ku,Yu],[Xu,Zu],[Ju,Qu],[ed,td],[nd,rd],[id,sd]];for(let P=0;P<T.length;P++){const[B,A]=T[P],M=ee(k,B);ee(w,B,M),ee(M,A,k);const O=Qn(Dc);Fe(M,e,O);const F=Qn();Fe(M,n),Fe(O,e,O),Fe(O,n,F),Fe(F,e,O),Fe(F,n,F),ee(O,A,k),ee(F,A,k)}return ee(i,Rl,b),ee(i,Jm,MP),{start:i,tokens:Ok}}function NP(t,e,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let a=t,l=null,c=null,u=0,d=null,h=-1;for(;i<r&&!(l=a.go(n[i].t));)o.push(n[i++]);for(;i<r&&(c=l||a.go(n[i].t));)l=null,a=c,a.accepts()?(h=0,d=a):h>=0&&h++,i++,u++;if(h<0)i-=u,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(Hf(nx,e,o)),o=[]),i-=h,u-=h;const f=d.t,p=n.slice(i-u,i);s.push(Hf(f,e,p))}}return o.length>0&&s.push(Hf(nx,e,o)),s}function Hf(t,e,n){const r=n[0].s,i=n[n.length-1].e,s=e.slice(r,i);return new t(s,n)}const OP=typeof console<"u"&&console&&console.warn||(()=>{}),LP="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",mt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function RP(){return Ln.groups={},mt.scanner=null,mt.parser=null,mt.tokenQueue=[],mt.pluginQueue=[],mt.customSchemes=[],mt.initialized=!1,mt}function rx(t,e=!1){if(mt.initialized&&OP(`linkifyjs: already initialized - will not register custom scheme "${t}" ${LP}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);mt.customSchemes.push([t,e])}function IP(){mt.scanner=EP(mt.customSchemes);for(let t=0;t<mt.tokenQueue.length;t++)mt.tokenQueue[t][1]({scanner:mt.scanner});mt.parser=AP(mt.scanner.tokens);for(let t=0;t<mt.pluginQueue.length;t++)mt.pluginQueue[t][1]({scanner:mt.scanner,parser:mt.parser});return mt.initialized=!0,mt}function i0(t){return mt.initialized||IP(),NP(mt.parser.start,t,Lk(mt.scanner.start,t))}i0.scan=Lk;function Ik(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new r0(n),i=i0(t),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!e||a.t===e)&&r.check(a)&&s.push(a.toFormattedObject(r))}return s}var s0="[\0- -\u2029]",DP=new RegExp(s0),BP=new RegExp(`${s0}$`),PP=new RegExp(s0,"g");function $P(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function FP(t){return new Ge({key:new rt("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,a=zm(n.doc,[...e]);if(jm(a).forEach(({newRange:c})=>{const u=JC(r.doc,c,f=>f.isTextblock);let d,h;if(u.length>1)d=u[0],h=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(u.length){const f=r.doc.textBetween(c.from,c.to," "," ");if(!BP.test(f))return;d=u[0],h=r.doc.textBetween(d.pos,c.to,void 0," ")}if(d&&h){const f=h.split(DP).filter(Boolean);if(f.length<=0)return!1;const p=f[f.length-1],g=d.pos+h.lastIndexOf(p);if(!p)return!1;const m=i0(p).map(y=>y.toObject(t.defaultProtocol));if(!$P(m))return!1;m.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>r.schema.marks.code?!r.doc.rangeHasMark(y.from,y.to,r.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{qm(y.from,y.to,r.doc).some(b=>b.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function zP(t){return new Ge({key:new rt("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let u=r.target;const d=[];for(;u.nodeName!=="DIV";)d.push(u),u=u.parentNode;o=d.find(h=>h.nodeName==="A")}if(!o)return!1;const a=sk(e.state,t.type.name),l=(i=o==null?void 0:o.href)!=null?i:a.href,c=(s=o==null?void 0:o.target)!=null?s:a.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),o&&l?(window.open(l,c),!0):!1}}})}function HP(t){return new Ge({key:new rt("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:i}=t,{state:s}=e,{selection:o}=s,{empty:a}=o;if(a)return!1;let l="";r.content.forEach(u=>{l+=u.textContent});const c=Ik(l,{defaultProtocol:t.defaultProtocol}).find(u=>u.isLink&&u.value===l);return!l||!c||i!==void 0&&!i(c.href)?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function xs(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(PP,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var WP=_i.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){rx(t);return}rx(t.scheme,t.optionalSlashes)})},onDestroy(){RP()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!xs(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!xs(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!xs(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ze(this.options.HTMLAttributes,t),0]:["a",Ze(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!xs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!xs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Qi({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=Ik(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!xs(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(FP({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!xs(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(zP({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(HP({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),UP=Object.defineProperty,jP=(t,e)=>{for(var n in e)UP(t,n,{get:e[n],enumerable:!0})},qP="listItem",ix="textStyle",sx=/^\s*([-+*])\s$/,Dk=_t.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Ze(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(qP,this.editor.getAttributes(ix)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=na({find:sx,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=na({find:sx,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(ix),editor:this.editor})),[t]}}),Bk=_t.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Ze(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))n=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);n.push(...a)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>Ym(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),VP={};jP(VP,{findListItemPos:()=>ic,getNextListDepth:()=>o0,handleBackspace:()=>tg,handleDelete:()=>ng,hasListBefore:()=>Pk,hasListItemAfter:()=>GP,hasListItemBefore:()=>$k,listItemHasSubList:()=>Fk,nextListIsDeeper:()=>zk,nextListIsHigher:()=>Hk});var ic=(t,e)=>{const{$from:n}=e.selection,r=It(t,e.schema);let i=null,s=n.depth,o=n.pos,a=null;for(;s>0&&a===null;)i=n.node(s),i.type===r?a=s:(s-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},o0=(t,e)=>{const n=ic(t,e);if(!n)return!1;const[,r]=ND(e,t,n.$pos.pos+4);return r},Pk=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),s=t.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},$k=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},Fk=(t,e,n)=>{if(!n)return!1;const r=It(t,e.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},tg=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Ji(t.state,e)&&Pk(t.state,e,n)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),c=[];l.node().descendants((h,f)=>{h.type.name===e&&c.push({node:h,pos:f})});const u=c.at(-1);if(!u)return!1;const d=t.state.doc.resolve(l.start()+u.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},d.end()).joinForward().run()}if(!Ji(t.state,e)||!ID(t.state))return!1;const r=ic(e,t.state);if(!r)return!1;const s=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=Fk(e,t.state,s);return $k(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},zk=(t,e)=>{const n=o0(t,e),r=ic(t,e);return!r||!n?!1:n>r.depth},Hk=(t,e)=>{const n=o0(t,e),r=ic(t,e);return!r||!n?!1:n<r.depth},ng=(t,e)=>{if(!Ji(t.state,e)||!RD(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:zk(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():Hk(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},GP=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},Wk=Je.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&ng(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&ng(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&tg(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&tg(t,n,r)&&(e=!0)}),e}}}}),ox=/^(\s*)(\d+)\.\s+(.*)$/,KP=/^\s/;function YP(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n],s=i.match(ox);if(!s)break;const[,o,a,l]=s,c=o.length;let u=l,d=n+1;const h=[i];for(;d<t.length;){const f=t[d];if(f.match(ox))break;if(f.trim()==="")h.push(f),u+=`
`,d+=1;else if(f.match(KP))h.push(f),u+=`
${f.slice(c+2)}`,d+=1;else break}e.push({indent:c,number:parseInt(a,10),content:u.trim(),raw:h.join(`
`)}),r=d,n=d}return[e,r]}function Uk(t,e,n){var r;const i=[];let s=0;for(;s<t.length;){const o=t[s];if(o.indent===e){const a=o.content.split(`
`),l=((r=a[0])==null?void 0:r.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:n.inlineTokens(l)});const u=a.slice(1).join(`
`).trim();if(u){const f=n.blockTokens(u);c.push(...f)}let d=s+1;const h=[];for(;d<t.length&&t[d].indent>e;)h.push(t[d]),d+=1;if(h.length>0){const f=Math.min(...h.map(g=>g.indent)),p=Uk(h,f,n);c.push({type:"list",ordered:!0,start:h[0].number,items:p,raw:h.map(g=>g.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:c}),s=d}else s+=1}return i}function XP(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);r.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&r.push(...s)}}),{type:"listItem",content:r}})}var ZP="listItem",ax="textStyle",lx=/^(\d+)\.\s$/,jk=_t.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Ze(this.options.HTMLAttributes,n),0]:["ol",Ze(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?XP(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e==null?void 0:e.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const i=t.split(`
`),[s,o]=YP(i);if(s.length===0)return;const a=Uk(s,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=s[0])==null?void 0:r.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ZP,this.editor.getAttributes(ax)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=na({find:lx,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=na({find:lx,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(ax)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),JP=/^\s*(\[([( |x])?\])\s$/,qk=_t.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Ze(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const i=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return Ym(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=u=>{var d,h;a.ariaLabel=((h=(d=this.options.a11y)==null?void 0:d.checkboxLabel)==null?void 0:h.call(d,u,a.checked))||`Task item checkbox for ${u.textContent||"empty task item"}`};return c(t),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",u=>u.preventDefault()),a.addEventListener("change",u=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:d}=u.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:h})=>{const f=n();if(typeof f!="number")return!1;const p=h.doc.nodeAt(f);return h.setNodeMarkup(f,void 0,{...p==null?void 0:p.attrs,checked:d}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,d)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([u,d])=>{i.setAttribute(u,d)}),i.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(e).forEach(([u,d])=>{i.setAttribute(u,d)}),{dom:i,contentDOM:l,update:u=>u.type!==this.type?!1:(i.dataset.checked=u.attrs.checked,a.checked=u.attrs.checked,c(u),!0)}}},addInputRules(){return[na({find:JP,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),Vk=_t.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Ze(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=s=>{const o=qp(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},n);return o?[{type:"taskList",raw:o.raw,items:o.items}]:n.blockTokens(s)},i=qp(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:n.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Je.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(Dk.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(Bk.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(Wk.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(jk.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(qk.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(Vk.configure(this.options.taskList)),t}});var QP=_t.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Ze(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),e$=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,t$=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,n$=_i.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Ze(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Gs({find:e$,type:this.type})]},addPasteRules(){return[Qi({find:t$,type:this.type})]}}),r$=_t.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),Gk=_i.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Ze(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:n.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),i$=Gk;function s$(t={}){return new Ge({view(e){return new o$(e,t)}})}class o${constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(n){let d=e.nodeBefore,h=e.nodeAfter;if(d||h){let f=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(f){let p=f.getBoundingClientRect(),g=d?p.bottom:p.top;d&&h&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let m=this.width/2*a;r={left:p.left,right:p.right,top:g-m,bottom:g+m}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*o;r={left:d.left-h,right:d.left+h,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let d=l.getBoundingClientRect(),h=d.width/l.offsetWidth,f=d.height/l.offsetHeight;c=d.left-l.scrollLeft*h,u=d.top-l.scrollTop*f}this.element.style.left=(r.left-c)/o+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=xm(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class wt extends Ie{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return wt.valid(r)?new wt(r):Ie.near(r)}content(){return re.empty}eq(e){return e instanceof wt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new wt(e.resolve(n.pos))}getBookmark(){return new a0(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!a$(e)||!l$(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&wt.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let l=e.doc.resolve(i);if(wt.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!xe.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(wt.valid(a))return a}return null}}}wt.prototype.visible=!1;wt.findFrom=wt.findGapCursorFrom;Ie.jsonID("gapcursor",wt);class a0{constructor(e){this.pos=e}map(e){return new a0(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return wt.valid(n)?new wt(n):Ie.near(n)}}function Kk(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function a$(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||Kk(i.type))return!0;if(i.inlineContent)return!1}}return!0}function l$(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||Kk(i.type))return!0;if(i.inlineContent)return!1}}return!0}function c$(){return new Ge({props:{decorations:f$,createSelectionBetween(t,e,n){return e.pos==n.pos&&wt.valid(n)?new wt(n):null},handleClick:d$,handleKeyDown:u$,handleDOMEvents:{beforeinput:h$}}})}const u$=Bm({ArrowLeft:Bc("horiz",-1),ArrowRight:Bc("horiz",1),ArrowUp:Bc("vert",-1),ArrowDown:Bc("vert",1)});function Bc(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Te){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=wt.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new wt(c))),!0):!1}}function d$(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!wt.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&xe.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new wt(r))),!0)}function h$(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof wt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=V.empty;for(let o=r.length-1;o>=0;o--)i=V.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new re(i,0,0));return s.setSelection(Te.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function f$(t){if(!(t.selection instanceof wt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",at.create(t.doc,[St.widget(t.selection.head,e,{key:"gapcursor"})])}var xd=200,qt=function(){};qt.prototype.append=function(e){return e.length?(e=qt.from(e),!this.length&&e||e.length<xd&&this.leafAppend(e)||this.length<xd&&e.leafPrepend(this)||this.appendInner(e)):this};qt.prototype.prepend=function(e){return e.length?qt.from(e).append(this):this};qt.prototype.appendInner=function(e){return new p$(this,e)};qt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?qt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};qt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};qt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};qt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};qt.from=function(e){return e instanceof qt?e:e&&e.length?new Yk(e):qt.empty};var Yk=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=xd)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=xd)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(qt);qt.empty=new Yk([]);var p$=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(qt);const g$=500;class wr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){i||(i=this.remapping(r,h+1),s=i.maps.length),s--,u.push(d);return}if(i){u.push(new Hr(d.map));let f=d.step.map(i.slice(s)),p;f&&o.maybeStep(f).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new Hr(p,void 0,void 0,c.length+u.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(s)):d.selection,l=new wr(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),h=new Hr(e.mapping.maps[u],d,n),f;(f=l&&l.merge(h))&&(h=f,u?s.pop():a=a.slice(0,a.length-1)),s.push(h),n&&(o++,n=void 0),i||(l=h)}let c=o-r.depth;return c>y$&&(a=m$(a,c),o-=c),new wr(a.append(s),o)}remapping(e,n){let r=new _l;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new wr(this.items.append(e.map(n=>new Hr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},i);let l=n;this.items.forEach(h=>{let f=s.getMirror(--l);if(f==null)return;o=Math.min(o,f);let p=s.maps[f];if(h.step){let g=e.steps[f].invert(e.docs[f]),m=h.selection&&h.selection.map(s.slice(l+1,f));m&&a++,r.push(new Hr(p,g,m))}else r.push(new Hr(p))},i);let c=[];for(let h=n;h<o;h++)c.push(new Hr(s.maps[h]));let u=this.items.slice(0,i).append(c).append(r),d=new wr(u,a);return d.emptyItemCount()>g$&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let d=new Hr(c.invert(),l,u),h,f=i.length-1;(h=i.length&&i[f].merge(d))?i[f]=h:i.push(d)}}else o.map&&r--},this.items.length,0),new wr(qt.from(i.reverse()),s)}}wr.empty=new wr(qt.empty,0);function m$(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Hr{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Hr(n.getMap().invert(),n,this.selection)}}}class Di{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const y$=20;function b$(t,e,n,r){let i=n.getMeta(Fs),s;if(i)return i.historyState;n.getMeta(w$)&&(t=new Di(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(Fs))return o.getMeta(Fs).redo?new Di(t.done.addTransform(n,void 0,r,fu(e)),t.undone,cx(n.mapping.maps),t.prevTime,t.prevComposition):new Di(t.done,t.undone.addTransform(n,void 0,r,fu(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!x$(n,t.prevRanges)),c=o?Wf(t.prevRanges,n.mapping):cx(n.mapping.maps);return new Di(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,fu(e)),wr.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Di(t.done.rebased(n,s),t.undone.rebased(n,s),Wf(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Di(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Wf(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function x$(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function cx(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function Wf(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function v$(t,e,n){let r=fu(e),i=Fs.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new Di(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Fs,{redo:n,historyState:l})}let Uf=!1,ux=null;function fu(t){let e=t.plugins;if(ux!=e){Uf=!1,ux=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Uf=!0;break}}return Uf}const Fs=new rt("history"),w$=new rt("closeHistory");function C$(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Ge({key:Fs,state:{init(){return new Di(wr.empty,wr.empty,null,0,-1)},apply(e,n,r){return b$(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?Zk:r=="historyRedo"?Jk:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function Xk(t,e){return(n,r)=>{let i=Fs.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=v$(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const Zk=Xk(!1,!0),Jk=Xk(!0,!0);Je.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new Ge({key:new rt("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const c=r.tr.deleteRange(a,l);return t=!0,c}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:e.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=s-r,c=a-l,u=a;return e.deleteRange(c,u),!(this.storage.characters({node:e.doc})>r)}})]}});var k$=Je.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[s$(this.options)]}});Je.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Ge({key:new rt("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,s=[];if(!n||!r)return at.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,c)=>{if(l.isText)return;if(!(i>=c&&i<=c+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,c)=>{if(l.isText||!(i>=c&&i<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(St.node(c,c+l.nodeSize,{class:this.options.className}))}),at.create(t,s)}}})]}});var S$=Je.create({name:"gapCursor",addProseMirrorPlugins(){return[c$()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Qe(Se(t,"allowGapCursor",n)))!=null?e:null}}}),_$=Je.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Ge({key:new rt("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const s=this.editor.isEmpty;return t.descendants((o,a)=>{const l=r>=a&&r<=a+o.nodeSize,c=!o.isLeaf&&Ch(o);if((l||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];s&&u.push(this.options.emptyEditorClass);const d=St.node(a,a+o.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});i.push(d)}return this.options.includeChildren}),at.create(t,i)}}})]}});Je.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Ge({key:new rt("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||ok(n.selection)||t.view.dragging?null:at.create(n.doc,[St.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function dx({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var E$=Je.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new rt(this.name),n=((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||this.options.node||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new Ge({key:e,appendTransaction:(i,s,o)=>{const{doc:a,tr:l,schema:c}=o,u=e.getState(o),d=a.content.size,h=c.nodes[n];if(u)return l.insert(d,h.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!dx({node:o,types:r})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!dx({node:o,types:r})}}})]}}),T$=Je.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>Zk(t,e),redo:()=>({state:t,dispatch:e})=>Jk(t,e)}},addProseMirrorPlugins(){return[C$(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),M$=Je.create({name:"starterKit",addExtensions(){var t,e,n,r;const i=[];return this.options.bold!==!1&&i.push(nP.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(ZB.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(Dk.configure(this.options.bulletList)),this.options.code!==!1&&i.push(sP.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(Sk.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(cP.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(k$.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(S$.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(uP.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(_k.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(T$.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(hP.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(yP.configure(this.options.italic)),this.options.listItem!==!1&&i.push(Bk.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(Wk.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(WP.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(jk.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(QP.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(n$.configure(this.options.strike)),this.options.text!==!1&&i.push(r$.configure(this.options.text)),this.options.underline!==!1&&i.push(Gk.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(E$.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),l0=M$,Qk=_$,jf,hx;function A$(){if(hx)return jf;hx=1;function t(N){return N instanceof Map?N.clear=N.delete=N.set=function(){throw new Error("map is read-only")}:N instanceof Set&&(N.add=N.clear=N.delete=function(){throw new Error("set is read-only")}),Object.freeze(N),Object.getOwnPropertyNames(N).forEach(U=>{const X=N[U],Me=typeof X;(Me==="object"||Me==="function")&&!Object.isFrozen(X)&&t(X)}),N}class e{constructor(U){U.data===void 0&&(U.data={}),this.data=U.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function n(N){return N.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(N,...U){const X=Object.create(null);for(const Me in N)X[Me]=N[Me];return U.forEach(function(Me){for(const ut in Me)X[ut]=Me[ut]}),X}const i="</span>",s=N=>!!N.scope,o=(N,{prefix:U})=>{if(N.startsWith("language:"))return N.replace("language:","language-");if(N.includes(".")){const X=N.split(".");return[`${U}${X.shift()}`,...X.map((Me,ut)=>`${Me}${"_".repeat(ut+1)}`)].join(" ")}return`${U}${N}`};class a{constructor(U,X){this.buffer="",this.classPrefix=X.classPrefix,U.walk(this)}addText(U){this.buffer+=n(U)}openNode(U){if(!s(U))return;const X=o(U.scope,{prefix:this.classPrefix});this.span(X)}closeNode(U){s(U)&&(this.buffer+=i)}value(){return this.buffer}span(U){this.buffer+=`<span class="${U}">`}}const l=(N={})=>{const U={children:[]};return Object.assign(U,N),U};class c{constructor(){this.rootNode=l(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(U){this.top.children.push(U)}openNode(U){const X=l({scope:U});this.add(X),this.stack.push(X)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(U){return this.constructor._walk(U,this.rootNode)}static _walk(U,X){return typeof X=="string"?U.addText(X):X.children&&(U.openNode(X),X.children.forEach(Me=>this._walk(U,Me)),U.closeNode(X)),U}static _collapse(U){typeof U!="string"&&U.children&&(U.children.every(X=>typeof X=="string")?U.children=[U.children.join("")]:U.children.forEach(X=>{c._collapse(X)}))}}class u extends c{constructor(U){super(),this.options=U}addText(U){U!==""&&this.add(U)}startScope(U){this.openNode(U)}endScope(){this.closeNode()}__addSublanguage(U,X){const Me=U.root;X&&(Me.scope=`language:${X}`),this.add(Me)}toHTML(){return new a(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function d(N){return N?typeof N=="string"?N:N.source:null}function h(N){return g("(?=",N,")")}function f(N){return g("(?:",N,")*")}function p(N){return g("(?:",N,")?")}function g(...N){return N.map(X=>d(X)).join("")}function m(N){const U=N[N.length-1];return typeof U=="object"&&U.constructor===Object?(N.splice(N.length-1,1),U):{}}function y(...N){return"("+(m(N).capture?"":"?:")+N.map(Me=>d(Me)).join("|")+")"}function b(N){return new RegExp(N.toString()+"|").exec("").length-1}function C(N,U){const X=N&&N.exec(U);return X&&X.index===0}const v=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function k(N,{joinWith:U}){let X=0;return N.map(Me=>{X+=1;const ut=X;let it=d(Me),he="";for(;it.length>0;){const de=v.exec(it);if(!de){he+=it;break}he+=it.substring(0,de.index),it=it.substring(de.index+de[0].length),de[0][0]==="\\"&&de[1]?he+="\\"+String(Number(de[1])+ut):(he+=de[0],de[0]==="("&&X++)}return he}).map(Me=>`(${Me})`).join(U)}const w=/\b\B/,S="[a-zA-Z]\\w*",E="[a-zA-Z_]\\w*",I="\\b\\d+(\\.\\d+)?",$="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",T="\\b(0b[01]+)",P="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",B=(N={})=>{const U=/^#![ ]*\//;return N.binary&&(N.begin=g(U,/.*\b/,N.binary,/\b.*/)),r({scope:"meta",begin:U,end:/$/,relevance:0,"on:begin":(X,Me)=>{X.index!==0&&Me.ignoreMatch()}},N)},A={begin:"\\\\[\\s\\S]",relevance:0},M={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[A]},O={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[A]},F={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},R=function(N,U,X={}){const Me=r({scope:"comment",begin:N,end:U,contains:[]},X);Me.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const ut=y("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return Me.contains.push({begin:g(/[ ]+/,"(",ut,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),Me},q=R("//","$"),Z=R("/\\*","\\*/"),Q=R("#","$"),H={scope:"number",begin:I,relevance:0},Y={scope:"number",begin:$,relevance:0},se={scope:"number",begin:T,relevance:0},K={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[A,{begin:/\[/,end:/\]/,relevance:0,contains:[A]}]},ne={scope:"title",begin:S,relevance:0},ue={scope:"title",begin:E,relevance:0},ke={begin:"\\.\\s*"+E,relevance:0};var De=Object.freeze({__proto__:null,APOS_STRING_MODE:M,BACKSLASH_ESCAPE:A,BINARY_NUMBER_MODE:se,BINARY_NUMBER_RE:T,COMMENT:R,C_BLOCK_COMMENT_MODE:Z,C_LINE_COMMENT_MODE:q,C_NUMBER_MODE:Y,C_NUMBER_RE:$,END_SAME_AS_BEGIN:function(N){return Object.assign(N,{"on:begin":(U,X)=>{X.data._beginMatch=U[1]},"on:end":(U,X)=>{X.data._beginMatch!==U[1]&&X.ignoreMatch()}})},HASH_COMMENT_MODE:Q,IDENT_RE:S,MATCH_NOTHING_RE:w,METHOD_GUARD:ke,NUMBER_MODE:H,NUMBER_RE:I,PHRASAL_WORDS_MODE:F,QUOTE_STRING_MODE:O,REGEXP_MODE:K,RE_STARTERS_RE:P,SHEBANG:B,TITLE_MODE:ne,UNDERSCORE_IDENT_RE:E,UNDERSCORE_TITLE_MODE:ue});function Ye(N,U){N.input[N.index-1]==="."&&U.ignoreMatch()}function Et(N,U){N.className!==void 0&&(N.scope=N.className,delete N.className)}function bt(N,U){U&&N.beginKeywords&&(N.begin="\\b("+N.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",N.__beforeBegin=Ye,N.keywords=N.keywords||N.beginKeywords,delete N.beginKeywords,N.relevance===void 0&&(N.relevance=0))}function Vt(N,U){Array.isArray(N.illegal)&&(N.illegal=y(...N.illegal))}function rn(N,U){if(N.match){if(N.begin||N.end)throw new Error("begin & end are not supported with match");N.begin=N.match,delete N.match}}function He(N,U){N.relevance===void 0&&(N.relevance=1)}const sn=(N,U)=>{if(!N.beforeMatch)return;if(N.starts)throw new Error("beforeMatch cannot be used with starts");const X=Object.assign({},N);Object.keys(N).forEach(Me=>{delete N[Me]}),N.keywords=X.keywords,N.begin=g(X.beforeMatch,h(X.begin)),N.starts={relevance:0,contains:[Object.assign(X,{endsParent:!0})]},N.relevance=0,delete X.beforeMatch},Dt=["of","and","for","in","not","or","if","then","parent","list","value"],Fn="keyword";function Gt(N,U,X=Fn){const Me=Object.create(null);return typeof N=="string"?ut(X,N.split(" ")):Array.isArray(N)?ut(X,N):Object.keys(N).forEach(function(it){Object.assign(Me,Gt(N[it],U,it))}),Me;function ut(it,he){U&&(he=he.map(de=>de.toLowerCase())),he.forEach(function(de){const Le=de.split("|");Me[Le[0]]=[it,zn(Le[0],Le[1])]})}}function zn(N,U){return U?Number(U):Or(N)?0:1}function Or(N){return Dt.includes(N.toLowerCase())}const Jn={},Kt=N=>{console.error(N)},Hn=(N,...U)=>{console.log(`WARN: ${N}`,...U)},Ht=(N,U)=>{Jn[`${N}/${U}`]||(console.log(`Deprecated as of ${N}. ${U}`),Jn[`${N}/${U}`]=!0)},on=new Error;function Lr(N,U,{key:X}){let Me=0;const ut=N[X],it={},he={};for(let de=1;de<=U.length;de++)he[de+Me]=ut[de],it[de+Me]=!0,Me+=b(U[de-1]);N[X]=he,N[X]._emit=it,N[X]._multi=!0}function po(N){if(Array.isArray(N.begin)){if(N.skip||N.excludeBegin||N.returnBegin)throw Kt("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),on;if(typeof N.beginScope!="object"||N.beginScope===null)throw Kt("beginScope must be object"),on;Lr(N,N.begin,{key:"beginScope"}),N.begin=k(N.begin,{joinWith:""})}}function go(N){if(Array.isArray(N.end)){if(N.skip||N.excludeEnd||N.returnEnd)throw Kt("skip, excludeEnd, returnEnd not compatible with endScope: {}"),on;if(typeof N.endScope!="object"||N.endScope===null)throw Kt("endScope must be object"),on;Lr(N,N.end,{key:"endScope"}),N.end=k(N.end,{joinWith:""})}}function gs(N){N.scope&&typeof N.scope=="object"&&N.scope!==null&&(N.beginScope=N.scope,delete N.scope)}function mo(N){gs(N),typeof N.beginScope=="string"&&(N.beginScope={_wrap:N.beginScope}),typeof N.endScope=="string"&&(N.endScope={_wrap:N.endScope}),po(N),go(N)}function Ti(N){function U(he,de){return new RegExp(d(he),"m"+(N.case_insensitive?"i":"")+(N.unicodeRegex?"u":"")+(de?"g":""))}class X{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(de,Le){Le.position=this.position++,this.matchIndexes[this.matchAt]=Le,this.regexes.push([Le,de]),this.matchAt+=b(de)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const de=this.regexes.map(Le=>Le[1]);this.matcherRe=U(k(de,{joinWith:"|"}),!0),this.lastIndex=0}exec(de){this.matcherRe.lastIndex=this.lastIndex;const Le=this.matcherRe.exec(de);if(!Le)return null;const Nt=Le.findIndex((Un,yo)=>yo>0&&Un!==void 0),Xe=this.matchIndexes[Nt];return Le.splice(0,Nt),Object.assign(Le,Xe)}}class Me{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(de){if(this.multiRegexes[de])return this.multiRegexes[de];const Le=new X;return this.rules.slice(de).forEach(([Nt,Xe])=>Le.addRule(Nt,Xe)),Le.compile(),this.multiRegexes[de]=Le,Le}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(de,Le){this.rules.push([de,Le]),Le.type==="begin"&&this.count++}exec(de){const Le=this.getMatcher(this.regexIndex);Le.lastIndex=this.lastIndex;let Nt=Le.exec(de);if(this.resumingScanAtSamePosition()&&!(Nt&&Nt.index===this.lastIndex)){const Xe=this.getMatcher(0);Xe.lastIndex=this.lastIndex+1,Nt=Xe.exec(de)}return Nt&&(this.regexIndex+=Nt.position+1,this.regexIndex===this.count&&this.considerAll()),Nt}}function ut(he){const de=new Me;return he.contains.forEach(Le=>de.addRule(Le.begin,{rule:Le,type:"begin"})),he.terminatorEnd&&de.addRule(he.terminatorEnd,{type:"end"}),he.illegal&&de.addRule(he.illegal,{type:"illegal"}),de}function it(he,de){const Le=he;if(he.isCompiled)return Le;[Et,rn,mo,sn].forEach(Xe=>Xe(he,de)),N.compilerExtensions.forEach(Xe=>Xe(he,de)),he.__beforeBegin=null,[bt,Vt,He].forEach(Xe=>Xe(he,de)),he.isCompiled=!0;let Nt=null;return typeof he.keywords=="object"&&he.keywords.$pattern&&(he.keywords=Object.assign({},he.keywords),Nt=he.keywords.$pattern,delete he.keywords.$pattern),Nt=Nt||/\w+/,he.keywords&&(he.keywords=Gt(he.keywords,N.case_insensitive)),Le.keywordPatternRe=U(Nt,!0),de&&(he.begin||(he.begin=/\B|\b/),Le.beginRe=U(Le.begin),!he.end&&!he.endsWithParent&&(he.end=/\B|\b/),he.end&&(Le.endRe=U(Le.end)),Le.terminatorEnd=d(Le.end)||"",he.endsWithParent&&de.terminatorEnd&&(Le.terminatorEnd+=(he.end?"|":"")+de.terminatorEnd)),he.illegal&&(Le.illegalRe=U(he.illegal)),he.contains||(he.contains=[]),he.contains=[].concat(...he.contains.map(function(Xe){return ae(Xe==="self"?he:Xe)})),he.contains.forEach(function(Xe){it(Xe,Le)}),he.starts&&it(he.starts,de),Le.matcher=ut(Le),Le}if(N.compilerExtensions||(N.compilerExtensions=[]),N.contains&&N.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return N.classNameAliases=r(N.classNameAliases||{}),it(N)}function W(N){return N?N.endsWithParent||W(N.starts):!1}function ae(N){return N.variants&&!N.cachedVariants&&(N.cachedVariants=N.variants.map(function(U){return r(N,{variants:null},U)})),N.cachedVariants?N.cachedVariants:W(N)?r(N,{starts:N.starts?r(N.starts):null}):Object.isFrozen(N)?r(N):N}var _e="11.11.1";class qe extends Error{constructor(U,X){super(U),this.name="HTMLInjectionError",this.html=X}}const $e=n,Tt=r,Mt=Symbol("nomatch"),Wn=7,ms=function(N){const U=Object.create(null),X=Object.create(null),Me=[];let ut=!0;const it="Could not find the language '{}', did you forget to load/include a language module?",he={disableAutodetect:!0,name:"Plain text",contains:[]};let de={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:u};function Le(te){return de.noHighlightRe.test(te)}function Nt(te){let le=te.className+" ";le+=te.parentNode?te.parentNode.className:"";const We=de.languageDetectRe.exec(le);if(We){const st=J(We[1]);return st||(Hn(it.replace("{}",We[1])),Hn("Falling back to no-highlight mode for this block.",te)),st?We[1]:"no-highlight"}return le.split(/\s+/).find(st=>Le(st)||J(st))}function Xe(te,le,We){let st="",Bt="";typeof le=="object"?(st=te,We=le.ignoreIllegals,Bt=le.language):(Ht("10.7.0","highlight(lang, code, ...args) has been deprecated."),Ht("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Bt=te,st=le),We===void 0&&(We=!0);const mr={code:st,language:Bt};Nn("before:highlight",mr);const Ai=mr.result?mr.result:Un(mr.language,mr.code,We);return Ai.code=mr.code,Nn("after:highlight",Ai),Ai}function Un(te,le,We,st){const Bt=Object.create(null);function mr(oe,we){return oe.keywords[we]}function Ai(){if(!Pe.keywords){Yt.addText(ft);return}let oe=0;Pe.keywordPatternRe.lastIndex=0;let we=Pe.keywordPatternRe.exec(ft),ze="";for(;we;){ze+=ft.substring(oe,we.index);const ot=Ir.case_insensitive?we[0].toLowerCase():we[0],ln=mr(Pe,ot);if(ln){const[ni,fO]=ln;if(Yt.addText(ze),ze="",Bt[ot]=(Bt[ot]||0)+1,Bt[ot]<=Wn&&(_c+=fO),ni.startsWith("_"))ze+=we[0];else{const pO=Ir.classNameAliases[ni]||ni;Rr(we[0],pO)}}else ze+=we[0];oe=Pe.keywordPatternRe.lastIndex,we=Pe.keywordPatternRe.exec(ft)}ze+=ft.substring(oe),Yt.addText(ze)}function kc(){if(ft==="")return;let oe=null;if(typeof Pe.subLanguage=="string"){if(!U[Pe.subLanguage]){Yt.addText(ft);return}oe=Un(Pe.subLanguage,ft,!0,By[Pe.subLanguage]),By[Pe.subLanguage]=oe._top}else oe=bo(ft,Pe.subLanguage.length?Pe.subLanguage:null);Pe.relevance>0&&(_c+=oe.relevance),Yt.__addSublanguage(oe._emitter,oe.language)}function jn(){Pe.subLanguage!=null?kc():Ai(),ft=""}function Rr(oe,we){oe!==""&&(Yt.startScope(we),Yt.addText(oe),Yt.endScope())}function Ly(oe,we){let ze=1;const ot=we.length-1;for(;ze<=ot;){if(!oe._emit[ze]){ze++;continue}const ln=Ir.classNameAliases[oe[ze]]||oe[ze],ni=we[ze];ln?Rr(ni,ln):(ft=ni,Ai(),ft=""),ze++}}function Ry(oe,we){return oe.scope&&typeof oe.scope=="string"&&Yt.openNode(Ir.classNameAliases[oe.scope]||oe.scope),oe.beginScope&&(oe.beginScope._wrap?(Rr(ft,Ir.classNameAliases[oe.beginScope._wrap]||oe.beginScope._wrap),ft=""):oe.beginScope._multi&&(Ly(oe.beginScope,we),ft="")),Pe=Object.create(oe,{parent:{value:Pe}}),Pe}function Iy(oe,we,ze){let ot=C(oe.endRe,ze);if(ot){if(oe["on:end"]){const ln=new e(oe);oe["on:end"](we,ln),ln.isMatchIgnored&&(ot=!1)}if(ot){for(;oe.endsParent&&oe.parent;)oe=oe.parent;return oe}}if(oe.endsWithParent)return Iy(oe.parent,we,ze)}function lO(oe){return Pe.matcher.regexIndex===0?(ft+=oe[0],1):(uf=!0,0)}function cO(oe){const we=oe[0],ze=oe.rule,ot=new e(ze),ln=[ze.__beforeBegin,ze["on:begin"]];for(const ni of ln)if(ni&&(ni(oe,ot),ot.isMatchIgnored))return lO(we);return ze.skip?ft+=we:(ze.excludeBegin&&(ft+=we),jn(),!ze.returnBegin&&!ze.excludeBegin&&(ft=we)),Ry(ze,oe),ze.returnBegin?0:we.length}function uO(oe){const we=oe[0],ze=le.substring(oe.index),ot=Iy(Pe,oe,ze);if(!ot)return Mt;const ln=Pe;Pe.endScope&&Pe.endScope._wrap?(jn(),Rr(we,Pe.endScope._wrap)):Pe.endScope&&Pe.endScope._multi?(jn(),Ly(Pe.endScope,oe)):ln.skip?ft+=we:(ln.returnEnd||ln.excludeEnd||(ft+=we),jn(),ln.excludeEnd&&(ft=we));do Pe.scope&&Yt.closeNode(),!Pe.skip&&!Pe.subLanguage&&(_c+=Pe.relevance),Pe=Pe.parent;while(Pe!==ot.parent);return ot.starts&&Ry(ot.starts,oe),ln.returnEnd?0:we.length}function dO(){const oe=[];for(let we=Pe;we!==Ir;we=we.parent)we.scope&&oe.unshift(we.scope);oe.forEach(we=>Yt.openNode(we))}let Sc={};function Dy(oe,we){const ze=we&&we[0];if(ft+=oe,ze==null)return jn(),0;if(Sc.type==="begin"&&we.type==="end"&&Sc.index===we.index&&ze===""){if(ft+=le.slice(we.index,we.index+1),!ut){const ot=new Error(`0 width match regex (${te})`);throw ot.languageName=te,ot.badRule=Sc.rule,ot}return 1}if(Sc=we,we.type==="begin")return cO(we);if(we.type==="illegal"&&!We){const ot=new Error('Illegal lexeme "'+ze+'" for mode "'+(Pe.scope||"<unnamed>")+'"');throw ot.mode=Pe,ot}else if(we.type==="end"){const ot=uO(we);if(ot!==Mt)return ot}if(we.type==="illegal"&&ze==="")return ft+=`
`,1;if(cf>1e5&&cf>we.index*3)throw new Error("potential infinite loop, way more iterations than matches");return ft+=ze,ze.length}const Ir=J(te);if(!Ir)throw Kt(it.replace("{}",te)),new Error('Unknown language: "'+te+'"');const hO=Ti(Ir);let lf="",Pe=st||hO;const By={},Yt=new de.__emitter(de);dO();let ft="",_c=0,bs=0,cf=0,uf=!1;try{if(Ir.__emitTokens)Ir.__emitTokens(le,Yt);else{for(Pe.matcher.considerAll();;){cf++,uf?uf=!1:Pe.matcher.considerAll(),Pe.matcher.lastIndex=bs;const oe=Pe.matcher.exec(le);if(!oe)break;const we=le.substring(bs,oe.index),ze=Dy(we,oe);bs=oe.index+ze}Dy(le.substring(bs))}return Yt.finalize(),lf=Yt.toHTML(),{language:te,value:lf,relevance:_c,illegal:!1,_emitter:Yt,_top:Pe}}catch(oe){if(oe.message&&oe.message.includes("Illegal"))return{language:te,value:$e(le),illegal:!0,relevance:0,_illegalBy:{message:oe.message,index:bs,context:le.slice(bs-100,bs+100),mode:oe.mode,resultSoFar:lf},_emitter:Yt};if(ut)return{language:te,value:$e(le),illegal:!1,relevance:0,errorRaised:oe,_emitter:Yt,_top:Pe};throw oe}}function yo(te){const le={value:$e(te),illegal:!1,relevance:0,_top:he,_emitter:new de.__emitter(de)};return le._emitter.addText(te),le}function bo(te,le){le=le||de.languages||Object.keys(U);const We=yo(te),st=le.filter(J).filter(dt).map(jn=>Un(jn,te,!1));st.unshift(We);const Bt=st.sort((jn,Rr)=>{if(jn.relevance!==Rr.relevance)return Rr.relevance-jn.relevance;if(jn.language&&Rr.language){if(J(jn.language).supersetOf===Rr.language)return 1;if(J(Rr.language).supersetOf===jn.language)return-1}return 0}),[mr,Ai]=Bt,kc=mr;return kc.secondBest=Ai,kc}function _a(te,le,We){const st=le&&X[le]||We;te.classList.add("hljs"),te.classList.add(`language-${st}`)}function xo(te){let le=null;const We=Nt(te);if(Le(We))return;if(Nn("before:highlightElement",{el:te,language:We}),te.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",te);return}if(te.children.length>0&&(de.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(te)),de.throwUnescapedHTML))throw new qe("One of your code blocks includes unescaped HTML.",te.innerHTML);le=te;const st=le.textContent,Bt=We?Xe(st,{language:We,ignoreIllegals:!0}):bo(st);te.innerHTML=Bt.value,te.dataset.highlighted="yes",_a(te,We,Bt.language),te.result={language:Bt.language,re:Bt.relevance,relevance:Bt.relevance},Bt.secondBest&&(te.secondBest={language:Bt.secondBest.language,relevance:Bt.secondBest.relevance}),Nn("after:highlightElement",{el:te,result:Bt,text:st})}function gr(te){de=Tt(de,te)}const wc=()=>{ys(),Ht("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Cc(){ys(),Ht("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let Ea=!1;function ys(){function te(){ys()}if(document.readyState==="loading"){Ea||window.addEventListener("DOMContentLoaded",te,!1),Ea=!0;return}document.querySelectorAll(de.cssSelector).forEach(xo)}function af(te,le){let We=null;try{We=le(N)}catch(st){if(Kt("Language definition for '{}' could not be registered.".replace("{}",te)),ut)Kt(st);else throw st;We=he}We.name||(We.name=te),U[te]=We,We.rawDefinition=le.bind(null,N),We.aliases&&fe(We.aliases,{languageName:te})}function ve(te){delete U[te];for(const le of Object.keys(X))X[le]===te&&delete X[le]}function D(){return Object.keys(U)}function J(te){return te=(te||"").toLowerCase(),U[te]||U[X[te]]}function fe(te,{languageName:le}){typeof te=="string"&&(te=[te]),te.forEach(We=>{X[We.toLowerCase()]=le})}function dt(te){const le=J(te);return le&&!le.disableAutodetect}function Wt(te){te["before:highlightBlock"]&&!te["before:highlightElement"]&&(te["before:highlightElement"]=le=>{te["before:highlightBlock"](Object.assign({block:le.el},le))}),te["after:highlightBlock"]&&!te["after:highlightElement"]&&(te["after:highlightElement"]=le=>{te["after:highlightBlock"](Object.assign({block:le.el},le))})}function xt(te){Wt(te),Me.push(te)}function an(te){const le=Me.indexOf(te);le!==-1&&Me.splice(le,1)}function Nn(te,le){const We=te;Me.forEach(function(st){st[We]&&st[We](le)})}function Mi(te){return Ht("10.7.0","highlightBlock will be removed entirely in v12.0"),Ht("10.7.0","Please use highlightElement now."),xo(te)}Object.assign(N,{highlight:Xe,highlightAuto:bo,highlightAll:ys,highlightElement:xo,highlightBlock:Mi,configure:gr,initHighlighting:wc,initHighlightingOnLoad:Cc,registerLanguage:af,unregisterLanguage:ve,listLanguages:D,getLanguage:J,registerAliases:fe,autoDetection:dt,inherit:Tt,addPlugin:xt,removePlugin:an}),N.debugMode=function(){ut=!1},N.safeMode=function(){ut=!0},N.versionString=_e,N.regex={concat:g,lookahead:h,either:y,optional:p,anyNumberOfTimes:f};for(const te in De)typeof De[te]=="object"&&t(De[te]);return Object.assign(N,De),N},At=ms({});return At.newInstance=()=>ms({}),jf=At,At.HighlightJS=At,At.default=At,jf}var N$=A$();const eS=gm(N$);function tS(t,e=[]){return t.flatMap(n=>{const r=[...e,...n.properties?n.properties.className:[]];return n.children?tS(n.children,r):{text:n.value,classes:r}})}function fx(t){return t.value||t.children||[]}function O$(t){return!!eS.getLanguage(t)}function px({doc:t,name:e,lowlight:n,defaultLanguage:r}){const i=[];return ju(t,s=>s.type.name===e).forEach(s=>{var o;let a=s.pos+1;const l=s.node.attrs.language||r,c=n.listLanguages(),u=l&&(c.includes(l)||O$(l)||(o=n.registered)!=null&&o.call(n,l))?fx(n.highlight(l,s.node.textContent)):fx(n.highlightAuto(s.node.textContent));tS(u).forEach(d=>{const h=a+d.text.length;if(d.classes.length){const f=St.inline(a,h,{class:d.classes.join(" ")});i.push(f)}a=h})}),at.create(t,i)}function L$(t){return typeof t=="function"}function R$({name:t,lowlight:e,defaultLanguage:n}){if(!["highlight","highlightAuto","listLanguages"].every(i=>L$(e[i])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new Ge({key:new rt("lowlight"),state:{init:(i,{doc:s})=>px({doc:s,name:t,lowlight:e,defaultLanguage:n}),apply:(i,s,o,a)=>{const l=o.selection.$head.parent.type.name,c=a.selection.$head.parent.type.name,u=ju(o.doc,h=>h.type.name===t),d=ju(a.doc,h=>h.type.name===t);return i.docChanged&&([l,c].includes(t)||d.length!==u.length||i.steps.some(h=>h.from!==void 0&&h.to!==void 0&&u.some(f=>f.pos>=h.from&&f.pos+f.node.nodeSize<=h.to)))?px({doc:i.doc,name:t,lowlight:e,defaultLanguage:n}):s.map(i.mapping,i.doc)}},props:{decorations(i){return r.getState(i)}}});return r}var I$=lP.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),lowlight:{},languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},addProseMirrorPlugins(){var t;return[...((t=this.parent)==null?void 0:t.call(this))||[],R$({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}}),D$=I$,B$=Vk,P$=qk,$$=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,F$=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,z$=_i.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",Ze(this.options.HTMLAttributes,t),0]},renderMarkdown:(t,e)=>`==${e.renderChildren(t)}==`,parseMarkdown:(t,e)=>e.applyMark("highlight",e.parseInline(t.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:t=>t.indexOf("=="),tokenize(t,e,n){const i=/^(==)([^=]+)(==)/.exec(t);if(i){const s=i[2].trim(),o=n.inlineTokens(s);return{type:"highlight",raw:i[0],text:s,tokens:o}}}},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Gs({find:$$,type:this.type})]},addPasteRules(){return[Qi({find:F$,type:this.type})]}}),H$=z$,W$=20,nS=(t,e=0)=>{const n=[];return!t.children.length||e>W$||Array.from(t.children).forEach(r=>{r.tagName==="SPAN"?n.push(r):r.children.length&&n.push(...nS(r,e+1))}),n},U$=t=>{if(!t.children.length)return;const e=nS(t);e&&e.forEach(n=>{var r,i;const s=n.getAttribute("style"),o=(i=(r=n.parentElement)==null?void 0:r.closest("span"))==null?void 0:i.getAttribute("style");n.setAttribute("style",`${o};${s}`)})},rS=_i.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&U$(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",Ze(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:e})=>e.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(s=>!!s))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),j$=Je.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const s=r[i].split(":");if(s.length>=2){const o=s[0].trim().toLowerCase(),a=s.slice(1).join(":").trim();if(o==="background-color")return a.replace(/['"]+/g,"")}}}return(e=t.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:e})=>e().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),iS=Je.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const s=r[i].split(":");if(s.length>=2){const o=s[0].trim().toLowerCase(),a=s.slice(1).join(":").trim();if(o==="color")return a.replace(/['"]+/g,"")}}}return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),q$=Je.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),V$=Je.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),G$=Je.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:e})=>e().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});Je.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push(j$.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(iS.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(q$.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(V$.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(G$.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(rS.configure(this.options.textStyle)),t}});var K$=iS;function Y$(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",o="(?!struct)("+r+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",a={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},d={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},h={className:"title",begin:e.optional(i)+t.IDENT_RE,relevance:0},f=e.optional(i)+t.IDENT_RE+"\\s*\\(",p=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],g=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],m=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],y=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],v={type:g,keyword:p,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:m},k={className:"function.dispatch",relevance:0,keywords:{_hint:y},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},w=[k,d,a,n,t.C_BLOCK_COMMENT_MODE,u,c],S={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:v,contains:w.concat([{begin:/\(/,end:/\)/,keywords:v,contains:w.concat(["self"]),relevance:0}]),relevance:0},E={className:"function",begin:"("+o+"[\\*&\\s]+)+"+f,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:v,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:v,relevance:0},{begin:f,returnBegin:!0,contains:[h],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[c,u]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,c,u,a,{begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,c,u,a]}]},a,n,t.C_BLOCK_COMMENT_MODE,d]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:v,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(S,E,k,w,[d,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:v,contains:["self",a]},{begin:t.IDENT_RE+"::",keywords:v},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function X$(t){const e={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},n=Y$(t),r=n.keywords;return r.type=[...r.type,...e.type],r.literal=[...r.literal,...e.literal],r.built_in=[...r.built_in,...e.built_in],r._hints=e._hints,n.name="Arduino",n.aliases=["ino"],n.supersetOf="cpp",n}function Z$(t){const e=t.regex,n={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:e.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const i={className:"subst",begin:/\$\(/,end:/\)/,contains:[t.BACKSLASH_ESCAPE]},s=t.inherit(t.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),o={begin:/<<-?\s*(?=\w+)/,starts:{contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},a={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,n,i]};i.contains.push(a);const l={match:/\\"/},c={className:"string",begin:/'/,end:/'/},u={match:/\\'/},d={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},t.NUMBER_MODE,n]},h=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],f=t.SHEBANG({binary:`(${h.join("|")})`,relevance:10}),p={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[t.inherit(t.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},g=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],m=["true","false"],y={match:/(\/[a-z._-]+)+/},b=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],C=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],v=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],k=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:g,literal:m,built_in:[...b,...C,"set","shopt",...v,...k]},contains:[f,t.SHEBANG(),p,d,s,o,y,a,l,c,u,n]}}function J$(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",o="("+r+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",a={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},d={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},h={className:"title",begin:e.optional(i)+t.IDENT_RE,relevance:0},f=e.optional(i)+t.IDENT_RE+"\\s*\\(",m={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},y=[d,a,n,t.C_BLOCK_COMMENT_MODE,u,c],b={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:m,contains:y.concat([{begin:/\(/,end:/\)/,keywords:m,contains:y.concat(["self"]),relevance:0}]),relevance:0},C={begin:"("+o+"[\\*&\\s]+)+"+f,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:m,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:m,relevance:0},{begin:f,returnBegin:!0,contains:[t.inherit(h,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:m,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,c,u,a,{begin:/\(/,end:/\)/,keywords:m,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,c,u,a]}]},a,n,t.C_BLOCK_COMMENT_MODE,d]};return{name:"C",aliases:["h"],keywords:m,disableAutodetect:!0,illegal:"</",contains:[].concat(b,C,y,[d,{begin:t.IDENT_RE+"::",keywords:m},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},t.TITLE_MODE]}]),exports:{preprocessor:d,strings:c,keywords:m}}}function Q$(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",o="(?!struct)("+r+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",a={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},d={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},h={className:"title",begin:e.optional(i)+t.IDENT_RE,relevance:0},f=e.optional(i)+t.IDENT_RE+"\\s*\\(",p=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],g=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],m=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],y=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],v={type:g,keyword:p,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:m},k={className:"function.dispatch",relevance:0,keywords:{_hint:y},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},w=[k,d,a,n,t.C_BLOCK_COMMENT_MODE,u,c],S={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:v,contains:w.concat([{begin:/\(/,end:/\)/,keywords:v,contains:w.concat(["self"]),relevance:0}]),relevance:0},E={className:"function",begin:"("+o+"[\\*&\\s]+)+"+f,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:v,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:v,relevance:0},{begin:f,returnBegin:!0,contains:[h],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[c,u]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,c,u,a,{begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,c,u,a]}]},a,n,t.C_BLOCK_COMMENT_MODE,d]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:v,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(S,E,k,w,[d,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:v,contains:["self",a]},{begin:t.IDENT_RE+"::",keywords:v},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function e3(t){const e=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],n=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],r=["default","false","null","true"],i=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],s=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],o={keyword:i.concat(s),built_in:e,literal:r},a=t.inherit(t.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),l={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},c={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},u={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},d=t.inherit(u,{illegal:/\n/}),h={className:"subst",begin:/\{/,end:/\}/,keywords:o},f=t.inherit(h,{illegal:/\n/}),p={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},t.BACKSLASH_ESCAPE,f]},g={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},h]},m=t.inherit(g,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},f]});h.contains=[g,p,u,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,l,t.C_BLOCK_COMMENT_MODE],f.contains=[m,p,d,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,l,t.inherit(t.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const y={variants:[c,g,p,u,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},b={begin:"<",end:">",contains:[{beginKeywords:"in out"},a]},C=t.IDENT_RE+"(<"+t.IDENT_RE+"(\\s*,\\s*"+t.IDENT_RE+")*>)?(\\[\\])?",v={begin:"@"+t.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:o,illegal:/::/,contains:[t.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},y,l,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},a,b,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[a,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[a,b,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+C+"\\s+)+"+t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:o,contains:[{beginKeywords:n.join(" "),relevance:0},{begin:t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[t.TITLE_MODE,b],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,relevance:0,contains:[y,l,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},v]}}const t3=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),n3=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],r3=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],i3=[...n3,...r3],s3=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),o3=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),a3=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),l3=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function c3(t){const e=t.regex,n=t3(t),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},i="and or not only",s=/@-?\w[\w]*(-\w+)*/,o="[a-zA-Z-][a-zA-Z0-9_-]*",a=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,r,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+o,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+o3.join("|")+")"},{begin:":(:)?("+a3.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+l3.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...a,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...a,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:s},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:i,attribute:s3.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...a,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+i3.join("|")+")\\b"}]}}function u3(t){const e=t.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function d3(t){const s={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:s,illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"string",variants:[t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[t.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:s,illegal:/["']/}]}]}}function h3(t){const e=t.regex,n=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[t.HASH_COMMENT_MODE,t.QUOTE_STRING_MODE,t.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:e.concat(n,e.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function f3(t){const e=t.regex,n={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:t.NUMBER_RE}]},r=t.COMMENT();r.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const i={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},s={className:"literal",begin:/\bon|off|true|false|yes|no\b/},o={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},a={begin:/\[/,end:/\]/,contains:[r,s,i,o,n,"self"],relevance:0},l=/[A-Za-z0-9_-]+/,c=/"(\\"|[^"])*"/,u=/'[^']*'/,d=e.either(l,c,u),h=e.concat(d,"(\\s*\\.\\s*",d,")*",e.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[r,{className:"section",begin:/\[+/,end:/\]+/},{begin:h,className:"attr",starts:{end:/$/,contains:[r,a,s,i,o,n]}}]}}var Ao="[0-9](_*[0-9])*",Pc=`\\.(${Ao})`,$c="[0-9a-fA-F](_*[0-9a-fA-F])*",gx={className:"number",variants:[{begin:`(\\b(${Ao})((${Pc})|\\.)?|(${Pc}))[eE][+-]?(${Ao})[fFdD]?\\b`},{begin:`\\b(${Ao})((${Pc})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${Pc})[fFdD]?\\b`},{begin:`\\b(${Ao})[fFdD]\\b`},{begin:`\\b0[xX]((${$c})\\.?|(${$c})?\\.(${$c}))[pP][+-]?(${Ao})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${$c})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function sS(t,e,n){return n===-1?"":t.replace(e,r=>sS(t,e,n-1))}function p3(t){const e=t.regex,n="[-a-zA-Z_$][-a-zA-Z_$0-9]*",r=n+sS("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),l={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},c={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},u={className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[t.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:l,illegal:/<\/|#/,contains:[t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[t.BACKSLASH_ESCAPE]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[e.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[u,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+r+"\\s+)",t.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:l,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[c,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,gx,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},gx,c]}}const mx="[A-Za-z$_][0-9A-Za-z$_]*",g3=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],m3=["true","false","null","undefined","NaN","Infinity"],oS=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],aS=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],lS=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],y3=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],b3=[].concat(lS,oS,aS);function x3(t){const e=t.regex,n=(R,{after:q})=>{const Z="</"+R[0].slice(1);return R.input.indexOf(Z,q)!==-1},r=mx,i={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(R,q)=>{const Z=R[0].length+R.index,Q=R.input[Z];if(Q==="<"||Q===","){q.ignoreMatch();return}Q===">"&&(n(R,{after:Z})||q.ignoreMatch());let H;const Y=R.input.substring(Z);if(H=Y.match(/^\s*=/)){q.ignoreMatch();return}if((H=Y.match(/^\s+extends\s+/))&&H.index===0){q.ignoreMatch();return}}},a={$pattern:mx,keyword:g3,literal:m3,built_in:b3,"variable.language":y3},l="[0-9](_?[0-9])*",c=`\\.(${l})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${u})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${u})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},h={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},f={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"xml"}},p={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"css"}},g={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"graphql"}},m={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,h]},b={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},C=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,f,p,g,m,{match:/\$\d+/},d];h.contains=C.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(C)});const v=[].concat(b,h.contains),k=v.concat([{begin:/(\s*)\(/,end:/\)/,keywords:a,contains:["self"].concat(v)}]),w={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:k},S={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},E={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...oS,...aS]}},I={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},$={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[w],illegal:/%/},T={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function P(R){return e.concat("(?!",R.join("|"),")")}const B={match:e.concat(/\b/,P([...lS,"super","import"].map(R=>`${R}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},A={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},M={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},w]},O="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",F={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(O)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[w]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:k,CLASS_REFERENCE:E},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),I,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,f,p,g,m,b,{match:/\$\d+/},d,E,{scope:"attr",match:r+e.lookahead(":"),relevance:0},F,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[b,t.REGEXP_MODE,{className:"function",begin:O,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:k}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:s},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},$,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[w,t.inherit(t.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},A,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[w]},B,T,S,M,{match:/\$[(.]/}]}}function v3(t){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],i={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[e,n,t.QUOTE_STRING_MODE,i,t.C_NUMBER_MODE,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var No="[0-9](_*[0-9])*",Fc=`\\.(${No})`,zc="[0-9a-fA-F](_*[0-9a-fA-F])*",w3={className:"number",variants:[{begin:`(\\b(${No})((${Fc})|\\.)?|(${Fc}))[eE][+-]?(${No})[fFdD]?\\b`},{begin:`\\b(${No})((${Fc})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${Fc})[fFdD]?\\b`},{begin:`\\b(${No})[fFdD]\\b`},{begin:`\\b0[xX]((${zc})\\.?|(${zc})?\\.(${zc}))[pP][+-]?(${No})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${zc})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function C3(t){const e={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},n={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},r={className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"@"},i={className:"subst",begin:/\$\{/,end:/\}/,contains:[t.C_NUMBER_MODE]},s={className:"variable",begin:"\\$"+t.UNDERSCORE_IDENT_RE},o={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[s,i]},{begin:"'",end:"'",illegal:/\n/,contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[t.BACKSLASH_ESCAPE,s,i]}]};i.contains.push(o);const a={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+t.UNDERSCORE_IDENT_RE+")?"},l={className:"meta",begin:"@"+t.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[t.inherit(o,{className:"string"}),"self"]}]},c=w3,u=t.COMMENT("/\\*","\\*/",{contains:[t.C_BLOCK_COMMENT_MODE]}),d={variants:[{className:"type",begin:t.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},h=d;return h.variants[1].contains=[d],d.variants[1].contains=[h],{name:"Kotlin",aliases:["kt","kts"],keywords:e,contains:[t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),t.C_LINE_COMMENT_MODE,u,n,r,a,l,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:e,relevance:5,contains:[{begin:t.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[t.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:e,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[d,t.C_LINE_COMMENT_MODE,u],relevance:0},t.C_LINE_COMMENT_MODE,u,a,l,o,t.C_NUMBER_MODE]},u]},{begin:[/class|interface|trait/,/\s+/,t.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},t.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},a,l]},o,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},c]}}const k3=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),S3=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],_3=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],E3=[...S3,..._3],T3=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),cS=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),uS=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),M3=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),A3=cS.concat(uS).sort().reverse();function N3(t){const e=k3(t),n=A3,r="and or not only",i="[\\w-]+",s="("+i+"|@\\{"+i+"\\})",o=[],a=[],l=function(C){return{className:"string",begin:"~?"+C+".*?"+C}},c=function(C,v,k){return{className:C,begin:v,relevance:k}},u={$pattern:/[a-z-]+/,keyword:r,attribute:T3.join(" ")},d={begin:"\\(",end:"\\)",contains:a,keywords:u,relevance:0};a.push(t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,l("'"),l('"'),e.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},e.HEXCOLOR,d,c("variable","@@?"+i,10),c("variable","@\\{"+i+"\\}"),c("built_in","~?`[^`]*?`"),{className:"attribute",begin:i+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},e.IMPORTANT,{beginKeywords:"and not"},e.FUNCTION_DISPATCH);const h=a.concat({begin:/\{/,end:/\}/,contains:o}),f={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(a)},p={begin:s+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+M3.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:a}}]},g={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:u,returnEnd:!0,contains:a,relevance:0}},m={className:"variable",variants:[{begin:"@"+i+"\\s*:",relevance:15},{begin:"@"+i}],starts:{end:"[;}]",returnEnd:!0,contains:h}},y={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:s,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,f,c("keyword","all\\b"),c("variable","@\\{"+i+"\\}"),{begin:"\\b("+E3.join("|")+")\\b",className:"selector-tag"},e.CSS_NUMBER_MODE,c("selector-tag",s,0),c("selector-id","#"+s),c("selector-class","\\."+s,0),c("selector-tag","&",0),e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+cS.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+uS.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:h},{begin:"!important"},e.FUNCTION_DISPATCH]},b={begin:i+`:(:)?(${n.join("|")})`,returnBegin:!0,contains:[y]};return o.push(t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,g,m,b,p,y,f,e.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:o}}function O3(t){const e="\\[=*\\[",n="\\]=*\\]",r={begin:e,end:n,contains:["self"]},i=[t.COMMENT("--(?!"+e+")","$"),t.COMMENT("--"+e,n,{contains:[r],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:t.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:i.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[t.inherit(t.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:i}].concat(i)},t.C_NUMBER_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{className:"string",begin:e,end:n,contains:[r],relevance:5}])}}function L3(t){const e={className:"variable",variants:[{begin:"\\$\\("+t.UNDERSCORE_IDENT_RE+"\\)",contains:[t.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},n={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,e]},r={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[e,n]},i={begin:"^"+t.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},s={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},o={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[e]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[t.HASH_COMMENT_MODE,e,n,r,i,s,o]}}function R3(t){const e=t.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},i={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},s={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},o={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},a=/[A-Za-z][A-Za-z0-9+.-]*/,l={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,a,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},c={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},u={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},d=t.inherit(c,{contains:[]}),h=t.inherit(u,{contains:[]});c.contains.push(h),u.contains.push(d);let f=[n,l];return[c,u,d,h].forEach(y=>{y.contains=y.contains.concat(f)}),f=f.concat(c,u),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:f},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:f}]}]},n,s,c,u,{className:"quote",begin:"^>\\s+",contains:f,end:"$"},i,r,l,o,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function I3(t){const e={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,a={"variable.language":["this","super"],$pattern:n,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},l={$pattern:n,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:a,illegal:"</",contains:[e,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,t.C_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+l.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:l,contains:[t.UNDERSCORE_TITLE_MODE]},{begin:"\\."+t.UNDERSCORE_IDENT_RE,relevance:0}]}}function D3(t){const e=t.regex,n=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],r=/[dualxmsipngr]{0,12}/,i={$pattern:/[\w.]+/,keyword:n.join(" ")},s={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:i},o={begin:/->\{/,end:/\}/},a={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},l={scope:"variable",variants:[{begin:/\$\d/},{begin:e.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[a]},c={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},u=[t.BACKSLASH_ESCAPE,s,l],d=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],h=(g,m,y="\\1")=>{const b=y==="\\1"?y:e.concat(y,m);return e.concat(e.concat("(?:",g,")"),m,/(?:\\.|[^\\\/])*?/,b,/(?:\\.|[^\\\/])*?/,y,r)},f=(g,m,y)=>e.concat(e.concat("(?:",g,")"),m,/(?:\\.|[^\\\/])*?/,y,r),p=[l,t.HASH_COMMENT_MODE,t.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),o,{className:"string",contains:u,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},c,{begin:"(\\/\\/|"+t.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[t.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:h("s|tr|y",e.either(...d,{capture:!0}))},{begin:h("s|tr|y","\\(","\\)")},{begin:h("s|tr|y","\\[","\\]")},{begin:h("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:f("(?:m|qr)?",/\//,/\//)},{begin:f("m|qr",e.either(...d,{capture:!0}),/\1/)},{begin:f("m|qr",/\(/,/\)/)},{begin:f("m|qr",/\[/,/\]/)},{begin:f("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,a]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,a,c]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return s.contains=p,o.contains=p,{name:"Perl",aliases:["pl","pm"],keywords:i,contains:p}}function B3(t){const e=t.regex,n=/(?![A-Za-z0-9])(?![$])/,r=e.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),i=e.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),s=e.concat(/[A-Z]+/,n),o={scope:"variable",match:"\\$+"+r},a={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},l={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},c=t.inherit(t.APOS_STRING_MODE,{illegal:null}),u=t.inherit(t.QUOTE_STRING_MODE,{illegal:null,contains:t.QUOTE_STRING_MODE.contains.concat(l)}),d={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:t.QUOTE_STRING_MODE.contains.concat(l),"on:begin":(A,M)=>{M.data._beginMatch=A[1]||A[2]},"on:end":(A,M)=>{M.data._beginMatch!==A[1]&&M.ignoreMatch()}},h=t.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),f=`[ 	
]`,p={scope:"string",variants:[u,c,d,h]},g={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},m=["false","null","true"],y=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],b=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],v={keyword:y,literal:(A=>{const M=[];return A.forEach(O=>{M.push(O),O.toLowerCase()===O?M.push(O.toUpperCase()):M.push(O.toLowerCase())}),M})(m),built_in:b},k=A=>A.map(M=>M.replace(/\|\d+$/,"")),w={variants:[{match:[/new/,e.concat(f,"+"),e.concat("(?!",k(b).join("\\b|"),"\\b)"),i],scope:{1:"keyword",4:"title.class"}}]},S=e.concat(r,"\\b(?!\\()"),E={variants:[{match:[e.concat(/::/,e.lookahead(/(?!class\b)/)),S],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[i,e.concat(/::/,e.lookahead(/(?!class\b)/)),S],scope:{1:"title.class",3:"variable.constant"}},{match:[i,e.concat("::",e.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[i,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},I={scope:"attr",match:e.concat(r,e.lookahead(":"),e.lookahead(/(?!::)/))},$={relevance:0,begin:/\(/,end:/\)/,keywords:v,contains:[I,o,E,t.C_BLOCK_COMMENT_MODE,p,g,w]},T={relevance:0,match:[/\b/,e.concat("(?!fn\\b|function\\b|",k(y).join("\\b|"),"|",k(b).join("\\b|"),"\\b)"),r,e.concat(f,"*"),e.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[$]};$.contains.push(T);const P=[I,E,t.C_BLOCK_COMMENT_MODE,p,g,w],B={begin:e.concat(/#\[\s*\\?/,e.either(i,s)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:m,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:m,keyword:["new","array"]},contains:["self",...P]},...P,{scope:"meta",variants:[{match:i},{match:s}]}]};return{case_insensitive:!1,keywords:v,contains:[B,t.HASH_COMMENT_MODE,t.COMMENT("//","$"),t.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:t.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},a,{scope:"variable.language",match:/\$this\b/},o,T,E,{match:[/const/,/\s/,r],scope:{1:"keyword",3:"variable.constant"}},w,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},t.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:v,contains:["self",B,o,E,t.C_BLOCK_COMMENT_MODE,p,g]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},t.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[t.inherit(t.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},t.UNDERSCORE_TITLE_MODE]},p,g]}}function P3(t){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},t.inherit(t.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),t.inherit(t.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function $3(t){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function F3(t){const e=t.regex,n=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],a={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},l={className:"meta",begin:/^(>>>|\.\.\.) /},c={className:"subst",begin:/\{/,end:/\}/,keywords:a,illegal:/#/},u={begin:/\{\{/,relevance:0},d={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,l,u,c]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,l,u,c]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,u,c]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,u,c]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},h="[0-9](_?[0-9])*",f=`(\\b(${h}))?\\.(${h})|\\b(${h})\\.`,p=`\\b|${r.join("|")}`,g={className:"number",relevance:0,variants:[{begin:`(\\b(${h})|(${f}))[eE][+-]?(${h})[jJ]?(?=${p})`},{begin:`(${f})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${p})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${p})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${p})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${p})`},{begin:`\\b(${h})[jJ](?=${p})`}]},m={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:a,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},y={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:["self",l,g,d,t.HASH_COMMENT_MODE]}]};return c.contains=[d,g,l],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:a,illegal:/(<\/|\?)|=>/,contains:[l,g,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},d,m,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[y]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[g,y,d]}]}}function z3(t){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function H3(t){const e=t.regex,n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,r=e.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),i=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,s=e.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:n,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[t.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:e.lookahead(e.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:n},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),t.HASH_COMMENT_MODE,{scope:"string",contains:[t.BACKSLASH_ESCAPE],variants:[t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[i,r]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,r]},{scope:{1:"punctuation",2:"number"},match:[s,r]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,r]}]},{scope:{3:"operator"},match:[n,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:i},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:s},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function W3(t){const e=t.regex,n="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",r=e.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),i=e.concat(r,/(::\w+)*/),o={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},a={className:"doctag",begin:"@[A-Za-z]+"},l={begin:"#<",end:">"},c=[t.COMMENT("#","$",{contains:[a]}),t.COMMENT("^=begin","^=end",{contains:[a],relevance:10}),t.COMMENT("^__END__",t.MATCH_NOTHING_RE)],u={className:"subst",begin:/#\{/,end:/\}/,keywords:o},d={className:"string",contains:[t.BACKSLASH_ESCAPE,u],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:e.concat(/<<[-~]?'?/,e.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[t.BACKSLASH_ESCAPE,u]})]}]},h="[1-9](_?[0-9])*|0",f="[0-9](_?[0-9])*",p={className:"number",relevance:0,variants:[{begin:`\\b(${h})(\\.(${f}))?([eE][+-]?(${f})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},g={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:o}]},w=[d,{variants:[{match:[/class\s+/,i,/\s+<\s+/,i]},{match:[/\b(class|module)\s+/,i]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:o},{match:[/(include|extend)\s+/,i],scope:{2:"title.class"},keywords:o},{relevance:0,match:[i,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:r,scope:"title.class"},{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[g]},{begin:t.IDENT_RE+"::"},{className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[d,{begin:n}],relevance:0},p,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:o},{begin:"("+t.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[t.BACKSLASH_ESCAPE,u],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(l,c),relevance:0}].concat(l,c);u.contains=w,g.contains=w;const $=[{begin:/^\s*=>/,starts:{end:"$",contains:w}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:o,contains:w}}];return c.unshift(l),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:o,illegal:/\/\*/,contains:[t.SHEBANG({binary:"ruby"})].concat($).concat(c).concat(w)}}function U3(t){const e=t.regex,n=/(r#)?/,r=e.concat(n,t.UNDERSCORE_IDENT_RE),i=e.concat(n,t.IDENT_RE),s={className:"title.function.invoke",relevance:0,begin:e.concat(/\b/,/(?!let|for|while|if|else|match\b)/,i,e.lookahead(/\s*\(/))},o="([ui](8|16|32|64|128|size)|f(32|64))?",a=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],l=["true","false","Some","None","Ok","Err"],c=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],u=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:t.IDENT_RE+"!?",type:u,keyword:a,literal:l,built_in:c},illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.COMMENT("/\\*","\\*/",{contains:["self"]}),t.inherit(t.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+o},{begin:"\\b0o([0-7_]+)"+o},{begin:"\\b0x([A-Fa-f0-9_]+)"+o},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+o}],relevance:0},{begin:[/fn/,/\s+/,r],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,r],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,r,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:t.IDENT_RE+"::",keywords:{keyword:"Self",built_in:c,type:u}},{className:"punctuation",begin:"->"},s]}}const j3=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),q3=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],V3=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],G3=[...q3,...V3],K3=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),Y3=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),X3=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),Z3=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function J3(t){const e=j3(t),n=X3,r=Y3,i="@[a-z-]+",s="and or not only",a={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,e.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+G3.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},a,{begin:/\(/,end:/\)/,contains:[e.CSS_NUMBER_MODE]},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Z3.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[e.BLOCK_COMMENT,a,e.HEXCOLOR,e.CSS_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.IMPORTANT,e.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:i,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:K3.join(" ")},contains:[{begin:i,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},a,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.HEXCOLOR,e.CSS_NUMBER_MODE]},e.FUNCTION_DISPATCH]}}function Q3(t){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function e5(t){const e=t.regex,n=t.COMMENT("--","$"),r={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},i={begin:/"/,end:/"/,contains:[{match:/""/}]},s=["true","false","unknown"],o=["double precision","large object","with timezone","without timezone"],a=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],l=["add","asc","collation","desc","final","first","last","view"],c=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],u=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],d=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],h=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],f=u,p=[...c,...l].filter(k=>!u.includes(k)),g={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},m={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},y={match:e.concat(/\b/,e.either(...f),/\s*\(/),relevance:0,keywords:{built_in:f}};function b(k){return e.concat(/\b/,e.either(...k.map(w=>w.replace(/\s+/,"\\s+"))),/\b/)}const C={scope:"keyword",match:b(h),relevance:0};function v(k,{exceptions:w,when:S}={}){const E=S;return w=w||[],k.map(I=>I.match(/\|\d+$/)||w.includes(I)?I:E(I)?`${I}|0`:I)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:v(p,{when:k=>k.length<3}),literal:s,type:a,built_in:d},contains:[{scope:"type",match:b(o)},C,y,g,r,i,t.C_NUMBER_MODE,t.C_BLOCK_COMMENT_MODE,n,m]}}function dS(t){return t?typeof t=="string"?t:t.source:null}function Aa(t){return ct("(?=",t,")")}function ct(...t){return t.map(n=>dS(n)).join("")}function t5(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function wn(...t){return"("+(t5(t).capture?"":"?:")+t.map(r=>dS(r)).join("|")+")"}const c0=t=>ct(/\b/,t,/\w$/.test(t)?/\b/:/\B/),n5=["Protocol","Type"].map(c0),yx=["init","self"].map(c0),r5=["Any","Self"],qf=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],bx=["false","nil","true"],i5=["assignment","associativity","higherThan","left","lowerThan","none","right"],s5=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],xx=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],hS=wn(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),fS=wn(hS,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),Vf=ct(hS,fS,"*"),pS=wn(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),vd=wn(pS,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),Br=ct(pS,vd,"*"),Hc=ct(/[A-Z]/,vd,"*"),o5=["attached","autoclosure",ct(/convention\(/,wn("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",ct(/objc\(/,Br,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],a5=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function l5(t){const e={match:/\s+/,relevance:0},n=t.COMMENT("/\\*","\\*/",{contains:["self"]}),r=[t.C_LINE_COMMENT_MODE,n],i={match:[/\./,wn(...n5,...yx)],className:{2:"keyword"}},s={match:ct(/\./,wn(...qf)),relevance:0},o=qf.filter(He=>typeof He=="string").concat(["_|0"]),a=qf.filter(He=>typeof He!="string").concat(r5).map(c0),l={variants:[{className:"keyword",match:wn(...a,...yx)}]},c={$pattern:wn(/\b\w+/,/#\w+/),keyword:o.concat(s5),literal:bx},u=[i,s,l],d={match:ct(/\./,wn(...xx)),relevance:0},h={className:"built_in",match:ct(/\b/,wn(...xx),/(?=\()/)},f=[d,h],p={match:/->/,relevance:0},g={className:"operator",relevance:0,variants:[{match:Vf},{match:`\\.(\\.|${fS})+`}]},m=[p,g],y="([0-9]_*)+",b="([0-9a-fA-F]_*)+",C={className:"number",relevance:0,variants:[{match:`\\b(${y})(\\.(${y}))?([eE][+-]?(${y}))?\\b`},{match:`\\b0x(${b})(\\.(${b}))?([pP][+-]?(${y}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},v=(He="")=>({className:"subst",variants:[{match:ct(/\\/,He,/[0\\tnr"']/)},{match:ct(/\\/,He,/u\{[0-9a-fA-F]{1,8}\}/)}]}),k=(He="")=>({className:"subst",match:ct(/\\/,He,/[\t ]*(?:[\r\n]|\r\n)/)}),w=(He="")=>({className:"subst",label:"interpol",begin:ct(/\\/,He,/\(/),end:/\)/}),S=(He="")=>({begin:ct(He,/"""/),end:ct(/"""/,He),contains:[v(He),k(He),w(He)]}),E=(He="")=>({begin:ct(He,/"/),end:ct(/"/,He),contains:[v(He),w(He)]}),I={className:"string",variants:[S(),S("#"),S("##"),S("###"),E(),E("#"),E("##"),E("###")]},$=[t.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[t.BACKSLASH_ESCAPE]}],T={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:$},P=He=>{const sn=ct(He,/\//),Dt=ct(/\//,He);return{begin:sn,end:Dt,contains:[...$,{scope:"comment",begin:`#(?!.*${Dt})`,end:/$/}]}},B={scope:"regexp",variants:[P("###"),P("##"),P("#"),T]},A={match:ct(/`/,Br,/`/)},M={className:"variable",match:/\$\d+/},O={className:"variable",match:`\\$${vd}+`},F=[A,M,O],R={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:a5,contains:[...m,C,I]}]}},q={scope:"keyword",match:ct(/@/,wn(...o5),Aa(wn(/\(/,/\s+/)))},Z={scope:"meta",match:ct(/@/,Br)},Q=[R,q,Z],H={match:Aa(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:ct(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,vd,"+")},{className:"type",match:Hc,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:ct(/\s+&\s+/,Aa(Hc)),relevance:0}]},Y={begin:/</,end:/>/,keywords:c,contains:[...r,...u,...Q,p,H]};H.contains.push(Y);const se={match:ct(Br,/\s*:/),keywords:"_|0",relevance:0},K={begin:/\(/,end:/\)/,relevance:0,keywords:c,contains:["self",se,...r,B,...u,...f,...m,C,I,...F,...Q,H]},ne={begin:/</,end:/>/,keywords:"repeat each",contains:[...r,H]},ue={begin:wn(Aa(ct(Br,/\s*:/)),Aa(ct(Br,/\s+/,Br,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:Br}]},ke={begin:/\(/,end:/\)/,keywords:c,contains:[ue,...r,...u,...m,C,I,...Q,H,K],endsParent:!0,illegal:/["']/},Oe={match:[/(func|macro)/,/\s+/,wn(A.match,Br,Vf)],className:{1:"keyword",3:"title.function"},contains:[ne,ke,e],illegal:[/\[/,/%/]},De={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[ne,ke,e],illegal:/\[|%/},Ye={match:[/operator/,/\s+/,Vf],className:{1:"keyword",3:"title"}},Et={begin:[/precedencegroup/,/\s+/,Hc],className:{1:"keyword",3:"title"},contains:[H],keywords:[...i5,...bx],end:/}/},bt={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},Vt={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},rn={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,Br,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:c,contains:[ne,...u,{begin:/:/,end:/\{/,keywords:c,contains:[{scope:"title.class.inherited",match:Hc},...u],relevance:0}]};for(const He of I.variants){const sn=He.contains.find(Fn=>Fn.label==="interpol");sn.keywords=c;const Dt=[...u,...f,...m,C,I,...F];sn.contains=[...Dt,{begin:/\(/,end:/\)/,contains:["self",...Dt]}]}return{name:"Swift",keywords:c,contains:[...r,Oe,De,bt,Vt,rn,Ye,Et,{beginKeywords:"import",end:/$/,contains:[...r],relevance:0},B,...u,...f,...m,C,I,...F,...Q,H,K]}}const wd="[A-Za-z$_][0-9A-Za-z$_]*",gS=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],mS=["true","false","null","undefined","NaN","Infinity"],yS=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],bS=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],xS=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],vS=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],wS=[].concat(xS,yS,bS);function c5(t){const e=t.regex,n=(R,{after:q})=>{const Z="</"+R[0].slice(1);return R.input.indexOf(Z,q)!==-1},r=wd,i={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(R,q)=>{const Z=R[0].length+R.index,Q=R.input[Z];if(Q==="<"||Q===","){q.ignoreMatch();return}Q===">"&&(n(R,{after:Z})||q.ignoreMatch());let H;const Y=R.input.substring(Z);if(H=Y.match(/^\s*=/)){q.ignoreMatch();return}if((H=Y.match(/^\s+extends\s+/))&&H.index===0){q.ignoreMatch();return}}},a={$pattern:wd,keyword:gS,literal:mS,built_in:wS,"variable.language":vS},l="[0-9](_?[0-9])*",c=`\\.(${l})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${u})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${u})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},h={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},f={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"xml"}},p={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"css"}},g={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"graphql"}},m={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,h]},b={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},C=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,f,p,g,m,{match:/\$\d+/},d];h.contains=C.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(C)});const v=[].concat(b,h.contains),k=v.concat([{begin:/(\s*)\(/,end:/\)/,keywords:a,contains:["self"].concat(v)}]),w={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:k},S={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},E={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...yS,...bS]}},I={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},$={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[w],illegal:/%/},T={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function P(R){return e.concat("(?!",R.join("|"),")")}const B={match:e.concat(/\b/,P([...xS,"super","import"].map(R=>`${R}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},A={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},M={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},w]},O="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",F={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(O)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[w]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:k,CLASS_REFERENCE:E},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),I,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,f,p,g,m,b,{match:/\$\d+/},d,E,{scope:"attr",match:r+e.lookahead(":"),relevance:0},F,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[b,t.REGEXP_MODE,{className:"function",begin:O,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:k}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:s},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},$,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[w,t.inherit(t.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},A,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[w]},B,T,S,M,{match:/\$[(.]/}]}}function u5(t){const e=t.regex,n=c5(t),r=wd,i=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],s={begin:[/namespace/,/\s+/,t.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},o={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:i},contains:[n.exports.CLASS_REFERENCE]},a={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},l=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],c={$pattern:wd,keyword:gS.concat(l),literal:mS,built_in:wS.concat(i),"variable.language":vS},u={className:"meta",begin:"@"+r},d=(g,m,y)=>{const b=g.contains.findIndex(C=>C.label===m);if(b===-1)throw new Error("can not find mode to replace");g.contains.splice(b,1,y)};Object.assign(n.keywords,c),n.exports.PARAMS_CONTAINS.push(u);const h=n.contains.find(g=>g.scope==="attr"),f=Object.assign({},h,{match:e.concat(r,e.lookahead(/\s*\?:/))});n.exports.PARAMS_CONTAINS.push([n.exports.CLASS_REFERENCE,h,f]),n.contains=n.contains.concat([u,s,o,f]),d(n,"shebang",t.SHEBANG()),d(n,"use_strict",a);const p=n.contains.find(g=>g.label==="func.def");return p.relevance=0,Object.assign(n,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),n}function d5(t){const e=t.regex,n={className:"string",begin:/"(""|[^/n])"C\b/},r={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},i=/\d{1,2}\/\d{1,2}\/\d{4}/,s=/\d{4}-\d{1,2}-\d{1,2}/,o=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,a=/\d{1,2}(:\d{1,2}){1,2}/,l={className:"literal",variants:[{begin:e.concat(/# */,e.either(s,i),/ *#/)},{begin:e.concat(/# */,a,/ *#/)},{begin:e.concat(/# */,o,/ *#/)},{begin:e.concat(/# */,e.either(s,i),/ +/,e.either(o,a),/ *#/)}]},c={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},u={className:"label",begin:/^\w+:/},d=t.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),h=t.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[n,r,l,c,u,d,h,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[h]}]}}function h5(t){t.regex;const e=t.COMMENT(/\(;/,/;\)/);e.contains.push("self");const n=t.COMMENT(/;;/,/$/),r=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],i={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},s={className:"variable",begin:/\$[\w_]+/},o={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},a={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},l={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},c={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:r},contains:[n,e,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},s,o,i,t.QUOTE_STRING_MODE,l,c,a]}}function f5(t){const e=t.regex,n=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,i={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},s={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},o=t.inherit(s,{begin:/\(/,end:/\)/}),a=t.inherit(t.APOS_STRING_MODE,{className:"string"}),l=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),c={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[i]},{begin:/'/,end:/'/,contains:[i]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[s,l,a,o,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[s,o,l,a]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},i,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[c],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[c],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(n,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:c}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function p5(t){const e="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},i={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},s={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},o={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,i]},a=t.inherit(o,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),h={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},f={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},p={begin:/\{/,end:/\}/,contains:[f],illegal:"\\n",relevance:0},g={begin:"\\[",end:"\\]",contains:[f],illegal:"\\n",relevance:0},m=[r,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},h,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},p,g,s,o],y=[...m];return y.pop(),y.push(a),f.contains=y,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:m}}const CS={arduino:X$,bash:Z$,c:J$,cpp:Q$,csharp:e3,css:c3,diff:u3,go:d3,graphql:h3,ini:f3,java:p3,javascript:x3,json:v3,kotlin:C3,less:N3,lua:O3,makefile:L3,markdown:R3,objectivec:I3,perl:D3,php:B3,"php-template":P3,plaintext:$3,python:F3,"python-repl":z3,r:H3,ruby:W3,rust:U3,scss:J3,shell:Q3,sql:e5,swift:l5,typescript:u5,vbnet:d5,wasm:h5,xml:f5,yaml:p5},vx={},g5="hljs-";function kS(t){const e=eS.newInstance();return t&&s(t),{highlight:n,highlightAuto:r,listLanguages:i,register:s,registerAlias:o,registered:a};function n(l,c,u){const d=u||vx,h=typeof d.prefix=="string"?d.prefix:g5;if(!e.getLanguage(l))throw new Error("Unknown language: `"+l+"` is not registered");e.configure({__emitter:m5,classPrefix:h});const f=e.highlight(c,{ignoreIllegals:!0,language:l});if(f.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:f.errorRaised});const p=f._emitter.root,g=p.data;return g.language=f.language,g.relevance=f.relevance,p}function r(l,c){const d=(c||vx).subset||i();let h=-1,f=0,p;for(;++h<d.length;){const g=d[h];if(!e.getLanguage(g))continue;const m=n(g,l,c);m.data&&m.data.relevance!==void 0&&m.data.relevance>f&&(f=m.data.relevance,p=m)}return p||{type:"root",children:[],data:{language:void 0,relevance:f}}}function i(){return e.listLanguages()}function s(l,c){if(typeof l=="string")e.registerLanguage(l,c);else{let u;for(u in l)Object.hasOwn(l,u)&&e.registerLanguage(u,l[u])}}function o(l,c){if(typeof l=="string")e.registerAliases(typeof c=="string"?c:[...c],{languageName:l});else{let u;for(u in l)if(Object.hasOwn(l,u)){const d=l[u];e.registerAliases(typeof d=="string"?d:[...d],{languageName:u})}}}function a(l){return!!e.getLanguage(l)}}class m5{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(e==="")return;const n=this.stack[this.stack.length-1],r=n.children[n.children.length-1];r&&r.type==="text"?r.value+=e:n.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,n){const r=this.stack[this.stack.length-1],i=e.root.children;n?r.children.push({type:"element",tagName:"span",properties:{className:[n]},children:i}):r.children.push(...i)}openNode(e){const n=this,r=e.split(".").map(function(o,a){return a?o+"_".repeat(a):n.options.classPrefix+o}),i=this.stack[this.stack.length-1],s={type:"element",tagName:"span",properties:{className:r},children:[]};i.children.push(s),this.stack.push(s)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}var Xt=[];for(var Gf=0;Gf<256;++Gf)Xt.push((Gf+256).toString(16).slice(1));function y5(t,e=0){return(Xt[t[e+0]]+Xt[t[e+1]]+Xt[t[e+2]]+Xt[t[e+3]]+"-"+Xt[t[e+4]]+Xt[t[e+5]]+"-"+Xt[t[e+6]]+Xt[t[e+7]]+"-"+Xt[t[e+8]]+Xt[t[e+9]]+"-"+Xt[t[e+10]]+Xt[t[e+11]]+Xt[t[e+12]]+Xt[t[e+13]]+Xt[t[e+14]]+Xt[t[e+15]]).toLowerCase()}var Wc,b5=new Uint8Array(16);function x5(){if(!Wc&&(Wc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Wc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Wc(b5)}var v5=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const wx={randomUUID:v5};function w5(t,e,n){if(wx.randomUUID&&!t)return wx.randomUUID();t=t||{};var r=t.random||(t.rng||x5)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,y5(r)}function C5(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function k5(t){const e=t.filter((r,i)=>t.indexOf(r)!==i);return C5(e)}var S5=Je.create({name:"uniqueID",priority:1e4,addOptions(){return{attributeName:"id",types:[],generateID:()=>w5(),filterTransaction:null,updateDocument:!0}},addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:t=>t.getAttribute(`data-${this.options.attributeName}`),renderHTML:t=>t[this.options.attributeName]?{[`data-${this.options.attributeName}`]:t[this.options.attributeName]}:{}}}}]},onCreate(){var t;if(!this.options.updateDocument)return;const e=this.editor.extensionManager.extensions.find(a=>a.name==="collaboration"),n=this.editor.extensionManager.extensions.find(a=>a.name==="collaborationCaret"),i=[e,n].filter(Boolean).find(a=>{var l;return(l=a==null?void 0:a.options)==null?void 0:l.provider}),s=(t=i==null?void 0:i.options)==null?void 0:t.provider,o=()=>{const{view:a,state:l}=this.editor,{tr:c,doc:u}=l,{types:d,attributeName:h,generateID:f}=this.options;ju(u,g=>d.includes(g.type.name)&&g.attrs[h]===null).forEach(({node:g,pos:m})=>{c.setNodeMarkup(m,void 0,{...g.attrs,[h]:f({node:g,pos:m})})}),c.setMeta("addToHistory",!1),a.dispatch(c),s&&s.off("synced",o)};if(i){if(!s)return o();s.on("synced",o)}else return o()},addProseMirrorPlugins(){if(!this.options.updateDocument)return[];let t=null,e=!1;return[new Ge({key:new rt("uniqueID"),appendTransaction:(n,r,i)=>{const s=n.some(g=>g.docChanged)&&!r.doc.eq(i.doc),o=this.options.filterTransaction&&n.some(g=>{var m,y;return!((y=(m=this.options).filterTransaction)!=null&&y.call(m,g))});if(n.find(g=>g.getMeta("y-sync$"))||!s||o)return;const{tr:l}=i,{types:c,attributeName:u,generateID:d}=this.options,h=zm(r.doc,n),{mapping:f}=h;if(jm(h).forEach(({newRange:g})=>{const m=JC(i.doc,g,b=>c.includes(b.type.name)),y=m.map(({node:b})=>b.attrs[u]).filter(b=>b!==null);m.forEach(({node:b,pos:C},v)=>{var k;const w=(k=l.doc.nodeAt(C))==null?void 0:k.attrs[u];if(w===null){l.setNodeMarkup(C,void 0,{...b.attrs,[u]:d({node:b,pos:C})});return}const S=m[v+1];if(S&&b.content.size===0){if(l.setNodeMarkup(S.pos,void 0,{...S.node.attrs,[u]:w}),y[v+1]=w,S.node.attrs[u])return;const T=d({node:b,pos:C});return l.setNodeMarkup(C,void 0,{...b.attrs,[u]:T}),y[v]=T,l}const E=k5(y),{deleted:I}=f.invert().mapResult(C);I&&E.includes(w)&&l.setNodeMarkup(C,void 0,{...b.attrs,[u]:d({node:b,pos:C})})})}),!!l.steps.length)return l.setStoredMarks(i.tr.storedMarks),l.setMeta("__uniqueIDTransaction",!0),l},view(n){const r=i=>{var s;t=(s=n.dom.parentElement)!=null&&s.contains(i.target)?n.dom.parentElement:null};return window.addEventListener("dragstart",r),{destroy(){window.removeEventListener("dragstart",r)}}},props:{handleDOMEvents:{drop:(n,r)=>{var i,s;return(t!==n.dom.parentElement||((i=r.dataTransfer)==null?void 0:i.effectAllowed)==="copyMove"||((s=r.dataTransfer)==null?void 0:s.effectAllowed)==="copy")&&(t=null,e=!0),!1},paste:()=>(e=!0,!1)},transformPasted:n=>{if(!e)return n;const{types:r,attributeName:i}=this.options,s=o=>{const a=[];return o.forEach(l=>{if(l.isText){a.push(l);return}if(!r.includes(l.type.name)){a.push(l.copy(s(l.content)));return}const c=l.type.create({...l.attrs,[i]:null},s(l.content),l.marks);a.push(c)}),V.from(a)};return e=!1,new re(s(n.content),n.openStart,n.openEnd)}}})]}});const _5="id",E5=[],T5=!0,M5=typeof crypto<"u"&&typeof crypto.randomUUID=="function";function A5(){if(M5)return crypto.randomUUID();const t=Date.now().toString(36),e=Math.random().toString(36).slice(2,10);return`node-${t}-${e}`}class N5{static create(e={}){const n={attributeName:e.attributeName??_5,types:e.types??E5,generateID:e.generateID??(()=>A5()),filterTransaction:e.filterTransaction??null,updateDocument:e.updateDocument??T5};return S5.configure(n)}static forHeading(){return this.create({types:["heading"],attributeName:"id"})}static forTypes(e){return this.create({types:e,attributeName:"id"})}}function Dl(t){return N5.create(t)}const Cx=6,O5=1,L5=4,R5=new rt("heading-numbering");function I5(t){return{1:" 1",2:" 2",3:" 3",4:" 4",5:" 5",6:" 6"}[t]||""}function kx(t){const e=[];return t.descendants((n,r)=>{if(n.type.name==="heading"&&n.attrs.numbered&&n.attrs.manualNumber){const i=n.attrs.manualNumber,s=n.content.size===0,o=n.attrs.level||1;e.push(St.widget(r+1,()=>{const a=document.createElement("span");if(a.className="numbered-heading-number",a.contentEditable="false",a.setAttribute("aria-hidden","true"),a.setAttribute("data-heading-number",i),a.textContent=i,s){const l=document.createElement("span");l.className="numbered-heading-placeholder",l.textContent=I5(o),a.appendChild(l)}return a.addEventListener("mousedown",l=>l.preventDefault()),a.addEventListener("click",l=>l.preventDefault()),a},{side:-1,key:`heading-number-${r}-${s}`}))}}),j.numbering.debug("",{count:e.length}),at.create(t,e)}function D5(){return new Ge({key:R5,state:{init(t,e){return j.numbering.debug(""),kx(e.doc)},apply(t,e){const n=t.docChanged,r=t.getMeta("numbering-changed");return j.numbering.debug("NumberingPlugin.apply ",{docChanged:n,numberingChanged:r}),!n&&!r?(j.numbering.debug(""),e.map(t.mapping,t.doc)):(j.numbering.debug("",{docChanged:n,numberingChanged:r}),kx(t.doc))}},props:{decorations(t){return this.getState(t)}}})}function Ks(t){return t.type.name==="heading"}function Cd(t){j.foldCalculator.debug("  heading depth",{attrs:t});const e=typeof t.level=="number"?t.level:parseInt(String(t.level??1),10)||1,n=Math.max(1,Math.min(e,6));return j.foldCalculator.debug("  level  depth",{level:e,depth:n,attrs:t}),n}class B5{calculate(e,n,r){j.foldCalculator.debug(" ",{headingPos:e,headingDepth:n});const i=r.nodeAt(e);if(!i||!Ks(i))return j.foldCalculator.warn(": ",{headingPos:e}),null;const s=r.resolve(e);let o=r.content.size,a=0,l=null;for(let p=s.depth;p>0;p-=1){const g=s.node(p);if(g.type.spec.isolating){l=g,a=s.start(p),o=a+g.content.size,j.foldCalculator.debug("",{containerStart:a,containerEnd:o});break}}const c=e+i.nodeSize;if(c>=o)return j.foldCalculator.debug("from >= containerEnd",{from:c,containerEnd:o}),null;let u=o;const d=Cd(i.attrs);j.foldCalculator.info(" ",{headingPos:e,currentLevel:d,containerEnd:o,hasContainer:!!l});let h=!1;if(r.descendants((p,g)=>{if(h)return!1;if(!(g<=e)){if(g>=o)return j.foldCalculator.debug(" container ",{pos:g,containerEnd:o}),!1;if(l){const m=r.resolve(g);let y=!1;for(let b=m.depth;b>0;b-=1)if(m.node(b)===l){y=!0;break}if(!y){j.foldCalculator.debug("  container",{pos:g,nodeType:p.type.name});return}}if(Ks(p)){const m=Cd(p.attrs);if(j.foldCalculator.info(" ",{pos:g,nodeType:p.type.name,nodeLevel:m,currentLevel:d,willStop:m<=d,nodeAttrs:p.attrs}),m<=d)return u=g,h=!0,j.foldCalculator.info(" ",{stopAt:g,nodeLevel:m,currentLevel:d}),!1}}}),c>=u)return j.foldCalculator.debug("from >= to",{from:c,to:u}),null;const f={from:c,to:u};return j.foldCalculator.info(" ",f),f}}function u0(t,e,n){return new B5().calculate(t,e,n)}const P5=new rt("heading-fold");function Sx(t){const e=[];return t.descendants((n,r)=>{if(!Ks(n))return;const i=!!n.attrs.collapsed,s=Cd(n.attrs),o=u0(r,s,t);if(o&&i){j.foldButton.info(" ",{headingPos:r,depth:s,rangeFrom:o.from,rangeTo:o.to,headingAttrs:n.attrs});const a=typeof n.attrs.level=="number"?n.attrs.level:parseInt(String(n.attrs.level??1),10)||1;t.nodesBetween(o.from,o.to,(l,c,u,d)=>{if(l.isBlock){if(Ks(l)){const h=typeof l.attrs.level=="number"?l.attrs.level:parseInt(String(l.attrs.level??1),10)||1;if(j.foldButton.debug("",{nodePos:c,nodeLevel:h,currentLevel:a,nodeAttrs:l.attrs}),h<=a)return j.foldButton.warn(" ",{nodePos:c,nodeLevel:h,currentLevel:a}),!1}return j.foldButton.debug(" ",{nodePos:c,nodeType:l.type.name,nodeSize:l.nodeSize}),e.push(St.node(c,c+l.nodeSize,{class:"heading-folded-content"})),!1}})}}),at.create(t,e)}function $5(){return new Ge({key:P5,state:{init(t,e){return Sx(e.doc)},apply(t,e){return!t.docChanged&&!t.getMeta("fold-changed")?e.map(t.mapping,t.doc):Sx(t.doc)}},props:{decorations(t){return this.getState(t)},handleClick(t,e,n){const r=n.target,i=r==null?void 0:r.closest(".heading-fold-toggle-inline");if(!i)return!1;n.preventDefault();const s=i.getAttribute("data-heading-pos");if(!s)return!1;const o=Number(s),a=t.state.doc.nodeAt(o);if(!a||!Ks(a))return!1;const l=!a.attrs.collapsed,c=t.state.tr;return c.setNodeMarkup(o,void 0,{...a.attrs,collapsed:l}),c.setMeta("fold-changed",!0),t.dispatch(c),!0}}})}const d0=dP.extend({addAttributes(){var t;return{...(t=this.parent)==null?void 0:t.call(this),numbered:{default:!1,parseHTML:e=>e.getAttribute("data-numbered")==="true"||e.getAttribute("data-type")==="numbered",renderHTML:e=>e.numbered?{"data-numbered":"true","data-type":"numbered"}:{}},manualNumber:{default:null,parseHTML:e=>e.getAttribute("data-manual-number"),renderHTML:e=>e.manualNumber?{"data-manual-number":e.manualNumber}:{}},indent:{default:0,parseHTML:e=>{const n=e.getAttribute("data-indent");return n?Number(n):0},renderHTML:e=>e.indent&&e.indent>0?{"data-indent":e.indent}:{}},collapsed:{default:!1,parseHTML:e=>e.getAttribute("data-collapsed")==="true",renderHTML:e=>e.collapsed?{"data-collapsed":"true"}:{}}}},addCommands(){var t;return{...(t=this.parent)==null?void 0:t.call(this),toggleNumbered:()=>({state:e,dispatch:n})=>{const{$from:r}=e.selection,i=r.parent;if(i.type.name!=="heading")return!1;if(n){const s=e.tr;s.setNodeMarkup(r.before(),void 0,{...i.attrs,numbered:!i.attrs.numbered,manualNumber:i.attrs.numbered?null:i.attrs.manualNumber}),s.setMeta("fold-changed",!0),n(s)}return!0},indentHeading:()=>({state:e,dispatch:n})=>{const{$from:r}=e.selection,i=r.parent;if(i.type.name!=="heading"||!i.attrs.numbered)return!1;const s=i.attrs.indent,o=i.attrs.level;if(s>=L5||o>=Cx)return!1;if(n){j.headingExtension.debug("",{indent:s,level:o});const a=e.tr;a.setNodeMarkup(r.before(),void 0,{...i.attrs,indent:s+1,level:Math.min(o+1,Cx)}),a.setMeta("numbering-changed",!0),n(a)}return!0},outdentHeading:()=>({state:e,dispatch:n})=>{const{$from:r}=e.selection,i=r.parent;if(i.type.name!=="heading"||!i.attrs.numbered)return!1;const s=i.attrs.indent,o=i.attrs.level;if(s===0)return!1;if(n){j.headingExtension.debug("",{indent:s,level:o});const a=e.tr;a.setNodeMarkup(r.before(),void 0,{...i.attrs,indent:s-1,level:Math.max(o-1,O5)}),a.setMeta("numbering-changed",!0),n(a)}return!0},toggleFold:()=>({state:e,dispatch:n})=>{const{$from:r}=e.selection,i=r.parent;if(i.type.name!=="heading")return!1;if(n){j.headingExtension.debug("",{level:i.attrs.level,collapsed:!i.attrs.collapsed});const s=e.tr;s.setNodeMarkup(r.before(),void 0,{...i.attrs,collapsed:!i.attrs.collapsed}),s.setMeta("fold-changed",!0),n(s)}return!0}}},addInputRules(){var n;const t=((n=this.parent)==null?void 0:n.call(this))??[],e=new rc({find:/^((?:\d+\.)+)\s$/,handler:({state:r,range:i,match:s})=>{const{tr:o}=r,a=i.from,l=i.to,c=s[1];o.delete(a,l);const u=o.doc.resolve(a),d=u.parent;d.type.name==="heading"&&o.setNodeMarkup(u.before(),void 0,{...d.attrs,numbered:!0,manualNumber:c})}});return[...t,e]},addKeyboardShortcuts(){var e;return{...((e=this.parent)==null?void 0:e.call(this))??{}}},renderHTML({node:t,HTMLAttributes:e}){const r=this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0],i={};return t.attrs.numbered&&(i["data-numbered"]="true",t.attrs.manualNumber&&(i["data-manual-number"]=t.attrs.manualNumber)),t.attrs.collapsed&&(i["data-collapsed"]="true"),t.attrs.indent>0&&(i["data-indent"]=String(t.attrs.indent)),[`h${r}`,Ze(this.options.HTMLAttributes,e,i),0]},addProseMirrorPlugins(){var e;return[...((e=this.parent)==null?void 0:e.call(this))??[],D5(),$5()]}}),Uc={theme:"blue",emoji:""},F5={blue:{name:"",defaultEmoji:"",bgClass:"bg-blue-50",borderClass:"border-blue-500",description:""},green:{name:"",defaultEmoji:"",bgClass:"bg-green-50",borderClass:"border-green-500",description:""},yellow:{name:"",defaultEmoji:"",bgClass:"bg-yellow-50",borderClass:"border-yellow-500",description:""},red:{name:"",defaultEmoji:"",bgClass:"bg-red-50",borderClass:"border-red-500",description:""},purple:{name:"",defaultEmoji:"",bgClass:"bg-purple-50",borderClass:"border-purple-500",description:""},gray:{name:"",defaultEmoji:"",bgClass:"bg-gray-50",borderClass:"border-gray-400",description:""},orange:{name:"",defaultEmoji:"",bgClass:"bg-orange-50",borderClass:"border-orange-500",description:""},cyan:{name:"",defaultEmoji:"",bgClass:"bg-cyan-50",borderClass:"border-cyan-500",description:""}};function _x(t){return F5[t].defaultEmoji}const z5=[{theme:"blue",nameKey:"colorBlue",bgColor:"#eff6ff",borderColor:"#3b82f6"},{theme:"green",nameKey:"colorGreen",bgColor:"#f0fdf4",borderColor:"#22c55e"},{theme:"yellow",nameKey:"colorYellow",bgColor:"#fefce8",borderColor:"#eab308"},{theme:"red",nameKey:"colorRed",bgColor:"#fef2f2",borderColor:"#ef4444"},{theme:"purple",nameKey:"colorPurple",bgColor:"#faf5ff",borderColor:"#a855f7"},{theme:"gray",nameKey:"colorGray",bgColor:"#f9fafb",borderColor:"#6b7280"},{theme:"orange",nameKey:"colorOrange",bgColor:"#fff7ed",borderColor:"#f97316"},{theme:"cyan",nameKey:"colorCyan",bgColor:"#ecfeff",borderColor:"#06b6d4"}];function H5(){return z5}const W5=()=>_.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:_.jsx("polyline",{points:"20 6 9 17 4 12"})});function U5({currentTheme:t,currentCustomColor:e,onSelect:n,onClose:r}){const{t:i}=ki(),s=H5(),o=L.useRef(null);L.useEffect(()=>{const l=c=>{o.current&&!o.current.contains(c.target)&&r()};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[r]);const a=l=>{n(l),r()};return _.jsx("div",{ref:o,className:"color-picker-container",role:"listbox","aria-label":i("changeColor"),children:_.jsx("div",{className:"color-picker-grid",children:s.map(l=>{const c=l.theme===t&&!e,u=i(l.nameKey);return _.jsxs("button",{type:"button",className:`color-picker-item ${c?"color-picker-item-selected":""}`,onClick:()=>a(l.theme),title:u,"aria-label":u,"aria-selected":c,role:"option",children:[_.jsx("span",{className:"color-picker-swatch",style:{backgroundColor:l.borderColor}}),c&&_.jsx("span",{className:"color-picker-check",children:_.jsx(W5,{})})]},l.theme)})})})}const j5=[{emoji:"",nameKey:"iconLightbulb"},{emoji:"",nameKey:"iconCheck"},{emoji:"",nameKey:"iconWarning"},{emoji:"",nameKey:"iconAlarm"},{emoji:"",nameKey:"iconStar"},{emoji:"",nameKey:"iconMemo"},{emoji:"",nameKey:"iconFire"},{emoji:"",nameKey:"iconTarget"},{emoji:"",nameKey:"iconPin"},{emoji:"",nameKey:"iconSpeech"},{emoji:"",nameKey:"iconBooks"},{emoji:"",nameKey:"iconPalette"},{emoji:"",nameKey:"iconBell"},{emoji:"",nameKey:"iconParty"},{emoji:"",nameKey:"iconThought"},{emoji:"",nameKey:"iconHeart"}];function q5(){return j5}const V5=()=>_.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:_.jsx("polyline",{points:"20 6 9 17 4 12"})});function G5({currentEmoji:t,onSelect:e,onClose:n}){const{t:r}=ki(),i=q5(),s=L.useRef(null);L.useEffect(()=>{const a=l=>{s.current&&!s.current.contains(l.target)&&n()};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[n]);const o=a=>{e(a),n()};return _.jsx("div",{ref:s,className:"icon-picker-container",role:"listbox","aria-label":r("changeIcon"),children:_.jsx("div",{className:"icon-picker-grid",children:i.map(a=>{const l=a.emoji===t,c=r(a.nameKey);return _.jsxs("button",{type:"button",className:`icon-picker-item ${l?"icon-picker-item-selected":""}`,onClick:()=>o(a.emoji),title:c,"aria-label":c,"aria-selected":l,role:"option",children:[_.jsx("span",{className:"icon-picker-emoji",children:a.emoji}),l&&_.jsx("span",{className:"icon-picker-check",children:_.jsx(V5,{})})]},a.emoji)})})})}const K5=()=>_.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("circle",{cx:"12",cy:"12",r:"10"}),_.jsx("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}),_.jsx("line",{x1:"9",y1:"9",x2:"9.01",y2:"9"}),_.jsx("line",{x1:"15",y1:"9",x2:"15.01",y2:"9"})]}),Y5=()=>_.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("circle",{cx:"13.5",cy:"6.5",r:"1.5",fill:"currentColor",stroke:"none"}),_.jsx("circle",{cx:"17.5",cy:"10.5",r:"1.5",fill:"currentColor",stroke:"none"}),_.jsx("circle",{cx:"8.5",cy:"7.5",r:"1.5",fill:"currentColor",stroke:"none"}),_.jsx("circle",{cx:"6.5",cy:"12.5",r:"1.5",fill:"currentColor",stroke:"none"}),_.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.563-2.512 5.563-5.563C22 6.375 17.5 2 12 2Z"})]}),X5=()=>_.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("path",{d:"M3 6h18"}),_.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),_.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),_.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),_.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]});function Z5({currentTheme:t,currentEmoji:e,currentCustomColor:n,visible:r,onEmojiChange:i,onColorChange:s,onDelete:o}){const{t:a}=ki(),[l,c]=L.useState(!1),[u,d]=L.useState(!1);if(!r)return null;const h=()=>{c(!1),d(!1)};return _.jsx("div",{className:"callout-hover-toolbar",contentEditable:!1,children:_.jsxs("div",{className:"callout-hover-toolbar-content",children:[_.jsxs("div",{style:{position:"relative"},children:[_.jsx("button",{type:"button",className:"callout-hover-toolbar-button",onClick:()=>{d(!1),c(!l)},title:a("changeIcon"),"aria-label":a("changeIcon"),children:_.jsx(K5,{})}),l&&_.jsx("div",{style:{position:"absolute",top:"100%",left:0,marginTop:"4px"},children:_.jsx(G5,{currentEmoji:e,onSelect:f=>{i(f),h()},onClose:()=>c(!1)})})]}),_.jsxs("div",{style:{position:"relative"},children:[_.jsx("button",{type:"button",className:"callout-hover-toolbar-button",onClick:()=>{c(!1),d(!u)},title:a("changeColor"),"aria-label":a("changeColor"),children:_.jsx(Y5,{})}),u&&_.jsx("div",{style:{position:"absolute",top:"100%",left:0,marginTop:"4px"},children:_.jsx(U5,{currentTheme:t,currentCustomColor:n,onSelect:s,onClose:()=>d(!1)})})]}),_.jsx("button",{type:"button",className:"callout-hover-toolbar-button callout-hover-toolbar-delete",onClick:o,title:a("delete"),"aria-label":a("delete"),children:_.jsx(X5,{})})]})})}const J5={blue:"info",green:"success",yellow:"warning",red:"danger",gray:"note",purple:"purple",orange:"orange",cyan:"cyan"};function Q5(t){const{node:e,editor:n,getPos:r,deleteNode:i}=t,{theme:s,emoji:o,customColor:a}=e.attrs,l=J5[s]||"info",c=(h,f)=>{const p=r();typeof p=="number"&&n.commands.command(({tr:g,dispatch:m})=>(m&&g.setNodeMarkup(p,void 0,{...e.attrs,theme:h,customColor:f||null}),!0))},u=h=>{const f=r();typeof f=="number"&&n.commands.command(({tr:p,dispatch:g})=>(g&&p.setNodeMarkup(f,void 0,{...e.attrs,emoji:h}),!0))},d=()=>{i()};return _.jsx(Sh,{"data-callout-node-view":!0,children:_.jsxs("div",{className:"callout-wrapper","data-theme":s,"data-emoji":o,style:{position:"relative"},children:[_.jsx(Z5,{currentTheme:s,currentEmoji:o,currentCustomColor:a,visible:!0,onEmojiChange:u,onColorChange:c,onDelete:d}),_.jsxs("div",{className:`callout-container callout-${l}`,children:[_.jsx("div",{className:"callout-emoji-container",contentEditable:!1,children:_.jsx("span",{className:"callout-emoji-display",children:o})}),_.jsx("div",{className:"callout-content",children:_.jsx(Xm,{})})]})]})})}const eF=_h(Q5),tF=_t.create({name:"callout",group:"block",content:"block+",defining:!0,addOptions(){return{HTMLAttributes:{}}},addAttributes(){return{theme:{default:Uc.theme,parseHTML:t=>t.getAttribute("data-theme")||Uc.theme,renderHTML:t=>({"data-theme":t.theme})},emoji:{default:Uc.emoji,parseHTML:t=>{const e=t.getAttribute("data-theme");return t.getAttribute("data-emoji")||_x(e||"blue")},renderHTML:t=>({"data-emoji":t.emoji})},customColor:{default:null,parseHTML:t=>t.getAttribute("data-custom-color")||null,renderHTML:t=>t.customColor?{"data-custom-color":t.customColor}:{}}}},parseHTML(){return[{tag:'div[data-type="callout"]'}]},renderHTML({node:t,HTMLAttributes:e}){return["div",Ze(this.options.HTMLAttributes,e,{"data-type":"callout"}),0]},addNodeView(){return eF},addCommands(){return{insertCallout:(t={})=>({commands:e})=>{const n=t.theme||Uc.theme,r=t.emoji||_x(n);return e.insertContent({type:this.name,attrs:{theme:n,emoji:r},content:[{type:"paragraph"}]})},updateCalloutAttrs:t=>({tr:e,state:n,dispatch:r})=>{const{selection:i}=n,{$from:s}=i;let o=null,a=null;for(let l=s.depth;l>0;l--){const c=s.node(l);if(c.type.name==="callout"){o=c,a=s.before(l);break}}return!o||a===null?!1:(r&&e.setNodeMarkup(a,void 0,{...o.attrs,...t}),!0)}}}}),nF=tF;var Ex={name:"mermaid",version:"11.12.2",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.13",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},pu={exports:{}},rF=pu.exports,Tx;function iF(){return Tx||(Tx=1,(function(t,e){(function(n,r){t.exports=r()})(rF,(function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",u="week",d="month",h="quarter",f="year",p="date",g="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(A){var M=["th","st","nd","rd"],O=A%100;return"["+A+(M[(O-20)%10]||M[O]||M[0])+"]"}},C=function(A,M,O){var F=String(A);return!F||F.length>=M?A:""+Array(M+1-F.length).join(O)+A},v={s:C,z:function(A){var M=-A.utcOffset(),O=Math.abs(M),F=Math.floor(O/60),R=O%60;return(M<=0?"+":"-")+C(F,2,"0")+":"+C(R,2,"0")},m:function A(M,O){if(M.date()<O.date())return-A(O,M);var F=12*(O.year()-M.year())+(O.month()-M.month()),R=M.clone().add(F,d),q=O-R<0,Z=M.clone().add(F+(q?-1:1),d);return+(-(F+(O-R)/(q?R-Z:Z-R))||0)},a:function(A){return A<0?Math.ceil(A)||0:Math.floor(A)},p:function(A){return{M:d,y:f,w:u,d:c,D:p,h:l,m:a,s:o,ms:s,Q:h}[A]||String(A||"").toLowerCase().replace(/s$/,"")},u:function(A){return A===void 0}},k="en",w={};w[k]=b;var S="$isDayjsObject",E=function(A){return A instanceof P||!(!A||!A[S])},I=function A(M,O,F){var R;if(!M)return k;if(typeof M=="string"){var q=M.toLowerCase();w[q]&&(R=q),O&&(w[q]=O,R=q);var Z=M.split("-");if(!R&&Z.length>1)return A(Z[0])}else{var Q=M.name;w[Q]=M,R=Q}return!F&&R&&(k=R),R||!F&&k},$=function(A,M){if(E(A))return A.clone();var O=typeof M=="object"?M:{};return O.date=A,O.args=arguments,new P(O)},T=v;T.l=I,T.i=E,T.w=function(A,M){return $(A,{locale:M.$L,utc:M.$u,x:M.$x,$offset:M.$offset})};var P=(function(){function A(O){this.$L=I(O.locale,null,!0),this.parse(O),this.$x=this.$x||O.x||{},this[S]=!0}var M=A.prototype;return M.parse=function(O){this.$d=(function(F){var R=F.date,q=F.utc;if(R===null)return new Date(NaN);if(T.u(R))return new Date;if(R instanceof Date)return new Date(R);if(typeof R=="string"&&!/Z$/i.test(R)){var Z=R.match(m);if(Z){var Q=Z[2]-1||0,H=(Z[7]||"0").substring(0,3);return q?new Date(Date.UTC(Z[1],Q,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,H)):new Date(Z[1],Q,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,H)}}return new Date(R)})(O),this.init()},M.init=function(){var O=this.$d;this.$y=O.getFullYear(),this.$M=O.getMonth(),this.$D=O.getDate(),this.$W=O.getDay(),this.$H=O.getHours(),this.$m=O.getMinutes(),this.$s=O.getSeconds(),this.$ms=O.getMilliseconds()},M.$utils=function(){return T},M.isValid=function(){return this.$d.toString()!==g},M.isSame=function(O,F){var R=$(O);return this.startOf(F)<=R&&R<=this.endOf(F)},M.isAfter=function(O,F){return $(O)<this.startOf(F)},M.isBefore=function(O,F){return this.endOf(F)<$(O)},M.$g=function(O,F,R){return T.u(O)?this[F]:this.set(R,O)},M.unix=function(){return Math.floor(this.valueOf()/1e3)},M.valueOf=function(){return this.$d.getTime()},M.startOf=function(O,F){var R=this,q=!!T.u(F)||F,Z=T.p(O),Q=function(Oe,De){var Ye=T.w(R.$u?Date.UTC(R.$y,De,Oe):new Date(R.$y,De,Oe),R);return q?Ye:Ye.endOf(c)},H=function(Oe,De){return T.w(R.toDate()[Oe].apply(R.toDate("s"),(q?[0,0,0,0]:[23,59,59,999]).slice(De)),R)},Y=this.$W,se=this.$M,K=this.$D,ne="set"+(this.$u?"UTC":"");switch(Z){case f:return q?Q(1,0):Q(31,11);case d:return q?Q(1,se):Q(0,se+1);case u:var ue=this.$locale().weekStart||0,ke=(Y<ue?Y+7:Y)-ue;return Q(q?K-ke:K+(6-ke),se);case c:case p:return H(ne+"Hours",0);case l:return H(ne+"Minutes",1);case a:return H(ne+"Seconds",2);case o:return H(ne+"Milliseconds",3);default:return this.clone()}},M.endOf=function(O){return this.startOf(O,!1)},M.$set=function(O,F){var R,q=T.p(O),Z="set"+(this.$u?"UTC":""),Q=(R={},R[c]=Z+"Date",R[p]=Z+"Date",R[d]=Z+"Month",R[f]=Z+"FullYear",R[l]=Z+"Hours",R[a]=Z+"Minutes",R[o]=Z+"Seconds",R[s]=Z+"Milliseconds",R)[q],H=q===c?this.$D+(F-this.$W):F;if(q===d||q===f){var Y=this.clone().set(p,1);Y.$d[Q](H),Y.init(),this.$d=Y.set(p,Math.min(this.$D,Y.daysInMonth())).$d}else Q&&this.$d[Q](H);return this.init(),this},M.set=function(O,F){return this.clone().$set(O,F)},M.get=function(O){return this[T.p(O)]()},M.add=function(O,F){var R,q=this;O=Number(O);var Z=T.p(F),Q=function(se){var K=$(q);return T.w(K.date(K.date()+Math.round(se*O)),q)};if(Z===d)return this.set(d,this.$M+O);if(Z===f)return this.set(f,this.$y+O);if(Z===c)return Q(1);if(Z===u)return Q(7);var H=(R={},R[a]=r,R[l]=i,R[o]=n,R)[Z]||1,Y=this.$d.getTime()+O*H;return T.w(Y,this)},M.subtract=function(O,F){return this.add(-1*O,F)},M.format=function(O){var F=this,R=this.$locale();if(!this.isValid())return R.invalidDate||g;var q=O||"YYYY-MM-DDTHH:mm:ssZ",Z=T.z(this),Q=this.$H,H=this.$m,Y=this.$M,se=R.weekdays,K=R.months,ne=R.meridiem,ue=function(De,Ye,Et,bt){return De&&(De[Ye]||De(F,q))||Et[Ye].slice(0,bt)},ke=function(De){return T.s(Q%12||12,De,"0")},Oe=ne||function(De,Ye,Et){var bt=De<12?"AM":"PM";return Et?bt.toLowerCase():bt};return q.replace(y,(function(De,Ye){return Ye||(function(Et){switch(Et){case"YY":return String(F.$y).slice(-2);case"YYYY":return T.s(F.$y,4,"0");case"M":return Y+1;case"MM":return T.s(Y+1,2,"0");case"MMM":return ue(R.monthsShort,Y,K,3);case"MMMM":return ue(K,Y);case"D":return F.$D;case"DD":return T.s(F.$D,2,"0");case"d":return String(F.$W);case"dd":return ue(R.weekdaysMin,F.$W,se,2);case"ddd":return ue(R.weekdaysShort,F.$W,se,3);case"dddd":return se[F.$W];case"H":return String(Q);case"HH":return T.s(Q,2,"0");case"h":return ke(1);case"hh":return ke(2);case"a":return Oe(Q,H,!0);case"A":return Oe(Q,H,!1);case"m":return String(H);case"mm":return T.s(H,2,"0");case"s":return String(F.$s);case"ss":return T.s(F.$s,2,"0");case"SSS":return T.s(F.$ms,3,"0");case"Z":return Z}return null})(De)||Z.replace(":","")}))},M.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},M.diff=function(O,F,R){var q,Z=this,Q=T.p(F),H=$(O),Y=(H.utcOffset()-this.utcOffset())*r,se=this-H,K=function(){return T.m(Z,H)};switch(Q){case f:q=K()/12;break;case d:q=K();break;case h:q=K()/3;break;case u:q=(se-Y)/6048e5;break;case c:q=(se-Y)/864e5;break;case l:q=se/i;break;case a:q=se/r;break;case o:q=se/n;break;default:q=se}return R?q:T.a(q)},M.daysInMonth=function(){return this.endOf(d).$D},M.$locale=function(){return w[this.$L]},M.locale=function(O,F){if(!O)return this.$L;var R=this.clone(),q=I(O,F,!0);return q&&(R.$L=q),R},M.clone=function(){return T.w(this.$d,this)},M.toDate=function(){return new Date(this.valueOf())},M.toJSON=function(){return this.isValid()?this.toISOString():null},M.toISOString=function(){return this.$d.toISOString()},M.toString=function(){return this.$d.toUTCString()},A})(),B=P.prototype;return $.prototype=B,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",d],["$y",f],["$D",p]].forEach((function(A){B[A[1]]=function(M){return this.$g(M,A[0],A[1])}})),$.extend=function(A,M){return A.$i||(A(M,P,$),A.$i=!0),$},$.locale=I,$.isDayjs=E,$.unix=function(A){return $(1e3*A)},$.en=w[k],$.Ls=w,$.p={},$}))})(pu)),pu.exports}var sF=iF();const oF=gm(sF);var SS=Object.defineProperty,x=(t,e)=>SS(t,"name",{value:e,configurable:!0}),aF=(t,e)=>{for(var n in e)SS(t,n,{get:e[n],enumerable:!0})},oi={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},G={trace:x((...t)=>{},"trace"),debug:x((...t)=>{},"debug"),info:x((...t)=>{},"info"),warn:x((...t)=>{},"warn"),error:x((...t)=>{},"error"),fatal:x((...t)=>{},"fatal")},h0=x(function(t="fatal"){let e=oi.fatal;typeof t=="string"?t.toLowerCase()in oi&&(e=oi[t]):typeof t=="number"&&(e=t),G.trace=()=>{},G.debug=()=>{},G.info=()=>{},G.warn=()=>{},G.error=()=>{},G.fatal=()=>{},e<=oi.fatal&&(G.fatal=console.error?console.error.bind(console,er("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",er("FATAL"))),e<=oi.error&&(G.error=console.error?console.error.bind(console,er("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",er("ERROR"))),e<=oi.warn&&(G.warn=console.warn?console.warn.bind(console,er("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",er("WARN"))),e<=oi.info&&(G.info=console.info?console.info.bind(console,er("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",er("INFO"))),e<=oi.debug&&(G.debug=console.debug?console.debug.bind(console,er("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",er("DEBUG"))),e<=oi.trace&&(G.trace=console.debug?console.debug.bind(console,er("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",er("TRACE")))},"setLogLevel"),er=x(t=>`%c${oF().format("ss.SSS")} : ${t} : `,"format");const gu={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:t=>t>=255?255:t<0?0:t,g:t=>t>=255?255:t<0?0:t,b:t=>t>=255?255:t<0?0:t,h:t=>t%360,s:t=>t>=100?100:t<0?0:t,l:t=>t>=100?100:t<0?0:t,a:t=>t>=1?1:t<0?0:t},toLinear:t=>{const e=t/255;return t>.03928?Math.pow((e+.055)/1.055,2.4):e/12.92},hue2rgb:(t,e,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t),hsl2rgb:({h:t,s:e,l:n},r)=>{if(!e)return n*2.55;t/=360,e/=100,n/=100;const i=n<.5?n*(1+e):n+e-n*e,s=2*n-i;switch(r){case"r":return gu.hue2rgb(s,i,t+1/3)*255;case"g":return gu.hue2rgb(s,i,t)*255;case"b":return gu.hue2rgb(s,i,t-1/3)*255}},rgb2hsl:({r:t,g:e,b:n},r)=>{t/=255,e/=255,n/=255;const i=Math.max(t,e,n),s=Math.min(t,e,n),o=(i+s)/2;if(r==="l")return o*100;if(i===s)return 0;const a=i-s,l=o>.5?a/(2-i-s):a/(i+s);if(r==="s")return l*100;switch(i){case t:return((e-n)/a+(e<n?6:0))*60;case e:return((n-t)/a+2)*60;case n:return((t-e)/a+4)*60;default:return-1}}},lF={clamp:(t,e,n)=>e>n?Math.min(e,Math.max(n,t)):Math.min(n,Math.max(e,t)),round:t=>Math.round(t*1e10)/1e10},cF={dec2hex:t=>{const e=Math.round(t).toString(16);return e.length>1?e:`0${e}`}},Be={channel:gu,lang:lF,unit:cF},Li={};for(let t=0;t<=255;t++)Li[t]=Be.unit.dec2hex(t);const cn={ALL:0,RGB:1,HSL:2};class uF{constructor(){this.type=cn.ALL}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=cn.ALL}is(e){return this.type===e}}class dF{constructor(e,n){this.color=n,this.changed=!1,this.data=e,this.type=new uF}set(e,n){return this.color=n,this.changed=!1,this.data=e,this.type.type=cn.ALL,this}_ensureHSL(){const e=this.data,{h:n,s:r,l:i}=e;n===void 0&&(e.h=Be.channel.rgb2hsl(e,"h")),r===void 0&&(e.s=Be.channel.rgb2hsl(e,"s")),i===void 0&&(e.l=Be.channel.rgb2hsl(e,"l"))}_ensureRGB(){const e=this.data,{r:n,g:r,b:i}=e;n===void 0&&(e.r=Be.channel.hsl2rgb(e,"r")),r===void 0&&(e.g=Be.channel.hsl2rgb(e,"g")),i===void 0&&(e.b=Be.channel.hsl2rgb(e,"b"))}get r(){const e=this.data,n=e.r;return!this.type.is(cn.HSL)&&n!==void 0?n:(this._ensureHSL(),Be.channel.hsl2rgb(e,"r"))}get g(){const e=this.data,n=e.g;return!this.type.is(cn.HSL)&&n!==void 0?n:(this._ensureHSL(),Be.channel.hsl2rgb(e,"g"))}get b(){const e=this.data,n=e.b;return!this.type.is(cn.HSL)&&n!==void 0?n:(this._ensureHSL(),Be.channel.hsl2rgb(e,"b"))}get h(){const e=this.data,n=e.h;return!this.type.is(cn.RGB)&&n!==void 0?n:(this._ensureRGB(),Be.channel.rgb2hsl(e,"h"))}get s(){const e=this.data,n=e.s;return!this.type.is(cn.RGB)&&n!==void 0?n:(this._ensureRGB(),Be.channel.rgb2hsl(e,"s"))}get l(){const e=this.data,n=e.l;return!this.type.is(cn.RGB)&&n!==void 0?n:(this._ensureRGB(),Be.channel.rgb2hsl(e,"l"))}get a(){return this.data.a}set r(e){this.type.set(cn.RGB),this.changed=!0,this.data.r=e}set g(e){this.type.set(cn.RGB),this.changed=!0,this.data.g=e}set b(e){this.type.set(cn.RGB),this.changed=!0,this.data.b=e}set h(e){this.type.set(cn.HSL),this.changed=!0,this.data.h=e}set s(e){this.type.set(cn.HSL),this.changed=!0,this.data.s=e}set l(e){this.type.set(cn.HSL),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}}const Th=new dF({r:0,g:0,b:0,a:0},"transparent"),zo={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:t=>{if(t.charCodeAt(0)!==35)return;const e=t.match(zo.re);if(!e)return;const n=e[1],r=parseInt(n,16),i=n.length,s=i%4===0,o=i>4,a=o?1:17,l=o?8:4,c=s?0:-1,u=o?255:15;return Th.set({r:(r>>l*(c+3)&u)*a,g:(r>>l*(c+2)&u)*a,b:(r>>l*(c+1)&u)*a,a:s?(r&u)*a/255:1},t)},stringify:t=>{const{r:e,g:n,b:r,a:i}=t;return i<1?`#${Li[Math.round(e)]}${Li[Math.round(n)]}${Li[Math.round(r)]}${Li[Math.round(i*255)]}`:`#${Li[Math.round(e)]}${Li[Math.round(n)]}${Li[Math.round(r)]}`}},Ns={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:t=>{const e=t.match(Ns.hueRe);if(e){const[,n,r]=e;switch(r){case"grad":return Be.channel.clamp.h(parseFloat(n)*.9);case"rad":return Be.channel.clamp.h(parseFloat(n)*180/Math.PI);case"turn":return Be.channel.clamp.h(parseFloat(n)*360)}}return Be.channel.clamp.h(parseFloat(t))},parse:t=>{const e=t.charCodeAt(0);if(e!==104&&e!==72)return;const n=t.match(Ns.re);if(!n)return;const[,r,i,s,o,a]=n;return Th.set({h:Ns._hue2deg(r),s:Be.channel.clamp.s(parseFloat(i)),l:Be.channel.clamp.l(parseFloat(s)),a:o?Be.channel.clamp.a(a?parseFloat(o)/100:parseFloat(o)):1},t)},stringify:t=>{const{h:e,s:n,l:r,a:i}=t;return i<1?`hsla(${Be.lang.round(e)}, ${Be.lang.round(n)}%, ${Be.lang.round(r)}%, ${i})`:`hsl(${Be.lang.round(e)}, ${Be.lang.round(n)}%, ${Be.lang.round(r)}%)`}},fl={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:t=>{t=t.toLowerCase();const e=fl.colors[t];if(e)return zo.parse(e)},stringify:t=>{const e=zo.stringify(t);for(const n in fl.colors)if(fl.colors[n]===e)return n}},Ka={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:t=>{const e=t.charCodeAt(0);if(e!==114&&e!==82)return;const n=t.match(Ka.re);if(!n)return;const[,r,i,s,o,a,l,c,u]=n;return Th.set({r:Be.channel.clamp.r(i?parseFloat(r)*2.55:parseFloat(r)),g:Be.channel.clamp.g(o?parseFloat(s)*2.55:parseFloat(s)),b:Be.channel.clamp.b(l?parseFloat(a)*2.55:parseFloat(a)),a:c?Be.channel.clamp.a(u?parseFloat(c)/100:parseFloat(c)):1},t)},stringify:t=>{const{r:e,g:n,b:r,a:i}=t;return i<1?`rgba(${Be.lang.round(e)}, ${Be.lang.round(n)}, ${Be.lang.round(r)}, ${Be.lang.round(i)})`:`rgb(${Be.lang.round(e)}, ${Be.lang.round(n)}, ${Be.lang.round(r)})`}},Xr={format:{keyword:fl,hex:zo,rgb:Ka,rgba:Ka,hsl:Ns,hsla:Ns},parse:t=>{if(typeof t!="string")return t;const e=zo.parse(t)||Ka.parse(t)||Ns.parse(t)||fl.parse(t);if(e)return e;throw new Error(`Unsupported color format: "${t}"`)},stringify:t=>!t.changed&&t.color?t.color:t.type.is(cn.HSL)||t.data.r===void 0?Ns.stringify(t):t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?Ka.stringify(t):zo.stringify(t)},_S=(t,e)=>{const n=Xr.parse(t);for(const r in e)n[r]=Be.channel.clamp[r](e[r]);return Xr.stringify(n)},pl=(t,e,n=0,r=1)=>{if(typeof t!="number")return _S(t,{a:e});const i=Th.set({r:Be.channel.clamp.r(t),g:Be.channel.clamp.g(e),b:Be.channel.clamp.b(n),a:Be.channel.clamp.a(r)});return Xr.stringify(i)},hF=t=>{const{r:e,g:n,b:r}=Xr.parse(t),i=.2126*Be.channel.toLinear(e)+.7152*Be.channel.toLinear(n)+.0722*Be.channel.toLinear(r);return Be.lang.round(i)},fF=t=>hF(t)>=.5,sc=t=>!fF(t),ES=(t,e,n)=>{const r=Xr.parse(t),i=r[e],s=Be.channel.clamp[e](i+n);return i!==s&&(r[e]=s),Xr.stringify(r)},pe=(t,e)=>ES(t,"l",e),Ee=(t,e)=>ES(t,"l",-e),z=(t,e)=>{const n=Xr.parse(t),r={};for(const i in e)e[i]&&(r[i]=n[i]+e[i]);return _S(t,r)},pF=(t,e,n=50)=>{const{r,g:i,b:s,a:o}=Xr.parse(t),{r:a,g:l,b:c,a:u}=Xr.parse(e),d=n/100,h=d*2-1,f=o-u,g=((h*f===-1?h:(h+f)/(1+h*f))+1)/2,m=1-g,y=r*g+a*m,b=i*g+l*m,C=s*g+c*m,v=o*d+u*(1-d);return pl(y,b,C,v)},ie=(t,e=100)=>{const n=Xr.parse(t);return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,pF(n,t,e)};/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:TS,setPrototypeOf:Mx,isFrozen:gF,getPrototypeOf:mF,getOwnPropertyDescriptor:yF}=Object;let{freeze:Mn,seal:ur,create:rg}=Object,{apply:ig,construct:sg}=typeof Reflect<"u"&&Reflect;Mn||(Mn=function(e){return e});ur||(ur=function(e){return e});ig||(ig=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return e.apply(n,i)});sg||(sg=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new e(...r)});const jc=An(Array.prototype.forEach),bF=An(Array.prototype.lastIndexOf),Ax=An(Array.prototype.pop),Na=An(Array.prototype.push),xF=An(Array.prototype.splice),mu=An(String.prototype.toLowerCase),Kf=An(String.prototype.toString),Yf=An(String.prototype.match),Oa=An(String.prototype.replace),vF=An(String.prototype.indexOf),wF=An(String.prototype.trim),yr=An(Object.prototype.hasOwnProperty),vn=An(RegExp.prototype.test),La=CF(TypeError);function An(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return ig(t,e,r)}}function CF(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return sg(t,n)}}function Ue(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mu;Mx&&Mx(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=n(i);s!==i&&(gF(e)||(e[r]=s),i=s)}t[i]=!0}return t}function kF(t){for(let e=0;e<t.length;e++)yr(t,e)||(t[e]=null);return t}function ci(t){const e=rg(null);for(const[n,r]of TS(t))yr(t,n)&&(Array.isArray(r)?e[n]=kF(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=ci(r):e[n]=r);return e}function Ra(t,e){for(;t!==null;){const r=yF(t,e);if(r){if(r.get)return An(r.get);if(typeof r.value=="function")return An(r.value)}t=mF(t)}function n(){return null}return n}const Nx=Mn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Xf=Mn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Zf=Mn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),SF=Mn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Jf=Mn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),_F=Mn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ox=Mn(["#text"]),Lx=Mn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Qf=Mn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Rx=Mn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),qc=Mn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),EF=ur(/\{\{[\w\W]*|[\w\W]*\}\}/gm),TF=ur(/<%[\w\W]*|[\w\W]*%>/gm),MF=ur(/\$\{[\w\W]*/gm),AF=ur(/^data-[\-\w.\u00B7-\uFFFF]+$/),NF=ur(/^aria-[\-\w]+$/),MS=ur(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),OF=ur(/^(?:\w+script|data):/i),LF=ur(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),AS=ur(/^html$/i),RF=ur(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ix=Object.freeze({__proto__:null,ARIA_ATTR:NF,ATTR_WHITESPACE:LF,CUSTOM_ELEMENT:RF,DATA_ATTR:AF,DOCTYPE_NAME:AS,ERB_EXPR:TF,IS_ALLOWED_URI:MS,IS_SCRIPT_OR_DATA:OF,MUSTACHE_EXPR:EF,TMPLIT_EXPR:MF});const Ia={element:1,text:3,progressingInstruction:7,comment:8,document:9},IF=function(){return typeof window>"u"?null:window},DF=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},Dx=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function NS(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:IF();const e=ve=>NS(ve);if(e.version="3.3.0",e.removed=[],!t||!t.document||t.document.nodeType!==Ia.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:h,trustedTypes:f}=t,p=l.prototype,g=Ra(p,"cloneNode"),m=Ra(p,"remove"),y=Ra(p,"nextSibling"),b=Ra(p,"childNodes"),C=Ra(p,"parentNode");if(typeof o=="function"){const ve=n.createElement("template");ve.content&&ve.content.ownerDocument&&(n=ve.content.ownerDocument)}let v,k="";const{implementation:w,createNodeIterator:S,createDocumentFragment:E,getElementsByTagName:I}=n,{importNode:$}=r;let T=Dx();e.isSupported=typeof TS=="function"&&typeof C=="function"&&w&&w.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:P,ERB_EXPR:B,TMPLIT_EXPR:A,DATA_ATTR:M,ARIA_ATTR:O,IS_SCRIPT_OR_DATA:F,ATTR_WHITESPACE:R,CUSTOM_ELEMENT:q}=Ix;let{IS_ALLOWED_URI:Z}=Ix,Q=null;const H=Ue({},[...Nx,...Xf,...Zf,...Jf,...Ox]);let Y=null;const se=Ue({},[...Lx,...Qf,...Rx,...qc]);let K=Object.seal(rg(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ne=null,ue=null;const ke=Object.seal(rg(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Oe=!0,De=!0,Ye=!1,Et=!0,bt=!1,Vt=!0,rn=!1,He=!1,sn=!1,Dt=!1,Fn=!1,Gt=!1,zn=!0,Or=!1;const Jn="user-content-";let Kt=!0,Hn=!1,Ht={},on=null;const Lr=Ue({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let po=null;const go=Ue({},["audio","video","img","source","image","track"]);let gs=null;const mo=Ue({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ti="http://www.w3.org/1998/Math/MathML",W="http://www.w3.org/2000/svg",ae="http://www.w3.org/1999/xhtml";let _e=ae,qe=!1,$e=null;const Tt=Ue({},[Ti,W,ae],Kf);let Mt=Ue({},["mi","mo","mn","ms","mtext"]),Wn=Ue({},["annotation-xml"]);const ms=Ue({},["title","style","font","a","script"]);let At=null;const N=["application/xhtml+xml","text/html"],U="text/html";let X=null,Me=null;const ut=n.createElement("form"),it=function(D){return D instanceof RegExp||D instanceof Function},he=function(){let D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Me&&Me===D)){if((!D||typeof D!="object")&&(D={}),D=ci(D),At=N.indexOf(D.PARSER_MEDIA_TYPE)===-1?U:D.PARSER_MEDIA_TYPE,X=At==="application/xhtml+xml"?Kf:mu,Q=yr(D,"ALLOWED_TAGS")?Ue({},D.ALLOWED_TAGS,X):H,Y=yr(D,"ALLOWED_ATTR")?Ue({},D.ALLOWED_ATTR,X):se,$e=yr(D,"ALLOWED_NAMESPACES")?Ue({},D.ALLOWED_NAMESPACES,Kf):Tt,gs=yr(D,"ADD_URI_SAFE_ATTR")?Ue(ci(mo),D.ADD_URI_SAFE_ATTR,X):mo,po=yr(D,"ADD_DATA_URI_TAGS")?Ue(ci(go),D.ADD_DATA_URI_TAGS,X):go,on=yr(D,"FORBID_CONTENTS")?Ue({},D.FORBID_CONTENTS,X):Lr,ne=yr(D,"FORBID_TAGS")?Ue({},D.FORBID_TAGS,X):ci({}),ue=yr(D,"FORBID_ATTR")?Ue({},D.FORBID_ATTR,X):ci({}),Ht=yr(D,"USE_PROFILES")?D.USE_PROFILES:!1,Oe=D.ALLOW_ARIA_ATTR!==!1,De=D.ALLOW_DATA_ATTR!==!1,Ye=D.ALLOW_UNKNOWN_PROTOCOLS||!1,Et=D.ALLOW_SELF_CLOSE_IN_ATTR!==!1,bt=D.SAFE_FOR_TEMPLATES||!1,Vt=D.SAFE_FOR_XML!==!1,rn=D.WHOLE_DOCUMENT||!1,Dt=D.RETURN_DOM||!1,Fn=D.RETURN_DOM_FRAGMENT||!1,Gt=D.RETURN_TRUSTED_TYPE||!1,sn=D.FORCE_BODY||!1,zn=D.SANITIZE_DOM!==!1,Or=D.SANITIZE_NAMED_PROPS||!1,Kt=D.KEEP_CONTENT!==!1,Hn=D.IN_PLACE||!1,Z=D.ALLOWED_URI_REGEXP||MS,_e=D.NAMESPACE||ae,Mt=D.MATHML_TEXT_INTEGRATION_POINTS||Mt,Wn=D.HTML_INTEGRATION_POINTS||Wn,K=D.CUSTOM_ELEMENT_HANDLING||{},D.CUSTOM_ELEMENT_HANDLING&&it(D.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(K.tagNameCheck=D.CUSTOM_ELEMENT_HANDLING.tagNameCheck),D.CUSTOM_ELEMENT_HANDLING&&it(D.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(K.attributeNameCheck=D.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),D.CUSTOM_ELEMENT_HANDLING&&typeof D.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(K.allowCustomizedBuiltInElements=D.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),bt&&(De=!1),Fn&&(Dt=!0),Ht&&(Q=Ue({},Ox),Y=[],Ht.html===!0&&(Ue(Q,Nx),Ue(Y,Lx)),Ht.svg===!0&&(Ue(Q,Xf),Ue(Y,Qf),Ue(Y,qc)),Ht.svgFilters===!0&&(Ue(Q,Zf),Ue(Y,Qf),Ue(Y,qc)),Ht.mathMl===!0&&(Ue(Q,Jf),Ue(Y,Rx),Ue(Y,qc))),D.ADD_TAGS&&(typeof D.ADD_TAGS=="function"?ke.tagCheck=D.ADD_TAGS:(Q===H&&(Q=ci(Q)),Ue(Q,D.ADD_TAGS,X))),D.ADD_ATTR&&(typeof D.ADD_ATTR=="function"?ke.attributeCheck=D.ADD_ATTR:(Y===se&&(Y=ci(Y)),Ue(Y,D.ADD_ATTR,X))),D.ADD_URI_SAFE_ATTR&&Ue(gs,D.ADD_URI_SAFE_ATTR,X),D.FORBID_CONTENTS&&(on===Lr&&(on=ci(on)),Ue(on,D.FORBID_CONTENTS,X)),Kt&&(Q["#text"]=!0),rn&&Ue(Q,["html","head","body"]),Q.table&&(Ue(Q,["tbody"]),delete ne.tbody),D.TRUSTED_TYPES_POLICY){if(typeof D.TRUSTED_TYPES_POLICY.createHTML!="function")throw La('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof D.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw La('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');v=D.TRUSTED_TYPES_POLICY,k=v.createHTML("")}else v===void 0&&(v=DF(f,i)),v!==null&&typeof k=="string"&&(k=v.createHTML(""));Mn&&Mn(D),Me=D}},de=Ue({},[...Xf,...Zf,...SF]),Le=Ue({},[...Jf,..._F]),Nt=function(D){let J=C(D);(!J||!J.tagName)&&(J={namespaceURI:_e,tagName:"template"});const fe=mu(D.tagName),dt=mu(J.tagName);return $e[D.namespaceURI]?D.namespaceURI===W?J.namespaceURI===ae?fe==="svg":J.namespaceURI===Ti?fe==="svg"&&(dt==="annotation-xml"||Mt[dt]):!!de[fe]:D.namespaceURI===Ti?J.namespaceURI===ae?fe==="math":J.namespaceURI===W?fe==="math"&&Wn[dt]:!!Le[fe]:D.namespaceURI===ae?J.namespaceURI===W&&!Wn[dt]||J.namespaceURI===Ti&&!Mt[dt]?!1:!Le[fe]&&(ms[fe]||!de[fe]):!!(At==="application/xhtml+xml"&&$e[D.namespaceURI]):!1},Xe=function(D){Na(e.removed,{element:D});try{C(D).removeChild(D)}catch{m(D)}},Un=function(D,J){try{Na(e.removed,{attribute:J.getAttributeNode(D),from:J})}catch{Na(e.removed,{attribute:null,from:J})}if(J.removeAttribute(D),D==="is")if(Dt||Fn)try{Xe(J)}catch{}else try{J.setAttribute(D,"")}catch{}},yo=function(D){let J=null,fe=null;if(sn)D="<remove></remove>"+D;else{const xt=Yf(D,/^[\r\n\t ]+/);fe=xt&&xt[0]}At==="application/xhtml+xml"&&_e===ae&&(D='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+D+"</body></html>");const dt=v?v.createHTML(D):D;if(_e===ae)try{J=new h().parseFromString(dt,At)}catch{}if(!J||!J.documentElement){J=w.createDocument(_e,"template",null);try{J.documentElement.innerHTML=qe?k:dt}catch{}}const Wt=J.body||J.documentElement;return D&&fe&&Wt.insertBefore(n.createTextNode(fe),Wt.childNodes[0]||null),_e===ae?I.call(J,rn?"html":"body")[0]:rn?J.documentElement:Wt},bo=function(D){return S.call(D.ownerDocument||D,D,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},_a=function(D){return D instanceof d&&(typeof D.nodeName!="string"||typeof D.textContent!="string"||typeof D.removeChild!="function"||!(D.attributes instanceof u)||typeof D.removeAttribute!="function"||typeof D.setAttribute!="function"||typeof D.namespaceURI!="string"||typeof D.insertBefore!="function"||typeof D.hasChildNodes!="function")},xo=function(D){return typeof a=="function"&&D instanceof a};function gr(ve,D,J){jc(ve,fe=>{fe.call(e,D,J,Me)})}const wc=function(D){let J=null;if(gr(T.beforeSanitizeElements,D,null),_a(D))return Xe(D),!0;const fe=X(D.nodeName);if(gr(T.uponSanitizeElement,D,{tagName:fe,allowedTags:Q}),Vt&&D.hasChildNodes()&&!xo(D.firstElementChild)&&vn(/<[/\w!]/g,D.innerHTML)&&vn(/<[/\w!]/g,D.textContent)||D.nodeType===Ia.progressingInstruction||Vt&&D.nodeType===Ia.comment&&vn(/<[/\w]/g,D.data))return Xe(D),!0;if(!(ke.tagCheck instanceof Function&&ke.tagCheck(fe))&&(!Q[fe]||ne[fe])){if(!ne[fe]&&Ea(fe)&&(K.tagNameCheck instanceof RegExp&&vn(K.tagNameCheck,fe)||K.tagNameCheck instanceof Function&&K.tagNameCheck(fe)))return!1;if(Kt&&!on[fe]){const dt=C(D)||D.parentNode,Wt=b(D)||D.childNodes;if(Wt&&dt){const xt=Wt.length;for(let an=xt-1;an>=0;--an){const Nn=g(Wt[an],!0);Nn.__removalCount=(D.__removalCount||0)+1,dt.insertBefore(Nn,y(D))}}}return Xe(D),!0}return D instanceof l&&!Nt(D)||(fe==="noscript"||fe==="noembed"||fe==="noframes")&&vn(/<\/no(script|embed|frames)/i,D.innerHTML)?(Xe(D),!0):(bt&&D.nodeType===Ia.text&&(J=D.textContent,jc([P,B,A],dt=>{J=Oa(J,dt," ")}),D.textContent!==J&&(Na(e.removed,{element:D.cloneNode()}),D.textContent=J)),gr(T.afterSanitizeElements,D,null),!1)},Cc=function(D,J,fe){if(zn&&(J==="id"||J==="name")&&(fe in n||fe in ut))return!1;if(!(De&&!ue[J]&&vn(M,J))){if(!(Oe&&vn(O,J))){if(!(ke.attributeCheck instanceof Function&&ke.attributeCheck(J,D))){if(!Y[J]||ue[J]){if(!(Ea(D)&&(K.tagNameCheck instanceof RegExp&&vn(K.tagNameCheck,D)||K.tagNameCheck instanceof Function&&K.tagNameCheck(D))&&(K.attributeNameCheck instanceof RegExp&&vn(K.attributeNameCheck,J)||K.attributeNameCheck instanceof Function&&K.attributeNameCheck(J,D))||J==="is"&&K.allowCustomizedBuiltInElements&&(K.tagNameCheck instanceof RegExp&&vn(K.tagNameCheck,fe)||K.tagNameCheck instanceof Function&&K.tagNameCheck(fe))))return!1}else if(!gs[J]){if(!vn(Z,Oa(fe,R,""))){if(!((J==="src"||J==="xlink:href"||J==="href")&&D!=="script"&&vF(fe,"data:")===0&&po[D])){if(!(Ye&&!vn(F,Oa(fe,R,"")))){if(fe)return!1}}}}}}}return!0},Ea=function(D){return D!=="annotation-xml"&&Yf(D,q)},ys=function(D){gr(T.beforeSanitizeAttributes,D,null);const{attributes:J}=D;if(!J||_a(D))return;const fe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Y,forceKeepAttr:void 0};let dt=J.length;for(;dt--;){const Wt=J[dt],{name:xt,namespaceURI:an,value:Nn}=Wt,Mi=X(xt),te=Nn;let le=xt==="value"?te:wF(te);if(fe.attrName=Mi,fe.attrValue=le,fe.keepAttr=!0,fe.forceKeepAttr=void 0,gr(T.uponSanitizeAttribute,D,fe),le=fe.attrValue,Or&&(Mi==="id"||Mi==="name")&&(Un(xt,D),le=Jn+le),Vt&&vn(/((--!?|])>)|<\/(style|title|textarea)/i,le)){Un(xt,D);continue}if(Mi==="attributename"&&Yf(le,"href")){Un(xt,D);continue}if(fe.forceKeepAttr)continue;if(!fe.keepAttr){Un(xt,D);continue}if(!Et&&vn(/\/>/i,le)){Un(xt,D);continue}bt&&jc([P,B,A],st=>{le=Oa(le,st," ")});const We=X(D.nodeName);if(!Cc(We,Mi,le)){Un(xt,D);continue}if(v&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!an)switch(f.getAttributeType(We,Mi)){case"TrustedHTML":{le=v.createHTML(le);break}case"TrustedScriptURL":{le=v.createScriptURL(le);break}}if(le!==te)try{an?D.setAttributeNS(an,xt,le):D.setAttribute(xt,le),_a(D)?Xe(D):Ax(e.removed)}catch{Un(xt,D)}}gr(T.afterSanitizeAttributes,D,null)},af=function ve(D){let J=null;const fe=bo(D);for(gr(T.beforeSanitizeShadowDOM,D,null);J=fe.nextNode();)gr(T.uponSanitizeShadowNode,J,null),wc(J),ys(J),J.content instanceof s&&ve(J.content);gr(T.afterSanitizeShadowDOM,D,null)};return e.sanitize=function(ve){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},J=null,fe=null,dt=null,Wt=null;if(qe=!ve,qe&&(ve="<!-->"),typeof ve!="string"&&!xo(ve))if(typeof ve.toString=="function"){if(ve=ve.toString(),typeof ve!="string")throw La("dirty is not a string, aborting")}else throw La("toString is not a function");if(!e.isSupported)return ve;if(He||he(D),e.removed=[],typeof ve=="string"&&(Hn=!1),Hn){if(ve.nodeName){const Nn=X(ve.nodeName);if(!Q[Nn]||ne[Nn])throw La("root node is forbidden and cannot be sanitized in-place")}}else if(ve instanceof a)J=yo("<!---->"),fe=J.ownerDocument.importNode(ve,!0),fe.nodeType===Ia.element&&fe.nodeName==="BODY"||fe.nodeName==="HTML"?J=fe:J.appendChild(fe);else{if(!Dt&&!bt&&!rn&&ve.indexOf("<")===-1)return v&&Gt?v.createHTML(ve):ve;if(J=yo(ve),!J)return Dt?null:Gt?k:""}J&&sn&&Xe(J.firstChild);const xt=bo(Hn?ve:J);for(;dt=xt.nextNode();)wc(dt),ys(dt),dt.content instanceof s&&af(dt.content);if(Hn)return ve;if(Dt){if(Fn)for(Wt=E.call(J.ownerDocument);J.firstChild;)Wt.appendChild(J.firstChild);else Wt=J;return(Y.shadowroot||Y.shadowrootmode)&&(Wt=$.call(r,Wt,!0)),Wt}let an=rn?J.outerHTML:J.innerHTML;return rn&&Q["!doctype"]&&J.ownerDocument&&J.ownerDocument.doctype&&J.ownerDocument.doctype.name&&vn(AS,J.ownerDocument.doctype.name)&&(an="<!DOCTYPE "+J.ownerDocument.doctype.name+`>
`+an),bt&&jc([P,B,A],Nn=>{an=Oa(an,Nn," ")}),v&&Gt?v.createHTML(an):an},e.setConfig=function(){let ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};he(ve),He=!0},e.clearConfig=function(){Me=null,He=!1},e.isValidAttribute=function(ve,D,J){Me||he({});const fe=X(ve),dt=X(D);return Cc(fe,dt,J)},e.addHook=function(ve,D){typeof D=="function"&&Na(T[ve],D)},e.removeHook=function(ve,D){if(D!==void 0){const J=bF(T[ve],D);return J===-1?void 0:xF(T[ve],J,1)[0]}return Ax(T[ve])},e.removeHooks=function(ve){T[ve]=[]},e.removeAllHooks=function(){T=Dx()},e}var ra=NS(),OS=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,gl=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,BF=/\s*%%.*\n/gm,jo,LS=(jo=class extends Error{constructor(e){super(e),this.name="UnknownDiagramError"}},x(jo,"UnknownDiagramError"),jo),Ys={},f0=x(function(t,e){t=t.replace(OS,"").replace(gl,"").replace(BF,`
`);for(const[n,{detector:r}]of Object.entries(Ys))if(r(t,e))return n;throw new LS(`No diagram type detected matching given configuration for text: ${t}`)},"detectType"),og=x((...t)=>{for(const{id:e,detector:n,loader:r}of t)RS(e,n,r)},"registerLazyLoadedDiagrams"),RS=x((t,e,n)=>{Ys[t]&&G.warn(`Detector with key ${t} already exists. Overwriting.`),Ys[t]={detector:e,loader:n},G.debug(`Detector with key ${t} added${n?" with loader":""}`)},"addDetector"),PF=x(t=>Ys[t].loader,"getDiagramLoader"),ag=x((t,e,{depth:n=2,clobber:r=!1}={})=>{const i={depth:n,clobber:r};return Array.isArray(e)&&!Array.isArray(t)?(e.forEach(s=>ag(t,s,i)),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach(s=>{t.includes(s)||t.push(s)}),t):t===void 0||n<=0?t!=null&&typeof t=="object"&&typeof e=="object"?Object.assign(t,e):e:(e!==void 0&&typeof t=="object"&&typeof e=="object"&&Object.keys(e).forEach(s=>{typeof e[s]=="object"&&(t[s]===void 0||typeof t[s]=="object")?(t[s]===void 0&&(t[s]=Array.isArray(e[s])?[]:{}),t[s]=ag(t[s],e[s],{depth:n-1,clobber:r})):(r||typeof t[s]!="object"&&typeof e[s]!="object")&&(t[s]=e[s])}),t)},"assignWithDepth"),$t=ag,Mh="#ffffff",Ah="#f2f2f2",Cn=x((t,e)=>e?z(t,{s:-40,l:10}):z(t,{s:-40,l:-10}),"mkBorder"),qo,$F=(qo=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var n,r,i,s,o,a,l,c,u,d,h,f,p,g,m,y,b,C,v,k,w;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||z(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||z(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Cn(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Cn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Cn(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Cn(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||ie(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||ie(this.tertiaryColor),this.lineColor=this.lineColor||ie(this.background),this.arrowheadColor=this.arrowheadColor||ie(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?Ee(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||Ee(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||ie(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||pe(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||Ee(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Ee(this.mainBkg,10)):(this.rowOdd=this.rowOdd||pe(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||pe(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||z(this.primaryColor,{h:30}),this.cScale4=this.cScale4||z(this.primaryColor,{h:60}),this.cScale5=this.cScale5||z(this.primaryColor,{h:90}),this.cScale6=this.cScale6||z(this.primaryColor,{h:120}),this.cScale7=this.cScale7||z(this.primaryColor,{h:150}),this.cScale8=this.cScale8||z(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||z(this.primaryColor,{h:270}),this.cScale10=this.cScale10||z(this.primaryColor,{h:300}),this.cScale11=this.cScale11||z(this.primaryColor,{h:330}),this.darkMode)for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScale"+S]=Ee(this["cScale"+S],75);else for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScale"+S]=Ee(this["cScale"+S],25);for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScaleInv"+S]=this["cScaleInv"+S]||ie(this["cScale"+S]);for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this.darkMode?this["cScalePeer"+S]=this["cScalePeer"+S]||pe(this["cScale"+S],10):this["cScalePeer"+S]=this["cScalePeer"+S]||Ee(this["cScale"+S],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScaleLabel"+S]=this["cScaleLabel"+S]||this.scaleLabelColor;const e=this.darkMode?-4:-1;for(let S=0;S<5;S++)this["surface"+S]=this["surface"+S]||z(this.mainBkg,{h:180,s:-15,l:e*(5+S*3)}),this["surfacePeer"+S]=this["surfacePeer"+S]||z(this.mainBkg,{h:180,s:-15,l:e*(8+S*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||z(this.primaryColor,{h:64}),this.fillType3=this.fillType3||z(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||z(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||z(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||z(this.primaryColor,{h:128}),this.fillType7=this.fillType7||z(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||z(this.primaryColor,{l:-10}),this.pie5=this.pie5||z(this.secondaryColor,{l:-10}),this.pie6=this.pie6||z(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||z(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||z(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||z(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||z(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||z(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||z(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:((n=this.radar)==null?void 0:n.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((i=this.radar)==null?void 0:i.axisLabelFontSize)||12,curveOpacity:((s=this.radar)==null?void 0:s.curveOpacity)||.5,curveStrokeWidth:((o=this.radar)==null?void 0:o.curveStrokeWidth)||2,graticuleColor:((a=this.radar)==null?void 0:a.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((l=this.radar)==null?void 0:l.graticuleStrokeWidth)||1,graticuleOpacity:((c=this.radar)==null?void 0:c.graticuleOpacity)||.3,legendBoxSize:((u=this.radar)==null?void 0:u.legendBoxSize)||12,legendFontSize:((d=this.radar)==null?void 0:d.legendFontSize)||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||sc(this.quadrant1Fill)?pe(this.quadrant1Fill):Ee(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((h=this.xyChart)==null?void 0:h.backgroundColor)||this.background,titleColor:((f=this.xyChart)==null?void 0:f.titleColor)||this.primaryTextColor,xAxisTitleColor:((p=this.xyChart)==null?void 0:p.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((g=this.xyChart)==null?void 0:g.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((m=this.xyChart)==null?void 0:m.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((y=this.xyChart)==null?void 0:y.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((b=this.xyChart)==null?void 0:b.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((C=this.xyChart)==null?void 0:C.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((v=this.xyChart)==null?void 0:v.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((k=this.xyChart)==null?void 0:k.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((w=this.xyChart)==null?void 0:w.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Ee(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||z(this.primaryColor,{h:-30}),this.git4=this.git4||z(this.primaryColor,{h:-60}),this.git5=this.git5||z(this.primaryColor,{h:-90}),this.git6=this.git6||z(this.primaryColor,{h:60}),this.git7=this.git7||z(this.primaryColor,{h:120}),this.darkMode?(this.git0=pe(this.git0,25),this.git1=pe(this.git1,25),this.git2=pe(this.git2,25),this.git3=pe(this.git3,25),this.git4=pe(this.git4,25),this.git5=pe(this.git5,25),this.git6=pe(this.git6,25),this.git7=pe(this.git7,25)):(this.git0=Ee(this.git0,25),this.git1=Ee(this.git1,25),this.git2=Ee(this.git2,25),this.git3=Ee(this.git3,25),this.git4=Ee(this.git4,25),this.git5=Ee(this.git5,25),this.git6=Ee(this.git6,25),this.git7=Ee(this.git7,25)),this.gitInv0=this.gitInv0||ie(this.git0),this.gitInv1=this.gitInv1||ie(this.git1),this.gitInv2=this.gitInv2||ie(this.git2),this.gitInv3=this.gitInv3||ie(this.git3),this.gitInv4=this.gitInv4||ie(this.git4),this.gitInv5=this.gitInv5||ie(this.git5),this.gitInv6=this.gitInv6||ie(this.git6),this.gitInv7=this.gitInv7||ie(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Mh,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Ah}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}},x(qo,"Theme"),qo),FF=x(t=>{const e=new $F;return e.calculate(t),e},"getThemeVariables"),Vo,zF=(Vo=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=pe(this.primaryColor,16),this.tertiaryColor=z(this.primaryColor,{h:-160}),this.primaryBorderColor=ie(this.background),this.secondaryBorderColor=Cn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Cn(this.tertiaryColor,this.darkMode),this.primaryTextColor=ie(this.primaryColor),this.secondaryTextColor=ie(this.secondaryColor),this.tertiaryTextColor=ie(this.tertiaryColor),this.lineColor=ie(this.background),this.textColor=ie(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=pe(ie("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=pl(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=Ee("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=Ee(this.sectionBkgColor,10),this.taskBorderColor=pl(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=pl(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||pe(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Ee(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var e,n,r,i,s,o,a,l,c,u,d,h,f,p,g,m,y,b,C,v,k;this.secondBkg=pe(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=pe(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=pe(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=z(this.primaryColor,{h:64}),this.fillType3=z(this.secondaryColor,{h:64}),this.fillType4=z(this.primaryColor,{h:-64}),this.fillType5=z(this.secondaryColor,{h:-64}),this.fillType6=z(this.primaryColor,{h:128}),this.fillType7=z(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||z(this.primaryColor,{h:30}),this.cScale4=this.cScale4||z(this.primaryColor,{h:60}),this.cScale5=this.cScale5||z(this.primaryColor,{h:90}),this.cScale6=this.cScale6||z(this.primaryColor,{h:120}),this.cScale7=this.cScale7||z(this.primaryColor,{h:150}),this.cScale8=this.cScale8||z(this.primaryColor,{h:210}),this.cScale9=this.cScale9||z(this.primaryColor,{h:270}),this.cScale10=this.cScale10||z(this.primaryColor,{h:300}),this.cScale11=this.cScale11||z(this.primaryColor,{h:330});for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleInv"+w]=this["cScaleInv"+w]||ie(this["cScale"+w]);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScalePeer"+w]=this["cScalePeer"+w]||pe(this["cScale"+w],10);for(let w=0;w<5;w++)this["surface"+w]=this["surface"+w]||z(this.mainBkg,{h:30,s:-30,l:-(-10+w*4)}),this["surfacePeer"+w]=this["surfacePeer"+w]||z(this.mainBkg,{h:30,s:-30,l:-(-7+w*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleLabel"+w]=this["cScaleLabel"+w]||this.scaleLabelColor;for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["pie"+w]=this["cScale"+w];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||sc(this.quadrant1Fill)?pe(this.quadrant1Fill):Ee(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((n=this.xyChart)==null?void 0:n.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((a=this.xyChart)==null?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((d=this.xyChart)==null?void 0:d.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:((h=this.radar)==null?void 0:h.axisColor)||this.lineColor,axisStrokeWidth:((f=this.radar)==null?void 0:f.axisStrokeWidth)||2,axisLabelFontSize:((p=this.radar)==null?void 0:p.axisLabelFontSize)||12,curveOpacity:((g=this.radar)==null?void 0:g.curveOpacity)||.5,curveStrokeWidth:((m=this.radar)==null?void 0:m.curveStrokeWidth)||2,graticuleColor:((y=this.radar)==null?void 0:y.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((b=this.radar)==null?void 0:b.graticuleStrokeWidth)||1,graticuleOpacity:((C=this.radar)==null?void 0:C.graticuleOpacity)||.3,legendBoxSize:((v=this.radar)==null?void 0:v.legendBoxSize)||12,legendFontSize:((k=this.radar)==null?void 0:k.legendFontSize)||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Ee(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=pe(this.secondaryColor,20),this.git1=pe(this.pie2||this.secondaryColor,20),this.git2=pe(this.pie3||this.tertiaryColor,20),this.git3=pe(this.pie4||z(this.primaryColor,{h:-30}),20),this.git4=pe(this.pie5||z(this.primaryColor,{h:-60}),20),this.git5=pe(this.pie6||z(this.primaryColor,{h:-90}),10),this.git6=pe(this.pie7||z(this.primaryColor,{h:60}),10),this.git7=pe(this.pie8||z(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||ie(this.git0),this.gitInv1=this.gitInv1||ie(this.git1),this.gitInv2=this.gitInv2||ie(this.git2),this.gitInv3=this.gitInv3||ie(this.git3),this.gitInv4=this.gitInv4||ie(this.git4),this.gitInv5=this.gitInv5||ie(this.git5),this.gitInv6=this.gitInv6||ie(this.git6),this.gitInv7=this.gitInv7||ie(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ie(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ie(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||pe(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||pe(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}},x(Vo,"Theme"),Vo),HF=x(t=>{const e=new zF;return e.calculate(t),e},"getThemeVariables"),Go,WF=(Go=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=z(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=z(this.primaryColor,{h:-160}),this.primaryBorderColor=Cn(this.primaryColor,this.darkMode),this.secondaryBorderColor=Cn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Cn(this.tertiaryColor,this.darkMode),this.primaryTextColor=ie(this.primaryColor),this.secondaryTextColor=ie(this.secondaryColor),this.tertiaryTextColor=ie(this.tertiaryColor),this.lineColor=ie(this.background),this.textColor=ie(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=pl(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var e,n,r,i,s,o,a,l,c,u,d,h,f,p,g,m,y,b,C,v,k;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||z(this.primaryColor,{h:30}),this.cScale4=this.cScale4||z(this.primaryColor,{h:60}),this.cScale5=this.cScale5||z(this.primaryColor,{h:90}),this.cScale6=this.cScale6||z(this.primaryColor,{h:120}),this.cScale7=this.cScale7||z(this.primaryColor,{h:150}),this.cScale8=this.cScale8||z(this.primaryColor,{h:210}),this.cScale9=this.cScale9||z(this.primaryColor,{h:270}),this.cScale10=this.cScale10||z(this.primaryColor,{h:300}),this.cScale11=this.cScale11||z(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Ee(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Ee(this.tertiaryColor,40);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScale"+w]=Ee(this["cScale"+w],10),this["cScalePeer"+w]=this["cScalePeer"+w]||Ee(this["cScale"+w],25);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleInv"+w]=this["cScaleInv"+w]||z(this["cScale"+w],{h:180});for(let w=0;w<5;w++)this["surface"+w]=this["surface"+w]||z(this.mainBkg,{h:30,l:-(5+w*5)}),this["surfacePeer"+w]=this["surfacePeer"+w]||z(this.mainBkg,{h:30,l:-(7+w*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||ie(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||ie(this.labelTextColor);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleLabel"+w]=this["cScaleLabel"+w]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=pe(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||pe(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||pe(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=z(this.primaryColor,{h:64}),this.fillType3=z(this.secondaryColor,{h:64}),this.fillType4=z(this.primaryColor,{h:-64}),this.fillType5=z(this.secondaryColor,{h:-64}),this.fillType6=z(this.primaryColor,{h:128}),this.fillType7=z(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||z(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||z(this.primaryColor,{l:-10}),this.pie5=this.pie5||z(this.secondaryColor,{l:-30}),this.pie6=this.pie6||z(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||z(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||z(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||z(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||z(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||z(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||z(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||sc(this.quadrant1Fill)?pe(this.quadrant1Fill):Ee(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:((e=this.radar)==null?void 0:e.axisColor)||this.lineColor,axisStrokeWidth:((n=this.radar)==null?void 0:n.axisStrokeWidth)||2,axisLabelFontSize:((r=this.radar)==null?void 0:r.axisLabelFontSize)||12,curveOpacity:((i=this.radar)==null?void 0:i.curveOpacity)||.5,curveStrokeWidth:((s=this.radar)==null?void 0:s.curveStrokeWidth)||2,graticuleColor:((o=this.radar)==null?void 0:o.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((a=this.radar)==null?void 0:a.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((c=this.radar)==null?void 0:c.legendBoxSize)||12,legendFontSize:((u=this.radar)==null?void 0:u.legendFontSize)||12},this.xyChart={backgroundColor:((d=this.xyChart)==null?void 0:d.backgroundColor)||this.background,titleColor:((h=this.xyChart)==null?void 0:h.titleColor)||this.primaryTextColor,xAxisTitleColor:((f=this.xyChart)==null?void 0:f.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((p=this.xyChart)==null?void 0:p.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((g=this.xyChart)==null?void 0:g.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((m=this.xyChart)==null?void 0:m.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((y=this.xyChart)==null?void 0:y.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((b=this.xyChart)==null?void 0:b.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((C=this.xyChart)==null?void 0:C.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((v=this.xyChart)==null?void 0:v.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((k=this.xyChart)==null?void 0:k.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||z(this.primaryColor,{h:-30}),this.git4=this.git4||z(this.primaryColor,{h:-60}),this.git5=this.git5||z(this.primaryColor,{h:-90}),this.git6=this.git6||z(this.primaryColor,{h:60}),this.git7=this.git7||z(this.primaryColor,{h:120}),this.darkMode?(this.git0=pe(this.git0,25),this.git1=pe(this.git1,25),this.git2=pe(this.git2,25),this.git3=pe(this.git3,25),this.git4=pe(this.git4,25),this.git5=pe(this.git5,25),this.git6=pe(this.git6,25),this.git7=pe(this.git7,25)):(this.git0=Ee(this.git0,25),this.git1=Ee(this.git1,25),this.git2=Ee(this.git2,25),this.git3=Ee(this.git3,25),this.git4=Ee(this.git4,25),this.git5=Ee(this.git5,25),this.git6=Ee(this.git6,25),this.git7=Ee(this.git7,25)),this.gitInv0=this.gitInv0||Ee(ie(this.git0),25),this.gitInv1=this.gitInv1||ie(this.git1),this.gitInv2=this.gitInv2||ie(this.git2),this.gitInv3=this.gitInv3||ie(this.git3),this.gitInv4=this.gitInv4||ie(this.git4),this.gitInv5=this.gitInv5||ie(this.git5),this.gitInv6=this.gitInv6||ie(this.git6),this.gitInv7=this.gitInv7||ie(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ie(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ie(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Mh,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Ah}calculate(e){if(Object.keys(this).forEach(r=>{this[r]==="calculated"&&(this[r]=void 0)}),typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}},x(Go,"Theme"),Go),UF=x(t=>{const e=new WF;return e.calculate(t),e},"getThemeVariables"),Ko,jF=(Ko=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=pe("#cde498",10),this.primaryBorderColor=Cn(this.primaryColor,this.darkMode),this.secondaryBorderColor=Cn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Cn(this.tertiaryColor,this.darkMode),this.primaryTextColor=ie(this.primaryColor),this.secondaryTextColor=ie(this.secondaryColor),this.tertiaryTextColor=ie(this.primaryColor),this.lineColor=ie(this.background),this.textColor=ie(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,n,r,i,s,o,a,l,c,u,d,h,f,p,g,m,y,b,C,v,k;this.actorBorder=Ee(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||z(this.primaryColor,{h:30}),this.cScale4=this.cScale4||z(this.primaryColor,{h:60}),this.cScale5=this.cScale5||z(this.primaryColor,{h:90}),this.cScale6=this.cScale6||z(this.primaryColor,{h:120}),this.cScale7=this.cScale7||z(this.primaryColor,{h:150}),this.cScale8=this.cScale8||z(this.primaryColor,{h:210}),this.cScale9=this.cScale9||z(this.primaryColor,{h:270}),this.cScale10=this.cScale10||z(this.primaryColor,{h:300}),this.cScale11=this.cScale11||z(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Ee(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Ee(this.tertiaryColor,40);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScale"+w]=Ee(this["cScale"+w],10),this["cScalePeer"+w]=this["cScalePeer"+w]||Ee(this["cScale"+w],25);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleInv"+w]=this["cScaleInv"+w]||z(this["cScale"+w],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleLabel"+w]=this["cScaleLabel"+w]||this.scaleLabelColor;for(let w=0;w<5;w++)this["surface"+w]=this["surface"+w]||z(this.mainBkg,{h:30,s:-30,l:-(5+w*5)}),this["surfacePeer"+w]=this["surfacePeer"+w]||z(this.mainBkg,{h:30,s:-30,l:-(8+w*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||pe(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||pe(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=z(this.primaryColor,{h:64}),this.fillType3=z(this.secondaryColor,{h:64}),this.fillType4=z(this.primaryColor,{h:-64}),this.fillType5=z(this.secondaryColor,{h:-64}),this.fillType6=z(this.primaryColor,{h:128}),this.fillType7=z(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||z(this.primaryColor,{l:-30}),this.pie5=this.pie5||z(this.secondaryColor,{l:-30}),this.pie6=this.pie6||z(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||z(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||z(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||z(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||z(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||z(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||z(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||sc(this.quadrant1Fill)?pe(this.quadrant1Fill):Ee(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:((e=this.radar)==null?void 0:e.axisColor)||this.lineColor,axisStrokeWidth:((n=this.radar)==null?void 0:n.axisStrokeWidth)||2,axisLabelFontSize:((r=this.radar)==null?void 0:r.axisLabelFontSize)||12,curveOpacity:((i=this.radar)==null?void 0:i.curveOpacity)||.5,curveStrokeWidth:((s=this.radar)==null?void 0:s.curveStrokeWidth)||2,graticuleColor:((o=this.radar)==null?void 0:o.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((a=this.radar)==null?void 0:a.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((c=this.radar)==null?void 0:c.legendBoxSize)||12,legendFontSize:((u=this.radar)==null?void 0:u.legendFontSize)||12},this.xyChart={backgroundColor:((d=this.xyChart)==null?void 0:d.backgroundColor)||this.background,titleColor:((h=this.xyChart)==null?void 0:h.titleColor)||this.primaryTextColor,xAxisTitleColor:((f=this.xyChart)==null?void 0:f.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((p=this.xyChart)==null?void 0:p.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((g=this.xyChart)==null?void 0:g.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((m=this.xyChart)==null?void 0:m.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((y=this.xyChart)==null?void 0:y.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((b=this.xyChart)==null?void 0:b.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((C=this.xyChart)==null?void 0:C.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((v=this.xyChart)==null?void 0:v.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((k=this.xyChart)==null?void 0:k.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||z(this.primaryColor,{h:-30}),this.git4=this.git4||z(this.primaryColor,{h:-60}),this.git5=this.git5||z(this.primaryColor,{h:-90}),this.git6=this.git6||z(this.primaryColor,{h:60}),this.git7=this.git7||z(this.primaryColor,{h:120}),this.darkMode?(this.git0=pe(this.git0,25),this.git1=pe(this.git1,25),this.git2=pe(this.git2,25),this.git3=pe(this.git3,25),this.git4=pe(this.git4,25),this.git5=pe(this.git5,25),this.git6=pe(this.git6,25),this.git7=pe(this.git7,25)):(this.git0=Ee(this.git0,25),this.git1=Ee(this.git1,25),this.git2=Ee(this.git2,25),this.git3=Ee(this.git3,25),this.git4=Ee(this.git4,25),this.git5=Ee(this.git5,25),this.git6=Ee(this.git6,25),this.git7=Ee(this.git7,25)),this.gitInv0=this.gitInv0||ie(this.git0),this.gitInv1=this.gitInv1||ie(this.git1),this.gitInv2=this.gitInv2||ie(this.git2),this.gitInv3=this.gitInv3||ie(this.git3),this.gitInv4=this.gitInv4||ie(this.git4),this.gitInv5=this.gitInv5||ie(this.git5),this.gitInv6=this.gitInv6||ie(this.git6),this.gitInv7=this.gitInv7||ie(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ie(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ie(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Mh,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Ah}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}},x(Ko,"Theme"),Ko),qF=x(t=>{const e=new jF;return e.calculate(t),e},"getThemeVariables"),Yo,VF=(Yo=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=pe(this.contrast,55),this.background="#ffffff",this.tertiaryColor=z(this.primaryColor,{h:-160}),this.primaryBorderColor=Cn(this.primaryColor,this.darkMode),this.secondaryBorderColor=Cn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Cn(this.tertiaryColor,this.darkMode),this.primaryTextColor=ie(this.primaryColor),this.secondaryTextColor=ie(this.secondaryColor),this.tertiaryTextColor=ie(this.tertiaryColor),this.lineColor=ie(this.background),this.textColor=ie(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||pe(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,n,r,i,s,o,a,l,c,u,d,h,f,p,g,m,y,b,C,v,k;this.secondBkg=pe(this.contrast,55),this.border2=this.contrast,this.actorBorder=pe(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleInv"+w]=this["cScaleInv"+w]||ie(this["cScale"+w]);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this.darkMode?this["cScalePeer"+w]=this["cScalePeer"+w]||pe(this["cScale"+w],10):this["cScalePeer"+w]=this["cScalePeer"+w]||Ee(this["cScale"+w],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleLabel"+w]=this["cScaleLabel"+w]||this.scaleLabelColor;for(let w=0;w<5;w++)this["surface"+w]=this["surface"+w]||z(this.mainBkg,{l:-(5+w*5)}),this["surfacePeer"+w]=this["surfacePeer"+w]||z(this.mainBkg,{l:-(8+w*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=pe(this.contrast,30),this.sectionBkgColor2=pe(this.contrast,30),this.taskBorderColor=Ee(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=pe(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=Ee(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=z(this.primaryColor,{h:64}),this.fillType3=z(this.secondaryColor,{h:64}),this.fillType4=z(this.primaryColor,{h:-64}),this.fillType5=z(this.secondaryColor,{h:-64}),this.fillType6=z(this.primaryColor,{h:128}),this.fillType7=z(this.secondaryColor,{h:128});for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["pie"+w]=this["cScale"+w];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||sc(this.quadrant1Fill)?pe(this.quadrant1Fill):Ee(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((n=this.xyChart)==null?void 0:n.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((a=this.xyChart)==null?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((d=this.xyChart)==null?void 0:d.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:((h=this.radar)==null?void 0:h.axisColor)||this.lineColor,axisStrokeWidth:((f=this.radar)==null?void 0:f.axisStrokeWidth)||2,axisLabelFontSize:((p=this.radar)==null?void 0:p.axisLabelFontSize)||12,curveOpacity:((g=this.radar)==null?void 0:g.curveOpacity)||.5,curveStrokeWidth:((m=this.radar)==null?void 0:m.curveStrokeWidth)||2,graticuleColor:((y=this.radar)==null?void 0:y.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((b=this.radar)==null?void 0:b.graticuleStrokeWidth)||1,graticuleOpacity:((C=this.radar)==null?void 0:C.graticuleOpacity)||.3,legendBoxSize:((v=this.radar)==null?void 0:v.legendBoxSize)||12,legendFontSize:((k=this.radar)==null?void 0:k.legendFontSize)||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Ee(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||z(this.primaryColor,{h:-30}),this.git4=this.pie5||z(this.primaryColor,{h:-60}),this.git5=this.pie6||z(this.primaryColor,{h:-90}),this.git6=this.pie7||z(this.primaryColor,{h:60}),this.git7=this.pie8||z(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||ie(this.git0),this.gitInv1=this.gitInv1||ie(this.git1),this.gitInv2=this.gitInv2||ie(this.git2),this.gitInv3=this.gitInv3||ie(this.git3),this.gitInv4=this.gitInv4||ie(this.git4),this.gitInv5=this.gitInv5||ie(this.git5),this.gitInv6=this.gitInv6||ie(this.git6),this.gitInv7=this.gitInv7||ie(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Mh,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Ah}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}},x(Yo,"Theme"),Yo),GF=x(t=>{const e=new VF;return e.calculate(t),e},"getThemeVariables"),yi={base:{getThemeVariables:FF},dark:{getThemeVariables:HF},default:{getThemeVariables:UF},forest:{getThemeVariables:qF},neutral:{getThemeVariables:GF}},Dr={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},IS={...Dr,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:yi.default.getThemeVariables(),sequence:{...Dr.sequence,messageFont:x(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:x(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:x(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...Dr.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Dr.c4,useWidth:void 0,personFont:x(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...Dr.flowchart,inheritDir:!1},external_personFont:x(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:x(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:x(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:x(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:x(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:x(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:x(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:x(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:x(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:x(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:x(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:x(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:x(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:x(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:x(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:x(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:x(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:x(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:x(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:x(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:x(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...Dr.pie,useWidth:984},xyChart:{...Dr.xyChart,useWidth:void 0},requirement:{...Dr.requirement,useWidth:void 0},packet:{...Dr.packet},radar:{...Dr.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},DS=x((t,e="")=>Object.keys(t).reduce((n,r)=>Array.isArray(t[r])?n:typeof t[r]=="object"&&t[r]!==null?[...n,e+r,...DS(t[r],"")]:[...n,e+r],[]),"keyify"),KF=new Set(DS(IS,"")),BS=IS,kd=x(t=>{if(G.debug("sanitizeDirective called with",t),!(typeof t!="object"||t==null)){if(Array.isArray(t)){t.forEach(e=>kd(e));return}for(const e of Object.keys(t)){if(G.debug("Checking key",e),e.startsWith("__")||e.includes("proto")||e.includes("constr")||!KF.has(e)||t[e]==null){G.debug("sanitize deleting key: ",e),delete t[e];continue}if(typeof t[e]=="object"){G.debug("sanitizing object",e),kd(t[e]);continue}const n=["themeCSS","fontFamily","altFontFamily"];for(const r of n)e.includes(r)&&(G.debug("sanitizing css option",e),t[e]=YF(t[e]))}if(t.themeVariables)for(const e of Object.keys(t.themeVariables)){const n=t.themeVariables[e];n!=null&&n.match&&!n.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[e]="")}G.debug("After sanitization",t)}},"sanitizeDirective"),YF=x(t=>{let e=0,n=0;for(const r of t){if(e<n)return"{ /* ERROR: Unbalanced CSS */ }";r==="{"?e++:r==="}"&&n++}return e!==n?"{ /* ERROR: Unbalanced CSS */ }":t},"sanitizeCss"),ia=Object.freeze(BS),Rn=$t({},ia),Sd,Xs=[],ml=$t({},ia),Nh=x((t,e)=>{let n=$t({},t),r={};for(const i of e)FS(i),r=$t(r,i);if(n=$t(n,r),r.theme&&r.theme in yi){const i=$t({},Sd),s=$t(i.themeVariables||{},r.themeVariables);n.theme&&n.theme in yi&&(n.themeVariables=yi[n.theme].getThemeVariables(s))}return ml=n,zS(ml),ml},"updateCurrentConfig"),XF=x(t=>(Rn=$t({},ia),Rn=$t(Rn,t),t.theme&&yi[t.theme]&&(Rn.themeVariables=yi[t.theme].getThemeVariables(t.themeVariables)),Nh(Rn,Xs),Rn),"setSiteConfig"),ZF=x(t=>{Sd=$t({},t)},"saveConfigFromInitialize"),JF=x(t=>(Rn=$t(Rn,t),Nh(Rn,Xs),Rn),"updateSiteConfig"),PS=x(()=>$t({},Rn),"getSiteConfig"),$S=x(t=>(zS(t),$t(ml,t),pn()),"setConfig"),pn=x(()=>$t({},ml),"getConfig"),FS=x(t=>{t&&(["secure",...Rn.secure??[]].forEach(e=>{Object.hasOwn(t,e)&&(G.debug(`Denied attempt to modify a secure key ${e}`,t[e]),delete t[e])}),Object.keys(t).forEach(e=>{e.startsWith("__")&&delete t[e]}),Object.keys(t).forEach(e=>{typeof t[e]=="string"&&(t[e].includes("<")||t[e].includes(">")||t[e].includes("url(data:"))&&delete t[e],typeof t[e]=="object"&&FS(t[e])}))},"sanitize"),QF=x(t=>{var e;kd(t),t.fontFamily&&!((e=t.themeVariables)!=null&&e.fontFamily)&&(t.themeVariables={...t.themeVariables,fontFamily:t.fontFamily}),Xs.push(t),Nh(Rn,Xs)},"addDirective"),_d=x((t=Rn)=>{Xs=[],Nh(t,Xs)},"reset"),e4={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},Bx={},t4=x(t=>{Bx[t]||(G.warn(e4[t]),Bx[t]=!0)},"issueWarning"),zS=x(t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&t4("LAZY_LOAD_DEPRECATED")},"checkConfig"),Pee=x(()=>{let t={};Sd&&(t=$t(t,Sd));for(const e of Xs)t=$t(t,e);return t},"getUserDefinedConfig"),oc=/<br\s*\/?>/gi,n4=x(t=>t?US(t).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),r4=(()=>{let t=!1;return()=>{t||(HS(),t=!0)}})();function HS(){const t="data-temp-href-target";ra.addHook("beforeSanitizeAttributes",e=>{e.tagName==="A"&&e.hasAttribute("target")&&e.setAttribute(t,e.getAttribute("target")??"")}),ra.addHook("afterSanitizeAttributes",e=>{e.tagName==="A"&&e.hasAttribute(t)&&(e.setAttribute("target",e.getAttribute(t)??""),e.removeAttribute(t),e.getAttribute("target")==="_blank"&&e.setAttribute("rel","noopener"))})}x(HS,"setupDompurifyHooks");var WS=x(t=>(r4(),ra.sanitize(t)),"removeScript"),Px=x((t,e)=>{var n;if(((n=e.flowchart)==null?void 0:n.htmlLabels)!==!1){const r=e.securityLevel;r==="antiscript"||r==="strict"?t=WS(t):r!=="loose"&&(t=US(t),t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/=/g,"&equals;"),t=a4(t))}return t},"sanitizeMore"),dr=x((t,e)=>t&&(e.dompurifyConfig?t=ra.sanitize(Px(t,e),e.dompurifyConfig).toString():t=ra.sanitize(Px(t,e),{FORBID_TAGS:["style"]}).toString(),t),"sanitizeText"),i4=x((t,e)=>typeof t=="string"?dr(t,e):t.flat().map(n=>dr(n,e)),"sanitizeTextOrArray"),s4=x(t=>oc.test(t),"hasBreaks"),o4=x(t=>t.split(oc),"splitBreaks"),a4=x(t=>t.replace(/#br#/g,"<br/>"),"placeholderToBreak"),US=x(t=>t.replace(oc,"#br#"),"breakToPlaceholder"),l4=x(t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=CSS.escape(e)),e},"getUrl"),zt=x(t=>!(t===!1||["false","null","0"].includes(String(t).trim().toLowerCase())),"evaluate"),c4=x(function(...t){const e=t.filter(n=>!isNaN(n));return Math.max(...e)},"getMax"),u4=x(function(...t){const e=t.filter(n=>!isNaN(n));return Math.min(...e)},"getMin"),$x=x(function(t){const e=t.split(/(,)/),n=[];for(let r=0;r<e.length;r++){let i=e[r];if(i===","&&r>0&&r+1<e.length){const s=e[r-1],o=e[r+1];d4(s,o)&&(i=s+","+o,r++,n.pop())}n.push(h4(i))}return n.join("")},"parseGenericTypes"),lg=x((t,e)=>Math.max(0,t.split(e).length-1),"countOccurrence"),d4=x((t,e)=>{const n=lg(t,"~"),r=lg(e,"~");return n===1&&r===1},"shouldCombineSets"),h4=x(t=>{const e=lg(t,"~");let n=!1;if(e<=1)return t;e%2!==0&&t.startsWith("~")&&(t=t.substring(1),n=!0);const r=[...t];let i=r.indexOf("~"),s=r.lastIndexOf("~");for(;i!==-1&&s!==-1&&i!==s;)r[i]="<",r[s]=">",i=r.indexOf("~"),s=r.lastIndexOf("~");return n&&r.unshift("~"),r.join("")},"processSet"),Fx=x(()=>window.MathMLElement!==void 0,"isMathMLSupported"),cg=/\$\$(.*)\$\$/g,sa=x(t=>{var e;return(((e=t.match(cg))==null?void 0:e.length)??0)>0},"hasKatex"),$ee=x(async(t,e)=>{const n=document.createElement("div");n.innerHTML=await p0(t,e),n.id="katex-temp",n.style.visibility="hidden",n.style.position="absolute",n.style.top="0";const r=document.querySelector("body");r==null||r.insertAdjacentElement("beforeend",n);const i={width:n.clientWidth,height:n.clientHeight};return n.remove(),i},"calculateMathMLDimensions"),f4=x(async(t,e)=>{if(!sa(t))return t;if(!(Fx()||e.legacyMathML||e.forceLegacyMathML))return t.replace(cg,"MathML is unsupported in this environment.");{const{default:n}=await nt(async()=>{const{default:i}=await import("./katex-BbEIqZs1.js");return{default:i}},[]),r=e.forceLegacyMathML||!Fx()&&e.legacyMathML?"htmlAndMathml":"mathml";return t.split(oc).map(i=>sa(i)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${i}</div>`:`<div>${i}</div>`).join("").replace(cg,(i,s)=>n.renderToString(s,{throwOnError:!0,displayMode:!0,output:r}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatexUnsanitized"),p0=x(async(t,e)=>dr(await f4(t,e),e),"renderKatexSanitized"),ba={getRows:n4,sanitizeText:dr,sanitizeTextOrArray:i4,hasBreaks:s4,splitBreaks:o4,lineBreakRegex:oc,removeScript:WS,getUrl:l4,evaluate:zt,getMax:c4,getMin:u4},p4=x(function(t,e){for(let n of e)t.attr(n[0],n[1])},"d3Attrs"),g4=x(function(t,e,n){let r=new Map;return n?(r.set("width","100%"),r.set("style",`max-width: ${e}px;`)):(r.set("height",t),r.set("width",e)),r},"calculateSvgSizeAttrs"),jS=x(function(t,e,n,r){const i=g4(e,n,r);p4(t,i)},"configureSvgSize"),m4=x(function(t,e,n,r){const i=e.node().getBBox(),s=i.width,o=i.height;G.info(`SVG bounds: ${s}x${o}`,i);let a=0,l=0;G.info(`Graph bounds: ${a}x${l}`,t),a=s+n*2,l=o+n*2,G.info(`Calculated bounds: ${a}x${l}`),jS(e,l,a,r);const c=`${i.x-n} ${i.y-n} ${i.width+2*n} ${i.height+2*n}`;e.attr("viewBox",c)},"setupGraphViewbox"),yu={},y4=x((t,e,n)=>{let r="";return t in yu&&yu[t]?r=yu[t](n):G.warn(`No theme found for ${t}`),` & {
    font-family: ${n.fontFamily};
    font-size: ${n.fontSize};
    fill: ${n.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${n.errorBkgColor};
  }
  & .error-text {
    fill: ${n.errorTextColor};
    stroke: ${n.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${n.lineColor};
    stroke: ${n.lineColor};
  }
  & .marker.cross {
    stroke: ${n.lineColor};
  }

  & svg {
    font-family: ${n.fontFamily};
    font-size: ${n.fontSize};
  }
   & p {
    margin: 0
   }

  ${r}

  ${e}
`},"getStyles"),b4=x((t,e)=>{e!==void 0&&(yu[t]=e)},"addStylesForDiagram"),x4=y4,qS={};aF(qS,{clear:()=>v4,getAccDescription:()=>S4,getAccTitle:()=>C4,getDiagramTitle:()=>E4,setAccDescription:()=>k4,setAccTitle:()=>w4,setDiagramTitle:()=>_4});var g0="",m0="",y0="",b0=x(t=>dr(t,pn()),"sanitizeText"),v4=x(()=>{g0="",y0="",m0=""},"clear"),w4=x(t=>{g0=b0(t).replace(/^\s+/g,"")},"setAccTitle"),C4=x(()=>g0,"getAccTitle"),k4=x(t=>{y0=b0(t).replace(/\n\s+/g,`
`)},"setAccDescription"),S4=x(()=>y0,"getAccDescription"),_4=x(t=>{m0=b0(t)},"setDiagramTitle"),E4=x(()=>m0,"getDiagramTitle"),zx=G,T4=h0,et=pn,Fee=$S,zee=ia,x0=x(t=>dr(t,et()),"sanitizeText"),M4=m4,A4=x(()=>qS,"getCommonDb"),Ed={},Td=x((t,e,n)=>{var r;Ed[t]&&zx.warn(`Diagram with id ${t} already registered. Overwriting.`),Ed[t]=e,n&&RS(t,n),b4(t,e.styles),(r=e.injectUtils)==null||r.call(e,zx,T4,et,x0,M4,A4(),()=>{})},"registerDiagram"),ug=x(t=>{if(t in Ed)return Ed[t];throw new N4(t)},"getDiagram"),Xo,N4=(Xo=class extends Error{constructor(e){super(`Diagram ${e} not found.`)}},x(Xo,"DiagramNotFoundError"),Xo),O4={value:()=>{}};function VS(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new bu(n)}function bu(t){this._=t}function L4(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}bu.prototype=VS.prototype={constructor:bu,on:function(t,e){var n=this._,r=L4(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=R4(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=Hx(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Hx(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new bu(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function R4(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Hx(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=O4,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var dg="http://www.w3.org/1999/xhtml";const Wx={svg:"http://www.w3.org/2000/svg",xhtml:dg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Oh(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Wx.hasOwnProperty(e)?{space:Wx[e],local:t}:t}function I4(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===dg&&e.documentElement.namespaceURI===dg?e.createElement(t):e.createElementNS(n,t)}}function D4(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function GS(t){var e=Oh(t);return(e.local?D4:I4)(e)}function B4(){}function v0(t){return t==null?B4:function(){return this.querySelector(t)}}function P4(t){typeof t!="function"&&(t=v0(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=t.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Xn(r,this._parents)}function $4(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function F4(){return[]}function KS(t){return t==null?F4:function(){return this.querySelectorAll(t)}}function z4(t){return function(){return $4(t.apply(this,arguments))}}function H4(t){typeof t=="function"?t=z4(t):t=KS(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(t.call(l,l.__data__,c,o)),i.push(l));return new Xn(r,i)}function YS(t){return function(){return this.matches(t)}}function XS(t){return function(e){return e.matches(t)}}var W4=Array.prototype.find;function U4(t){return function(){return W4.call(this.children,t)}}function j4(){return this.firstElementChild}function q4(t){return this.select(t==null?j4:U4(typeof t=="function"?t:XS(t)))}var V4=Array.prototype.filter;function G4(){return Array.from(this.children)}function K4(t){return function(){return V4.call(this.children,t)}}function Y4(t){return this.selectAll(t==null?G4:K4(typeof t=="function"?t:XS(t)))}function X4(t){typeof t!="function"&&(t=YS(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new Xn(r,this._parents)}function ZS(t){return new Array(t.length)}function Z4(){return new Xn(this._enter||this._groups.map(ZS),this._parents)}function Md(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Md.prototype={constructor:Md,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function J4(t){return function(){return t}}function Q4(t,e,n,r,i,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new Md(t,s[o]);for(;o<l;++o)(a=e[o])&&(i[o]=a)}function ez(t,e,n,r,i,s,o){var a,l,c=new Map,u=e.length,d=s.length,h=new Array(u),f;for(a=0;a<u;++a)(l=e[a])&&(h[a]=f=o.call(l,l.__data__,a,e)+"",c.has(f)?i[a]=l:c.set(f,l));for(a=0;a<d;++a)f=o.call(t,s[a],a,s)+"",(l=c.get(f))?(r[a]=l,l.__data__=s[a],c.delete(f)):n[a]=new Md(t,s[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(h[a])===l&&(i[a]=l)}function tz(t){return t.__data__}function nz(t,e){if(!arguments.length)return Array.from(this,tz);var n=e?ez:Q4,r=this._parents,i=this._groups;typeof t!="function"&&(t=J4(t));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],d=i[c],h=d.length,f=rz(t.call(u,u&&u.__data__,c,r)),p=f.length,g=a[c]=new Array(p),m=o[c]=new Array(p),y=l[c]=new Array(h);n(u,d,g,m,y,f,e);for(var b=0,C=0,v,k;b<p;++b)if(v=g[b]){for(b>=C&&(C=b+1);!(k=m[C])&&++C<p;);v._next=k||null}}return o=new Xn(o,r),o._enter=a,o._exit=l,o}function rz(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function iz(){return new Xn(this._exit||this._groups.map(ZS),this._parents)}function sz(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function oz(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var c=n[l],u=r[l],d=c.length,h=a[l]=new Array(d),f,p=0;p<d;++p)(f=c[p]||u[p])&&(h[p]=f);for(;l<i;++l)a[l]=n[l];return new Xn(a,this._parents)}function az(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function lz(t){t||(t=cz);function e(d,h){return d&&h?t(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new Xn(i,this._parents).order()}function cz(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function uz(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function dz(){return Array.from(this)}function hz(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function fz(){let t=0;for(const e of this)++t;return t}function pz(){return!this.node()}function gz(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function mz(t){return function(){this.removeAttribute(t)}}function yz(t){return function(){this.removeAttributeNS(t.space,t.local)}}function bz(t,e){return function(){this.setAttribute(t,e)}}function xz(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function vz(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function wz(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Cz(t,e){var n=Oh(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?yz:mz:typeof e=="function"?n.local?wz:vz:n.local?xz:bz)(n,e))}function JS(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function kz(t){return function(){this.style.removeProperty(t)}}function Sz(t,e,n){return function(){this.style.setProperty(t,e,n)}}function _z(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ez(t,e,n){return arguments.length>1?this.each((e==null?kz:typeof e=="function"?_z:Sz)(t,e,n??"")):oa(this.node(),t)}function oa(t,e){return t.style.getPropertyValue(e)||JS(t).getComputedStyle(t,null).getPropertyValue(e)}function Tz(t){return function(){delete this[t]}}function Mz(t,e){return function(){this[t]=e}}function Az(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Nz(t,e){return arguments.length>1?this.each((e==null?Tz:typeof e=="function"?Az:Mz)(t,e)):this.node()[t]}function QS(t){return t.trim().split(/^|\s+/)}function w0(t){return t.classList||new e_(t)}function e_(t){this._node=t,this._names=QS(t.getAttribute("class")||"")}e_.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function t_(t,e){for(var n=w0(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function n_(t,e){for(var n=w0(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Oz(t){return function(){t_(this,t)}}function Lz(t){return function(){n_(this,t)}}function Rz(t,e){return function(){(e.apply(this,arguments)?t_:n_)(this,t)}}function Iz(t,e){var n=QS(t+"");if(arguments.length<2){for(var r=w0(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Rz:e?Oz:Lz)(n,e))}function Dz(){this.textContent=""}function Bz(t){return function(){this.textContent=t}}function Pz(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function $z(t){return arguments.length?this.each(t==null?Dz:(typeof t=="function"?Pz:Bz)(t)):this.node().textContent}function Fz(){this.innerHTML=""}function zz(t){return function(){this.innerHTML=t}}function Hz(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Wz(t){return arguments.length?this.each(t==null?Fz:(typeof t=="function"?Hz:zz)(t)):this.node().innerHTML}function Uz(){this.nextSibling&&this.parentNode.appendChild(this)}function jz(){return this.each(Uz)}function qz(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Vz(){return this.each(qz)}function Gz(t){var e=typeof t=="function"?t:GS(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Kz(){return null}function Yz(t,e){var n=typeof t=="function"?t:GS(t),r=e==null?Kz:typeof e=="function"?e:v0(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Xz(){var t=this.parentNode;t&&t.removeChild(this)}function Zz(){return this.each(Xz)}function Jz(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Qz(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function e6(t){return this.select(t?Qz:Jz)}function t6(t){return arguments.length?this.property("__data__",t):this.node().__data__}function n6(t){return function(e){t.call(this,e,this.__data__)}}function r6(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function i6(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function s6(t,e,n){return function(){var r=this.__on,i,s=n6(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function o6(t,e,n){var r=r6(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?s6:i6,i=0;i<s;++i)this.each(a(r[i],e,n));return this}function r_(t,e,n){var r=JS(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function a6(t,e){return function(){return r_(this,t,e)}}function l6(t,e){return function(){return r_(this,t,e.apply(this,arguments))}}function c6(t,e){return this.each((typeof e=="function"?l6:a6)(t,e))}function*u6(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var i_=[null];function Xn(t,e){this._groups=t,this._parents=e}function ac(){return new Xn([[document.documentElement]],i_)}function d6(){return this}Xn.prototype=ac.prototype={constructor:Xn,select:P4,selectAll:H4,selectChild:q4,selectChildren:Y4,filter:X4,data:nz,enter:Z4,exit:iz,join:sz,merge:oz,selection:d6,order:az,sort:lz,call:uz,nodes:dz,node:hz,size:fz,empty:pz,each:gz,attr:Cz,style:Ez,property:Nz,classed:Iz,text:$z,html:Wz,raise:jz,lower:Vz,append:Gz,insert:Yz,remove:Zz,clone:e6,datum:t6,on:o6,dispatch:c6,[Symbol.iterator]:u6};function Ve(t){return typeof t=="string"?new Xn([[document.querySelector(t)]],[document.documentElement]):new Xn([[t]],i_)}function C0(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function s_(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function lc(){}var Bl=.7,Ad=1/Bl,Ho="\\s*([+-]?\\d+)\\s*",Pl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h6=/^#([0-9a-f]{3,8})$/,f6=new RegExp(`^rgb\\(${Ho},${Ho},${Ho}\\)$`),p6=new RegExp(`^rgb\\(${Vr},${Vr},${Vr}\\)$`),g6=new RegExp(`^rgba\\(${Ho},${Ho},${Ho},${Pl}\\)$`),m6=new RegExp(`^rgba\\(${Vr},${Vr},${Vr},${Pl}\\)$`),y6=new RegExp(`^hsl\\(${Pl},${Vr},${Vr}\\)$`),b6=new RegExp(`^hsla\\(${Pl},${Vr},${Vr},${Pl}\\)$`),Ux={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};C0(lc,$l,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:jx,formatHex:jx,formatHex8:x6,formatHsl:v6,formatRgb:qx,toString:qx});function jx(){return this.rgb().formatHex()}function x6(){return this.rgb().formatHex8()}function v6(){return o_(this).formatHsl()}function qx(){return this.rgb().formatRgb()}function $l(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=h6.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Vx(e):n===3?new Dn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Vc(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Vc(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=f6.exec(t))?new Dn(e[1],e[2],e[3],1):(e=p6.exec(t))?new Dn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=g6.exec(t))?Vc(e[1],e[2],e[3],e[4]):(e=m6.exec(t))?Vc(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=y6.exec(t))?Yx(e[1],e[2]/100,e[3]/100,1):(e=b6.exec(t))?Yx(e[1],e[2]/100,e[3]/100,e[4]):Ux.hasOwnProperty(t)?Vx(Ux[t]):t==="transparent"?new Dn(NaN,NaN,NaN,0):null}function Vx(t){return new Dn(t>>16&255,t>>8&255,t&255,1)}function Vc(t,e,n,r){return r<=0&&(t=e=n=NaN),new Dn(t,e,n,r)}function w6(t){return t instanceof lc||(t=$l(t)),t?(t=t.rgb(),new Dn(t.r,t.g,t.b,t.opacity)):new Dn}function hg(t,e,n,r){return arguments.length===1?w6(t):new Dn(t,e,n,r??1)}function Dn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}C0(Dn,hg,s_(lc,{brighter(t){return t=t==null?Ad:Math.pow(Ad,t),new Dn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Bl:Math.pow(Bl,t),new Dn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Dn(zs(this.r),zs(this.g),zs(this.b),Nd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gx,formatHex:Gx,formatHex8:C6,formatRgb:Kx,toString:Kx}));function Gx(){return`#${Os(this.r)}${Os(this.g)}${Os(this.b)}`}function C6(){return`#${Os(this.r)}${Os(this.g)}${Os(this.b)}${Os((isNaN(this.opacity)?1:this.opacity)*255)}`}function Kx(){const t=Nd(this.opacity);return`${t===1?"rgb(":"rgba("}${zs(this.r)}, ${zs(this.g)}, ${zs(this.b)}${t===1?")":`, ${t})`}`}function Nd(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function zs(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Os(t){return t=zs(t),(t<16?"0":"")+t.toString(16)}function Yx(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Cr(t,e,n,r)}function o_(t){if(t instanceof Cr)return new Cr(t.h,t.s,t.l,t.opacity);if(t instanceof lc||(t=$l(t)),!t)return new Cr;if(t instanceof Cr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Cr(o,a,l,t.opacity)}function k6(t,e,n,r){return arguments.length===1?o_(t):new Cr(t,e,n,r??1)}function Cr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}C0(Cr,k6,s_(lc,{brighter(t){return t=t==null?Ad:Math.pow(Ad,t),new Cr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Bl:Math.pow(Bl,t),new Cr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Dn(ep(t>=240?t-240:t+120,i,r),ep(t,i,r),ep(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Cr(Xx(this.h),Gc(this.s),Gc(this.l),Nd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Nd(this.opacity);return`${t===1?"hsl(":"hsla("}${Xx(this.h)}, ${Gc(this.s)*100}%, ${Gc(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Xx(t){return t=(t||0)%360,t<0?t+360:t}function Gc(t){return Math.max(0,Math.min(1,t||0))}function ep(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const k0=t=>()=>t;function a_(t,e){return function(n){return t+n*e}}function S6(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Hee(t,e){var n=e-t;return n?a_(t,n>180||n<-180?n-360*Math.round(n/360):n):k0(isNaN(t)?e:t)}function _6(t){return(t=+t)==1?l_:function(e,n){return n-e?S6(e,n,t):k0(isNaN(e)?n:e)}}function l_(t,e){var n=e-t;return n?a_(t,n):k0(isNaN(t)?e:t)}const Zx=(function t(e){var n=_6(e);function r(i,s){var o=n((i=hg(i)).r,(s=hg(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=l_(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r})(1);function Bi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var fg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tp=new RegExp(fg.source,"g");function E6(t){return function(){return t}}function T6(t){return function(e){return t(e)+""}}function M6(t,e){var n=fg.lastIndex=tp.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=fg.exec(t))&&(i=tp.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Bi(r,i)})),n=tp.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?T6(l[0].x):E6(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}var Jx=180/Math.PI,pg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function c_(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Jx,skewX:Math.atan(l)*Jx,scaleX:o,scaleY:a}}var Kc;function A6(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?pg:c_(e.a,e.b,e.c,e.d,e.e,e.f)}function N6(t){return t==null||(Kc||(Kc=document.createElementNS("http://www.w3.org/2000/svg","g")),Kc.setAttribute("transform",t),!(t=Kc.transform.baseVal.consolidate()))?pg:(t=t.matrix,c_(t.a,t.b,t.c,t.d,t.e,t.f))}function u_(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,d,h,f,p){if(c!==d||u!==h){var g=f.push("translate(",null,e,null,n);p.push({i:g-4,x:Bi(c,d)},{i:g-2,x:Bi(u,h)})}else(d||h)&&f.push("translate("+d+e+h+n)}function o(c,u,d,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Bi(c,u)})):u&&d.push(i(d)+"rotate("+u+r)}function a(c,u,d,h){c!==u?h.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Bi(c,u)}):u&&d.push(i(d)+"skewX("+u+r)}function l(c,u,d,h,f,p){if(c!==d||u!==h){var g=f.push(i(f)+"scale(",null,",",null,")");p.push({i:g-4,x:Bi(c,d)},{i:g-2,x:Bi(u,h)})}else(d!==1||h!==1)&&f.push(i(f)+"scale("+d+","+h+")")}return function(c,u){var d=[],h=[];return c=t(c),u=t(u),s(c.translateX,c.translateY,u.translateX,u.translateY,d,h),o(c.rotate,u.rotate,d,h),a(c.skewX,u.skewX,d,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,h),c=u=null,function(f){for(var p=-1,g=h.length,m;++p<g;)d[(m=h[p]).i]=m.x(f);return d.join("")}}}var O6=u_(A6,"px, ","px)","deg)"),L6=u_(N6,", ",")",")"),aa=0,Ya=0,Da=0,d_=1e3,Od,Xa,Ld=0,Zs=0,Lh=0,Fl=typeof performance=="object"&&performance.now?performance:Date,h_=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function S0(){return Zs||(h_(R6),Zs=Fl.now()+Lh)}function R6(){Zs=0}function Rd(){this._call=this._time=this._next=null}Rd.prototype=f_.prototype={constructor:Rd,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?S0():+n)+(e==null?0:+e),!this._next&&Xa!==this&&(Xa?Xa._next=this:Od=this,Xa=this),this._call=t,this._time=n,gg()},stop:function(){this._call&&(this._call=null,this._time=1/0,gg())}};function f_(t,e,n){var r=new Rd;return r.restart(t,e,n),r}function I6(){S0(),++aa;for(var t=Od,e;t;)(e=Zs-t._time)>=0&&t._call.call(void 0,e),t=t._next;--aa}function Qx(){Zs=(Ld=Fl.now())+Lh,aa=Ya=0;try{I6()}finally{aa=0,B6(),Zs=0}}function D6(){var t=Fl.now(),e=t-Ld;e>d_&&(Lh-=e,Ld=t)}function B6(){for(var t,e=Od,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Od=n);Xa=t,gg(r)}function gg(t){if(!aa){Ya&&(Ya=clearTimeout(Ya));var e=t-Zs;e>24?(t<1/0&&(Ya=setTimeout(Qx,t-Fl.now()-Lh)),Da&&(Da=clearInterval(Da))):(Da||(Ld=Fl.now(),Da=setInterval(D6,d_)),aa=1,h_(Qx))}}function e1(t,e,n){var r=new Rd;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var P6=VS("start","end","cancel","interrupt"),$6=[],p_=0,t1=1,mg=2,xu=3,n1=4,yg=5,vu=6;function Rh(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;F6(t,n,{name:e,index:r,group:i,on:P6,tween:$6,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:p_})}function _0(t,e){var n=Mr(t,e);if(n.state>p_)throw new Error("too late; already scheduled");return n}function Qr(t,e){var n=Mr(t,e);if(n.state>xu)throw new Error("too late; already running");return n}function Mr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function F6(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=f_(s,0,n.time);function s(c){n.state=t1,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,d,h,f;if(n.state!==t1)return l();for(u in r)if(f=r[u],f.name===n.name){if(f.state===xu)return e1(o);f.state===n1?(f.state=vu,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<e&&(f.state=vu,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[u])}if(e1(function(){n.state===xu&&(n.state=n1,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=mg,n.on.call("start",t,t.__data__,n.index,n.group),n.state===mg){for(n.state=xu,i=new Array(h=n.tween.length),u=0,d=-1;u<h;++u)(f=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=f);i.length=d+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=yg,1),d=-1,h=i.length;++d<h;)i[d].call(t,u);n.state===yg&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=vu,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function z6(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>mg&&r.state<yg,r.state=vu,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function H6(t){return this.each(function(){z6(this,t)})}function W6(t,e){var n,r;return function(){var i=Qr(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function U6(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Qr(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function j6(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Mr(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?W6:U6)(n,t,e))}function E0(t,e,n){var r=t._id;return t.each(function(){var i=Qr(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Mr(i,r).value[e]}}function g_(t,e){var n;return(typeof e=="number"?Bi:e instanceof $l?Zx:(n=$l(e))?(e=n,Zx):M6)(t,e)}function q6(t){return function(){this.removeAttribute(t)}}function V6(t){return function(){this.removeAttributeNS(t.space,t.local)}}function G6(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function K6(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function Y6(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function X6(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function Z6(t,e){var n=Oh(t),r=n==="transform"?L6:g_;return this.attrTween(t,typeof e=="function"?(n.local?X6:Y6)(n,r,E0(this,"attr."+t,e)):e==null?(n.local?V6:q6)(n):(n.local?K6:G6)(n,r,e))}function J6(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Q6(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function eH(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Q6(t,s)),n}return i._value=e,i}function tH(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&J6(t,s)),n}return i._value=e,i}function nH(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Oh(t);return this.tween(n,(r.local?eH:tH)(r,e))}function rH(t,e){return function(){_0(this,t).delay=+e.apply(this,arguments)}}function iH(t,e){return e=+e,function(){_0(this,t).delay=e}}function sH(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?rH:iH)(e,t)):Mr(this.node(),e).delay}function oH(t,e){return function(){Qr(this,t).duration=+e.apply(this,arguments)}}function aH(t,e){return e=+e,function(){Qr(this,t).duration=e}}function lH(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?oH:aH)(e,t)):Mr(this.node(),e).duration}function cH(t,e){if(typeof e!="function")throw new Error;return function(){Qr(this,t).ease=e}}function uH(t){var e=this._id;return arguments.length?this.each(cH(e,t)):Mr(this.node(),e).ease}function dH(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Qr(this,t).ease=n}}function hH(t){if(typeof t!="function")throw new Error;return this.each(dH(this._id,t))}function fH(t){typeof t!="function"&&(t=YS(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new vi(r,this._parents,this._name,this._id)}function pH(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],c=n[a],u=l.length,d=o[a]=new Array(u),h,f=0;f<u;++f)(h=l[f]||c[f])&&(d[f]=h);for(;a<r;++a)o[a]=e[a];return new vi(o,this._parents,this._name,this._id)}function gH(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function mH(t,e,n){var r,i,s=gH(e)?_0:Qr;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function yH(t,e){var n=this._id;return arguments.length<2?Mr(this.node(),n).on.on(t):this.each(mH(n,t,e))}function bH(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function xH(){return this.on("end.remove",bH(this._id))}function vH(t){var e=this._name,n=this._id;typeof t!="function"&&(t=v0(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,c=s[o]=new Array(l),u,d,h=0;h<l;++h)(u=a[h])&&(d=t.call(u,u.__data__,h,a))&&("__data__"in u&&(d.__data__=u.__data__),c[h]=d,Rh(c[h],e,n,h,c,Mr(u,n)));return new vi(s,this._parents,e,n)}function wH(t){var e=this._name,n=this._id;typeof t!="function"&&(t=KS(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var h=t.call(u,u.__data__,d,l),f,p=Mr(u,n),g=0,m=h.length;g<m;++g)(f=h[g])&&Rh(f,e,n,g,h,p);s.push(h),o.push(u)}return new vi(s,o,e,n)}var CH=ac.prototype.constructor;function kH(){return new CH(this._groups,this._parents)}function SH(t,e){var n,r,i;return function(){var s=oa(this,t),o=(this.style.removeProperty(t),oa(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function m_(t){return function(){this.style.removeProperty(t)}}function _H(t,e,n){var r,i=n+"",s;return function(){var o=oa(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function EH(t,e,n){var r,i,s;return function(){var o=oa(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),oa(this,t))),o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a))}}function TH(t,e){var n,r,i,s="style."+e,o="end."+s,a;return function(){var l=Qr(this,t),c=l.on,u=l.value[s]==null?a||(a=m_(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(o,i=u),l.on=r}}function MH(t,e,n){var r=(t+="")=="transform"?O6:g_;return e==null?this.styleTween(t,SH(t,r)).on("end.style."+t,m_(t)):typeof e=="function"?this.styleTween(t,EH(t,r,E0(this,"style."+t,e))).each(TH(this._id,t)):this.styleTween(t,_H(t,r,e),n).on("end.style."+t,null)}function AH(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function NH(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&AH(t,o,n)),r}return s._value=e,s}function OH(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,NH(t,e,n??""))}function LH(t){return function(){this.textContent=t}}function RH(t){return function(){var e=t(this);this.textContent=e??""}}function IH(t){return this.tween("text",typeof t=="function"?RH(E0(this,"text",t)):LH(t==null?"":t+""))}function DH(t){return function(e){this.textContent=t.call(this,e)}}function BH(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&DH(i)),e}return r._value=t,r}function PH(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,BH(t))}function $H(){for(var t=this._name,e=this._id,n=y_(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Mr(l,e);Rh(l,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new vi(r,this._parents,t,n)}function FH(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var c=Qr(this,r),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),i===0&&s()})}var zH=0;function vi(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function y_(){return++zH}var ai=ac.prototype;vi.prototype={constructor:vi,select:vH,selectAll:wH,selectChild:ai.selectChild,selectChildren:ai.selectChildren,filter:fH,merge:pH,selection:kH,transition:$H,call:ai.call,nodes:ai.nodes,node:ai.node,size:ai.size,empty:ai.empty,each:ai.each,on:yH,attr:Z6,attrTween:nH,style:MH,styleTween:OH,text:IH,textTween:PH,remove:xH,tween:j6,delay:sH,duration:lH,ease:uH,easeVarying:hH,end:FH,[Symbol.iterator]:ai[Symbol.iterator]};function HH(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var WH={time:null,delay:0,duration:250,ease:HH};function UH(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function jH(t){var e,n;t instanceof vi?(e=t._id,t=t._name):(e=y_(),(n=WH).time=S0(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&Rh(l,t,e,c,o,n||UH(l,e));return new vi(r,this._parents,t,e)}ac.prototype.interrupt=H6;ac.prototype.transition=jH;const bg=Math.PI,xg=2*bg,ws=1e-6,qH=xg-ws;function b_(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function VH(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return b_;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class GH{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?b_:VH(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,c=i-n,u=o-e,d=a-n,h=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>ws)if(!(Math.abs(d*l-c*u)>ws)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let f=r-o,p=i-a,g=l*l+c*c,m=f*f+p*p,y=Math.sqrt(g),b=Math.sqrt(h),C=s*Math.tan((bg-Math.acos((g+h-m)/(2*y*b)))/2),v=C/b,k=C/y;Math.abs(v-1)>ws&&this._append`L${e+v*u},${n+v*d}`,this._append`A${s},${s},0,0,${+(d*f>u*p)},${this._x1=e+k*l},${this._y1=n+k*c}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=e+a,u=n+l,d=1^o,h=o?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>ws||Math.abs(this._y1-u)>ws)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%xg+xg),h>qH?this._append`A${r},${r},0,1,${d},${e-a},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:h>ws&&this._append`A${r},${r},0,${+(h>=bg)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Co(t){return function(){return t}}const Wee=Math.abs,Uee=Math.atan2,jee=Math.cos,qee=Math.max,Vee=Math.min,Gee=Math.sin,Kee=Math.sqrt,r1=1e-12,T0=Math.PI,i1=T0/2,Yee=2*T0;function Xee(t){return t>1?0:t<-1?T0:Math.acos(t)}function Zee(t){return t>=1?i1:t<=-1?-i1:Math.asin(t)}function KH(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new GH(e)}function YH(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function x_(t){this._context=t}x_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Id(t){return new x_(t)}function XH(t){return t[0]}function ZH(t){return t[1]}function JH(t,e){var n=Co(!0),r=null,i=Id,s=null,o=KH(a);t=typeof t=="function"?t:t===void 0?XH:Co(t),e=typeof e=="function"?e:e===void 0?ZH:Co(e);function a(l){var c,u=(l=YH(l)).length,d,h=!1,f;for(r==null&&(s=i(f=o())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(d,c,l),+e(d,c,l));if(f)return s=null,f+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Co(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:Co(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Co(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}class v_{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function w_(t){return new v_(t,!0)}function C_(t){return new v_(t,!1)}function es(){}function Dd(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ih(t){this._context=t}Ih.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Dd(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Dd(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function wu(t){return new Ih(t)}function k_(t){this._context=t}k_.prototype={areaStart:es,areaEnd:es,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Dd(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function QH(t){return new k_(t)}function S_(t){this._context=t}S_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Dd(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function e9(t){return new S_(t)}function __(t,e){this._basis=new Ih(t),this._beta=e}__.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],s=t[n]-r,o=e[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*t[a]+(1-this._beta)*(r+l*s),this._beta*e[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const t9=(function t(e){function n(r){return e===1?new Ih(r):new __(r,e)}return n.beta=function(r){return t(+r)},n})(.85);function Bd(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function M0(t,e){this._context=t,this._k=(1-e)/6}M0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Bd(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Bd(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const E_=(function t(e){function n(r){return new M0(r,e)}return n.tension=function(r){return t(+r)},n})(0);function A0(t,e){this._context=t,this._k=(1-e)/6}A0.prototype={areaStart:es,areaEnd:es,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Bd(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const n9=(function t(e){function n(r){return new A0(r,e)}return n.tension=function(r){return t(+r)},n})(0);function N0(t,e){this._context=t,this._k=(1-e)/6}N0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Bd(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const r9=(function t(e){function n(r){return new N0(r,e)}return n.tension=function(r){return t(+r)},n})(0);function O0(t,e,n){var r=t._x1,i=t._y1,s=t._x2,o=t._y2;if(t._l01_a>r1){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>r1){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/u,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,s,o,t._x2,t._y2)}function T_(t,e){this._context=t,this._alpha=e}T_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:O0(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const M_=(function t(e){function n(r){return e?new T_(r,e):new M0(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function A_(t,e){this._context=t,this._alpha=e}A_.prototype={areaStart:es,areaEnd:es,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:O0(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const i9=(function t(e){function n(r){return e?new A_(r,e):new A0(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function N_(t,e){this._context=t,this._alpha=e}N_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:O0(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const s9=(function t(e){function n(r){return e?new N_(r,e):new N0(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function O_(t){this._context=t}O_.prototype={areaStart:es,areaEnd:es,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function o9(t){return new O_(t)}function s1(t){return t<0?-1:1}function o1(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(s1(s)+s1(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function a1(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function np(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function Pd(t){this._context=t}Pd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:np(this,this._t0,a1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,np(this,a1(this,n=o1(this,t,e)),n);break;default:np(this,this._t0,n=o1(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function L_(t){this._context=new R_(t)}(L_.prototype=Object.create(Pd.prototype)).point=function(t,e){Pd.prototype.point.call(this,e,t)};function R_(t){this._context=t}R_.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function I_(t){return new Pd(t)}function D_(t){return new L_(t)}function B_(t){this._context=t}B_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=l1(t),i=l1(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function l1(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function P_(t){return new B_(t)}function Dh(t,e){this._context=t,this._t=e}Dh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function $_(t){return new Dh(t,.5)}function F_(t){return new Dh(t,0)}function z_(t){return new Dh(t,1)}function Za(t,e,n){this.k=t,this.x=e,this.y=n}Za.prototype={constructor:Za,scale:function(t){return t===1?this:new Za(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Za(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Za.prototype;var a9=x(t=>{var i;const{securityLevel:e}=et();let n=Ve("body");if(e==="sandbox"){const o=((i=Ve(`#i${t}`).node())==null?void 0:i.contentDocument)??document;n=Ve(o.body)}return n.select(`#${t}`)},"selectSvgElement");function L0(t){return typeof t>"u"||t===null}x(L0,"isNothing");function H_(t){return typeof t=="object"&&t!==null}x(H_,"isObject");function W_(t){return Array.isArray(t)?t:L0(t)?[]:[t]}x(W_,"toArray");function U_(t,e){var n,r,i,s;if(e)for(s=Object.keys(e),n=0,r=s.length;n<r;n+=1)i=s[n],t[i]=e[i];return t}x(U_,"extend");function j_(t,e){var n="",r;for(r=0;r<e;r+=1)n+=t;return n}x(j_,"repeat");function q_(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}x(q_,"isNegativeZero");var l9=L0,c9=H_,u9=W_,d9=j_,h9=q_,f9=U_,Ft={isNothing:l9,isObject:c9,toArray:u9,repeat:d9,isNegativeZero:h9,extend:f9};function R0(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),r+" "+n):r}x(R0,"formatError");function la(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=R0(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}x(la,"YAMLException$1");la.prototype=Object.create(Error.prototype);la.prototype.constructor=la;la.prototype.toString=x(function(e){return this.name+": "+R0(this,e)},"toString");var In=la;function Cu(t,e,n,r,i){var s="",o="",a=Math.floor(i/2)-1;return r-e>a&&(s=" ... ",e=r-a+s.length),n-r>a&&(o=" ...",n=r+a-o.length),{str:s+t.slice(e,n).replace(/\t/g,"")+o,pos:r-e+s.length}}x(Cu,"getLine");function ku(t,e){return Ft.repeat(" ",e-t.length)+t}x(ku,"padStart");function V_(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],s,o=-1;s=n.exec(t.buffer);)i.push(s.index),r.push(s.index+s[0].length),t.position<=s.index&&o<0&&(o=r.length-2);o<0&&(o=r.length-1);var a="",l,c,u=Math.min(t.line+e.linesAfter,i.length).toString().length,d=e.maxLength-(e.indent+u+3);for(l=1;l<=e.linesBefore&&!(o-l<0);l++)c=Cu(t.buffer,r[o-l],i[o-l],t.position-(r[o]-r[o-l]),d),a=Ft.repeat(" ",e.indent)+ku((t.line-l+1).toString(),u)+" | "+c.str+`
`+a;for(c=Cu(t.buffer,r[o],i[o],t.position,d),a+=Ft.repeat(" ",e.indent)+ku((t.line+1).toString(),u)+" | "+c.str+`
`,a+=Ft.repeat("-",e.indent+u+3+c.pos)+`^
`,l=1;l<=e.linesAfter&&!(o+l>=i.length);l++)c=Cu(t.buffer,r[o+l],i[o+l],t.position-(r[o]-r[o+l]),d),a+=Ft.repeat(" ",e.indent)+ku((t.line+l+1).toString(),u)+" | "+c.str+`
`;return a.replace(/\n$/,"")}x(V_,"makeSnippet");var p9=V_,g9=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],m9=["scalar","sequence","mapping"];function G_(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(r){e[String(r)]=n})}),e}x(G_,"compileStyleAliases");function K_(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(g9.indexOf(n)===-1)throw new In('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=G_(e.styleAliases||null),m9.indexOf(this.kind)===-1)throw new In('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}x(K_,"Type$1");var gn=K_;function vg(t,e){var n=[];return t[e].forEach(function(r){var i=n.length;n.forEach(function(s,o){s.tag===r.tag&&s.kind===r.kind&&s.multi===r.multi&&(i=o)}),n[i]=r}),n}x(vg,"compileList");function Y_(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function r(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(x(r,"collectType"),e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(r);return t}x(Y_,"compileMap");function $d(t){return this.extend(t)}x($d,"Schema$1");$d.prototype.extend=x(function(e){var n=[],r=[];if(e instanceof gn)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new In("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(s){if(!(s instanceof gn))throw new In("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new In("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new In("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(s){if(!(s instanceof gn))throw new In("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create($d.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=vg(i,"implicit"),i.compiledExplicit=vg(i,"explicit"),i.compiledTypeMap=Y_(i.compiledImplicit,i.compiledExplicit),i},"extend");var y9=$d,b9=new gn("tag:yaml.org,2002:str",{kind:"scalar",construct:x(function(t){return t!==null?t:""},"construct")}),x9=new gn("tag:yaml.org,2002:seq",{kind:"sequence",construct:x(function(t){return t!==null?t:[]},"construct")}),v9=new gn("tag:yaml.org,2002:map",{kind:"mapping",construct:x(function(t){return t!==null?t:{}},"construct")}),w9=new y9({explicit:[b9,x9,v9]});function X_(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}x(X_,"resolveYamlNull");function Z_(){return null}x(Z_,"constructYamlNull");function J_(t){return t===null}x(J_,"isNull");var C9=new gn("tag:yaml.org,2002:null",{kind:"scalar",resolve:X_,construct:Z_,predicate:J_,represent:{canonical:x(function(){return"~"},"canonical"),lowercase:x(function(){return"null"},"lowercase"),uppercase:x(function(){return"NULL"},"uppercase"),camelcase:x(function(){return"Null"},"camelcase"),empty:x(function(){return""},"empty")},defaultStyle:"lowercase"});function Q_(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}x(Q_,"resolveYamlBoolean");function eE(t){return t==="true"||t==="True"||t==="TRUE"}x(eE,"constructYamlBoolean");function tE(t){return Object.prototype.toString.call(t)==="[object Boolean]"}x(tE,"isBoolean");var k9=new gn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Q_,construct:eE,predicate:tE,represent:{lowercase:x(function(t){return t?"true":"false"},"lowercase"),uppercase:x(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:x(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function nE(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}x(nE,"isHexCode");function rE(t){return 48<=t&&t<=55}x(rE,"isOctCode");function iE(t){return 48<=t&&t<=57}x(iE,"isDecCode");function sE(t){if(t===null)return!1;var e=t.length,n=0,r=!1,i;if(!e)return!1;if(i=t[n],(i==="-"||i==="+")&&(i=t[++n]),i==="0"){if(n+1===e)return!0;if(i=t[++n],i==="b"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!nE(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!rE(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<e;n++)if(i=t[n],i!=="_"){if(!iE(t.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}x(sE,"resolveYamlInteger");function oE(t){var e=t,n=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}x(oE,"constructYamlInteger");function aE(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Ft.isNegativeZero(t)}x(aE,"isInteger");var S9=new gn("tag:yaml.org,2002:int",{kind:"scalar",resolve:sE,construct:oE,predicate:aE,represent:{binary:x(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:x(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:x(function(t){return t.toString(10)},"decimal"),hexadecimal:x(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),_9=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function lE(t){return!(t===null||!_9.test(t)||t[t.length-1]==="_")}x(lE,"resolveYamlFloat");function cE(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}x(cE,"constructYamlFloat");var E9=/^[-+]?[0-9]+e/;function uE(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ft.isNegativeZero(t))return"-0.0";return n=t.toString(10),E9.test(n)?n.replace("e",".e"):n}x(uE,"representYamlFloat");function dE(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Ft.isNegativeZero(t))}x(dE,"isFloat");var T9=new gn("tag:yaml.org,2002:float",{kind:"scalar",resolve:lE,construct:cE,predicate:dE,represent:uE,defaultStyle:"lowercase"}),hE=w9.extend({implicit:[C9,k9,S9,T9]}),M9=hE,fE=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),pE=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function gE(t){return t===null?!1:fE.exec(t)!==null||pE.exec(t)!==null}x(gE,"resolveYamlTimestamp");function mE(t){var e,n,r,i,s,o,a,l=0,c=null,u,d,h;if(e=fE.exec(t),e===null&&(e=pE.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(n,r,i));if(s=+e[4],o=+e[5],a=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(u=+e[10],d=+(e[11]||0),c=(u*60+d)*6e4,e[9]==="-"&&(c=-c)),h=new Date(Date.UTC(n,r,i,s,o,a,l)),c&&h.setTime(h.getTime()-c),h}x(mE,"constructYamlTimestamp");function yE(t){return t.toISOString()}x(yE,"representYamlTimestamp");var A9=new gn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:gE,construct:mE,instanceOf:Date,represent:yE});function bE(t){return t==="<<"||t===null}x(bE,"resolveYamlMerge");var N9=new gn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:bE}),I0=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function xE(t){if(t===null)return!1;var e,n,r=0,i=t.length,s=I0;for(n=0;n<i;n++)if(e=s.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}x(xE,"resolveYamlBinary");function vE(t){var e,n,r=t.replace(/[\r\n=]/g,""),i=r.length,s=I0,o=0,a=[];for(e=0;e<i;e++)e%4===0&&e&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(r.charAt(e));return n=i%4*6,n===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):n===18?(a.push(o>>10&255),a.push(o>>2&255)):n===12&&a.push(o>>4&255),new Uint8Array(a)}x(vE,"constructYamlBinary");function wE(t){var e="",n=0,r,i,s=t.length,o=I0;for(r=0;r<s;r++)r%3===0&&r&&(e+=o[n>>18&63],e+=o[n>>12&63],e+=o[n>>6&63],e+=o[n&63]),n=(n<<8)+t[r];return i=s%3,i===0?(e+=o[n>>18&63],e+=o[n>>12&63],e+=o[n>>6&63],e+=o[n&63]):i===2?(e+=o[n>>10&63],e+=o[n>>4&63],e+=o[n<<2&63],e+=o[64]):i===1&&(e+=o[n>>2&63],e+=o[n<<4&63],e+=o[64],e+=o[64]),e}x(wE,"representYamlBinary");function CE(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}x(CE,"isBinary");var O9=new gn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:xE,construct:vE,predicate:CE,represent:wE}),L9=Object.prototype.hasOwnProperty,R9=Object.prototype.toString;function kE(t){if(t===null)return!0;var e=[],n,r,i,s,o,a=t;for(n=0,r=a.length;n<r;n+=1){if(i=a[n],o=!1,R9.call(i)!=="[object Object]")return!1;for(s in i)if(L9.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}x(kE,"resolveYamlOmap");function SE(t){return t!==null?t:[]}x(SE,"constructYamlOmap");var I9=new gn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:kE,construct:SE}),D9=Object.prototype.toString;function _E(t){if(t===null)return!0;var e,n,r,i,s,o=t;for(s=new Array(o.length),e=0,n=o.length;e<n;e+=1){if(r=o[e],D9.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;s[e]=[i[0],r[i[0]]]}return!0}x(_E,"resolveYamlPairs");function EE(t){if(t===null)return[];var e,n,r,i,s,o=t;for(s=new Array(o.length),e=0,n=o.length;e<n;e+=1)r=o[e],i=Object.keys(r),s[e]=[i[0],r[i[0]]];return s}x(EE,"constructYamlPairs");var B9=new gn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:_E,construct:EE}),P9=Object.prototype.hasOwnProperty;function TE(t){if(t===null)return!0;var e,n=t;for(e in n)if(P9.call(n,e)&&n[e]!==null)return!1;return!0}x(TE,"resolveYamlSet");function ME(t){return t!==null?t:{}}x(ME,"constructYamlSet");var $9=new gn("tag:yaml.org,2002:set",{kind:"mapping",resolve:TE,construct:ME}),AE=M9.extend({implicit:[A9,N9],explicit:[O9,I9,B9,$9]}),ts=Object.prototype.hasOwnProperty,Fd=1,NE=2,OE=3,zd=4,rp=1,F9=2,c1=3,z9=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,H9=/[\x85\u2028\u2029]/,W9=/[,\[\]\{\}]/,LE=/^(?:!|!!|![a-z\-]+!)$/i,RE=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function wg(t){return Object.prototype.toString.call(t)}x(wg,"_class");function Er(t){return t===10||t===13}x(Er,"is_EOL");function Xi(t){return t===9||t===32}x(Xi,"is_WHITE_SPACE");function kn(t){return t===9||t===32||t===10||t===13}x(kn,"is_WS_OR_EOL");function Ls(t){return t===44||t===91||t===93||t===123||t===125}x(Ls,"is_FLOW_INDICATOR");function IE(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}x(IE,"fromHexCode");function DE(t){return t===120?2:t===117?4:t===85?8:0}x(DE,"escapedHexLen");function BE(t){return 48<=t&&t<=57?t-48:-1}x(BE,"fromDecimalCode");function Cg(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}x(Cg,"simpleEscapeSequence");function PE(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}x(PE,"charFromCodepoint");var $E=new Array(256),FE=new Array(256);for(vs=0;vs<256;vs++)$E[vs]=Cg(vs)?1:0,FE[vs]=Cg(vs);var vs;function zE(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||AE,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}x(zE,"State$1");function D0(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=p9(n),new In(e,n)}x(D0,"generateError");function Ce(t,e){throw D0(t,e)}x(Ce,"throwError");function zl(t,e){t.onWarning&&t.onWarning.call(null,D0(t,e))}x(zl,"throwWarning");var u1={YAML:x(function(e,n,r){var i,s,o;e.version!==null&&Ce(e,"duplication of %YAML directive"),r.length!==1&&Ce(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&Ce(e,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&Ce(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&zl(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:x(function(e,n,r){var i,s;r.length!==2&&Ce(e,"TAG directive accepts exactly two arguments"),i=r[0],s=r[1],LE.test(i)||Ce(e,"ill-formed tag handle (first argument) of the TAG directive"),ts.call(e.tagMap,i)&&Ce(e,'there is a previously declared suffix for "'+i+'" tag handle'),RE.test(s)||Ce(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{Ce(e,"tag prefix is malformed: "+s)}e.tagMap[i]=s},"handleTagDirective")};function bi(t,e,n,r){var i,s,o,a;if(e<n){if(a=t.input.slice(e,n),r)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||Ce(t,"expected valid JSON character");else z9.test(a)&&Ce(t,"the stream contains non-printable characters");t.result+=a}}x(bi,"captureSegment");function kg(t,e,n,r){var i,s,o,a;for(Ft.isObject(n)||Ce(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),o=0,a=i.length;o<a;o+=1)s=i[o],ts.call(e,s)||(e[s]=n[s],r[s]=!0)}x(kg,"mergeMappings");function Rs(t,e,n,r,i,s,o,a,l){var c,u;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,u=i.length;c<u;c+=1)Array.isArray(i[c])&&Ce(t,"nested arrays are not supported inside keys"),typeof i=="object"&&wg(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&wg(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,u=s.length;c<u;c+=1)kg(t,e,s[c],n);else kg(t,e,s,n);else!t.json&&!ts.call(n,i)&&ts.call(e,i)&&(t.line=o||t.line,t.lineStart=a||t.lineStart,t.position=l||t.position,Ce(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[i]=s,delete n[i];return e}x(Rs,"storeMappingPair");function Bh(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Ce(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}x(Bh,"readLineBreak");function kt(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Xi(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Er(i))for(Bh(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return n!==-1&&r!==0&&t.lineIndent<n&&zl(t,"deficient indentation"),r}x(kt,"skipSeparationSpace");function cc(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||kn(n)))}x(cc,"testDocumentSeparator");function Ph(t,e){e===1?t.result+=" ":e>1&&(t.result+=Ft.repeat(`
`,e-1))}x(Ph,"writeFoldedLines");function HE(t,e,n){var r,i,s,o,a,l,c,u,d=t.kind,h=t.result,f;if(f=t.input.charCodeAt(t.position),kn(f)||Ls(f)||f===35||f===38||f===42||f===33||f===124||f===62||f===39||f===34||f===37||f===64||f===96||(f===63||f===45)&&(i=t.input.charCodeAt(t.position+1),kn(i)||n&&Ls(i)))return!1;for(t.kind="scalar",t.result="",s=o=t.position,a=!1;f!==0;){if(f===58){if(i=t.input.charCodeAt(t.position+1),kn(i)||n&&Ls(i))break}else if(f===35){if(r=t.input.charCodeAt(t.position-1),kn(r))break}else{if(t.position===t.lineStart&&cc(t)||n&&Ls(f))break;if(Er(f))if(l=t.line,c=t.lineStart,u=t.lineIndent,kt(t,!1,-1),t.lineIndent>=e){a=!0,f=t.input.charCodeAt(t.position);continue}else{t.position=o,t.line=l,t.lineStart=c,t.lineIndent=u;break}}a&&(bi(t,s,o,!1),Ph(t,t.line-l),s=o=t.position,a=!1),Xi(f)||(o=t.position+1),f=t.input.charCodeAt(++t.position)}return bi(t,s,o,!1),t.result?!0:(t.kind=d,t.result=h,!1)}x(HE,"readPlainScalar");function WE(t,e){var n,r,i;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(bi(t,r,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)r=t.position,t.position++,i=t.position;else return!0;else Er(n)?(bi(t,r,i,!0),Ph(t,kt(t,!1,e)),r=i=t.position):t.position===t.lineStart&&cc(t)?Ce(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);Ce(t,"unexpected end of the stream within a single quoted scalar")}x(WE,"readSingleQuotedScalar");function UE(t,e){var n,r,i,s,o,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return bi(t,n,t.position,!0),t.position++,!0;if(a===92){if(bi(t,n,t.position,!0),a=t.input.charCodeAt(++t.position),Er(a))kt(t,!1,e);else if(a<256&&$E[a])t.result+=FE[a],t.position++;else if((o=DE(a))>0){for(i=o,s=0;i>0;i--)a=t.input.charCodeAt(++t.position),(o=IE(a))>=0?s=(s<<4)+o:Ce(t,"expected hexadecimal character");t.result+=PE(s),t.position++}else Ce(t,"unknown escape sequence");n=r=t.position}else Er(a)?(bi(t,n,r,!0),Ph(t,kt(t,!1,e)),n=r=t.position):t.position===t.lineStart&&cc(t)?Ce(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}Ce(t,"unexpected end of the stream within a double quoted scalar")}x(UE,"readDoubleQuotedScalar");function jE(t,e){var n=!0,r,i,s,o=t.tag,a,l=t.anchor,c,u,d,h,f,p=Object.create(null),g,m,y,b;if(b=t.input.charCodeAt(t.position),b===91)u=93,f=!1,a=[];else if(b===123)u=125,f=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),b=t.input.charCodeAt(++t.position);b!==0;){if(kt(t,!0,e),b=t.input.charCodeAt(t.position),b===u)return t.position++,t.tag=o,t.anchor=l,t.kind=f?"mapping":"sequence",t.result=a,!0;n?b===44&&Ce(t,"expected the node content, but found ','"):Ce(t,"missed comma between flow collection entries"),m=g=y=null,d=h=!1,b===63&&(c=t.input.charCodeAt(t.position+1),kn(c)&&(d=h=!0,t.position++,kt(t,!0,e))),r=t.line,i=t.lineStart,s=t.position,Js(t,e,Fd,!1,!0),m=t.tag,g=t.result,kt(t,!0,e),b=t.input.charCodeAt(t.position),(h||t.line===r)&&b===58&&(d=!0,b=t.input.charCodeAt(++t.position),kt(t,!0,e),Js(t,e,Fd,!1,!0),y=t.result),f?Rs(t,a,p,m,g,y,r,i,s):d?a.push(Rs(t,null,p,m,g,y,r,i,s)):a.push(g),kt(t,!0,e),b=t.input.charCodeAt(t.position),b===44?(n=!0,b=t.input.charCodeAt(++t.position)):n=!1}Ce(t,"unexpected end of the stream within a flow collection")}x(jE,"readFlowCollection");function qE(t,e){var n,r,i=rp,s=!1,o=!1,a=e,l=0,c=!1,u,d;if(d=t.input.charCodeAt(t.position),d===124)r=!1;else if(d===62)r=!0;else return!1;for(t.kind="scalar",t.result="";d!==0;)if(d=t.input.charCodeAt(++t.position),d===43||d===45)rp===i?i=d===43?c1:F9:Ce(t,"repeat of a chomping mode identifier");else if((u=BE(d))>=0)u===0?Ce(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?Ce(t,"repeat of an indentation width identifier"):(a=e+u-1,o=!0);else break;if(Xi(d)){do d=t.input.charCodeAt(++t.position);while(Xi(d));if(d===35)do d=t.input.charCodeAt(++t.position);while(!Er(d)&&d!==0)}for(;d!==0;){for(Bh(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!o||t.lineIndent<a)&&d===32;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!o&&t.lineIndent>a&&(a=t.lineIndent),Er(d)){l++;continue}if(t.lineIndent<a){i===c1?t.result+=Ft.repeat(`
`,s?1+l:l):i===rp&&s&&(t.result+=`
`);break}for(r?Xi(d)?(c=!0,t.result+=Ft.repeat(`
`,s?1+l:l)):c?(c=!1,t.result+=Ft.repeat(`
`,l+1)):l===0?s&&(t.result+=" "):t.result+=Ft.repeat(`
`,l):t.result+=Ft.repeat(`
`,s?1+l:l),s=!0,o=!0,l=0,n=t.position;!Er(d)&&d!==0;)d=t.input.charCodeAt(++t.position);bi(t,n,t.position,!1)}return!0}x(qE,"readBlockScalar");function Sg(t,e){var n,r=t.tag,i=t.anchor,s=[],o,a=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Ce(t,"tab characters must not be used in indentation")),!(l!==45||(o=t.input.charCodeAt(t.position+1),!kn(o))));){if(a=!0,t.position++,kt(t,!0,-1)&&t.lineIndent<=e){s.push(null),l=t.input.charCodeAt(t.position);continue}if(n=t.line,Js(t,e,OE,!1,!0),s.push(t.result),kt(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&l!==0)Ce(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=r,t.anchor=i,t.kind="sequence",t.result=s,!0):!1}x(Sg,"readBlockSequence");function VE(t,e,n){var r,i,s,o,a,l,c=t.tag,u=t.anchor,d={},h=Object.create(null),f=null,p=null,g=null,m=!1,y=!1,b;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=d),b=t.input.charCodeAt(t.position);b!==0;){if(!m&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Ce(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),s=t.line,(b===63||b===58)&&kn(r))b===63?(m&&(Rs(t,d,h,f,p,null,o,a,l),f=p=g=null),y=!0,m=!0,i=!0):m?(m=!1,i=!0):Ce(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,b=r;else{if(o=t.line,a=t.lineStart,l=t.position,!Js(t,n,NE,!1,!0))break;if(t.line===s){for(b=t.input.charCodeAt(t.position);Xi(b);)b=t.input.charCodeAt(++t.position);if(b===58)b=t.input.charCodeAt(++t.position),kn(b)||Ce(t,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(Rs(t,d,h,f,p,null,o,a,l),f=p=g=null),y=!0,m=!1,i=!1,f=t.tag,p=t.result;else if(y)Ce(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=c,t.anchor=u,!0}else if(y)Ce(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=c,t.anchor=u,!0}if((t.line===s||t.lineIndent>e)&&(m&&(o=t.line,a=t.lineStart,l=t.position),Js(t,e,zd,!0,i)&&(m?p=t.result:g=t.result),m||(Rs(t,d,h,f,p,g,o,a,l),f=p=g=null),kt(t,!0,-1),b=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&b!==0)Ce(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return m&&Rs(t,d,h,f,p,null,o,a,l),y&&(t.tag=c,t.anchor=u,t.kind="mapping",t.result=d),y}x(VE,"readBlockMapping");function GE(t){var e,n=!1,r=!1,i,s,o;if(o=t.input.charCodeAt(t.position),o!==33)return!1;if(t.tag!==null&&Ce(t,"duplication of a tag property"),o=t.input.charCodeAt(++t.position),o===60?(n=!0,o=t.input.charCodeAt(++t.position)):o===33?(r=!0,i="!!",o=t.input.charCodeAt(++t.position)):i="!",e=t.position,n){do o=t.input.charCodeAt(++t.position);while(o!==0&&o!==62);t.position<t.length?(s=t.input.slice(e,t.position),o=t.input.charCodeAt(++t.position)):Ce(t,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!kn(o);)o===33&&(r?Ce(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),LE.test(i)||Ce(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),o=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),W9.test(s)&&Ce(t,"tag suffix cannot contain flow indicator characters")}s&&!RE.test(s)&&Ce(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{Ce(t,"tag name is malformed: "+s)}return n?t.tag=s:ts.call(t.tagMap,i)?t.tag=t.tagMap[i]+s:i==="!"?t.tag="!"+s:i==="!!"?t.tag="tag:yaml.org,2002:"+s:Ce(t,'undeclared tag handle "'+i+'"'),!0}x(GE,"readTagProperty");function KE(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&Ce(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!kn(n)&&!Ls(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Ce(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}x(KE,"readAnchorProperty");function YE(t){var e,n,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!kn(r)&&!Ls(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Ce(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),ts.call(t.anchorMap,n)||Ce(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],kt(t,!0,-1),!0}x(YE,"readAlias");function Js(t,e,n,r,i){var s,o,a,l=1,c=!1,u=!1,d,h,f,p,g,m;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=o=a=zd===n||OE===n,r&&kt(t,!0,-1)&&(c=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;GE(t)||KE(t);)kt(t,!0,-1)?(c=!0,a=s,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):a=!1;if(a&&(a=c||i),(l===1||zd===n)&&(Fd===n||NE===n?g=e:g=e+1,m=t.position-t.lineStart,l===1?a&&(Sg(t,m)||VE(t,m,g))||jE(t,g)?u=!0:(o&&qE(t,g)||WE(t,g)||UE(t,g)?u=!0:YE(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&Ce(t,"alias node should not have any properties")):HE(t,g,Fd===n)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(u=a&&Sg(t,m))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Ce(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,h=t.implicitTypes.length;d<h;d+=1)if(p=t.implicitTypes[d],p.resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(ts.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,f=t.typeMap.multi[t.kind||"fallback"],d=0,h=f.length;d<h;d+=1)if(t.tag.slice(0,f[d].tag.length)===f[d].tag){p=f[d];break}p||Ce(t,"unknown tag !<"+t.tag+">"),t.result!==null&&p.kind!==t.kind&&Ce(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Ce(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}x(Js,"composeNode");function XE(t){var e=t.position,n,r,i,s=!1,o;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(o=t.input.charCodeAt(t.position))!==0&&(kt(t,!0,-1),o=t.input.charCodeAt(t.position),!(t.lineIndent>0||o!==37));){for(s=!0,o=t.input.charCodeAt(++t.position),n=t.position;o!==0&&!kn(o);)o=t.input.charCodeAt(++t.position);for(r=t.input.slice(n,t.position),i=[],r.length<1&&Ce(t,"directive name must not be less than one character in length");o!==0;){for(;Xi(o);)o=t.input.charCodeAt(++t.position);if(o===35){do o=t.input.charCodeAt(++t.position);while(o!==0&&!Er(o));break}if(Er(o))break;for(n=t.position;o!==0&&!kn(o);)o=t.input.charCodeAt(++t.position);i.push(t.input.slice(n,t.position))}o!==0&&Bh(t),ts.call(u1,r)?u1[r](t,r,i):zl(t,'unknown document directive "'+r+'"')}if(kt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,kt(t,!0,-1)):s&&Ce(t,"directives end mark is expected"),Js(t,t.lineIndent-1,zd,!1,!0),kt(t,!0,-1),t.checkLineBreaks&&H9.test(t.input.slice(e,t.position))&&zl(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&cc(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,kt(t,!0,-1));return}if(t.position<t.length-1)Ce(t,"end of the stream or a document separator is expected");else return}x(XE,"readDocument");function B0(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new zE(t,e),r=t.indexOf("\0");for(r!==-1&&(n.position=r,Ce(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)XE(n);return n.documents}x(B0,"loadDocuments");function U9(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var r=B0(t,n);if(typeof e!="function")return r;for(var i=0,s=r.length;i<s;i+=1)e(r[i])}x(U9,"loadAll$1");function ZE(t,e){var n=B0(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new In("expected a single document in the stream, but found more")}}x(ZE,"load$1");var j9=ZE,q9={load:j9},JE=Object.prototype.toString,QE=Object.prototype.hasOwnProperty,P0=65279,V9=9,Hl=10,G9=13,K9=32,Y9=33,X9=34,_g=35,Z9=37,J9=38,Q9=39,e8=42,e2=44,t8=45,Hd=58,n8=61,r8=62,i8=63,s8=64,t2=91,n2=93,o8=96,r2=123,a8=124,i2=125,xn={};xn[0]="\\0";xn[7]="\\a";xn[8]="\\b";xn[9]="\\t";xn[10]="\\n";xn[11]="\\v";xn[12]="\\f";xn[13]="\\r";xn[27]="\\e";xn[34]='\\"';xn[92]="\\\\";xn[133]="\\N";xn[160]="\\_";xn[8232]="\\L";xn[8233]="\\P";var l8=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],c8=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function s2(t,e){var n,r,i,s,o,a,l;if(e===null)return{};for(n={},r=Object.keys(e),i=0,s=r.length;i<s;i+=1)o=r[i],a=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=t.compiledTypeMap.fallback[o],l&&QE.call(l.styleAliases,a)&&(a=l.styleAliases[a]),n[o]=a;return n}x(s2,"compileStyleMap");function o2(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else if(t<=4294967295)n="U",r=8;else throw new In("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Ft.repeat("0",r-e.length)+e}x(o2,"encodeHex");var u8=1,Wl=2;function a2(t){this.schema=t.schema||AE,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Ft.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=s2(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Wl:u8,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}x(a2,"State");function Eg(t,e){for(var n=Ft.repeat(" ",e),r=0,i=-1,s="",o,a=t.length;r<a;)i=t.indexOf(`
`,r),i===-1?(o=t.slice(r),r=a):(o=t.slice(r,i+1),r=i+1),o.length&&o!==`
`&&(s+=n),s+=o;return s}x(Eg,"indentString");function Wd(t,e){return`
`+Ft.repeat(" ",t.indent*e)}x(Wd,"generateNextLine");function l2(t,e){var n,r,i;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(i=t.implicitTypes[n],i.resolve(e))return!0;return!1}x(l2,"testImplicitResolving");function Ul(t){return t===K9||t===V9}x(Ul,"isWhitespace");function ca(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==P0||65536<=t&&t<=1114111}x(ca,"isPrintable");function Tg(t){return ca(t)&&t!==P0&&t!==G9&&t!==Hl}x(Tg,"isNsCharOrWhitespace");function Mg(t,e,n){var r=Tg(t),i=r&&!Ul(t);return(n?r:r&&t!==e2&&t!==t2&&t!==n2&&t!==r2&&t!==i2)&&t!==_g&&!(e===Hd&&!i)||Tg(e)&&!Ul(e)&&t===_g||e===Hd&&i}x(Mg,"isPlainSafe");function c2(t){return ca(t)&&t!==P0&&!Ul(t)&&t!==t8&&t!==i8&&t!==Hd&&t!==e2&&t!==t2&&t!==n2&&t!==r2&&t!==i2&&t!==_g&&t!==J9&&t!==e8&&t!==Y9&&t!==a8&&t!==n8&&t!==r8&&t!==Q9&&t!==X9&&t!==Z9&&t!==s8&&t!==o8}x(c2,"isPlainSafeFirst");function u2(t){return!Ul(t)&&t!==Hd}x(u2,"isPlainSafeLast");function Po(t,e){var n=t.charCodeAt(e),r;return n>=55296&&n<=56319&&e+1<t.length&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}x(Po,"codePointAt");function $0(t){var e=/^\n* /;return e.test(t)}x($0,"needIndentIndicator");var d2=1,Ag=2,h2=3,f2=4,Oo=5;function p2(t,e,n,r,i,s,o,a){var l,c=0,u=null,d=!1,h=!1,f=r!==-1,p=-1,g=c2(Po(t,0))&&u2(Po(t,t.length-1));if(e||o)for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=Po(t,l),!ca(c))return Oo;g=g&&Mg(c,u,a),u=c}else{for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=Po(t,l),c===Hl)d=!0,f&&(h=h||l-p-1>r&&t[p+1]!==" ",p=l);else if(!ca(c))return Oo;g=g&&Mg(c,u,a),u=c}h=h||f&&l-p-1>r&&t[p+1]!==" "}return!d&&!h?g&&!o&&!i(t)?d2:s===Wl?Oo:Ag:n>9&&$0(t)?Oo:o?s===Wl?Oo:Ag:h?f2:h2}x(p2,"chooseScalarStyle");function g2(t,e,n,r,i){t.dump=(function(){if(e.length===0)return t.quotingType===Wl?'""':"''";if(!t.noCompatMode&&(l8.indexOf(e)!==-1||c8.test(e)))return t.quotingType===Wl?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,n),o=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),a=r||t.flowLevel>-1&&n>=t.flowLevel;function l(c){return l2(t,c)}switch(x(l,"testAmbiguity"),p2(e,a,t.indent,o,l,t.quotingType,t.forceQuotes&&!r,i)){case d2:return e;case Ag:return"'"+e.replace(/'/g,"''")+"'";case h2:return"|"+Ng(e,t.indent)+Og(Eg(e,s));case f2:return">"+Ng(e,t.indent)+Og(Eg(m2(e,o),s));case Oo:return'"'+y2(e)+'"';default:throw new In("impossible error: invalid scalar style")}})()}x(g2,"writeScalar");function Ng(t,e){var n=$0(t)?String(e):"",r=t[t.length-1]===`
`,i=r&&(t[t.length-2]===`
`||t===`
`),s=i?"+":r?"":"-";return n+s+`
`}x(Ng,"blockHeader");function Og(t){return t[t.length-1]===`
`?t.slice(0,-1):t}x(Og,"dropEndingNewline");function m2(t,e){for(var n=/(\n+)([^\n]*)/g,r=(function(){var c=t.indexOf(`
`);return c=c!==-1?c:t.length,n.lastIndex=c,Lg(t.slice(0,c),e)})(),i=t[0]===`
`||t[0]===" ",s,o;o=n.exec(t);){var a=o[1],l=o[2];s=l[0]===" ",r+=a+(!i&&!s&&l!==""?`
`:"")+Lg(l,e),i=s}return r}x(m2,"foldString");function Lg(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,r,i=0,s,o=0,a=0,l="";r=n.exec(t);)a=r.index,a-i>e&&(s=o>i?o:a,l+=`
`+t.slice(i,s),i=s+1),o=a;return l+=`
`,t.length-i>e&&o>i?l+=t.slice(i,o)+`
`+t.slice(o+1):l+=t.slice(i),l.slice(1)}x(Lg,"foldLine");function y2(t){for(var e="",n=0,r,i=0;i<t.length;n>=65536?i+=2:i++)n=Po(t,i),r=xn[n],!r&&ca(n)?(e+=t[i],n>=65536&&(e+=t[i+1])):e+=r||o2(n);return e}x(y2,"escapeString");function b2(t,e,n){var r="",i=t.tag,s,o,a;for(s=0,o=n.length;s<o;s+=1)a=n[s],t.replacer&&(a=t.replacer.call(n,String(s),a)),(Zr(t,e,a,!1,!1)||typeof a>"u"&&Zr(t,e,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=i,t.dump="["+r+"]"}x(b2,"writeFlowSequence");function Rg(t,e,n,r){var i="",s=t.tag,o,a,l;for(o=0,a=n.length;o<a;o+=1)l=n[o],t.replacer&&(l=t.replacer.call(n,String(o),l)),(Zr(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&Zr(t,e+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=Wd(t,e)),t.dump&&Hl===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=s,t.dump=i||"[]"}x(Rg,"writeBlockSequence");function x2(t,e,n){var r="",i=t.tag,s=Object.keys(n),o,a,l,c,u;for(o=0,a=s.length;o<a;o+=1)u="",r!==""&&(u+=", "),t.condenseFlow&&(u+='"'),l=s[o],c=n[l],t.replacer&&(c=t.replacer.call(n,l,c)),Zr(t,e,l,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Zr(t,e,c,!1,!1)&&(u+=t.dump,r+=u));t.tag=i,t.dump="{"+r+"}"}x(x2,"writeFlowMapping");function v2(t,e,n,r){var i="",s=t.tag,o=Object.keys(n),a,l,c,u,d,h;if(t.sortKeys===!0)o.sort();else if(typeof t.sortKeys=="function")o.sort(t.sortKeys);else if(t.sortKeys)throw new In("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)h="",(!r||i!=="")&&(h+=Wd(t,e)),c=o[a],u=n[c],t.replacer&&(u=t.replacer.call(n,c,u)),Zr(t,e+1,c,!0,!0,!0)&&(d=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,d&&(t.dump&&Hl===t.dump.charCodeAt(0)?h+="?":h+="? "),h+=t.dump,d&&(h+=Wd(t,e)),Zr(t,e+1,u,!0,d)&&(t.dump&&Hl===t.dump.charCodeAt(0)?h+=":":h+=": ",h+=t.dump,i+=h));t.tag=s,t.dump=i||"{}"}x(v2,"writeBlockMapping");function Ig(t,e,n){var r,i,s,o,a,l;for(i=n?t.explicitTypes:t.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(n?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(l=t.styleMap[a.tag]||a.defaultStyle,JE.call(a.represent)==="[object Function]")r=a.represent(e,l);else if(QE.call(a.represent,l))r=a.represent[l](e,l);else throw new In("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');t.dump=r}return!0}return!1}x(Ig,"detectType");function Zr(t,e,n,r,i,s,o){t.tag=null,t.dump=n,Ig(t,n,!1)||Ig(t,n,!0);var a=JE.call(t.dump),l=r,c;r&&(r=t.flowLevel<0||t.flowLevel>e);var u=a==="[object Object]"||a==="[object Array]",d,h;if(u&&(d=t.duplicates.indexOf(n),h=d!==-1),(t.tag!==null&&t.tag!=="?"||h||t.indent!==2&&e>0)&&(i=!1),h&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(u&&h&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),a==="[object Object]")r&&Object.keys(t.dump).length!==0?(v2(t,e,t.dump,i),h&&(t.dump="&ref_"+d+t.dump)):(x2(t,e,t.dump),h&&(t.dump="&ref_"+d+" "+t.dump));else if(a==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!o&&e>0?Rg(t,e-1,t.dump,i):Rg(t,e,t.dump,i),h&&(t.dump="&ref_"+d+t.dump)):(b2(t,e,t.dump),h&&(t.dump="&ref_"+d+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&g2(t,t.dump,e,s,l);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new In("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(c=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",t.dump=c+" "+t.dump)}return!0}x(Zr,"writeNode");function w2(t,e){var n=[],r=[],i,s;for(Ud(t,n,r),i=0,s=r.length;i<s;i+=1)e.duplicates.push(n[r[i]]);e.usedDuplicates=new Array(s)}x(w2,"getDuplicateReferences");function Ud(t,e,n){var r,i,s;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(e.push(t),Array.isArray(t))for(i=0,s=t.length;i<s;i+=1)Ud(t[i],e,n);else for(r=Object.keys(t),i=0,s=r.length;i<s;i+=1)Ud(t[r[i]],e,n)}x(Ud,"inspectNode");function d8(t,e){e=e||{};var n=new a2(e);n.noRefs||w2(t,n);var r=t;return n.replacer&&(r=n.replacer.call({"":r},"",r)),Zr(n,0,r,!0,!0)?n.dump+`
`:""}x(d8,"dump$1");function h8(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}x(h8,"renamed");var f8=hE,p8=q9.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var dn={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},d1={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function Ja(t,e){if(t===void 0||e===void 0)return{angle:0,deltaX:0,deltaY:0};t=yt(t),e=yt(e);const[n,r]=[t.x,t.y],[i,s]=[e.x,e.y],o=i-n,a=s-r;return{angle:Math.atan(a/o),deltaX:o,deltaY:a}}x(Ja,"calculateDeltaAndAngle");var yt=x(t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,"pointTransformer"),g8=x(t=>({x:x(function(e,n,r){let i=0;const s=yt(r[0]).x<yt(r[r.length-1]).x?"left":"right";if(n===0&&Object.hasOwn(dn,t.arrowTypeStart)){const{angle:f,deltaX:p}=Ja(r[0],r[1]);i=dn[t.arrowTypeStart]*Math.cos(f)*(p>=0?1:-1)}else if(n===r.length-1&&Object.hasOwn(dn,t.arrowTypeEnd)){const{angle:f,deltaX:p}=Ja(r[r.length-1],r[r.length-2]);i=dn[t.arrowTypeEnd]*Math.cos(f)*(p>=0?1:-1)}const o=Math.abs(yt(e).x-yt(r[r.length-1]).x),a=Math.abs(yt(e).y-yt(r[r.length-1]).y),l=Math.abs(yt(e).x-yt(r[0]).x),c=Math.abs(yt(e).y-yt(r[0]).y),u=dn[t.arrowTypeStart],d=dn[t.arrowTypeEnd],h=1;if(o<d&&o>0&&a<d){let f=d+h-o;f*=s==="right"?-1:1,i-=f}if(l<u&&l>0&&c<u){let f=u+h-l;f*=s==="right"?-1:1,i+=f}return yt(e).x+i},"x"),y:x(function(e,n,r){let i=0;const s=yt(r[0]).y<yt(r[r.length-1]).y?"down":"up";if(n===0&&Object.hasOwn(dn,t.arrowTypeStart)){const{angle:f,deltaY:p}=Ja(r[0],r[1]);i=dn[t.arrowTypeStart]*Math.abs(Math.sin(f))*(p>=0?1:-1)}else if(n===r.length-1&&Object.hasOwn(dn,t.arrowTypeEnd)){const{angle:f,deltaY:p}=Ja(r[r.length-1],r[r.length-2]);i=dn[t.arrowTypeEnd]*Math.abs(Math.sin(f))*(p>=0?1:-1)}const o=Math.abs(yt(e).y-yt(r[r.length-1]).y),a=Math.abs(yt(e).x-yt(r[r.length-1]).x),l=Math.abs(yt(e).y-yt(r[0]).y),c=Math.abs(yt(e).x-yt(r[0]).x),u=dn[t.arrowTypeStart],d=dn[t.arrowTypeEnd],h=1;if(o<d&&o>0&&a<d){let f=d+h-o;f*=s==="up"?-1:1,i-=f}if(l<u&&l>0&&c<u){let f=u+h-l;f*=s==="up"?-1:1,i+=f}return yt(e).y+i},"y")}),"getLineFunctionsWithOffset"),F0=x(({flowchart:t})=>{var i,s;const e=((i=t==null?void 0:t.subGraphTitleMargin)==null?void 0:i.top)??0,n=((s=t==null?void 0:t.subGraphTitleMargin)==null?void 0:s.bottom)??0,r=e+n;return{subGraphTitleTopMargin:e,subGraphTitleBottomMargin:n,subGraphTitleTotalMargin:r}},"getSubGraphTitleMargins"),m8=x(t=>{const{handDrawnSeed:e}=et();return{fill:t,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:t,seed:e}},"solidStateFill"),xa=x(t=>{const e=y8([...t.cssCompiledStyles||[],...t.cssStyles||[],...t.labelStyle||[]]);return{stylesMap:e,stylesArray:[...e]}},"compileStyles"),y8=x(t=>{const e=new Map;return t.forEach(n=>{const[r,i]=n.split(":");e.set(r.trim(),i==null?void 0:i.trim())}),e},"styles2Map"),C2=x(t=>t==="color"||t==="font-size"||t==="font-family"||t==="font-weight"||t==="font-style"||t==="text-decoration"||t==="text-align"||t==="text-transform"||t==="line-height"||t==="letter-spacing"||t==="word-spacing"||t==="text-shadow"||t==="text-overflow"||t==="white-space"||t==="word-wrap"||t==="word-break"||t==="overflow-wrap"||t==="hyphens","isLabelStyle"),ye=x(t=>{const{stylesArray:e}=xa(t),n=[],r=[],i=[],s=[];return e.forEach(o=>{const a=o[0];C2(a)?n.push(o.join(":")+" !important"):(r.push(o.join(":")+" !important"),a.includes("stroke")&&i.push(o.join(":")+" !important"),a==="fill"&&s.push(o.join(":")+" !important"))}),{labelStyles:n.join(";"),nodeStyles:r.join(";"),stylesArray:e,borderStyles:i,backgroundStyles:s}},"styles2String"),me=x((t,e)=>{var l;const{themeVariables:n,handDrawnSeed:r}=et(),{nodeBorder:i,mainBkg:s}=n,{stylesMap:o}=xa(t);return Object.assign({roughness:.7,fill:o.get("fill")||s,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:o.get("stroke")||i,seed:r,strokeWidth:((l=o.get("stroke-width"))==null?void 0:l.replace("px",""))||1.3,fillLineDash:[0,0],strokeLineDash:b8(o.get("stroke-dasharray"))},e)},"userNodeOverrides"),b8=x(t=>{if(!t)return[0,0];const e=t.trim().split(/\s+/).map(Number);if(e.length===1){const i=isNaN(e[0])?0:e[0];return[i,i]}const n=isNaN(e[0])?0:e[0],r=isNaN(e[1])?0:e[1];return[n,r]},"getStrokeDashArray"),Ba={},Pt={},h1;function x8(){return h1||(h1=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.BLANK_URL=Pt.relativeFirstCharacters=Pt.whitespaceEscapeCharsRegex=Pt.urlSchemeRegex=Pt.ctrlCharactersRegex=Pt.htmlCtrlEntityRegex=Pt.htmlEntitiesRegex=Pt.invalidProtocolRegex=void 0,Pt.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,Pt.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,Pt.htmlCtrlEntityRegex=/&(newline|tab);/gi,Pt.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Pt.urlSchemeRegex=/^.+(:|&colon;)/gim,Pt.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,Pt.relativeFirstCharacters=[".","/"],Pt.BLANK_URL="about:blank"),Pt}var f1;function v8(){if(f1)return Ba;f1=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.sanitizeUrl=void 0;var t=x8();function e(o){return t.relativeFirstCharacters.indexOf(o[0])>-1}function n(o){var a=o.replace(t.ctrlCharactersRegex,"");return a.replace(t.htmlEntitiesRegex,function(l,c){return String.fromCharCode(c)})}function r(o){return URL.canParse(o)}function i(o){try{return decodeURIComponent(o)}catch{return o}}function s(o){if(!o)return t.BLANK_URL;var a,l=i(o.trim());do l=n(l).replace(t.htmlCtrlEntityRegex,"").replace(t.ctrlCharactersRegex,"").replace(t.whitespaceEscapeCharsRegex,"").trim(),l=i(l),a=l.match(t.ctrlCharactersRegex)||l.match(t.htmlEntitiesRegex)||l.match(t.htmlCtrlEntityRegex)||l.match(t.whitespaceEscapeCharsRegex);while(a&&a.length>0);var c=l;if(!c)return t.BLANK_URL;if(e(c))return c;var u=c.trimStart(),d=u.match(t.urlSchemeRegex);if(!d)return c;var h=d[0].toLowerCase().trim();if(t.invalidProtocolRegex.test(h))return t.BLANK_URL;var f=u.replace(/\\/g,"/");if(h==="mailto:"||h.includes("://"))return f;if(h==="http:"||h==="https:"){if(!r(f))return t.BLANK_URL;var p=new URL(f);return p.protocol=p.protocol.toLowerCase(),p.hostname=p.hostname.toLowerCase(),p.toString()}return f}return Ba.sanitizeUrl=s,Ba}var w8=v8(),k2=typeof global=="object"&&global&&global.Object===Object&&global,C8=typeof self=="object"&&self&&self.Object===Object&&self,ei=k2||C8||Function("return this")(),jd=ei.Symbol,S2=Object.prototype,k8=S2.hasOwnProperty,S8=S2.toString,Pa=jd?jd.toStringTag:void 0;function _8(t){var e=k8.call(t,Pa),n=t[Pa];try{t[Pa]=void 0;var r=!0}catch{}var i=S8.call(t);return r&&(e?t[Pa]=n:delete t[Pa]),i}var E8=Object.prototype,T8=E8.toString;function M8(t){return T8.call(t)}var A8="[object Null]",N8="[object Undefined]",p1=jd?jd.toStringTag:void 0;function va(t){return t==null?t===void 0?N8:A8:p1&&p1 in Object(t)?_8(t):M8(t)}function lo(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var O8="[object AsyncFunction]",L8="[object Function]",R8="[object GeneratorFunction]",I8="[object Proxy]";function z0(t){if(!lo(t))return!1;var e=va(t);return e==L8||e==R8||e==O8||e==I8}var ip=ei["__core-js_shared__"],g1=(function(){var t=/[^.]+$/.exec(ip&&ip.keys&&ip.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function D8(t){return!!g1&&g1 in t}var B8=Function.prototype,P8=B8.toString;function co(t){if(t!=null){try{return P8.call(t)}catch{}try{return t+""}catch{}}return""}var $8=/[\\^$.*+?()[\]{}|]/g,F8=/^\[object .+?Constructor\]$/,z8=Function.prototype,H8=Object.prototype,W8=z8.toString,U8=H8.hasOwnProperty,j8=RegExp("^"+W8.call(U8).replace($8,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function q8(t){if(!lo(t)||D8(t))return!1;var e=z0(t)?j8:F8;return e.test(co(t))}function V8(t,e){return t==null?void 0:t[e]}function uo(t,e){var n=V8(t,e);return q8(n)?n:void 0}var jl=uo(Object,"create");function G8(){this.__data__=jl?jl(null):{},this.size=0}function K8(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Y8="__lodash_hash_undefined__",X8=Object.prototype,Z8=X8.hasOwnProperty;function J8(t){var e=this.__data__;if(jl){var n=e[t];return n===Y8?void 0:n}return Z8.call(e,t)?e[t]:void 0}var Q8=Object.prototype,e7=Q8.hasOwnProperty;function t7(t){var e=this.__data__;return jl?e[t]!==void 0:e7.call(e,t)}var n7="__lodash_hash_undefined__";function r7(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=jl&&e===void 0?n7:e,this}function Qs(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Qs.prototype.clear=G8;Qs.prototype.delete=K8;Qs.prototype.get=J8;Qs.prototype.has=t7;Qs.prototype.set=r7;function i7(){this.__data__=[],this.size=0}function $h(t,e){return t===e||t!==t&&e!==e}function Fh(t,e){for(var n=t.length;n--;)if($h(t[n][0],e))return n;return-1}var s7=Array.prototype,o7=s7.splice;function a7(t){var e=this.__data__,n=Fh(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():o7.call(e,n,1),--this.size,!0}function l7(t){var e=this.__data__,n=Fh(e,t);return n<0?void 0:e[n][1]}function c7(t){return Fh(this.__data__,t)>-1}function u7(t,e){var n=this.__data__,r=Fh(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Ei(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ei.prototype.clear=i7;Ei.prototype.delete=a7;Ei.prototype.get=l7;Ei.prototype.has=c7;Ei.prototype.set=u7;var ql=uo(ei,"Map");function d7(){this.size=0,this.__data__={hash:new Qs,map:new(ql||Ei),string:new Qs}}function h7(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function zh(t,e){var n=t.__data__;return h7(e)?n[typeof e=="string"?"string":"hash"]:n.map}function f7(t){var e=zh(this,t).delete(t);return this.size-=e?1:0,e}function p7(t){return zh(this,t).get(t)}function g7(t){return zh(this,t).has(t)}function m7(t,e){var n=zh(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function ls(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ls.prototype.clear=d7;ls.prototype.delete=f7;ls.prototype.get=p7;ls.prototype.has=g7;ls.prototype.set=m7;var y7="Expected a function";function uc(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(y7);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(uc.Cache||ls),n}uc.Cache=ls;function b7(){this.__data__=new Ei,this.size=0}function x7(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function v7(t){return this.__data__.get(t)}function w7(t){return this.__data__.has(t)}var C7=200;function k7(t,e){var n=this.__data__;if(n instanceof Ei){var r=n.__data__;if(!ql||r.length<C7-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new ls(r)}return n.set(t,e),this.size=n.size,this}function wa(t){var e=this.__data__=new Ei(t);this.size=e.size}wa.prototype.clear=b7;wa.prototype.delete=x7;wa.prototype.get=v7;wa.prototype.has=w7;wa.prototype.set=k7;var qd=(function(){try{var t=uo(Object,"defineProperty");return t({},"",{}),t}catch{}})();function H0(t,e,n){e=="__proto__"&&qd?qd(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Dg(t,e,n){(n!==void 0&&!$h(t[e],n)||n===void 0&&!(e in t))&&H0(t,e,n)}function S7(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[++i];if(n(s[l],l,s)===!1)break}return e}}var _7=S7(),_2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,m1=_2&&typeof module=="object"&&module&&!module.nodeType&&module,E7=m1&&m1.exports===_2,y1=E7?ei.Buffer:void 0,b1=y1?y1.allocUnsafe:void 0;function T7(t,e){if(e)return t.slice();var n=t.length,r=b1?b1(n):new t.constructor(n);return t.copy(r),r}var x1=ei.Uint8Array;function M7(t){var e=new t.constructor(t.byteLength);return new x1(e).set(new x1(t)),e}function A7(t,e){var n=e?M7(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function N7(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var v1=Object.create,O7=(function(){function t(){}return function(e){if(!lo(e))return{};if(v1)return v1(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}})();function E2(t,e){return function(n){return t(e(n))}}var T2=E2(Object.getPrototypeOf,Object),L7=Object.prototype;function Hh(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||L7;return t===n}function R7(t){return typeof t.constructor=="function"&&!Hh(t)?O7(T2(t)):{}}function dc(t){return t!=null&&typeof t=="object"}var I7="[object Arguments]";function w1(t){return dc(t)&&va(t)==I7}var M2=Object.prototype,D7=M2.hasOwnProperty,B7=M2.propertyIsEnumerable,Vd=w1((function(){return arguments})())?w1:function(t){return dc(t)&&D7.call(t,"callee")&&!B7.call(t,"callee")},Gd=Array.isArray,P7=9007199254740991;function A2(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=P7}function Wh(t){return t!=null&&A2(t.length)&&!z0(t)}function $7(t){return dc(t)&&Wh(t)}function F7(){return!1}var N2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,C1=N2&&typeof module=="object"&&module&&!module.nodeType&&module,z7=C1&&C1.exports===N2,k1=z7?ei.Buffer:void 0,H7=k1?k1.isBuffer:void 0,W0=H7||F7,W7="[object Object]",U7=Function.prototype,j7=Object.prototype,O2=U7.toString,q7=j7.hasOwnProperty,V7=O2.call(Object);function G7(t){if(!dc(t)||va(t)!=W7)return!1;var e=T2(t);if(e===null)return!0;var n=q7.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&O2.call(n)==V7}var K7="[object Arguments]",Y7="[object Array]",X7="[object Boolean]",Z7="[object Date]",J7="[object Error]",Q7="[object Function]",eW="[object Map]",tW="[object Number]",nW="[object Object]",rW="[object RegExp]",iW="[object Set]",sW="[object String]",oW="[object WeakMap]",aW="[object ArrayBuffer]",lW="[object DataView]",cW="[object Float32Array]",uW="[object Float64Array]",dW="[object Int8Array]",hW="[object Int16Array]",fW="[object Int32Array]",pW="[object Uint8Array]",gW="[object Uint8ClampedArray]",mW="[object Uint16Array]",yW="[object Uint32Array]",gt={};gt[cW]=gt[uW]=gt[dW]=gt[hW]=gt[fW]=gt[pW]=gt[gW]=gt[mW]=gt[yW]=!0;gt[K7]=gt[Y7]=gt[aW]=gt[X7]=gt[lW]=gt[Z7]=gt[J7]=gt[Q7]=gt[eW]=gt[tW]=gt[nW]=gt[rW]=gt[iW]=gt[sW]=gt[oW]=!1;function bW(t){return dc(t)&&A2(t.length)&&!!gt[va(t)]}function xW(t){return function(e){return t(e)}}var L2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,yl=L2&&typeof module=="object"&&module&&!module.nodeType&&module,vW=yl&&yl.exports===L2,sp=vW&&k2.process,S1=(function(){try{var t=yl&&yl.require&&yl.require("util").types;return t||sp&&sp.binding&&sp.binding("util")}catch{}})(),_1=S1&&S1.isTypedArray,U0=_1?xW(_1):bW;function Bg(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var wW=Object.prototype,CW=wW.hasOwnProperty;function kW(t,e,n){var r=t[e];(!(CW.call(t,e)&&$h(r,n))||n===void 0&&!(e in t))&&H0(t,e,n)}function SW(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=void 0;l===void 0&&(l=t[a]),i?H0(n,a,l):kW(n,a,l)}return n}function _W(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var EW=9007199254740991,TW=/^(?:0|[1-9]\d*)$/;function R2(t,e){var n=typeof t;return e=e??EW,!!e&&(n=="number"||n!="symbol"&&TW.test(t))&&t>-1&&t%1==0&&t<e}var MW=Object.prototype,AW=MW.hasOwnProperty;function NW(t,e){var n=Gd(t),r=!n&&Vd(t),i=!n&&!r&&W0(t),s=!n&&!r&&!i&&U0(t),o=n||r||i||s,a=o?_W(t.length,String):[],l=a.length;for(var c in t)(e||AW.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||R2(c,l)))&&a.push(c);return a}function OW(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var LW=Object.prototype,RW=LW.hasOwnProperty;function IW(t){if(!lo(t))return OW(t);var e=Hh(t),n=[];for(var r in t)r=="constructor"&&(e||!RW.call(t,r))||n.push(r);return n}function I2(t){return Wh(t)?NW(t,!0):IW(t)}function DW(t){return SW(t,I2(t))}function BW(t,e,n,r,i,s,o){var a=Bg(t,n),l=Bg(e,n),c=o.get(l);if(c){Dg(t,n,c);return}var u=s?s(a,l,n+"",t,e,o):void 0,d=u===void 0;if(d){var h=Gd(l),f=!h&&W0(l),p=!h&&!f&&U0(l);u=l,h||f||p?Gd(a)?u=a:$7(a)?u=N7(a):f?(d=!1,u=T7(l,!0)):p?(d=!1,u=A7(l,!0)):u=[]:G7(l)||Vd(l)?(u=a,Vd(a)?u=DW(a):(!lo(a)||z0(a))&&(u=R7(l))):d=!1}d&&(o.set(l,u),i(u,l,r,s,o),o.delete(l)),Dg(t,n,u)}function D2(t,e,n,r,i){t!==e&&_7(e,function(s,o){if(i||(i=new wa),lo(s))BW(t,e,o,n,D2,r,i);else{var a=r?r(Bg(t,o),s,o+"",t,e,i):void 0;a===void 0&&(a=s),Dg(t,o,a)}},I2)}function B2(t){return t}function PW(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var E1=Math.max;function $W(t,e,n){return e=E1(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=E1(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),PW(t,this,a)}}function FW(t){return function(){return t}}var zW=qd?function(t,e){return qd(t,"toString",{configurable:!0,enumerable:!1,value:FW(e),writable:!0})}:B2,HW=800,WW=16,UW=Date.now;function jW(t){var e=0,n=0;return function(){var r=UW(),i=WW-(r-n);if(n=r,i>0){if(++e>=HW)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var qW=jW(zW);function VW(t,e){return qW($W(t,e,B2),t+"")}function GW(t,e,n){if(!lo(n))return!1;var r=typeof e;return(r=="number"?Wh(n)&&R2(e,n.length):r=="string"&&e in n)?$h(n[e],t):!1}function KW(t){return VW(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&GW(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,s)}return e})}var YW=KW(function(t,e,n){D2(t,e,n)}),XW="",ZW={curveBasis:wu,curveBasisClosed:QH,curveBasisOpen:e9,curveBumpX:w_,curveBumpY:C_,curveBundle:t9,curveCardinalClosed:n9,curveCardinalOpen:r9,curveCardinal:E_,curveCatmullRomClosed:i9,curveCatmullRomOpen:s9,curveCatmullRom:M_,curveLinear:Id,curveLinearClosed:o9,curveMonotoneX:I_,curveMonotoneY:D_,curveNatural:P_,curveStep:$_,curveStepAfter:z_,curveStepBefore:F_},JW=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,QW=x(function(t,e){const n=P2(t,/(?:init\b)|(?:initialize\b)/);let r={};if(Array.isArray(n)){const o=n.map(a=>a.args);kd(o),r=$t(r,[...o])}else r=n.args;if(!r)return;let i=f0(t,e);const s="config";return r[s]!==void 0&&(i==="flowchart-v2"&&(i="flowchart"),r[i]=r[s],delete r[s]),r},"detectInit"),P2=x(function(t,e=null){var n,r;try{const i=new RegExp(`[%]{2}(?![{]${JW.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(i,"").replace(/'/gm,'"'),G.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${t}`);let s;const o=[];for(;(s=gl.exec(t))!==null;)if(s.index===gl.lastIndex&&gl.lastIndex++,s&&!e||e&&((n=s[1])!=null&&n.match(e))||e&&((r=s[2])!=null&&r.match(e))){const a=s[1]?s[1]:s[2],l=s[3]?s[3].trim():s[4]?JSON.parse(s[4].trim()):null;o.push({type:a,args:l})}return o.length===0?{type:t,args:null}:o.length===1?o[0]:o}catch(i){return G.error(`ERROR: ${i.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}},"detectDirective"),eU=x(function(t){return t.replace(gl,"")},"removeDirectives"),tU=x(function(t,e){for(const[n,r]of e.entries())if(r.match(t))return n;return-1},"isSubstringInArray");function j0(t,e){if(!t)return e;const n=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return ZW[n]??e}x(j0,"interpolateToCurve");function $2(t,e){const n=t.trim();if(n)return e.securityLevel!=="loose"?w8.sanitizeUrl(n):n}x($2,"formatUrl");var nU=x((t,...e)=>{const n=t.split("."),r=n.length-1,i=n[r];let s=window;for(let o=0;o<r;o++)if(s=s[n[o]],!s){G.error(`Function name: ${t} not found in window`);return}s[i](...e)},"runFunc");function q0(t,e){return!t||!e?0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}x(q0,"distance");function F2(t){let e,n=0;t.forEach(i=>{n+=q0(i,e),e=i});const r=n/2;return V0(t,r)}x(F2,"traverseEdge");function z2(t){return t.length===1?t[0]:F2(t)}x(z2,"calcLabelPosition");var T1=x((t,e=2)=>{const n=Math.pow(10,e);return Math.round(t*n)/n},"roundNumber"),V0=x((t,e)=>{let n,r=e;for(const i of t){if(n){const s=q0(i,n);if(s===0)return n;if(s<r)r-=s;else{const o=r/s;if(o<=0)return n;if(o>=1)return{x:i.x,y:i.y};if(o>0&&o<1)return{x:T1((1-o)*n.x+o*i.x,5),y:T1((1-o)*n.y+o*i.y,5)}}}n=i}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),rU=x((t,e,n)=>{G.info(`our points ${JSON.stringify(e)}`),e[0]!==n&&(e=e.reverse());const i=V0(e,25),s=t?10:5,o=Math.atan2(e[0].y-i.y,e[0].x-i.x),a={x:0,y:0};return a.x=Math.sin(o)*s+(e[0].x+i.x)/2,a.y=-Math.cos(o)*s+(e[0].y+i.y)/2,a},"calcCardinalityPosition");function H2(t,e,n){const r=structuredClone(n);G.info("our points",r),e!=="start_left"&&e!=="start_right"&&r.reverse();const i=25+t,s=V0(r,i),o=10+t*.5,a=Math.atan2(r[0].y-s.y,r[0].x-s.x),l={x:0,y:0};return e==="start_left"?(l.x=Math.sin(a+Math.PI)*o+(r[0].x+s.x)/2,l.y=-Math.cos(a+Math.PI)*o+(r[0].y+s.y)/2):e==="end_right"?(l.x=Math.sin(a-Math.PI)*o+(r[0].x+s.x)/2-5,l.y=-Math.cos(a-Math.PI)*o+(r[0].y+s.y)/2-5):e==="end_left"?(l.x=Math.sin(a)*o+(r[0].x+s.x)/2-5,l.y=-Math.cos(a)*o+(r[0].y+s.y)/2-5):(l.x=Math.sin(a)*o+(r[0].x+s.x)/2,l.y=-Math.cos(a)*o+(r[0].y+s.y)/2),l}x(H2,"calcTerminalLabelPosition");function W2(t){let e="",n="";for(const r of t)r!==void 0&&(r.startsWith("color:")||r.startsWith("text-align:")?n=n+r+";":e=e+r+";");return{style:e,labelStyle:n}}x(W2,"getStylesFromArray");var M1=0,iU=x(()=>(M1++,"id-"+Math.random().toString(36).substr(2,12)+"-"+M1),"generateId");function U2(t){let e="";const n="0123456789abcdef",r=n.length;for(let i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*r));return e}x(U2,"makeRandomHex");var sU=x(t=>U2(t.length),"random"),oU=x(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),aU=x(function(t,e){const n=e.text.replace(ba.lineBreakRegex," "),[,r]=Uh(e.fontSize),i=t.append("text");i.attr("x",e.x),i.attr("y",e.y),i.style("text-anchor",e.anchor),i.style("font-family",e.fontFamily),i.style("font-size",r),i.style("font-weight",e.fontWeight),i.attr("fill",e.fill),e.class!==void 0&&i.attr("class",e.class);const s=i.append("tspan");return s.attr("x",e.x+e.textMargin*2),s.attr("fill",e.fill),s.text(n),i},"drawSimpleText"),lU=uc((t,e,n)=>{if(!t||(n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},n),ba.lineBreakRegex.test(t)))return t;const r=t.split(" ").filter(Boolean),i=[];let s="";return r.forEach((o,a)=>{const l=wi(`${o} `,n),c=wi(s,n);if(l>e){const{hyphenatedStrings:h,remainingWord:f}=cU(o,e,"-",n);i.push(s,...h),s=f}else c+l>=e?(i.push(s),s=o):s=[s,o].filter(Boolean).join(" ");a+1===r.length&&i.push(s)}),i.filter(o=>o!=="").join(n.joinWith)},(t,e,n)=>`${t}${e}${n.fontSize}${n.fontWeight}${n.fontFamily}${n.joinWith}`),cU=uc((t,e,n="-",r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},r);const i=[...t],s=[];let o="";return i.forEach((a,l)=>{const c=`${o}${a}`;if(wi(c,r)>=e){const d=l+1,h=i.length===d,f=`${c}${n}`;s.push(h?c:f),o=""}else o=c}),{hyphenatedStrings:s,remainingWord:o}},(t,e,n="-",r)=>`${t}${e}${n}${r.fontSize}${r.fontWeight}${r.fontFamily}`);function j2(t,e){return G0(t,e).height}x(j2,"calculateTextHeight");function wi(t,e){return G0(t,e).width}x(wi,"calculateTextWidth");var G0=uc((t,e)=>{const{fontSize:n=12,fontFamily:r="Arial",fontWeight:i=400}=e;if(!t)return{width:0,height:0};const[,s]=Uh(n),o=["sans-serif",r],a=t.split(ba.lineBreakRegex),l=[],c=Ve("body");if(!c.remove)return{width:0,height:0,lineHeight:0};const u=c.append("svg");for(const h of o){let f=0;const p={width:0,height:0,lineHeight:0};for(const g of a){const m=oU();m.text=g||XW;const y=aU(u,m).style("font-size",s).style("font-weight",i).style("font-family",h),b=(y._groups||y)[0][0].getBBox();if(b.width===0&&b.height===0)throw new Error("svg element not in render tree");p.width=Math.round(Math.max(p.width,b.width)),f=Math.round(b.height),p.height+=f,p.lineHeight=Math.round(Math.max(p.lineHeight,f))}l.push(p)}u.remove();const d=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[d]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`),Zo,uU=(Zo=class{constructor(e=!1,n){this.count=0,this.count=n?n.length:0,this.next=e?()=>this.count++:()=>Date.now()}},x(Zo,"InitIDGenerator"),Zo),Yc,dU=x(function(t){return Yc=Yc||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Yc.innerHTML=t,unescape(Yc.textContent)},"entityDecode");function K0(t){return"str"in t}x(K0,"isDetailedError");var hU=x((t,e,n,r)=>{var s;if(!r)return;const i=(s=t.node())==null?void 0:s.getBBox();i&&t.append("text").text(r).attr("text-anchor","middle").attr("x",i.x+i.width/2).attr("y",-n).attr("class",e)},"insertTitle"),Uh=x(t=>{if(typeof t=="number")return[t,t+"px"];const e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]},"parseFontSize");function Y0(t,e){return YW({},t,e)}x(Y0,"cleanAndMerge");var kr={assignWithDepth:$t,wrapLabel:lU,calculateTextHeight:j2,calculateTextWidth:wi,calculateTextDimensions:G0,cleanAndMerge:Y0,detectInit:QW,detectDirective:P2,isSubstringInArray:tU,interpolateToCurve:j0,calcLabelPosition:z2,calcCardinalityPosition:rU,calcTerminalLabelPosition:H2,formatUrl:$2,getStylesFromArray:W2,generateId:iU,random:sU,runFunc:nU,entityDecode:dU,insertTitle:hU,isLabelCoordinateInPath:q2,parseFontSize:Uh,InitIDGenerator:uU},fU=x(function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,function(n){return n.substring(0,n.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(n){return n.substring(0,n.length-1)}),e=e.replace(/#\w+;/g,function(n){const r=n.substring(1,n.length-1);return/^\+?\d+$/.test(r)?""+r+"":""+r+""}),e},"encodeEntities"),ho=x(function(t){return t.replace(//g,"&#").replace(//g,"&").replace(//g,";")},"decodeEntities"),Jee=x((t,e,{counter:n=0,prefix:r,suffix:i},s)=>s||`${r?`${r}_`:""}${t}_${e}_${n}${i?`_${i}`:""}`,"getEdgeId");function mn(t){return t??null}x(mn,"handleUndefinedAttr");function q2(t,e){const n=Math.round(t.x),r=Math.round(t.y),i=e.replace(/(\d+\.\d+)/g,s=>Math.round(parseFloat(s)).toString());return i.includes(n.toString())||i.includes(r.toString())}x(q2,"isLabelCoordinateInPath");const pU=Object.freeze({left:0,top:0,width:16,height:16}),Kd=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),V2=Object.freeze({...pU,...Kd}),gU=Object.freeze({...V2,body:"",hidden:!1}),mU=Object.freeze({width:null,height:null}),yU=Object.freeze({...mU,...Kd}),bU=(t,e,n,r="")=>{const i=t.split(":");if(t.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;r=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const a=i.pop(),l=i.pop(),c={provider:i.length>0?i[0]:r,prefix:l,name:a};return op(c)?c:null}const s=i[0],o=s.split("-");if(o.length>1){const a={provider:r,prefix:o.shift(),name:o.join("-")};return op(a)?a:null}if(n&&r===""){const a={provider:r,prefix:"",name:s};return op(a,n)?a:null}return null},op=(t,e)=>t?!!((e&&t.prefix===""||t.prefix)&&t.name):!1;function xU(t,e){const n={};!t.hFlip!=!e.hFlip&&(n.hFlip=!0),!t.vFlip!=!e.vFlip&&(n.vFlip=!0);const r=((t.rotate||0)+(e.rotate||0))%4;return r&&(n.rotate=r),n}function A1(t,e){const n=xU(t,e);for(const r in gU)r in Kd?r in t&&!(r in n)&&(n[r]=Kd[r]):r in e?n[r]=e[r]:r in t&&(n[r]=t[r]);return n}function vU(t,e){const n=t.icons,r=t.aliases||Object.create(null),i=Object.create(null);function s(o){if(n[o])return i[o]=[];if(!(o in i)){i[o]=null;const a=r[o]&&r[o].parent,l=a&&s(a);l&&(i[o]=[a].concat(l))}return i[o]}return(e||Object.keys(n).concat(Object.keys(r))).forEach(s),i}function N1(t,e,n){const r=t.icons,i=t.aliases||Object.create(null);let s={};function o(a){s=A1(r[a]||i[a],s)}return o(e),n.forEach(o),A1(t,s)}function wU(t,e){if(t.icons[e])return N1(t,e,[]);const n=vU(t,[e])[e];return n?N1(t,e,n):null}const CU=/(-?[0-9.]*[0-9]+[0-9.]*)/g,kU=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function O1(t,e,n){if(e===1)return t;if(n=n||100,typeof t=="number")return Math.ceil(t*e*n)/n;if(typeof t!="string")return t;const r=t.split(CU);if(r===null||!r.length)return t;const i=[];let s=r.shift(),o=kU.test(s);for(;;){if(o){const a=parseFloat(s);isNaN(a)?i.push(s):i.push(Math.ceil(a*e*n)/n)}else i.push(s);if(s=r.shift(),s===void 0)return i.join("");o=!o}}function SU(t,e="defs"){let n="";const r=t.indexOf("<"+e);for(;r>=0;){const i=t.indexOf(">",r),s=t.indexOf("</"+e);if(i===-1||s===-1)break;const o=t.indexOf(">",s);if(o===-1)break;n+=t.slice(i+1,s).trim(),t=t.slice(0,r).trim()+t.slice(o+1)}return{defs:n,content:t}}function _U(t,e){return t?"<defs>"+t+"</defs>"+e:e}function EU(t,e,n){const r=SU(t);return _U(r.defs,e+r.content+n)}const TU=t=>t==="unset"||t==="undefined"||t==="none";function MU(t,e){const n={...V2,...t},r={...yU,...e},i={left:n.left,top:n.top,width:n.width,height:n.height};let s=n.body;[n,r].forEach(g=>{const m=[],y=g.hFlip,b=g.vFlip;let C=g.rotate;y?b?C+=2:(m.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),m.push("scale(-1 1)"),i.top=i.left=0):b&&(m.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),m.push("scale(1 -1)"),i.top=i.left=0);let v;switch(C<0&&(C-=Math.floor(C/4)*4),C=C%4,C){case 1:v=i.height/2+i.top,m.unshift("rotate(90 "+v.toString()+" "+v.toString()+")");break;case 2:m.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:v=i.width/2+i.left,m.unshift("rotate(-90 "+v.toString()+" "+v.toString()+")");break}C%2===1&&(i.left!==i.top&&(v=i.left,i.left=i.top,i.top=v),i.width!==i.height&&(v=i.width,i.width=i.height,i.height=v)),m.length&&(s=EU(s,'<g transform="'+m.join(" ")+'">',"</g>"))});const o=r.width,a=r.height,l=i.width,c=i.height;let u,d;o===null?(d=a===null?"1em":a==="auto"?c:a,u=O1(d,l/c)):(u=o==="auto"?l:o,d=a===null?O1(u,c/l):a==="auto"?c:a);const h={},f=(g,m)=>{TU(m)||(h[g]=m.toString())};f("width",u),f("height",d);const p=[i.left,i.top,l,c];return h.viewBox=p.join(" "),{attributes:h,viewBox:p,body:s}}const AU=/\sid="(\S+)"/g,L1=new Map;function NU(t){t=t.replace(/[0-9]+$/,"")||"a";const e=L1.get(t)||0;return L1.set(t,e+1),e?`${t}${e}`:t}function OU(t){const e=[];let n;for(;n=AU.exec(t);)e.push(n[1]);if(!e.length)return t;const r="suffix"+(Math.random()*16777216|Date.now()).toString(16);return e.forEach(i=>{const s=NU(i),o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+o+')([")]|\\.[a-z])',"g"),"$1"+s+r+"$3")}),t=t.replace(new RegExp(r,"g"),""),t}function LU(t,e){let n=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in e)n+=" "+r+'="'+e[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+t+"</svg>"}function X0(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var fo=X0();function G2(t){fo=t}var bl={exec:()=>null};function Ke(t,e=""){let n=typeof t=="string"?t:t.source,r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(Sn.caret,"$1"),n=n.replace(i,o),r},getRegex:()=>new RegExp(n,e)};return r}var RU=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Sn={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},IU=/^(?:[ \t]*(?:\n|$))+/,DU=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,BU=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hc=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,PU=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Z0=/(?:[*+-]|\d{1,9}[.)])/,K2=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Y2=Ke(K2).replace(/bull/g,Z0).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),$U=Ke(K2).replace(/bull/g,Z0).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),J0=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,FU=/^[^\n]+/,Q0=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,zU=Ke(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Q0).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),HU=Ke(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Z0).getRegex(),jh="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ey=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,WU=Ke("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",ey).replace("tag",jh).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),X2=Ke(J0).replace("hr",hc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",jh).getRegex(),UU=Ke(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",X2).getRegex(),ty={blockquote:UU,code:DU,def:zU,fences:BU,heading:PU,hr:hc,html:WU,lheading:Y2,list:HU,newline:IU,paragraph:X2,table:bl,text:FU},R1=Ke("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",hc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",jh).getRegex(),jU={...ty,lheading:$U,table:R1,paragraph:Ke(J0).replace("hr",hc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",R1).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",jh).getRegex()},qU={...ty,html:Ke(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ey).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:bl,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ke(J0).replace("hr",hc).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Y2).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},VU=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,GU=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Z2=/^( {2,}|\\)\n(?!\s*$)/,KU=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,qh=/[\p{P}\p{S}]/u,ny=/[\s\p{P}\p{S}]/u,J2=/[^\s\p{P}\p{S}]/u,YU=Ke(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,ny).getRegex(),Q2=/(?!~)[\p{P}\p{S}]/u,XU=/(?!~)[\s\p{P}\p{S}]/u,ZU=/(?:[^\s\p{P}\p{S}]|~)/u,JU=Ke(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",RU?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),eT=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,QU=Ke(eT,"u").replace(/punct/g,qh).getRegex(),ej=Ke(eT,"u").replace(/punct/g,Q2).getRegex(),tT="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",tj=Ke(tT,"gu").replace(/notPunctSpace/g,J2).replace(/punctSpace/g,ny).replace(/punct/g,qh).getRegex(),nj=Ke(tT,"gu").replace(/notPunctSpace/g,ZU).replace(/punctSpace/g,XU).replace(/punct/g,Q2).getRegex(),rj=Ke("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,J2).replace(/punctSpace/g,ny).replace(/punct/g,qh).getRegex(),ij=Ke(/\\(punct)/,"gu").replace(/punct/g,qh).getRegex(),sj=Ke(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),oj=Ke(ey).replace("(?:-->|$)","-->").getRegex(),aj=Ke("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",oj).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Yd=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,lj=Ke(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Yd).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),nT=Ke(/^!?\[(label)\]\[(ref)\]/).replace("label",Yd).replace("ref",Q0).getRegex(),rT=Ke(/^!?\[(ref)\](?:\[\])?/).replace("ref",Q0).getRegex(),cj=Ke("reflink|nolink(?!\\()","g").replace("reflink",nT).replace("nolink",rT).getRegex(),I1=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,ry={_backpedal:bl,anyPunctuation:ij,autolink:sj,blockSkip:JU,br:Z2,code:GU,del:bl,emStrongLDelim:QU,emStrongRDelimAst:tj,emStrongRDelimUnd:rj,escape:VU,link:lj,nolink:rT,punctuation:YU,reflink:nT,reflinkSearch:cj,tag:aj,text:KU,url:bl},uj={...ry,link:Ke(/^!?\[(label)\]\((.*?)\)/).replace("label",Yd).getRegex(),reflink:Ke(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Yd).getRegex()},Pg={...ry,emStrongRDelimAst:nj,emStrongLDelim:ej,url:Ke(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",I1).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Ke(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",I1).getRegex()},dj={...Pg,br:Ke(Z2).replace("{2,}","*").getRegex(),text:Ke(Pg.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Xc={normal:ty,gfm:jU,pedantic:qU},$a={normal:ry,gfm:Pg,breaks:dj,pedantic:uj},hj={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},D1=t=>hj[t];function Pr(t,e){if(e){if(Sn.escapeTest.test(t))return t.replace(Sn.escapeReplace,D1)}else if(Sn.escapeTestNoEncode.test(t))return t.replace(Sn.escapeReplaceNoEncode,D1);return t}function B1(t){try{t=encodeURI(t).replace(Sn.percentDecode,"%")}catch{return null}return t}function P1(t,e){var s;let n=t.replace(Sn.findPipe,(o,a,l)=>{let c=!1,u=a;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),r=n.split(Sn.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!((s=r.at(-1))!=null&&s.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(Sn.slashPipe,"|");return r}function Fa(t,e,n){let r=t.length;if(r===0)return"";let i=0;for(;i<r&&t.charAt(r-i-1)===e;)i++;return t.slice(0,r-i)}function fj(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function $1(t,e,n,r,i){let s=e.href,o=e.title||null,a=t[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function pj(t,e,n){let r=t.match(n.other.indentCodeCompensation);if(r===null)return e;let i=r[1];return e.split(`
`).map(s=>{let o=s.match(n.other.beginningSpace);if(o===null)return s;let[a]=o;return a.length>=i.length?s.slice(i.length):s}).join(`
`)}var Xd=class{constructor(e){lt(this,"options");lt(this,"rules");lt(this,"lexer");this.options=e||fo}space(e){let n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){let n=this.rules.block.code.exec(e);if(n){let r=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Fa(r,`
`)}}}fences(e){let n=this.rules.block.fences.exec(e);if(n){let r=n[0],i=pj(r,n[3]||"",this.rules);return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:i}}}heading(e){let n=this.rules.block.heading.exec(e);if(n){let r=n[2].trim();if(this.rules.other.endingHash.test(r)){let i=Fa(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:Fa(n[0],`
`)}}blockquote(e){let n=this.rules.block.blockquote.exec(e);if(n){let r=Fa(n[0],`
`).split(`
`),i="",s="",o=[];for(;r.length>0;){let a=!1,l=[],c;for(c=0;c<r.length;c++)if(this.rules.other.blockquoteStart.test(r[c]))l.push(r[c]),a=!0;else if(!a)l.push(r[c]);else break;r=r.slice(c);let u=l.join(`
`),d=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${u}`:u,s=s?`${s}
${d}`:d;let h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,o,!0),this.lexer.state.top=h,r.length===0)break;let f=o.at(-1);if((f==null?void 0:f.type)==="code")break;if((f==null?void 0:f.type)==="blockquote"){let p=f,g=p.raw+`
`+r.join(`
`),m=this.blockquote(g);o[o.length-1]=m,i=i.substring(0,i.length-p.raw.length)+m.raw,s=s.substring(0,s.length-p.text.length)+m.text;break}else if((f==null?void 0:f.type)==="list"){let p=f,g=p.raw+`
`+r.join(`
`),m=this.list(g);o[o.length-1]=m,i=i.substring(0,i.length-f.raw.length)+m.raw,s=s.substring(0,s.length-p.raw.length)+m.raw,r=g.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:o,text:s}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r=n[1].trim(),i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let o=this.rules.other.listItemRegex(r),a=!1;for(;e;){let c=!1,u="",d="";if(!(n=o.exec(e))||this.rules.block.hr.test(e))break;u=n[0],e=e.substring(u.length);let h=n[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,b=>" ".repeat(3*b.length)),f=e.split(`
`,1)[0],p=!h.trim(),g=0;if(this.options.pedantic?(g=2,d=h.trimStart()):p?g=n[1].length+1:(g=n[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,d=h.slice(g),g+=n[1].length),p&&this.rules.other.blankLine.test(f)&&(u+=f+`
`,e=e.substring(f.length+1),c=!0),!c){let b=this.rules.other.nextBulletRegex(g),C=this.rules.other.hrRegex(g),v=this.rules.other.fencesBeginRegex(g),k=this.rules.other.headingBeginRegex(g),w=this.rules.other.htmlBeginRegex(g);for(;e;){let S=e.split(`
`,1)[0],E;if(f=S,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),E=f):E=f.replace(this.rules.other.tabCharGlobal,"    "),v.test(f)||k.test(f)||w.test(f)||b.test(f)||C.test(f))break;if(E.search(this.rules.other.nonSpaceChar)>=g||!f.trim())d+=`
`+E.slice(g);else{if(p||h.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||v.test(h)||k.test(h)||C.test(h))break;d+=`
`+f}!p&&!f.trim()&&(p=!0),u+=S+`
`,e=e.substring(S.length+1),h=E.slice(g)}}s.loose||(a?s.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(a=!0));let m=null,y;this.options.gfm&&(m=this.rules.other.listIsTask.exec(d),m&&(y=m[0]!=="[ ] ",d=d.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:u,task:!!m,checked:y,loose:!1,text:d,tokens:[]}),s.raw+=u}let l=s.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let c=0;c<s.items.length;c++)if(this.lexer.state.top=!1,s.items[c].tokens=this.lexer.blockTokens(s.items[c].text,[]),!s.loose){let u=s.items[c].tokens.filter(h=>h.type==="space"),d=u.length>0&&u.some(h=>this.rules.other.anyLine.test(h.raw));s.loose=d}if(s.loose)for(let c=0;c<s.items.length;c++)s.items[c].loose=!0;return s}}html(e){let n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){let n=this.rules.block.def.exec(e);if(n){let r=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:i,title:s}}}table(e){var a;let n=this.rules.block.table.exec(e);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;let r=P1(n[1]),i=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=(a=n[3])!=null&&a.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let l of i)this.rules.other.tableAlignRight.test(l)?o.align.push("right"):this.rules.other.tableAlignCenter.test(l)?o.align.push("center"):this.rules.other.tableAlignLeft.test(l)?o.align.push("left"):o.align.push(null);for(let l=0;l<r.length;l++)o.header.push({text:r[l],tokens:this.lexer.inline(r[l]),header:!0,align:o.align[l]});for(let l of s)o.rows.push(P1(l,o.header.length).map((c,u)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:o.align[u]})));return o}}lheading(e){let n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){let n=this.rules.block.paragraph.exec(e);if(n){let r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){let n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(e){let n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){let n=this.rules.inline.link.exec(e);if(n){let r=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let o=Fa(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{let o=fj(n[2],"()");if(o===-2)return;if(o>-1){let a=(n[0].indexOf("!")===0?5:4)+n[1].length+o;n[2]=n[2].substring(0,o),n[0]=n[0].substring(0,a).trim(),n[3]=""}}let i=n[2],s="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(i);o&&(i=o[1],s=o[3])}else s=n[3]?n[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),$1(n,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer,this.rules)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=n[i.toLowerCase()];if(!s){let o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return $1(r,s,r[0],this.lexer,this.rules)}}emStrong(e,n,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!r||this.rules.inline.punctuation.exec(r))){let s=[...i[0]].length-1,o,a,l=s,c=0,u=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,n=n.slice(-1*e.length+s);(i=u.exec(n))!=null;){if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!o)continue;if(a=[...o].length,i[3]||i[4]){l+=a;continue}else if((i[5]||i[6])&&s%3&&!((s+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);let d=[...i[0]][0].length,h=e.slice(0,s+i.index+d+a);if(Math.min(s,a)%2){let p=h.slice(1,-1);return{type:"em",raw:h,text:p,tokens:this.lexer.inlineTokens(p)}}let f=h.slice(2,-2);return{type:"strong",raw:h,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(e){let n=this.rules.inline.code.exec(e);if(n){let r=n[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(r),s=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&s&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:n[0],text:r}}}br(e){let n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){let n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){let n=this.rules.inline.autolink.exec(e);if(n){let r,i;return n[2]==="@"?(r=n[1],i="mailto:"+r):(r=n[1],i=r),{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){var r;let n;if(n=this.rules.inline.url.exec(e)){let i,s;if(n[2]==="@")i=n[0],s="mailto:"+i;else{let o;do o=n[0],n[0]=((r=this.rules.inline._backpedal.exec(n[0]))==null?void 0:r[0])??"";while(o!==n[0]);i=n[0],n[1]==="www."?s="http://"+n[0]:s=n[0]}return{type:"link",raw:n[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){let n=this.rules.inline.text.exec(e);if(n){let r=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:r}}}},xr=class $g{constructor(e){lt(this,"tokens");lt(this,"options");lt(this,"state");lt(this,"tokenizer");lt(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||fo,this.options.tokenizer=this.options.tokenizer||new Xd,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:Sn,block:Xc.normal,inline:$a.normal};this.options.pedantic?(n.block=Xc.pedantic,n.inline=$a.pedantic):this.options.gfm&&(n.block=Xc.gfm,this.options.breaks?n.inline=$a.breaks:n.inline=$a.gfm),this.tokenizer.rules=n}static get rules(){return{block:Xc,inline:$a}}static lex(e,n){return new $g(n).lex(e)}static lexInline(e,n){return new $g(n).inlineTokens(e)}lex(e){e=e.replace(Sn.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){var i,s,o;for(this.options.pedantic&&(e=e.replace(Sn.tabCharGlobal,"    ").replace(Sn.spaceLine,""));e;){let a;if((s=(i=this.options.extensions)==null?void 0:i.block)!=null&&s.some(c=>(a=c.call({lexer:this},e,n))?(e=e.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);let c=n.at(-1);a.raw.length===1&&c!==void 0?c.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title},n.push(a));continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),n.push(a);continue}let l=e;if((o=this.options.extensions)!=null&&o.startBlock){let c=1/0,u=e.slice(1),d;this.options.extensions.startBlock.forEach(h=>{d=h.call({lexer:this},u),typeof d=="number"&&d>=0&&(c=Math.min(c,d))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){let c=n.at(-1);r&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a),r=l.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var l,c,u,d,h;let r=e,i=null;if(this.tokens.links){let f=Object.keys(this.tokens.links);if(f.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)f.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s;for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)s=i[2]?i[2].length:0,r=r.slice(0,i.index+s)+"["+"a".repeat(i[0].length-s-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=((c=(l=this.options.hooks)==null?void 0:l.emStrongMask)==null?void 0:c.call({lexer:this},r))??r;let o=!1,a="";for(;e;){o||(a=""),o=!1;let f;if((d=(u=this.options.extensions)==null?void 0:u.inline)!=null&&d.some(g=>(f=g.call({lexer:this},e,n))?(e=e.substring(f.raw.length),n.push(f),!0):!1))continue;if(f=this.tokenizer.escape(e)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.tag(e)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.link(e)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(f.raw.length);let g=n.at(-1);f.type==="text"&&(g==null?void 0:g.type)==="text"?(g.raw+=f.raw,g.text+=f.text):n.push(f);continue}if(f=this.tokenizer.emStrong(e,r,a)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.codespan(e)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.br(e)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.del(e)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.autolink(e)){e=e.substring(f.raw.length),n.push(f);continue}if(!this.state.inLink&&(f=this.tokenizer.url(e))){e=e.substring(f.raw.length),n.push(f);continue}let p=e;if((h=this.options.extensions)!=null&&h.startInline){let g=1/0,m=e.slice(1),y;this.options.extensions.startInline.forEach(b=>{y=b.call({lexer:this},m),typeof y=="number"&&y>=0&&(g=Math.min(g,y))}),g<1/0&&g>=0&&(p=e.substring(0,g+1))}if(f=this.tokenizer.inlineText(p)){e=e.substring(f.raw.length),f.raw.slice(-1)!=="_"&&(a=f.raw.slice(-1)),o=!0;let g=n.at(-1);(g==null?void 0:g.type)==="text"?(g.raw+=f.raw,g.text+=f.text):n.push(f);continue}if(e){let g="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(g);break}else throw new Error(g)}}return n}},Zd=class{constructor(e){lt(this,"options");lt(this,"parser");this.options=e||fo}space(e){return""}code({text:e,lang:n,escaped:r}){var o;let i=(o=(n||"").match(Sn.notSpaceStart))==null?void 0:o[0],s=e.replace(Sn.endingNewline,"")+`
`;return i?'<pre><code class="language-'+Pr(i)+'">'+(r?s:Pr(s,!0))+`</code></pre>
`:"<pre><code>"+(r?s:Pr(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:n}){return`<h${n}>${this.parser.parseInline(e)}</h${n}>
`}hr(e){return`<hr>
`}list(e){let n=e.ordered,r=e.start,i="";for(let a=0;a<e.items.length;a++){let l=e.items[a];i+=this.listitem(l)}let s=n?"ol":"ul",o=n&&r!==1?' start="'+r+'"':"";return"<"+s+o+`>
`+i+"</"+s+`>
`}listitem(e){var r;let n="";if(e.task){let i=this.checkbox({checked:!!e.checked});e.loose?((r=e.tokens[0])==null?void 0:r.type)==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+Pr(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):n+=i+" "}return n+=this.parser.parse(e.tokens,!!e.loose),`<li>${n}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let n="",r="";for(let s=0;s<e.header.length;s++)r+=this.tablecell(e.header[s]);n+=this.tablerow({text:r});let i="";for(let s=0;s<e.rows.length;s++){let o=e.rows[s];r="";for(let a=0;a<o.length;a++)r+=this.tablecell(o[a]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let n=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+n+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Pr(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:n,tokens:r}){let i=this.parser.parseInline(r),s=B1(e);if(s===null)return i;e=s;let o='<a href="'+e+'"';return n&&(o+=' title="'+Pr(n)+'"'),o+=">"+i+"</a>",o}image({href:e,title:n,text:r,tokens:i}){i&&(r=this.parser.parseInline(i,this.parser.textRenderer));let s=B1(e);if(s===null)return Pr(r);e=s;let o=`<img src="${e}" alt="${r}"`;return n&&(o+=` title="${Pr(n)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Pr(e.text)}},iy=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},vr=class Fg{constructor(e){lt(this,"options");lt(this,"renderer");lt(this,"textRenderer");this.options=e||fo,this.options.renderer=this.options.renderer||new Zd,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new iy}static parse(e,n){return new Fg(n).parse(e)}static parseInline(e,n){return new Fg(n).parseInline(e)}parse(e,n=!0){var i,s;let r="";for(let o=0;o<e.length;o++){let a=e[o];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[a.type]){let c=a,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(c.type)){r+=u||"";continue}}let l=a;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"def":{r+=this.renderer.def(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;o+1<e.length&&e[o+1].type==="text";)c=e[++o],u+=`
`+this.renderer.text(c);n?r+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):r+=u;continue}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(e,n=this.renderer){var i,s;let r="";for(let o=0;o<e.length;o++){let a=e[o];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[a.type]){let c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=c||"";continue}}let l=a;switch(l.type){case"escape":{r+=n.text(l);break}case"html":{r+=n.html(l);break}case"link":{r+=n.link(l);break}case"image":{r+=n.image(l);break}case"strong":{r+=n.strong(l);break}case"em":{r+=n.em(l);break}case"codespan":{r+=n.codespan(l);break}case"br":{r+=n.br(l);break}case"del":{r+=n.del(l);break}case"text":{r+=n.text(l);break}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}},lu,Qa=(lu=class{constructor(e){lt(this,"options");lt(this,"block");this.options=e||fo}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?xr.lex:xr.lexInline}provideParser(){return this.block?vr.parse:vr.parseInline}},lt(lu,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),lt(lu,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),lu),gj=class{constructor(...e){lt(this,"defaults",X0());lt(this,"options",this.setOptions);lt(this,"parse",this.parseMarkdown(!0));lt(this,"parseInline",this.parseMarkdown(!1));lt(this,"Parser",vr);lt(this,"Renderer",Zd);lt(this,"TextRenderer",iy);lt(this,"Lexer",xr);lt(this,"Tokenizer",Xd);lt(this,"Hooks",Qa);this.use(...e)}walkTokens(e,n){var i,s;let r=[];for(let o of e)switch(r=r.concat(n.call(this,o)),o.type){case"table":{let a=o;for(let l of a.header)r=r.concat(this.walkTokens(l.tokens,n));for(let l of a.rows)for(let c of l)r=r.concat(this.walkTokens(c.tokens,n));break}case"list":{let a=o;r=r.concat(this.walkTokens(a.items,n));break}default:{let a=o;(s=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&s[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{let c=a[l].flat(1/0);r=r.concat(this.walkTokens(c,n))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,n)))}}return r}use(...e){let n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let o=n.renderers[s.name];o?n.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:n.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=n[s.level];o?o.unshift(s.tokenizer):n[s.level]=[s.tokenizer],s.start&&(s.level==="block"?n.startBlock?n.startBlock.push(s.start):n.startBlock=[s.start]:s.level==="inline"&&(n.startInline?n.startInline.push(s.start):n.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(n.childTokens[s.name]=s.childTokens)}),i.extensions=n),r.renderer){let s=this.defaults.renderer||new Zd(this.defaults);for(let o in r.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let a=o,l=r.renderer[a],c=s[a];s[a]=(...u)=>{let d=l.apply(s,u);return d===!1&&(d=c.apply(s,u)),d||""}}i.renderer=s}if(r.tokenizer){let s=this.defaults.tokenizer||new Xd(this.defaults);for(let o in r.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,l=r.tokenizer[a],c=s[a];s[a]=(...u)=>{let d=l.apply(s,u);return d===!1&&(d=c.apply(s,u)),d}}i.tokenizer=s}if(r.hooks){let s=this.defaults.hooks||new Qa;for(let o in r.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let a=o,l=r.hooks[a],c=s[a];Qa.passThroughHooks.has(o)?s[a]=u=>{if(this.defaults.async&&Qa.passThroughHooksRespectAsync.has(o))return(async()=>{let h=await l.call(s,u);return c.call(s,h)})();let d=l.call(s,u);return c.call(s,d)}:s[a]=(...u)=>{if(this.defaults.async)return(async()=>{let h=await l.apply(s,u);return h===!1&&(h=await c.apply(s,u)),h})();let d=l.apply(s,u);return d===!1&&(d=c.apply(s,u)),d}}i.hooks=s}if(r.walkTokens){let s=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return xr.lex(e,n??this.defaults)}parser(e,n){return vr.parse(e,n??this.defaults)}parseMarkdown(e){return(n,r)=>{let i={...r},s={...this.defaults,...i},o=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&i.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(s.hooks&&(s.hooks.options=s,s.hooks.block=e),s.async)return(async()=>{let a=s.hooks?await s.hooks.preprocess(n):n,l=await(s.hooks?await s.hooks.provideLexer():e?xr.lex:xr.lexInline)(a,s),c=s.hooks?await s.hooks.processAllTokens(l):l;s.walkTokens&&await Promise.all(this.walkTokens(c,s.walkTokens));let u=await(s.hooks?await s.hooks.provideParser():e?vr.parse:vr.parseInline)(c,s);return s.hooks?await s.hooks.postprocess(u):u})().catch(o);try{s.hooks&&(n=s.hooks.preprocess(n));let a=(s.hooks?s.hooks.provideLexer():e?xr.lex:xr.lexInline)(n,s);s.hooks&&(a=s.hooks.processAllTokens(a)),s.walkTokens&&this.walkTokens(a,s.walkTokens);let l=(s.hooks?s.hooks.provideParser():e?vr.parse:vr.parseInline)(a,s);return s.hooks&&(l=s.hooks.postprocess(l)),l}catch(a){return o(a)}}}onError(e,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+Pr(r.message+"",!0)+"</pre>";return n?Promise.resolve(i):i}if(n)return Promise.reject(r);throw r}}},eo=new gj;function tt(t,e){return eo.parse(t,e)}tt.options=tt.setOptions=function(t){return eo.setOptions(t),tt.defaults=eo.defaults,G2(tt.defaults),tt};tt.getDefaults=X0;tt.defaults=fo;tt.use=function(...t){return eo.use(...t),tt.defaults=eo.defaults,G2(tt.defaults),tt};tt.walkTokens=function(t,e){return eo.walkTokens(t,e)};tt.parseInline=eo.parseInline;tt.Parser=vr;tt.parser=vr.parse;tt.Renderer=Zd;tt.TextRenderer=iy;tt.Lexer=xr;tt.lexer=xr.lex;tt.Tokenizer=Xd;tt.Hooks=Qa;tt.parse=tt;tt.options;tt.setOptions;tt.use;tt.walkTokens;tt.parseInline;vr.parse;xr.lex;function iT(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Array.from(typeof t=="string"?[t]:t);r[r.length-1]=r[r.length-1].replace(/\r?\n([\t ]*)$/,"");var i=r.reduce(function(a,l){var c=l.match(/\n([\t ]+|(?!\s).)/g);return c?a.concat(c.map(function(u){var d,h;return(h=(d=u.match(/[\t ]/g))===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0})):a},[]);if(i.length){var s=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");r=r.map(function(a){return a.replace(s,`
`)})}r[0]=r[0].replace(/^\r?\n/,"");var o=r[0];return e.forEach(function(a,l){var c=o.match(/(?:^|\n)( *)$/),u=c?c[1]:"",d=a;typeof a=="string"&&a.includes(`
`)&&(d=String(a).split(`
`).map(function(h,f){return f===0?h:""+u+h}).join(`
`)),o+=d+r[l+1]}),o}var mj={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},zg=new Map,sT=new Map,yj=x(t=>{for(const e of t){if(!e.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(G.debug("Registering icon pack:",e.name),"loader"in e)sT.set(e.name,e.loader);else if("icons"in e)zg.set(e.name,e.icons);else throw G.error("Invalid icon loader:",e),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),oT=x(async(t,e)=>{const n=bU(t,!0,e!==void 0);if(!n)throw new Error(`Invalid icon name: ${t}`);const r=n.prefix||e;if(!r)throw new Error(`Icon name must contain a prefix: ${t}`);let i=zg.get(r);if(!i){const o=sT.get(r);if(!o)throw new Error(`Icon set not found: ${n.prefix}`);try{i={...await o(),prefix:r},zg.set(r,i)}catch(a){throw G.error(a),new Error(`Failed to load icon set: ${n.prefix}`)}}const s=wU(i,n.name);if(!s)throw new Error(`Icon not found: ${t}`);return s},"getRegisteredIconData"),bj=x(async t=>{try{return await oT(t),!0}catch{return!1}},"isIconAvailable"),fc=x(async(t,e,n)=>{let r;try{r=await oT(t,e==null?void 0:e.fallbackPrefix)}catch(o){G.error(o),r=mj}const i=MU(r,e),s=LU(OU(i.body),{...i.attributes,...n});return dr(s,pn())},"getIconSVG");function aT(t,{markdownAutoWrap:e}){const r=t.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),i=iT(r);return e===!1?i.replace(/ /g,"&nbsp;"):i}x(aT,"preprocessMarkdown");function lT(t,e={}){const n=aT(t,e),r=tt.lexer(n),i=[[]];let s=0;function o(a,l="normal"){a.type==="text"?a.text.split(`
`).forEach((u,d)=>{d!==0&&(s++,i.push([])),u.split(" ").forEach(h=>{h=h.replace(/&#39;/g,"'"),h&&i[s].push({content:h,type:l})})}):a.type==="strong"||a.type==="em"?a.tokens.forEach(c=>{o(c,a.type)}):a.type==="html"&&i[s].push({content:a.text,type:"normal"})}return x(o,"processNode"),r.forEach(a=>{var l;a.type==="paragraph"?(l=a.tokens)==null||l.forEach(c=>{o(c)}):a.type==="html"?i[s].push({content:a.text,type:"normal"}):i[s].push({content:a.raw,type:"normal"})}),i}x(lT,"markdownToLines");function cT(t,{markdownAutoWrap:e}={}){const n=tt.lexer(t);function r(i){var s,o,a;return i.type==="text"?e===!1?i.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):i.text.replace(/\n */g,"<br/>"):i.type==="strong"?`<strong>${(s=i.tokens)==null?void 0:s.map(r).join("")}</strong>`:i.type==="em"?`<em>${(o=i.tokens)==null?void 0:o.map(r).join("")}</em>`:i.type==="paragraph"?`<p>${(a=i.tokens)==null?void 0:a.map(r).join("")}</p>`:i.type==="space"?"":i.type==="html"?`${i.text}`:i.type==="escape"?i.text:(G.warn(`Unsupported markdown: ${i.type}`),i.raw)}return x(r,"output"),n.map(r).join("")}x(cT,"markdownToHTML");function uT(t){return Intl.Segmenter?[...new Intl.Segmenter().segment(t)].map(e=>e.segment):[...t]}x(uT,"splitTextToChars");function dT(t,e){const n=uT(e.content);return sy(t,[],n,e.type)}x(dT,"splitWordToFitWidth");function sy(t,e,n,r){if(n.length===0)return[{content:e.join(""),type:r},{content:"",type:r}];const[i,...s]=n,o=[...e,i];return t([{content:o.join(""),type:r}])?sy(t,o,s,r):(e.length===0&&i&&(e.push(i),n.shift()),[{content:e.join(""),type:r},{content:n.join(""),type:r}])}x(sy,"splitWordToFitWidthRecursion");function hT(t,e){if(t.some(({content:n})=>n.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return Jd(t,e)}x(hT,"splitLineToFitWidth");function Jd(t,e,n=[],r=[]){if(t.length===0)return r.length>0&&n.push(r),n.length>0?n:[];let i="";t[0].content===" "&&(i=" ",t.shift());const s=t.shift()??{content:" ",type:"normal"},o=[...r];if(i!==""&&o.push({content:i,type:"normal"}),o.push(s),e(o))return Jd(t,e,n,o);if(r.length>0)n.push(r),t.unshift(s);else if(s.content){const[a,l]=dT(e,s);n.push([a]),l.content&&t.unshift(l)}return Jd(t,e,n)}x(Jd,"splitLineToFitWidthRecursion");function Hg(t,e){e&&t.attr("style",e)}x(Hg,"applyStyle");async function fT(t,e,n,r,i=!1,s=pn()){const o=t.append("foreignObject");o.attr("width",`${10*n}px`),o.attr("height",`${10*n}px`);const a=o.append("xhtml:div"),l=sa(e.label)?await p0(e.label.replace(ba.lineBreakRegex,`
`),s):dr(e.label,s),c=e.isNode?"nodeLabel":"edgeLabel",u=a.append("span");u.html(l),Hg(u,e.labelStyle),u.attr("class",`${c} ${r}`),Hg(a,e.labelStyle),a.style("display","table-cell"),a.style("white-space","nowrap"),a.style("line-height","1.5"),a.style("max-width",n+"px"),a.style("text-align","center"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),i&&a.attr("class","labelBkg");let d=a.node().getBoundingClientRect();return d.width===n&&(a.style("display","table"),a.style("white-space","break-spaces"),a.style("width",n+"px"),d=a.node().getBoundingClientRect()),o.node()}x(fT,"addHtmlSpan");function Vh(t,e,n){return t.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*n-.1+"em").attr("dy",n+"em")}x(Vh,"createTspan");function pT(t,e,n){const r=t.append("text"),i=Vh(r,1,e);Gh(i,n);const s=i.node().getComputedTextLength();return r.remove(),s}x(pT,"computeWidthOfText");function xj(t,e,n){var o;const r=t.append("text"),i=Vh(r,1,e);Gh(i,[{content:n,type:"normal"}]);const s=(o=i.node())==null?void 0:o.getBoundingClientRect();return s&&r.remove(),s}x(xj,"computeDimensionOfText");function gT(t,e,n,r=!1){const s=e.append("g"),o=s.insert("rect").attr("class","background").attr("style","stroke: none"),a=s.append("text").attr("y","-10.1");let l=0;for(const c of n){const u=x(h=>pT(s,1.1,h)<=t,"checkWidth"),d=u(c)?[c]:hT(c,u);for(const h of d){const f=Vh(a,l,1.1);Gh(f,h),l++}}if(r){const c=a.node().getBBox(),u=2;return o.attr("x",c.x-u).attr("y",c.y-u).attr("width",c.width+2*u).attr("height",c.height+2*u),s.node()}else return a.node()}x(gT,"createFormattedText");function Gh(t,e){t.text(""),e.forEach((n,r)=>{const i=t.append("tspan").attr("font-style",n.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",n.type==="strong"?"bold":"normal");r===0?i.text(n.content):i.text(" "+n.content)})}x(Gh,"updateTextContentAndStyles");async function mT(t,e={}){const n=[];t.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(i,s,o)=>(n.push((async()=>{const a=`${s}:${o}`;return await bj(a)?await fc(a,void 0,{class:"label-icon"}):`<i class='${dr(i,e).replace(":"," ")}'></i>`})()),i));const r=await Promise.all(n);return t.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>r.shift()??"")}x(mT,"replaceIconSubstring");var cs=x(async(t,e="",{style:n="",isTitle:r=!1,classes:i="",useHtmlLabels:s=!0,isNode:o=!0,width:a=200,addSvgBackground:l=!1}={},c)=>{if(G.debug("XYZ createText",e,n,r,i,s,o,"addSvgBackground: ",l),s){const u=cT(e,c),d=await mT(ho(u),c),h=e.replace(/\\\\/g,"\\"),f={isNode:o,label:sa(e)?h:d,labelStyle:n.replace("fill:","color:")};return await fT(t,f,a,i,l,c)}else{const u=e.replace(/<br\s*\/?>/g,"<br/>"),d=lT(u.replace("<br>","<br/>"),c),h=gT(a,t,d,e?l:!1);if(o){/stroke:/.exec(n)&&(n=n.replace("stroke:","lineColor:"));const f=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Ve(h).attr("style",f)}else{const f=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");Ve(h).select("rect").attr("style",f.replace(/background:/g,"fill:"));const p=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Ve(h).select("text").attr("style",p)}return h}},"createText");function ap(t,e,n){if(t&&t.length){const[r,i]=e,s=Math.PI/180*n,o=Math.cos(s),a=Math.sin(s);for(const l of t){const[c,u]=l;l[0]=(c-r)*o-(u-i)*a+r,l[1]=(c-r)*a+(u-i)*o+i}}}function vj(t,e){return t[0]===e[0]&&t[1]===e[1]}function wj(t,e,n,r=1){const i=n,s=Math.max(e,.1),o=t[0]&&t[0][0]&&typeof t[0][0]=="number"?[t]:t,a=[0,0];if(i)for(const c of o)ap(c,a,i);const l=(function(c,u,d){const h=[];for(const b of c){const C=[...b];vj(C[0],C[C.length-1])||C.push([C[0][0],C[0][1]]),C.length>2&&h.push(C)}const f=[];u=Math.max(u,.1);const p=[];for(const b of h)for(let C=0;C<b.length-1;C++){const v=b[C],k=b[C+1];if(v[1]!==k[1]){const w=Math.min(v[1],k[1]);p.push({ymin:w,ymax:Math.max(v[1],k[1]),x:w===v[1]?v[0]:k[0],islope:(k[0]-v[0])/(k[1]-v[1])})}}if(p.sort(((b,C)=>b.ymin<C.ymin?-1:b.ymin>C.ymin?1:b.x<C.x?-1:b.x>C.x?1:b.ymax===C.ymax?0:(b.ymax-C.ymax)/Math.abs(b.ymax-C.ymax))),!p.length)return f;let g=[],m=p[0].ymin,y=0;for(;g.length||p.length;){if(p.length){let b=-1;for(let C=0;C<p.length&&!(p[C].ymin>m);C++)b=C;p.splice(0,b+1).forEach((C=>{g.push({s:m,edge:C})}))}if(g=g.filter((b=>!(b.edge.ymax<=m))),g.sort(((b,C)=>b.edge.x===C.edge.x?0:(b.edge.x-C.edge.x)/Math.abs(b.edge.x-C.edge.x))),(d!==1||y%u==0)&&g.length>1)for(let b=0;b<g.length;b+=2){const C=b+1;if(C>=g.length)break;const v=g[b].edge,k=g[C].edge;f.push([[Math.round(v.x),m],[Math.round(k.x),m]])}m+=d,g.forEach((b=>{b.edge.x=b.edge.x+d*b.edge.islope})),y++}return f})(o,s,r);if(i){for(const c of o)ap(c,a,-i);(function(c,u,d){const h=[];c.forEach((f=>h.push(...f))),ap(h,u,d)})(l,a,-i)}return l}function pc(t,e){var n;const r=e.hachureAngle+90;let i=e.hachureGap;i<0&&(i=4*e.strokeWidth),i=Math.round(Math.max(i,.1));let s=1;return e.roughness>=1&&(((n=e.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(s=i),wj(t,i,r,s||1)}class oy{constructor(e){this.helper=e}fillPolygons(e,n){return this._fillPolygons(e,n)}_fillPolygons(e,n){const r=pc(e,n);return{type:"fillSketch",ops:this.renderLines(r,n)}}renderLines(e,n){const r=[];for(const i of e)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],n));return r}}function Kh(t){const e=t[0],n=t[1];return Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))}class Cj extends oy{fillPolygons(e,n){let r=n.hachureGap;r<0&&(r=4*n.strokeWidth),r=Math.max(r,.1);const i=pc(e,Object.assign({},n,{hachureGap:r})),s=Math.PI/180*n.hachureAngle,o=[],a=.5*r*Math.cos(s),l=.5*r*Math.sin(s);for(const[c,u]of i)Kh([c,u])&&o.push([[c[0]-a,c[1]+l],[...u]],[[c[0]+a,c[1]-l],[...u]]);return{type:"fillSketch",ops:this.renderLines(o,n)}}}class kj extends oy{fillPolygons(e,n){const r=this._fillPolygons(e,n),i=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),s=this._fillPolygons(e,i);return r.ops=r.ops.concat(s.ops),r}}class Sj{constructor(e){this.helper=e}fillPolygons(e,n){const r=pc(e,n=Object.assign({},n,{hachureAngle:0}));return this.dotsOnLines(r,n)}dotsOnLines(e,n){const r=[];let i=n.hachureGap;i<0&&(i=4*n.strokeWidth),i=Math.max(i,.1);let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const o=i/4;for(const a of e){const l=Kh(a),c=l/i,u=Math.ceil(c)-1,d=l-u*i,h=(a[0][0]+a[1][0])/2-i/4,f=Math.min(a[0][1],a[1][1]);for(let p=0;p<u;p++){const g=f+d+p*i,m=h-o+2*Math.random()*o,y=g-o+2*Math.random()*o,b=this.helper.ellipse(m,y,s,s,n);r.push(...b.ops)}}return{type:"fillSketch",ops:r}}}class _j{constructor(e){this.helper=e}fillPolygons(e,n){const r=pc(e,n);return{type:"fillSketch",ops:this.dashedLine(r,n)}}dashedLine(e,n){const r=n.dashOffset<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashOffset,i=n.dashGap<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashGap,s=[];return e.forEach((o=>{const a=Kh(o),l=Math.floor(a/(r+i)),c=(a+i-l*(r+i))/2;let u=o[0],d=o[1];u[0]>d[0]&&(u=o[1],d=o[0]);const h=Math.atan((d[1]-u[1])/(d[0]-u[0]));for(let f=0;f<l;f++){const p=f*(r+i),g=p+r,m=[u[0]+p*Math.cos(h)+c*Math.cos(h),u[1]+p*Math.sin(h)+c*Math.sin(h)],y=[u[0]+g*Math.cos(h)+c*Math.cos(h),u[1]+g*Math.sin(h)+c*Math.sin(h)];s.push(...this.helper.doubleLineOps(m[0],m[1],y[0],y[1],n))}})),s}}class Ej{constructor(e){this.helper=e}fillPolygons(e,n){const r=n.hachureGap<0?4*n.strokeWidth:n.hachureGap,i=n.zigzagOffset<0?r:n.zigzagOffset,s=pc(e,n=Object.assign({},n,{hachureGap:r+i}));return{type:"fillSketch",ops:this.zigzagLines(s,i,n)}}zigzagLines(e,n,r){const i=[];return e.forEach((s=>{const o=Kh(s),a=Math.round(o/(2*n));let l=s[0],c=s[1];l[0]>c[0]&&(l=s[1],c=s[0]);const u=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let d=0;d<a;d++){const h=2*d*n,f=2*(d+1)*n,p=Math.sqrt(2*Math.pow(n,2)),g=[l[0]+h*Math.cos(u),l[1]+h*Math.sin(u)],m=[l[0]+f*Math.cos(u),l[1]+f*Math.sin(u)],y=[g[0]+p*Math.cos(u+Math.PI/4),g[1]+p*Math.sin(u+Math.PI/4)];i.push(...this.helper.doubleLineOps(g[0],g[1],y[0],y[1],r),...this.helper.doubleLineOps(y[0],y[1],m[0],m[1],r))}})),i}}const On={};let Tj=class{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}};const Mj=0,lp=1,F1=2,Zc={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function cp(t,e){return t.type===e}function ay(t){const e=[],n=(function(o){const a=new Array;for(;o!=="";)if(o.match(/^([ \t\r\n,]+)/))o=o.substr(RegExp.$1.length);else if(o.match(/^([aAcChHlLmMqQsStTvVzZ])/))a[a.length]={type:Mj,text:RegExp.$1},o=o.substr(RegExp.$1.length);else{if(!o.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];a[a.length]={type:lp,text:`${parseFloat(RegExp.$1)}`},o=o.substr(RegExp.$1.length)}return a[a.length]={type:F1,text:""},a})(t);let r="BOD",i=0,s=n[i];for(;!cp(s,F1);){let o=0;const a=[];if(r==="BOD"){if(s.text!=="M"&&s.text!=="m")return ay("M0,0"+t);i++,o=Zc[s.text],r=s.text}else cp(s,lp)?o=Zc[r]:(i++,o=Zc[s.text],r=s.text);if(!(i+o<n.length))throw new Error("Path data ended short");for(let l=i;l<i+o;l++){const c=n[l];if(!cp(c,lp))throw new Error("Param not a number: "+r+","+c.text);a[a.length]=+c.text}if(typeof Zc[r]!="number")throw new Error("Bad segment: "+r);{const l={key:r,data:a};e.push(l),i+=o,s=n[i],r==="M"&&(r="L"),r==="m"&&(r="l")}}return e}function yT(t){let e=0,n=0,r=0,i=0;const s=[];for(const{key:o,data:a}of t)switch(o){case"M":s.push({key:"M",data:[...a]}),[e,n]=a,[r,i]=a;break;case"m":e+=a[0],n+=a[1],s.push({key:"M",data:[e,n]}),r=e,i=n;break;case"L":s.push({key:"L",data:[...a]}),[e,n]=a;break;case"l":e+=a[0],n+=a[1],s.push({key:"L",data:[e,n]});break;case"C":s.push({key:"C",data:[...a]}),e=a[4],n=a[5];break;case"c":{const l=a.map(((c,u)=>u%2?c+n:c+e));s.push({key:"C",data:l}),e=l[4],n=l[5];break}case"Q":s.push({key:"Q",data:[...a]}),e=a[2],n=a[3];break;case"q":{const l=a.map(((c,u)=>u%2?c+n:c+e));s.push({key:"Q",data:l}),e=l[2],n=l[3];break}case"A":s.push({key:"A",data:[...a]}),e=a[5],n=a[6];break;case"a":e+=a[5],n+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],e,n]});break;case"H":s.push({key:"H",data:[...a]}),e=a[0];break;case"h":e+=a[0],s.push({key:"H",data:[e]});break;case"V":s.push({key:"V",data:[...a]}),n=a[0];break;case"v":n+=a[0],s.push({key:"V",data:[n]});break;case"S":s.push({key:"S",data:[...a]}),e=a[2],n=a[3];break;case"s":{const l=a.map(((c,u)=>u%2?c+n:c+e));s.push({key:"S",data:l}),e=l[2],n=l[3];break}case"T":s.push({key:"T",data:[...a]}),e=a[0],n=a[1];break;case"t":e+=a[0],n+=a[1],s.push({key:"T",data:[e,n]});break;case"Z":case"z":s.push({key:"Z",data:[]}),e=r,n=i}return s}function bT(t){const e=[];let n="",r=0,i=0,s=0,o=0,a=0,l=0;for(const{key:c,data:u}of t){switch(c){case"M":e.push({key:"M",data:[...u]}),[r,i]=u,[s,o]=u;break;case"C":e.push({key:"C",data:[...u]}),r=u[4],i=u[5],a=u[2],l=u[3];break;case"L":e.push({key:"L",data:[...u]}),[r,i]=u;break;case"H":r=u[0],e.push({key:"L",data:[r,i]});break;case"V":i=u[0],e.push({key:"L",data:[r,i]});break;case"S":{let d=0,h=0;n==="C"||n==="S"?(d=r+(r-a),h=i+(i-l)):(d=r,h=i),e.push({key:"C",data:[d,h,...u]}),a=u[0],l=u[1],r=u[2],i=u[3];break}case"T":{const[d,h]=u;let f=0,p=0;n==="Q"||n==="T"?(f=r+(r-a),p=i+(i-l)):(f=r,p=i);const g=r+2*(f-r)/3,m=i+2*(p-i)/3,y=d+2*(f-d)/3,b=h+2*(p-h)/3;e.push({key:"C",data:[g,m,y,b,d,h]}),a=f,l=p,r=d,i=h;break}case"Q":{const[d,h,f,p]=u,g=r+2*(d-r)/3,m=i+2*(h-i)/3,y=f+2*(d-f)/3,b=p+2*(h-p)/3;e.push({key:"C",data:[g,m,y,b,f,p]}),a=d,l=h,r=f,i=p;break}case"A":{const d=Math.abs(u[0]),h=Math.abs(u[1]),f=u[2],p=u[3],g=u[4],m=u[5],y=u[6];d===0||h===0?(e.push({key:"C",data:[r,i,m,y,m,y]}),r=m,i=y):(r!==m||i!==y)&&(xT(r,i,m,y,d,h,f,p,g).forEach((function(b){e.push({key:"C",data:b})})),r=m,i=y);break}case"Z":e.push({key:"Z",data:[]}),r=s,i=o}n=c}return e}function za(t,e,n){return[t*Math.cos(n)-e*Math.sin(n),t*Math.sin(n)+e*Math.cos(n)]}function xT(t,e,n,r,i,s,o,a,l,c){const u=(d=o,Math.PI*d/180);var d;let h=[],f=0,p=0,g=0,m=0;if(c)[f,p,g,m]=c;else{[t,e]=za(t,e,-u),[n,r]=za(n,r,-u);const B=(t-n)/2,A=(e-r)/2;let M=B*B/(i*i)+A*A/(s*s);M>1&&(M=Math.sqrt(M),i*=M,s*=M);const O=i*i,F=s*s,R=O*F-O*A*A-F*B*B,q=O*A*A+F*B*B,Z=(a===l?-1:1)*Math.sqrt(Math.abs(R/q));g=Z*i*A/s+(t+n)/2,m=Z*-s*B/i+(e+r)/2,f=Math.asin(parseFloat(((e-m)/s).toFixed(9))),p=Math.asin(parseFloat(((r-m)/s).toFixed(9))),t<g&&(f=Math.PI-f),n<g&&(p=Math.PI-p),f<0&&(f=2*Math.PI+f),p<0&&(p=2*Math.PI+p),l&&f>p&&(f-=2*Math.PI),!l&&p>f&&(p-=2*Math.PI)}let y=p-f;if(Math.abs(y)>120*Math.PI/180){const B=p,A=n,M=r;p=l&&p>f?f+120*Math.PI/180*1:f+120*Math.PI/180*-1,h=xT(n=g+i*Math.cos(p),r=m+s*Math.sin(p),A,M,i,s,o,0,l,[p,B,g,m])}y=p-f;const b=Math.cos(f),C=Math.sin(f),v=Math.cos(p),k=Math.sin(p),w=Math.tan(y/4),S=4/3*i*w,E=4/3*s*w,I=[t,e],$=[t+S*C,e-E*b],T=[n+S*k,r-E*v],P=[n,r];if($[0]=2*I[0]-$[0],$[1]=2*I[1]-$[1],c)return[$,T,P].concat(h);{h=[$,T,P].concat(h);const B=[];for(let A=0;A<h.length;A+=3){const M=za(h[A][0],h[A][1],u),O=za(h[A+1][0],h[A+1][1],u),F=za(h[A+2][0],h[A+2][1],u);B.push([M[0],M[1],O[0],O[1],F[0],F[1]])}return B}}const Aj={randOffset:function(t,e){return Re(t,e)},randOffsetWithRange:function(t,e,n){return Qd(t,e,n)},ellipse:function(t,e,n,r,i){const s=wT(n,r,i);return Wg(t,e,i,s).opset},doubleLineOps:function(t,e,n,r,i){return ns(t,e,n,r,i,!0)}};function vT(t,e,n,r,i){return{type:"path",ops:ns(t,e,n,r,i)}}function Su(t,e,n){const r=(t||[]).length;if(r>2){const i=[];for(let s=0;s<r-1;s++)i.push(...ns(t[s][0],t[s][1],t[s+1][0],t[s+1][1],n));return e&&i.push(...ns(t[r-1][0],t[r-1][1],t[0][0],t[0][1],n)),{type:"path",ops:i}}return r===2?vT(t[0][0],t[0][1],t[1][0],t[1][1],n):{type:"path",ops:[]}}function Nj(t,e,n,r,i){return(function(s,o){return Su(s,!0,o)})([[t,e],[t+n,e],[t+n,e+r],[t,e+r]],i)}function z1(t,e){if(t.length){const n=typeof t[0][0]=="number"?[t]:t,r=Jc(n[0],1*(1+.2*e.roughness),e),i=e.disableMultiStroke?[]:Jc(n[0],1.5*(1+.22*e.roughness),U1(e));for(let s=1;s<n.length;s++){const o=n[s];if(o.length){const a=Jc(o,1*(1+.2*e.roughness),e),l=e.disableMultiStroke?[]:Jc(o,1.5*(1+.22*e.roughness),U1(e));for(const c of a)c.op!=="move"&&r.push(c);for(const c of l)c.op!=="move"&&i.push(c)}}return{type:"path",ops:r.concat(i)}}return{type:"path",ops:[]}}function wT(t,e,n){const r=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),s=2*Math.PI/i;let o=Math.abs(t/2),a=Math.abs(e/2);const l=1-n.curveFitting;return o+=Re(o*l,n),a+=Re(a*l,n),{increment:s,rx:o,ry:a}}function Wg(t,e,n,r){const[i,s]=j1(r.increment,t,e,r.rx,r.ry,1,r.increment*Qd(.1,Qd(.4,1,n),n),n);let o=eh(i,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[a]=j1(r.increment,t,e,r.rx,r.ry,1.5,0,n),l=eh(a,null,n);o=o.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function H1(t,e,n,r,i,s,o,a,l){const c=t,u=e;let d=Math.abs(n/2),h=Math.abs(r/2);d+=Re(.01*d,l),h+=Re(.01*h,l);let f=i,p=s;for(;f<0;)f+=2*Math.PI,p+=2*Math.PI;p-f>2*Math.PI&&(f=0,p=2*Math.PI);const g=2*Math.PI/l.curveStepCount,m=Math.min(g/2,(p-f)/2),y=q1(m,c,u,d,h,f,p,1,l);if(!l.disableMultiStroke){const b=q1(m,c,u,d,h,f,p,1.5,l);y.push(...b)}return o&&(a?y.push(...ns(c,u,c+d*Math.cos(f),u+h*Math.sin(f),l),...ns(c,u,c+d*Math.cos(p),u+h*Math.sin(p),l)):y.push({op:"lineTo",data:[c,u]},{op:"lineTo",data:[c+d*Math.cos(f),u+h*Math.sin(f)]})),{type:"path",ops:y}}function W1(t,e){const n=bT(yT(ay(t))),r=[];let i=[0,0],s=[0,0];for(const{key:o,data:a}of n)switch(o){case"M":s=[a[0],a[1]],i=[a[0],a[1]];break;case"L":r.push(...ns(s[0],s[1],a[0],a[1],e)),s=[a[0],a[1]];break;case"C":{const[l,c,u,d,h,f]=a;r.push(...Oj(l,c,u,d,h,f,s,e)),s=[h,f];break}case"Z":r.push(...ns(s[0],s[1],i[0],i[1],e)),s=[i[0],i[1]]}return{type:"path",ops:r}}function up(t,e){const n=[];for(const r of t)if(r.length){const i=e.maxRandomnessOffset||0,s=r.length;if(s>2){n.push({op:"move",data:[r[0][0]+Re(i,e),r[0][1]+Re(i,e)]});for(let o=1;o<s;o++)n.push({op:"lineTo",data:[r[o][0]+Re(i,e),r[o][1]+Re(i,e)]})}}return{type:"fillPath",ops:n}}function ko(t,e){return(function(n,r){let i=n.fillStyle||"hachure";if(!On[i])switch(i){case"zigzag":On[i]||(On[i]=new Cj(r));break;case"cross-hatch":On[i]||(On[i]=new kj(r));break;case"dots":On[i]||(On[i]=new Sj(r));break;case"dashed":On[i]||(On[i]=new _j(r));break;case"zigzag-line":On[i]||(On[i]=new Ej(r));break;default:i="hachure",On[i]||(On[i]=new oy(r))}return On[i]})(e,Aj).fillPolygons(t,e)}function U1(t){const e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}function CT(t){return t.randomizer||(t.randomizer=new Tj(t.seed||0)),t.randomizer.next()}function Qd(t,e,n,r=1){return n.roughness*r*(CT(n)*(e-t)+t)}function Re(t,e,n=1){return Qd(-t,t,e,n)}function ns(t,e,n,r,i,s=!1){const o=s?i.disableMultiStrokeFill:i.disableMultiStroke,a=Ug(t,e,n,r,i,!0,!1);if(o)return a;const l=Ug(t,e,n,r,i,!0,!0);return a.concat(l)}function Ug(t,e,n,r,i,s,o){const a=Math.pow(t-n,2)+Math.pow(e-r,2),l=Math.sqrt(a);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let u=i.maxRandomnessOffset||0;u*u*100>a&&(u=l/10);const d=u/2,h=.2+.2*CT(i);let f=i.bowing*i.maxRandomnessOffset*(r-e)/200,p=i.bowing*i.maxRandomnessOffset*(t-n)/200;f=Re(f,i,c),p=Re(p,i,c);const g=[],m=()=>Re(d,i,c),y=()=>Re(u,i,c),b=i.preserveVertices;return o?g.push({op:"move",data:[t+(b?0:m()),e+(b?0:m())]}):g.push({op:"move",data:[t+(b?0:Re(u,i,c)),e+(b?0:Re(u,i,c))]}),o?g.push({op:"bcurveTo",data:[f+t+(n-t)*h+m(),p+e+(r-e)*h+m(),f+t+2*(n-t)*h+m(),p+e+2*(r-e)*h+m(),n+(b?0:m()),r+(b?0:m())]}):g.push({op:"bcurveTo",data:[f+t+(n-t)*h+y(),p+e+(r-e)*h+y(),f+t+2*(n-t)*h+y(),p+e+2*(r-e)*h+y(),n+(b?0:y()),r+(b?0:y())]}),g}function Jc(t,e,n){if(!t.length)return[];const r=[];r.push([t[0][0]+Re(e,n),t[0][1]+Re(e,n)]),r.push([t[0][0]+Re(e,n),t[0][1]+Re(e,n)]);for(let i=1;i<t.length;i++)r.push([t[i][0]+Re(e,n),t[i][1]+Re(e,n)]),i===t.length-1&&r.push([t[i][0]+Re(e,n),t[i][1]+Re(e,n)]);return eh(r,null,n)}function eh(t,e,n){const r=t.length,i=[];if(r>3){const s=[],o=1-n.curveTightness;i.push({op:"move",data:[t[1][0],t[1][1]]});for(let a=1;a+2<r;a++){const l=t[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*t[a+1][0]-o*t[a-1][0])/6,l[1]+(o*t[a+1][1]-o*t[a-1][1])/6],s[2]=[t[a+1][0]+(o*t[a][0]-o*t[a+2][0])/6,t[a+1][1]+(o*t[a][1]-o*t[a+2][1])/6],s[3]=[t[a+1][0],t[a+1][1]],i.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else r===3?(i.push({op:"move",data:[t[1][0],t[1][1]]}),i.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):r===2&&i.push(...Ug(t[0][0],t[0][1],t[1][0],t[1][1],n,!0,!0));return i}function j1(t,e,n,r,i,s,o,a){const l=[],c=[];if(a.roughness===0){t/=4,c.push([e+r*Math.cos(-t),n+i*Math.sin(-t)]);for(let u=0;u<=2*Math.PI;u+=t){const d=[e+r*Math.cos(u),n+i*Math.sin(u)];l.push(d),c.push(d)}c.push([e+r*Math.cos(0),n+i*Math.sin(0)]),c.push([e+r*Math.cos(t),n+i*Math.sin(t)])}else{const u=Re(.5,a)-Math.PI/2;c.push([Re(s,a)+e+.9*r*Math.cos(u-t),Re(s,a)+n+.9*i*Math.sin(u-t)]);const d=2*Math.PI+u-.01;for(let h=u;h<d;h+=t){const f=[Re(s,a)+e+r*Math.cos(h),Re(s,a)+n+i*Math.sin(h)];l.push(f),c.push(f)}c.push([Re(s,a)+e+r*Math.cos(u+2*Math.PI+.5*o),Re(s,a)+n+i*Math.sin(u+2*Math.PI+.5*o)]),c.push([Re(s,a)+e+.98*r*Math.cos(u+o),Re(s,a)+n+.98*i*Math.sin(u+o)]),c.push([Re(s,a)+e+.9*r*Math.cos(u+.5*o),Re(s,a)+n+.9*i*Math.sin(u+.5*o)])}return[c,l]}function q1(t,e,n,r,i,s,o,a,l){const c=s+Re(.1,l),u=[];u.push([Re(a,l)+e+.9*r*Math.cos(c-t),Re(a,l)+n+.9*i*Math.sin(c-t)]);for(let d=c;d<=o;d+=t)u.push([Re(a,l)+e+r*Math.cos(d),Re(a,l)+n+i*Math.sin(d)]);return u.push([e+r*Math.cos(o),n+i*Math.sin(o)]),u.push([e+r*Math.cos(o),n+i*Math.sin(o)]),eh(u,null,l)}function Oj(t,e,n,r,i,s,o,a){const l=[],c=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let u=[0,0];const d=a.disableMultiStroke?1:2,h=a.preserveVertices;for(let f=0;f<d;f++)f===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(h?0:Re(c[0],a)),o[1]+(h?0:Re(c[0],a))]}),u=h?[i,s]:[i+Re(c[f],a),s+Re(c[f],a)],l.push({op:"bcurveTo",data:[t+Re(c[f],a),e+Re(c[f],a),n+Re(c[f],a),r+Re(c[f],a),u[0],u[1]]});return l}function Ha(t){return[...t]}function V1(t,e=0){const n=t.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(n===3)r.push(Ha(t[0]),Ha(t[1]),Ha(t[2]),Ha(t[2]));else{const i=[];i.push(t[0],t[0]);for(let a=1;a<t.length;a++)i.push(t[a]),a===t.length-1&&i.push(t[a]);const s=[],o=1-e;r.push(Ha(i[0]));for(let a=1;a+2<i.length;a++){const l=i[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*i[a+1][0]-o*i[a-1][0])/6,l[1]+(o*i[a+1][1]-o*i[a-1][1])/6],s[2]=[i[a+1][0]+(o*i[a][0]-o*i[a+2][0])/6,i[a+1][1]+(o*i[a][1]-o*i[a+2][1])/6],s[3]=[i[a+1][0],i[a+1][1]],r.push(s[1],s[2],s[3])}}return r}function _u(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function Lj(t,e,n){const r=_u(e,n);if(r===0)return _u(t,e);let i=((t[0]-e[0])*(n[0]-e[0])+(t[1]-e[1])*(n[1]-e[1]))/r;return i=Math.max(0,Math.min(1,i)),_u(t,Cs(e,n,i))}function Cs(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]}function jg(t,e,n,r){const i=r||[];if((function(a,l){const c=a[l+0],u=a[l+1],d=a[l+2],h=a[l+3];let f=3*u[0]-2*c[0]-h[0];f*=f;let p=3*u[1]-2*c[1]-h[1];p*=p;let g=3*d[0]-2*h[0]-c[0];g*=g;let m=3*d[1]-2*h[1]-c[1];return m*=m,f<g&&(f=g),p<m&&(p=m),f+p})(t,e)<n){const a=t[e+0];i.length?(s=i[i.length-1],o=a,Math.sqrt(_u(s,o))>1&&i.push(a)):i.push(a),i.push(t[e+3])}else{const l=t[e+0],c=t[e+1],u=t[e+2],d=t[e+3],h=Cs(l,c,.5),f=Cs(c,u,.5),p=Cs(u,d,.5),g=Cs(h,f,.5),m=Cs(f,p,.5),y=Cs(g,m,.5);jg([l,h,g,y],0,n,i),jg([y,m,p,d],0,n,i)}var s,o;return i}function Rj(t,e){return th(t,0,t.length,e)}function th(t,e,n,r,i){const s=i||[],o=t[e],a=t[n-1];let l=0,c=1;for(let u=e+1;u<n-1;++u){const d=Lj(t[u],o,a);d>l&&(l=d,c=u)}return Math.sqrt(l)>r?(th(t,e,c+1,r,s),th(t,c,n,r,s)):(s.length||s.push(o),s.push(a)),s}function dp(t,e=.15,n){const r=[],i=(t.length-1)/3;for(let s=0;s<i;s++)jg(t,3*s,e,r);return n&&n>0?th(r,0,r.length,n):r}const qn="none";class nh{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,n,r){return{shape:e,sets:n||[],options:r||this.defaultOptions}}line(e,n,r,i,s){const o=this._o(s);return this._d("line",[vT(e,n,r,i,o)],o)}rectangle(e,n,r,i,s){const o=this._o(s),a=[],l=Nj(e,n,r,i,o);if(o.fill){const c=[[e,n],[e+r,n],[e+r,n+i],[e,n+i]];o.fillStyle==="solid"?a.push(up([c],o)):a.push(ko([c],o))}return o.stroke!==qn&&a.push(l),this._d("rectangle",a,o)}ellipse(e,n,r,i,s){const o=this._o(s),a=[],l=wT(r,i,o),c=Wg(e,n,o,l);if(o.fill)if(o.fillStyle==="solid"){const u=Wg(e,n,o,l).opset;u.type="fillPath",a.push(u)}else a.push(ko([c.estimatedPoints],o));return o.stroke!==qn&&a.push(c.opset),this._d("ellipse",a,o)}circle(e,n,r,i){const s=this.ellipse(e,n,r,r,i);return s.shape="circle",s}linearPath(e,n){const r=this._o(n);return this._d("linearPath",[Su(e,!1,r)],r)}arc(e,n,r,i,s,o,a=!1,l){const c=this._o(l),u=[],d=H1(e,n,r,i,s,o,a,!0,c);if(a&&c.fill)if(c.fillStyle==="solid"){const h=Object.assign({},c);h.disableMultiStroke=!0;const f=H1(e,n,r,i,s,o,!0,!1,h);f.type="fillPath",u.push(f)}else u.push((function(h,f,p,g,m,y,b){const C=h,v=f;let k=Math.abs(p/2),w=Math.abs(g/2);k+=Re(.01*k,b),w+=Re(.01*w,b);let S=m,E=y;for(;S<0;)S+=2*Math.PI,E+=2*Math.PI;E-S>2*Math.PI&&(S=0,E=2*Math.PI);const I=(E-S)/b.curveStepCount,$=[];for(let T=S;T<=E;T+=I)$.push([C+k*Math.cos(T),v+w*Math.sin(T)]);return $.push([C+k*Math.cos(E),v+w*Math.sin(E)]),$.push([C,v]),ko([$],b)})(e,n,r,i,s,o,c));return c.stroke!==qn&&u.push(d),this._d("arc",u,c)}curve(e,n){const r=this._o(n),i=[],s=z1(e,r);if(r.fill&&r.fill!==qn)if(r.fillStyle==="solid"){const o=z1(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=[],a=e;if(a.length){const l=typeof a[0][0]=="number"?[a]:a;for(const c of l)c.length<3?o.push(...c):c.length===3?o.push(...dp(V1([c[0],c[0],c[1],c[2]]),10,(1+r.roughness)/2)):o.push(...dp(V1(c),10,(1+r.roughness)/2))}o.length&&i.push(ko([o],r))}return r.stroke!==qn&&i.push(s),this._d("curve",i,r)}polygon(e,n){const r=this._o(n),i=[],s=Su(e,!0,r);return r.fill&&(r.fillStyle==="solid"?i.push(up([e],r)):i.push(ko([e],r))),r.stroke!==qn&&i.push(s),this._d("polygon",i,r)}path(e,n){const r=this._o(n),i=[];if(!e)return this._d("path",i,r);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=r.fill&&r.fill!=="transparent"&&r.fill!==qn,o=r.stroke!==qn,a=!!(r.simplification&&r.simplification<1),l=(function(u,d,h){const f=bT(yT(ay(u))),p=[];let g=[],m=[0,0],y=[];const b=()=>{y.length>=4&&g.push(...dp(y,d)),y=[]},C=()=>{b(),g.length&&(p.push(g),g=[])};for(const{key:k,data:w}of f)switch(k){case"M":C(),m=[w[0],w[1]],g.push(m);break;case"L":b(),g.push([w[0],w[1]]);break;case"C":if(!y.length){const S=g.length?g[g.length-1]:m;y.push([S[0],S[1]])}y.push([w[0],w[1]]),y.push([w[2],w[3]]),y.push([w[4],w[5]]);break;case"Z":b(),g.push([m[0],m[1]])}if(C(),!h)return p;const v=[];for(const k of p){const w=Rj(k,h);w.length&&v.push(w)}return v})(e,1,a?4-4*(r.simplification||1):(1+r.roughness)/2),c=W1(e,r);if(s)if(r.fillStyle==="solid")if(l.length===1){const u=W1(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(u.ops)})}else i.push(up(l,r));else i.push(ko(l,r));return o&&(a?l.forEach((u=>{i.push(Su(u,!1,r))})):i.push(c)),this._d("path",i,r)}opsToPath(e,n){let r="";for(const i of e.ops){const s=typeof n=="number"&&n>=0?i.data.map((o=>+o.toFixed(n))):i.data;switch(i.op){case"move":r+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":r+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":r+=`L${s[0]} ${s[1]} `}}return r.trim()}toPaths(e){const n=e.sets||[],r=e.options||this.defaultOptions,i=[];for(const s of n){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:qn};break;case"fillPath":o={d:this.opsToPath(s),stroke:qn,strokeWidth:0,fill:r.fill||qn};break;case"fillSketch":o=this.fillSketch(s,r)}o&&i.push(o)}return i}fillSketch(e,n){let r=n.fillWeight;return r<0&&(r=n.strokeWidth/2),{d:this.opsToPath(e),stroke:n.fill||qn,strokeWidth:r,fill:qn}}_mergedShape(e){return e.filter(((n,r)=>r===0||n.op!=="move"))}}class Ij{constructor(e,n){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new nh(n)}draw(e){const n=e.sets||[],r=e.options||this.getDefaultOptions(),i=this.ctx,s=e.options.fixedDecimalPlaceDigits;for(const o of n)switch(o.type){case"path":i.save(),i.strokeStyle=r.stroke==="none"?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,o,s),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";const a=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,o,s,a),i.restore();break}case"fillSketch":this.fillSketch(i,o,r)}}fillSketch(e,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),e.save(),r.fillLineDash&&e.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(e.lineDashOffset=r.fillLineDashOffset),e.strokeStyle=r.fill||"",e.lineWidth=i,this._drawToContext(e,n,r.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,n,r,i="nonzero"){e.beginPath();for(const s of n.ops){const o=typeof r=="number"&&r>=0?s.data.map((a=>+a.toFixed(r))):s.data;switch(s.op){case"move":e.moveTo(o[0],o[1]);break;case"bcurveTo":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":e.lineTo(o[0],o[1])}}n.type==="fillPath"?e.fill(i):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,n,r,i,s){const o=this.gen.line(e,n,r,i,s);return this.draw(o),o}rectangle(e,n,r,i,s){const o=this.gen.rectangle(e,n,r,i,s);return this.draw(o),o}ellipse(e,n,r,i,s){const o=this.gen.ellipse(e,n,r,i,s);return this.draw(o),o}circle(e,n,r,i){const s=this.gen.circle(e,n,r,i);return this.draw(s),s}linearPath(e,n){const r=this.gen.linearPath(e,n);return this.draw(r),r}polygon(e,n){const r=this.gen.polygon(e,n);return this.draw(r),r}arc(e,n,r,i,s,o,a=!1,l){const c=this.gen.arc(e,n,r,i,s,o,a,l);return this.draw(c),c}curve(e,n){const r=this.gen.curve(e,n);return this.draw(r),r}path(e,n){const r=this.gen.path(e,n);return this.draw(r),r}}const Qc="http://www.w3.org/2000/svg";class Dj{constructor(e,n){this.svg=e,this.gen=new nh(n)}draw(e){const n=e.sets||[],r=e.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,s=i.createElementNS(Qc,"g"),o=e.options.fixedDecimalPlaceDigits;for(const a of n){let l=null;switch(a.type){case"path":l=i.createElementNS(Qc,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke",r.stroke),l.setAttribute("stroke-width",r.strokeWidth+""),l.setAttribute("fill","none"),r.strokeLineDash&&l.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break;case"fillPath":l=i.createElementNS(Qc,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",r.fill||""),e.shape!=="curve"&&e.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(i,a,r)}l&&s.appendChild(l)}return s}fillSketch(e,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const s=e.createElementNS(Qc,"path");return s.setAttribute("d",this.opsToPath(n,r.fixedDecimalPlaceDigits)),s.setAttribute("stroke",r.fill||""),s.setAttribute("stroke-width",i+""),s.setAttribute("fill","none"),r.fillLineDash&&s.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,n){return this.gen.opsToPath(e,n)}line(e,n,r,i,s){const o=this.gen.line(e,n,r,i,s);return this.draw(o)}rectangle(e,n,r,i,s){const o=this.gen.rectangle(e,n,r,i,s);return this.draw(o)}ellipse(e,n,r,i,s){const o=this.gen.ellipse(e,n,r,i,s);return this.draw(o)}circle(e,n,r,i){const s=this.gen.circle(e,n,r,i);return this.draw(s)}linearPath(e,n){const r=this.gen.linearPath(e,n);return this.draw(r)}polygon(e,n){const r=this.gen.polygon(e,n);return this.draw(r)}arc(e,n,r,i,s,o,a=!1,l){const c=this.gen.arc(e,n,r,i,s,o,a,l);return this.draw(c)}curve(e,n){const r=this.gen.curve(e,n);return this.draw(r)}path(e,n){const r=this.gen.path(e,n);return this.draw(r)}}var ge={canvas:(t,e)=>new Ij(t,e),svg:(t,e)=>new Dj(t,e),generator:t=>new nh(t),newSeed:()=>nh.newSeed()},Ne=x(async(t,e,n)=>{var d,h;let r;const i=e.useHtmlLabels||zt((d=et())==null?void 0:d.htmlLabels);n?r=n:r="node default";const s=t.insert("g").attr("class",r).attr("id",e.domId||e.id),o=s.insert("g").attr("class","label").attr("style",mn(e.labelStyle));let a;e.label===void 0?a="":a=typeof e.label=="string"?e.label:e.label[0];const l=await cs(o,dr(ho(a),et()),{useHtmlLabels:i,width:e.width||((h=et().flowchart)==null?void 0:h.wrappingWidth),cssClasses:"markdown-node-label",style:e.labelStyle,addSvgBackground:!!e.icon||!!e.img});let c=l.getBBox();const u=((e==null?void 0:e.padding)??0)/2;if(i){const f=l.children[0],p=Ve(l),g=f.getElementsByTagName("img");if(g){const m=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...g].map(y=>new Promise(b=>{function C(){if(y.style.display="flex",y.style.flexDirection="column",m){const v=et().fontSize?et().fontSize:window.getComputedStyle(document.body).fontSize,k=5,[w=BS.fontSize]=Uh(v),S=w*k+"px";y.style.minWidth=S,y.style.maxWidth=S}else y.style.width="100%";b(y)}x(C,"setupImage"),setTimeout(()=>{y.complete&&C()}),y.addEventListener("error",C),y.addEventListener("load",C)})))}c=f.getBoundingClientRect(),p.attr("width",c.width),p.attr("height",c.height)}return i?o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"):o.attr("transform","translate(0, "+-c.height/2+")"),e.centerLabel&&o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:s,bbox:c,halfPadding:u,label:o}},"labelHelper"),hp=x(async(t,e,n)=>{var l,c,u,d,h,f;const r=n.useHtmlLabels||zt((c=(l=et())==null?void 0:l.flowchart)==null?void 0:c.htmlLabels),i=t.insert("g").attr("class","label").attr("style",n.labelStyle||""),s=await cs(i,dr(ho(e),et()),{useHtmlLabels:r,width:n.width||((d=(u=et())==null?void 0:u.flowchart)==null?void 0:d.wrappingWidth),style:n.labelStyle,addSvgBackground:!!n.icon||!!n.img});let o=s.getBBox();const a=n.padding/2;if(zt((f=(h=et())==null?void 0:h.flowchart)==null?void 0:f.htmlLabels)){const p=s.children[0],g=Ve(s);o=p.getBoundingClientRect(),g.attr("width",o.width),g.attr("height",o.height)}return r?i.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"):i.attr("transform","translate(0, "+-o.height/2+")"),n.centerLabel&&i.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),i.insert("rect",":first-child"),{shapeSvg:t,bbox:o,halfPadding:a,label:i}},"insertLabel"),be=x((t,e)=>{const n=e.node().getBBox();t.width=n.width,t.height=n.height},"updateNodeBounds"),Ae=x((t,e)=>(t.look==="handDrawn"?"rough-node":"node")+" "+t.cssClasses+" "+(e||""),"getNodeClasses");function je(t){const e=t.map((n,r)=>`${r===0?"M":"L"}${n.x},${n.y}`);return e.push("Z"),e.join(" ")}x(je,"createPathFromPoints");function rs(t,e,n,r,i,s){const o=[],l=n-t,c=r-e,u=l/s,d=2*Math.PI/u,h=e+c/2;for(let f=0;f<=50;f++){const p=f/50,g=t+p*l,m=h+i*Math.sin(d*(g-t));o.push({x:g,y:m})}return o}x(rs,"generateFullSineWavePoints");function Vl(t,e,n,r,i,s){const o=[],a=i*Math.PI/180,u=(s*Math.PI/180-a)/(r-1);for(let d=0;d<r;d++){const h=a+d*u,f=t+n*Math.cos(h),p=e+n*Math.sin(h);o.push({x:-f,y:-p})}return o}x(Vl,"generateCirclePoints");var Bj=x((t,e)=>{var n=t.x,r=t.y,i=e.x-n,s=e.y-r,o=t.width/2,a=t.height/2,l,c;return Math.abs(s)*o>Math.abs(i)*a?(s<0&&(a=-a),l=s===0?0:a*i/s,c=a):(i<0&&(o=-o),l=o,c=i===0?0:o*s/i),{x:n+l,y:r+c}},"intersectRect"),Ca=Bj;function kT(t,e){e&&t.attr("style",e)}x(kT,"applyStyle");async function ST(t){const e=Ve(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),n=e.append("xhtml:div"),r=et();let i=t.label;t.label&&sa(t.label)&&(i=await p0(t.label.replace(ba.lineBreakRegex,`
`),r));const o='<span class="'+(t.isNode?"nodeLabel":"edgeLabel")+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+i+"</span>";return n.html(dr(o,r)),kT(n,t.labelStyle),n.style("display","inline-block"),n.style("padding-right","1px"),n.style("white-space","nowrap"),n.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}x(ST,"addHtmlLabel");var Pj=x(async(t,e,n,r)=>{let i=t||"";if(typeof i=="object"&&(i=i[0]),zt(et().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),G.info("vertexText"+i);const s={isNode:r,label:ho(i).replace(/fa[blrs]?:fa-[\w-]+/g,a=>`<i class='${a.replace(":"," ")}'></i>`),labelStyle:e&&e.replace("fill:","color:")};return await ST(s)}else{const s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("style",e.replace("color:","fill:"));let o=[];typeof i=="string"?o=i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?o=i:o=[];for(const a of o){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),n?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=a.trim(),s.appendChild(l)}return s}},"createLabel"),Is=Pj,us=x((t,e,n,r,i)=>["M",t+i,e,"H",t+n-i,"A",i,i,0,0,1,t+n,e+i,"V",e+r-i,"A",i,i,0,0,1,t+n-i,e+r,"H",t+i,"A",i,i,0,0,1,t,e+r-i,"V",e+i,"A",i,i,0,0,1,t+i,e,"Z"].join(" "),"createRoundedRectPathD"),_T=x(async(t,e)=>{G.info("Creating subgraph rect for ",e.id,e);const n=et(),{themeVariables:r,handDrawnSeed:i}=n,{clusterBkg:s,clusterBorder:o}=r,{labelStyles:a,nodeStyles:l,borderStyles:c,backgroundStyles:u}=ye(e),d=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),h=zt(n.flowchart.htmlLabels),f=d.insert("g").attr("class","cluster-label "),p=await cs(f,e.label,{style:e.labelStyle,useHtmlLabels:h,isNode:!0});let g=p.getBBox();if(zt(n.flowchart.htmlLabels)){const S=p.children[0],E=Ve(p);g=S.getBoundingClientRect(),E.attr("width",g.width),E.attr("height",g.height)}const m=e.width<=g.width+e.padding?g.width+e.padding:e.width;e.width<=g.width+e.padding?e.diff=(m-e.width)/2-e.padding:e.diff=-e.padding;const y=e.height,b=e.x-m/2,C=e.y-y/2;G.trace("Data ",e,JSON.stringify(e));let v;if(e.look==="handDrawn"){const S=ge.svg(d),E=me(e,{roughness:.7,fill:s,stroke:o,fillWeight:3,seed:i}),I=S.path(us(b,C,m,y,0),E);v=d.insert(()=>(G.debug("Rough node insert CXC",I),I),":first-child"),v.select("path:nth-child(2)").attr("style",c.join(";")),v.select("path").attr("style",u.join(";").replace("fill","stroke"))}else v=d.insert("rect",":first-child"),v.attr("style",l).attr("rx",e.rx).attr("ry",e.ry).attr("x",b).attr("y",C).attr("width",m).attr("height",y);const{subGraphTitleTopMargin:k}=F0(n);if(f.attr("transform",`translate(${e.x-g.width/2}, ${e.y-e.height/2+k})`),a){const S=f.select("span");S&&S.attr("style",a)}const w=v.node().getBBox();return e.offsetX=0,e.width=w.width,e.height=w.height,e.offsetY=g.height-e.padding/2,e.intersect=function(S){return Ca(e,S)},{cluster:d,labelBBox:g}},"rect"),$j=x((t,e)=>{const n=t.insert("g").attr("class","note-cluster").attr("id",e.id),r=n.insert("rect",":first-child"),i=0*e.padding,s=i/2;r.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-s).attr("y",e.y-e.height/2-s).attr("width",e.width+i).attr("height",e.height+i).attr("fill","none");const o=r.node().getBBox();return e.width=o.width,e.height=o.height,e.intersect=function(a){return Ca(e,a)},{cluster:n,labelBBox:{width:0,height:0}}},"noteGroup"),Fj=x(async(t,e)=>{const n=et(),{themeVariables:r,handDrawnSeed:i}=n,{altBackground:s,compositeBackground:o,compositeTitleBackground:a,nodeBorder:l}=r,c=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-id",e.id).attr("data-look",e.look),u=c.insert("g",":first-child"),d=c.insert("g").attr("class","cluster-label");let h=c.append("rect");const f=d.node().appendChild(await Is(e.label,e.labelStyle,void 0,!0));let p=f.getBBox();if(zt(n.flowchart.htmlLabels)){const I=f.children[0],$=Ve(f);p=I.getBoundingClientRect(),$.attr("width",p.width),$.attr("height",p.height)}const g=0*e.padding,m=g/2,y=(e.width<=p.width+e.padding?p.width+e.padding:e.width)+g;e.width<=p.width+e.padding?e.diff=(y-e.width)/2-e.padding:e.diff=-e.padding;const b=e.height+g,C=e.height+g-p.height-6,v=e.x-y/2,k=e.y-b/2;e.width=y;const w=e.y-e.height/2-m+p.height+2;let S;if(e.look==="handDrawn"){const I=e.cssClasses.includes("statediagram-cluster-alt"),$=ge.svg(c),T=e.rx||e.ry?$.path(us(v,k,y,b,10),{roughness:.7,fill:a,fillStyle:"solid",stroke:l,seed:i}):$.rectangle(v,k,y,b,{seed:i});S=c.insert(()=>T,":first-child");const P=$.rectangle(v,w,y,C,{fill:I?s:o,fillStyle:I?"hachure":"solid",stroke:l,seed:i});S=c.insert(()=>T,":first-child"),h=c.insert(()=>P)}else S=u.insert("rect",":first-child"),S.attr("class","outer").attr("x",v).attr("y",k).attr("width",y).attr("height",b).attr("data-look",e.look),h.attr("class","inner").attr("x",v).attr("y",w).attr("width",y).attr("height",C);d.attr("transform",`translate(${e.x-p.width/2}, ${k+1-(zt(n.flowchart.htmlLabels)?0:3)})`);const E=S.node().getBBox();return e.height=E.height,e.offsetX=0,e.offsetY=p.height-e.padding/2,e.labelBBox=p,e.intersect=function(I){return Ca(e,I)},{cluster:c,labelBBox:p}},"roundedWithTitle"),zj=x(async(t,e)=>{G.info("Creating subgraph rect for ",e.id,e);const n=et(),{themeVariables:r,handDrawnSeed:i}=n,{clusterBkg:s,clusterBorder:o}=r,{labelStyles:a,nodeStyles:l,borderStyles:c,backgroundStyles:u}=ye(e),d=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),h=zt(n.flowchart.htmlLabels),f=d.insert("g").attr("class","cluster-label "),p=await cs(f,e.label,{style:e.labelStyle,useHtmlLabels:h,isNode:!0,width:e.width});let g=p.getBBox();if(zt(n.flowchart.htmlLabels)){const S=p.children[0],E=Ve(p);g=S.getBoundingClientRect(),E.attr("width",g.width),E.attr("height",g.height)}const m=e.width<=g.width+e.padding?g.width+e.padding:e.width;e.width<=g.width+e.padding?e.diff=(m-e.width)/2-e.padding:e.diff=-e.padding;const y=e.height,b=e.x-m/2,C=e.y-y/2;G.trace("Data ",e,JSON.stringify(e));let v;if(e.look==="handDrawn"){const S=ge.svg(d),E=me(e,{roughness:.7,fill:s,stroke:o,fillWeight:4,seed:i}),I=S.path(us(b,C,m,y,e.rx),E);v=d.insert(()=>(G.debug("Rough node insert CXC",I),I),":first-child"),v.select("path:nth-child(2)").attr("style",c.join(";")),v.select("path").attr("style",u.join(";").replace("fill","stroke"))}else v=d.insert("rect",":first-child"),v.attr("style",l).attr("rx",e.rx).attr("ry",e.ry).attr("x",b).attr("y",C).attr("width",m).attr("height",y);const{subGraphTitleTopMargin:k}=F0(n);if(f.attr("transform",`translate(${e.x-g.width/2}, ${e.y-e.height/2+k})`),a){const S=f.select("span");S&&S.attr("style",a)}const w=v.node().getBBox();return e.offsetX=0,e.width=w.width,e.height=w.height,e.offsetY=g.height-e.padding/2,e.intersect=function(S){return Ca(e,S)},{cluster:d,labelBBox:g}},"kanbanSection"),Hj=x((t,e)=>{const n=et(),{themeVariables:r,handDrawnSeed:i}=n,{nodeBorder:s}=r,o=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-look",e.look),a=o.insert("g",":first-child"),l=0*e.padding,c=e.width+l;e.diff=-e.padding;const u=e.height+l,d=e.x-c/2,h=e.y-u/2;e.width=c;let f;if(e.look==="handDrawn"){const m=ge.svg(o).rectangle(d,h,c,u,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:s,seed:i});f=o.insert(()=>m,":first-child")}else f=a.insert("rect",":first-child"),f.attr("class","divider").attr("x",d).attr("y",h).attr("width",c).attr("height",u).attr("data-look",e.look);const p=f.node().getBBox();return e.height=p.height,e.offsetX=0,e.offsetY=0,e.intersect=function(g){return Ca(e,g)},{cluster:o,labelBBox:{}}},"divider"),Wj=_T,Uj={rect:_T,squareRect:Wj,roundedWithTitle:Fj,noteGroup:$j,divider:Hj,kanbanSection:zj},ET=new Map,jj=x(async(t,e)=>{const n=e.shape||"rect",r=await Uj[n](t,e);return ET.set(e.id,r),r},"insertCluster"),ste=x(()=>{ET=new Map},"clear");function TT(t,e){return t.intersect(e)}x(TT,"intersectNode");var qj=TT;function MT(t,e,n,r){var i=t.x,s=t.y,o=i-r.x,a=s-r.y,l=Math.sqrt(e*e*a*a+n*n*o*o),c=Math.abs(e*n*o/l);r.x<i&&(c=-c);var u=Math.abs(e*n*a/l);return r.y<s&&(u=-u),{x:i+c,y:s+u}}x(MT,"intersectEllipse");var AT=MT;function NT(t,e,n){return AT(t,e,e,n)}x(NT,"intersectCircle");var Vj=NT;function OT(t,e,n,r){{const i=e.y-t.y,s=t.x-e.x,o=e.x*t.y-t.x*e.y,a=i*n.x+s*n.y+o,l=i*r.x+s*r.y+o,c=1e-6;if(a!==0&&l!==0&&qg(a,l))return;const u=r.y-n.y,d=n.x-r.x,h=r.x*n.y-n.x*r.y,f=u*t.x+d*t.y+h,p=u*e.x+d*e.y+h;if(Math.abs(f)<c&&Math.abs(p)<c&&qg(f,p))return;const g=i*d-u*s;if(g===0)return;const m=Math.abs(g/2);let y=s*h-d*o;const b=y<0?(y-m)/g:(y+m)/g;y=u*o-i*h;const C=y<0?(y-m)/g:(y+m)/g;return{x:b,y:C}}}x(OT,"intersectLine");function qg(t,e){return t*e>0}x(qg,"sameSign");var Gj=OT;function LT(t,e,n){let r=t.x,i=t.y,s=[],o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach(function(u){o=Math.min(o,u.x),a=Math.min(a,u.y)}):(o=Math.min(o,e.x),a=Math.min(a,e.y));let l=r-t.width/2-o,c=i-t.height/2-a;for(let u=0;u<e.length;u++){let d=e[u],h=e[u<e.length-1?u+1:0],f=Gj(t,n,{x:l+d.x,y:c+d.y},{x:l+h.x,y:c+h.y});f&&s.push(f)}return s.length?(s.length>1&&s.sort(function(u,d){let h=u.x-n.x,f=u.y-n.y,p=Math.sqrt(h*h+f*f),g=d.x-n.x,m=d.y-n.y,y=Math.sqrt(g*g+m*m);return p<y?-1:p===y?0:1}),s[0]):t}x(LT,"intersectPolygon");var Kj=LT,ce={node:qj,circle:Vj,ellipse:AT,polygon:Kj,rect:Ca};function RT(t,e){const{labelStyles:n}=ye(e);e.labelStyle=n;const r=Ae(e);let i=r;r||(i="anchor");const s=t.insert("g").attr("class",i).attr("id",e.domId||e.id),o=1,{cssStyles:a}=e,l=ge.svg(s),c=me(e,{fill:"black",stroke:"none",fillStyle:"solid"});e.look!=="handDrawn"&&(c.roughness=0);const u=l.circle(0,0,o*2,c),d=s.insert(()=>u,":first-child");return d.attr("class","anchor").attr("style",mn(a)),be(e,d),e.intersect=function(h){return G.info("Circle intersect",e,o,h),ce.circle(e,o,h)},s}x(RT,"anchor");function Vg(t,e,n,r,i,s,o){const l=(t+n)/2,c=(e+r)/2,u=Math.atan2(r-e,n-t),d=(n-t)/2,h=(r-e)/2,f=d/i,p=h/s,g=Math.sqrt(f**2+p**2);if(g>1)throw new Error("The given radii are too small to create an arc between the points.");const m=Math.sqrt(1-g**2),y=l+m*s*Math.sin(u)*(o?-1:1),b=c-m*i*Math.cos(u)*(o?-1:1),C=Math.atan2((e-b)/s,(t-y)/i);let k=Math.atan2((r-b)/s,(n-y)/i)-C;o&&k<0&&(k+=2*Math.PI),!o&&k>0&&(k-=2*Math.PI);const w=[];for(let S=0;S<20;S++){const E=S/19,I=C+E*k,$=y+i*Math.cos(I),T=b+s*Math.sin(I);w.push({x:$,y:T})}return w}x(Vg,"generateArcPoints");async function IT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ne(t,e,Ae(e)),o=s.width+e.padding+20,a=s.height+e.padding,l=a/2,c=l/(2.5+a/50),{cssStyles:u}=e,d=[{x:o/2,y:-a/2},{x:-o/2,y:-a/2},...Vg(-o/2,-a/2,-o/2,a/2,c,l,!1),{x:o/2,y:a/2},...Vg(o/2,a/2,o/2,-a/2,c,l,!0)],h=ge.svg(i),f=me(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=je(d),g=h.path(p,f),m=i.insert(()=>g,":first-child");return m.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",u),r&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",r),m.attr("transform",`translate(${c/2}, 0)`),be(e,m),e.intersect=function(y){return ce.polygon(e,d,y)},i}x(IT,"bowTieRect");function ds(t,e,n,r){return t.insert("polygon",":first-child").attr("points",r.map(function(i){return i.x+","+i.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+n/2+")")}x(ds,"insertPolygonShape");async function DT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ne(t,e,Ae(e)),o=s.height+e.padding,a=12,l=s.width+e.padding+a,c=0,u=l,d=-o,h=0,f=[{x:c+a,y:d},{x:u,y:d},{x:u,y:h},{x:c,y:h},{x:c,y:d+a},{x:c+a,y:d}];let p;const{cssStyles:g}=e;if(e.look==="handDrawn"){const m=ge.svg(i),y=me(e,{}),b=je(f),C=m.path(b,y);p=i.insert(()=>C,":first-child").attr("transform",`translate(${-l/2}, ${o/2})`),g&&p.attr("style",g)}else p=ds(i,l,o,f);return r&&p.attr("style",r),be(e,p),e.intersect=function(m){return ce.polygon(e,f,m)},i}x(DT,"card");function BT(t,e){const{nodeStyles:n}=ye(e);e.label="";const r=t.insert("g").attr("class",Ae(e)).attr("id",e.domId??e.id),{cssStyles:i}=e,s=Math.max(28,e.width??0),o=[{x:0,y:s/2},{x:s/2,y:0},{x:0,y:-s/2},{x:-s/2,y:0}],a=ge.svg(r),l=me(e,{});e.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=je(o),u=a.path(c,l),d=r.insert(()=>u,":first-child");return i&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",i),n&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",n),e.width=28,e.height=28,e.intersect=function(h){return ce.polygon(e,o,h)},r}x(BT,"choice");async function ly(t,e,n){const{labelStyles:r,nodeStyles:i}=ye(e);e.labelStyle=r;const{shapeSvg:s,bbox:o,halfPadding:a}=await Ne(t,e,Ae(e)),l=(n==null?void 0:n.padding)??a,c=o.width/2+l;let u;const{cssStyles:d}=e;if(e.look==="handDrawn"){const h=ge.svg(s),f=me(e,{}),p=h.circle(0,0,c*2,f);u=s.insert(()=>p,":first-child"),u.attr("class","basic label-container").attr("style",mn(d))}else u=s.insert("circle",":first-child").attr("class","basic label-container").attr("style",i).attr("r",c).attr("cx",0).attr("cy",0);return be(e,u),e.calcIntersect=function(h,f){const p=h.width/2;return ce.circle(h,p,f)},e.intersect=function(h){return G.info("Circle intersect",e,c,h),ce.circle(e,c,h)},s}x(ly,"circle");function PT(t){const e=Math.cos(Math.PI/4),n=Math.sin(Math.PI/4),r=t*2,i={x:r/2*e,y:r/2*n},s={x:-(r/2)*e,y:r/2*n},o={x:-(r/2)*e,y:-(r/2)*n},a={x:r/2*e,y:-(r/2)*n};return`M ${s.x},${s.y} L ${a.x},${a.y}
                   M ${i.x},${i.y} L ${o.x},${o.y}`}x(PT,"createLine");function $T(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n,e.label="";const i=t.insert("g").attr("class",Ae(e)).attr("id",e.domId??e.id),s=Math.max(30,(e==null?void 0:e.width)??0),{cssStyles:o}=e,a=ge.svg(i),l=me(e,{});e.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=a.circle(0,0,s*2,l),u=PT(s),d=a.path(u,l),h=i.insert(()=>c,":first-child");return h.insert(()=>d),o&&e.look!=="handDrawn"&&h.selectAll("path").attr("style",o),r&&e.look!=="handDrawn"&&h.selectAll("path").attr("style",r),be(e,h),e.intersect=function(f){return G.info("crossedCircle intersect",e,{radius:s,point:f}),ce.circle(e,s,f)},i}x($T,"crossedCircle");function ui(t,e,n,r=100,i=0,s=180){const o=[],a=i*Math.PI/180,u=(s*Math.PI/180-a)/(r-1);for(let d=0;d<r;d++){const h=a+d*u,f=t+n*Math.cos(h),p=e+n*Math.sin(h);o.push({x:-f,y:-p})}return o}x(ui,"generateCirclePoints");async function FT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ne(t,e,Ae(e)),a=s.width+(e.padding??0),l=s.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:u}=e,d=[...ui(a/2,-l/2,c,30,-90,0),{x:-a/2-c,y:c},...ui(a/2+c*2,-c,c,20,-180,-270),...ui(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:-l/2},...ui(a/2,l/2,c,20,0,90)],h=[{x:a/2,y:-l/2-c},{x:-a/2,y:-l/2-c},...ui(a/2,-l/2,c,20,-90,0),{x:-a/2-c,y:-c},...ui(a/2+a*.1,-c,c,20,-180,-270),...ui(a/2+a*.1,c,c,20,-90,-180),{x:-a/2-c,y:l/2},...ui(a/2,l/2,c,20,0,90),{x:-a/2,y:l/2+c},{x:a/2,y:l/2+c}],f=ge.svg(i),p=me(e,{fill:"none"});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=je(d).replace("Z",""),y=f.path(m,p),b=je(h),C=f.path(b,{...p}),v=i.insert("g",":first-child");return v.insert(()=>C,":first-child").attr("stroke-opacity",0),v.insert(()=>y,":first-child"),v.attr("class","text"),u&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",u),r&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",r),v.attr("transform",`translate(${c}, 0)`),o.attr("transform",`translate(${-a/2+c-(s.x-(s.left??0))},${-l/2+(e.padding??0)/2-(s.y-(s.top??0))})`),be(e,v),e.intersect=function(k){return ce.polygon(e,h,k)},i}x(FT,"curlyBraceLeft");function di(t,e,n,r=100,i=0,s=180){const o=[],a=i*Math.PI/180,u=(s*Math.PI/180-a)/(r-1);for(let d=0;d<r;d++){const h=a+d*u,f=t+n*Math.cos(h),p=e+n*Math.sin(h);o.push({x:f,y:p})}return o}x(di,"generateCirclePoints");async function zT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ne(t,e,Ae(e)),a=s.width+(e.padding??0),l=s.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:u}=e,d=[...di(a/2,-l/2,c,20,-90,0),{x:a/2+c,y:-c},...di(a/2+c*2,-c,c,20,-180,-270),...di(a/2+c*2,c,c,20,-90,-180),{x:a/2+c,y:l/2},...di(a/2,l/2,c,20,0,90)],h=[{x:-a/2,y:-l/2-c},{x:a/2,y:-l/2-c},...di(a/2,-l/2,c,20,-90,0),{x:a/2+c,y:-c},...di(a/2+c*2,-c,c,20,-180,-270),...di(a/2+c*2,c,c,20,-90,-180),{x:a/2+c,y:l/2},...di(a/2,l/2,c,20,0,90),{x:a/2,y:l/2+c},{x:-a/2,y:l/2+c}],f=ge.svg(i),p=me(e,{fill:"none"});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=je(d).replace("Z",""),y=f.path(m,p),b=je(h),C=f.path(b,{...p}),v=i.insert("g",":first-child");return v.insert(()=>C,":first-child").attr("stroke-opacity",0),v.insert(()=>y,":first-child"),v.attr("class","text"),u&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",u),r&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",r),v.attr("transform",`translate(${-c}, 0)`),o.attr("transform",`translate(${-a/2+(e.padding??0)/2-(s.x-(s.left??0))},${-l/2+(e.padding??0)/2-(s.y-(s.top??0))})`),be(e,v),e.intersect=function(k){return ce.polygon(e,h,k)},i}x(zT,"curlyBraceRight");function Zt(t,e,n,r=100,i=0,s=180){const o=[],a=i*Math.PI/180,u=(s*Math.PI/180-a)/(r-1);for(let d=0;d<r;d++){const h=a+d*u,f=t+n*Math.cos(h),p=e+n*Math.sin(h);o.push({x:-f,y:-p})}return o}x(Zt,"generateCirclePoints");async function HT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ne(t,e,Ae(e)),a=s.width+(e.padding??0),l=s.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:u}=e,d=[...Zt(a/2,-l/2,c,30,-90,0),{x:-a/2-c,y:c},...Zt(a/2+c*2,-c,c,20,-180,-270),...Zt(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:-l/2},...Zt(a/2,l/2,c,20,0,90)],h=[...Zt(-a/2+c+c/2,-l/2,c,20,-90,-180),{x:a/2-c/2,y:c},...Zt(-a/2-c/2,-c,c,20,0,90),...Zt(-a/2-c/2,c,c,20,-90,0),{x:a/2-c/2,y:-c},...Zt(-a/2+c+c/2,l/2,c,30,-180,-270)],f=[{x:a/2,y:-l/2-c},{x:-a/2,y:-l/2-c},...Zt(a/2,-l/2,c,20,-90,0),{x:-a/2-c,y:-c},...Zt(a/2+c*2,-c,c,20,-180,-270),...Zt(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:l/2},...Zt(a/2,l/2,c,20,0,90),{x:-a/2,y:l/2+c},{x:a/2-c-c/2,y:l/2+c},...Zt(-a/2+c+c/2,-l/2,c,20,-90,-180),{x:a/2-c/2,y:c},...Zt(-a/2-c/2,-c,c,20,0,90),...Zt(-a/2-c/2,c,c,20,-90,0),{x:a/2-c/2,y:-c},...Zt(-a/2+c+c/2,l/2,c,30,-180,-270)],p=ge.svg(i),g=me(e,{fill:"none"});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=je(d).replace("Z",""),b=p.path(y,g),v=je(h).replace("Z",""),k=p.path(v,g),w=je(f),S=p.path(w,{...g}),E=i.insert("g",":first-child");return E.insert(()=>S,":first-child").attr("stroke-opacity",0),E.insert(()=>b,":first-child"),E.insert(()=>k,":first-child"),E.attr("class","text"),u&&e.look!=="handDrawn"&&E.selectAll("path").attr("style",u),r&&e.look!=="handDrawn"&&E.selectAll("path").attr("style",r),E.attr("transform",`translate(${c-c/4}, 0)`),o.attr("transform",`translate(${-a/2+(e.padding??0)/2-(s.x-(s.left??0))},${-l/2+(e.padding??0)/2-(s.y-(s.top??0))})`),be(e,E),e.intersect=function(I){return ce.polygon(e,f,I)},i}x(HT,"curlyBraces");async function WT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ne(t,e,Ae(e)),o=80,a=20,l=Math.max(o,(s.width+(e.padding??0)*2)*1.25,(e==null?void 0:e.width)??0),c=Math.max(a,s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=c/2,{cssStyles:d}=e,h=ge.svg(i),f=me(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=l,g=c,m=p-u,y=g/4,b=[{x:m,y:0},{x:y,y:0},{x:0,y:g/2},{x:y,y:g},{x:m,y:g},...Vl(-m,-g/2,u,50,270,90)],C=je(b),v=h.path(C,f),k=i.insert(()=>v,":first-child");return k.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&k.selectChildren("path").attr("style",d),r&&e.look!=="handDrawn"&&k.selectChildren("path").attr("style",r),k.attr("transform",`translate(${-l/2}, ${-c/2})`),be(e,k),e.intersect=function(w){return ce.polygon(e,b,w)},i}x(WT,"curvedTrapezoid");var Yj=x((t,e,n,r,i,s)=>[`M${t},${e+s}`,`a${i},${s} 0,0,0 ${n},0`,`a${i},${s} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${s} 0,0,0 ${n},0`,`l0,${-r}`].join(" "),"createCylinderPathD"),Xj=x((t,e,n,r,i,s)=>[`M${t},${e+s}`,`M${t+n},${e+s}`,`a${i},${s} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${s} 0,0,0 ${n},0`,`l0,${-r}`].join(" "),"createOuterCylinderPathD"),Zj=x((t,e,n,r,i,s)=>[`M${t-n/2},${-r/2}`,`a${i},${s} 0,0,0 ${n},0`].join(" "),"createInnerCylinderPathD");async function UT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ne(t,e,Ae(e)),a=Math.max(s.width+e.padding,e.width??0),l=a/2,c=l/(2.5+a/50),u=Math.max(s.height+c+e.padding,e.height??0);let d;const{cssStyles:h}=e;if(e.look==="handDrawn"){const f=ge.svg(i),p=Xj(0,0,a,u,l,c),g=Zj(0,c,a,u,l,c),m=f.path(p,me(e,{})),y=f.path(g,me(e,{fill:"none"}));d=i.insert(()=>y,":first-child"),d=i.insert(()=>m,":first-child"),d.attr("class","basic label-container"),h&&d.attr("style",h)}else{const f=Yj(0,0,a,u,l,c);d=i.insert("path",":first-child").attr("d",f).attr("class","basic label-container").attr("style",mn(h)).attr("style",r)}return d.attr("label-offset-y",c),d.attr("transform",`translate(${-a/2}, ${-(u/2+c)})`),be(e,d),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+(e.padding??0)/1.5-(s.y-(s.top??0))})`),e.intersect=function(f){const p=ce.rect(e,f),g=p.x-(e.x??0);if(l!=0&&(Math.abs(g)<(e.width??0)/2||Math.abs(g)==(e.width??0)/2&&Math.abs(p.y-(e.y??0))>(e.height??0)/2-c)){let m=c*c*(1-g*g/(l*l));m>0&&(m=Math.sqrt(m)),m=c-m,f.y-(e.y??0)>0&&(m=-m),p.y+=m}return p},i}x(UT,"cylinder");async function jT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ne(t,e,Ae(e)),a=s.width+e.padding,l=s.height+e.padding,c=l*.2,u=-a/2,d=-l/2-c/2,{cssStyles:h}=e,f=ge.svg(i),p=me(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:u,y:d+c},{x:-u,y:d+c},{x:-u,y:-d},{x:u,y:-d},{x:u,y:d},{x:-u,y:d},{x:-u,y:d+c}],m=f.polygon(g.map(b=>[b.x,b.y]),p),y=i.insert(()=>m,":first-child");return y.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",h),r&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",r),o.attr("transform",`translate(${u+(e.padding??0)/2-(s.x-(s.left??0))}, ${d+c+(e.padding??0)/2-(s.y-(s.top??0))})`),be(e,y),e.intersect=function(b){return ce.rect(e,b)},i}x(jT,"dividedRectangle");async function qT(t,e){var h,f;const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,halfPadding:o}=await Ne(t,e,Ae(e)),l=s.width/2+o+5,c=s.width/2+o;let u;const{cssStyles:d}=e;if(e.look==="handDrawn"){const p=ge.svg(i),g=me(e,{roughness:.2,strokeWidth:2.5}),m=me(e,{roughness:.2,strokeWidth:1.5}),y=p.circle(0,0,l*2,g),b=p.circle(0,0,c*2,m);u=i.insert("g",":first-child"),u.attr("class",mn(e.cssClasses)).attr("style",mn(d)),(h=u.node())==null||h.appendChild(y),(f=u.node())==null||f.appendChild(b)}else{u=i.insert("g",":first-child");const p=u.insert("circle",":first-child"),g=u.insert("circle");u.attr("class","basic label-container").attr("style",r),p.attr("class","outer-circle").attr("style",r).attr("r",l).attr("cx",0).attr("cy",0),g.attr("class","inner-circle").attr("style",r).attr("r",c).attr("cx",0).attr("cy",0)}return be(e,u),e.intersect=function(p){return G.info("DoubleCircle intersect",e,l,p),ce.circle(e,l,p)},i}x(qT,"doublecircle");function VT(t,e,{config:{themeVariables:n}}){const{labelStyles:r,nodeStyles:i}=ye(e);e.label="",e.labelStyle=r;const s=t.insert("g").attr("class",Ae(e)).attr("id",e.domId??e.id),o=7,{cssStyles:a}=e,l=ge.svg(s),{nodeBorder:c}=n,u=me(e,{fillStyle:"solid"});e.look!=="handDrawn"&&(u.roughness=0);const d=l.circle(0,0,o*2,u),h=s.insert(()=>d,":first-child");return h.selectAll("path").attr("style",`fill: ${c} !important;`),a&&a.length>0&&e.look!=="handDrawn"&&h.selectAll("path").attr("style",a),i&&e.look!=="handDrawn"&&h.selectAll("path").attr("style",i),be(e,h),e.intersect=function(f){return G.info("filledCircle intersect",e,{radius:o,point:f}),ce.circle(e,o,f)},s}x(VT,"filledCircle");async function GT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ne(t,e,Ae(e)),a=s.width+(e.padding??0),l=a+s.height,c=a+s.height,u=[{x:0,y:-l},{x:c,y:-l},{x:c/2,y:0}],{cssStyles:d}=e,h=ge.svg(i),f=me(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=je(u),g=h.path(p,f),m=i.insert(()=>g,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return d&&e.look!=="handDrawn"&&m.selectChildren("path").attr("style",d),r&&e.look!=="handDrawn"&&m.selectChildren("path").attr("style",r),e.width=a,e.height=l,be(e,m),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-l/2+(e.padding??0)/2+(s.y-(s.top??0))})`),e.intersect=function(y){return G.info("Triangle intersect",e,u,y),ce.polygon(e,u,y)},i}x(GT,"flippedTriangle");function KT(t,e,{dir:n,config:{state:r,themeVariables:i}}){const{nodeStyles:s}=ye(e);e.label="";const o=t.insert("g").attr("class",Ae(e)).attr("id",e.domId??e.id),{cssStyles:a}=e;let l=Math.max(70,(e==null?void 0:e.width)??0),c=Math.max(10,(e==null?void 0:e.height)??0);n==="LR"&&(l=Math.max(10,(e==null?void 0:e.width)??0),c=Math.max(70,(e==null?void 0:e.height)??0));const u=-1*l/2,d=-1*c/2,h=ge.svg(o),f=me(e,{stroke:i.lineColor,fill:i.lineColor});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=h.rectangle(u,d,l,c,f),g=o.insert(()=>p,":first-child");a&&e.look!=="handDrawn"&&g.selectAll("path").attr("style",a),s&&e.look!=="handDrawn"&&g.selectAll("path").attr("style",s),be(e,g);const m=(r==null?void 0:r.padding)??0;return e.width&&e.height&&(e.width+=m/2||0,e.height+=m/2||0),e.intersect=function(y){return ce.rect(e,y)},o}x(KT,"forkJoin");async function YT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const i=80,s=50,{shapeSvg:o,bbox:a}=await Ne(t,e,Ae(e)),l=Math.max(i,a.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),c=Math.max(s,a.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=c/2,{cssStyles:d}=e,h=ge.svg(o),f=me(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:-l/2,y:-c/2},{x:l/2-u,y:-c/2},...Vl(-l/2+u,0,u,50,90,270),{x:l/2-u,y:c/2},{x:-l/2,y:c/2}],g=je(p),m=h.path(g,f),y=o.insert(()=>m,":first-child");return y.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",d),r&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",r),be(e,y),e.intersect=function(b){return G.info("Pill intersect",e,{radius:u,point:b}),ce.polygon(e,p,b)},o}x(YT,"halfRoundedRectangle");async function XT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ne(t,e,Ae(e)),o=s.height+(e.padding??0),a=s.width+(e.padding??0)*2.5,{cssStyles:l}=e,c=ge.svg(i),u=me(e,{});e.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");let d=a/2;const h=d/6;d=d+h;const f=o/2,p=f/2,g=d-p,m=[{x:-g,y:-f},{x:0,y:-f},{x:g,y:-f},{x:d,y:0},{x:g,y:f},{x:0,y:f},{x:-g,y:f},{x:-d,y:0}],y=je(m),b=c.path(y,u),C=i.insert(()=>b,":first-child");return C.attr("class","basic label-container"),l&&e.look!=="handDrawn"&&C.selectChildren("path").attr("style",l),r&&e.look!=="handDrawn"&&C.selectChildren("path").attr("style",r),e.width=a,e.height=o,be(e,C),e.intersect=function(v){return ce.polygon(e,m,v)},i}x(XT,"hexagon");async function ZT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.label="",e.labelStyle=n;const{shapeSvg:i}=await Ne(t,e,Ae(e)),s=Math.max(30,(e==null?void 0:e.width)??0),o=Math.max(30,(e==null?void 0:e.height)??0),{cssStyles:a}=e,l=ge.svg(i),c=me(e,{});e.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const u=[{x:0,y:0},{x:s,y:0},{x:0,y:o},{x:s,y:o}],d=je(u),h=l.path(d,c),f=i.insert(()=>h,":first-child");return f.attr("class","basic label-container"),a&&e.look!=="handDrawn"&&f.selectChildren("path").attr("style",a),r&&e.look!=="handDrawn"&&f.selectChildren("path").attr("style",r),f.attr("transform",`translate(${-s/2}, ${-o/2})`),be(e,f),e.intersect=function(p){return G.info("Pill intersect",e,{points:u}),ce.polygon(e,u,p)},i}x(ZT,"hourglass");async function JT(t,e,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:i}=ye(e);e.labelStyle=i;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=r==null?void 0:r.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:u,label:d}=await Ne(t,e,"icon-shape default"),h=e.pos==="t",f=a,p=a,{nodeBorder:g}=n,{stylesMap:m}=xa(e),y=-p/2,b=-f/2,C=e.label?8:0,v=ge.svg(c),k=me(e,{stroke:"none",fill:"none"});e.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const w=v.rectangle(y,b,p,f,k),S=Math.max(p,u.width),E=f+u.height+C,I=v.rectangle(-S/2,-E/2,S,E,{...k,fill:"transparent",stroke:"none"}),$=c.insert(()=>w,":first-child"),T=c.insert(()=>I);if(e.icon){const P=c.append("g");P.html(`<g>${await fc(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const B=P.node().getBBox(),A=B.width,M=B.height,O=B.x,F=B.y;P.attr("transform",`translate(${-A/2-O},${h?u.height/2+C/2-M/2-F:-u.height/2-C/2-M/2-F})`),P.attr("style",`color: ${m.get("stroke")??g};`)}return d.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${h?-E/2:E/2-u.height})`),$.attr("transform",`translate(0,${h?u.height/2+C/2:-u.height/2-C/2})`),be(e,T),e.intersect=function(P){if(G.info("iconSquare intersect",e,P),!e.label)return ce.rect(e,P);const B=e.x??0,A=e.y??0,M=e.height??0;let O=[];return h?O=[{x:B-u.width/2,y:A-M/2},{x:B+u.width/2,y:A-M/2},{x:B+u.width/2,y:A-M/2+u.height+C},{x:B+p/2,y:A-M/2+u.height+C},{x:B+p/2,y:A+M/2},{x:B-p/2,y:A+M/2},{x:B-p/2,y:A-M/2+u.height+C},{x:B-u.width/2,y:A-M/2+u.height+C}]:O=[{x:B-p/2,y:A-M/2},{x:B+p/2,y:A-M/2},{x:B+p/2,y:A-M/2+f},{x:B+u.width/2,y:A-M/2+f},{x:B+u.width/2/2,y:A+M/2},{x:B-u.width/2,y:A+M/2},{x:B-u.width/2,y:A-M/2+f},{x:B-p/2,y:A-M/2+f}],ce.polygon(e,O,P)},c}x(JT,"icon");async function QT(t,e,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:i}=ye(e);e.labelStyle=i;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=r==null?void 0:r.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:u,label:d}=await Ne(t,e,"icon-shape default"),h=20,f=e.label?8:0,p=e.pos==="t",{nodeBorder:g,mainBkg:m}=n,{stylesMap:y}=xa(e),b=ge.svg(c),C=me(e,{});e.look!=="handDrawn"&&(C.roughness=0,C.fillStyle="solid");const v=y.get("fill");C.stroke=v??m;const k=c.append("g");e.icon&&k.html(`<g>${await fc(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const w=k.node().getBBox(),S=w.width,E=w.height,I=w.x,$=w.y,T=Math.max(S,E)*Math.SQRT2+h*2,P=b.circle(0,0,T,C),B=Math.max(T,u.width),A=T+u.height+f,M=b.rectangle(-B/2,-A/2,B,A,{...C,fill:"transparent",stroke:"none"}),O=c.insert(()=>P,":first-child"),F=c.insert(()=>M);return k.attr("transform",`translate(${-S/2-I},${p?u.height/2+f/2-E/2-$:-u.height/2-f/2-E/2-$})`),k.attr("style",`color: ${y.get("stroke")??g};`),d.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${p?-A/2:A/2-u.height})`),O.attr("transform",`translate(0,${p?u.height/2+f/2:-u.height/2-f/2})`),be(e,F),e.intersect=function(R){return G.info("iconSquare intersect",e,R),ce.rect(e,R)},c}x(QT,"iconCircle");async function eM(t,e,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:i}=ye(e);e.labelStyle=i;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=r==null?void 0:r.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:u,halfPadding:d,label:h}=await Ne(t,e,"icon-shape default"),f=e.pos==="t",p=a+d*2,g=a+d*2,{nodeBorder:m,mainBkg:y}=n,{stylesMap:b}=xa(e),C=-g/2,v=-p/2,k=e.label?8:0,w=ge.svg(c),S=me(e,{});e.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const E=b.get("fill");S.stroke=E??y;const I=w.path(us(C,v,g,p,5),S),$=Math.max(g,u.width),T=p+u.height+k,P=w.rectangle(-$/2,-T/2,$,T,{...S,fill:"transparent",stroke:"none"}),B=c.insert(()=>I,":first-child").attr("class","icon-shape2"),A=c.insert(()=>P);if(e.icon){const M=c.append("g");M.html(`<g>${await fc(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const O=M.node().getBBox(),F=O.width,R=O.height,q=O.x,Z=O.y;M.attr("transform",`translate(${-F/2-q},${f?u.height/2+k/2-R/2-Z:-u.height/2-k/2-R/2-Z})`),M.attr("style",`color: ${b.get("stroke")??m};`)}return h.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${f?-T/2:T/2-u.height})`),B.attr("transform",`translate(0,${f?u.height/2+k/2:-u.height/2-k/2})`),be(e,A),e.intersect=function(M){if(G.info("iconSquare intersect",e,M),!e.label)return ce.rect(e,M);const O=e.x??0,F=e.y??0,R=e.height??0;let q=[];return f?q=[{x:O-u.width/2,y:F-R/2},{x:O+u.width/2,y:F-R/2},{x:O+u.width/2,y:F-R/2+u.height+k},{x:O+g/2,y:F-R/2+u.height+k},{x:O+g/2,y:F+R/2},{x:O-g/2,y:F+R/2},{x:O-g/2,y:F-R/2+u.height+k},{x:O-u.width/2,y:F-R/2+u.height+k}]:q=[{x:O-g/2,y:F-R/2},{x:O+g/2,y:F-R/2},{x:O+g/2,y:F-R/2+p},{x:O+u.width/2,y:F-R/2+p},{x:O+u.width/2/2,y:F+R/2},{x:O-u.width/2,y:F+R/2},{x:O-u.width/2,y:F-R/2+p},{x:O-g/2,y:F-R/2+p}],ce.polygon(e,q,M)},c}x(eM,"iconRounded");async function tM(t,e,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:i}=ye(e);e.labelStyle=i;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=r==null?void 0:r.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:u,halfPadding:d,label:h}=await Ne(t,e,"icon-shape default"),f=e.pos==="t",p=a+d*2,g=a+d*2,{nodeBorder:m,mainBkg:y}=n,{stylesMap:b}=xa(e),C=-g/2,v=-p/2,k=e.label?8:0,w=ge.svg(c),S=me(e,{});e.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const E=b.get("fill");S.stroke=E??y;const I=w.path(us(C,v,g,p,.1),S),$=Math.max(g,u.width),T=p+u.height+k,P=w.rectangle(-$/2,-T/2,$,T,{...S,fill:"transparent",stroke:"none"}),B=c.insert(()=>I,":first-child"),A=c.insert(()=>P);if(e.icon){const M=c.append("g");M.html(`<g>${await fc(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const O=M.node().getBBox(),F=O.width,R=O.height,q=O.x,Z=O.y;M.attr("transform",`translate(${-F/2-q},${f?u.height/2+k/2-R/2-Z:-u.height/2-k/2-R/2-Z})`),M.attr("style",`color: ${b.get("stroke")??m};`)}return h.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${f?-T/2:T/2-u.height})`),B.attr("transform",`translate(0,${f?u.height/2+k/2:-u.height/2-k/2})`),be(e,A),e.intersect=function(M){if(G.info("iconSquare intersect",e,M),!e.label)return ce.rect(e,M);const O=e.x??0,F=e.y??0,R=e.height??0;let q=[];return f?q=[{x:O-u.width/2,y:F-R/2},{x:O+u.width/2,y:F-R/2},{x:O+u.width/2,y:F-R/2+u.height+k},{x:O+g/2,y:F-R/2+u.height+k},{x:O+g/2,y:F+R/2},{x:O-g/2,y:F+R/2},{x:O-g/2,y:F-R/2+u.height+k},{x:O-u.width/2,y:F-R/2+u.height+k}]:q=[{x:O-g/2,y:F-R/2},{x:O+g/2,y:F-R/2},{x:O+g/2,y:F-R/2+p},{x:O+u.width/2,y:F-R/2+p},{x:O+u.width/2/2,y:F+R/2},{x:O-u.width/2,y:F+R/2},{x:O-u.width/2,y:F-R/2+p},{x:O-g/2,y:F-R/2+p}],ce.polygon(e,q,M)},c}x(tM,"iconSquare");async function nM(t,e,{config:{flowchart:n}}){const r=new Image;r.src=(e==null?void 0:e.img)??"",await r.decode();const i=Number(r.naturalWidth.toString().replace("px","")),s=Number(r.naturalHeight.toString().replace("px",""));e.imageAspectRatio=i/s;const{labelStyles:o}=ye(e);e.labelStyle=o;const a=n==null?void 0:n.wrappingWidth;e.defaultWidth=n==null?void 0:n.wrappingWidth;const l=Math.max(e.label?a??0:0,(e==null?void 0:e.assetWidth)??i),c=e.constraint==="on"&&e!=null&&e.assetHeight?e.assetHeight*e.imageAspectRatio:l,u=e.constraint==="on"?c/e.imageAspectRatio:(e==null?void 0:e.assetHeight)??s;e.width=Math.max(c,a??0);const{shapeSvg:d,bbox:h,label:f}=await Ne(t,e,"image-shape default"),p=e.pos==="t",g=-c/2,m=-u/2,y=e.label?8:0,b=ge.svg(d),C=me(e,{});e.look!=="handDrawn"&&(C.roughness=0,C.fillStyle="solid");const v=b.rectangle(g,m,c,u,C),k=Math.max(c,h.width),w=u+h.height+y,S=b.rectangle(-k/2,-w/2,k,w,{...C,fill:"none",stroke:"none"}),E=d.insert(()=>v,":first-child"),I=d.insert(()=>S);if(e.img){const $=d.append("image");$.attr("href",e.img),$.attr("width",c),$.attr("height",u),$.attr("preserveAspectRatio","none"),$.attr("transform",`translate(${-c/2},${p?w/2-u:-w/2})`)}return f.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${p?-u/2-h.height/2-y/2:u/2-h.height/2+y/2})`),E.attr("transform",`translate(0,${p?h.height/2+y/2:-h.height/2-y/2})`),be(e,I),e.intersect=function($){if(G.info("iconSquare intersect",e,$),!e.label)return ce.rect(e,$);const T=e.x??0,P=e.y??0,B=e.height??0;let A=[];return p?A=[{x:T-h.width/2,y:P-B/2},{x:T+h.width/2,y:P-B/2},{x:T+h.width/2,y:P-B/2+h.height+y},{x:T+c/2,y:P-B/2+h.height+y},{x:T+c/2,y:P+B/2},{x:T-c/2,y:P+B/2},{x:T-c/2,y:P-B/2+h.height+y},{x:T-h.width/2,y:P-B/2+h.height+y}]:A=[{x:T-c/2,y:P-B/2},{x:T+c/2,y:P-B/2},{x:T+c/2,y:P-B/2+u},{x:T+h.width/2,y:P-B/2+u},{x:T+h.width/2/2,y:P+B/2},{x:T-h.width/2,y:P+B/2},{x:T-h.width/2,y:P-B/2+u},{x:T-c/2,y:P-B/2+u}],ce.polygon(e,A,$)},d}x(nM,"imageSquare");async function rM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ne(t,e,Ae(e)),o=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),a=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),l=[{x:0,y:0},{x:o,y:0},{x:o+3*a/6,y:-a},{x:-3*a/6,y:-a}];let c;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=ge.svg(i),h=me(e,{}),f=je(l),p=d.path(f,h);c=i.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),u&&c.attr("style",u)}else c=ds(i,o,a,l);return r&&c.attr("style",r),e.width=o,e.height=a,be(e,c),e.intersect=function(d){return ce.polygon(e,l,d)},i}x(rM,"inv_trapezoid");async function Yh(t,e,n){const{labelStyles:r,nodeStyles:i}=ye(e);e.labelStyle=r;const{shapeSvg:s,bbox:o}=await Ne(t,e,Ae(e)),a=Math.max(o.width+n.labelPaddingX*2,(e==null?void 0:e.width)||0),l=Math.max(o.height+n.labelPaddingY*2,(e==null?void 0:e.height)||0),c=-a/2,u=-l/2;let d,{rx:h,ry:f}=e;const{cssStyles:p}=e;if(n!=null&&n.rx&&n.ry&&(h=n.rx,f=n.ry),e.look==="handDrawn"){const g=ge.svg(s),m=me(e,{}),y=h||f?g.path(us(c,u,a,l,h||0),m):g.rectangle(c,u,a,l,m);d=s.insert(()=>y,":first-child"),d.attr("class","basic label-container").attr("style",mn(p))}else d=s.insert("rect",":first-child"),d.attr("class","basic label-container").attr("style",i).attr("rx",mn(h)).attr("ry",mn(f)).attr("x",c).attr("y",u).attr("width",a).attr("height",l);return be(e,d),e.calcIntersect=function(g,m){return ce.rect(g,m)},e.intersect=function(g){return ce.rect(e,g)},s}x(Yh,"drawRect");async function iM(t,e){const{shapeSvg:n,bbox:r,label:i}=await Ne(t,e,"label"),s=n.insert("rect",":first-child");return s.attr("width",.1).attr("height",.1),n.attr("class","label edgeLabel"),i.attr("transform",`translate(${-(r.width/2)-(r.x-(r.left??0))}, ${-(r.height/2)-(r.y-(r.top??0))})`),be(e,s),e.intersect=function(l){return ce.rect(e,l)},n}x(iM,"labelRect");async function sM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ne(t,e,Ae(e)),o=Math.max(s.width+(e.padding??0),(e==null?void 0:e.width)??0),a=Math.max(s.height+(e.padding??0),(e==null?void 0:e.height)??0),l=[{x:0,y:0},{x:o+3*a/6,y:0},{x:o,y:-a},{x:-(3*a)/6,y:-a}];let c;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=ge.svg(i),h=me(e,{}),f=je(l),p=d.path(f,h);c=i.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),u&&c.attr("style",u)}else c=ds(i,o,a,l);return r&&c.attr("style",r),e.width=o,e.height=a,be(e,c),e.intersect=function(d){return ce.polygon(e,l,d)},i}x(sM,"lean_left");async function oM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ne(t,e,Ae(e)),o=Math.max(s.width+(e.padding??0),(e==null?void 0:e.width)??0),a=Math.max(s.height+(e.padding??0),(e==null?void 0:e.height)??0),l=[{x:-3*a/6,y:0},{x:o,y:0},{x:o+3*a/6,y:-a},{x:0,y:-a}];let c;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=ge.svg(i),h=me(e,{}),f=je(l),p=d.path(f,h);c=i.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),u&&c.attr("style",u)}else c=ds(i,o,a,l);return r&&c.attr("style",r),e.width=o,e.height=a,be(e,c),e.intersect=function(d){return ce.polygon(e,l,d)},i}x(oM,"lean_right");function aM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.label="",e.labelStyle=n;const i=t.insert("g").attr("class",Ae(e)).attr("id",e.domId??e.id),{cssStyles:s}=e,o=Math.max(35,(e==null?void 0:e.width)??0),a=Math.max(35,(e==null?void 0:e.height)??0),l=7,c=[{x:o,y:0},{x:0,y:a+l/2},{x:o-2*l,y:a+l/2},{x:0,y:2*a},{x:o,y:a-l/2},{x:2*l,y:a-l/2}],u=ge.svg(i),d=me(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const h=je(c),f=u.path(h,d),p=i.insert(()=>f,":first-child");return s&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",s),r&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",r),p.attr("transform",`translate(-${o/2},${-a})`),be(e,p),e.intersect=function(g){return G.info("lightningBolt intersect",e,g),ce.polygon(e,c,g)},i}x(aM,"lightningBolt");var Jj=x((t,e,n,r,i,s,o)=>[`M${t},${e+s}`,`a${i},${s} 0,0,0 ${n},0`,`a${i},${s} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${s} 0,0,0 ${n},0`,`l0,${-r}`,`M${t},${e+s+o}`,`a${i},${s} 0,0,0 ${n},0`].join(" "),"createCylinderPathD"),Qj=x((t,e,n,r,i,s,o)=>[`M${t},${e+s}`,`M${t+n},${e+s}`,`a${i},${s} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${s} 0,0,0 ${n},0`,`l0,${-r}`,`M${t},${e+s+o}`,`a${i},${s} 0,0,0 ${n},0`].join(" "),"createOuterCylinderPathD"),eq=x((t,e,n,r,i,s)=>[`M${t-n/2},${-r/2}`,`a${i},${s} 0,0,0 ${n},0`].join(" "),"createInnerCylinderPathD");async function lM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ne(t,e,Ae(e)),a=Math.max(s.width+(e.padding??0),e.width??0),l=a/2,c=l/(2.5+a/50),u=Math.max(s.height+c+(e.padding??0),e.height??0),d=u*.1;let h;const{cssStyles:f}=e;if(e.look==="handDrawn"){const p=ge.svg(i),g=Qj(0,0,a,u,l,c,d),m=eq(0,c,a,u,l,c),y=me(e,{}),b=p.path(g,y),C=p.path(m,y);i.insert(()=>C,":first-child").attr("class","line"),h=i.insert(()=>b,":first-child"),h.attr("class","basic label-container"),f&&h.attr("style",f)}else{const p=Jj(0,0,a,u,l,c,d);h=i.insert("path",":first-child").attr("d",p).attr("class","basic label-container").attr("style",mn(f)).attr("style",r)}return h.attr("label-offset-y",c),h.attr("transform",`translate(${-a/2}, ${-(u/2+c)})`),be(e,h),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+c-(s.y-(s.top??0))})`),e.intersect=function(p){const g=ce.rect(e,p),m=g.x-(e.x??0);if(l!=0&&(Math.abs(m)<(e.width??0)/2||Math.abs(m)==(e.width??0)/2&&Math.abs(g.y-(e.y??0))>(e.height??0)/2-c)){let y=c*c*(1-m*m/(l*l));y>0&&(y=Math.sqrt(y)),y=c-y,p.y-(e.y??0)>0&&(y=-y),g.y+=y}return g},i}x(lM,"linedCylinder");async function cM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ne(t,e,Ae(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=l/4,u=l+c,{cssStyles:d}=e,h=ge.svg(i),f=me(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:-a/2-a/2*.1,y:-u/2},{x:-a/2-a/2*.1,y:u/2},...rs(-a/2-a/2*.1,u/2,a/2+a/2*.1,u/2,c,.8),{x:a/2+a/2*.1,y:-u/2},{x:-a/2-a/2*.1,y:-u/2},{x:-a/2,y:-u/2},{x:-a/2,y:u/2*1.1},{x:-a/2,y:-u/2}],g=h.polygon(p.map(y=>[y.x,y.y]),f),m=i.insert(()=>g,":first-child");return m.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",d),r&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",r),m.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)+a/2*.1/2-(s.x-(s.left??0))},${-l/2+(e.padding??0)-c/2-(s.y-(s.top??0))})`),be(e,m),e.intersect=function(y){return ce.polygon(e,p,y)},i}x(cM,"linedWaveEdgedRect");async function uM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ne(t,e,Ae(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=5,u=-a/2,d=-l/2,{cssStyles:h}=e,f=ge.svg(i),p=me(e,{}),g=[{x:u-c,y:d+c},{x:u-c,y:d+l+c},{x:u+a-c,y:d+l+c},{x:u+a-c,y:d+l},{x:u+a,y:d+l},{x:u+a,y:d+l-c},{x:u+a+c,y:d+l-c},{x:u+a+c,y:d-c},{x:u+c,y:d-c},{x:u+c,y:d},{x:u,y:d},{x:u,y:d+c}],m=[{x:u,y:d+c},{x:u+a-c,y:d+c},{x:u+a-c,y:d+l},{x:u+a,y:d+l},{x:u+a,y:d},{x:u,y:d}];e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=je(g),b=f.path(y,p),C=je(m),v=f.path(C,{...p,fill:"none"}),k=i.insert(()=>v,":first-child");return k.insert(()=>b,":first-child"),k.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&k.selectAll("path").attr("style",h),r&&e.look!=="handDrawn"&&k.selectAll("path").attr("style",r),o.attr("transform",`translate(${-(s.width/2)-c-(s.x-(s.left??0))}, ${-(s.height/2)+c-(s.y-(s.top??0))})`),be(e,k),e.intersect=function(w){return ce.polygon(e,g,w)},i}x(uM,"multiRect");async function dM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ne(t,e,Ae(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=l/4,u=l+c,d=-a/2,h=-u/2,f=5,{cssStyles:p}=e,g=rs(d-f,h+u+f,d+a-f,h+u+f,c,.8),m=g==null?void 0:g[g.length-1],y=[{x:d-f,y:h+f},{x:d-f,y:h+u+f},...g,{x:d+a-f,y:m.y-f},{x:d+a,y:m.y-f},{x:d+a,y:m.y-2*f},{x:d+a+f,y:m.y-2*f},{x:d+a+f,y:h-f},{x:d+f,y:h-f},{x:d+f,y:h},{x:d,y:h},{x:d,y:h+f}],b=[{x:d,y:h+f},{x:d+a-f,y:h+f},{x:d+a-f,y:m.y-f},{x:d+a,y:m.y-f},{x:d+a,y:h},{x:d,y:h}],C=ge.svg(i),v=me(e,{});e.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const k=je(y),w=C.path(k,v),S=je(b),E=C.path(S,v),I=i.insert(()=>w,":first-child");return I.insert(()=>E),I.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&I.selectAll("path").attr("style",p),r&&e.look!=="handDrawn"&&I.selectAll("path").attr("style",r),I.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-(s.width/2)-f-(s.x-(s.left??0))}, ${-(s.height/2)+f-c/2-(s.y-(s.top??0))})`),be(e,I),e.intersect=function($){return ce.polygon(e,y,$)},i}x(dM,"multiWaveEdgedRectangle");async function hM(t,e,{config:{themeVariables:n}}){var b;const{labelStyles:r,nodeStyles:i}=ye(e);e.labelStyle=r,e.useHtmlLabels||((b=pn().flowchart)==null?void 0:b.htmlLabels)!==!1||(e.centerLabel=!0);const{shapeSvg:o,bbox:a,label:l}=await Ne(t,e,Ae(e)),c=Math.max(a.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),u=Math.max(a.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),d=-c/2,h=-u/2,{cssStyles:f}=e,p=ge.svg(o),g=me(e,{fill:n.noteBkgColor,stroke:n.noteBorderColor});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const m=p.rectangle(d,h,c,u,g),y=o.insert(()=>m,":first-child");return y.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",f),i&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",i),l.attr("transform",`translate(${-a.width/2-(a.x-(a.left??0))}, ${-(a.height/2)-(a.y-(a.top??0))})`),be(e,y),e.intersect=function(C){return ce.rect(e,C)},o}x(hM,"note");var tq=x((t,e,n)=>[`M${t+n/2},${e}`,`L${t+n},${e-n/2}`,`L${t+n/2},${e-n}`,`L${t},${e-n/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function fM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ne(t,e,Ae(e)),o=s.width+e.padding,a=s.height+e.padding,l=o+a,c=.5,u=[{x:l/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}];let d;const{cssStyles:h}=e;if(e.look==="handDrawn"){const f=ge.svg(i),p=me(e,{}),g=tq(0,0,l),m=f.path(g,p);d=i.insert(()=>m,":first-child").attr("transform",`translate(${-l/2+c}, ${l/2})`),h&&d.attr("style",h)}else d=ds(i,l,l,u),d.attr("transform",`translate(${-l/2+c}, ${l/2})`);return r&&d.attr("style",r),be(e,d),e.calcIntersect=function(f,p){const g=f.width,m=[{x:g/2,y:0},{x:g,y:-g/2},{x:g/2,y:-g},{x:0,y:-g/2}],y=ce.polygon(f,m,p);return{x:y.x-.5,y:y.y-.5}},e.intersect=function(f){return this.calcIntersect(e,f)},i}x(fM,"question");async function pM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ne(t,e,Ae(e)),a=Math.max(s.width+(e.padding??0),(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0),(e==null?void 0:e.height)??0),c=-a/2,u=-l/2,d=u/2,h=[{x:c+d,y:u},{x:c,y:0},{x:c+d,y:-u},{x:-c,y:-u},{x:-c,y:u}],{cssStyles:f}=e,p=ge.svg(i),g=me(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const m=je(h),y=p.path(m,g),b=i.insert(()=>y,":first-child");return b.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",f),r&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",r),b.attr("transform",`translate(${-d/2},0)`),o.attr("transform",`translate(${-d/2-s.width/2-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),be(e,b),e.intersect=function(C){return ce.polygon(e,h,C)},i}x(pM,"rect_left_inv_arrow");async function gM(t,e){var E,I;const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;let i;e.cssClasses?i="node "+e.cssClasses:i="node default";const s=t.insert("g").attr("class",i).attr("id",e.domId||e.id),o=s.insert("g"),a=s.insert("g").attr("class","label").attr("style",r),l=e.description,c=e.label,u=a.node().appendChild(await Is(c,e.labelStyle,!0,!0));let d={width:0,height:0};if(zt((I=(E=et())==null?void 0:E.flowchart)==null?void 0:I.htmlLabels)){const $=u.children[0],T=Ve(u);d=$.getBoundingClientRect(),T.attr("width",d.width),T.attr("height",d.height)}G.info("Text 2",l);const h=l||[],f=u.getBBox(),p=a.node().appendChild(await Is(h.join?h.join("<br/>"):h,e.labelStyle,!0,!0)),g=p.children[0],m=Ve(p);d=g.getBoundingClientRect(),m.attr("width",d.width),m.attr("height",d.height);const y=(e.padding||0)/2;Ve(p).attr("transform","translate( "+(d.width>f.width?0:(f.width-d.width)/2)+", "+(f.height+y+5)+")"),Ve(u).attr("transform","translate( "+(d.width<f.width?0:-(f.width-d.width)/2)+", 0)"),d=a.node().getBBox(),a.attr("transform","translate("+-d.width/2+", "+(-d.height/2-y+3)+")");const b=d.width+(e.padding||0),C=d.height+(e.padding||0),v=-d.width/2-y,k=-d.height/2-y;let w,S;if(e.look==="handDrawn"){const $=ge.svg(s),T=me(e,{}),P=$.path(us(v,k,b,C,e.rx||0),T),B=$.line(-d.width/2-y,-d.height/2-y+f.height+y,d.width/2+y,-d.height/2-y+f.height+y,T);S=s.insert(()=>(G.debug("Rough node insert CXC",P),B),":first-child"),w=s.insert(()=>(G.debug("Rough node insert CXC",P),P),":first-child")}else w=o.insert("rect",":first-child"),S=o.insert("line"),w.attr("class","outer title-state").attr("style",r).attr("x",-d.width/2-y).attr("y",-d.height/2-y).attr("width",d.width+(e.padding||0)).attr("height",d.height+(e.padding||0)),S.attr("class","divider").attr("x1",-d.width/2-y).attr("x2",d.width/2+y).attr("y1",-d.height/2-y+f.height+y).attr("y2",-d.height/2-y+f.height+y);return be(e,w),e.intersect=function($){return ce.rect(e,$)},s}x(gM,"rectWithTitle");function el(t,e,n,r,i,s,o){const l=(t+n)/2,c=(e+r)/2,u=Math.atan2(r-e,n-t),d=(n-t)/2,h=(r-e)/2,f=d/i,p=h/s,g=Math.sqrt(f**2+p**2);if(g>1)throw new Error("The given radii are too small to create an arc between the points.");const m=Math.sqrt(1-g**2),y=l+m*s*Math.sin(u)*(o?-1:1),b=c-m*i*Math.cos(u)*(o?-1:1),C=Math.atan2((e-b)/s,(t-y)/i);let k=Math.atan2((r-b)/s,(n-y)/i)-C;o&&k<0&&(k+=2*Math.PI),!o&&k>0&&(k-=2*Math.PI);const w=[];for(let S=0;S<20;S++){const E=S/19,I=C+E*k,$=y+i*Math.cos(I),T=b+s*Math.sin(I);w.push({x:$,y:T})}return w}x(el,"generateArcPoints");async function mM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ne(t,e,Ae(e)),o=(e==null?void 0:e.padding)??0,a=(e==null?void 0:e.padding)??0,l=(e!=null&&e.width?e==null?void 0:e.width:s.width)+o*2,c=(e!=null&&e.height?e==null?void 0:e.height:s.height)+a*2,u=e.radius||5,d=e.taper||5,{cssStyles:h}=e,f=ge.svg(i),p=me(e,{});e.stroke&&(p.stroke=e.stroke),e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:-l/2+d,y:-c/2},{x:l/2-d,y:-c/2},...el(l/2-d,-c/2,l/2,-c/2+d,u,u,!0),{x:l/2,y:-c/2+d},{x:l/2,y:c/2-d},...el(l/2,c/2-d,l/2-d,c/2,u,u,!0),{x:l/2-d,y:c/2},{x:-l/2+d,y:c/2},...el(-l/2+d,c/2,-l/2,c/2-d,u,u,!0),{x:-l/2,y:c/2-d},{x:-l/2,y:-c/2+d},...el(-l/2,-c/2+d,-l/2+d,-c/2,u,u,!0)],m=je(g),y=f.path(m,p),b=i.insert(()=>y,":first-child");return b.attr("class","basic label-container outer-path"),h&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",h),r&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",r),be(e,b),e.intersect=function(C){return ce.polygon(e,g,C)},i}x(mM,"roundedRect");async function yM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ne(t,e,Ae(e)),a=(e==null?void 0:e.padding)??0,l=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),c=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=-s.width/2-a,d=-s.height/2-a,{cssStyles:h}=e,f=ge.svg(i),p=me(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:u,y:d},{x:u+l+8,y:d},{x:u+l+8,y:d+c},{x:u-8,y:d+c},{x:u-8,y:d},{x:u,y:d},{x:u,y:d+c}],m=f.polygon(g.map(b=>[b.x,b.y]),p),y=i.insert(()=>m,":first-child");return y.attr("class","basic label-container").attr("style",mn(h)),r&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",r),h&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",r),o.attr("transform",`translate(${-l/2+4+(e.padding??0)-(s.x-(s.left??0))},${-c/2+(e.padding??0)-(s.y-(s.top??0))})`),be(e,y),e.intersect=function(b){return ce.rect(e,b)},i}x(yM,"shadedProcess");async function bM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ne(t,e,Ae(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=-a/2,u=-l/2,{cssStyles:d}=e,h=ge.svg(i),f=me(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:c,y:u},{x:c,y:u+l},{x:c+a,y:u+l},{x:c+a,y:u-l/2}],g=je(p),m=h.path(g,f),y=i.insert(()=>m,":first-child");return y.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",d),r&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",r),y.attr("transform",`translate(0, ${l/4})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(s.x-(s.left??0))}, ${-l/4+(e.padding??0)-(s.y-(s.top??0))})`),be(e,y),e.intersect=function(b){return ce.polygon(e,p,b)},i}x(bM,"slopedRect");async function xM(t,e){const n={rx:0,ry:0,labelPaddingX:e.labelPaddingX??((e==null?void 0:e.padding)||0)*2,labelPaddingY:((e==null?void 0:e.padding)||0)*1};return Yh(t,e,n)}x(xM,"squareRect");async function vM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ne(t,e,Ae(e)),o=s.height+e.padding,a=s.width+o/4+e.padding,l=o/2,{cssStyles:c}=e,u=ge.svg(i),d=me(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const h=[{x:-a/2+l,y:-o/2},{x:a/2-l,y:-o/2},...Vl(-a/2+l,0,l,50,90,270),{x:a/2-l,y:o/2},...Vl(a/2-l,0,l,50,270,450)],f=je(h),p=u.path(f,d),g=i.insert(()=>p,":first-child");return g.attr("class","basic label-container outer-path"),c&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",c),r&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",r),be(e,g),e.intersect=function(m){return ce.polygon(e,h,m)},i}x(vM,"stadium");async function wM(t,e){return Yh(t,e,{rx:5,ry:5})}x(wM,"state");function CM(t,e,{config:{themeVariables:n}}){const{labelStyles:r,nodeStyles:i}=ye(e);e.labelStyle=r;const{cssStyles:s}=e,{lineColor:o,stateBorder:a,nodeBorder:l}=n,c=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),u=ge.svg(c),d=me(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const h=u.circle(0,0,14,{...d,stroke:o,strokeWidth:2}),f=a??l,p=u.circle(0,0,5,{...d,fill:f,stroke:f,strokeWidth:2,fillStyle:"solid"}),g=c.insert(()=>h,":first-child");return g.insert(()=>p),s&&g.selectAll("path").attr("style",s),i&&g.selectAll("path").attr("style",i),be(e,g),e.intersect=function(m){return ce.circle(e,7,m)},c}x(CM,"stateEnd");function kM(t,e,{config:{themeVariables:n}}){const{lineColor:r}=n,i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let s;if(e.look==="handDrawn"){const a=ge.svg(i).circle(0,0,14,m8(r));s=i.insert(()=>a),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else s=i.insert("circle",":first-child"),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return be(e,s),e.intersect=function(o){return ce.circle(e,7,o)},i}x(kM,"stateStart");async function SM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ne(t,e,Ae(e)),o=((e==null?void 0:e.padding)||0)/2,a=s.width+e.padding,l=s.height+e.padding,c=-s.width/2-o,u=-s.height/2-o,d=[{x:0,y:0},{x:a,y:0},{x:a,y:-l},{x:0,y:-l},{x:0,y:0},{x:-8,y:0},{x:a+8,y:0},{x:a+8,y:-l},{x:-8,y:-l},{x:-8,y:0}];if(e.look==="handDrawn"){const h=ge.svg(i),f=me(e,{}),p=h.rectangle(c-8,u,a+16,l,f),g=h.line(c,u,c,u+l,f),m=h.line(c+a,u,c+a,u+l,f);i.insert(()=>g,":first-child"),i.insert(()=>m,":first-child");const y=i.insert(()=>p,":first-child"),{cssStyles:b}=e;y.attr("class","basic label-container").attr("style",mn(b)),be(e,y)}else{const h=ds(i,a,l,d);r&&h.attr("style",r),be(e,h)}return e.intersect=function(h){return ce.polygon(e,d,h)},i}x(SM,"subroutine");async function _M(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ne(t,e,Ae(e)),o=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),a=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),l=-o/2,c=-a/2,u=.2*a,d=.2*a,{cssStyles:h}=e,f=ge.svg(i),p=me(e,{}),g=[{x:l-u/2,y:c},{x:l+o+u/2,y:c},{x:l+o+u/2,y:c+a},{x:l-u/2,y:c+a}],m=[{x:l+o-u/2,y:c+a},{x:l+o+u/2,y:c+a},{x:l+o+u/2,y:c+a-d}];e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=je(g),b=f.path(y,p),C=je(m),v=f.path(C,{...p,fillStyle:"solid"}),k=i.insert(()=>v,":first-child");return k.insert(()=>b,":first-child"),k.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&k.selectAll("path").attr("style",h),r&&e.look!=="handDrawn"&&k.selectAll("path").attr("style",r),be(e,k),e.intersect=function(w){return ce.polygon(e,g,w)},i}x(_M,"taggedRect");async function EM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ne(t,e,Ae(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=l/4,u=.2*a,d=.2*l,h=l+c,{cssStyles:f}=e,p=ge.svg(i),g=me(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const m=[{x:-a/2-a/2*.1,y:h/2},...rs(-a/2-a/2*.1,h/2,a/2+a/2*.1,h/2,c,.8),{x:a/2+a/2*.1,y:-h/2},{x:-a/2-a/2*.1,y:-h/2}],y=-a/2+a/2*.1,b=-h/2-d*.4,C=[{x:y+a-u,y:(b+l)*1.4},{x:y+a,y:b+l-d},{x:y+a,y:(b+l)*.9},...rs(y+a,(b+l)*1.3,y+a-u,(b+l)*1.5,-l*.03,.5)],v=je(m),k=p.path(v,g),w=je(C),S=p.path(w,{...g,fillStyle:"solid"}),E=i.insert(()=>S,":first-child");return E.insert(()=>k,":first-child"),E.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&E.selectAll("path").attr("style",f),r&&e.look!=="handDrawn"&&E.selectAll("path").attr("style",r),E.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(s.x-(s.left??0))},${-l/2+(e.padding??0)-c/2-(s.y-(s.top??0))})`),be(e,E),e.intersect=function(I){return ce.polygon(e,m,I)},i}x(EM,"taggedWaveEdgedRectangle");async function TM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ne(t,e,Ae(e)),o=Math.max(s.width+e.padding,(e==null?void 0:e.width)||0),a=Math.max(s.height+e.padding,(e==null?void 0:e.height)||0),l=-o/2,c=-a/2,u=i.insert("rect",":first-child");return u.attr("class","text").attr("style",r).attr("rx",0).attr("ry",0).attr("x",l).attr("y",c).attr("width",o).attr("height",a),be(e,u),e.intersect=function(d){return ce.rect(e,d)},i}x(TM,"text");var nq=x((t,e,n,r,i,s)=>`M${t},${e}
    a${i},${s} 0,0,1 0,${-r}
    l${n},0
    a${i},${s} 0,0,1 0,${r}
    M${n},${-r}
    a${i},${s} 0,0,0 0,${r}
    l${-n},0`,"createCylinderPathD"),rq=x((t,e,n,r,i,s)=>[`M${t},${e}`,`M${t+n},${e}`,`a${i},${s} 0,0,0 0,${-r}`,`l${-n},0`,`a${i},${s} 0,0,0 0,${r}`,`l${n},0`].join(" "),"createOuterCylinderPathD"),iq=x((t,e,n,r,i,s)=>[`M${t+n/2},${-r/2}`,`a${i},${s} 0,0,0 0,${r}`].join(" "),"createInnerCylinderPathD");async function MM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o,halfPadding:a}=await Ne(t,e,Ae(e)),l=e.look==="neo"?a*2:a,c=s.height+l,u=c/2,d=u/(2.5+c/50),h=s.width+d+l,{cssStyles:f}=e;let p;if(e.look==="handDrawn"){const g=ge.svg(i),m=rq(0,0,h,c,d,u),y=iq(0,0,h,c,d,u),b=g.path(m,me(e,{})),C=g.path(y,me(e,{fill:"none"}));p=i.insert(()=>C,":first-child"),p=i.insert(()=>b,":first-child"),p.attr("class","basic label-container"),f&&p.attr("style",f)}else{const g=nq(0,0,h,c,d,u);p=i.insert("path",":first-child").attr("d",g).attr("class","basic label-container").attr("style",mn(f)).attr("style",r),p.attr("class","basic label-container"),f&&p.selectAll("path").attr("style",f),r&&p.selectAll("path").attr("style",r)}return p.attr("label-offset-x",d),p.attr("transform",`translate(${-h/2}, ${c/2} )`),o.attr("transform",`translate(${-(s.width/2)-d-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),be(e,p),e.intersect=function(g){const m=ce.rect(e,g),y=m.y-(e.y??0);if(u!=0&&(Math.abs(y)<(e.height??0)/2||Math.abs(y)==(e.height??0)/2&&Math.abs(m.x-(e.x??0))>(e.width??0)/2-d)){let b=d*d*(1-y*y/(u*u));b!=0&&(b=Math.sqrt(Math.abs(b))),b=d-b,g.x-(e.x??0)>0&&(b=-b),m.x+=b}return m},i}x(MM,"tiltedCylinder");async function AM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ne(t,e,Ae(e)),o=s.width+e.padding,a=s.height+e.padding,l=[{x:-3*a/6,y:0},{x:o+3*a/6,y:0},{x:o,y:-a},{x:0,y:-a}];let c;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=ge.svg(i),h=me(e,{}),f=je(l),p=d.path(f,h);c=i.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),u&&c.attr("style",u)}else c=ds(i,o,a,l);return r&&c.attr("style",r),e.width=o,e.height=a,be(e,c),e.intersect=function(d){return ce.polygon(e,l,d)},i}x(AM,"trapezoid");async function NM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ne(t,e,Ae(e)),o=60,a=20,l=Math.max(o,s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),c=Math.max(a,s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),{cssStyles:u}=e,d=ge.svg(i),h=me(e,{});e.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const f=[{x:-l/2*.8,y:-c/2},{x:l/2*.8,y:-c/2},{x:l/2,y:-c/2*.6},{x:l/2,y:c/2},{x:-l/2,y:c/2},{x:-l/2,y:-c/2*.6}],p=je(f),g=d.path(p,h),m=i.insert(()=>g,":first-child");return m.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&m.selectChildren("path").attr("style",u),r&&e.look!=="handDrawn"&&m.selectChildren("path").attr("style",r),be(e,m),e.intersect=function(y){return ce.polygon(e,f,y)},i}x(NM,"trapezoidalPentagon");async function OM(t,e){var b;const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ne(t,e,Ae(e)),a=zt((b=et().flowchart)==null?void 0:b.htmlLabels),l=s.width+(e.padding??0),c=l+s.height,u=l+s.height,d=[{x:0,y:0},{x:u,y:0},{x:u/2,y:-c}],{cssStyles:h}=e,f=ge.svg(i),p=me(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=je(d),m=f.path(g,p),y=i.insert(()=>m,":first-child").attr("transform",`translate(${-c/2}, ${c/2})`);return h&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",h),r&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",r),e.width=l,e.height=c,be(e,y),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${c/2-(s.height+(e.padding??0)/(a?2:1)-(s.y-(s.top??0)))})`),e.intersect=function(C){return G.info("Triangle intersect",e,d,C),ce.polygon(e,d,C)},i}x(OM,"triangle");async function LM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ne(t,e,Ae(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=l/8,u=l+c,{cssStyles:d}=e,f=70-a,p=f>0?f/2:0,g=ge.svg(i),m=me(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=[{x:-a/2-p,y:u/2},...rs(-a/2-p,u/2,a/2+p,u/2,c,.8),{x:a/2+p,y:-u/2},{x:-a/2-p,y:-u/2}],b=je(y),C=g.path(b,m),v=i.insert(()=>C,":first-child");return v.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",d),r&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",r),v.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(s.x-(s.left??0))},${-l/2+(e.padding??0)-c-(s.y-(s.top??0))})`),be(e,v),e.intersect=function(k){return ce.polygon(e,y,k)},i}x(LM,"waveEdgedRectangle");async function RM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ne(t,e,Ae(e)),o=100,a=50,l=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),c=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=l/c;let d=l,h=c;d>h*u?h=d/u:d=h*u,d=Math.max(d,o),h=Math.max(h,a);const f=Math.min(h*.2,h/4),p=h+f*2,{cssStyles:g}=e,m=ge.svg(i),y=me(e,{});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=[{x:-d/2,y:p/2},...rs(-d/2,p/2,d/2,p/2,f,1),{x:d/2,y:-p/2},...rs(d/2,-p/2,-d/2,-p/2,f,-1)],C=je(b),v=m.path(C,y),k=i.insert(()=>v,":first-child");return k.attr("class","basic label-container"),g&&e.look!=="handDrawn"&&k.selectAll("path").attr("style",g),r&&e.look!=="handDrawn"&&k.selectAll("path").attr("style",r),be(e,k),e.intersect=function(w){return ce.polygon(e,b,w)},i}x(RM,"waveRectangle");async function IM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ne(t,e,Ae(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=5,u=-a/2,d=-l/2,{cssStyles:h}=e,f=ge.svg(i),p=me(e,{}),g=[{x:u-c,y:d-c},{x:u-c,y:d+l},{x:u+a,y:d+l},{x:u+a,y:d-c}],m=`M${u-c},${d-c} L${u+a},${d-c} L${u+a},${d+l} L${u-c},${d+l} L${u-c},${d-c}
                M${u-c},${d} L${u+a},${d}
                M${u},${d-c} L${u},${d+l}`;e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=f.path(m,p),b=i.insert(()=>y,":first-child");return b.attr("transform",`translate(${c/2}, ${c/2})`),b.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",h),r&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",r),o.attr("transform",`translate(${-(s.width/2)+c/2-(s.x-(s.left??0))}, ${-(s.height/2)+c/2-(s.y-(s.top??0))})`),be(e,b),e.intersect=function(C){return ce.polygon(e,g,C)},i}x(IM,"windowPane");async function cy(t,e){var H,Y,se,K;const n=e;if(n.alias&&(e.label=n.alias),e.look==="handDrawn"){const{themeVariables:ne}=pn(),{background:ue}=ne,ke={...e,id:e.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${ue}`]};await cy(t,ke)}const r=pn();e.useHtmlLabels=r.htmlLabels;let i=((H=r.er)==null?void 0:H.diagramPadding)??10,s=((Y=r.er)==null?void 0:Y.entityPadding)??6;const{cssStyles:o}=e,{labelStyles:a,nodeStyles:l}=ye(e);if(n.attributes.length===0&&e.label){const ne={rx:0,ry:0,labelPaddingX:i,labelPaddingY:i*1.5};wi(e.label,r)+ne.labelPaddingX*2<r.er.minEntityWidth&&(e.width=r.er.minEntityWidth);const ue=await Yh(t,e,ne);if(!zt(r.htmlLabels)){const ke=ue.select("text"),Oe=(se=ke.node())==null?void 0:se.getBBox();ke.attr("transform",`translate(${-Oe.width/2}, 0)`)}return ue}r.htmlLabels||(i*=1.25,s*=1.25);let c=Ae(e);c||(c="node default");const u=t.insert("g").attr("class",c).attr("id",e.domId||e.id),d=await Lo(u,e.label??"",r,0,0,["name"],a);d.height+=s;let h=0;const f=[],p=[];let g=0,m=0,y=0,b=0,C=!0,v=!0;for(const ne of n.attributes){const ue=await Lo(u,ne.type,r,0,h,["attribute-type"],a);g=Math.max(g,ue.width+i);const ke=await Lo(u,ne.name,r,0,h,["attribute-name"],a);m=Math.max(m,ke.width+i);const Oe=await Lo(u,ne.keys.join(),r,0,h,["attribute-keys"],a);y=Math.max(y,Oe.width+i);const De=await Lo(u,ne.comment,r,0,h,["attribute-comment"],a);b=Math.max(b,De.width+i);const Ye=Math.max(ue.height,ke.height,Oe.height,De.height)+s;p.push({yOffset:h,rowHeight:Ye}),h+=Ye}let k=4;y<=i&&(C=!1,y=0,k--),b<=i&&(v=!1,b=0,k--);const w=u.node().getBBox();if(d.width+i*2-(g+m+y+b)>0){const ne=d.width+i*2-(g+m+y+b);g+=ne/k,m+=ne/k,y>0&&(y+=ne/k),b>0&&(b+=ne/k)}const S=g+m+y+b,E=ge.svg(u),I=me(e,{});e.look!=="handDrawn"&&(I.roughness=0,I.fillStyle="solid");let $=0;p.length>0&&($=p.reduce((ne,ue)=>ne+((ue==null?void 0:ue.rowHeight)??0),0));const T=Math.max(w.width+i*2,(e==null?void 0:e.width)||0,S),P=Math.max(($??0)+d.height,(e==null?void 0:e.height)||0),B=-T/2,A=-P/2;u.selectAll("g:not(:first-child)").each((ne,ue,ke)=>{const Oe=Ve(ke[ue]),De=Oe.attr("transform");let Ye=0,Et=0;if(De){const Vt=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(De);Vt&&(Ye=parseFloat(Vt[1]),Et=parseFloat(Vt[2]),Oe.attr("class").includes("attribute-name")?Ye+=g:Oe.attr("class").includes("attribute-keys")?Ye+=g+m:Oe.attr("class").includes("attribute-comment")&&(Ye+=g+m+y))}Oe.attr("transform",`translate(${B+i/2+Ye}, ${Et+A+d.height+s/2})`)}),u.select(".name").attr("transform","translate("+-d.width/2+", "+(A+s/2)+")");const M=E.rectangle(B,A,T,P,I),O=u.insert(()=>M,":first-child").attr("style",o.join("")),{themeVariables:F}=pn(),{rowEven:R,rowOdd:q,nodeBorder:Z}=F;f.push(0);for(const[ne,ue]of p.entries()){const Oe=(ne+1)%2===0&&ue.yOffset!==0,De=E.rectangle(B,d.height+A+(ue==null?void 0:ue.yOffset),T,ue==null?void 0:ue.rowHeight,{...I,fill:Oe?R:q,stroke:Z});u.insert(()=>De,"g.label").attr("style",o.join("")).attr("class",`row-rect-${Oe?"even":"odd"}`)}let Q=E.line(B,d.height+A,T+B,d.height+A,I);u.insert(()=>Q).attr("class","divider"),Q=E.line(g+B,d.height+A,g+B,P+A,I),u.insert(()=>Q).attr("class","divider"),C&&(Q=E.line(g+m+B,d.height+A,g+m+B,P+A,I),u.insert(()=>Q).attr("class","divider")),v&&(Q=E.line(g+m+y+B,d.height+A,g+m+y+B,P+A,I),u.insert(()=>Q).attr("class","divider"));for(const ne of f)Q=E.line(B,d.height+A+ne,T+B,d.height+A+ne,I),u.insert(()=>Q).attr("class","divider");if(be(e,O),l&&e.look!=="handDrawn"){const ne=l.split(";"),ue=(K=ne==null?void 0:ne.filter(ke=>ke.includes("stroke")))==null?void 0:K.map(ke=>`${ke}`).join("; ");u.selectAll("path").attr("style",ue??""),u.selectAll(".row-rect-even path").attr("style",l)}return e.intersect=function(ne){return ce.rect(e,ne)},u}x(cy,"erBox");async function Lo(t,e,n,r=0,i=0,s=[],o=""){const a=t.insert("g").attr("class",`label ${s.join(" ")}`).attr("transform",`translate(${r}, ${i})`).attr("style",o);e!==$x(e)&&(e=$x(e),e=e.replaceAll("<","&lt;").replaceAll(">","&gt;"));const l=a.node().appendChild(await cs(a,e,{width:wi(e,n)+100,style:o,useHtmlLabels:n.htmlLabels},n));if(e.includes("&lt;")||e.includes("&gt;")){let u=l.children[0];for(u.textContent=u.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");u.childNodes[0];)u=u.childNodes[0],u.textContent=u.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let c=l.getBBox();if(zt(n.htmlLabels)){const u=l.children[0];u.style.textAlign="start";const d=Ve(l);c=u.getBoundingClientRect(),d.attr("width",c.width),d.attr("height",c.height)}return c}x(Lo,"addText");async function DM(t,e,n,r,i=n.class.padding??12){const s=r?0:3,o=t.insert("g").attr("class",Ae(e)).attr("id",e.domId||e.id);let a=null,l=null,c=null,u=null,d=0,h=0,f=0;if(a=o.insert("g").attr("class","annotation-group text"),e.annotations.length>0){const b=e.annotations[0];await tl(a,{text:`${b}`},0),d=a.node().getBBox().height}l=o.insert("g").attr("class","label-group text"),await tl(l,e,0,["font-weight: bolder"]);const p=l.node().getBBox();h=p.height,c=o.insert("g").attr("class","members-group text");let g=0;for(const b of e.members){const C=await tl(c,b,g,[b.parseClassifier()]);g+=C+s}f=c.node().getBBox().height,f<=0&&(f=i/2),u=o.insert("g").attr("class","methods-group text");let m=0;for(const b of e.methods){const C=await tl(u,b,m,[b.parseClassifier()]);m+=C+s}let y=o.node().getBBox();if(a!==null){const b=a.node().getBBox();a.attr("transform",`translate(${-b.width/2})`)}return l.attr("transform",`translate(${-p.width/2}, ${d})`),y=o.node().getBBox(),c.attr("transform",`translate(0, ${d+h+i*2})`),y=o.node().getBBox(),u.attr("transform",`translate(0, ${d+h+(f?f+i*4:i*2)})`),y=o.node().getBBox(),{shapeSvg:o,bbox:y}}x(DM,"textHelper");async function tl(t,e,n,r=[]){const i=t.insert("g").attr("class","label").attr("style",r.join("; ")),s=pn();let o="useHtmlLabels"in e?e.useHtmlLabels:zt(s.htmlLabels)??!0,a="";"text"in e?a=e.text:a=e.label,!o&&a.startsWith("\\")&&(a=a.substring(1)),sa(a)&&(o=!0);const l=await cs(i,x0(ho(a)),{width:wi(a,s)+50,classes:"markdown-node-label",useHtmlLabels:o},s);let c,u=1;if(o){const d=l.children[0],h=Ve(l);u=d.innerHTML.split("<br>").length,d.innerHTML.includes("</math>")&&(u+=d.innerHTML.split("<mrow>").length-1);const f=d.getElementsByTagName("img");if(f){const p=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...f].map(g=>new Promise(m=>{function y(){var b;if(g.style.display="flex",g.style.flexDirection="column",p){const C=((b=s.fontSize)==null?void 0:b.toString())??window.getComputedStyle(document.body).fontSize,k=parseInt(C,10)*5+"px";g.style.minWidth=k,g.style.maxWidth=k}else g.style.width="100%";m(g)}x(y,"setupImage"),setTimeout(()=>{g.complete&&y()}),g.addEventListener("error",y),g.addEventListener("load",y)})))}c=d.getBoundingClientRect(),h.attr("width",c.width),h.attr("height",c.height)}else{r.includes("font-weight: bolder")&&Ve(l).selectAll("tspan").attr("font-weight",""),u=l.children.length;const d=l.children[0];(l.textContent===""||l.textContent.includes("&gt"))&&(d.textContent=a[0]+a.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),a[1]===" "&&(d.textContent=d.textContent[0]+" "+d.textContent.substring(1))),d.textContent==="undefined"&&(d.textContent=""),c=l.getBBox()}return i.attr("transform","translate(0,"+(-c.height/(2*u)+n)+")"),c.height}x(tl,"addText");async function BM(t,e){var I,$;const n=et(),r=n.class.padding??12,i=r,s=e.useHtmlLabels??zt(n.htmlLabels)??!0,o=e;o.annotations=o.annotations??[],o.members=o.members??[],o.methods=o.methods??[];const{shapeSvg:a,bbox:l}=await DM(t,e,n,s,i),{labelStyles:c,nodeStyles:u}=ye(e);e.labelStyle=c,e.cssStyles=o.styles||"";const d=((I=o.styles)==null?void 0:I.join(";"))||u||"";e.cssStyles||(e.cssStyles=d.replaceAll("!important","").split(";"));const h=o.members.length===0&&o.methods.length===0&&!(($=n.class)!=null&&$.hideEmptyMembersBox),f=ge.svg(a),p=me(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=l.width;let m=l.height;o.members.length===0&&o.methods.length===0?m+=i:o.members.length>0&&o.methods.length===0&&(m+=i*2);const y=-g/2,b=-m/2,C=f.rectangle(y-r,b-r-(h?r:o.members.length===0&&o.methods.length===0?-r/2:0),g+2*r,m+2*r+(h?r*2:o.members.length===0&&o.methods.length===0?-r:0),p),v=a.insert(()=>C,":first-child");v.attr("class","basic label-container");const k=v.node().getBBox();a.selectAll(".text").each((T,P,B)=>{var q;const A=Ve(B[P]),M=A.attr("transform");let O=0;if(M){const Q=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(M);Q&&(O=parseFloat(Q[2]))}let F=O+b+r-(h?r:o.members.length===0&&o.methods.length===0?-r/2:0);s||(F-=4);let R=y;(A.attr("class").includes("label-group")||A.attr("class").includes("annotation-group"))&&(R=-((q=A.node())==null?void 0:q.getBBox().width)/2||0,a.selectAll("text").each(function(Z,Q,H){window.getComputedStyle(H[Q]).textAnchor==="middle"&&(R=0)})),A.attr("transform",`translate(${R}, ${F})`)});const w=a.select(".annotation-group").node().getBBox().height-(h?r/2:0)||0,S=a.select(".label-group").node().getBBox().height-(h?r/2:0)||0,E=a.select(".members-group").node().getBBox().height-(h?r/2:0)||0;if(o.members.length>0||o.methods.length>0||h){const T=f.line(k.x,w+S+b+r,k.x+k.width,w+S+b+r,p);a.insert(()=>T).attr("class","divider").attr("style",d)}if(h||o.members.length>0||o.methods.length>0){const T=f.line(k.x,w+S+E+b+i*2+r,k.x+k.width,w+S+E+b+r+i*2,p);a.insert(()=>T).attr("class","divider").attr("style",d)}if(o.look!=="handDrawn"&&a.selectAll("path").attr("style",d),v.select(":nth-child(2)").attr("style",d),a.selectAll(".divider").select("path").attr("style",d),e.labelStyle?a.selectAll("span").attr("style",e.labelStyle):a.selectAll("span").attr("style",d),!s){const T=RegExp(/color\s*:\s*([^;]*)/),P=T.exec(d);if(P){const B=P[0].replace("color","fill");a.selectAll("tspan").attr("style",B)}else if(c){const B=T.exec(c);if(B){const A=B[0].replace("color","fill");a.selectAll("tspan").attr("style",A)}}}return be(e,v),e.intersect=function(T){return ce.rect(e,T)},a}x(BM,"classBox");async function PM(t,e){var w,S;const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const i=e,s=e,o=20,a=20,l="verifyMethod"in e,c=Ae(e),u=t.insert("g").attr("class",c).attr("id",e.domId??e.id);let d;l?d=await $r(u,`&lt;&lt;${i.type}&gt;&gt;`,0,e.labelStyle):d=await $r(u,"&lt;&lt;Element&gt;&gt;",0,e.labelStyle);let h=d;const f=await $r(u,i.name,h,e.labelStyle+"; font-weight: bold;");if(h+=f+a,l){const E=await $r(u,`${i.requirementId?`ID: ${i.requirementId}`:""}`,h,e.labelStyle);h+=E;const I=await $r(u,`${i.text?`Text: ${i.text}`:""}`,h,e.labelStyle);h+=I;const $=await $r(u,`${i.risk?`Risk: ${i.risk}`:""}`,h,e.labelStyle);h+=$,await $r(u,`${i.verifyMethod?`Verification: ${i.verifyMethod}`:""}`,h,e.labelStyle)}else{const E=await $r(u,`${s.type?`Type: ${s.type}`:""}`,h,e.labelStyle);h+=E,await $r(u,`${s.docRef?`Doc Ref: ${s.docRef}`:""}`,h,e.labelStyle)}const p=(((w=u.node())==null?void 0:w.getBBox().width)??200)+o,g=(((S=u.node())==null?void 0:S.getBBox().height)??200)+o,m=-p/2,y=-g/2,b=ge.svg(u),C=me(e,{});e.look!=="handDrawn"&&(C.roughness=0,C.fillStyle="solid");const v=b.rectangle(m,y,p,g,C),k=u.insert(()=>v,":first-child");if(k.attr("class","basic label-container").attr("style",r),u.selectAll(".label").each((E,I,$)=>{const T=Ve($[I]),P=T.attr("transform");let B=0,A=0;if(P){const R=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(P);R&&(B=parseFloat(R[1]),A=parseFloat(R[2]))}const M=A-g/2;let O=m+o/2;(I===0||I===1)&&(O=B),T.attr("transform",`translate(${O}, ${M+o})`)}),h>d+f+a){const E=b.line(m,y+d+f+a,m+p,y+d+f+a,C);u.insert(()=>E).attr("style",r)}return be(e,k),e.intersect=function(E){return ce.rect(e,E)},u}x(PM,"requirementBox");async function $r(t,e,n,r=""){if(e==="")return 0;const i=t.insert("g").attr("class","label").attr("style",r),s=et(),o=s.htmlLabels??!0,a=await cs(i,x0(ho(e)),{width:wi(e,s)+50,classes:"markdown-node-label",useHtmlLabels:o,style:r},s);let l;if(o){const c=a.children[0],u=Ve(a);l=c.getBoundingClientRect(),u.attr("width",l.width),u.attr("height",l.height)}else{const c=a.children[0];for(const u of c.children)u.textContent=u.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),r&&u.setAttribute("style",r);l=a.getBBox(),l.height+=6}return i.attr("transform",`translate(${-l.width/2},${-l.height/2+n})`),l.height}x($r,"addText");var sq=x(t=>{switch(t){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function $M(t,e,{config:n}){var P,B;const{labelStyles:r,nodeStyles:i}=ye(e);e.labelStyle=r||"";const s=10,o=e.width;e.width=(e.width??200)-10;const{shapeSvg:a,bbox:l,label:c}=await Ne(t,e,Ae(e)),u=e.padding||10;let d="",h;"ticket"in e&&e.ticket&&((P=n==null?void 0:n.kanban)!=null&&P.ticketBaseUrl)&&(d=(B=n==null?void 0:n.kanban)==null?void 0:B.ticketBaseUrl.replace("#TICKET#",e.ticket),h=a.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",d).attr("target","_blank"));const f={useHtmlLabels:e.useHtmlLabels,labelStyle:e.labelStyle||"",width:e.width,img:e.img,padding:e.padding||8,centerLabel:!1};let p,g;h?{label:p,bbox:g}=await hp(h,"ticket"in e&&e.ticket||"",f):{label:p,bbox:g}=await hp(a,"ticket"in e&&e.ticket||"",f);const{label:m,bbox:y}=await hp(a,"assigned"in e&&e.assigned||"",f);e.width=o;const b=10,C=(e==null?void 0:e.width)||0,v=Math.max(g.height,y.height)/2,k=Math.max(l.height+b*2,(e==null?void 0:e.height)||0)+v,w=-C/2,S=-k/2;c.attr("transform","translate("+(u-C/2)+", "+(-v-l.height/2)+")"),p.attr("transform","translate("+(u-C/2)+", "+(-v+l.height/2)+")"),m.attr("transform","translate("+(u+C/2-y.width-2*s)+", "+(-v+l.height/2)+")");let E;const{rx:I,ry:$}=e,{cssStyles:T}=e;if(e.look==="handDrawn"){const A=ge.svg(a),M=me(e,{}),O=I||$?A.path(us(w,S,C,k,I||0),M):A.rectangle(w,S,C,k,M);E=a.insert(()=>O,":first-child"),E.attr("class","basic label-container").attr("style",T||null)}else{E=a.insert("rect",":first-child"),E.attr("class","basic label-container __APA__").attr("style",i).attr("rx",I??5).attr("ry",$??5).attr("x",w).attr("y",S).attr("width",C).attr("height",k);const A="priority"in e&&e.priority;if(A){const M=a.append("line"),O=w+2,F=S+Math.floor((I??0)/2),R=S+k-Math.floor((I??0)/2);M.attr("x1",O).attr("y1",F).attr("x2",O).attr("y2",R).attr("stroke-width","4").attr("stroke",sq(A))}}return be(e,E),e.height=k,e.intersect=function(A){return ce.rect(e,A)},a}x($M,"kanbanItem");async function FM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,halfPadding:o,label:a}=await Ne(t,e,Ae(e)),l=s.width+10*o,c=s.height+8*o,u=.15*l,{cssStyles:d}=e,h=s.width+20,f=s.height+20,p=Math.max(l,h),g=Math.max(c,f);a.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`);let m;const y=`M0 0 
    a${u},${u} 1 0,0 ${p*.25},${-1*g*.1}
    a${u},${u} 1 0,0 ${p*.25},0
    a${u},${u} 1 0,0 ${p*.25},0
    a${u},${u} 1 0,0 ${p*.25},${g*.1}

    a${u},${u} 1 0,0 ${p*.15},${g*.33}
    a${u*.8},${u*.8} 1 0,0 0,${g*.34}
    a${u},${u} 1 0,0 ${-1*p*.15},${g*.33}

    a${u},${u} 1 0,0 ${-1*p*.25},${g*.15}
    a${u},${u} 1 0,0 ${-1*p*.25},0
    a${u},${u} 1 0,0 ${-1*p*.25},0
    a${u},${u} 1 0,0 ${-1*p*.25},${-1*g*.15}

    a${u},${u} 1 0,0 ${-1*p*.1},${-1*g*.33}
    a${u*.8},${u*.8} 1 0,0 0,${-1*g*.34}
    a${u},${u} 1 0,0 ${p*.1},${-1*g*.33}
  H0 V0 Z`;if(e.look==="handDrawn"){const b=ge.svg(i),C=me(e,{}),v=b.path(y,C);m=i.insert(()=>v,":first-child"),m.attr("class","basic label-container").attr("style",mn(d))}else m=i.insert("path",":first-child").attr("class","basic label-container").attr("style",r).attr("d",y);return m.attr("transform",`translate(${-p/2}, ${-g/2})`),be(e,m),e.calcIntersect=function(b,C){return ce.rect(b,C)},e.intersect=function(b){return G.info("Bang intersect",e,b),ce.rect(e,b)},i}x(FM,"bang");async function zM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,halfPadding:o,label:a}=await Ne(t,e,Ae(e)),l=s.width+2*o,c=s.height+2*o,u=.15*l,d=.25*l,h=.35*l,f=.2*l,{cssStyles:p}=e;let g;const m=`M0 0 
    a${u},${u} 0 0,1 ${l*.25},${-1*l*.1}
    a${h},${h} 1 0,1 ${l*.4},${-1*l*.1}
    a${d},${d} 1 0,1 ${l*.35},${l*.2}

    a${u},${u} 1 0,1 ${l*.15},${c*.35}
    a${f},${f} 1 0,1 ${-1*l*.15},${c*.65}

    a${d},${u} 1 0,1 ${-1*l*.25},${l*.15}
    a${h},${h} 1 0,1 ${-1*l*.5},0
    a${u},${u} 1 0,1 ${-1*l*.25},${-1*l*.15}

    a${u},${u} 1 0,1 ${-1*l*.1},${-1*c*.35}
    a${f},${f} 1 0,1 ${l*.1},${-1*c*.65}
  H0 V0 Z`;if(e.look==="handDrawn"){const y=ge.svg(i),b=me(e,{}),C=y.path(m,b);g=i.insert(()=>C,":first-child"),g.attr("class","basic label-container").attr("style",mn(p))}else g=i.insert("path",":first-child").attr("class","basic label-container").attr("style",r).attr("d",m);return a.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`),g.attr("transform",`translate(${-l/2}, ${-c/2})`),be(e,g),e.calcIntersect=function(y,b){return ce.rect(y,b)},e.intersect=function(y){return G.info("Cloud intersect",e,y),ce.rect(e,y)},i}x(zM,"cloud");async function HM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,halfPadding:o,label:a}=await Ne(t,e,Ae(e)),l=s.width+8*o,c=s.height+2*o,u=5,d=`
    M${-l/2} ${c/2-u}
    v${-c+2*u}
    q0,-${u} ${u},-${u}
    h${l-2*u}
    q${u},0 ${u},${u}
    v${c-2*u}
    q0,${u} -${u},${u}
    h${-l+2*u}
    q-${u},0 -${u},-${u}
    Z
  `,h=i.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+e.type).attr("style",r).attr("d",d);return i.append("line").attr("class","node-line-").attr("x1",-l/2).attr("y1",c/2).attr("x2",l/2).attr("y2",c/2),a.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`),i.append(()=>a.node()),be(e,h),e.calcIntersect=function(f,p){return ce.rect(f,p)},e.intersect=function(f){return ce.rect(e,f)},i}x(HM,"defaultMindmapNode");async function WM(t,e){const n={padding:e.padding??0};return ly(t,e,n)}x(WM,"mindmapCircle");var oq=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:xM},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:mM},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:vM},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:SM},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:UT},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:ly},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:FM},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:zM},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:fM},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:XT},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:oM},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:sM},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:AM},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:rM},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:qT},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:TM},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:DT},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:yM},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:kM},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:CM},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:KT},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:ZT},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:FT},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:zT},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:HT},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:aM},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:LM},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:YT},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:MM},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:lM},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:WT},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:jT},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:OM},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:IM},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:VT},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:NM},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:GT},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:bM},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:dM},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:uM},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:IT},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:$T},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:EM},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:_M},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:RM},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:pM},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:cM}],aq=x(()=>{const e=[...Object.entries({state:wM,choice:BT,note:hM,rectWithTitle:gM,labelRect:iM,iconSquare:tM,iconCircle:QT,icon:JT,iconRounded:eM,imageSquare:nM,anchor:RT,kanbanItem:$M,mindmapCircle:WM,defaultMindmapNode:HM,classBox:BM,erBox:cy,requirementBox:PM}),...oq.flatMap(n=>[n.shortName,..."aliases"in n?n.aliases:[],..."internalAliases"in n?n.internalAliases:[]].map(i=>[i,n.handler]))];return Object.fromEntries(e)},"generateShapeMap"),UM=aq();function lq(t){return t in UM}x(lq,"isValidShape");var Xh=new Map;async function jM(t,e,n){let r,i;e.shape==="rect"&&(e.rx&&e.ry?e.shape="roundedRect":e.shape="squareRect");const s=e.shape?UM[e.shape]:void 0;if(!s)throw new Error(`No such shape: ${e.shape}. Please check your syntax.`);if(e.link){let o;n.config.securityLevel==="sandbox"?o="_top":e.linkTarget&&(o=e.linkTarget||"_blank"),r=t.insert("svg:a").attr("xlink:href",e.link).attr("target",o??null),i=await s(r,e,n)}else i=await s(t,e,n),r=i;return e.tooltip&&i.attr("title",e.tooltip),Xh.set(e.id,r),e.haveCallback&&r.attr("class",r.attr("class")+" clickable"),r}x(jM,"insertNode");var ote=x((t,e)=>{Xh.set(e.id,t)},"setNodeElem"),ate=x(()=>{Xh.clear()},"clear"),lte=x(t=>{const e=Xh.get(t.id);G.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const n=8,r=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+r-t.width/2)+", "+(t.y-t.height/2-n)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),r},"positionNode"),cq=x((t,e,n,r,i,s)=>{e.arrowTypeStart&&G1(t,"start",e.arrowTypeStart,n,r,i,s),e.arrowTypeEnd&&G1(t,"end",e.arrowTypeEnd,n,r,i,s)},"addEdgeMarkers"),uq={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},G1=x((t,e,n,r,i,s,o)=>{var d;const a=uq[n];if(!a){G.warn(`Unknown arrow type: ${n}`);return}const l=a.type,u=`${i}_${s}-${l}${e==="start"?"Start":"End"}`;if(o&&o.trim()!==""){const h=o.replace(/[^\dA-Za-z]/g,"_"),f=`${u}_${h}`;if(!document.getElementById(f)){const p=document.getElementById(u);if(p){const g=p.cloneNode(!0);g.id=f,g.querySelectorAll("path, circle, line").forEach(y=>{y.setAttribute("stroke",o),a.fill&&y.setAttribute("fill",o)}),(d=p.parentNode)==null||d.appendChild(g)}}t.attr(`marker-${e}`,`url(${r}#${f})`)}else t.attr(`marker-${e}`,`url(${r}#${u})`)},"addEdgeMarker"),rh=new Map,Qt=new Map,cte=x(()=>{rh.clear(),Qt.clear()},"clear"),eu=x(t=>t?t.reduce((n,r)=>n+";"+r,""):"","getLabelStyles"),dq=x(async(t,e)=>{let n=zt(et().flowchart.htmlLabels);const{labelStyles:r}=ye(e);e.labelStyle=r;const i=await cs(t,e.label,{style:e.labelStyle,useHtmlLabels:n,addSvgBackground:!0,isNode:!1});G.info("abc82",e,e.labelType);const s=t.insert("g").attr("class","edgeLabel"),o=s.insert("g").attr("class","label").attr("data-id",e.id);o.node().appendChild(i);let a=i.getBBox();if(n){const c=i.children[0],u=Ve(i);a=c.getBoundingClientRect(),u.attr("width",a.width),u.attr("height",a.height)}o.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),rh.set(e.id,s),e.width=a.width,e.height=a.height;let l;if(e.startLabelLeft){const c=await Is(e.startLabelLeft,eu(e.labelStyle)),u=t.insert("g").attr("class","edgeTerminals"),d=u.insert("g").attr("class","inner");l=d.node().appendChild(c);const h=c.getBBox();d.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),Qt.get(e.id)||Qt.set(e.id,{}),Qt.get(e.id).startLeft=u,nl(l,e.startLabelLeft)}if(e.startLabelRight){const c=await Is(e.startLabelRight,eu(e.labelStyle)),u=t.insert("g").attr("class","edgeTerminals"),d=u.insert("g").attr("class","inner");l=u.node().appendChild(c),d.node().appendChild(c);const h=c.getBBox();d.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),Qt.get(e.id)||Qt.set(e.id,{}),Qt.get(e.id).startRight=u,nl(l,e.startLabelRight)}if(e.endLabelLeft){const c=await Is(e.endLabelLeft,eu(e.labelStyle)),u=t.insert("g").attr("class","edgeTerminals"),d=u.insert("g").attr("class","inner");l=d.node().appendChild(c);const h=c.getBBox();d.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),u.node().appendChild(c),Qt.get(e.id)||Qt.set(e.id,{}),Qt.get(e.id).endLeft=u,nl(l,e.endLabelLeft)}if(e.endLabelRight){const c=await Is(e.endLabelRight,eu(e.labelStyle)),u=t.insert("g").attr("class","edgeTerminals"),d=u.insert("g").attr("class","inner");l=d.node().appendChild(c);const h=c.getBBox();d.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),u.node().appendChild(c),Qt.get(e.id)||Qt.set(e.id,{}),Qt.get(e.id).endRight=u,nl(l,e.endLabelRight)}return i},"insertEdgeLabel");function nl(t,e){et().flowchart.htmlLabels&&t&&(t.style.width=e.length*9+"px",t.style.height="12px")}x(nl,"setTerminalWidth");var hq=x((t,e)=>{G.debug("Moving label abc88 ",t.id,t.label,rh.get(t.id),e);let n=e.updatedPath?e.updatedPath:e.originalPath;const r=et(),{subGraphTitleTotalMargin:i}=F0(r);if(t.label){const s=rh.get(t.id);let o=t.x,a=t.y;if(n){const l=kr.calcLabelPosition(n);G.debug("Moving label "+t.label+" from (",o,",",a,") to (",l.x,",",l.y,") abc88"),e.updatedPath&&(o=l.x,a=l.y)}s.attr("transform",`translate(${o}, ${a+i/2})`)}if(t.startLabelLeft){const s=Qt.get(t.id).startLeft;let o=t.x,a=t.y;if(n){const l=kr.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",n);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(t.startLabelRight){const s=Qt.get(t.id).startRight;let o=t.x,a=t.y;if(n){const l=kr.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",n);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(t.endLabelLeft){const s=Qt.get(t.id).endLeft;let o=t.x,a=t.y;if(n){const l=kr.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",n);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(t.endLabelRight){const s=Qt.get(t.id).endRight;let o=t.x,a=t.y;if(n){const l=kr.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",n);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}},"positionEdgeLabel"),fq=x((t,e)=>{const n=t.x,r=t.y,i=Math.abs(e.x-n),s=Math.abs(e.y-r),o=t.width/2,a=t.height/2;return i>=o||s>=a},"outsideNode"),pq=x((t,e,n)=>{G.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(n)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const r=t.x,i=t.y,s=Math.abs(r-n.x),o=t.width/2;let a=n.x<e.x?o-s:o+s;const l=t.height/2,c=Math.abs(e.y-n.y),u=Math.abs(e.x-n.x);if(Math.abs(i-e.y)*o>Math.abs(r-e.x)*l){let d=n.y<e.y?e.y-l-i:i-l-e.y;a=u*d/c;const h={x:n.x<e.x?n.x+a:n.x-u+a,y:n.y<e.y?n.y+c-d:n.y-c+d};return a===0&&(h.x=e.x,h.y=e.y),u===0&&(h.x=e.x),c===0&&(h.y=e.y),G.debug(`abc89 top/bottom calc, Q ${c}, q ${d}, R ${u}, r ${a}`,h),h}else{n.x<e.x?a=e.x-o-r:a=r-o-e.x;let d=c*a/u,h=n.x<e.x?n.x+u-a:n.x-u+a,f=n.y<e.y?n.y+d:n.y-d;return G.debug(`sides calc abc89, Q ${c}, q ${d}, R ${u}, r ${a}`,{_x:h,_y:f}),a===0&&(h=e.x,f=e.y),u===0&&(h=e.x),c===0&&(f=e.y),{x:h,y:f}}},"intersection"),K1=x((t,e)=>{G.warn("abc88 cutPathAtIntersect",t,e);let n=[],r=t[0],i=!1;return t.forEach(s=>{if(G.info("abc88 checking point",s,e),!fq(e,s)&&!i){const o=pq(e,r,s);G.debug("abc88 inside",s,r,o),G.debug("abc88 intersection",o,e);let a=!1;n.forEach(l=>{a=a||l.x===o.x&&l.y===o.y}),n.some(l=>l.x===o.x&&l.y===o.y)?G.warn("abc88 no intersect",o,n):n.push(o),i=!0}else G.warn("abc88 outside",s,r),r=s,i||n.push(s)}),G.debug("returning points",n),n},"cutPathAtIntersect");function qM(t){const e=[],n=[];for(let r=1;r<t.length-1;r++){const i=t[r-1],s=t[r],o=t[r+1];(i.x===s.x&&s.y===o.y&&Math.abs(s.x-o.x)>5&&Math.abs(s.y-i.y)>5||i.y===s.y&&s.x===o.x&&Math.abs(s.x-i.x)>5&&Math.abs(s.y-o.y)>5)&&(e.push(s),n.push(r))}return{cornerPoints:e,cornerPointPositions:n}}x(qM,"extractCornerPoints");var Y1=x(function(t,e,n){const r=e.x-t.x,i=e.y-t.y,s=Math.sqrt(r*r+i*i),o=n/s;return{x:e.x-o*r,y:e.y-o*i}},"findAdjacentPoint"),gq=x(function(t){const{cornerPointPositions:e}=qM(t),n=[];for(let r=0;r<t.length;r++)if(e.includes(r)){const i=t[r-1],s=t[r+1],o=t[r],a=Y1(i,o,5),l=Y1(s,o,5),c=l.x-a.x,u=l.y-a.y;n.push(a);const d=Math.sqrt(2)*2;let h={x:o.x,y:o.y};if(Math.abs(s.x-i.x)>10&&Math.abs(s.y-i.y)>=10){G.debug("Corner point fixing",Math.abs(s.x-i.x),Math.abs(s.y-i.y));const f=5;o.x===a.x?h={x:c<0?a.x-f+d:a.x+f-d,y:u<0?a.y-d:a.y+d}:h={x:c<0?a.x-d:a.x+d,y:u<0?a.y-f+d:a.y+f-d}}else G.debug("Corner point skipping fixing",Math.abs(s.x-i.x),Math.abs(s.y-i.y));n.push(h,l)}else n.push(t[r]);return n},"fixCorners"),mq=x((t,e,n)=>{const r=t-e-n,i=2,s=2,o=i+s,a=Math.floor(r/o),l=Array(a).fill(`${i} ${s}`).join(" ");return`0 ${e} ${l} ${n}`},"generateDashArray"),yq=x(function(t,e,n,r,i,s,o,a=!1){var A;const{handDrawnSeed:l}=et();let c=e.points,u=!1;const d=i;var h=s;const f=[];for(const M in e.cssCompiledStyles)C2(M)||f.push(e.cssCompiledStyles[M]);G.debug("UIO intersect check",e.points,h.x,d.x),h.intersect&&d.intersect&&!a&&(c=c.slice(1,e.points.length-1),c.unshift(d.intersect(c[0])),G.debug("Last point UIO",e.start,"-->",e.end,c[c.length-1],h,h.intersect(c[c.length-1])),c.push(h.intersect(c[c.length-1])));const p=btoa(JSON.stringify(c));e.toCluster&&(G.info("to cluster abc88",n.get(e.toCluster)),c=K1(e.points,n.get(e.toCluster).node),u=!0),e.fromCluster&&(G.debug("from cluster abc88",n.get(e.fromCluster),JSON.stringify(c,null,2)),c=K1(c.reverse(),n.get(e.fromCluster).node).reverse(),u=!0);let g=c.filter(M=>!Number.isNaN(M.y));g=gq(g);let m=wu;switch(m=Id,e.curve){case"linear":m=Id;break;case"basis":m=wu;break;case"cardinal":m=E_;break;case"bumpX":m=w_;break;case"bumpY":m=C_;break;case"catmullRom":m=M_;break;case"monotoneX":m=I_;break;case"monotoneY":m=D_;break;case"natural":m=P_;break;case"step":m=$_;break;case"stepAfter":m=z_;break;case"stepBefore":m=F_;break;default:m=wu}const{x:y,y:b}=g8(e),C=JH().x(y).y(b).curve(m);let v;switch(e.thickness){case"normal":v="edge-thickness-normal";break;case"thick":v="edge-thickness-thick";break;case"invisible":v="edge-thickness-invisible";break;default:v="edge-thickness-normal"}switch(e.pattern){case"solid":v+=" edge-pattern-solid";break;case"dotted":v+=" edge-pattern-dotted";break;case"dashed":v+=" edge-pattern-dashed";break;default:v+=" edge-pattern-solid"}let k,w=e.curve==="rounded"?VM(GM(g,e),5):C(g);const S=Array.isArray(e.style)?e.style:[e.style];let E=S.find(M=>M==null?void 0:M.startsWith("stroke:")),I=!1;if(e.look==="handDrawn"){const M=ge.svg(t);Object.assign([],g);const O=M.path(w,{roughness:.3,seed:l});v+=" transition",k=Ve(O).select("path").attr("id",e.id).attr("class"," "+v+(e.classes?" "+e.classes:"")).attr("style",S?S.reduce((R,q)=>R+";"+q,""):"");let F=k.attr("d");k.attr("d",F),t.node().appendChild(k.node())}else{const M=f.join(";"),O=S?S.reduce((Y,se)=>Y+se+";",""):"";let F="";e.animate&&(F=" edge-animation-fast"),e.animation&&(F=" edge-animation-"+e.animation);const R=(M?M+";"+O+";":O)+";"+(S?S.reduce((Y,se)=>Y+";"+se,""):"");k=t.append("path").attr("d",w).attr("id",e.id).attr("class"," "+v+(e.classes?" "+e.classes:"")+(F??"")).attr("style",R),E=(A=R.match(/stroke:([^;]+)/))==null?void 0:A[1],I=e.animate===!0||!!e.animation||M.includes("animation");const q=k.node(),Z=typeof q.getTotalLength=="function"?q.getTotalLength():0,Q=d1[e.arrowTypeStart]||0,H=d1[e.arrowTypeEnd]||0;if(e.look==="neo"&&!I){const se=`stroke-dasharray: ${e.pattern==="dotted"||e.pattern==="dashed"?mq(Z,Q,H):`0 ${Q} ${Z-Q-H} ${H}`}; stroke-dashoffset: 0;`;k.attr("style",se+k.attr("style"))}}k.attr("data-edge",!0),k.attr("data-et","edge"),k.attr("data-id",e.id),k.attr("data-points",p),e.showPoints&&g.forEach(M=>{t.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",M.x).attr("cy",M.y)});let $="";(et().flowchart.arrowMarkerAbsolute||et().state.arrowMarkerAbsolute)&&($=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,$=$.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),G.info("arrowTypeStart",e.arrowTypeStart),G.info("arrowTypeEnd",e.arrowTypeEnd),cq(k,e,$,o,r,E);const T=Math.floor(c.length/2),P=c[T];kr.isLabelCoordinateInPath(P,k.attr("d"))||(u=!0);let B={};return u&&(B.updatedPath=c),B.originalPath=e.points,B},"insertEdge");function VM(t,e){if(t.length<2)return"";let n="";const r=t.length,i=1e-5;for(let s=0;s<r;s++){const o=t[s],a=t[s-1],l=t[s+1];if(s===0)n+=`M${o.x},${o.y}`;else if(s===r-1)n+=`L${o.x},${o.y}`;else{const c=o.x-a.x,u=o.y-a.y,d=l.x-o.x,h=l.y-o.y,f=Math.hypot(c,u),p=Math.hypot(d,h);if(f<i||p<i){n+=`L${o.x},${o.y}`;continue}const g=c/f,m=u/f,y=d/p,b=h/p,C=g*y+m*b,v=Math.max(-1,Math.min(1,C)),k=Math.acos(v);if(k<i||Math.abs(Math.PI-k)<i){n+=`L${o.x},${o.y}`;continue}const w=Math.min(e/Math.sin(k/2),f/2,p/2),S=o.x-g*w,E=o.y-m*w,I=o.x+y*w,$=o.y+b*w;n+=`L${S},${E}`,n+=`Q${o.x},${o.y} ${I},${$}`}}return n}x(VM,"generateRoundedPath");function Gg(t,e){if(!t||!e)return{angle:0,deltaX:0,deltaY:0};const n=e.x-t.x,r=e.y-t.y;return{angle:Math.atan2(r,n),deltaX:n,deltaY:r}}x(Gg,"calculateDeltaAndAngle");function GM(t,e){const n=t.map(i=>({...i}));if(t.length>=2&&dn[e.arrowTypeStart]){const i=dn[e.arrowTypeStart],s=t[0],o=t[1],{angle:a}=Gg(s,o),l=i*Math.cos(a),c=i*Math.sin(a);n[0].x=s.x+l,n[0].y=s.y+c}const r=t.length;if(r>=2&&dn[e.arrowTypeEnd]){const i=dn[e.arrowTypeEnd],s=t[r-1],o=t[r-2],{angle:a}=Gg(o,s),l=i*Math.cos(a),c=i*Math.sin(a);n[r-1].x=s.x-l,n[r-1].y=s.y-c}return n}x(GM,"applyMarkerOffsetsToPoints");var bq=x((t,e,n,r)=>{e.forEach(i=>{Iq[i](t,n,r)})},"insertMarkers"),xq=x((t,e,n)=>{G.trace("Making markers for ",n),t.append("defs").append("marker").attr("id",n+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",n+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),vq=x((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",n+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),wq=x((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",n+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),Cq=x((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",n+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),kq=x((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",n+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),Sq=x((t,e,n)=>{t.append("marker").attr("id",n+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",n+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),_q=x((t,e,n)=>{t.append("marker").attr("id",n+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",n+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),Eq=x((t,e,n)=>{t.append("marker").attr("id",n+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",n+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),Tq=x((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),Mq=x((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-onlyOneStart").attr("class","marker onlyOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",n+"_"+e+"-onlyOneEnd").attr("class","marker onlyOne "+e).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),Aq=x((t,e,n)=>{const r=t.append("defs").append("marker").attr("id",n+"_"+e+"-zeroOrOneStart").attr("class","marker zeroOrOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");r.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),r.append("path").attr("d","M9,0 L9,18");const i=t.append("defs").append("marker").attr("id",n+"_"+e+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+e).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),i.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),Nq=x((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-oneOrMoreStart").attr("class","marker oneOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",n+"_"+e+"-oneOrMoreEnd").attr("class","marker oneOrMore "+e).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),Oq=x((t,e,n)=>{const r=t.append("defs").append("marker").attr("id",n+"_"+e+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");r.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),r.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const i=t.append("defs").append("marker").attr("id",n+"_"+e+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+e).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),i.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),Lq=x((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),Rq=x((t,e,n)=>{const r=t.append("defs").append("marker").attr("id",n+"_"+e+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");r.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),r.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),r.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),Iq={extension:xq,composition:vq,aggregation:wq,dependency:Cq,lollipop:kq,point:Sq,circle:_q,cross:Eq,barb:Tq,only_one:Mq,zero_or_one:Aq,one_or_more:Nq,zero_or_more:Oq,requirement_arrow:Lq,requirement_contains:Rq},Dq=bq,Bq={common:ba,getConfig:pn,insertCluster:jj,insertEdge:yq,insertEdgeLabel:dq,insertMarkers:Dq,insertNode:jM,interpolateToCurve:j0,labelHelper:Ne,log:G,positionEdgeLabel:hq},Gl={},KM=x(t=>{for(const e of t)Gl[e.name]=e},"registerLayoutLoaders"),Pq=x(()=>{KM([{name:"dagre",loader:x(async()=>await nt(()=>import("./dagre-6UL2VRFP-Cu0MxO-b.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])),"loader")},{name:"cose-bilkent",loader:x(async()=>await nt(()=>import("./cose-bilkent-S5V4N54A-B1C9nAk-.js"),__vite__mapDeps([8,9,6,7])),"loader")}])},"registerDefaultLayoutLoaders");Pq();var ute=x(async(t,e)=>{if(!(t.layoutAlgorithm in Gl))throw new Error(`Unknown layout algorithm: ${t.layoutAlgorithm}`);const n=Gl[t.layoutAlgorithm];return(await n.loader()).render(t,e,Bq,{algorithm:n.algorithm})},"render"),dte=x((t="",{fallback:e="dagre"}={})=>{if(t in Gl)return t;if(e in Gl)return G.warn(`Layout algorithm ${t} is not registered. Using ${e} as fallback.`),e;throw new Error(`Both layout algorithms ${t} and ${e} are not registered.`)},"getRegisteredLayoutAlgorithm"),YM="comm",XM="rule",ZM="decl",$q="@import",Fq="@namespace",zq="@keyframes",Hq="@layer",JM=Math.abs,uy=String.fromCharCode;function QM(t){return t.trim()}function Eu(t,e,n){return t.replace(e,n)}function Wq(t,e,n){return t.indexOf(e,n)}function Wo(t,e){return t.charCodeAt(e)|0}function ua(t,e,n){return t.slice(e,n)}function Wr(t){return t.length}function Uq(t){return t.length}function tu(t,e){return e.push(t),t}var Zh=1,da=1,eA=0,hr=0,Lt=0,ka="";function dy(t,e,n,r,i,s,o,a){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:Zh,column:da,length:o,return:"",siblings:a}}function jq(){return Lt}function qq(){return Lt=hr>0?Wo(ka,--hr):0,da--,Lt===10&&(da=1,Zh--),Lt}function Tr(){return Lt=hr<eA?Wo(ka,hr++):0,da++,Lt===10&&(da=1,Zh++),Lt}function Ui(){return Wo(ka,hr)}function Tu(){return hr}function Jh(t,e){return ua(ka,t,e)}function Kl(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Vq(t){return Zh=da=1,eA=Wr(ka=t),hr=0,[]}function Gq(t){return ka="",t}function fp(t){return QM(Jh(hr-1,Kg(t===91?t+2:t===40?t+1:t)))}function Kq(t){for(;(Lt=Ui())&&Lt<33;)Tr();return Kl(t)>2||Kl(Lt)>3?"":" "}function Yq(t,e){for(;--e&&Tr()&&!(Lt<48||Lt>102||Lt>57&&Lt<65||Lt>70&&Lt<97););return Jh(t,Tu()+(e<6&&Ui()==32&&Tr()==32))}function Kg(t){for(;Tr();)switch(Lt){case t:return hr;case 34:case 39:t!==34&&t!==39&&Kg(Lt);break;case 40:t===41&&Kg(t);break;case 92:Tr();break}return hr}function Xq(t,e){for(;Tr()&&t+Lt!==57;)if(t+Lt===84&&Ui()===47)break;return"/*"+Jh(e,hr-1)+"*"+uy(t===47?t:Tr())}function Zq(t){for(;!Kl(Ui());)Tr();return Jh(t,hr)}function Jq(t){return Gq(Mu("",null,null,null,[""],t=Vq(t),0,[0],t))}function Mu(t,e,n,r,i,s,o,a,l){for(var c=0,u=0,d=o,h=0,f=0,p=0,g=1,m=1,y=1,b=0,C="",v=i,k=s,w=r,S=C;m;)switch(p=b,b=Tr()){case 40:if(p!=108&&Wo(S,d-1)==58){Wq(S+=Eu(fp(b),"&","&\f"),"&\f",JM(c?a[c-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:S+=fp(b);break;case 9:case 10:case 13:case 32:S+=Kq(p);break;case 92:S+=Yq(Tu()-1,7);continue;case 47:switch(Ui()){case 42:case 47:tu(Qq(Xq(Tr(),Tu()),e,n,l),l),(Kl(p||1)==5||Kl(Ui()||1)==5)&&Wr(S)&&ua(S,-1,void 0)!==" "&&(S+=" ");break;default:S+="/"}break;case 123*g:a[c++]=Wr(S)*y;case 125*g:case 59:case 0:switch(b){case 0:case 125:m=0;case 59+u:y==-1&&(S=Eu(S,/\f/g,"")),f>0&&(Wr(S)-d||g===0&&p===47)&&tu(f>32?Z1(S+";",r,n,d-1,l):Z1(Eu(S," ","")+";",r,n,d-2,l),l);break;case 59:S+=";";default:if(tu(w=X1(S,e,n,c,u,i,a,C,v=[],k=[],d,s),s),b===123)if(u===0)Mu(S,e,w,w,v,s,d,a,k);else{switch(h){case 99:if(Wo(S,3)===110)break;case 108:if(Wo(S,2)===97)break;default:u=0;case 100:case 109:case 115:}u?Mu(t,w,w,r&&tu(X1(t,w,w,0,0,i,a,C,i,v=[],d,k),k),i,k,d,a,r?v:k):Mu(S,w,w,w,[""],k,0,a,k)}}c=u=f=0,g=y=1,C=S="",d=o;break;case 58:d=1+Wr(S),f=p;default:if(g<1){if(b==123)--g;else if(b==125&&g++==0&&qq()==125)continue}switch(S+=uy(b),b*g){case 38:y=u>0?1:(S+="\f",-1);break;case 44:a[c++]=(Wr(S)-1)*y,y=1;break;case 64:Ui()===45&&(S+=fp(Tr())),h=Ui(),u=d=Wr(C=S+=Zq(Tu())),b++;break;case 45:p===45&&Wr(S)==2&&(g=0)}}return s}function X1(t,e,n,r,i,s,o,a,l,c,u,d){for(var h=i-1,f=i===0?s:[""],p=Uq(f),g=0,m=0,y=0;g<r;++g)for(var b=0,C=ua(t,h+1,h=JM(m=o[g])),v=t;b<p;++b)(v=QM(m>0?f[b]+" "+C:Eu(C,/&\f/g,f[b])))&&(l[y++]=v);return dy(t,e,n,i===0?XM:a,l,c,u,d)}function Qq(t,e,n,r){return dy(t,e,n,YM,uy(jq()),ua(t,2,-2),0,r)}function Z1(t,e,n,r,i){return dy(t,e,n,ZM,ua(t,0,r),ua(t,r+1,-1),r,i)}function Yg(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function eV(t,e,n,r){switch(t.type){case Hq:if(t.children.length)break;case $q:case Fq:case ZM:return t.return=t.return||t.value;case YM:return"";case zq:return t.return=t.value+"{"+Yg(t.children,r)+"}";case XM:if(!Wr(t.value=t.props.join(",")))return""}return Wr(n=Yg(t.children,r))?t.return=t.value+"{"+n+"}":""}var tV=E2(Object.keys,Object),nV=Object.prototype,rV=nV.hasOwnProperty;function iV(t){if(!Hh(t))return tV(t);var e=[];for(var n in Object(t))rV.call(t,n)&&n!="constructor"&&e.push(n);return e}var Xg=uo(ei,"DataView"),Zg=uo(ei,"Promise"),Jg=uo(ei,"Set"),Qg=uo(ei,"WeakMap"),J1="[object Map]",sV="[object Object]",Q1="[object Promise]",ev="[object Set]",tv="[object WeakMap]",nv="[object DataView]",oV=co(Xg),aV=co(ql),lV=co(Zg),cV=co(Jg),uV=co(Qg),ks=va;(Xg&&ks(new Xg(new ArrayBuffer(1)))!=nv||ql&&ks(new ql)!=J1||Zg&&ks(Zg.resolve())!=Q1||Jg&&ks(new Jg)!=ev||Qg&&ks(new Qg)!=tv)&&(ks=function(t){var e=va(t),n=e==sV?t.constructor:void 0,r=n?co(n):"";if(r)switch(r){case oV:return nv;case aV:return J1;case lV:return Q1;case cV:return ev;case uV:return tv}return e});var dV="[object Map]",hV="[object Set]",fV=Object.prototype,pV=fV.hasOwnProperty;function rv(t){if(t==null)return!0;if(Wh(t)&&(Gd(t)||typeof t=="string"||typeof t.splice=="function"||W0(t)||U0(t)||Vd(t)))return!t.length;var e=ks(t);if(e==dV||e==hV)return!t.size;if(Hh(t))return!iV(t).length;for(var n in t)if(pV.call(t,n))return!1;return!0}var tA="c4",gV=x(t=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(t),"detector"),mV=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./c4Diagram-YG6GDRKO-D_WkdgRy.js");return{diagram:e}},__vite__mapDeps([10,11,6,7]));return{id:tA,diagram:t}},"loader"),yV={id:tA,detector:gV,loader:mV},bV=yV,nA="flowchart",xV=x((t,e)=>{var n,r;return((n=e==null?void 0:e.flowchart)==null?void 0:n.defaultRenderer)==="dagre-wrapper"||((r=e==null?void 0:e.flowchart)==null?void 0:r.defaultRenderer)==="elk"?!1:/^\s*graph/.test(t)},"detector"),vV=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./flowDiagram-NV44I4VS-BnXqoiXX.js");return{diagram:e}},__vite__mapDeps([12,13,14,15,16,6,7]));return{id:nA,diagram:t}},"loader"),wV={id:nA,detector:xV,loader:vV},CV=wV,rA="flowchart-v2",kV=x((t,e)=>{var n,r,i;return((n=e==null?void 0:e.flowchart)==null?void 0:n.defaultRenderer)==="dagre-d3"?!1:(((r=e==null?void 0:e.flowchart)==null?void 0:r.defaultRenderer)==="elk"&&(e.layout="elk"),/^\s*graph/.test(t)&&((i=e==null?void 0:e.flowchart)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(t))},"detector"),SV=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./flowDiagram-NV44I4VS-BnXqoiXX.js");return{diagram:e}},__vite__mapDeps([12,13,14,15,16,6,7]));return{id:rA,diagram:t}},"loader"),_V={id:rA,detector:kV,loader:SV},EV=_V,iA="er",TV=x(t=>/^\s*erDiagram/.test(t),"detector"),MV=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./erDiagram-Q2GNP2WA-mP_DCDhy.js");return{diagram:e}},__vite__mapDeps([17,14,15,16,6,7]));return{id:iA,diagram:t}},"loader"),AV={id:iA,detector:TV,loader:MV},NV=AV,sA="gitGraph",OV=x(t=>/^\s*gitGraph/.test(t),"detector"),LV=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./gitGraphDiagram-NY62KEGX-GbWlaZLA.js");return{diagram:e}},__vite__mapDeps([18,19,20,21,6,7,2,4,5]));return{id:sA,diagram:t}},"loader"),RV={id:sA,detector:OV,loader:LV},IV=RV,oA="gantt",DV=x(t=>/^\s*gantt/.test(t),"detector"),BV=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./ganttDiagram-JELNMOA3-nsLlBof4.js");return{diagram:e}},__vite__mapDeps([22,6,7,23,24,25]));return{id:oA,diagram:t}},"loader"),PV={id:oA,detector:DV,loader:BV},$V=PV,aA="info",FV=x(t=>/^\s*info/.test(t),"detector"),zV=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./infoDiagram-WHAUD3N6-VtcS2txe.js");return{diagram:e}},__vite__mapDeps([26,21,6,7,2,4,5]));return{id:aA,diagram:t}},"loader"),HV={id:aA,detector:FV,loader:zV},lA="pie",WV=x(t=>/^\s*pie/.test(t),"detector"),UV=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./pieDiagram-ADFJNKIX-B9muYHs1.js");return{diagram:e}},__vite__mapDeps([27,19,21,6,7,2,4,5,28,29,24]));return{id:lA,diagram:t}},"loader"),jV={id:lA,detector:WV,loader:UV},cA="quadrantChart",qV=x(t=>/^\s*quadrantChart/.test(t),"detector"),VV=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./quadrantDiagram-AYHSOK5B-sGW8MkfD.js");return{diagram:e}},__vite__mapDeps([30,23,24,25,6,7]));return{id:cA,diagram:t}},"loader"),GV={id:cA,detector:qV,loader:VV},KV=GV,uA="xychart",YV=x(t=>/^\s*xychart(-beta)?/.test(t),"detector"),XV=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./xychartDiagram-PRI3JC2R-RO-HcwHh.js");return{diagram:e}},__vite__mapDeps([31,24,29,23,25,6,7]));return{id:uA,diagram:t}},"loader"),ZV={id:uA,detector:YV,loader:XV},JV=ZV,dA="requirement",QV=x(t=>/^\s*requirement(Diagram)?/.test(t),"detector"),eG=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./requirementDiagram-UZGBJVZJ-gfxBknfs.js");return{diagram:e}},__vite__mapDeps([32,14,15,6,7]));return{id:dA,diagram:t}},"loader"),tG={id:dA,detector:QV,loader:eG},nG=tG,hA="sequence",rG=x(t=>/^\s*sequenceDiagram/.test(t),"detector"),iG=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./sequenceDiagram-WL72ISMW-AyL4R3rI.js");return{diagram:e}},__vite__mapDeps([33,11,20,6,7]));return{id:hA,diagram:t}},"loader"),sG={id:hA,detector:rG,loader:iG},oG=sG,fA="class",aG=x((t,e)=>{var n;return((n=e==null?void 0:e.class)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(t)},"detector"),lG=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./classDiagram-2ON5EDUG-5QWwwlxu.js");return{diagram:e}},__vite__mapDeps([34,35,13,14,15,6,7]));return{id:fA,diagram:t}},"loader"),cG={id:fA,detector:aG,loader:lG},uG=cG,pA="classDiagram",dG=x((t,e)=>{var n;return/^\s*classDiagram/.test(t)&&((n=e==null?void 0:e.class)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(t)},"detector"),hG=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./classDiagram-v2-WZHVMYZB-5QWwwlxu.js");return{diagram:e}},__vite__mapDeps([36,35,13,14,15,6,7]));return{id:pA,diagram:t}},"loader"),fG={id:pA,detector:dG,loader:hG},pG=fG,gA="state",gG=x((t,e)=>{var n;return((n=e==null?void 0:e.state)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(t)},"detector"),mG=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./stateDiagram-FKZM4ZOC-iRqIyXIj.js");return{diagram:e}},__vite__mapDeps([37,38,14,15,1,2,3,4,6,7]));return{id:gA,diagram:t}},"loader"),yG={id:gA,detector:gG,loader:mG},bG=yG,mA="stateDiagram",xG=x((t,e)=>{var n;return!!(/^\s*stateDiagram-v2/.test(t)||/^\s*stateDiagram/.test(t)&&((n=e==null?void 0:e.state)==null?void 0:n.defaultRenderer)==="dagre-wrapper")},"detector"),vG=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./stateDiagram-v2-4FDKWEC3-DwLEcpWB.js");return{diagram:e}},__vite__mapDeps([39,38,14,15,6,7]));return{id:mA,diagram:t}},"loader"),wG={id:mA,detector:xG,loader:vG},CG=wG,yA="journey",kG=x(t=>/^\s*journey/.test(t),"detector"),SG=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./journeyDiagram-XKPGCS4Q-yq5F92cG.js");return{diagram:e}},__vite__mapDeps([40,11,13,28,6,7]));return{id:yA,diagram:t}},"loader"),_G={id:yA,detector:kG,loader:SG},EG=_G,TG=x((t,e,n)=>{G.debug(`rendering svg for syntax error
`);const r=a9(e),i=r.append("g");r.attr("viewBox","0 0 2412 512"),jS(r,100,512,!0),i.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),i.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),i.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),i.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),i.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),i.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),i.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),i.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${n}`)},"draw"),bA={draw:TG},MG=bA,AG={db:{},renderer:bA,parser:{parse:x(()=>{},"parse")}},NG=AG,xA="flowchart-elk",OG=x((t,e={})=>{var n;return/^\s*flowchart-elk/.test(t)||/^\s*(flowchart|graph)/.test(t)&&((n=e==null?void 0:e.flowchart)==null?void 0:n.defaultRenderer)==="elk"?(e.layout="elk",!0):!1},"detector"),LG=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./flowDiagram-NV44I4VS-BnXqoiXX.js");return{diagram:e}},__vite__mapDeps([12,13,14,15,16,6,7]));return{id:xA,diagram:t}},"loader"),RG={id:xA,detector:OG,loader:LG},IG=RG,vA="timeline",DG=x(t=>/^\s*timeline/.test(t),"detector"),BG=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./timeline-definition-IT6M3QCI-BvEm4897.js");return{diagram:e}},__vite__mapDeps([41,28,6,7]));return{id:vA,diagram:t}},"loader"),PG={id:vA,detector:DG,loader:BG},$G=PG,wA="mindmap",FG=x(t=>/^\s*mindmap/.test(t),"detector"),zG=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./mindmap-definition-VGOIOE7T--22p56CA.js");return{diagram:e}},__vite__mapDeps([42,14,15,6,7]));return{id:wA,diagram:t}},"loader"),HG={id:wA,detector:FG,loader:zG},WG=HG,CA="kanban",UG=x(t=>/^\s*kanban/.test(t),"detector"),jG=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./kanban-definition-3W4ZIXB7-DPVINvTw.js");return{diagram:e}},__vite__mapDeps([43,13,6,7]));return{id:CA,diagram:t}},"loader"),qG={id:CA,detector:UG,loader:jG},VG=qG,kA="sankey",GG=x(t=>/^\s*sankey(-beta)?/.test(t),"detector"),KG=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./sankeyDiagram-TZEHDZUN-BEmiGWzK.js");return{diagram:e}},__vite__mapDeps([44,29,24,6,7]));return{id:kA,diagram:t}},"loader"),YG={id:kA,detector:GG,loader:KG},XG=YG,SA="packet",ZG=x(t=>/^\s*packet(-beta)?/.test(t),"detector"),JG=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./diagram-S2PKOQOG-O2sQKrXL.js");return{diagram:e}},__vite__mapDeps([45,19,21,6,7,2,4,5]));return{id:SA,diagram:t}},"loader"),QG={id:SA,detector:ZG,loader:JG},_A="radar",eK=x(t=>/^\s*radar-beta/.test(t),"detector"),tK=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./diagram-QEK2KX5R-74t69ZBx.js");return{diagram:e}},__vite__mapDeps([46,19,21,6,7,2,4,5]));return{id:_A,diagram:t}},"loader"),nK={id:_A,detector:eK,loader:tK},EA="block",rK=x(t=>/^\s*block(-beta)?/.test(t),"detector"),iK=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./blockDiagram-VD42YOAC-OTABfBjk.js");return{diagram:e}},__vite__mapDeps([47,13,5,2,1,16,6,7]));return{id:EA,diagram:t}},"loader"),sK={id:EA,detector:rK,loader:iK},oK=sK,TA="architecture",aK=x(t=>/^\s*architecture/.test(t),"detector"),lK=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./architectureDiagram-VXUJARFQ-C67vR_Mp.js");return{diagram:e}},__vite__mapDeps([48,19,21,6,7,2,4,5,9]));return{id:TA,diagram:t}},"loader"),cK={id:TA,detector:aK,loader:lK},uK=cK,MA="treemap",dK=x(t=>/^\s*treemap/.test(t),"detector"),hK=x(async()=>{const{diagram:t}=await nt(async()=>{const{diagram:e}=await import("./diagram-PSM6KHXK-BQWVV-2o.js");return{diagram:e}},__vite__mapDeps([49,15,19,21,6,7,2,4,5,25,29,24]));return{id:MA,diagram:t}},"loader"),fK={id:MA,detector:dK,loader:hK},iv=!1,Qh=x(()=>{iv||(iv=!0,Td("error",NG,t=>t.toLowerCase().trim()==="error"),Td("---",{db:{clear:x(()=>{},"clear")},styles:{},renderer:{draw:x(()=>{},"draw")},parser:{parse:x(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:x(()=>null,"init")},t=>t.toLowerCase().trimStart().startsWith("---")),og(IG,WG,uK),og(bV,VG,pG,uG,NV,$V,HV,jV,nG,oG,EV,CV,$G,IV,CG,bG,EG,KV,XG,QG,JV,oK,nK,fK))},"addDiagrams"),pK=x(async()=>{G.debug("Loading registered diagrams");const e=(await Promise.allSettled(Object.entries(Ys).map(async([n,{detector:r,loader:i}])=>{if(i)try{ug(n)}catch{try{const{diagram:s,id:o}=await i();Td(o,s,r)}catch(s){throw G.error(`Failed to load external diagram with key ${n}. Removing from detectors.`),delete Ys[n],s}}}))).filter(n=>n.status==="rejected");if(e.length>0){G.error(`Failed to load ${e.length} external diagrams`);for(const n of e)G.error(n);throw new Error(`Failed to load ${e.length} external diagrams`)}},"loadRegisteredDiagrams"),gK="graphics-document document";function AA(t,e){t.attr("role",gK),e!==""&&t.attr("aria-roledescription",e)}x(AA,"setA11yDiagramInfo");function NA(t,e,n,r){if(t.insert!==void 0){if(n){const i=`chart-desc-${r}`;t.attr("aria-describedby",i),t.insert("desc",":first-child").attr("id",i).text(n)}if(e){const i=`chart-title-${r}`;t.attr("aria-labelledby",i),t.insert("title",":first-child").attr("id",i).text(e)}}}x(NA,"addSVGa11yTitleDescription");var Ws,em=(Ws=class{constructor(e,n,r,i,s){this.type=e,this.text=n,this.db=r,this.parser=i,this.renderer=s}static async fromText(e,n={}){var c,u;const r=pn(),i=f0(e,r);e=fU(e)+`
`;try{ug(i)}catch{const d=PF(i);if(!d)throw new LS(`Diagram ${i} not found.`);const{id:h,diagram:f}=await d();Td(h,f)}const{db:s,parser:o,renderer:a,init:l}=ug(i);return o.parser&&(o.parser.yy=s),(c=s.clear)==null||c.call(s),l==null||l(r),n.title&&((u=s.setDiagramTitle)==null||u.call(s,n.title)),await o.parse(e),new Ws(i,e,s,o,a)}async render(e,n){await this.renderer.draw(this.text,e,n,this)}getParser(){return this.parser}getType(){return this.type}},x(Ws,"Diagram"),Ws),sv=[],mK=x(()=>{sv.forEach(t=>{t()}),sv=[]},"attachFunctions"),yK=x(t=>t.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function OA(t){const e=t.match(OS);if(!e)return{text:t,metadata:{}};let n=p8(e[1],{schema:f8})??{};n=typeof n=="object"&&!Array.isArray(n)?n:{};const r={};return n.displayMode&&(r.displayMode=n.displayMode.toString()),n.title&&(r.title=n.title.toString()),n.config&&(r.config=n.config),{text:t.slice(e[0].length),metadata:r}}x(OA,"extractFrontMatter");var bK=x(t=>t.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(e,n,r)=>"<"+n+r.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),xK=x(t=>{const{text:e,metadata:n}=OA(t),{displayMode:r,title:i,config:s={}}=n;return r&&(s.gantt||(s.gantt={}),s.gantt.displayMode=r),{title:i,config:s,text:e}},"processFrontmatter"),vK=x(t=>{const e=kr.detectInit(t)??{},n=kr.detectDirective(t,"wrap");return Array.isArray(n)?e.wrap=n.some(({type:r})=>r==="wrap"):(n==null?void 0:n.type)==="wrap"&&(e.wrap=!0),{text:eU(t),directive:e}},"processDirectives");function hy(t){const e=bK(t),n=xK(e),r=vK(n.text),i=Y0(n.config,r.directive);return t=yK(r.text),{code:t,title:n.title,config:i}}x(hy,"preprocessDiagram");function LA(t){const e=new TextEncoder().encode(t),n=Array.from(e,r=>String.fromCodePoint(r)).join("");return btoa(n)}x(LA,"toBase64");var wK=5e4,CK="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",kK="sandbox",SK="loose",_K="http://www.w3.org/2000/svg",EK="http://www.w3.org/1999/xlink",TK="http://www.w3.org/1999/xhtml",MK="100%",AK="100%",NK="border:0;margin:0;",OK="margin:0",LK="allow-top-navigation-by-user-activation allow-popups",RK='The "iframe" tag is not supported by your browser.',IK=["foreignobject"],DK=["dominant-baseline"];function fy(t){const e=hy(t);return _d(),QF(e.config??{}),e}x(fy,"processAndSetConfigs");async function RA(t,e){Qh();try{const{code:n,config:r}=fy(t);return{diagramType:(await DA(n)).type,config:r}}catch(n){if(e!=null&&e.suppressErrors)return!1;throw n}}x(RA,"parse");var ov=x((t,e,n=[])=>`
.${t} ${e} { ${n.join(" !important; ")} !important; }`,"cssImportantStyles"),BK=x((t,e=new Map)=>{var r;let n="";if(t.themeCSS!==void 0&&(n+=`
${t.themeCSS}`),t.fontFamily!==void 0&&(n+=`
:root { --mermaid-font-family: ${t.fontFamily}}`),t.altFontFamily!==void 0&&(n+=`
:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),e instanceof Map){const a=t.htmlLabels??((r=t.flowchart)==null?void 0:r.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];e.forEach(l=>{rv(l.styles)||a.forEach(c=>{n+=ov(l.id,c,l.styles)}),rv(l.textStyles)||(n+=ov(l.id,"tspan",((l==null?void 0:l.textStyles)||[]).map(c=>c.replace("color","fill"))))})}return n},"createCssStyles"),PK=x((t,e,n,r)=>{const i=BK(t,n),s=x4(e,i,t.themeVariables);return Yg(Jq(`${r}{${s}}`),eV)},"createUserStyles"),$K=x((t="",e,n)=>{let r=t;return!n&&!e&&(r=r.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),r=ho(r),r=r.replace(/<br>/g,"<br/>"),r},"cleanUpSvgCode"),FK=x((t="",e)=>{var i,s;const n=(s=(i=e==null?void 0:e.viewBox)==null?void 0:i.baseVal)!=null&&s.height?e.viewBox.baseVal.height+"px":AK,r=LA(`<body style="${OK}">${t}</body>`);return`<iframe style="width:${MK};height:${n};${NK}" src="data:text/html;charset=UTF-8;base64,${r}" sandbox="${LK}">
  ${RK}
</iframe>`},"putIntoIFrame"),av=x((t,e,n,r,i)=>{const s=t.append("div");s.attr("id",n),r&&s.attr("style",r);const o=s.append("svg").attr("id",e).attr("width","100%").attr("xmlns",_K);return i&&o.attr("xmlns:xlink",i),o.append("g"),t},"appendDivSvgG");function tm(t,e){return t.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}x(tm,"sandboxedIframe");var zK=x((t,e,n,r)=>{var i,s,o;(i=t.getElementById(e))==null||i.remove(),(s=t.getElementById(n))==null||s.remove(),(o=t.getElementById(r))==null||o.remove()},"removeExistingElements"),HK=x(async function(t,e,n){var P,B,A,M,O,F;Qh();const r=fy(e);e=r.code;const i=pn();G.debug(i),e.length>((i==null?void 0:i.maxTextSize)??wK)&&(e=CK);const s="#"+t,o="i"+t,a="#"+o,l="d"+t,c="#"+l,u=x(()=>{const q=Ve(h?a:c).node();q&&"remove"in q&&q.remove()},"removeTempElements");let d=Ve("body");const h=i.securityLevel===kK,f=i.securityLevel===SK,p=i.fontFamily;if(n!==void 0){if(n&&(n.innerHTML=""),h){const R=tm(Ve(n),o);d=Ve(R.nodes()[0].contentDocument.body),d.node().style.margin=0}else d=Ve(n);av(d,t,l,`font-family: ${p}`,EK)}else{if(zK(document,t,l,o),h){const R=tm(Ve("body"),o);d=Ve(R.nodes()[0].contentDocument.body),d.node().style.margin=0}else d=Ve("body");av(d,t,l)}let g,m;try{g=await em.fromText(e,{title:r.title})}catch(R){if(i.suppressErrorRendering)throw u(),R;g=await em.fromText("error"),m=R}const y=d.select(c).node(),b=g.type,C=y.firstChild,v=C.firstChild,k=(B=(P=g.renderer).getClasses)==null?void 0:B.call(P,e,g),w=PK(i,b,k,s),S=document.createElement("style");S.innerHTML=w,C.insertBefore(S,v);try{await g.renderer.draw(e,t,Ex.version,g)}catch(R){throw i.suppressErrorRendering?u():MG.draw(e,t,Ex.version),R}const E=d.select(`${c} svg`),I=(M=(A=g.db).getAccTitle)==null?void 0:M.call(A),$=(F=(O=g.db).getAccDescription)==null?void 0:F.call(O);BA(b,E,I,$),d.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns",TK);let T=d.select(c).node().innerHTML;if(G.debug("config.arrowMarkerAbsolute",i.arrowMarkerAbsolute),T=$K(T,h,zt(i.arrowMarkerAbsolute)),h){const R=d.select(c+" svg").node();T=FK(T,R)}else f||(T=ra.sanitize(T,{ADD_TAGS:IK,ADD_ATTR:DK,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(mK(),m)throw m;return u(),{diagramType:b,svg:T,bindFunctions:g.db.bindFunctions}},"render");function IA(t={}){var r;const e=$t({},t);e!=null&&e.fontFamily&&!((r=e.themeVariables)!=null&&r.fontFamily)&&(e.themeVariables||(e.themeVariables={}),e.themeVariables.fontFamily=e.fontFamily),ZF(e),e!=null&&e.theme&&e.theme in yi?e.themeVariables=yi[e.theme].getThemeVariables(e.themeVariables):e&&(e.themeVariables=yi.default.getThemeVariables(e.themeVariables));const n=typeof e=="object"?XF(e):PS();h0(n.logLevel),Qh()}x(IA,"initialize");var DA=x((t,e={})=>{const{code:n}=hy(t);return em.fromText(n,e)},"getDiagramFromText");function BA(t,e,n,r){AA(e,t),NA(e,n,r,e.attr("id"))}x(BA,"addA11yInfo");var to=Object.freeze({render:HK,parse:RA,getDiagramFromText:DA,initialize:IA,getConfig:pn,setConfig:$S,getSiteConfig:PS,updateSiteConfig:JF,reset:x(()=>{_d()},"reset"),globalReset:x(()=>{_d(ia)},"globalReset"),defaultConfig:ia});h0(pn().logLevel);_d(pn());var WK=x((t,e,n)=>{G.warn(t),K0(t)?(n&&n(t.str,t.hash),e.push({...t,message:t.str,error:t})):(n&&n(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},"handleError"),PA=x(async function(t={querySelector:".mermaid"}){try{await UK(t)}catch(e){if(K0(e)&&G.error(e.str),Yn.parseError&&Yn.parseError(e),!t.suppressErrors)throw G.error("Use the suppressErrors option to suppress these errors"),e}},"run"),UK=x(async function({postRenderCallback:t,querySelector:e,nodes:n}={querySelector:".mermaid"}){const r=to.getConfig();G.debug(`${t?"":"No "}Callback function found`);let i;if(n)i=n;else if(e)i=document.querySelectorAll(e);else throw new Error("Nodes and querySelector are both undefined");G.debug(`Found ${i.length} diagrams`),(r==null?void 0:r.startOnLoad)!==void 0&&(G.debug("Start On Load: "+(r==null?void 0:r.startOnLoad)),to.updateSiteConfig({startOnLoad:r==null?void 0:r.startOnLoad}));const s=new kr.InitIDGenerator(r.deterministicIds,r.deterministicIDSeed);let o;const a=[];for(const l of Array.from(i)){if(G.info("Rendering diagram: "+l.id),l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const c=`mermaid-${s.next()}`;o=l.innerHTML,o=iT(kr.entityDecode(o)).trim().replace(/<br\s*\/?>/gi,"<br/>");const u=kr.detectInit(o);u&&G.debug("Detected early reinit: ",u);try{const{svg:d,bindFunctions:h}=await HA(c,o,l);l.innerHTML=d,t&&await t(c),h&&h(l)}catch(d){WK(d,a,Yn.parseError)}}if(a.length>0)throw a[0]},"runThrowsErrors"),$A=x(function(t){to.initialize(t)},"initialize"),jK=x(async function(t,e,n){G.warn("mermaid.init is deprecated. Please use run instead."),t&&$A(t);const r={postRenderCallback:n,querySelector:".mermaid"};typeof e=="string"?r.querySelector=e:e&&(e instanceof HTMLElement?r.nodes=[e]:r.nodes=e),await PA(r)},"init"),qK=x(async(t,{lazyLoad:e=!0}={})=>{Qh(),og(...t),e===!1&&await pK()},"registerExternalDiagrams"),FA=x(function(){if(Yn.startOnLoad){const{startOnLoad:t}=to.getConfig();t&&Yn.run().catch(e=>G.error("Mermaid failed to initialize",e))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",FA,!1);var VK=x(function(t){Yn.parseError=t},"setParseErrorHandler"),ih=[],pp=!1,zA=x(async()=>{if(!pp){for(pp=!0;ih.length>0;){const t=ih.shift();if(t)try{await t()}catch(e){G.error("Error executing queue",e)}}pp=!1}},"executeQueue"),GK=x(async(t,e)=>new Promise((n,r)=>{const i=x(()=>new Promise((s,o)=>{to.parse(t,e).then(a=>{s(a),n(a)},a=>{var l;G.error("Error parsing",a),(l=Yn.parseError)==null||l.call(Yn,a),o(a),r(a)})}),"performCall");ih.push(i),zA().catch(r)}),"parse"),HA=x((t,e,n)=>new Promise((r,i)=>{const s=x(()=>new Promise((o,a)=>{to.render(t,e,n).then(l=>{o(l),r(l)},l=>{var c;G.error("Error parsing",l),(c=Yn.parseError)==null||c.call(Yn,l),a(l),i(l)})}),"performCall");ih.push(s),zA().catch(i)}),"render"),KK=x(()=>Object.keys(Ys).map(t=>({id:t})),"getRegisteredDiagramsMetadata"),Yn={startOnLoad:!0,mermaidAPI:to,parse:GK,render:HA,init:jK,run:PA,registerExternalDiagrams:qK,registerLayoutLoaders:KM,initialize:$A,parseError:void 0,contentLoaded:FA,setParseErrorHandler:VK,detectType:f0,registerIconPacks:yj,getRegisteredDiagramsMetadata:KK},WA=Yn;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */function lv(t,e){return t.attrs.id||`node-${e}`}WA.initialize({startOnLoad:!1,theme:"default",securityLevel:"loose"});const YK=({node:t,updateAttributes:e,editor:n,getPos:r})=>{const{t:i}=ki(),[s,o]=L.useState(t.attrs.code||""),[a,l]=L.useState("split"),[c,u]=L.useState(""),[d,h]=L.useState(null),f=L.useRef(`mermaid-${Math.random().toString(36).substr(2,9)}`).current,p=L.useCallback(()=>{var b,C;const y=(C=(b=n==null?void 0:n.storage)==null?void 0:b.handleDisplay)==null?void 0:C.handleView;if(y){const v=r(),k=lv(t,v);y.showHandleByNodeId(k)}},[n,t,r]),g=L.useCallback(y=>{var v,k;const b=(k=(v=n==null?void 0:n.storage)==null?void 0:v.handleDisplay)==null?void 0:k.handleView;if(!b)return;const C=y.relatedTarget;C!=null&&C.closest(".drag-handle")||setTimeout(()=>{const w=r(),S=lv(t,w);b.getCurrentNodeId()===S&&b.hideAllHandles()},50)},[n,t,r]),m=L.useCallback(async y=>{if(!y){u("");return}try{const b=document.getElementById(f);b&&b.remove();const{svg:C}=await WA.render(f,y);u(C),h(null)}catch(b){console.error("Mermaid rendering error:",b),h("Syntax Error")}},[f]);return L.useEffect(()=>{const y=setTimeout(()=>{m(s),s!==t.attrs.code&&e({code:s})},500);return()=>clearTimeout(y)},[s,m,e,t.attrs.code]),_.jsx(Sh,{className:"mermaid-node-view","data-type":"mermaid",children:_.jsxs("div",{className:"mermaid-container","data-type":"mermaid",onMouseEnter:p,onMouseLeave:g,children:[_.jsxs("div",{className:"mermaid-toolbar",children:[_.jsxs("div",{className:"mermaid-title",children:[_.jsx("span",{children:""})," ",i("editorMermaidTitle")]}),_.jsxs("div",{className:"mermaid-mode-group",children:[_.jsx("button",{className:`mermaid-mode-btn ${a==="code"?"active":""}`,onClick:()=>l("code"),children:i("editorMermaidCode")}),_.jsx("button",{className:`mermaid-mode-btn ${a==="split"?"active":""}`,onClick:()=>l("split"),children:i("editorMermaidSplit")}),_.jsx("button",{className:`mermaid-mode-btn ${a==="preview"?"active":""}`,onClick:()=>l("preview"),children:i("editorMermaidPreview")})]})]}),_.jsxs("div",{className:`mermaid-content-wrapper mode-${a}`,children:[_.jsx("div",{className:"mermaid-pane mermaid-editor-pane",children:_.jsx("textarea",{className:"mermaid-textarea",value:s,onChange:y=>o(y.target.value),spellCheck:!1,placeholder:i("editorMermaidPlaceholder")})}),_.jsx("div",{className:"mermaid-pane mermaid-preview-pane",children:d?_.jsxs("div",{className:"text-red-500 text-sm p-4 text-center",children:[_.jsx("div",{className:"font-bold mb-2",children:i("editorMermaidRenderError")}),d==="Syntax Error"?i("editorMermaidSyntaxError"):d]}):_.jsx("div",{className:"mermaid-svg-wrapper",dangerouslySetInnerHTML:{__html:c}})})]})]})})},XK=_t.create({name:"mermaid",group:"block",atom:!0,addOptions(){return{HTMLAttributes:{}}},addAttributes(){return{code:{default:`graph TD
 A[Start] --> B[End]`}}},parseHTML(){return[{tag:'div[data-type="mermaid"]'}]},renderHTML({HTMLAttributes:t}){return["div",Ze(t,{"data-type":"mermaid"})]},addNodeView(){return _h(YK)},addCommands(){return{setMermaid:()=>({commands:t})=>t.insertContent({type:this.name})}}}),sh=2,Uo=7,So=5,ZK=12,gp=2,xi="columns",lr="column",py="columnCleanupSkip";class ji{static calculateResizedWidths(e){const{deltaX:n,containerWidth:r,currentWidths:i,leftIndex:s,rightIndex:o}=e,a=n/r*100,l=i[s],c=i[o];let u=l+a,d=c-a;if(u<So?(u=So,d=l+c-So):d<So&&(d=So,u=l+c-So),!(Math.abs(u-l)>.1||Math.abs(d-c)>.1))return{changed:!1,newWidths:i};const f=[...i];return f[s]=u,f[o]=d,{changed:!0,newWidths:f}}static initializeWidths(e){const n=100/e;return Array(e).fill(n)}static widthsAfterAddColumn(e){return this.initializeWidths(e)}static widthsAfterRemoveColumn(e){return this.initializeWidths(e)}static shouldSyncWidths(e,n){return!e||e.length===0?!1:e.length!==n.length?!0:e.some((r,i)=>Math.abs(r-n[i])>.1)}}class JK{static canAddColumn(e){return e>=Uo?{valid:!1,error:` ${Uo}`}:{valid:!0}}static canRemoveColumn(e){return e<=sh?{valid:!1,error:` ${sh}`}:{valid:!0}}static addColumn(e){const{editor:n,node:r,nodePos:i,afterIndex:s,currentWidths:o}=e;j.multiColumn.debug(" ",{nodePos:i,afterIndex:s,currentWidths:o,currentColumnCount:o.length});const a=this.canAddColumn(o.length);if(!a.valid)return j.multiColumn.warn("",{error:a.error}),!1;const{tr:l}=n.state,c=ji.widthsAfterAddColumn(o.length+1);j.multiColumn.debug(" ",{oldWidths:o,newWidths:c,oldColumnCount:o.length,newColumnCount:c.length}),l.setNodeMarkup(i,void 0,{...r.attrs,count:c.length,columnWidths:c});const u=n.schema.nodes[lr],d=100/c.length,h=u.create({width:d},n.schema.nodes.paragraph.create());let f=i+1;for(let p=0;p<=s&&p<r.childCount;p++)f+=r.child(p).nodeSize;return j.multiColumn.debug(" ",{insertPos:f,afterIndex:s}),l.insert(f,h),l.setMeta(py,!0),n.view.dispatch(l),j.multiColumn.info(" transaction  dispatch",{nodePos:i,afterIndex:s,columnCount:c.length}),!0}static removeColumn(e){const{editor:n,node:r,nodePos:i,columnIndex:s,currentWidths:o}=e,a=this.canRemoveColumn(o.length);if(!a.valid)return j.multiColumn.warn("",{error:a.error}),!1;if(s>=r.childCount)return j.multiColumn.warn("",{columnIndex:s,totalColumns:r.childCount}),!1;const{tr:l}=n.state,c=ji.widthsAfterRemoveColumn(o.length-1);l.setNodeMarkup(i,void 0,{...r.attrs,count:c.length,columnWidths:c});let u=i+1;for(let h=0;h<s&&h<r.childCount;h++)u+=r.child(h).nodeSize;const d=r.child(s);return l.delete(u,u+d.nodeSize),n.view.dispatch(l),!0}static updateColumnWidths(e,n,r,i){const{tr:s}=e.state;s.setNodeMarkup(r,void 0,{...n.attrs,columnWidths:i}),e.view.dispatch(s)}}class QK{static canCreateColumns(e){const{$from:n}=e.selection;for(let r=n.depth;r>0;r--)if(n.node(r).type.name===lr)return{valid:!1,error:""};return{valid:!0}}static isInsideColumn(e,n){const r=e.doc.resolve(n);for(let i=r.depth;i>0;i--)if(r.node(i).type.name===lr)return!0;return!1}}class cv{static detectCleanupAction(e,n){if(e.type.name!==xi)return{type:"none"};if(e.childCount<sh)return{type:"unwrap-single-column",columnsPos:n};const r=this.findFirstEmptyColumn(e);return r!==-1?{type:"remove-empty-column",columnsPos:n,columnIndex:r}:{type:"none"}}static executeCleanup(e,n){return n.type==="unwrap-single-column"?this.unwrapColumns(e,n.columnsPos):n.type==="remove-empty-column"?this.removeEmptyColumn(e,n.columnsPos,n.columnIndex):e}static findFirstEmptyColumn(e){for(let n=0;n<e.childCount;n++){const r=e.child(n);if(this.isColumnEmpty(r))return n}return-1}static isColumnEmpty(e){if(e.type.name!==lr)return!1;if(e.childCount===0)return!0;if(e.childCount===1){const n=e.child(0);if(n.type.name==="paragraph"&&n.childCount===0)return!0}return!1}static unwrapColumns(e,n){const r=e.doc.nodeAt(n);if(!r||r.type.name!==xi)return e;const i=[];return r.forEach(s=>{s.type.name===lr&&s.forEach(o=>{i.push(o)})}),e.delete(n,n+r.nodeSize),i.length>0&&e.insert(n,i),e}static removeEmptyColumn(e,n,r){const i=e.doc.nodeAt(n);if(!i||i.type.name!==xi)return e;let s=n+1;for(let u=0;u<r;u++)s+=i.child(u).nodeSize;const o=i.child(r),a=s+o.nodeSize;e.delete(s,a);const l=i.childCount-1;if(l<sh)return this.unwrapColumns(e,n);const c=ji.widthsAfterRemoveColumn(l);return e.setNodeMarkup(n,void 0,{...i.attrs,count:l,columnWidths:c}),e}}const eY=({node:t,editor:e,getPos:n,updateAttributes:r})=>{const[i,s]=L.useState(!1),[o,a]=L.useState(-1),[l,c]=L.useState(!1),[u,d]=L.useState(()=>ji.initializeWidths(t.content.childCount)),[h,f]=L.useState([]),g=(t.attrs.layout||"grid")==="stacked",m=L.useRef(null),y=L.useRef(0),b=L.useRef([]),C=L.useRef(u),v=L.useRef(!1);L.useEffect(()=>{v.current||ji.shouldSyncWidths(t.attrs.columnWidths,u)&&d(t.attrs.columnWidths)},[t.attrs.columnWidths,t.content.childCount,u]),L.useEffect(()=>{C.current=u},[u]),L.useEffect(()=>{const P=setTimeout(()=>{if(m.current){j.multiColumn.debug(" DOM"),j.multiColumn.debug(" Container className",{className:m.current.className}),j.multiColumn.debug(" Container computedStyle",{display:window.getComputedStyle(m.current).display,gridTemplateColumns:window.getComputedStyle(m.current).gridTemplateColumns});const B=m.current.querySelector(".columns-content-grid");B&&j.multiColumn.debug(" Content Grid computedStyle",{display:window.getComputedStyle(B).display,gridTemplateColumns:window.getComputedStyle(B).gridTemplateColumns});const A=m.current.querySelectorAll('[data-type="column"]');j.multiColumn.debug(" Columns",Array.from(A).map((M,O)=>({index:O,className:M.className,display:window.getComputedStyle(M).display,width:M.getBoundingClientRect().width})))}},100);return()=>clearTimeout(P)},[t.content.childCount]),L.useEffect(()=>{const P=m.current;if(!P||g){f([]);return}const B=()=>{j.multiColumn.debug(""),j.multiColumn.debug("Container ",{container:P}),j.multiColumn.debug("Container HTML",{html:P.outerHTML.substring(0,500)});const F=P.querySelectorAll('[data-type="column"], .multi-column-item');if(j.multiColumn.debug(" column ",{count:F.length}),F.length===0){j.multiColumn.warn(" column "),j.multiColumn.debug("Container ",Array.from(P.children).map(Z=>({tagName:Z.tagName,className:Z.className,dataType:Z.getAttribute("data-type")}))),f([]);return}const R=P.getBoundingClientRect(),q=[];F.forEach((Z,Q)=>{const H=Z.getBoundingClientRect();if(j.multiColumn.debug(`Column ${Q}`,{left:H.left,right:H.right,width:H.width,computedStyle:window.getComputedStyle(Z).display}),Q<F.length-1){const se=F[Q+1].getBoundingClientRect(),K=(H.right+se.left)/2-R.left;j.multiColumn.debug(`Handle ${Q} position`,{position:K}),q.push({index:Q,position:K})}}),j.multiColumn.debug("",{positions:q}),f(q)},A=setTimeout(B,0);if(typeof ResizeObserver>"u")return()=>clearTimeout(A);const M=new ResizeObserver(B);M.observe(P);const O=new MutationObserver(B);return O.observe(P,{childList:!0,subtree:!0}),()=>{clearTimeout(A),M.disconnect(),O.disconnect()}},[u,t.content.childCount,g]);const k=L.useCallback(P=>{if(typeof n!="function")return;const B=n();if(JK.addColumn({editor:e,node:t,nodePos:B,afterIndex:P,currentWidths:u})){const M=ji.widthsAfterAddColumn(u.length+1);d(M)}},[u,e,n,t]),w=L.useCallback((P,B)=>{B.preventDefault(),s(!0),v.current=!0,a(P),y.current=B.clientX,b.current=[...u];const A=O=>{if(!m.current)return;const F=O.clientX-y.current,R=m.current.offsetWidth,q=ji.calculateResizedWidths({deltaX:F,containerWidth:R,currentWidths:b.current,leftIndex:P,rightIndex:P+1});q.changed&&d(q.newWidths)},M=()=>{r({columnWidths:C.current}),s(!1),v.current=!1,a(-1),document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",A),document.addEventListener("mouseup",M)},[u,r]),S=L.useCallback(P=>{if(!m.current)return{left:"0px",width:"0px"};const A=m.current.querySelectorAll('[data-type="column"], .multi-column-item')[P];if(!A)return{left:"0px",width:"0px"};const M=m.current.getBoundingClientRect(),O=A.getBoundingClientRect();return{left:`${O.left-M.left}px`,width:`${O.width}px`}},[]),E=g?"1fr":u.map(P=>`${P}fr`).join(" "),I=l||i,$=u.length<Uo,T={display:"grid",gridTemplateColumns:E,gap:`${ZK}px`,minHeight:"100px"};return j.multiColumn.debug(" :",{columnCount:t.content.childCount,columnWidths:u,gridTemplate:E,stacked:g,gridStyle:T}),_.jsx(Sh,{className:"columns-view-grid","data-show-styles":I,"data-dragging":i,"data-stacked":g?"true":void 0,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:_.jsxs("div",{ref:m,className:"columns-container-grid",style:T,children:[_.jsx(Xm,{className:"columns-content-grid",as:"div"}),!g&&i&&u.map((P,B)=>{const{left:A,width:M}=S(B);return _.jsx("div",{className:"percent-label-wrapper",style:{left:A,width:M},children:_.jsxs("span",{children:[Math.round(P),"%"]})},`label-${B}`)}),!g&&I&&h.map(({index:P,position:B})=>_.jsxs("div",{className:`multi-column-resize-handle ${P===o&&i?"active":""}`,style:{left:`${B}px`},onMouseDown:A=>w(P,A),children:[$&&_.jsxs("div",{className:"add-column-area",children:[_.jsx("div",{className:"column-dot-indicator"}),_.jsx("button",{className:"add-column-btn",onClick:A=>{A.stopPropagation(),k(P)},title:"",children:_.jsxs("svg",{width:"22",height:"24",viewBox:"0 0 22 24",fill:"none",children:[_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.153 20.721A10.999 10.999 0 0022 11c0-6.075-4.925-11-11-11S0 4.925 0 11c0 4.213 2.369 7.873 5.847 9.721L11 24l5.153-3.279z",fill:"var(--primary, #3370ff)"}),_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.45 6a.2.2 0 00-.2.2v4.05H6.2a.2.2 0 00-.2.2v1.1c0 .11.09.2.2.2h4.05v4.05c0 .11.09.2.2.2h1.1a.2.2 0 00.2-.2v-4.05h4.05a.2.2 0 00.2-.2v-1.1a.2.2 0 00-.2-.2h-4.05V6.2a.2.2 0 00-.2-.2h-1.1z",fill:"#fff"})]})})]}),_.jsx("div",{className:"resize-handle-dragger"})]},`handle-${P}`))]})})},tY=new rt("multiColumnCleanup");function nY(t){const e=[];return t.descendants((n,r)=>n.type.name===xi?(e.push({node:n,pos:r}),!1):!0),e}function rY(){return new Ge({key:tY,appendTransaction(t,e,n){if(!t.some(l=>l.docChanged)||t.some(l=>l.getMeta(py)))return null;const s=nY(n.doc);if(s.length===0)return null;let o=n.tr,a=!1;for(let l=s.length-1;l>=0;l--){const{node:c,pos:u}=s[l],d=cv.detectCleanupAction(c,u);if(d.type!=="none"){o=cv.executeCleanup(o,d),a=!0;break}}return a?o:null}})}const iY=_t.create({name:xi,group:"block",content:`${lr} ${lr}+`,isolating:!0,addAttributes(){return{count:{default:gp,parseHTML:t=>parseInt(t.getAttribute("data-columns")||`${gp}`),renderHTML:t=>({"data-columns":t.count})},columnWidths:{default:[],parseHTML:t=>{const e=t.getAttribute("data-column-widths");return e?JSON.parse(e):[]},renderHTML:t=>{var e;return(e=t.columnWidths)!=null&&e.length?{"data-column-widths":JSON.stringify(t.columnWidths)}:{}}},layout:{default:"grid",parseHTML:t=>t.getAttribute("data-layout")||"grid",renderHTML:t=>({"data-layout":t.layout||"grid"})}}},parseHTML(){return[{tag:'div[data-type="columns"]'}]},renderHTML({HTMLAttributes:t}){return["div",Ze(t,{"data-type":"columns"}),0]},addNodeView(){return _h(eY)},addCommands(){return{insertColumns:(t=gp)=>({commands:e,state:n})=>{const r=QK.canCreateColumns(n);if(!r.valid)return j.multiColumn.debug("[ColumnsExtension]",r.error),!1;const i=[],s=ji.initializeWidths(t);for(let a=0;a<t;a++)i.push({type:lr,attrs:{width:s[a]},content:[{type:"paragraph",content:[]}]});const o=e.insertContent({type:this.name,attrs:{count:t,columnWidths:s,layout:"grid"},content:i});if(o&&this.editor.view){const a=this.editor.state.tr;a.setMeta(py,!0),a.docChanged||this.editor.view.dispatch(a)}return o},setColumnWidths:t=>({state:e,dispatch:n})=>{const{selection:r}=e,i=r.$from.node(r.$from.depth);if(i.type.name!==this.name)return!1;if(n){const{tr:s}=e;s.setNodeMarkup(r.$from.before(r.$from.depth),void 0,{...i.attrs,columnWidths:t}),n(s)}return!0},setColumnsLayout:t=>({state:e,dispatch:n})=>{const{selection:r}=e,i=r.$from.node(r.$from.depth);if(i.type.name!==this.name)return!1;if(n){const{tr:s}=e;s.setNodeMarkup(r.$from.before(r.$from.depth),void 0,{...i.attrs,layout:t}),n(s)}return!0}}},addKeyboardShortcuts(){return{"Mod-Alt-2":()=>this.editor.commands.insertColumns(2),"Mod-Alt-3":()=>this.editor.commands.insertColumns(3)}},addProseMirrorPlugins(){return[rY()]}}),sY=_t.create({name:lr,content:"block+",isolating:!0,addAttributes(){return{width:{default:null,parseHTML:t=>t.getAttribute("data-width")||null,renderHTML:t=>t.width?{"data-width":t.width}:{}}}},parseHTML(){return[{tag:'div[data-type="column"]'}]},renderHTML({HTMLAttributes:t}){return["div",Ze(t,{"data-type":"column",class:"multi-column-item"}),0]}});var nm,rm;if(typeof WeakMap<"u"){let t=new WeakMap;nm=e=>t.get(e),rm=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;nm=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},rm=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var Ct=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let s=r+1,o=i+1;for(let a=1;s<this.width&&this.map[e+a]==n;a++)s++;for(let a=1;o<this.height&&this.map[e+this.width*a]==n;a++)o++;return{left:r,top:i,right:s,bottom:o}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:s,bottom:o}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[s*this.width+(n<0?r-1:i)]:(n<0?s==0:o==this.height)?null:this.map[r+this.width*(n<0?s-1:o)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:s}=this.findCell(t),{left:o,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(n,o),top:Math.min(i,l),right:Math.max(r,a),bottom:Math.max(s,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const s=r*this.width+i,o=this.map[s];n[o]||(n[o]=!0,!(i==t.left&&i&&this.map[s-1]==o||r==t.top&&r&&this.map[s-this.width]==o)&&e.push(o))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const s=i+n.child(r).nodeSize;if(r==t){let o=e+t*this.width;const a=(t+1)*this.width;for(;o<a&&this.map[o]<i;)o++;return o==a?s-1:this.map[o]}i=s}}static get(t){return nm(t)||rm(t,oY(t))}};function oY(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=aY(t),n=t.childCount,r=[];let i=0,s=null;const o=[];for(let c=0,u=e*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const d=t.child(c);u++;for(let p=0;;p++){for(;i<r.length&&r[i]!=0;)i++;if(p==d.childCount)break;const g=d.child(p),{colspan:m,rowspan:y,colwidth:b}=g.attrs;for(let C=0;C<y;C++){if(C+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:u,n:y-C});break}const v=i+C*e;for(let k=0;k<m;k++){r[v+k]==0?r[v+k]=u:(s||(s=[])).push({type:"collision",row:c,pos:u,n:m-k});const w=b&&b[k];if(w){const S=(v+k)%e*2,E=o[S];E==null||E!=w&&o[S+1]==1?(o[S]=w,o[S+1]=1):E==w&&o[S+1]++}}}i+=m,u+=g.nodeSize}const h=(c+1)*e;let f=0;for(;i<h;)r[i++]==0&&f++;f&&(s||(s=[])).push({type:"missing",row:c,n:f}),u++}(e===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const a=new Ct(e,n,r,s);let l=!1;for(let c=0;!l&&c<o.length;c+=2)o[c]!=null&&o[c+1]<n&&(l=!0);return l&&lY(a,o,t),a}function aY(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let s=0;if(n)for(let o=0;o<r;o++){const a=t.child(o);for(let l=0;l<a.childCount;l++){const c=a.child(l);o+c.attrs.rowspan>r&&(s+=c.attrs.colspan)}}for(let o=0;o<i.childCount;o++){const a=i.child(o);s+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function lY(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const s=t.map[i];if(r[s])continue;r[s]=!0;const o=n.nodeAt(s);if(!o)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=o.attrs;for(let c=0;c<l.colspan;c++){const u=(i+c)%t.width,d=e[u*2];d!=null&&(!l.colwidth||l.colwidth[c]!=d)&&((a||(a=cY(l)))[c]=d)}a&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function cY(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function yn(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}var Fi=new rt("selectingCells");function Sa(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function uY(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function Ar(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function ef(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=Sa(e.$head)||dY(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function dY(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function im(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function hY(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function gy(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function UA(t,e,n){const r=t.node(-1),i=Ct.get(r),s=t.start(-1),o=i.nextCell(t.pos-s,e,n);return o==null?null:t.node(0).resolve(s+o)}function no(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function jA(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(e,0,0)}return r}function fY(t,e,n){const r=yn(e.type.schema).header_cell;for(let i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0}var pt=class hi extends Ie{constructor(e,n=e){const r=e.node(-1),i=Ct.get(r),s=e.start(-1),o=i.rectBetween(e.pos-s,n.pos-s),a=e.node(0),l=i.cellsInRect(o).filter(u=>u!=n.pos-s);l.unshift(n.pos-s);const c=l.map(u=>{const d=r.nodeAt(u);if(!d)throw RangeError(`No cell with offset ${u} found`);const h=s+u+1;return new Yw(a.resolve(h),a.resolve(h+d.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(im(r)&&im(i)&&gy(r,i)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?hi.rowSelection(r,i):s&&this.isColSelection()?hi.colSelection(r,i):new hi(r,i)}return Te.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=Ct.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},o=[];for(let l=i.top;l<i.bottom;l++){const c=[];for(let u=l*n.width+i.left,d=i.left;d<i.right;d++,u++){const h=n.map[u];if(s[h])continue;s[h]=!0;const f=n.findCell(h);let p=e.nodeAt(h);if(!p)throw RangeError(`No cell with offset ${h} found`);const g=i.left-f.left,m=f.right-i.right;if(g>0||m>0){let y=p.attrs;if(g>0&&(y=no(y,0,g)),m>0&&(y=no(y,y.colspan-m,m)),f.left<i.left){if(p=p.type.createAndFill(y),!p)throw RangeError(`Could not create cell with attrs ${JSON.stringify(y)}`)}else p=p.type.create(y,p.content)}if(f.top<i.top||f.bottom>i.bottom){const y={...p.attrs,rowspan:Math.min(f.bottom,i.bottom)-Math.max(f.top,i.top)};f.top<i.top?p=p.type.createAndFill(y):p=p.type.create(y,p.content)}c.push(p)}o.push(e.child(l).copy(V.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?e:o;return new re(V.from(a),1,1)}replace(e,n=re.empty){const r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){const{$from:a,$to:l}=i[o],c=e.mapping.slice(r);e.replace(c.map(a.pos),c.map(l.pos),o?re.empty:n)}const s=Ie.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,n){this.replace(e,new re(V.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Ct.get(n),i=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let o=0;o<s.length;o++)e(n.nodeAt(s[o]),i+s[o])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=Ct.get(r),s=e.start(-1),o=i.findCell(e.pos-s),a=i.findCell(n.pos-s),l=e.node(0);return o.top<=a.top?(o.top>0&&(e=l.resolve(s+i.map[o.left])),a.bottom<i.height&&(n=l.resolve(s+i.map[i.width*(i.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(s+i.map[a.left])),o.bottom<i.height&&(e=l.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))),new hi(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Ct.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(i,s)>0)return!1;const o=i+this.$anchorCell.nodeAfter.attrs.colspan,a=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,a)==n.width}eq(e){return e instanceof hi&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=Ct.get(r),s=e.start(-1),o=i.findCell(e.pos-s),a=i.findCell(n.pos-s),l=e.node(0);return o.left<=a.left?(o.left>0&&(e=l.resolve(s+i.map[o.top*i.width])),a.right<i.width&&(n=l.resolve(s+i.map[i.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(s+i.map[a.top*i.width])),o.right<i.width&&(e=l.resolve(s+i.map[i.width*(o.top+1)-1]))),new hi(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new hi(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new hi(e.resolve(n),e.resolve(r))}getBookmark(){return new pY(this.$anchorCell.pos,this.$headCell.pos)}};pt.prototype.visible=!1;Ie.jsonID("cell",pt);var pY=class qA{constructor(e,n){this.anchor=e,this.head=n}map(e){return new qA(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&gy(n,r)?new pt(n,r):Ie.near(r,1)}};function gY(t){if(!(t.selection instanceof pt))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(St.node(r,r+n.nodeSize,{class:"selectedCell"}))}),at.create(t.doc,e)}function mY({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return n==r&&/row|table/.test(t.node(i).type.spec.tableRole)}function yY({$from:t,$to:e}){let n,r;for(let i=t.depth;i>0;i--){const s=t.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let i=e.depth;i>0;i--){const s=e.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&e.parentOffset===0}function bY(t,e,n){const r=(e||t).selection,i=(e||t).doc;let s,o;if(r instanceof xe&&(o=r.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")s=pt.create(i,r.from);else if(o=="row"){const a=i.resolve(r.from+1);s=pt.rowSelection(a,a)}else if(!n){const a=Ct.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];s=pt.create(i,l+1,c)}}else r instanceof Te&&mY(r)?s=Te.create(i,r.from):r instanceof Te&&yY(r)&&(s=Te.create(i,r.$from.start(),r.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}var xY=new rt("fix-tables");function VA(t,e,n,r){const i=t.childCount,s=e.childCount;e:for(let o=0,a=0;o<s;o++){const l=e.child(o);for(let c=a,u=Math.min(i,o+3);c<u;c++)if(t.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<i&&t.child(a).sameMarkup(l)?VA(t.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function GA(t,e){let n;const r=(i,s)=>{i.type.spec.tableRole=="table"&&(n=vY(t,i,s,n))};return e?e.doc!=t.doc&&VA(e.doc,t.doc,0,r):t.doc.descendants(r),n}function vY(t,e,n,r){const i=Ct.get(e);if(!i.problems)return r;r||(r=t.tr);const s=[];for(let l=0;l<i.height;l++)s.push(0);for(let l=0;l<i.problems.length;l++){const c=i.problems[l];if(c.type=="collision"){const u=e.nodeAt(c.pos);if(!u)continue;const d=u.attrs;for(let h=0;h<d.rowspan;h++)s[c.row+h]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,no(d,d.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const u=r.mapping.map(n);r.delete(u,u+e.nodeSize)}}let o,a;for(let l=0;l<s.length;l++)s[l]&&(o==null&&(o=l),a=l);for(let l=0,c=n+1;l<i.height;l++){const u=e.child(l),d=c+u.nodeSize,h=s[l];if(h>0){let f="cell";u.firstChild&&(f=u.firstChild.type.spec.tableRole);const p=[];for(let m=0;m<h;m++){const y=yn(t.schema)[f].createAndFill();y&&p.push(y)}const g=(l==0||o==l-1)&&a==l?c+1:d-1;r.insert(r.mapping.map(g),p)}c=d}return r.setMeta(xY,{fixTables:!0})}function ti(t){const e=t.selection,n=ef(t),r=n.node(-1),i=n.start(-1),s=Ct.get(r);return{...e instanceof pt?s.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):s.findCell(n.pos-i),tableStart:i,map:s,table:r}}function KA(t,{map:e,tableStart:n,table:r},i){let s=i>0?-1:0;fY(e,r,i+s)&&(s=i==0||i==e.width?null:0);for(let o=0;o<e.height;o++){const a=o*e.width+i;if(i>0&&i<e.width&&e.map[a-1]==e.map[a]){const l=e.map[a],c=r.nodeAt(l);t.setNodeMarkup(t.mapping.map(n+l),null,jA(c.attrs,i-e.colCount(l))),o+=c.attrs.rowspan-1}else{const l=s==null?yn(r.type.schema).cell:r.nodeAt(e.map[a+s]).type,c=e.positionAt(o,i,r);t.insert(t.mapping.map(n+c),l.createAndFill())}}return t}function wY(t,e){if(!Ar(t))return!1;if(e){const n=ti(t);e(KA(t.tr,n,n.left))}return!0}function CY(t,e){if(!Ar(t))return!1;if(e){const n=ti(t);e(KA(t.tr,n,n.right))}return!0}function kY(t,{map:e,table:n,tableStart:r},i){const s=t.mapping.maps.length;for(let o=0;o<e.height;){const a=o*e.width+i,l=e.map[a],c=n.nodeAt(l),u=c.attrs;if(i>0&&e.map[a-1]==l||i<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(s).map(r+l),null,no(u,i-e.colCount(l)));else{const d=t.mapping.slice(s).map(r+l);t.delete(d,d+c.nodeSize)}o+=u.rowspan}}function SY(t,e){if(!Ar(t))return!1;if(e){const n=ti(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;kY(r,n,i),i!=n.left;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=Ct.get(s)}e(r)}return!0}function _Y(t,e,n){var r;const i=yn(e.type.schema).header_cell;for(let s=0;s<t.width;s++)if(((r=e.nodeAt(t.map[s+n*t.width]))==null?void 0:r.type)!=i)return!1;return!0}function YA(t,{map:e,tableStart:n,table:r},i){var s;let o=n;for(let c=0;c<i;c++)o+=r.child(c).nodeSize;const a=[];let l=i>0?-1:0;_Y(e,r,i+l)&&(l=i==0||i==e.height?null:0);for(let c=0,u=e.width*i;c<e.width;c++,u++)if(i>0&&i<e.height&&e.map[u]==e.map[u-e.width]){const d=e.map[u],h=r.nodeAt(d).attrs;t.setNodeMarkup(n+d,null,{...h,rowspan:h.rowspan+1}),c+=h.colspan-1}else{const d=l==null?yn(r.type.schema).cell:(s=r.nodeAt(e.map[u+l*e.width]))==null?void 0:s.type,h=d==null?void 0:d.createAndFill();h&&a.push(h)}return t.insert(o,yn(r.type.schema).row.create(null,a)),t}function EY(t,e){if(!Ar(t))return!1;if(e){const n=ti(t);e(YA(t.tr,n,n.top))}return!0}function TY(t,e){if(!Ar(t))return!1;if(e){const n=ti(t);e(YA(t.tr,n,n.bottom))}return!0}function MY(t,{map:e,table:n,tableStart:r},i){let s=0;for(let c=0;c<i;c++)s+=n.child(c).nodeSize;const o=s+n.child(i).nodeSize,a=t.mapping.maps.length;t.delete(s+r,o+r);const l=new Set;for(let c=0,u=i*e.width;c<e.width;c++,u++){const d=e.map[u];if(!l.has(d)){if(l.add(d),i>0&&d==e.map[u-e.width]){const h=n.nodeAt(d).attrs;t.setNodeMarkup(t.mapping.slice(a).map(d+r),null,{...h,rowspan:h.rowspan-1}),c+=h.colspan-1}else if(i<e.height&&d==e.map[u+e.width]){const h=n.nodeAt(d),f=h.attrs,p=h.type.create({...f,rowspan:h.attrs.rowspan-1},h.content),g=e.positionAt(i+1,c,n);t.insert(t.mapping.slice(a).map(r+g),p),c+=f.colspan-1}}}}function AY(t,e){if(!Ar(t))return!1;if(e){const n=ti(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;MY(r,n,i),i!=n.top;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=Ct.get(n.table)}e(r)}return!0}function uv(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function NY({width:t,height:e,map:n},r){let i=r.top*t+r.left,s=i,o=(r.bottom-1)*t+r.left,a=i+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[s]==n[s-1]||r.right<t&&n[a]==n[a+1])return!0;s+=t,a+=t}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[i]==n[i-t]||r.bottom<e&&n[o]==n[o+t])return!0;i++,o++}return!1}function dv(t,e){const n=t.selection;if(!(n instanceof pt)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=ti(t),{map:i}=r;if(NY(i,r))return!1;if(e){const s=t.tr,o={};let a=V.empty,l,c;for(let u=r.top;u<r.bottom;u++)for(let d=r.left;d<r.right;d++){const h=i.map[u*i.width+d],f=r.table.nodeAt(h);if(!(o[h]||!f))if(o[h]=!0,l==null)l=h,c=f;else{uv(f)||(a=a.append(f.content));const p=s.mapping.map(h+r.tableStart);s.delete(p,p+f.nodeSize)}}if(l==null||c==null)return!0;if(s.setNodeMarkup(l+r.tableStart,null,{...jA(c.attrs,c.attrs.colspan,r.right-r.left-c.attrs.colspan),rowspan:r.bottom-r.top}),a.size){const u=l+1+c.content.size,d=uv(c)?l+1:u;s.replaceWith(d+r.tableStart,u+r.tableStart,a)}s.setSelection(new pt(s.doc.resolve(l+r.tableStart))),e(s)}return!0}function hv(t,e){const n=yn(t.schema);return OY(({node:r})=>n[r.type.spec.tableRole])(t,e)}function OY(t){return(e,n)=>{var r;const i=e.selection;let s,o;if(i instanceof pt){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;s=i.$anchorCell.nodeAfter,o=i.$anchorCell.pos}else{if(s=uY(i.$from),!s)return!1;o=(r=Sa(i.$from))==null?void 0:r.pos}if(s==null||o==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(n){let a=s.attrs;const l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const u=ti(e),d=e.tr;for(let f=0;f<u.right-u.left;f++)l.push(c?{...a,colwidth:c&&c[f]?[c[f]]:null}:a);let h;for(let f=u.top;f<u.bottom;f++){let p=u.map.positionAt(f,u.left,u.table);f==u.top&&(p+=s.nodeSize);for(let g=u.left,m=0;g<u.right;g++,m++)g==u.left&&f==u.top||d.insert(h=d.mapping.map(p+u.tableStart,1),t({node:s,row:f,col:g}).createAndFill(l[m]))}d.setNodeMarkup(o,t({node:s,row:u.top,col:u.left}),l[0]),i instanceof pt&&d.setSelection(new pt(d.doc.resolve(i.$anchorCell.pos),h?d.doc.resolve(h):void 0)),n(d)}return!0}}function LY(t,e){return function(n,r){if(!Ar(n))return!1;const i=ef(n);if(i.nodeAfter.attrs[t]===e)return!1;if(r){const s=n.tr;n.selection instanceof pt?n.selection.forEachCell((o,a)=>{o.attrs[t]!==e&&s.setNodeMarkup(a,null,{...o.attrs,[t]:e})}):s.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[t]:e}),r(s)}return!0}}function RY(t){return function(e,n){if(!Ar(e))return!1;if(n){const r=yn(e.schema),i=ti(e),s=e.tr,o=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),a=o.map(l=>i.table.nodeAt(l));for(let l=0;l<o.length;l++)a[l].type==r.header_cell&&s.setNodeMarkup(i.tableStart+o[l],r.cell,a[l].attrs);if(s.steps.length==0)for(let l=0;l<o.length;l++)s.setNodeMarkup(i.tableStart+o[l],r.header_cell,a[l].attrs);n(s)}return!0}}function fv(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const s=e.table.nodeAt(r[i]);if(s&&s.type!==n.header_cell)return!1}return!0}function Yl(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?RY(t):function(n,r){if(!Ar(n))return!1;if(r){const i=yn(n.schema),s=ti(n),o=n.tr,a=fv("row",s,i),l=fv("column",s,i),u=(t==="column"?a:t==="row"?l:!1)?1:0,d=t=="column"?{left:0,top:u,right:1,bottom:s.map.height}:t=="row"?{left:u,top:0,right:s.map.width,bottom:1}:s,h=t=="column"?l?i.cell:i.header_cell:t=="row"?a?i.cell:i.header_cell:i.cell;s.map.cellsInRect(d).forEach(f=>{const p=f+s.tableStart,g=o.doc.nodeAt(p);g&&o.setNodeMarkup(p,h,g.attrs)}),r(o)}return!0}}Yl("row",{useDeprecatedLogic:!0});Yl("column",{useDeprecatedLogic:!0});var IY=Yl("cell",{useDeprecatedLogic:!0});function DY(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,i=t.before();r>=0;r--){const s=t.node(-1).child(r),o=s.lastChild;if(o)return i-1-o.nodeSize;i-=s.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),i=t.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return i+1;i+=s.nodeSize}}return null}function pv(t){return function(e,n){if(!Ar(e))return!1;const r=DY(ef(e),t);if(r==null)return!1;if(n){const i=e.doc.resolve(r);n(e.tr.setSelection(Te.between(i,hY(i))).scrollIntoView())}return!0}}function BY(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function nu(t,e){const n=t.selection;if(!(n instanceof pt))return!1;if(e){const r=t.tr,i=yn(t.schema).cell.createAndFill().content;n.forEachCell((s,o)=>{s.content.eq(i)||r.replace(r.mapping.map(o+1),r.mapping.map(o+s.nodeSize-1),new re(i,0,0))}),r.docChanged&&e(r)}return!0}function PY(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const i=e.child(0),s=i.type.spec.tableRole,o=i.type.schema,a=[];if(s=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const u=l?0:Math.max(0,n-1),d=l<e.childCount-1?0:Math.max(0,r-1);(u||d)&&(c=sm(yn(o).row,new re(c,u,d)).content),a.push(c)}else if(s=="cell"||s=="header_cell")a.push(n||r?sm(yn(o).row,new re(e,n,r)).content:e);else return null;return $Y(o,a)}function $Y(t,e){const n=[];for(let i=0;i<e.length;i++){const s=e[i];for(let o=s.childCount-1;o>=0;o--){const{rowspan:a,colspan:l}=s.child(o).attrs;for(let c=i;c<i+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=e.length&&e.push(V.empty),n[i]<r){const s=yn(t).cell.createAndFill(),o=[];for(let a=n[i];a<r;a++)o.push(s);e[i]=e[i].append(V.from(o))}return{height:e.length,width:r,rows:e}}function sm(t,e){const n=t.createAndFill();return new vm(n).replace(0,n.content.size,e).doc}function FY({width:t,height:e,rows:n},r,i){if(t!=r){const s=[],o=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let u=s[a]||0,d=0;u<r;d++){let h=l.child(d%l.childCount);u+h.attrs.colspan>r&&(h=h.type.createChecked(no(h.attrs,h.attrs.colspan,u+h.attrs.colspan-r),h.content)),c.push(h),u+=h.attrs.colspan;for(let f=1;f<h.attrs.rowspan;f++)s[a+f]=(s[a+f]||0)+h.attrs.colspan}o.push(V.from(c))}n=o,t=r}if(e!=i){const s=[];for(let o=0,a=0;o<i;o++,a++){const l=[],c=n[a%e];for(let u=0;u<c.childCount;u++){let d=c.child(u);o+d.attrs.rowspan>i&&(d=d.type.create({...d.attrs,rowspan:Math.max(1,i-d.attrs.rowspan)},d.content)),l.push(d)}s.push(V.from(l))}n=s,e=i}return{width:t,height:e,rows:n}}function zY(t,e,n,r,i,s,o){const a=t.doc.type.schema,l=yn(a);let c,u;if(i>e.width)for(let d=0,h=0;d<e.height;d++){const f=n.child(d);h+=f.nodeSize;const p=[];let g;f.lastChild==null||f.lastChild.type==l.cell?g=c||(c=l.cell.createAndFill()):g=u||(u=l.header_cell.createAndFill());for(let m=e.width;m<i;m++)p.push(g);t.insert(t.mapping.slice(o).map(h-1+r),p)}if(s>e.height){const d=[];for(let p=0,g=(e.height-1)*e.width;p<Math.max(e.width,i);p++){const m=p>=e.width?!1:n.nodeAt(e.map[g+p]).type==l.header_cell;d.push(m?u||(u=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const h=l.row.create(null,V.from(d)),f=[];for(let p=e.height;p<s;p++)f.push(h);t.insert(t.mapping.slice(o).map(r+n.nodeSize-2),f)}return!!(c||u)}function gv(t,e,n,r,i,s,o,a){if(o==0||o==e.height)return!1;let l=!1;for(let c=i;c<s;c++){const u=o*e.width+c,d=e.map[u];if(e.map[u-e.width]==d){l=!0;const h=n.nodeAt(d),{top:f,left:p}=e.findCell(d);t.setNodeMarkup(t.mapping.slice(a).map(d+r),null,{...h.attrs,rowspan:o-f}),t.insert(t.mapping.slice(a).map(e.positionAt(o,p,n)),h.type.createAndFill({...h.attrs,rowspan:f+h.attrs.rowspan-o})),c+=h.attrs.colspan-1}}return l}function mv(t,e,n,r,i,s,o,a){if(o==0||o==e.width)return!1;let l=!1;for(let c=i;c<s;c++){const u=c*e.width+o,d=e.map[u];if(e.map[u-1]==d){l=!0;const h=n.nodeAt(d),f=e.colCount(d),p=t.mapping.slice(a).map(d+r);t.setNodeMarkup(p,null,no(h.attrs,o-f,h.attrs.colspan-(o-f))),t.insert(p+h.nodeSize,h.type.createAndFill(no(h.attrs,0,o-f))),c+=h.attrs.rowspan-1}}return l}function yv(t,e,n,r,i){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let o=Ct.get(s);const{top:a,left:l}=r,c=l+i.width,u=a+i.height,d=t.tr;let h=0;function f(){if(s=n?d.doc.nodeAt(n-1):d.doc,!s)throw new Error("No table found");o=Ct.get(s),h=d.mapping.maps.length}zY(d,o,s,n,c,u,h)&&f(),gv(d,o,s,n,l,c,a,h)&&f(),gv(d,o,s,n,l,c,u,h)&&f(),mv(d,o,s,n,a,u,l,h)&&f(),mv(d,o,s,n,a,u,c,h)&&f();for(let p=a;p<u;p++){const g=o.positionAt(p,l,s),m=o.positionAt(p,c,s);d.replace(d.mapping.slice(h).map(g+n),d.mapping.slice(h).map(m+n),new re(i.rows[p-a],0,0))}f(),d.setSelection(new pt(d.doc.resolve(n+o.positionAt(a,l,s)),d.doc.resolve(n+o.positionAt(u-1,c-1,s)))),e(d)}var HY=Bm({ArrowLeft:ru("horiz",-1),ArrowRight:ru("horiz",1),ArrowUp:ru("vert",-1),ArrowDown:ru("vert",1),"Shift-ArrowLeft":iu("horiz",-1),"Shift-ArrowRight":iu("horiz",1),"Shift-ArrowUp":iu("vert",-1),"Shift-ArrowDown":iu("vert",1),Backspace:nu,"Mod-Backspace":nu,Delete:nu,"Mod-Delete":nu});function Au(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function ru(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;if(s instanceof pt)return Au(n,r,Ie.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const o=XA(i,t,e);if(o==null)return!1;if(t=="horiz")return Au(n,r,Ie.near(n.doc.resolve(s.head+e),e));{const a=n.doc.resolve(o),l=UA(a,t,e);let c;return l?c=Ie.near(l,1):e<0?c=Ie.near(n.doc.resolve(a.before(-1)),-1):c=Ie.near(n.doc.resolve(a.after(-1)),1),Au(n,r,c)}}}function iu(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;let o;if(s instanceof pt)o=s;else{const l=XA(i,t,e);if(l==null)return!1;o=new pt(n.doc.resolve(l))}const a=UA(o.$headCell,t,e);return a?Au(n,r,new pt(o.$anchorCell,a)):!1}}function WY(t,e){const n=t.state.doc,r=Sa(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new pt(r))),!0):!1}function UY(t,e,n){if(!Ar(t.state))return!1;let r=PY(n);const i=t.state.selection;if(i instanceof pt){r||(r={width:1,height:1,rows:[V.from(sm(yn(t.state.schema).cell,n))]});const s=i.$anchorCell.node(-1),o=i.$anchorCell.start(-1),a=Ct.get(s).rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o);return r=FY(r,a.right-a.left,a.bottom-a.top),yv(t.state,t.dispatch,o,a,r),!0}else if(r){const s=ef(t.state),o=s.start(-1);return yv(t.state,t.dispatch,o,Ct.get(s.node(-1)).findCell(s.pos-o),r),!0}else return!1}function jY(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=bv(t,e.target);let i;if(e.shiftKey&&t.state.selection instanceof pt)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=Sa(t.state.selection.$anchor))!=null&&((n=mp(t,e))==null?void 0:n.pos)!=i.pos)s(i,e),e.preventDefault();else if(!r)return;function s(l,c){let u=mp(t,c);const d=Fi.getState(t.state)==null;if(!u||!gy(l,u))if(d)u=l;else return;const h=new pt(l,u);if(d||!t.state.selection.eq(h)){const f=t.state.tr.setSelection(h);d&&f.setMeta(Fi,l.pos),t.dispatch(f)}}function o(){t.root.removeEventListener("mouseup",o),t.root.removeEventListener("dragstart",o),t.root.removeEventListener("mousemove",a),Fi.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Fi,-1))}function a(l){const c=l,u=Fi.getState(t.state);let d;if(u!=null)d=t.state.doc.resolve(u);else if(bv(t,c.target)!=r&&(d=mp(t,e),!d))return o();d&&s(d,c)}t.root.addEventListener("mouseup",o),t.root.addEventListener("dragstart",o),t.root.addEventListener("mousemove",a)}function XA(t,e,n){if(!(t.state.selection instanceof Te))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const s=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const a=r.before(i),l=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(l)?a:null}}return null}function bv(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function mp(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?Sa(t.state.doc.resolve(n.pos)):null}var qY=class{constructor(e,n){this.node=e,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),om(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,om(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function om(t,e,n,r,i,s){var o;let a=0,l=!0,c=e.firstChild;const u=t.firstChild;if(u){for(let d=0,h=0;d<u.childCount;d++){const{colspan:f,colwidth:p}=u.child(d).attrs;for(let g=0;g<f;g++,h++){const m=i==h?s:p&&p[g],y=m?m+"px":"";if(a+=m||r,m||(l=!1),c)c.style.width!=y&&(c.style.width=y),c=c.nextSibling;else{const b=document.createElement("col");b.style.width=y,e.appendChild(b)}}}for(;c;){const d=c.nextSibling;(o=c.parentNode)==null||o.removeChild(c),c=d}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var Gn=new rt("tableColumnResizing");function VY({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=qY,lastColumnResizable:i=!0}={}){const s=new Ge({key:Gn,state:{init(o,a){var l,c;const u=(c=(l=s.spec)==null?void 0:l.props)==null?void 0:c.nodeViews,d=yn(a.schema).table.name;return r&&u&&(u[d]=(h,f)=>new r(h,n,f)),new GY(-1,!1)},apply(o,a){return a.apply(o)}},props:{attributes:o=>{const a=Gn.getState(o);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,a)=>{KY(o,a,t,i)},mouseleave:o=>{YY(o)},mousedown:(o,a)=>{XY(o,a,e,n)}},decorations:o=>{const a=Gn.getState(o);if(a&&a.activeHandle>-1)return tX(o,a.activeHandle)},nodeViews:{}}});return s}var GY=class Nu{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(Gn);if(r&&r.setHandle!=null)return new Nu(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new Nu(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let i=e.mapping.map(n.activeHandle,-1);return im(e.doc.resolve(i))||(i=-1),new Nu(i,n.dragging)}return n}};function KY(t,e,n,r){if(!t.editable)return;const i=Gn.getState(t.state);if(i&&!i.dragging){const s=JY(e.target);let o=-1;if(s){const{left:a,right:l}=s.getBoundingClientRect();e.clientX-a<=n?o=xv(t,e,"left",n):l-e.clientX<=n&&(o=xv(t,e,"right",n))}if(o!=i.activeHandle){if(!r&&o!==-1){const a=t.state.doc.resolve(o),l=a.node(-1),c=Ct.get(l),u=a.start(-1);if(c.colCount(a.pos-u)+a.nodeAfter.attrs.colspan-1==c.width-1)return}ZA(t,o)}}}function YY(t){if(!t.editable)return;const e=Gn.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&ZA(t,-1)}function XY(t,e,n,r){var i;if(!t.editable)return!1;const s=(i=t.dom.ownerDocument.defaultView)!=null?i:window,o=Gn.getState(t.state);if(!o||o.activeHandle==-1||o.dragging)return!1;const a=t.state.doc.nodeAt(o.activeHandle),l=ZY(t,o.activeHandle,a.attrs);t.dispatch(t.state.tr.setMeta(Gn,{setDragging:{startX:e.clientX,startWidth:l}}));function c(d){s.removeEventListener("mouseup",c),s.removeEventListener("mousemove",u);const h=Gn.getState(t.state);h!=null&&h.dragging&&(QY(t,h.activeHandle,vv(h.dragging,d,n)),t.dispatch(t.state.tr.setMeta(Gn,{setDragging:null})))}function u(d){if(!d.which)return c(d);const h=Gn.getState(t.state);if(h&&h.dragging){const f=vv(h.dragging,d,n);wv(t,h.activeHandle,f,r)}}return wv(t,o.activeHandle,l,r),s.addEventListener("mouseup",c),s.addEventListener("mousemove",u),e.preventDefault(),!0}function ZY(t,e,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const s=t.domAtPos(e);let a=s.node.childNodes[s.offset].offsetWidth,l=n;if(r)for(let c=0;c<n;c++)r[c]&&(a-=r[c],l--);return a/l}function JY(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function xv(t,e,n,r){const i=n=="right"?-r:r,s=t.posAtCoords({left:e.clientX+i,top:e.clientY});if(!s)return-1;const{pos:o}=s,a=Sa(t.state.doc.resolve(o));if(!a)return-1;if(n=="right")return a.pos;const l=Ct.get(a.node(-1)),c=a.start(-1),u=l.map.indexOf(a.pos-c);return u%l.width==0?-1:c+l.map[u-1]}function vv(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function ZA(t,e){t.dispatch(t.state.tr.setMeta(Gn,{setHandle:e}))}function QY(t,e,n){const r=t.state.doc.resolve(e),i=r.node(-1),s=Ct.get(i),o=r.start(-1),a=s.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let c=0;c<s.height;c++){const u=c*s.width+a;if(c&&s.map[u]==s.map[u-s.width])continue;const d=s.map[u],h=i.nodeAt(d).attrs,f=h.colspan==1?0:a-s.colCount(d);if(h.colwidth&&h.colwidth[f]==n)continue;const p=h.colwidth?h.colwidth.slice():eX(h.colspan);p[f]=n,l.setNodeMarkup(o+d,null,{...h,colwidth:p})}l.docChanged&&t.dispatch(l)}function wv(t,e,n,r){const i=t.state.doc.resolve(e),s=i.node(-1),o=i.start(-1),a=Ct.get(s).colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1;let l=t.domAtPos(i.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&om(s,l.firstChild,l,r,a,n)}function eX(t){return Array(t).fill(0)}function tX(t,e){var n;const r=[],i=t.doc.resolve(e),s=i.node(-1);if(!s)return at.empty;const o=Ct.get(s),a=i.start(-1),l=o.colCount(i.pos-a)+i.nodeAfter.attrs.colspan-1;for(let c=0;c<o.height;c++){const u=l+c*o.width;if((l==o.width-1||o.map[u]!=o.map[u+1])&&(c==0||o.map[u]!=o.map[u-o.width])){const d=o.map[u],h=a+d+s.nodeAt(d).nodeSize-1,f=document.createElement("div");f.className="column-resize-handle",(n=Gn.getState(t))!=null&&n.dragging&&r.push(St.node(a+d,a+d+s.nodeAt(d).nodeSize,{class:"column-resize-dragging"})),r.push(St.widget(h,f))}}return at.create(t.doc,r)}function nX({allowTableNodeSelection:t=!1}={}){return new Ge({key:Fi,state:{init(){return null},apply(e,n){const r=e.getMeta(Fi);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:i,pos:s}=e.mapping.mapResult(n);return i?null:s}},props:{decorations:gY,handleDOMEvents:{mousedown:jY},createSelectionBetween(e){return Fi.getState(e.state)!=null?e.state.selection:null},handleTripleClick:WY,handleKeyDown:HY,handlePaste:UY},appendTransaction(e,n,r){return bY(r,GA(r,n),t)}})}var JA=_t.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{var e,n;const r=t.getAttribute("colwidth"),i=r?r.split(",").map(s=>parseInt(s,10)):null;if(!i){const s=(e=t.closest("table"))==null?void 0:e.querySelectorAll("colgroup > col"),o=Array.from(((n=t.parentElement)==null?void 0:n.children)||[]).indexOf(t);if(o&&o>-1&&s&&s[o]){const a=s[o].getAttribute("width");return a?[parseInt(a,10)]:null}}return i}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",Ze(this.options.HTMLAttributes,t),0]}}),QA=_t.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",Ze(this.options.HTMLAttributes,t),0]}}),eN=_t.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",Ze(this.options.HTMLAttributes,t),0]}});function am(t,e){return e?["width",`${Math.max(e,t)}px`]:["min-width",`${t}px`]}function Cv(t,e,n,r,i,s){var o;let a=0,l=!0,c=e.firstChild;const u=t.firstChild;if(u!==null)for(let h=0,f=0;h<u.childCount;h+=1){const{colspan:p,colwidth:g}=u.child(h).attrs;for(let m=0;m<p;m+=1,f+=1){const y=i===f?s:g&&g[m],b=y?`${y}px`:"";if(a+=y||r,y||(l=!1),c){if(c.style.width!==b){const[C,v]=am(r,y);c.style.setProperty(C,v)}c=c.nextSibling}else{const C=document.createElement("col"),[v,k]=am(r,y);C.style.setProperty(v,k),e.appendChild(C)}}}for(;c;){const h=c.nextSibling;(o=c.parentNode)==null||o.removeChild(c),c=h}const d=t.attrs.style&&typeof t.attrs.style=="string"&&/\bwidth\s*:/i.test(t.attrs.style);l&&!d?(n.style.width=`${a}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${a}px`)}var rX=class{constructor(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),t.attrs.style&&(this.table.style.cssText=t.attrs.style),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Cv(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!==this.node.type?!1:(this.node=t,Cv(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){const e=t.target,n=this.dom.contains(e),r=this.contentDOM.contains(e);return!!(n&&!r&&(t.type==="attributes"||t.type==="childList"||t.type==="characterData"))}};function iX(t,e,n,r){let i=0,s=!0;const o=[],a=t.firstChild;if(!a)return{};for(let d=0,h=0;d<a.childCount;d+=1){const{colspan:f,colwidth:p}=a.child(d).attrs;for(let g=0;g<f;g+=1,h+=1){const m=n===h?r:p&&p[g];i+=m||e,m||(s=!1);const[y,b]=am(e,m);o.push(["col",{style:`${y}: ${b}`}])}}const l=s?`${i}px`:"",c=s?"":`${i}px`;return{colgroup:["colgroup",{},...o],tableWidth:l,tableMinWidth:c}}function kv(t,e){return t.createAndFill()}function sX(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function oX(t,e,n,r,i){const s=sX(t),o=[],a=[];for(let c=0;c<n;c+=1){const u=kv(s.cell);if(u&&a.push(u),r){const d=kv(s.header_cell);d&&o.push(d)}}const l=[];for(let c=0;c<e;c+=1)l.push(s.row.createChecked(null,r&&c===0?o:a));return s.table.createChecked(null,l)}function aX(t){return t instanceof pt}var su=({editor:t})=>{const{selection:e}=t.state;if(!aX(e))return!1;let n=0;const r=QC(e.ranges[0].$from,s=>s.type.name==="table");return r==null||r.node.descendants(s=>{if(s.type.name==="table")return!1;["tableCell","tableHeader"].includes(s.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},lX="";function cX(t){return(t||"").replace(/\s+/g," ").trim()}function uX(t,e,n={}){var r;const i=(r=n.cellLineSeparator)!=null?r:lX;if(!t||!t.content||t.content.length===0)return"";const s=[];t.content.forEach(p=>{const g=[];p.content&&p.content.forEach(m=>{let y="";m.content&&Array.isArray(m.content)&&m.content.length>1?y=m.content.map(k=>e.renderChildren(k)).join(i):y=m.content?e.renderChildren(m.content):"";const b=cX(y),C=m.type==="tableHeader";g.push({text:b,isHeader:C})}),s.push(g)});const o=s.reduce((p,g)=>Math.max(p,g.length),0);if(o===0)return"";const a=new Array(o).fill(0);s.forEach(p=>{var g;for(let m=0;m<o;m+=1){const b=(((g=p[m])==null?void 0:g.text)||"").length;b>a[m]&&(a[m]=b),a[m]<3&&(a[m]=3)}});const l=(p,g)=>p+" ".repeat(Math.max(0,g-p.length)),c=s[0],u=c.some(p=>p.isHeader);let d=`
`;const h=new Array(o).fill(0).map((p,g)=>u&&c[g]&&c[g].text||"");return d+=`| ${h.map((p,g)=>l(p,a[g])).join(" | ")} |
`,d+=`| ${a.map(p=>"-".repeat(Math.max(3,p))).join(" | ")} |
`,(u?s.slice(1):s).forEach(p=>{d+=`| ${new Array(o).fill(0).map((g,m)=>l(p[m]&&p[m].text||"",a[m])).join(" | ")} |
`}),d}var dX=uX,tN=_t.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,renderWrapper:!1,handleWidth:5,cellMinWidth:25,View:rX,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){const{colgroup:n,tableWidth:r,tableMinWidth:i}=iX(t,this.options.cellMinWidth),s=e.style;function o(){return s||(r?`width: ${r}`:`min-width: ${i}`)}const a=["table",Ze(this.options.HTMLAttributes,e,{style:o()}),n,["tbody",0]];return this.options.renderWrapper?["div",{class:"tableWrapper"},a]:a},parseMarkdown:(t,e)=>{const n=[];if(t.header){const r=[];t.header.forEach(i=>{r.push(e.createNode("tableHeader",{},[{type:"paragraph",content:e.parseInline(i.tokens)}]))}),n.push(e.createNode("tableRow",{},r))}return t.rows&&t.rows.forEach(r=>{const i=[];r.forEach(s=>{i.push(e.createNode("tableCell",{},[{type:"paragraph",content:e.parseInline(s.tokens)}]))}),n.push(e.createNode("tableRow",{},i))}),e.createNode("table",void 0,n)},renderMarkdown:(t,e)=>dX(t,e),addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:s})=>{const o=oX(s.schema,t,e,n);if(i){const a=r.selection.from+1;r.replaceSelectionWith(o).scrollIntoView().setSelection(Te.near(r.doc.resolve(a)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>wY(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>CY(t,e),deleteColumn:()=>({state:t,dispatch:e})=>SY(t,e),addRowBefore:()=>({state:t,dispatch:e})=>EY(t,e),addRowAfter:()=>({state:t,dispatch:e})=>TY(t,e),deleteRow:()=>({state:t,dispatch:e})=>AY(t,e),deleteTable:()=>({state:t,dispatch:e})=>BY(t,e),mergeCells:()=>({state:t,dispatch:e})=>dv(t,e),splitCell:()=>({state:t,dispatch:e})=>hv(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>Yl("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>Yl("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>IY(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>dv(t,e)?!0:hv(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>LY(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>pv(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>pv(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&GA(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const r=pt.create(e.doc,t.anchorCell,t.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:su,"Mod-Backspace":su,Delete:su,"Mod-Delete":su}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[VY({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],nX({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:Qe(Se(t,"tableRole",e))}}});Je.create({name:"tableKit",addExtensions(){const t=[];return this.options.table!==!1&&t.push(tN.configure(this.options.table)),this.options.tableCell!==!1&&t.push(JA.configure(this.options.tableCell)),this.options.tableHeader!==!1&&t.push(QA.configure(this.options.tableHeader)),this.options.tableRow!==!1&&t.push(eN.configure(this.options.tableRow)),t}});function hX(){return[tN.configure({resizable:!0}),eN,QA,JA]}var tf="Popover",[nN]=lw(tf,[ow]),gc=ow(),[fX,hs]=nN(tf),rN=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,a=gc(e),l=L.useRef(null),[c,u]=L.useState(!1),[d,h]=aw({prop:r,defaultProp:i??!1,onChange:s,caller:tf});return _.jsx(bO,{...a,children:_.jsx(fX,{scope:e,contentId:jr(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:L.useCallback(()=>h(f=>!f),[h]),hasCustomAnchor:c,onCustomAnchorAdd:L.useCallback(()=>u(!0),[]),onCustomAnchorRemove:L.useCallback(()=>u(!1),[]),modal:o,children:n})})};rN.displayName=tf;var iN="PopoverAnchor",pX=L.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=hs(iN,n),s=gc(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=i;return L.useEffect(()=>(o(),()=>a()),[o,a]),_.jsx(cw,{...s,...r,ref:e})});pX.displayName=iN;var sN="PopoverTrigger",oN=L.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=hs(sN,n),s=gc(n),o=Jl(e,i.triggerRef),a=_.jsx(oo.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":dN(i.open),...r,ref:o,onClick:qr(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:_.jsx(cw,{asChild:!0,...s,children:a})});oN.displayName=sN;var my="PopoverPortal",[gX,mX]=nN(my,{forceMount:void 0}),aN=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=hs(my,e);return _.jsx(gX,{scope:e,forceMount:n,children:_.jsx(Ql,{present:n||s.open,children:_.jsx(uw,{asChild:!0,container:i,children:r})})})};aN.displayName=my;var ha="PopoverContent",lN=L.forwardRef((t,e)=>{const n=mX(ha,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=hs(ha,t.__scopePopover);return _.jsx(Ql,{present:r||s.open,children:s.modal?_.jsx(bX,{...i,ref:e}):_.jsx(xX,{...i,ref:e})})});lN.displayName=ha;var yX=fw("PopoverContent.RemoveScroll"),bX=L.forwardRef((t,e)=>{const n=hs(ha,t.__scopePopover),r=L.useRef(null),i=Jl(e,r),s=L.useRef(!1);return L.useEffect(()=>{const o=r.current;if(o)return dw(o)},[]),_.jsx(hw,{as:yX,allowPinchZoom:!0,children:_.jsx(cN,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qr(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:qr(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:qr(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),xX=L.forwardRef((t,e)=>{const n=hs(ha,t.__scopePopover),r=L.useRef(!1),i=L.useRef(!1);return _.jsx(cN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),cN=L.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,h=hs(ha,n),f=gc(n);return pw(),_.jsx(gw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:_.jsx(mw,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:_.jsx(xO,{"data-state":dN(h.open),role:"dialog",id:h.contentId,...f,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),uN="PopoverClose",vX=L.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=hs(uN,n);return _.jsx(oo.button,{type:"button",...r,ref:e,onClick:qr(t.onClick,()=>i.onOpenChange(!1))})});vX.displayName=uN;var wX="PopoverArrow",CX=L.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=gc(n);return _.jsx(vO,{...i,...r,ref:e})});CX.displayName=wX;function dN(t){return t?"open":"closed"}var kX=rN,SX=oN,_X=aN,EX=lN;function TX({...t}){return _.jsx(kX,{"data-slot":"popover",...t})}function MX({...t}){return _.jsx(SX,{"data-slot":"popover-trigger",...t})}function AX({className:t,align:e="center",sideOffset:n=4,...r}){return _.jsx(_X,{children:_.jsx(EX,{"data-slot":"popover-content",align:e,sideOffset:n,className:Ot("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...r})})}var Sv=1,NX=.9,OX=.8,LX=.17,yp=.1,bp=.999,RX=.9999,IX=.99,DX=/[\\\/_+.#"@\[\(\{&]/,BX=/[\\\/_+.#"@\[\(\{&]/g,PX=/[\s-]/,hN=/[\s-]/g;function lm(t,e,n,r,i,s,o){if(s===e.length)return i===t.length?Sv:IX;var a=`${i},${s}`;if(o[a]!==void 0)return o[a];for(var l=r.charAt(s),c=n.indexOf(l,i),u=0,d,h,f,p;c>=0;)d=lm(t,e,n,r,c+1,s+1,o),d>u&&(c===i?d*=Sv:DX.test(t.charAt(c-1))?(d*=OX,f=t.slice(i,c-1).match(BX),f&&i>0&&(d*=Math.pow(bp,f.length))):PX.test(t.charAt(c-1))?(d*=NX,p=t.slice(i,c-1).match(hN),p&&i>0&&(d*=Math.pow(bp,p.length))):(d*=LX,i>0&&(d*=Math.pow(bp,c-i))),t.charAt(c)!==e.charAt(s)&&(d*=RX)),(d<yp&&n.charAt(c-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(c-1)!==r.charAt(s))&&(h=lm(t,e,n,r,c+1,s+2,o),h*yp>d&&(d=h*yp)),d>u&&(u=d),c=n.indexOf(l,c+1);return o[a]=u,u}function _v(t){return t.toLowerCase().replace(hN," ")}function $X(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,lm(t,e,_v(t),_v(e),0,0,{})}var nf="Dialog",[fN]=lw(nf),[FX,Nr]=fN(nf),pN=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=L.useRef(null),l=L.useRef(null),[c,u]=aw({prop:r,defaultProp:i??!1,onChange:s,caller:nf});return _.jsx(FX,{scope:e,triggerRef:a,contentRef:l,contentId:jr(),titleId:jr(),descriptionId:jr(),open:c,onOpenChange:u,onOpenToggle:L.useCallback(()=>u(d=>!d),[u]),modal:o,children:n})};pN.displayName=nf;var gN="DialogTrigger",zX=L.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Nr(gN,n),s=Jl(e,i.triggerRef);return _.jsx(oo.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":xy(i.open),...r,ref:s,onClick:qr(t.onClick,i.onOpenToggle)})});zX.displayName=gN;var yy="DialogPortal",[HX,mN]=fN(yy,{forceMount:void 0}),yN=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Nr(yy,e);return _.jsx(HX,{scope:e,forceMount:n,children:L.Children.map(r,o=>_.jsx(Ql,{present:n||s.open,children:_.jsx(uw,{asChild:!0,container:i,children:o})}))})};yN.displayName=yy;var oh="DialogOverlay",bN=L.forwardRef((t,e)=>{const n=mN(oh,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Nr(oh,t.__scopeDialog);return s.modal?_.jsx(Ql,{present:r||s.open,children:_.jsx(UX,{...i,ref:e})}):null});bN.displayName=oh;var WX=fw("DialogOverlay.RemoveScroll"),UX=L.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Nr(oh,n);return _.jsx(hw,{as:WX,allowPinchZoom:!0,shards:[i.contentRef],children:_.jsx(oo.div,{"data-state":xy(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ro="DialogContent",xN=L.forwardRef((t,e)=>{const n=mN(ro,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Nr(ro,t.__scopeDialog);return _.jsx(Ql,{present:r||s.open,children:s.modal?_.jsx(jX,{...i,ref:e}):_.jsx(qX,{...i,ref:e})})});xN.displayName=ro;var jX=L.forwardRef((t,e)=>{const n=Nr(ro,t.__scopeDialog),r=L.useRef(null),i=Jl(e,n.contentRef,r);return L.useEffect(()=>{const s=r.current;if(s)return dw(s)},[]),_.jsx(vN,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qr(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:qr(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:qr(t.onFocusOutside,s=>s.preventDefault())})}),qX=L.forwardRef((t,e)=>{const n=Nr(ro,t.__scopeDialog),r=L.useRef(!1),i=L.useRef(!1);return _.jsx(vN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),vN=L.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Nr(ro,n),l=L.useRef(null),c=Jl(e,l);return pw(),_.jsxs(_.Fragment,{children:[_.jsx(gw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:_.jsx(mw,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":xy(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),_.jsxs(_.Fragment,{children:[_.jsx(VX,{titleId:a.titleId}),_.jsx(KX,{contentRef:l,descriptionId:a.descriptionId})]})]})}),by="DialogTitle",wN=L.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Nr(by,n);return _.jsx(oo.h2,{id:i.titleId,...r,ref:e})});wN.displayName=by;var CN="DialogDescription",kN=L.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Nr(CN,n);return _.jsx(oo.p,{id:i.descriptionId,...r,ref:e})});kN.displayName=CN;var SN="DialogClose",_N=L.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Nr(SN,n);return _.jsx(oo.button,{type:"button",...r,ref:e,onClick:qr(t.onClick,()=>i.onOpenChange(!1))})});_N.displayName=SN;function xy(t){return t?"open":"closed"}var EN="DialogTitleWarning",[fte,TN]=wO(EN,{contentName:ro,titleName:by,docsSlug:"dialog"}),VX=({titleId:t})=>{const e=TN(EN),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return L.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},GX="DialogDescriptionWarning",KX=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${TN(GX).contentName}}.`;return L.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},YX=pN,MN=yN,vy=bN,wy=xN,AN=wN,NN=kN,XX=_N,ZX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],fs=ZX.reduce((t,e)=>{const n=CO(`Primitive.${e}`),r=L.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),Wa='[cmdk-group=""]',xp='[cmdk-group-items=""]',JX='[cmdk-group-heading=""]',ON='[cmdk-item=""]',Ev=`${ON}:not([aria-disabled="true"])`,cm="cmdk-item-select",Ro="data-value",QX=(t,e,n)=>$X(t,e,n),LN=L.createContext(void 0),mc=()=>L.useContext(LN),RN=L.createContext(void 0),Cy=()=>L.useContext(RN),IN=L.createContext(void 0),DN=L.forwardRef((t,e)=>{let n=Io(()=>{var H,Y;return{search:"",value:(Y=(H=t.value)!=null?H:t.defaultValue)!=null?Y:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Io(()=>new Set),i=Io(()=>new Map),s=Io(()=>new Map),o=Io(()=>new Set),a=BN(t),{label:l,children:c,value:u,onValueChange:d,filter:h,shouldFilter:f,loop:p,disablePointerSelection:g=!1,vimBindings:m=!0,...y}=t,b=jr(),C=jr(),v=jr(),k=L.useRef(null),w=uZ();io(()=>{if(u!==void 0){let H=u.trim();n.current.value=H,S.emit()}},[u]),io(()=>{w(6,B)},[]);let S=L.useMemo(()=>({subscribe:H=>(o.current.add(H),()=>o.current.delete(H)),snapshot:()=>n.current,setState:(H,Y,se)=>{var K,ne,ue,ke;if(!Object.is(n.current[H],Y)){if(n.current[H]=Y,H==="search")P(),$(),w(1,T);else if(H==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Oe=document.getElementById(v);Oe?Oe.focus():(K=document.getElementById(b))==null||K.focus()}if(w(7,()=>{var Oe;n.current.selectedItemId=(Oe=A())==null?void 0:Oe.id,S.emit()}),se||w(5,B),((ne=a.current)==null?void 0:ne.value)!==void 0){let Oe=Y??"";(ke=(ue=a.current).onValueChange)==null||ke.call(ue,Oe);return}}S.emit()}},emit:()=>{o.current.forEach(H=>H())}}),[]),E=L.useMemo(()=>({value:(H,Y,se)=>{var K;Y!==((K=s.current.get(H))==null?void 0:K.value)&&(s.current.set(H,{value:Y,keywords:se}),n.current.filtered.items.set(H,I(Y,se)),w(2,()=>{$(),S.emit()}))},item:(H,Y)=>(r.current.add(H),Y&&(i.current.has(Y)?i.current.get(Y).add(H):i.current.set(Y,new Set([H]))),w(3,()=>{P(),$(),n.current.value||T(),S.emit()}),()=>{s.current.delete(H),r.current.delete(H),n.current.filtered.items.delete(H);let se=A();w(4,()=>{P(),(se==null?void 0:se.getAttribute("id"))===H&&T(),S.emit()})}),group:H=>(i.current.has(H)||i.current.set(H,new Set),()=>{s.current.delete(H),i.current.delete(H)}),filter:()=>a.current.shouldFilter,label:l||t["aria-label"],getDisablePointerSelection:()=>a.current.disablePointerSelection,listId:b,inputId:v,labelId:C,listInnerRef:k}),[]);function I(H,Y){var se,K;let ne=(K=(se=a.current)==null?void 0:se.filter)!=null?K:QX;return H?ne(H,n.current.search,Y):0}function $(){if(!n.current.search||a.current.shouldFilter===!1)return;let H=n.current.filtered.items,Y=[];n.current.filtered.groups.forEach(K=>{let ne=i.current.get(K),ue=0;ne.forEach(ke=>{let Oe=H.get(ke);ue=Math.max(Oe,ue)}),Y.push([K,ue])});let se=k.current;M().sort((K,ne)=>{var ue,ke;let Oe=K.getAttribute("id"),De=ne.getAttribute("id");return((ue=H.get(De))!=null?ue:0)-((ke=H.get(Oe))!=null?ke:0)}).forEach(K=>{let ne=K.closest(xp);ne?ne.appendChild(K.parentElement===ne?K:K.closest(`${xp} > *`)):se.appendChild(K.parentElement===se?K:K.closest(`${xp} > *`))}),Y.sort((K,ne)=>ne[1]-K[1]).forEach(K=>{var ne;let ue=(ne=k.current)==null?void 0:ne.querySelector(`${Wa}[${Ro}="${encodeURIComponent(K[0])}"]`);ue==null||ue.parentElement.appendChild(ue)})}function T(){let H=M().find(se=>se.getAttribute("aria-disabled")!=="true"),Y=H==null?void 0:H.getAttribute(Ro);S.setState("value",Y||void 0)}function P(){var H,Y,se,K;if(!n.current.search||a.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let ne=0;for(let ue of r.current){let ke=(Y=(H=s.current.get(ue))==null?void 0:H.value)!=null?Y:"",Oe=(K=(se=s.current.get(ue))==null?void 0:se.keywords)!=null?K:[],De=I(ke,Oe);n.current.filtered.items.set(ue,De),De>0&&ne++}for(let[ue,ke]of i.current)for(let Oe of ke)if(n.current.filtered.items.get(Oe)>0){n.current.filtered.groups.add(ue);break}n.current.filtered.count=ne}function B(){var H,Y,se;let K=A();K&&(((H=K.parentElement)==null?void 0:H.firstChild)===K&&((se=(Y=K.closest(Wa))==null?void 0:Y.querySelector(JX))==null||se.scrollIntoView({block:"nearest"})),K.scrollIntoView({block:"nearest"}))}function A(){var H;return(H=k.current)==null?void 0:H.querySelector(`${ON}[aria-selected="true"]`)}function M(){var H;return Array.from(((H=k.current)==null?void 0:H.querySelectorAll(Ev))||[])}function O(H){let Y=M()[H];Y&&S.setState("value",Y.getAttribute(Ro))}function F(H){var Y;let se=A(),K=M(),ne=K.findIndex(ke=>ke===se),ue=K[ne+H];(Y=a.current)!=null&&Y.loop&&(ue=ne+H<0?K[K.length-1]:ne+H===K.length?K[0]:K[ne+H]),ue&&S.setState("value",ue.getAttribute(Ro))}function R(H){let Y=A(),se=Y==null?void 0:Y.closest(Wa),K;for(;se&&!K;)se=H>0?lZ(se,Wa):cZ(se,Wa),K=se==null?void 0:se.querySelector(Ev);K?S.setState("value",K.getAttribute(Ro)):F(H)}let q=()=>O(M().length-1),Z=H=>{H.preventDefault(),H.metaKey?q():H.altKey?R(1):F(1)},Q=H=>{H.preventDefault(),H.metaKey?O(0):H.altKey?R(-1):F(-1)};return L.createElement(fs.div,{ref:e,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:H=>{var Y;(Y=y.onKeyDown)==null||Y.call(y,H);let se=H.nativeEvent.isComposing||H.keyCode===229;if(!(H.defaultPrevented||se))switch(H.key){case"n":case"j":{m&&H.ctrlKey&&Z(H);break}case"ArrowDown":{Z(H);break}case"p":case"k":{m&&H.ctrlKey&&Q(H);break}case"ArrowUp":{Q(H);break}case"Home":{H.preventDefault(),O(0);break}case"End":{H.preventDefault(),q();break}case"Enter":{H.preventDefault();let K=A();if(K){let ne=new Event(cm);K.dispatchEvent(ne)}}}}},L.createElement("label",{"cmdk-label":"",htmlFor:E.inputId,id:E.labelId,style:hZ},l),rf(t,H=>L.createElement(RN.Provider,{value:S},L.createElement(LN.Provider,{value:E},H))))}),eZ=L.forwardRef((t,e)=>{var n,r;let i=jr(),s=L.useRef(null),o=L.useContext(IN),a=mc(),l=BN(t),c=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;io(()=>{if(!c)return a.item(i,o==null?void 0:o.id)},[c]);let u=PN(i,s,[t.value,t.children,s],t.keywords),d=Cy(),h=is(w=>w.value&&w.value===u.current),f=is(w=>c||a.filter()===!1?!0:w.search?w.filtered.items.get(i)>0:!0);L.useEffect(()=>{let w=s.current;if(!(!w||t.disabled))return w.addEventListener(cm,p),()=>w.removeEventListener(cm,p)},[f,t.onSelect,t.disabled]);function p(){var w,S;g(),(S=(w=l.current).onSelect)==null||S.call(w,u.current)}function g(){d.setState("value",u.current,!0)}if(!f)return null;let{disabled:m,value:y,onSelect:b,forceMount:C,keywords:v,...k}=t;return L.createElement(fs.div,{ref:Cl(s,e),...k,id:i,"cmdk-item":"",role:"option","aria-disabled":!!m,"aria-selected":!!h,"data-disabled":!!m,"data-selected":!!h,onPointerMove:m||a.getDisablePointerSelection()?void 0:g,onClick:m?void 0:p},t.children)}),tZ=L.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:i,...s}=t,o=jr(),a=L.useRef(null),l=L.useRef(null),c=jr(),u=mc(),d=is(f=>i||u.filter()===!1?!0:f.search?f.filtered.groups.has(o):!0);io(()=>u.group(o),[]),PN(o,a,[t.value,t.heading,l]);let h=L.useMemo(()=>({id:o,forceMount:i}),[i]);return L.createElement(fs.div,{ref:Cl(a,e),...s,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&L.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),rf(t,f=>L.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},L.createElement(IN.Provider,{value:h},f))))}),nZ=L.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,i=L.useRef(null),s=is(o=>!o.search);return!n&&!s?null:L.createElement(fs.div,{ref:Cl(i,e),...r,"cmdk-separator":"",role:"separator"})}),rZ=L.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,i=t.value!=null,s=Cy(),o=is(c=>c.search),a=is(c=>c.selectedItemId),l=mc();return L.useEffect(()=>{t.value!=null&&s.setState("search",t.value)},[t.value]),L.createElement(fs.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":a,id:l.inputId,type:"text",value:i?t.value:o,onChange:c=>{i||s.setState("search",c.target.value),n==null||n(c.target.value)}})}),iZ=L.forwardRef((t,e)=>{let{children:n,label:r="Suggestions",...i}=t,s=L.useRef(null),o=L.useRef(null),a=is(c=>c.selectedItemId),l=mc();return L.useEffect(()=>{if(o.current&&s.current){let c=o.current,u=s.current,d,h=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let f=c.offsetHeight;u.style.setProperty("--cmdk-list-height",f.toFixed(1)+"px")})});return h.observe(c),()=>{cancelAnimationFrame(d),h.unobserve(c)}}},[]),L.createElement(fs.div,{ref:Cl(s,e),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":a,"aria-label":r,id:l.listId},rf(t,c=>L.createElement("div",{ref:Cl(o,l.listInnerRef),"cmdk-list-sizer":""},c)))}),sZ=L.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:s,container:o,...a}=t;return L.createElement(YX,{open:n,onOpenChange:r},L.createElement(MN,{container:o},L.createElement(vy,{"cmdk-overlay":"",className:i}),L.createElement(wy,{"aria-label":t.label,"cmdk-dialog":"",className:s},L.createElement(DN,{ref:e,...a}))))}),oZ=L.forwardRef((t,e)=>is(n=>n.filtered.count===0)?L.createElement(fs.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),aZ=L.forwardRef((t,e)=>{let{progress:n,children:r,label:i="Loading...",...s}=t;return L.createElement(fs.div,{ref:e,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},rf(t,o=>L.createElement("div",{"aria-hidden":!0},o)))}),yc=Object.assign(DN,{List:iZ,Item:eZ,Input:rZ,Group:tZ,Separator:nZ,Dialog:sZ,Empty:oZ,Loading:aZ});function lZ(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function cZ(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function BN(t){let e=L.useRef(t);return io(()=>{e.current=t}),e}var io=typeof window>"u"?L.useEffect:L.useLayoutEffect;function Io(t){let e=L.useRef();return e.current===void 0&&(e.current=t()),e}function is(t){let e=Cy(),n=()=>t(e.snapshot());return L.useSyncExternalStore(e.subscribe,n,n)}function PN(t,e,n,r=[]){let i=L.useRef(),s=mc();return io(()=>{var o;let a=(()=>{var c;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(c=u.current.textContent)==null?void 0:c.trim():i.current}})(),l=r.map(c=>c.trim());s.value(t,a,l),(o=e.current)==null||o.setAttribute(Ro,a),i.current=a}),i}var uZ=()=>{let[t,e]=L.useState(),n=Io(()=>new Map);return io(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,i)=>{n.current.set(r,i),e({})}};function dZ(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function rf({asChild:t,children:e},n){return t&&L.isValidElement(e)?L.cloneElement(dZ(e),{ref:e.ref},n(e.props.children)):n(e)}var hZ={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const fZ=MN,$N=L.forwardRef(({className:t,...e},n)=>_.jsx(vy,{ref:n,"data-slot":"dialog-overlay",className:Ot("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e}));$N.displayName=vy.displayName;const pZ=L.forwardRef(({className:t,children:e,showCloseButton:n=!0,...r},i)=>_.jsxs(fZ,{"data-slot":"dialog-portal",children:[_.jsx($N,{}),_.jsxs(wy,{ref:i,"data-slot":"dialog-content",className:Ot("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r,children:[e,n&&_.jsxs(XX,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[_.jsx(TO,{}),_.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));pZ.displayName=wy.displayName;const gZ=L.forwardRef(({className:t,...e},n)=>_.jsx("div",{ref:n,"data-slot":"dialog-header",className:Ot("flex flex-col gap-2 text-center sm:text-left",t),...e}));gZ.displayName="DialogHeader";const mZ=L.forwardRef(({className:t,...e},n)=>_.jsx("div",{ref:n,"data-slot":"dialog-footer",className:Ot("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e}));mZ.displayName="DialogFooter";const yZ=L.forwardRef(({className:t,...e},n)=>_.jsx(AN,{ref:n,"data-slot":"dialog-title",className:Ot("text-lg leading-none font-semibold",t),...e}));yZ.displayName=AN.displayName;const bZ=L.forwardRef(({className:t,...e},n)=>_.jsx(NN,{ref:n,"data-slot":"dialog-description",className:Ot("text-muted-foreground text-sm",t),...e}));bZ.displayName=NN.displayName;function xZ({className:t,...e}){return _.jsx(yc,{"data-slot":"command",className:Ot("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...e})}function vZ({className:t,...e}){return _.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[_.jsx(_O,{className:"size-4 shrink-0 opacity-50"}),_.jsx(yc.Input,{"data-slot":"command-input",className:Ot("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...e})]})}function wZ({...t}){return _.jsx(yc.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function CZ({className:t,...e}){return _.jsx(yc.Group,{"data-slot":"command-group",className:Ot("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...e})}function kZ({className:t,...e}){return _.jsx(yc.Item,{"data-slot":"command-item",className:Ot("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}kS(CS);const Tv=[{value:"javascript",label:"JavaScript"},{value:"typescript",label:"TypeScript"},{value:"python",label:"Python"},{value:"html",label:"HTML"},{value:"css",label:"CSS"},{value:"json",label:"JSON"},{value:"bash",label:"Bash"},{value:"sql",label:"SQL"},{value:"java",label:"Java"},{value:"cpp",label:"C++"},{value:"csharp",label:"C#"},{value:"go",label:"Go"},{value:"rust",label:"Rust"},{value:"php",label:"PHP"},{value:"ruby",label:"Ruby"},{value:"swift",label:"Swift"},{value:"kotlin",label:"Kotlin"},{value:"xml",label:"XML"},{value:"yaml",label:"YAML"},{value:"markdown",label:"Markdown"},{value:"plaintext",label:"Plain Text"}],SZ=({node:t,updateAttributes:e,extension:n})=>{var d;const{t:r}=ki(),[i,s]=L.useState(!1),[o,a]=L.useState(!1),{language:l}=t.attrs,c=()=>{const h=t.textContent;navigator.clipboard.writeText(h).then(()=>{a(!0),setTimeout(()=>a(!1),2e3)})},u=((d=Tv.find(h=>h.value===l))==null?void 0:d.label)||"Plain Text";return _.jsxs(Sh,{className:"code-block-wrapper relative group rounded-lg border bg-muted/40 my-4",children:[_.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b bg-muted/20 rounded-t-lg",children:[_.jsxs(TX,{open:i,onOpenChange:s,children:[_.jsx(MX,{asChild:!0,children:_.jsxs("button",{role:"combobox","aria-expanded":i,className:"text-xs text-muted-foreground hover:text-foreground hover:bg-muted px-2 py-1 rounded transition-colors flex items-center gap-1",children:[u,_.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:Ot("opacity-50 transition-transform",i&&"rotate-180"),children:_.jsx("path",{d:"m6 9 6 6 6-6"})})]})}),_.jsx(AX,{className:"w-[200px] p-0",align:"start",children:_.jsxs(xZ,{children:[_.jsx(vZ,{placeholder:r("codeSearchLanguage")}),_.jsx(wZ,{children:r("codeNoLanguageFound")}),_.jsx(CZ,{className:"max-h-[300px] overflow-auto",children:Tv.map(h=>_.jsxs(kZ,{value:h.value,onSelect:f=>{e({language:f}),s(!1)},className:"flex items-center justify-between",children:[h.label,l===h.value&&_.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-auto opacity-100",children:_.jsx("polyline",{points:"20 6 9 17 4 12"})})]},h.value))})]})})]}),_.jsx("button",{onClick:c,className:"text-xs text-muted-foreground hover:text-foreground hover:bg-muted px-2 py-1 rounded transition-colors",title:r(o?"codeCopied":"codeCopy"),children:o?_.jsxs("span",{className:"flex items-center gap-1 text-green-500",children:[_.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:_.jsx("polyline",{points:"20 6 9 17 4 12"})}),r("codeCopied")]}):_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),_.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),r("codeCopy")]})})]}),_.jsx("pre",{className:"p-4 m-0 overflow-x-auto rounded-b-lg",children:_.jsx(Xm,{as:"code",className:`language-${l}`})})]})},_Z={"default-hidden":{initialOpacity:"0",initialPointerEvents:"auto",hiddenOpacity:"0",hiddenPointerEvents:"auto",visibleOpacity:"1",visiblePointerEvents:"auto"},"default-visible":{initialOpacity:"0.3",initialPointerEvents:"auto",hiddenOpacity:"0.3",hiddenPointerEvents:"auto",visibleOpacity:"1",visiblePointerEvents:"auto"}},FN=["paragraph","heading","callout","codeBlock","mermaid","blockquote","bulletList","orderedList","taskList","taskItem"],EZ=["doc > paragraph","doc > heading","doc > blockquote","doc > codeBlock","doc > mermaid","doc > horizontalRule","doc > image","doc > table","doc > callout","doc > bulletList","doc > orderedList","doc > callout > paragraph","doc > callout > heading","doc > callout > blockquote","doc > callout > codeBlock","doc > callout > mermaid","doc > callout > image","doc > callout > table","doc > callout > bulletList","doc > callout > orderedList","doc > callout > taskList","doc > columns > column > paragraph","doc > columns > column > heading","doc > columns > column > blockquote","doc > columns > column > codeBlock","doc > columns > column > mermaid","doc > columns > column > image","doc > columns > column > table","doc > columns > column > callout","doc > columns > column > bulletList","doc > columns > column > orderedList","doc > columns > column > callout > paragraph","doc > columns > column > callout > heading","doc > columns > column > callout > blockquote","doc > columns > column > callout > codeBlock","doc > columns > column > callout > mermaid","doc > columns > column > callout > image","doc > columns > column > callout > table","doc > columns > column > callout > bulletList","doc > columns > column > callout > orderedList","doc > columnsFlex > column > paragraph","doc > columnsFlex > column > heading","doc > columnsFlex > column > blockquote","doc > columnsFlex > column > codeBlock","doc > columnsFlex > column > mermaid","doc > columnsFlex > column > image","doc > columnsFlex > column > table","doc > columnsFlex > column > callout","doc > columnsFlex > column > bulletList","doc > columnsFlex > column > orderedList","doc > columnsFlex > column > callout > paragraph","doc > columnsFlex > column > callout > heading","doc > columnsFlex > column > callout > blockquote","doc > columnsFlex > column > callout > codeBlock","doc > columnsFlex > column > callout > mermaid","doc > columnsFlex > column > callout > image","doc > columnsFlex > column > callout > table","doc > columnsFlex > column > callout > bulletList","doc > columnsFlex > column > callout > orderedList","doc > section","doc > section > paragraph","doc > section > heading","doc > section > blockquote","doc > section > codeBlock","doc > section > mermaid","doc > section > image","doc > section > table","doc > section > callout","doc > section > bulletList","doc > section > orderedList","doc > section > callout > paragraph","doc > section > callout > heading","doc > section > callout > blockquote","doc > section > callout > codeBlock","doc > section > callout > mermaid","doc > section > callout > image","doc > section > callout > table","doc > section > callout > bulletList","doc > section > callout > orderedList","doc > section > columns > column > paragraph","doc > section > columns > column > heading","doc > section > columns > column > blockquote","doc > section > columns > column > codeBlock","doc > section > columns > column > mermaid","doc > section > columns > column > image","doc > section > columns > column > table","doc > section > columns > column > callout","doc > section > columns > column > bulletList","doc > section > columns > column > orderedList","doc > section > columns > column > callout > paragraph","doc > section > columns > column > callout > heading","doc > section > columns > column > callout > blockquote","doc > section > columns > column > callout > codeBlock","doc > section > columns > column > callout > mermaid","doc > section > columns > column > callout > image","doc > section > columns > column > callout > table","doc > section > columns > column > callout > bulletList","doc > section > columns > column > callout > orderedList","doc > section > columnsFlex > column > paragraph","doc > section > columnsFlex > column > heading","doc > section > columnsFlex > column > blockquote","doc > section > columnsFlex > column > codeBlock","doc > section > columnsFlex > column > mermaid","doc > section > columnsFlex > column > image","doc > section > columnsFlex > column > table","doc > section > columnsFlex > column > callout","doc > section > columnsFlex > column > bulletList","doc > section > columnsFlex > column > orderedList","doc > section > columnsFlex > column > callout > paragraph","doc > section > columnsFlex > column > callout > heading","doc > section > columnsFlex > column > callout > blockquote","doc > section > columnsFlex > column > callout > codeBlock","doc > section > columnsFlex > column > callout > mermaid","doc > section > columnsFlex > column > callout > image","doc > section > columnsFlex > column > callout > table","doc > section > columnsFlex > column > callout > bulletList","doc > section > columnsFlex > column > callout > orderedList","doc > columns > column > blockquote","doc > section > columns > column > blockquote","doc > section > section","doc > section > section > paragraph","doc > table","doc > section > table","doc > columns > column > table","doc > taskList","doc > section > taskList","doc > columns > column > taskList","doc > columnsFlex > column > taskList","doc > section > columns > column > taskList","doc > section > columnsFlex > column > taskList","doc > callout > taskList","doc > columns > column > callout > taskList","doc > columnsFlex > column > callout > taskList","doc > section > columns > column > callout > taskList","doc > section > columnsFlex > column > callout > taskList"],TZ=50,MZ=16;class ky{constructor(e,n){this.draggableTypes=new Set(e||FN),typeof n<"u"?this.pathWhitelist=new Set(n):e?this.pathWhitelist=new Set:this.pathWhitelist=new Set(EZ)}isDraggable(e,n,r){return this.pathWhitelist.size>0?r?this.pathWhitelist.has(r):!1:this.draggableTypes.has(e.type.name)}getNodeId(e,n){return e.attrs.id||`node-${n}`}getBoundarySelector(e){return AZ[e]||null}}const AZ={paragraph:{primary:"p"},heading:{primary:"h1, h2, h3, h4, h5, h6"},blockquote:{primary:"blockquote"},codeBlock:{primary:"pre",fallback:"code"},bulletList:{primary:"ul"},orderedList:{primary:"ol"},listItem:{primary:"li"},callout:{primary:'[data-type="callout"]',fallback:".callout-wrapper"},taskList:{primary:'ul[data-type="taskList"]',fallback:"ul"},taskItem:{primary:'li[data-type="taskItem"]',fallback:"li"},columns:{primary:".columns-container-grid",fallback:".columns-view-grid"},columnsFlex:{primary:".columns-container-grid",fallback:'[data-type="columnsFlex"]'},column:{primary:'[data-type="column"]'},mermaid:{primary:'[data-type="mermaid"]',fallback:".mermaid-container"},table:{primary:".tableWrapper",fallback:"table"}};class NZ{constructor(e=50,n,r){this.lastCallTime=0,this.columnCache=null,this.COLUMN_CACHE_TTL=50,this.throttleMs=e,this.nodeMatcher=new ky(n,r)}handleMouseMove(e,n){var l,c;const r=performance.now();if(r-this.lastCallTime<this.throttleMs)return null;this.lastCallTime=r;const i=n.target,s=this.detectFromDOM(e,i);if(s)return console.log("[HoverDetector] Phase1 DOM First :",{nodeType:(l=s.node)==null?void 0:l.type.name,pos:s.pos,nodeId:s.nodeId}),s;const o=this.getColumnContext(i,r);console.log("[HoverDetector] Phase2 Raycast :",{inColumn:!!o,targetTag:i.tagName,targetClass:i.className});const a=this.detectFromRaycast(e,n,o);return a?(console.log("[HoverDetector] Phase2 Raycast :",{nodeType:(c=a.node)==null?void 0:c.type.name,pos:a.pos,nodeId:a.nodeId}),a):(console.log("[HoverDetector] "),null)}getColumnContext(e,n){if(this.columnCache&&this.columnCache.target===e&&n-this.columnCache.timestamp<this.COLUMN_CACHE_TTL)return this.columnCache.element;const r=e.closest('[data-type="column"]');return this.columnCache={element:r,target:e,timestamp:n},r}detectFromDOM(e,n){try{const i=n.closest("[data-node-view-wrapper]")||n,s=e.posAtDOM(i,0);return s===null||s<0?null:this.resolveNodeAtPos(e,s)}catch{const i=n.closest("[data-type]");if(i)try{const s=e.posAtDOM(i,0);if(s!==null&&s>=0)return this.resolveNodeAtPos(e,s)}catch{}return null}}detectFromRaycast(e,n,r){let i;if(r){const a=r.getBoundingClientRect(),l=window.getComputedStyle(r),c=parseInt(l.paddingLeft)||0;i=a.left+c+10}else{const a=e.dom.getBoundingClientRect(),l=window.getComputedStyle(e.dom),c=parseInt(l.paddingLeft)||0;i=a.left+c+10}const s=e.posAtCoords({left:i,top:n.clientY});if(!s)return null;const o=e.nodeDOM(s.pos);if(o&&o.nodeType===1){const a=o.getBoundingClientRect();if(n.clientY<a.top-5||n.clientY>a.bottom+5)return null}return this.resolveNodeAtPos(e,s.pos)}resolveNodeAtPos(e,n){const r=e.state.doc.resolve(n);console.log("[HoverDetector] resolveNodeAtPos :",{pos:n,depth:r.depth});for(let i=r.depth;i>=0;i--){const s=r.node(i);if(!s||s.type.name==="text"||s.type.name==="doc")continue;const o=i>0?r.before(i):0,a=this.buildNodePath(e,o,s);if(console.log("[HoverDetector] :",{depth:i,nodeType:s.type.name,path:a,nodePos:o}),this.nodeMatcher.isDraggable(s,o,a)){const l=this.nodeMatcher.getNodeId(s,o);return console.log("[HoverDetector]  :",{path:a,nodeType:s.type.name}),{nodeId:l,pos:o,isDraggable:!0,node:s}}else console.log("[HoverDetector]  :",{path:a,nodeType:s.type.name})}return null}buildNodePath(e,n,r){const i=e.state.doc.resolve(Math.max(0,n)),s=["doc"];for(let a=1;a<=i.depth;a++){const l=i.node(a);l&&s.push(l.type.name)}return s[s.length-1]!==r.type.name&&s.push(r.type.name),s.join(" > ")}}const vp=42,Mv=26;class OZ{constructor(e=50){this.offset=e}calculateHandlePosition(e,n,r,i){const s=this.getRelativeRect(e,n,r);if(!s)return null;const o=this.getHandleRect(i),a=this.offset-vp;return{left:s.left-(o.width+a),top:s.top,width:o.width,height:o.height}}calculateHighlightPosition(e,n,r){const i=this.getRelativeRect(e,n,r);return i?{left:i.left,top:i.top,width:i.width,height:i.height}:null}getRelativeRect(e,n,r){const i=r||e.nodeDOM(n);if(!i)return null;const s=i.getBoundingClientRect(),o=e.dom.parentElement;if(!o)return null;const a=o.getBoundingClientRect();let l=0,c=0,u=i,d=0;for(;u&&u!==o&&d<10;)l+=u.scrollLeft||0,c+=u.scrollTop||0,u=u.parentElement,d++;l+=o.scrollLeft||0,c+=o.scrollTop||0;const h=i.closest('[data-type="column"]'),f=h?h.getBoundingClientRect():null,p=["UL","OL","BLOCKQUOTE"].includes(i.tagName);let g=0;if(f&&h){const b=window.getComputedStyle(h);g=parseFloat(b.paddingLeft)||0}else if(!p){const b=window.getComputedStyle(i);g=parseFloat(b.paddingLeft)||0}const m=f?f.left+g-a.left+l:s.left+g-a.left+l,y=f?f.width-g*2:s.width-g;return{left:m,top:s.top-a.top+c,width:y,height:s.height}}getHandleRect(e){if(!e)return{width:vp,height:Mv};const n=e.getBoundingClientRect();return{width:n.width||vp,height:n.height||Mv}}}const LZ=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path class="feishu-drag-icon" d="M8.25 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm0 7.25a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm1.75 5.5a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0ZM14.753 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5ZM16.5 12a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0Zm-1.747 9a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Z" fill="currentColor"></path>
  </svg>
`,zN=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M2 3a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V4h-7v16h3a1 1 0 1 1 0 2H8a1 1 0 1 1 0-2h3V4H4v3a1 1 0 1 1-2 0V3Z" fill="currentColor"></path>
  </svg>
`,Av={h1:`
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2 3a1 1 0 0 0-1 1v16a1 1 0 1 0 2 0v-7h9v7a1 1 0 1 0 2 0V4a1 1 0 1 0-2 0v7H3V4a1 1 0 0 0-1-1Zm15.604 9.91a.4.4 0 0 1-.585-.355c0-.533 0-.774.004-1.582a.4.4 0 0 1 .203-.347l2.769-1.568A.39.39 0 0 1 20.197 9h1.404c.234 0 .423.21.423.468V19.95c0 .593-.483 1.073-1.075 1.073a1.07 1.07 0 0 1-1.07-1.073v-8.228l-2.275 1.19Z" fill="currentColor"></path>
    </svg>
  `,h2:`
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2 3a1 1 0 0 0-1 1v16a1 1 0 1 0 2 0v-7h9v7a1 1 0 1 0 2 0V4a1 1 0 1 0-2 0v7H3V4a1 1 0 0 0-1-1Zm20.993 16.872c0-.561-.455-1.015-1.017-1.015h-3.121l3.407-4.272a3.35 3.35 0 0 0 .731-2.126c-.01-.992-.347-1.816-1.005-2.464-.647-.651-1.492-.984-2.523-.995-.931.011-1.72.34-2.356.982-.37.386-.941 1.044-.941 1.602 0 .591.48 1.07 1.07 1.07.563 0 .769-.347.993-.726.06-.101.12-.204.19-.304a1.36 1.36 0 0 1 .186-.214c.262-.252.584-.376.982-.376.447.01.784.15 1.02.423.234.28.35.606.35.987 0 .146-.019.303-.057.471-.05.152-.156.341-.315.548l-4.402 5.506a.4.4 0 0 0-.087.25v1.022c0 .221.267.65.606.65h5.272c.562 0 1.017-.457 1.017-1.019Z" fill="currentColor"></path>
    </svg>
  `,h3:`
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2 3a1 1 0 0 0-1 1v16a1 1 0 1 0 2 0v-7h9v7a1 1 0 1 0 2 0V4a1 1 0 1 0-2 0v7H3V4a1 1 0 0 0-1-1Zm21 14.296c0-.51-.108-.998-.324-1.461a2.923 2.923 0 0 0-.877-1.044c.377-.297.65-.63.816-1.001.17-.44.252-.886.252-1.348a3.48 3.48 0 0 0-.943-2.385C21.274 9.363 20.398 9.01 19.31 9a3.179 3.179 0 0 0-2.251.932c-.349.336-.848.879-.848 1.384a1 1 0 0 0 1 1c.482 0 .767-.352 1.043-.692l.09-.11c.057-.07.121-.132.192-.185.256-.2.53-.296.834-.296.431.01.779.144 1.049.405.267.267.406.61.415 1.04 0 .417-.133.75-.4 1.008-.335.335-.766.387-1.212.387a.958.958 0 1 0 0 1.917h.088c.452-.002.824-.003 1.205.353.29.277.442.674.452 1.201-.01.51-.16.894-.451 1.162-.296.296-.65.44-1.076.44-.4 0-.712-.107-.944-.316l-.008-.008a8.055 8.055 0 0 1-.213-.207c-.1-.099-.178-.207-.254-.31-.193-.264-.366-.5-.81-.5a1 1 0 0 0-1 1c0 .574.543 1.19.954 1.533.635.53 1.35.84 2.174.84 1.057-.01 1.93-.35 2.609-1.018.69-.651 1.04-1.545 1.052-2.664Z" fill="currentColor"></path>
    </svg>
  `,h4:`
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2 3a1 1 0 0 0-1 1v16a1 1 0 1 0 2 0v-7h9v7a1 1 0 1 0 2 0V4a1 1 0 1 0-2 0v7H3V4a1 1 0 0 0-1-1Zm19.681 7.19c0-.658-.486-1.19-1.143-1.19-.402 0-.824.204-1.043.542l-4.428 6.821a.266.266 0 0 0-.043.145v1.62c0 .22.18.4.4.4h4.404v1.363c0 .512.43.927.941.927a.914.914 0 0 0 .912-.927v-1.363h.4a.954.954 0 0 0 .943-.956.934.934 0 0 0-.944-.932h-.399v-6.45Zm-4.53 6.45 2.677-4.177v4.177H17.15Z" fill="currentColor"></path>
    </svg>
  `,h5:`
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2 3a1 1 0 0 0-1 1v16a1 1 0 1 0 2 0v-7h9v7a1 1 0 1 0 2 0V4a1 1 0 1 0-2 0v7H3V4a1 1 0 0 0-1-1Zm17.758 9.728a2.98 2.98 0 0 0-1.252.258c-.264.108-.509.26-.735.457l.21-2.395h3.422c.566 0 1.024-.475 1.024-1.04A1.01 1.01 0 0 0 21.403 9h-4.666a.4.4 0 0 0-.398.366l-.5 5.867a.4.4 0 0 0 .398.434l1.228.002c.116 0 .22-.069.278-.17.16-.275.36-.479.61-.622.258-.154.582-.23.975-.23.57 0 .986.19 1.262.574.301.403.46.973.46 1.69 0 .648-.18 1.163-.526 1.547a1.698 1.698 0 0 1-1.29.558c-.468 0-.841-.123-1.105-.351-.176-.154-.34-.508-.444-.858l-.004.001a.973.973 0 1 0-1.829.653c.218.65.557 1.251.992 1.64.657.595 1.458.899 2.377.899 1.004 0 1.874-.355 2.61-1.064.796-.795 1.19-1.807 1.19-3.04 0-1.266-.303-2.29-.903-3.037-.601-.75-1.397-1.131-2.36-1.131Z" fill="currentColor"></path>
    </svg>
  `,h6:`
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2 3a1 1 0 0 0-1 1v16a1 1 0 1 0 2 0v-7h9v7a1 1 0 1 0 2 0V4a1 1 0 1 0-2 0v7H3V4a1 1 0 0 0-1-1Zm17.47 6.843c1.379 0 2.463.659 2.995 1.64l.001.003c.116.214.219.404.219.638 0 .506-.41.915-.915.915-.477 0-.69-.327-.909-.662a3.585 3.585 0 0 0-.212-.304c-.262-.33-.675-.527-1.18-.527-.586 0-1.055.348-1.402.977-.312.527-.483 1.181-.518 1.975.234-.28.509-.498.825-.657.39-.21.84-.309 1.364-.309.989 0 1.784.34 2.378 1.027.594.685.887 1.568.887 2.627 0 1.081-.344 1.986-1.027 2.691a3.391 3.391 0 0 1-2.52 1.064c-1.23 0-2.183-.487-2.834-1.448-.637-.925-.946-2.187-.946-3.812 0-1.732.332-3.125 1.008-4.195.675-1.09 1.612-1.643 2.785-1.643Zm-.068 5.426c-.55 0-.958.171-1.249.523-.298.335-.45.82-.45 1.452 0 .607.16 1.081.475 1.42.318.342.719.511 1.224.511.515 0 .915-.18 1.233-.55.32-.37.48-.847.48-1.44 0-.582-.155-1.048-.45-1.393-.315-.352-.727-.523-1.263-.523Z" fill="currentColor"></path>
    </svg>
  `},RZ=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M3 3h7v7H3V3Zm11 0h7v7h-7V3ZM3 14h7v7H3v-7Zm11 0h7v7h-7v-7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M6.5 10v4M17.5 10v4M10 6.5h4M10 17.5h4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
  </svg>
`,IZ=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M8 6L3 12l5 6M16 6l5 6-5 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
`,DZ=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M10 8H6a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-1a2 2 0 0 0-2-2H6v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1h2Zm10 0h-4a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-1a2 2 0 0 0-2-2h-2v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1h2Z" fill="currentColor"/>
  </svg>
`,BZ=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="4" cy="6" r="2" fill="currentColor"/>
    <circle cx="4" cy="12" r="2" fill="currentColor"/>
    <circle cx="4" cy="18" r="2" fill="currentColor"/>
    <path d="M9 6h12M9 12h12M9 18h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
  </svg>
`,PZ=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M4 5V4h1v3H4V5ZM9 6h12M9 12h12M9 18h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    <path d="M3 10h2l-1.5 2H5v1H3v-1l1.5-2H3v-1ZM3 16h2v.5H4v.5h1v.5H3v.5h2v1H3v-3Z" fill="currentColor"/>
  </svg>
`,Nv=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="3" y="4" width="4" height="4" rx="1" stroke="currentColor" stroke-width="2"/>
    <path d="M4.5 12.5l1 1 2-2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <rect x="3" y="16" width="4" height="4" rx="1" stroke="currentColor" stroke-width="2"/>
    <path d="M10 6h11M10 12h11M10 18h11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
  </svg>
`,$Z=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M9 21h6M12 3a6 6 0 0 0-4 10.5V17h8v-3.5A6 6 0 0 0 12 3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
`,FZ=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
    <circle cx="8.5" cy="8.5" r="1.5" fill="currentColor"/>
    <path d="M21 15l-5-5L5 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
`,zZ=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
    <path d="M3 9h18M3 15h18M9 3v18M15 3v18" stroke="currentColor" stroke-width="2"/>
  </svg>
`,HZ=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M3 12h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    <circle cx="6" cy="12" r="1" fill="currentColor"/>
    <circle cx="12" cy="12" r="1" fill="currentColor"/>
    <circle cx="18" cy="12" r="1" fill="currentColor"/>
  </svg>
`,WZ=zN,UZ={paragraph:WZ,codeBlock:IZ,blockquote:DZ,bulletList:BZ,orderedList:PZ,taskList:Nv,taskItem:Nv,callout:$Z,mermaid:RZ,image:FZ,table:zZ,horizontalRule:HZ};function jZ(t,e){if((t==="heading"||t==="numberedHeading")&&(e!=null&&e.level)){const r=e.level;return Av[`h${r}`]||Av.h1}const n=UZ[t];return n||zN}const qZ=["font-family","font-size","font-weight","font-style","line-height","letter-spacing","text-align","text-decoration","text-transform","text-indent","color","background","background-color","background-image","background-size","background-position","background-repeat","border","border-width","border-style","border-color","border-radius","outline","padding","padding-top","padding-right","padding-bottom","padding-left","margin","margin-top","margin-right","margin-bottom","margin-left","width","height","min-width","min-height","max-width","max-height","display","flex-direction","flex-wrap","justify-content","align-items","gap","flex","flex-grow","flex-shrink","flex-basis","grid-template-columns","grid-template-rows","grid-gap","list-style","list-style-type","list-style-position","list-style-image","opacity","box-shadow","transform","overflow","overflow-x","overflow-y","white-space","word-break","word-wrap","position","top","right","bottom","left","z-index","vertical-align","box-sizing"];class VZ{create(e,n={}){const r=this.cloneElement(e),i=e.getBoundingClientRect(),s=Math.max(i.width,e.offsetWidth,e.scrollWidth),o=Math.max(i.height,e.offsetHeight,e.scrollHeight);r.style.width=`${s}px`,r.style.height=o>0?`${o}px`:"auto",r.style.opacity=String(n.opacity??1),r.style.pointerEvents="none",r.style.margin="0",r.style.boxSizing="border-box",r.style.overflow="visible",r.style.display=window.getComputedStyle(e).display||"block";const a=document.createElement("div");return a.dataset.dragPreview="true",a.style.position="fixed",a.style.top="-10000px",a.style.left="-10000px",a.style.width=`${s}px`,a.style.height=`${o}px`,a.style.pointerEvents="none",a.style.zIndex="2147483647",a.style.boxSizing="border-box",a.style.overflow="visible",this.copyRootStyles(a),a.appendChild(r),document.body.appendChild(a),{element:a,cleanup:()=>{a.remove()}}}copyRootStyles(e){const n=window.getComputedStyle(document.documentElement),r=window.getComputedStyle(document.body);for(let s=0;s<n.length;s++){const o=n[s];if(o.startsWith("--")){const a=n.getPropertyValue(o);a&&e.style.setProperty(o,a)}}["font-family","font-size","line-height","color"].forEach(s=>{const o=r.getPropertyValue(s);o&&e.style.setProperty(s,o)})}cloneElement(e){const n=e.cloneNode(!0);return n.querySelectorAll("input, textarea, select").forEach(s=>{var l;const o=document.createElement("div"),a=s;o.className=a.className,o.textContent=a.textContent,(l=a.parentNode)==null||l.replaceChild(o,a)}),n.querySelectorAll("button").forEach(s=>{s.disabled=!0,s.style.pointerEvents="none"}),this.copyStyles(e,n),n}copyStyles(e,n){const r=window.getComputedStyle(e);qZ.forEach(o=>{const a=r.getPropertyValue(o);a&&n.style.setProperty(o,a)});for(let o=0;o<r.length;o++){const a=r[o];if(a.startsWith("--")){const l=r.getPropertyValue(a);l&&n.style.setProperty(a,l)}}e.className&&!n.className&&(n.className=e.className),Array.from(e.attributes).forEach(o=>{o.name.startsWith("data-")&&!n.hasAttribute(o.name)&&n.setAttribute(o.name,o.value)}),e instanceof SVGElement&&n instanceof SVGElement&&this.copySVGAttributes(e,n);const i=Array.from(e.children),s=Array.from(n.children);i.forEach((o,a)=>{const l=s[a];o instanceof HTMLElement&&l instanceof HTMLElement?this.copyStyles(o,l):o instanceof SVGElement&&l instanceof SVGElement&&this.copySVGAttributes(o,l)})}copySVGAttributes(e,n){["fill","stroke","stroke-width","viewBox","width","height","xmlns"].forEach(o=>{const a=e.getAttribute(o);a&&!n.hasAttribute(o)&&n.setAttribute(o,a)});const i=window.getComputedStyle(e);["fill","stroke","stroke-width","opacity","color"].forEach(o=>{const a=i.getPropertyValue(o);a&&n.style.setProperty(o,a)})}}class GZ{constructor(e,n={}){this.currentPreview=null,this.dragState=null,this.boundHandlers=new Map,this.editorView=e,this.options=n,this.previewRenderer=new VZ,this.boundaryMatcher=new ky}setupDraggable(e,n,r){e.draggable=!0;const i=o=>{this.handleDragStart(o,n,r)},s=()=>{this.handleDragEnd()};e.addEventListener("dragstart",i),e.addEventListener("dragend",s),this.boundHandlers.set(e,{start:i,end:s})}destroy(){this.boundHandlers.forEach((e,n)=>{n.removeEventListener("dragstart",e.start),n.removeEventListener("dragend",e.end)}),this.boundHandlers.clear(),this.cleanupPreview()}isDragging(){return!!this.dragState}handleDragStart(e,n,r){var f,p,g,m,y;if(!e.dataTransfer)return;const i=this.editorView.state.doc,s=((p=(f=this.options).resolveNodePosition)==null?void 0:p.call(f,n,r))??r,o=i.nodeAt(s);if(!o){j.handleDisplay.warn("drag-behavior: node not found",{nodeId:n,fallbackPos:r});return}let a=s,l=s+o.nodeSize;if(Ks(o)&&((g=o.attrs)!=null&&g.collapsed)){const b=Cd(o.attrs),C=u0(s,b,i);C&&(a=s,l=C.to)}if(a>=l){j.handleDisplay.error("[DragBehavior] Invalid range: from >= to",{from:a,to:l,nodePos:s,nodeSize:o.nodeSize});return}j.handleDisplay.debug("[DragBehavior] Starting drag",{from:a,to:l,nodeType:o.type.name});const c=i.slice(a,l);e.dataTransfer.clearData(),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("application/json","{}");const u=this.editorView.state.tr;try{u.setSelection(Te.create(i,a,l)),j.handleDisplay.debug("[DragBehavior] TextSelection created successfully")}catch(b){j.handleDisplay.warn("[DragBehavior] TextSelection failed, using NodeSelection",{error:b});try{u.setSelection(xe.create(i,a)),j.handleDisplay.debug("[DragBehavior] NodeSelection created successfully")}catch(C){j.handleDisplay.error("[DragBehavior] NodeSelection also failed",{error:C})}}this.editorView.dispatch(u),this.editorView.dragging={slice:c,move:!0,from:a,to:l},j.handleDisplay.debug("[DragBehavior] view.dragging set",{from:a,to:l});const d=this.findBoundaryElement(o,s);if(d)try{const b=d.getBoundingClientRect(),C=Math.max(0,e.clientX-b.left),v=Math.max(0,e.clientY-b.top);this.currentPreview=this.previewRenderer.create(d,{opacity:.95}),e.dataTransfer.setDragImage(this.currentPreview.element,Math.min(C,b.width),Math.min(v,b.height))}catch(b){j.handleDisplay.warn("drag-behavior: preview creation failed",b)}const h=e.target;h&&(h.style.opacity="0.5",h.style.cursor="grabbing",h.setAttribute("data-dragging","true")),this.dragState={nodeId:n,handleElement:h},(y=(m=this.options).onDragStart)==null||y.call(m)}handleDragEnd(){var e,n,r;if(j.handleDisplay.debug("[DragBehavior] Drag ended",{hadDragState:!!this.dragState,viewDragging:!!this.editorView.dragging}),(e=this.dragState)!=null&&e.handleElement){const i=this.dragState.handleElement;i.style.opacity="",i.style.cursor="grab",i.setAttribute("data-dragging","false")}this.dragState=null,this.cleanupPreview(),(r=(n=this.options).onDragEnd)==null||r.call(n)}cleanupPreview(){this.currentPreview&&(this.currentPreview.cleanup(),this.currentPreview=null)}findBoundaryElement(e,n){let r=this.editorView.nodeDOM(n);if(!r){const s=this.editorView.domAtPos(n);s.node.nodeType===Node.TEXT_NODE?r=s.node.parentElement:r=s.node}if(!r)return null;const i=this.boundaryMatcher.getBoundarySelector(e.type.name);if(i!=null&&i.primary){const s=r.closest(i.primary);if(s&&s!==this.editorView.dom)return s}if(i!=null&&i.fallback){const s=r.closest(i.fallback);if(s&&s!==this.editorView.dom)return s}return r}}class KZ{constructor(e){this.editorView=e}updateView(e){this.editorView=e}turnInto(e,n){const r=this.editorView.state;if(!r.doc.nodeAt(e))return!1;const s=r.tr,o=r.schema;switch(n){case"text":case"paragraph":s.setNodeMarkup(e,o.nodes.paragraph);break;case"heading1":s.setNodeMarkup(e,o.nodes.heading,{level:1});break;case"heading2":s.setNodeMarkup(e,o.nodes.heading,{level:2});break;case"heading3":s.setNodeMarkup(e,o.nodes.heading,{level:3});break;case"bulletList":return this.convertToList(e,"bulletList");case"numberedList":return this.convertToList(e,"orderedList");case"todoList":return this.convertToList(e,"taskList");case"code":s.setNodeMarkup(e,o.nodes.codeBlock);break;case"quote":return this.wrapInBlockquote(e);default:return!1}return this.editorView.dispatch(s),!0}handleEmptyNodeSelect(e,n){const r=this.editorView.state;if(!r.doc.nodeAt(e))return!1;const s=r.tr,o=r.schema;switch(n){case"heading1":s.setNodeMarkup(e,o.nodes.heading,{level:1});break;case"heading2":s.setNodeMarkup(e,o.nodes.heading,{level:2});break;case"heading3":s.setNodeMarkup(e,o.nodes.heading,{level:3});break;case"numberedList":return this.convertToList(e,"orderedList");case"bulletList":return this.convertToList(e,"bulletList");case"todoList":return this.convertToList(e,"taskList");case"code":s.setNodeMarkup(e,o.nodes.codeBlock);break;case"quote":return this.wrapInBlockquote(e);case"table":return this.insertTable(e);case"columns":return this.insertColumns(e);case"callout":return this.insertCallout(e);default:return!1}return this.editorView.dispatch(s),!0}convertToList(e,n){const r=this.editorView.state,i=r.doc.nodeAt(e);if(!i)return!1;const s=r.schema,o=s.nodes[n],a=n==="taskList"?s.nodes.taskItem:s.nodes.listItem;if(!o||!a)return!1;const l=a.create(n==="taskList"?{checked:!1}:null,s.nodes.paragraph.create(null,i.content)),c=o.create(null,l),u=r.tr.replaceWith(e,e+i.nodeSize,c);return this.editorView.dispatch(u),!0}wrapInBlockquote(e){const n=this.editorView.state,r=n.doc.nodeAt(e);if(!r)return!1;const s=n.schema.nodes.blockquote;if(!s)return!1;const o=s.create(null,r),a=n.tr.replaceWith(e,e+r.nodeSize,o);return this.editorView.dispatch(a),!0}insertTable(e){const n=this.editorView.state,r=n.schema;if(!r.nodes.table)return j.handleDisplay.warn("Table node type not found in schema"),!1;const i=r.nodes.paragraph.create(),s=Array(3).fill(null).map(()=>r.nodes.tableCell.create(null,i)),o=Array(3).fill(null).map(()=>r.nodes.tableRow.create(null,s)),a=r.nodes.table.create(null,o),l=n.tr.replaceWith(e,e+1,a);return this.editorView.dispatch(l),!0}insertColumns(e){const n=this.editorView.state,r=n.schema;if(!r.nodes.columns||!r.nodes.column)return j.handleDisplay.warn("Columns node type not found in schema"),!1;const i=r.nodes.paragraph.create(),s=r.nodes.columns.create(null,[r.nodes.column.create(null,i),r.nodes.column.create(null,i.copy())]),o=n.tr.replaceWith(e,e+1,s);return this.editorView.dispatch(o),!0}insertCallout(e){const n=this.editorView.state,r=n.schema;if(!r.nodes.callout)return j.handleDisplay.warn("Callout node type not found in schema"),!1;const i=r.nodes.paragraph.create(),s=r.nodes.callout.create(null,i),o=n.tr.replaceWith(e,e+1,s);return this.editorView.dispatch(o),!0}changeColor(e,n,r){const i=this.editorView.state,s=i.doc.nodeAt(e);if(!s)return!1;const o=i.tr.setNodeMarkup(e,void 0,{...s.attrs,[r?"backgroundColor":"textColor"]:n==="default"?null:n});return this.editorView.dispatch(o),!0}duplicate(e){const n=this.editorView.state,r=n.doc.nodeAt(e);if(!r)return!1;const i=e+r.nodeSize,s=n.tr.insert(i,r.copy(r.content));return this.editorView.dispatch(s),!0}deleteNode(e){const n=this.editorView.state,r=n.doc.nodeAt(e);if(!r)return!1;const i=n.tr.delete(e,e+r.nodeSize);return this.editorView.dispatch(i),!0}}class YZ{constructor(e,n,r){this.handles=e,this.highlights=n,this.handleStyleConfig=r,this.currentHoveredNodeId=null}createHighlightElement(e){const n=document.createElement("div");return n.className="drag-node-highlight feishu-hover-mask",n.setAttribute("data-node-id",e),n.style.opacity="0",n.style.pointerEvents="none",n.style.zIndex="1",n}showHandleByNodeId(e){if(this.currentHoveredNodeId===e){this.showHandle(e);return}this.currentHoveredNodeId&&this.hideHandleAndHighlight(this.currentHoveredNodeId),this.currentHoveredNodeId=e,this.showHandle(e)}showHandle(e){const n=this.handles.get(e);n&&(n.style.opacity=this.handleStyleConfig.visibleOpacity,n.style.pointerEvents=this.handleStyleConfig.visiblePointerEvents,n.setAttribute("data-visible","true"))}hideHandle(e){const n=this.handles.get(e);n&&(n.style.opacity=this.handleStyleConfig.hiddenOpacity,n.style.pointerEvents=this.handleStyleConfig.hiddenPointerEvents,n.setAttribute("data-visible","false"))}showHighlight(e){const n=this.highlights.get(e);n&&(n.style.opacity="1")}hideHighlight(e){const n=this.highlights.get(e);n&&(n.style.opacity="0")}hideHandleAndHighlight(e){this.hideHandle(e),this.hideHighlight(e)}hideAll(e){e==null||e(),this.handles.forEach((n,r)=>{this.hideHandleAndHighlight(r)}),this.currentHoveredNodeId=null}getCurrentNodeId(){return this.currentHoveredNodeId}resetCurrentNode(){this.currentHoveredNodeId=null}isPointerWithinHandleArea(e,n,r=6){if(!this.currentHoveredNodeId)return!1;const i=this.handles.get(this.currentHoveredNodeId);if(!i)return!1;const s=i.getBoundingClientRect();return e>=s.left-r&&e<=s.right+r&&n>=s.top-r&&n<=s.bottom+r}isPointerWithinActiveZone(e,n,r=6){if(!this.currentHoveredNodeId)return!1;const i=this.highlights.get(this.currentHoveredNodeId);if(i){const s=i.getBoundingClientRect();if(e>=s.left-r&&e<=s.right+r&&n>=s.top-r&&n<=s.bottom+r)return!0}return this.isPointerWithinHandleArea(e,n,r)}}class XZ{constructor(e,n,r){this.editorView=e,this.handles=n,this.highlights=r,this.foldPreviewTargets=new Set}updateView(e){this.editorView=e}toggleHeadingFold(e){this.clearFoldPreviewHighlights();const n=this.editorView.state,r=n.doc.nodeAt(e);if(!r||r.type.name!=="heading"&&r.type.name!=="numberedHeading")return;const i=n.tr;i.setNodeMarkup(e,void 0,{...r.attrs,collapsed:!r.attrs.collapsed}),i.setMeta("fold-changed",!0),this.editorView.dispatch(i)}previewFoldRange(e){const n=this.editorView.state.doc.nodeAt(e);if(!n||!Ks(n))return;const r=typeof n.attrs.level=="number"?n.attrs.level:parseInt(String(n.attrs.level??1),10)||1,i=u0(e,r,this.editorView.state.doc);if(!i){this.clearFoldPreviewHighlights();return}this.applyFoldPreview(i.from,i.to,r)}applyFoldPreview(e,n,r){this.clearFoldPreviewHighlights();const i=this.editorView.state.doc,s=[];this.handles.forEach((a,l)=>{const c=a.getAttribute("data-pos");if(!c)return;const u=Number(c);if(!Number.isNaN(u)&&u>=e&&u<n){const d=a.getAttribute("data-node-type"),h=Number(a.getAttribute("data-heading-level")||"0");if(d&&(d==="heading"||d==="numberedHeading")&&h>0&&h<=r)return;const f=i.nodeAt(u);if(!f)return;s.push({nodeId:l,startPos:u,endPos:u+f.nodeSize,nodeType:d,handleLevel:h})}}),s.filter((a,l)=>!s.some((c,u)=>u===l?!1:c.startPos<=a.startPos&&c.endPos>=a.endPos)).forEach(a=>{const l=this.highlights.get(a.nodeId);l&&(l.classList.add("fold-preview-active"),this.foldPreviewTargets.add(a.nodeId))})}clearFoldPreviewHighlights(){this.foldPreviewTargets.forEach(e=>{const n=this.highlights.get(e);n&&n.classList.remove("fold-preview-active")}),this.foldPreviewTargets.clear()}}const um=({open:t=!1,position:e={x:0,y:0},onClose:n,onDuplicate:r,onDelete:i,onMouseEnter:s,onMouseLeave:o})=>{const{t:a}=ki(),l=sr.useRef(null);return sr.useEffect(()=>{if(!t)return;const c=d=>{var f;const h=d.target;(f=l.current)!=null&&f.contains(h)||n==null||n()},u=setTimeout(()=>{document.addEventListener("mousedown",c)},10);return()=>{clearTimeout(u),document.removeEventListener("mousedown",c)}},[t,n]),t?_.jsx("div",{ref:l,className:"handle-menu-dialog",style:{left:`${e.x}px`,top:`${e.y}px`},onMouseEnter:s,onMouseLeave:o,children:_.jsxs("div",{className:"handle-menu-content",children:[_.jsxs("div",{className:"handle-menu-item notion-menu-item",onClick:()=>{r==null||r(),n==null||n()},children:[_.jsx("div",{className:"handle-menu-item-icon notion-text-secondary",children:_.jsx(ZZ,{})}),_.jsx("div",{className:"handle-menu-item-label notion-text-primary",children:a("handleMenuDuplicate")}),_.jsx("div",{className:"handle-menu-item-shortcut notion-text-quaternary",children:"D"})]}),_.jsxs("div",{className:"handle-menu-item notion-menu-item",onClick:()=>{i==null||i(),n==null||n()},children:[_.jsx("div",{className:"handle-menu-item-icon",style:{color:"#eb5757"},children:_.jsx(JZ,{})}),_.jsx("div",{className:"handle-menu-item-label notion-text-primary",children:a("handleMenuDelete")}),_.jsx("div",{className:"handle-menu-item-shortcut notion-text-quaternary",children:"Del"})]})]})}):null};function ZZ(){return _.jsx("svg",{viewBox:"0 0 20 20",className:"w-5 h-5",children:_.jsx("path",{d:"M4.5 2.375A2.125 2.125 0 0 0 2.375 4.5V12c0 1.174.951 2.125 2.125 2.125h1.625v1.625c0 1.174.951 2.125 2.125 2.125h7.5a2.125 2.125 0 0 0 2.125-2.125v-7.5a2.125 2.125 0 0 0-2.125-2.125h-1.625V4.5A2.125 2.125 0 0 0 12 2.375zm8.375 3.75H8.25A2.125 2.125 0 0 0 6.125 8.25v4.625H4.5A.875.875 0 0 1 3.625 12V4.5c0-.483.392-.875.875-.875H12c.483 0 .875.392.875.875zm-5.5 2.125c0-.483.392-.875.875-.875h7.5c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-7.5a.875.875 0 0 1-.875-.875z",fill:"currentColor"})})}function JZ(){return _.jsxs("svg",{viewBox:"0 0 20 20",className:"w-5 h-5",children:[_.jsx("path",{d:"M8.806 8.505a.55.55 0 0 0-1.1 0v5.979a.55.55 0 1 0 1.1 0zm3.488 0a.55.55 0 0 0-1.1 0v5.979a.55.55 0 1 0 1.1 0z",fill:"currentColor"}),_.jsx("path",{d:"M6.386 3.925v1.464H3.523a.625.625 0 1 0 0 1.25h.897l.393 8.646A2.425 2.425 0 0 0 7.236 17.6h5.528a2.425 2.425 0 0 0 2.422-2.315l.393-8.646h.898a.625.625 0 1 0 0-1.25h-2.863V3.925c0-.842-.683-1.525-1.525-1.525H7.91c-.842 0-1.524.683-1.524 1.525M7.91 3.65h4.18c.15 0 .274.123.274.275v1.464H7.636V3.925c0-.152.123-.275.274-.275m-.9 2.99h7.318l-.39 8.588a1.175 1.175 0 0 1-1.174 1.122H7.236a1.175 1.175 0 0 1-1.174-1.122l-.39-8.589z",fill:"currentColor"})]})}um.displayName="HandleMenu";const HN=({open:t=!1,position:e={x:0,y:0},onClose:n,onSelect:r,onMouseEnter:i,onMouseLeave:s})=>{const{t:o}=ki(),a=[{type:"heading1",title:"Heading 1",icon:QZ},{type:"heading2",title:"Heading 2",icon:eJ},{type:"heading3",title:"Heading 3",icon:tJ},{type:"numberedList",title:"Numbered list",icon:nJ},{type:"bulletList",title:"Bulleted list",icon:rJ},{type:"todoList",title:"To-do list",icon:iJ},{type:"code",title:"Code",icon:sJ},{type:"quote",title:"Quote",icon:oJ}],l=[{type:"table",label:o("emptyMenuTable"),icon:aJ},{type:"columns",label:o("emptyMenuColumns"),icon:lJ},{type:"callout",label:o("emptyMenuCallout"),icon:cJ}];return t?_.jsx(_.Fragment,{children:_.jsx("div",{className:"empty-node-menu-dialog notion-bg-dialog notion-shadow-dialog",onMouseEnter:i,onMouseLeave:s,children:_.jsxs("div",{className:"empty-node-menu-content",children:[_.jsx("div",{className:"empty-node-menu-section basic-section",children:_.jsx("div",{className:"basic-grid",children:a.map(c=>_.jsx("div",{className:"basic-grid-item",title:c.title,onClick:()=>{r==null||r(c.type),n==null||n()},children:_.jsx(c.icon,{})},c.type))})}),_.jsx("div",{className:"empty-node-menu-separator-wrapper",children:_.jsx("div",{className:"empty-node-menu-separator notion-separator"})}),_.jsx("div",{className:"empty-node-menu-section common-section",children:l.map(c=>_.jsxs("div",{className:"common-list-item notion-menu-item",onClick:()=>{r==null||r(c.type),n==null||n()},children:[_.jsx("div",{className:"common-list-item-icon notion-text-secondary",children:_.jsx(c.icon,{})}),_.jsx("div",{className:"common-list-item-label notion-text-primary",children:c.label})]},c.type))})]})})}):null};function QZ(){return _.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:_.jsx("path",{d:"M2 3a1 1 0 0 0-1 1v16a1 1 0 1 0 2 0v-7h9v7a1 1 0 1 0 2 0V4a1 1 0 1 0-2 0v7H3V4a1 1 0 0 0-1-1Zm15.604 9.91a.4.4 0 0 1-.585-.355c0-.533 0-.774.004-1.582a.4.4 0 0 1 .203-.347l2.769-1.568A.39.39 0 0 1 20.197 9h1.404c.234 0 .423.21.423.468V19.95c0 .593-.483 1.073-1.075 1.073a1.07 1.07 0 0 1-1.07-1.073v-8.228l-2.275 1.19Z",fill:"currentColor"})})}function eJ(){return _.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:_.jsx("path",{d:"M2 3a1 1 0 0 0-1 1v16a1 1 0 1 0 2 0v-7h9v7a1 1 0 1 0 2 0V4a1 1 0 1 0-2 0v7H3V4a1 1 0 0 0-1-1Zm20.993 16.872c0-.561-.455-1.015-1.017-1.015h-3.121l3.407-4.272a3.35 3.35 0 0 0 .731-2.126c-.01-.992-.347-1.816-1.005-2.464-.647-.651-1.492-.984-2.523-.995-.931.011-1.72.34-2.356.982-.37.386-.941 1.044-.941 1.602 0 .591.48 1.07 1.07 1.07.563 0 .769-.347.993-.726.06-.101.12-.204.19-.304a1.36 1.36 0 0 1 .186-.214c.262-.252.584-.376.982-.376.447.01.784.15 1.02.423.234.28.35.606.35.987 0 .146-.019.303-.057.471-.05.152-.156.341-.315.548l-4.402 5.506a.4.4 0 0 0-.087.25v1.022c0 .221.267.65.606.65h5.272c.562 0 1.017-.457 1.017-1.019Z",fill:"currentColor"})})}function tJ(){return _.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:_.jsx("path",{d:"M2 3a1 1 0 0 0-1 1v16a1 1 0 1 0 2 0v-7h9v7a1 1 0 1 0 2 0V4a1 1 0 1 0-2 0v7H3V4a1 1 0 0 0-1-1Zm21 14.296c0-.51-.108-.998-.324-1.461a2.923 2.923 0 0 0-.877-1.044c.377-.297.65-.63.816-1.001.17-.44.252-.886.252-1.348a3.48 3.48 0 0 0-.943-2.385C21.274 9.363 20.398 9.01 19.31 9a3.179 3.179 0 0 0-2.251.932c-.349.336-.848.879-.848 1.384a1 1 0 0 0 1 1c.482 0 .767-.352 1.043-.692l.09-.11c.057-.07.121-.132.192-.185.256-.2.53-.296.834-.296.431.01.779.144 1.049.405.267.267.406.61.415 1.04 0 .417-.133.75-.4 1.008-.335.335-.766.387-1.212.387a.958.958 0 1 0 0 1.917h.088c.452-.002.824-.003 1.205.353.29.277.442.674.452 1.201-.01.51-.16.894-.451 1.162-.296.296-.65.44-1.076.44-.4 0-.712-.107-.944-.316l-.008-.008a8.055 8.055 0 0 1-.213-.207c-.1-.099-.178-.207-.254-.31-.193-.264-.366-.5-.81-.5a1 1 0 0 0-1 1c0 .574.543 1.19.954 1.533.635.53 1.35.84 2.174.84 1.057-.01 1.93-.35 2.609-1.018.69-.651 1.04-1.545 1.052-2.664Z",fill:"currentColor"})})}function nJ(){return _.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:_.jsx("path",{d:"M4.577 1.809a.543.543 0 0 0-.819-.469l-.502.296-.004.003-.309.187c-.342.207-.858.519-1.142.701a.573.573 0 0 0-.261.485c0 .482.544.774.948.522.227-.141.465-.287.642-.395v3.478a.723.723 0 1 0 1.447 0V1.81Zm-.899 7.128c-1.233 0-2.056.817-2.056 1.84a.25.25 0 0 0 .25.251h.891a.259.259 0 0 0 .26-.259c0-.32.227-.589.608-.589a.62.62 0 0 1 .428.15.52.52 0 0 1 .16.396c0 .315-.188.579-.538.949l-1.815 1.968a.672.672 0 0 0 .494 1.127h3.003a.63.63 0 0 0 0-1.26H3.744l.933-1.047c.61-.652.99-1.127.99-1.834a1.57 1.57 0 0 0-.563-1.226c-.356-.3-.852-.466-1.426-.466Zm.015 7.429c-1.006 0-1.692.478-1.946 1.178a.541.541 0 0 0 .107.553c.122.137.307.22.503.22a.773.773 0 0 0 .478-.18c.125-.098.23-.222.312-.33.096-.124.257-.224.511-.224.21 0 .37.063.472.152a.46.46 0 0 1 .16.359v.002a.503.503 0 0 1-.165.391.71.71 0 0 1-.483.16h-.14a.606.606 0 1 0 0 1.213h.168c.275 0 .468.074.59.178a.538.538 0 0 1 .186.42.554.554 0 0 1-.185.435c-.122.107-.314.184-.583.184-.32 0-.528-.114-.644-.264a1.776 1.776 0 0 0-.308-.323.766.766 0 0 0-.47-.174.678.678 0 0 0-.504.22.549.549 0 0 0-.114.55c.244.717.926 1.22 2.012 1.22.602 0 1.161-.168 1.575-.478.416-.311.683-.768.676-1.323-.01-.69-.376-1.122-.793-1.332.34-.231.63-.644.621-1.224-.019-.962-.92-1.583-2.036-1.583ZM8 4a1 1 0 0 1 1-1h13a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1Zm0 8a1 1 0 0 1 1-1h13a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1Zm0 8a1 1 0 0 1 1-1h13a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1Z",fill:"currentColor"})})}function rJ(){return _.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:_.jsx("path",{d:"M3.5 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3ZM9 3a1 1 0 0 0 0 2h13a1 1 0 1 0 0-2H9Zm0 8a1 1 0 1 0 0 2h13a1 1 0 1 0 0-2H9Zm-1 9a1 1 0 0 1 1-1h13a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1Zm-3-8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm-1.5 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z",fill:"currentColor"})})}function iJ(){return _.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[_.jsx("path",{d:"M17.207 10.207a1 1 0 0 0-1.414-1.414L11 13.586l-2.293-2.293a1 1 0 0 0-1.414 1.414l3 3a1 1 0 0 0 1.414 0l5.5-5.5Z",fill:"currentColor"}),_.jsx("path",{d:"M2 4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4Zm2 0v16h16V4H4Z",fill:"currentColor"})]})}function sJ(){return _.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:_.jsx("path",{d:"M6.865 21C4.275 21 2 18.88 2 15.037c0-4.5 3.143-9.725 6.518-12.422a.888.888 0 0 1 1.203.107c.398.424.32 1.11-.112 1.5-2.412 2.17-5.32 6.855-5.153 9.055.215-.113 1.277-.516 2.801-.516 2.197 0 3.845 1.726 3.845 4.002A4.22 4.22 0 0 1 6.865 21Zm10.898 0c-2.59 0-4.865-2.119-4.865-5.963 0-4.5 3.143-9.725 6.518-12.422a.888.888 0 0 1 1.203.107c.398.424.32 1.11-.112 1.5-2.412 2.17-5.32 6.855-5.153 9.055.215-.113 1.277-.516 2.801-.516 2.197 0 3.845 1.726 3.845 4.002A4.22 4.22 0 0 1 17.763 21Z",fill:"currentColor"})})}function oJ(){return _.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:_.jsx("path",{d:"M4 2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H4Zm16 2v6H4V4h16ZM3 16a1 1 0 0 1 1-1h16a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1Zm1 4a1 1 0 1 0 0 2h8a1 1 0 1 0 0-2H4Z",fill:"currentColor"})})}function aJ(){return _.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[_.jsx("path",{d:"M19.5 4.25v15.5H4V4.25h15.5ZM4 2.25a2 2 0 0 0-2 2v15.5a2 2 0 0 0 2 2h15.5a2 2 0 0 0 2-2V4.25a2 2 0 0 0-2-2H4Z",fill:"currentColor"}),_.jsx("path",{d:"M9.997 4.25v3.835H19.5v2H9.997v3.83H19.5v2H9.997v3.835h-2v-3.835H4v-2h3.997v-3.83H4v-2h3.997V4.25h2Z",fill:"currentColor"})]})}function lJ(){return _.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:_.jsx("path",{d:"M11 5a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2V5ZM4 5h5v14H4V5Zm18 0a2 2 0 0 0-2-2h-5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2V5Zm-7 0h5v14h-5V5Z",fill:"currentColor"})})}function cJ(){return _.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:_.jsx("path",{d:"M4 2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H4Zm16 2v6H4V4h16ZM3 16a1 1 0 0 1 1-1h16a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1Zm1 4a1 1 0 1 0 0 2h8a1 1 0 1 0 0-2H4Z",fill:"currentColor"})})}HN.displayName="EmptyNodeMenu";var Pn="top",fr="bottom",pr="right",$n="left",Sy="auto",bc=[Pn,fr,pr,$n],fa="start",Xl="end",uJ="clippingParents",WN="viewport",Ua="popper",dJ="reference",Ov=bc.reduce(function(t,e){return t.concat([e+"-"+fa,e+"-"+Xl])},[]),UN=[].concat(bc,[Sy]).reduce(function(t,e){return t.concat([e,e+"-"+fa,e+"-"+Xl])},[]),hJ="beforeRead",fJ="read",pJ="afterRead",gJ="beforeMain",mJ="main",yJ="afterMain",bJ="beforeWrite",xJ="write",vJ="afterWrite",wJ=[hJ,fJ,pJ,gJ,mJ,yJ,bJ,xJ,vJ];function Jr(t){return t?(t.nodeName||"").toLowerCase():null}function Zn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function so(t){var e=Zn(t).Element;return t instanceof e||t instanceof Element}function cr(t){var e=Zn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function _y(t){if(typeof ShadowRoot>"u")return!1;var e=Zn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function CJ(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!cr(s)||!Jr(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function kJ(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!cr(i)||!Jr(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const jN={name:"applyStyles",enabled:!0,phase:"write",fn:CJ,effect:kJ,requires:["computeStyles"]};function Gr(t){return t.split("-")[0]}var Hs=Math.max,ah=Math.min,pa=Math.round;function dm(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function qN(){return!/^((?!chrome|android).)*safari/i.test(dm())}function ga(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&cr(t)&&(i=t.offsetWidth>0&&pa(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&pa(r.height)/t.offsetHeight||1);var o=so(t)?Zn(t):window,a=o.visualViewport,l=!qN()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/s,d=r.width/i,h=r.height/s;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function Ey(t){var e=ga(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function VN(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&_y(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Ci(t){return Zn(t).getComputedStyle(t)}function SJ(t){return["table","td","th"].indexOf(Jr(t))>=0}function ps(t){return((so(t)?t.ownerDocument:t.document)||window.document).documentElement}function sf(t){return Jr(t)==="html"?t:t.assignedSlot||t.parentNode||(_y(t)?t.host:null)||ps(t)}function Lv(t){return!cr(t)||Ci(t).position==="fixed"?null:t.offsetParent}function _J(t){var e=/firefox/i.test(dm()),n=/Trident/i.test(dm());if(n&&cr(t)){var r=Ci(t);if(r.position==="fixed")return null}var i=sf(t);for(_y(i)&&(i=i.host);cr(i)&&["html","body"].indexOf(Jr(i))<0;){var s=Ci(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function xc(t){for(var e=Zn(t),n=Lv(t);n&&SJ(n)&&Ci(n).position==="static";)n=Lv(n);return n&&(Jr(n)==="html"||Jr(n)==="body"&&Ci(n).position==="static")?e:n||_J(t)||e}function Ty(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function xl(t,e,n){return Hs(t,ah(e,n))}function EJ(t,e,n){var r=xl(t,e,n);return r>n?n:r}function GN(){return{top:0,right:0,bottom:0,left:0}}function KN(t){return Object.assign({},GN(),t)}function YN(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var TJ=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,KN(typeof e!="number"?e:YN(e,bc))};function MJ(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Gr(n.placement),l=Ty(a),c=[$n,pr].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var d=TJ(i.padding,n),h=Ey(s),f=l==="y"?Pn:$n,p=l==="y"?fr:pr,g=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],m=o[l]-n.rects.reference[l],y=xc(s),b=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,C=g/2-m/2,v=d[f],k=b-h[u]-d[p],w=b/2-h[u]/2+C,S=xl(v,w,k),E=l;n.modifiersData[r]=(e={},e[E]=S,e.centerOffset=S-w,e)}}function AJ(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||VN(e.elements.popper,i)&&(e.elements.arrow=i))}const NJ={name:"arrow",enabled:!0,phase:"main",fn:MJ,effect:AJ,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ma(t){return t.split("-")[1]}var OJ={top:"auto",right:"auto",bottom:"auto",left:"auto"};function LJ(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:pa(n*i)/i||0,y:pa(r*i)/i||0}}function Rv(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=o.x,f=h===void 0?0:h,p=o.y,g=p===void 0?0:p,m=typeof u=="function"?u({x:f,y:g}):{x:f,y:g};f=m.x,g=m.y;var y=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),C=$n,v=Pn,k=window;if(c){var w=xc(n),S="clientHeight",E="clientWidth";if(w===Zn(n)&&(w=ps(n),Ci(w).position!=="static"&&a==="absolute"&&(S="scrollHeight",E="scrollWidth")),w=w,i===Pn||(i===$n||i===pr)&&s===Xl){v=fr;var I=d&&w===k&&k.visualViewport?k.visualViewport.height:w[S];g-=I-r.height,g*=l?1:-1}if(i===$n||(i===Pn||i===fr)&&s===Xl){C=pr;var $=d&&w===k&&k.visualViewport?k.visualViewport.width:w[E];f-=$-r.width,f*=l?1:-1}}var T=Object.assign({position:a},c&&OJ),P=u===!0?LJ({x:f,y:g},Zn(n)):{x:f,y:g};if(f=P.x,g=P.y,l){var B;return Object.assign({},T,(B={},B[v]=b?"0":"",B[C]=y?"0":"",B.transform=(k.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",B))}return Object.assign({},T,(e={},e[v]=b?g+"px":"",e[C]=y?f+"px":"",e.transform="",e))}function RJ(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Gr(e.placement),variation:ma(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Rv(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Rv(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const IJ={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:RJ,data:{}};var ou={passive:!0};function DJ(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=Zn(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,ou)}),a&&l.addEventListener("resize",n.update,ou),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,ou)}),a&&l.removeEventListener("resize",n.update,ou)}}const BJ={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:DJ,data:{}};var PJ={left:"right",right:"left",bottom:"top",top:"bottom"};function Ou(t){return t.replace(/left|right|bottom|top/g,function(e){return PJ[e]})}var $J={start:"end",end:"start"};function Iv(t){return t.replace(/start|end/g,function(e){return $J[e]})}function My(t){var e=Zn(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Ay(t){return ga(ps(t)).left+My(t).scrollLeft}function FJ(t,e){var n=Zn(t),r=ps(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=qN();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+Ay(t),y:l}}function zJ(t){var e,n=ps(t),r=My(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=Hs(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Hs(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+Ay(t),l=-r.scrollTop;return Ci(i||n).direction==="rtl"&&(a+=Hs(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function Ny(t){var e=Ci(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function XN(t){return["html","body","#document"].indexOf(Jr(t))>=0?t.ownerDocument.body:cr(t)&&Ny(t)?t:XN(sf(t))}function vl(t,e){var n;e===void 0&&(e=[]);var r=XN(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Zn(r),o=i?[s].concat(s.visualViewport||[],Ny(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(vl(sf(o)))}function hm(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function HJ(t,e){var n=ga(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Dv(t,e,n){return e===WN?hm(FJ(t,n)):so(e)?HJ(e,n):hm(zJ(ps(t)))}function WJ(t){var e=vl(sf(t)),n=["absolute","fixed"].indexOf(Ci(t).position)>=0,r=n&&cr(t)?xc(t):t;return so(r)?e.filter(function(i){return so(i)&&VN(i,r)&&Jr(i)!=="body"}):[]}function UJ(t,e,n,r){var i=e==="clippingParents"?WJ(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,c){var u=Dv(t,c,r);return l.top=Hs(u.top,l.top),l.right=ah(u.right,l.right),l.bottom=ah(u.bottom,l.bottom),l.left=Hs(u.left,l.left),l},Dv(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function ZN(t){var e=t.reference,n=t.element,r=t.placement,i=r?Gr(r):null,s=r?ma(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case Pn:l={x:o,y:e.y-n.height};break;case fr:l={x:o,y:e.y+e.height};break;case pr:l={x:e.x+e.width,y:a};break;case $n:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?Ty(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case fa:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Xl:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function Zl(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?uJ:a,c=n.rootBoundary,u=c===void 0?WN:c,d=n.elementContext,h=d===void 0?Ua:d,f=n.altBoundary,p=f===void 0?!1:f,g=n.padding,m=g===void 0?0:g,y=KN(typeof m!="number"?m:YN(m,bc)),b=h===Ua?dJ:Ua,C=t.rects.popper,v=t.elements[p?b:h],k=UJ(so(v)?v:v.contextElement||ps(t.elements.popper),l,u,o),w=ga(t.elements.reference),S=ZN({reference:w,element:C,placement:i}),E=hm(Object.assign({},C,S)),I=h===Ua?E:w,$={top:k.top-I.top+y.top,bottom:I.bottom-k.bottom+y.bottom,left:k.left-I.left+y.left,right:I.right-k.right+y.right},T=t.modifiersData.offset;if(h===Ua&&T){var P=T[i];Object.keys($).forEach(function(B){var A=[pr,fr].indexOf(B)>=0?1:-1,M=[Pn,fr].indexOf(B)>=0?"y":"x";$[B]+=P[M]*A})}return $}function jJ(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?UN:l,u=ma(r),d=u?a?Ov:Ov.filter(function(p){return ma(p)===u}):bc,h=d.filter(function(p){return c.indexOf(p)>=0});h.length===0&&(h=d);var f=h.reduce(function(p,g){return p[g]=Zl(t,{placement:g,boundary:i,rootBoundary:s,padding:o})[Gr(g)],p},{});return Object.keys(f).sort(function(p,g){return f[p]-f[g]})}function qJ(t){if(Gr(t)===Sy)return[];var e=Ou(t);return[Iv(t),e,Iv(e)]}function VJ(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=f===void 0?!0:f,g=n.allowedAutoPlacements,m=e.options.placement,y=Gr(m),b=y===m,C=l||(b||!p?[Ou(m)]:qJ(m)),v=[m].concat(C).reduce(function(se,K){return se.concat(Gr(K)===Sy?jJ(e,{placement:K,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:g}):K)},[]),k=e.rects.reference,w=e.rects.popper,S=new Map,E=!0,I=v[0],$=0;$<v.length;$++){var T=v[$],P=Gr(T),B=ma(T)===fa,A=[Pn,fr].indexOf(P)>=0,M=A?"width":"height",O=Zl(e,{placement:T,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),F=A?B?pr:$n:B?fr:Pn;k[M]>w[M]&&(F=Ou(F));var R=Ou(F),q=[];if(s&&q.push(O[P]<=0),a&&q.push(O[F]<=0,O[R]<=0),q.every(function(se){return se})){I=T,E=!1;break}S.set(T,q)}if(E)for(var Z=p?3:1,Q=function(K){var ne=v.find(function(ue){var ke=S.get(ue);if(ke)return ke.slice(0,K).every(function(Oe){return Oe})});if(ne)return I=ne,"break"},H=Z;H>0;H--){var Y=Q(H);if(Y==="break")break}e.placement!==I&&(e.modifiersData[r]._skip=!0,e.placement=I,e.reset=!0)}}const GJ={name:"flip",enabled:!0,phase:"main",fn:VJ,requiresIfExists:["offset"],data:{_skip:!1}};function Bv(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Pv(t){return[Pn,pr,fr,$n].some(function(e){return t[e]>=0})}function KJ(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=Zl(e,{elementContext:"reference"}),a=Zl(e,{altBoundary:!0}),l=Bv(o,r),c=Bv(a,i,s),u=Pv(l),d=Pv(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const YJ={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:KJ};function XJ(t,e,n){var r=Gr(t),i=[$n,Pn].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[$n,pr].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function ZJ(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=UN.reduce(function(u,d){return u[d]=XJ(d,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const JJ={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ZJ};function QJ(t){var e=t.state,n=t.name;e.modifiersData[n]=ZN({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const eQ={name:"popperOffsets",enabled:!0,phase:"read",fn:QJ,data:{}};function tQ(t){return t==="x"?"y":"x"}function nQ(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,f=h===void 0?!0:h,p=n.tetherOffset,g=p===void 0?0:p,m=Zl(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),y=Gr(e.placement),b=ma(e.placement),C=!b,v=Ty(y),k=tQ(v),w=e.modifiersData.popperOffsets,S=e.rects.reference,E=e.rects.popper,I=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,$=typeof I=="number"?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),T=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,P={x:0,y:0};if(w){if(s){var B,A=v==="y"?Pn:$n,M=v==="y"?fr:pr,O=v==="y"?"height":"width",F=w[v],R=F+m[A],q=F-m[M],Z=f?-E[O]/2:0,Q=b===fa?S[O]:E[O],H=b===fa?-E[O]:-S[O],Y=e.elements.arrow,se=f&&Y?Ey(Y):{width:0,height:0},K=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:GN(),ne=K[A],ue=K[M],ke=xl(0,S[O],se[O]),Oe=C?S[O]/2-Z-ke-ne-$.mainAxis:Q-ke-ne-$.mainAxis,De=C?-S[O]/2+Z+ke+ue+$.mainAxis:H+ke+ue+$.mainAxis,Ye=e.elements.arrow&&xc(e.elements.arrow),Et=Ye?v==="y"?Ye.clientTop||0:Ye.clientLeft||0:0,bt=(B=T==null?void 0:T[v])!=null?B:0,Vt=F+Oe-bt-Et,rn=F+De-bt,He=xl(f?ah(R,Vt):R,F,f?Hs(q,rn):q);w[v]=He,P[v]=He-F}if(a){var sn,Dt=v==="x"?Pn:$n,Fn=v==="x"?fr:pr,Gt=w[k],zn=k==="y"?"height":"width",Or=Gt+m[Dt],Jn=Gt-m[Fn],Kt=[Pn,$n].indexOf(y)!==-1,Hn=(sn=T==null?void 0:T[k])!=null?sn:0,Ht=Kt?Or:Gt-S[zn]-E[zn]-Hn+$.altAxis,on=Kt?Gt+S[zn]+E[zn]-Hn-$.altAxis:Jn,Lr=f&&Kt?EJ(Ht,Gt,on):xl(f?Ht:Or,Gt,f?on:Jn);w[k]=Lr,P[k]=Lr-Gt}e.modifiersData[r]=P}}const rQ={name:"preventOverflow",enabled:!0,phase:"main",fn:nQ,requiresIfExists:["offset"]};function iQ(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function sQ(t){return t===Zn(t)||!cr(t)?My(t):iQ(t)}function oQ(t){var e=t.getBoundingClientRect(),n=pa(e.width)/t.offsetWidth||1,r=pa(e.height)/t.offsetHeight||1;return n!==1||r!==1}function aQ(t,e,n){n===void 0&&(n=!1);var r=cr(e),i=cr(e)&&oQ(e),s=ps(e),o=ga(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Jr(e)!=="body"||Ny(s))&&(a=sQ(e)),cr(e)?(l=ga(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=Ay(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function lQ(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function cQ(t){var e=lQ(t);return wJ.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function uQ(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function dQ(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var $v={placement:"bottom",modifiers:[],strategy:"absolute"};function Fv(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function hQ(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?$v:i;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},$v,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,f={state:u,setOptions:function(y){var b=typeof y=="function"?y(u.options):y;g(),u.options=Object.assign({},s,u.options,b),u.scrollParents={reference:so(a)?vl(a):a.contextElement?vl(a.contextElement):[],popper:vl(l)};var C=cQ(dQ([].concat(r,u.options.modifiers)));return u.orderedModifiers=C.filter(function(v){return v.enabled}),p(),f.update()},forceUpdate:function(){if(!h){var y=u.elements,b=y.reference,C=y.popper;if(Fv(b,C)){u.rects={reference:aQ(b,xc(C),u.options.strategy==="fixed"),popper:Ey(C)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function($){return u.modifiersData[$.name]=Object.assign({},$.data)});for(var v=0;v<u.orderedModifiers.length;v++){if(u.reset===!0){u.reset=!1,v=-1;continue}var k=u.orderedModifiers[v],w=k.fn,S=k.options,E=S===void 0?{}:S,I=k.name;typeof w=="function"&&(u=w({state:u,options:E,name:I,instance:f})||u)}}}},update:uQ(function(){return new Promise(function(m){f.forceUpdate(),m(u)})}),destroy:function(){g(),h=!0}};if(!Fv(a,l))return f;f.setOptions(c).then(function(m){!h&&c.onFirstUpdate&&c.onFirstUpdate(m)});function p(){u.orderedModifiers.forEach(function(m){var y=m.name,b=m.options,C=b===void 0?{}:b,v=m.effect;if(typeof v=="function"){var k=v({state:u,name:y,instance:f,options:C}),w=function(){};d.push(k||w)}})}function g(){d.forEach(function(m){return m()}),d=[]}return f}}var fQ=[BJ,eQ,IJ,jN,JJ,GJ,rQ,NJ,YJ],pQ=hQ({defaultModifiers:fQ}),gQ="tippy-box",JN="tippy-content",mQ="tippy-backdrop",QN="tippy-arrow",eO="tippy-svg-arrow",Ss={passive:!0,capture:!0},tO=function(){return document.body};function wp(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function Oy(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function nO(t,e){return typeof t=="function"?t.apply(void 0,e):t}function zv(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function yQ(t){return t.split(/\s+/).filter(Boolean)}function Do(t){return[].concat(t)}function Hv(t,e){t.indexOf(e)===-1&&t.push(e)}function bQ(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function xQ(t){return t.split("-")[0]}function lh(t){return[].slice.call(t)}function Wv(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function wl(){return document.createElement("div")}function of(t){return["Element","Fragment"].some(function(e){return Oy(t,e)})}function vQ(t){return Oy(t,"NodeList")}function wQ(t){return Oy(t,"MouseEvent")}function CQ(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function kQ(t){return of(t)?[t]:vQ(t)?lh(t):Array.isArray(t)?t:lh(document.querySelectorAll(t))}function Cp(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function Uv(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function SQ(t){var e,n=Do(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function _Q(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var s=i.popperRect,o=i.popperState,a=i.props,l=a.interactiveBorder,c=xQ(o.placement),u=o.modifiersData.offset;if(!u)return!0;var d=c==="bottom"?u.top.y:0,h=c==="top"?u.bottom.y:0,f=c==="right"?u.left.x:0,p=c==="left"?u.right.x:0,g=s.top-r+d>l,m=r-s.bottom-h>l,y=s.left-n+f>l,b=n-s.right-p>l;return g||m||y||b})}function kp(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function jv(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var Ur={isTouch:!1},qv=0;function EQ(){Ur.isTouch||(Ur.isTouch=!0,window.performance&&document.addEventListener("mousemove",rO))}function rO(){var t=performance.now();t-qv<20&&(Ur.isTouch=!1,document.removeEventListener("mousemove",rO)),qv=t}function TQ(){var t=document.activeElement;if(CQ(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function MQ(){document.addEventListener("touchstart",EQ,Ss),window.addEventListener("blur",TQ)}var AQ=typeof window<"u"&&typeof document<"u",NQ=AQ?!!window.msCrypto:!1,OQ={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},LQ={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},_r=Object.assign({appendTo:tO,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},OQ,LQ),RQ=Object.keys(_r),IQ=function(e){var n=Object.keys(e);n.forEach(function(r){_r[r]=e[r]})};function iO(t){var e=t.plugins||[],n=e.reduce(function(r,i){var s=i.name,o=i.defaultValue;if(s){var a;r[s]=t[s]!==void 0?t[s]:(a=_r[s])!=null?a:o}return r},{});return Object.assign({},t,n)}function DQ(t,e){var n=e?Object.keys(iO(Object.assign({},_r,{plugins:e}))):RQ,r=n.reduce(function(i,s){var o=(t.getAttribute("data-tippy-"+s)||"").trim();if(!o)return i;if(s==="content")i[s]=o;else try{i[s]=JSON.parse(o)}catch{i[s]=o}return i},{});return r}function Vv(t,e){var n=Object.assign({},e,{content:nO(e.content,[t])},e.ignoreAttributes?{}:DQ(t,e.plugins));return n.aria=Object.assign({},_r.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var BQ=function(){return"innerHTML"};function fm(t,e){t[BQ()]=e}function Gv(t){var e=wl();return t===!0?e.className=QN:(e.className=eO,of(t)?e.appendChild(t):fm(e,t)),e}function Kv(t,e){of(e.content)?(fm(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?fm(t,e.content):t.textContent=e.content)}function pm(t){var e=t.firstElementChild,n=lh(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(JN)}),arrow:n.find(function(r){return r.classList.contains(QN)||r.classList.contains(eO)}),backdrop:n.find(function(r){return r.classList.contains(mQ)})}}function sO(t){var e=wl(),n=wl();n.className=gQ,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=wl();r.className=JN,r.setAttribute("data-state","hidden"),Kv(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(s,o){var a=pm(e),l=a.box,c=a.content,u=a.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(s.content!==o.content||s.allowHTML!==o.allowHTML)&&Kv(c,t.props),o.arrow?u?s.arrow!==o.arrow&&(l.removeChild(u),l.appendChild(Gv(o.arrow))):l.appendChild(Gv(o.arrow)):u&&l.removeChild(u)}return{popper:e,onUpdate:i}}sO.$$tippy=!0;var PQ=1,au=[],Sp=[];function $Q(t,e){var n=Vv(t,Object.assign({},_r,iO(Wv(e)))),r,i,s,o=!1,a=!1,l=!1,c=!1,u,d,h,f=[],p=zv(Vt,n.interactiveDebounce),g,m=PQ++,y=null,b=bQ(n.plugins),C={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},v={id:m,reference:t,popper:wl(),popperInstance:y,props:n,state:C,plugins:b,clearDelayTimeouts:Ht,setProps:on,setContent:Lr,show:po,hide:go,hideWithInteractivity:gs,enable:Kt,disable:Hn,unmount:mo,destroy:Ti};if(!n.render)return v;var k=n.render(v),w=k.popper,S=k.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+v.id,v.popper=w,t._tippy=v,w._tippy=v;var E=b.map(function(W){return W.fn(v)}),I=t.hasAttribute("aria-expanded");return Ye(),Z(),F(),R("onCreate",[v]),n.showOnCreate&&Or(),w.addEventListener("mouseenter",function(){v.props.interactive&&v.state.isVisible&&v.clearDelayTimeouts()}),w.addEventListener("mouseleave",function(){v.props.interactive&&v.props.trigger.indexOf("mouseenter")>=0&&A().addEventListener("mousemove",p)}),v;function $(){var W=v.props.touch;return Array.isArray(W)?W:[W,0]}function T(){return $()[0]==="hold"}function P(){var W;return!!((W=v.props.render)!=null&&W.$$tippy)}function B(){return g||t}function A(){var W=B().parentNode;return W?SQ(W):document}function M(){return pm(w)}function O(W){return v.state.isMounted&&!v.state.isVisible||Ur.isTouch||u&&u.type==="focus"?0:wp(v.props.delay,W?0:1,_r.delay)}function F(W){W===void 0&&(W=!1),w.style.pointerEvents=v.props.interactive&&!W?"":"none",w.style.zIndex=""+v.props.zIndex}function R(W,ae,_e){if(_e===void 0&&(_e=!0),E.forEach(function($e){$e[W]&&$e[W].apply($e,ae)}),_e){var qe;(qe=v.props)[W].apply(qe,ae)}}function q(){var W=v.props.aria;if(W.content){var ae="aria-"+W.content,_e=w.id,qe=Do(v.props.triggerTarget||t);qe.forEach(function($e){var Tt=$e.getAttribute(ae);if(v.state.isVisible)$e.setAttribute(ae,Tt?Tt+" "+_e:_e);else{var Mt=Tt&&Tt.replace(_e,"").trim();Mt?$e.setAttribute(ae,Mt):$e.removeAttribute(ae)}})}}function Z(){if(!(I||!v.props.aria.expanded)){var W=Do(v.props.triggerTarget||t);W.forEach(function(ae){v.props.interactive?ae.setAttribute("aria-expanded",v.state.isVisible&&ae===B()?"true":"false"):ae.removeAttribute("aria-expanded")})}}function Q(){A().removeEventListener("mousemove",p),au=au.filter(function(W){return W!==p})}function H(W){if(!(Ur.isTouch&&(l||W.type==="mousedown"))){var ae=W.composedPath&&W.composedPath()[0]||W.target;if(!(v.props.interactive&&jv(w,ae))){if(Do(v.props.triggerTarget||t).some(function(_e){return jv(_e,ae)})){if(Ur.isTouch||v.state.isVisible&&v.props.trigger.indexOf("click")>=0)return}else R("onClickOutside",[v,W]);v.props.hideOnClick===!0&&(v.clearDelayTimeouts(),v.hide(),a=!0,setTimeout(function(){a=!1}),v.state.isMounted||ne())}}}function Y(){l=!0}function se(){l=!1}function K(){var W=A();W.addEventListener("mousedown",H,!0),W.addEventListener("touchend",H,Ss),W.addEventListener("touchstart",se,Ss),W.addEventListener("touchmove",Y,Ss)}function ne(){var W=A();W.removeEventListener("mousedown",H,!0),W.removeEventListener("touchend",H,Ss),W.removeEventListener("touchstart",se,Ss),W.removeEventListener("touchmove",Y,Ss)}function ue(W,ae){Oe(W,function(){!v.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&ae()})}function ke(W,ae){Oe(W,ae)}function Oe(W,ae){var _e=M().box;function qe($e){$e.target===_e&&(kp(_e,"remove",qe),ae())}if(W===0)return ae();kp(_e,"remove",d),kp(_e,"add",qe),d=qe}function De(W,ae,_e){_e===void 0&&(_e=!1);var qe=Do(v.props.triggerTarget||t);qe.forEach(function($e){$e.addEventListener(W,ae,_e),f.push({node:$e,eventType:W,handler:ae,options:_e})})}function Ye(){T()&&(De("touchstart",bt,{passive:!0}),De("touchend",rn,{passive:!0})),yQ(v.props.trigger).forEach(function(W){if(W!=="manual")switch(De(W,bt),W){case"mouseenter":De("mouseleave",rn);break;case"focus":De(NQ?"focusout":"blur",He);break;case"focusin":De("focusout",He);break}})}function Et(){f.forEach(function(W){var ae=W.node,_e=W.eventType,qe=W.handler,$e=W.options;ae.removeEventListener(_e,qe,$e)}),f=[]}function bt(W){var ae,_e=!1;if(!(!v.state.isEnabled||sn(W)||a)){var qe=((ae=u)==null?void 0:ae.type)==="focus";u=W,g=W.currentTarget,Z(),!v.state.isVisible&&wQ(W)&&au.forEach(function($e){return $e(W)}),W.type==="click"&&(v.props.trigger.indexOf("mouseenter")<0||o)&&v.props.hideOnClick!==!1&&v.state.isVisible?_e=!0:Or(W),W.type==="click"&&(o=!_e),_e&&!qe&&Jn(W)}}function Vt(W){var ae=W.target,_e=B().contains(ae)||w.contains(ae);if(!(W.type==="mousemove"&&_e)){var qe=zn().concat(w).map(function($e){var Tt,Mt=$e._tippy,Wn=(Tt=Mt.popperInstance)==null?void 0:Tt.state;return Wn?{popperRect:$e.getBoundingClientRect(),popperState:Wn,props:n}:null}).filter(Boolean);_Q(qe,W)&&(Q(),Jn(W))}}function rn(W){var ae=sn(W)||v.props.trigger.indexOf("click")>=0&&o;if(!ae){if(v.props.interactive){v.hideWithInteractivity(W);return}Jn(W)}}function He(W){v.props.trigger.indexOf("focusin")<0&&W.target!==B()||v.props.interactive&&W.relatedTarget&&w.contains(W.relatedTarget)||Jn(W)}function sn(W){return Ur.isTouch?T()!==W.type.indexOf("touch")>=0:!1}function Dt(){Fn();var W=v.props,ae=W.popperOptions,_e=W.placement,qe=W.offset,$e=W.getReferenceClientRect,Tt=W.moveTransition,Mt=P()?pm(w).arrow:null,Wn=$e?{getBoundingClientRect:$e,contextElement:$e.contextElement||B()}:t,ms={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(U){var X=U.state;if(P()){var Me=M(),ut=Me.box;["placement","reference-hidden","escaped"].forEach(function(it){it==="placement"?ut.setAttribute("data-placement",X.placement):X.attributes.popper["data-popper-"+it]?ut.setAttribute("data-"+it,""):ut.removeAttribute("data-"+it)}),X.attributes.popper={}}}},At=[{name:"offset",options:{offset:qe}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Tt}},ms];P()&&Mt&&At.push({name:"arrow",options:{element:Mt,padding:3}}),At.push.apply(At,(ae==null?void 0:ae.modifiers)||[]),v.popperInstance=pQ(Wn,w,Object.assign({},ae,{placement:_e,onFirstUpdate:h,modifiers:At}))}function Fn(){v.popperInstance&&(v.popperInstance.destroy(),v.popperInstance=null)}function Gt(){var W=v.props.appendTo,ae,_e=B();v.props.interactive&&W===tO||W==="parent"?ae=_e.parentNode:ae=nO(W,[_e]),ae.contains(w)||ae.appendChild(w),v.state.isMounted=!0,Dt()}function zn(){return lh(w.querySelectorAll("[data-tippy-root]"))}function Or(W){v.clearDelayTimeouts(),W&&R("onTrigger",[v,W]),K();var ae=O(!0),_e=$(),qe=_e[0],$e=_e[1];Ur.isTouch&&qe==="hold"&&$e&&(ae=$e),ae?r=setTimeout(function(){v.show()},ae):v.show()}function Jn(W){if(v.clearDelayTimeouts(),R("onUntrigger",[v,W]),!v.state.isVisible){ne();return}if(!(v.props.trigger.indexOf("mouseenter")>=0&&v.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(W.type)>=0&&o)){var ae=O(!1);ae?i=setTimeout(function(){v.state.isVisible&&v.hide()},ae):s=requestAnimationFrame(function(){v.hide()})}}function Kt(){v.state.isEnabled=!0}function Hn(){v.hide(),v.state.isEnabled=!1}function Ht(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(s)}function on(W){if(!v.state.isDestroyed){R("onBeforeUpdate",[v,W]),Et();var ae=v.props,_e=Vv(t,Object.assign({},ae,Wv(W),{ignoreAttributes:!0}));v.props=_e,Ye(),ae.interactiveDebounce!==_e.interactiveDebounce&&(Q(),p=zv(Vt,_e.interactiveDebounce)),ae.triggerTarget&&!_e.triggerTarget?Do(ae.triggerTarget).forEach(function(qe){qe.removeAttribute("aria-expanded")}):_e.triggerTarget&&t.removeAttribute("aria-expanded"),Z(),F(),S&&S(ae,_e),v.popperInstance&&(Dt(),zn().forEach(function(qe){requestAnimationFrame(qe._tippy.popperInstance.forceUpdate)})),R("onAfterUpdate",[v,W])}}function Lr(W){v.setProps({content:W})}function po(){var W=v.state.isVisible,ae=v.state.isDestroyed,_e=!v.state.isEnabled,qe=Ur.isTouch&&!v.props.touch,$e=wp(v.props.duration,0,_r.duration);if(!(W||ae||_e||qe)&&!B().hasAttribute("disabled")&&(R("onShow",[v],!1),v.props.onShow(v)!==!1)){if(v.state.isVisible=!0,P()&&(w.style.visibility="visible"),F(),K(),v.state.isMounted||(w.style.transition="none"),P()){var Tt=M(),Mt=Tt.box,Wn=Tt.content;Cp([Mt,Wn],0)}h=function(){var At;if(!(!v.state.isVisible||c)){if(c=!0,w.offsetHeight,w.style.transition=v.props.moveTransition,P()&&v.props.animation){var N=M(),U=N.box,X=N.content;Cp([U,X],$e),Uv([U,X],"visible")}q(),Z(),Hv(Sp,v),(At=v.popperInstance)==null||At.forceUpdate(),R("onMount",[v]),v.props.animation&&P()&&ke($e,function(){v.state.isShown=!0,R("onShown",[v])})}},Gt()}}function go(){var W=!v.state.isVisible,ae=v.state.isDestroyed,_e=!v.state.isEnabled,qe=wp(v.props.duration,1,_r.duration);if(!(W||ae||_e)&&(R("onHide",[v],!1),v.props.onHide(v)!==!1)){if(v.state.isVisible=!1,v.state.isShown=!1,c=!1,o=!1,P()&&(w.style.visibility="hidden"),Q(),ne(),F(!0),P()){var $e=M(),Tt=$e.box,Mt=$e.content;v.props.animation&&(Cp([Tt,Mt],qe),Uv([Tt,Mt],"hidden"))}q(),Z(),v.props.animation?P()&&ue(qe,v.unmount):v.unmount()}}function gs(W){A().addEventListener("mousemove",p),Hv(au,p),p(W)}function mo(){v.state.isVisible&&v.hide(),v.state.isMounted&&(Fn(),zn().forEach(function(W){W._tippy.unmount()}),w.parentNode&&w.parentNode.removeChild(w),Sp=Sp.filter(function(W){return W!==v}),v.state.isMounted=!1,R("onHidden",[v]))}function Ti(){v.state.isDestroyed||(v.clearDelayTimeouts(),v.unmount(),Et(),delete t._tippy,v.state.isDestroyed=!0,R("onDestroy",[v]))}}function vc(t,e){e===void 0&&(e={});var n=_r.plugins.concat(e.plugins||[]);MQ();var r=Object.assign({},e,{plugins:n}),i=kQ(t),s=i.reduce(function(o,a){var l=a&&$Q(a,r);return l&&o.push(l),o},[]);return of(t)?s[0]:s}vc.defaultProps=_r;vc.setDefaultProps=IQ;vc.currentInput=Ur;Object.assign({},jN,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});vc.setDefaultProps({render:sO});class FQ{constructor(e,n={}){this.handles=new Map,this.highlights=new Map,this.resizeObserver=null,this.resizeDebounceTimer=null,this.RESIZE_DEBOUNCE_MS=100,this.nodePositionCache=new Map,this.menuRoot=null,this.tippyInstance=null,this.currentMenuHandle=null,this.menuState={open:!1,position:{x:0,y:0},nodeId:null,nodePos:null,isEmptyNode:!1},this.isMouseOverHandle=!1,this.isMouseOverMenu=!1,this.handleMenuMouseEnter=()=>{this.isMouseOverMenu=!0,this.menuState.nodeId&&this.highlightManager.showHandleByNodeId(this.menuState.nodeId)},this.handleMenuMouseLeave=()=>{this.isMouseOverMenu=!1,this.tryHideMenu()},j.handleDisplay.info(" HandleView ",{options:n}),this.editorView=e;const r=n.visibilityMode||"default-hidden";this.handleStyleConfig=_Z[r],j.handleDisplay.info(" ",{visibilityMode:r,styleConfig:this.handleStyleConfig}),this.nodeMatcher=new ky(n.draggableNodeTypes,n.draggableNodePaths),this.positionCalculator=new OZ(n.offset||TZ),this.dragBehavior=new GZ(e,{resolveNodePosition:(s,o)=>this.findNodePositionById(s)??o,onDragStart:()=>this.handleDragStarted(),onDragEnd:()=>this.handleDragEnded()}),this.nodeOperations=new KZ(e),this.highlightManager=new YZ(this.handles,this.highlights,this.handleStyleConfig),this.foldPreviewManager=new XZ(e,this.handles,this.highlights),this.overlay=document.createElement("div"),this.overlay.className="handle-display-overlay",this.overlay.style.position="absolute",this.overlay.style.top="0",this.overlay.style.left="0",this.overlay.style.pointerEvents="none",this.overlay.style.zIndex="10",j.handleDisplay.debug("Overlay created");const i=e.dom.parentElement;j.handleDisplay.debug("Editor container found",{tagName:i==null?void 0:i.tagName,originalPosition:i?getComputedStyle(i).position:null}),i?(i.style.position="relative",i.appendChild(this.overlay),j.handleDisplay.info(" Overlay ",{inDOM:document.contains(this.overlay)})):j.handleDisplay.error(" "),this.menuContainer=document.createElement("div"),this.menuContainer.className="handle-menu-container",this.menuRoot=kO.createRoot(this.menuContainer),j.handleDisplay.info(" ..."),this.update(e),this.setupResizeObserver(i)}update(e){if(this.editorView=e,this.nodeOperations.updateView(e),this.foldPreviewManager.updateView(e),!document.contains(this.overlay)){const o=e.dom.parentElement;o&&(o.style.position="relative",o.appendChild(this.overlay))}const n=new Set(this.handles.keys()),r=new Set(this.highlights.keys()),i=new Set,s=new WeakMap;s.set(e.state.doc,"doc"),this.nodePositionCache.clear(),e.state.doc.descendants((o,a,l)=>{const u=`${l&&s.get(l)||"doc"} > ${o.type.name}`;if(s.set(o,u),this.nodeMatcher.isDraggable(o,a,u)){const d=this.nodeMatcher.getNodeId(o,a);this.nodePositionCache.set(d,a),i.add(d),this.updateHandle(o,a,d),n.delete(d),r.delete(d)}}),n.forEach(o=>{const a=this.handles.get(o);a&&(a.remove(),this.handles.delete(o)),this.highlightManager.getCurrentNodeId()===o&&this.highlightManager.resetCurrentNode()}),r.forEach(o=>{const a=this.highlights.get(o);a&&(a.remove(),this.highlights.delete(o))})}setupResizeObserver(e){!e||typeof ResizeObserver>"u"||(this.resizeObserver=new ResizeObserver(()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=setTimeout(()=>{this.resizeDebounceTimer=null,this.handles.forEach((n,r)=>{const i=this.nodePositionCache.get(r);if(i!==void 0){const s=this.editorView.state.doc.nodeAt(i);s&&this.updateHandlePosition(s,i,r,n)}})},this.RESIZE_DEBOUNCE_MS)}),this.resizeObserver.observe(e))}updateHandle(e,n,r){let i=this.handles.get(r),s=this.highlights.get(r);i?this.renderHandleContent(i,e,n,r):(i=this.createHandleElement(e,n,r),this.overlay.appendChild(i),this.handles.set(r,i),this.dragBehavior.setupDraggable(i,r,n)),s||(s=this.highlightManager.createHighlightElement(r),this.overlay.appendChild(s),this.highlights.set(r,s)),this.updateHandlePosition(e,n,r,i)}updateHandlePosition(e,n,r,i){const s=this.highlights.get(r);if(!s)return;const o=this.findBoundaryElement(e,n),a=this.positionCalculator.calculateHandlePosition(this.editorView,n,o,i);a&&(i.style.position="absolute",i.style.left=`${a.left}px`,i.style.top=`${a.top}px`,i.style.width=`${a.width}px`,i.style.height=`${a.height}px`);const l=this.positionCalculator.calculateHighlightPosition(this.editorView,n,o);l&&(s.style.position="absolute",s.style.left=`${l.left}px`,s.style.top=`${l.top}px`,s.style.width=`${l.width}px`,s.style.height=`${l.height}px`)}findBoundaryElement(e,n){let r=this.editorView.nodeDOM(n);const i=this.editorView.domAtPos(n);let s=null;if(i.node.nodeType===Node.TEXT_NODE?s=i.node.parentElement:s=i.node,s&&s!==this.editorView.dom){const a=(r==null?void 0:r.hasAttribute("data-node-view-wrapper"))??!1;(!r||r===this.editorView.dom||a)&&(r=s)}if(!r)return null;const o=this.nodeMatcher.getBoundarySelector(e.type.name);return this.applyBoundarySelector(r,o)}applyBoundarySelector(e,n){if(n!=null&&n.primary){const r=e.closest(n.primary);if(r&&r!==this.editorView.dom)return r}if(n!=null&&n.fallback){const r=e.closest(n.fallback);if(r&&r!==this.editorView.dom)return r}return e}shouldShowMenu(){return this.isMouseOverHandle||this.isMouseOverMenu}tryHideMenu(){requestAnimationFrame(()=>{!this.shouldShowMenu()&&this.tippyInstance&&this.tippyInstance.hide()})}handleDragStarted(){this.tippyInstance&&this.tippyInstance.hide()}handleDragEnded(){this.isMouseOverHandle=!1,this.isMouseOverMenu=!1,this.tippyInstance&&(this.tippyInstance.destroy(),this.tippyInstance=null),this.currentMenuHandle=null,this.menuState={open:!1,position:{x:0,y:0},nodeId:null,nodePos:null,isEmptyNode:!1};const e=this.highlightManager.getCurrentNodeId();e&&this.highlightManager.hideHighlight(e),this.highlightManager.resetCurrentNode()}createHandleElement(e,n,r){const i=document.createElement("div");return i.className="drag-handle feishu-menu-trigger",i.style.opacity=this.handleStyleConfig.initialOpacity,i.style.pointerEvents=this.handleStyleConfig.initialPointerEvents,i.style.cursor="grab",i.style.transition="opacity 0.15s ease",i.style.zIndex="2",this.renderHandleContent(i,e,n,r),i.addEventListener("mouseenter",()=>{this.isMouseOverHandle=!0,this.highlightManager.showHandleByNodeId(r),this.highlightManager.showHighlight(r),this.showMenuForHandle(i,r,n)}),i.addEventListener("mouseleave",()=>{var s;this.isMouseOverHandle=!1,(s=this.tippyInstance)!=null&&s.state.isVisible||this.highlightManager.hideHighlight(r),this.tryHideMenu()}),i.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation(),!this.dragBehavior.isDragging()&&this.showMenuForHandle(i,r,n)}),i}showMenuForHandle(e,n,r){const i=e.getAttribute("data-empty")==="true";if(this.menuState={open:!0,position:{x:0,y:0},nodeId:n,nodePos:r,isEmptyNode:i},this.renderMenu(),this.tippyInstance&&this.currentMenuHandle===e){this.tippyInstance.show();return}this.tippyInstance&&(this.tippyInstance.destroy(),this.tippyInstance=null),this.currentMenuHandle=e,this.tippyInstance=vc(e,{content:this.menuContainer,interactive:!0,interactiveBorder:20,trigger:"manual",placement:"left-start",arrow:!1,offset:[0,4],zIndex:1e3,appendTo:()=>document.body,animation:"shift-away",duration:[150,100],popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom-start","top-start","right-start"]}},{name:"preventOverflow",options:{boundary:"viewport",padding:8}}]},onShow:s=>{const o=s.popper;o.addEventListener("mouseenter",this.handleMenuMouseEnter),o.addEventListener("mouseleave",this.handleMenuMouseLeave)},onHide:s=>{const o=s.popper;o.removeEventListener("mouseenter",this.handleMenuMouseEnter),o.removeEventListener("mouseleave",this.handleMenuMouseLeave),this.menuState.nodeId&&this.highlightManager.hideHighlight(this.menuState.nodeId),this.menuState.open=!1,this.renderMenuClosed()}}),this.tippyInstance.show()}renderHandleContent(e,n,r,i){e.setAttribute("data-node-id",i),e.setAttribute("data-pos",String(r)),e.setAttribute("data-node-type",n.type.name);const s=n.type.name==="paragraph"&&this.isEmptyNode(n);if(e.setAttribute("data-empty",s?"true":"false"),s){e.innerHTML=`
        <div class="feishu-menu-wrapper empty-node-wrapper">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
            <path d="M12 5v14m-7-7h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
      `;return}const o=n.type.name==="heading"||n.type.name==="numberedHeading",a=jZ(n.type.name,n.attrs),l=o?`
          <button
            class="heading-fold-toggle-inline"
            data-testid="fold-toggle"
            data-collapsed="${n.attrs.collapsed?"true":"false"}"
            type="button"
            contentEditable="false"
            draggable="false"
            aria-label="${n.attrs.collapsed?"":""}"
          >
            <svg width="12" height="12" viewBox="0 0 16 16" fill="none">
              <path d="M6.2 4.5c-.28 0-.53.16-.65.4a.7.7 0 00.05.71l2.5 3.9c.13.2.35.32.58.32h.16c.23 0 .45-.12.58-.32l2.5-3.9a.7.7 0 00.05-.7.75.75 0 00-.65-.41H6.2z" fill="currentColor" />
            </svg>
          </button>
        `:"";if(e.innerHTML=`
      <div class="feishu-menu-wrapper ${o?"heading-with-fold":""}">
        ${l}
        <div class="feishu-type-icon">
          <span>${a}</span>
        </div>
        <span class="feishu-drag-handle">
          ${LZ}
        </span>
      </div>
    `,o){const c=typeof n.attrs.level=="number"?n.attrs.level:Number(n.attrs.level||1);e.setAttribute("data-heading-level",String(c||1));const u=e.querySelector(".heading-fold-toggle-inline");u&&(u.onclick=d=>{d.preventDefault(),d.stopPropagation();const h=Number(e.getAttribute("data-pos"));isNaN(h)||requestAnimationFrame(()=>{this.foldPreviewManager.toggleHeadingFold(h)})},u.onmouseover=()=>{const d=Number(e.getAttribute("data-pos"));isNaN(d)||this.foldPreviewManager.previewFoldRange(d)},u.onmouseout=()=>{this.foldPreviewManager.clearFoldPreviewHighlights()})}}isEmptyNode(e){if(!e.content||e.content.size===0)return!0;let n=!1;return e.content.forEach(r=>{(r.type.name!=="text"||r.text&&r.text.trim()!=="")&&(n=!0)}),!n}findNodePositionById(e){let n=null;return this.editorView.state.doc.descendants((r,i)=>{if(r.attrs.id&&r.attrs.id===e)return n=i,!1}),n}showHandleByNodeId(e){this.highlightManager.showHandleByNodeId(e)}hideAllHandles(){this.highlightManager.hideAll(()=>this.foldPreviewManager.clearFoldPreviewHighlights())}getCurrentNodeId(){return this.highlightManager.getCurrentNodeId()}isPointerWithinHandleArea(e,n,r=6){return this.highlightManager.isPointerWithinHandleArea(e,n,r)}isPointerWithinActiveZone(e,n,r=6){return this.highlightManager.isPointerWithinActiveZone(e,n,r)}renderMenu(){this.menuRoot&&(this.menuState.isEmptyNode?this.menuRoot.render(L.createElement(df,null,L.createElement(HN,{open:!0,position:{x:0,y:0},onClose:()=>this.hideMenu(),onSelect:e=>this.handleEmptyNodeSelect(e),onMouseEnter:this.handleMenuMouseEnter,onMouseLeave:this.handleMenuMouseLeave}))):this.menuRoot.render(L.createElement(df,null,L.createElement(um,{open:!0,position:{x:0,y:0},onClose:()=>this.hideMenu(),onDuplicate:()=>this.handleDuplicate(),onDelete:()=>this.handleDelete(),onMouseEnter:this.handleMenuMouseEnter,onMouseLeave:this.handleMenuMouseLeave}))))}renderMenuClosed(){this.menuRoot&&this.menuRoot.render(L.createElement(df,null,L.createElement(um,{open:!1,position:{x:0,y:0},onClose:()=>this.hideMenu(),onDuplicate:()=>this.handleDuplicate(),onDelete:()=>this.handleDelete(),onMouseEnter:this.handleMenuMouseEnter,onMouseLeave:this.handleMenuMouseLeave})))}hideMenu(){this.tippyInstance&&this.tippyInstance.hide(),this.menuState={open:!1,position:{x:0,y:0},nodeId:null,nodePos:null,isEmptyNode:!1}}handleEmptyNodeSelect(e){const{nodePos:n}=this.menuState;n!==null&&(this.nodeOperations.handleEmptyNodeSelect(n,e),this.hideMenu())}handleDuplicate(){const{nodePos:e}=this.menuState;e!==null&&(this.nodeOperations.duplicate(e),this.hideMenu())}handleDelete(){const{nodePos:e}=this.menuState;e!==null&&(this.nodeOperations.deleteNode(e),this.hideMenu())}destroy(){if(this.foldPreviewManager.clearFoldPreviewHighlights(),this.overlay.remove(),this.handles.clear(),this.highlights.clear(),this.dragBehavior.destroy(),this.tippyInstance&&(this.tippyInstance.destroy(),this.tippyInstance=null),this.menuRoot){const e=this.menuRoot;this.menuRoot=null,setTimeout(()=>{e.unmount()},0)}this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}}const zQ=Je.create({name:"handleDisplay",addOptions(){return{enableHover:!0,visibilityMode:"default-hidden",offset:50,draggableNodeTypes:void 0,draggableNodePaths:void 0}},addStorage(){return{hoverState:null,handleView:null}},addProseMirrorPlugins(){j.handleDisplay.debug(" Adding ProseMirror plugins",{options:this.options});const t=this.options,e=this.storage,n=new NZ(MZ,t.draggableNodeTypes,t.draggableNodePaths);j.handleDisplay.debug(" HoverDetector instance created (singleton)");const r=(i,s)=>!i&&!s?!1:!!(!i&&s||i&&!s||i&&s&&i.nodeId!==s.nodeId);return[new Ge({key:new rt("handleDisplay"),view:i=>{j.handleDisplay.info("  HandleView ");const s=new FQ(i,{visibilityMode:t.visibilityMode,offset:t.offset,draggableNodeTypes:t.draggableNodeTypes,draggableNodePaths:t.draggableNodePaths});return e.handleView=s,j.handleDisplay.info(" HandleView  storage"),s}}),new Ge({key:new rt("handleDisplayHover"),props:{handleDOMEvents:{mousemove:(i,s)=>{if(!t.enableHover||!i.editable)return!1;const o=e.handleView;if(!o)return!1;const a=s.target,l=a==null?void 0:a.closest(".drag-handle");if(l){const d=l.getAttribute("data-node-id");return d&&o.showHandleByNodeId(d),!1}let c=n.handleMouseMove(i,s);if(!c&&o.getCurrentNodeId()&&o.isPointerWithinActiveZone(s.clientX,s.clientY,20))return!1;const u=e.hoverState;return r(u,c)&&(e.hoverState=c,c!=null&&c.isDraggable?o.showHandleByNodeId(c.nodeId):o.hideAllHandles()),!1}}}})]}}),HQ=zQ,br=new rt("horizontal-drag-guideline-v1"),ch={thickness:2,debug:!1},rr={isVisible:!1,left:null,right:null,top:null,bottom:null,reason:"idle"},WQ="syllo-dropcursor",UQ="syllo-dropcursor--horizontal";class jQ{constructor(e,n){this.editorView=e,this.element=null,this.options={...ch,...n}}update(e,n){const r=br.getState(e.state),i=br.getState(n);if(!r||!r.isVisible){this.hide();return}i&&i.isVisible&&i.left===r.left&&i.right===r.right&&i.top===r.top&&i.bottom===r.bottom||this.render(r)}destroy(){this.hide()}ensureElement(){var i;if(this.element)return this.element;const e=this.editorView.dom,r=(e.offsetParent??e.parentElement??((i=this.editorView.dom.ownerDocument)==null?void 0:i.body)??document.body).appendChild(document.createElement("div"));return r.classList.add(WQ,UQ),r.style.position="absolute",r.style.pointerEvents="none",r.style.zIndex="9999",this.element=r,r}hide(){this.element&&(this.element.remove(),this.element=null)}render(e){if(e.left==null||e.right==null||e.top==null||e.bottom==null||e.right<=e.left){this.hide();return}const n=this.ensureElement(),r=this.editorView.dom,i=r.getBoundingClientRect(),s=i.width/r.offsetWidth,o=i.height/r.offsetHeight,a=n.parentElement;let l,c;if(!a||a===document.body&&getComputedStyle(a).position==="static")l=-window.pageXOffset,c=-window.pageYOffset;else{const u=a.getBoundingClientRect(),d=u.width/(a.offsetWidth||1),h=u.height/(a.offsetHeight||1);l=u.left-a.scrollLeft*d,c=u.top-a.scrollTop*h}n.style.left=`${(e.left-l)/s}px`,n.style.top=`${(e.top-c)/o}px`,n.style.width=`${(e.right-e.left)/s}px`,n.style.height=`${(e.bottom-e.top)/o}px`}}class qQ{constructor(e,n){this.editorView=e,this.thickness=n}computeRect(e){const r=this.editorView.state.doc.resolve(e),i=!r.parent.inlineContent;let s=null;if(i){const o=r.nodeBefore,a=r.nodeAfter;if(o||a){const l=e-(o?o.nodeSize:0),c=this.editorView.nodeDOM(l);if(c&&c instanceof HTMLElement){const u=c.getBoundingClientRect();let d=o?u.bottom:u.top;if(o&&a){const f=this.editorView.nodeDOM(e);if(f&&f instanceof HTMLElement){const p=f.getBoundingClientRect();d=(d+p.top)/2}}const h=this.thickness/2;s={left:u.left,right:u.right,top:d-h,bottom:d+h}}}}if(!s){const o=this.editorView.coordsAtPos(e),a=this.thickness/2;s={left:o.left-a,right:o.left+a,top:o.top,bottom:o.bottom??o.top}}return s}}const _p={containerSelector:".columns-container-grid",columnSelector:'[data-type="column"]',threshold:24};class VQ{constructor(e={}){this.rectCalculator=null,this.options={...ch,...e}}ensureRectCalculator(e){return this.rectCalculator||(this.rectCalculator=new qQ(e,this.options.thickness)),this.rectCalculator}isInsideColumnGapHotzone(e,n,r){const i=e.querySelectorAll(_p.containerSelector);if(i.length===0)return!1;const s=_p.threshold;for(const o of i){const a=o.getBoundingClientRect();if(r<a.top-s||r>a.bottom+s)continue;const l=o.querySelectorAll(_p.columnSelector);if(l.length<2)continue;const c=Array.from(l).map(u=>u.getBoundingClientRect());for(let u=0;u<c.length-1;u++){const d=(c[u].right+c[u+1].left)/2;if(Math.abs(n-d)<=s)return!0}}return!1}calculate(e,n){var c;if(!e.editable)return{...rr,reason:"readonly"};if(!e.dragging)return{...rr,reason:"no-dragging"};const r=e.posAtCoords({left:n.clientX,top:n.clientY});if(!r)return{...rr,reason:"outside-editor"};const i=e.dragging;if(i.from!==void 0&&i.to!==void 0&&r.pos>=i.from&&r.pos<=i.to)return this.options.debug&&j.dragGuideline.debug("horizontal-v1: dropping on self, hide guideline",{targetPos:r.pos,from:i.from,to:i.to}),{...rr,reason:"drop-on-self"};if(this.isInsideColumnGapHotzone(e.dom,n.clientX,n.clientY))return this.options.debug&&j.dragGuideline.debug("horizontal-v1: inside column gap hotzone, hide guideline"),{...rr,reason:"column-gap-hotzone"};const s=(c=e.dragging)==null?void 0:c.slice;let o=r.pos;if(s)try{const u=xm(e.state.doc,r.pos,s);u!=null&&(o=u)}catch(u){this.options.debug&&j.dragGuideline.warn("horizontal-v1: dropPoint failed, fallback to raw pos",{error:u})}const l=this.ensureRectCalculator(e).computeRect(o);return l?(this.options.debug&&j.dragGuideline.debug("horizontal-v1: computed rect",l),{isVisible:!0,left:l.left,right:l.right,top:l.top,bottom:l.bottom,reason:"ok"}):{...rr,reason:"no-rect"}}clear(){return{...rr,reason:"cleared"}}}const un=new rt("vertical-drag-guideline"),Yv={columnContainerSelector:".columns-container-grid",columnSelector:'[data-type="column"]',columnHotzoneThreshold:24,enableColumnGuideline:!1,enableEditorBorderGuideline:!0,editorBorderHorizontalThreshold:1e3,editorBorderVerticalTolerance:50,debug:!1},Xv="syllo-vert-guideline",GQ="syllo-vert-guideline--columns-edge",KQ="syllo-vert-guideline--editor-border",YQ="none",en={mode:YQ,isVisible:!1,edgeX:null,top:null,bottom:null,side:null,hotzoneType:null,targetColumnIndex:null,targetNodePos:null,isInsideColumns:!1};function XQ(t,e){return t?t.isVisible===e.isVisible&&t.left===e.left&&t.right===e.right&&t.top===e.top&&t.bottom===e.bottom:!1}function ZQ(t,e){let n=null,r=null,i=null,s=null,o=null;return new Ge({key:br,state:{init(){return rr},apply(a,l){const c=a.getMeta(br);return c?{...l,...c}:a.docChanged?rr:l}},view(a){return e.view=a,n=new jQ(a,t),r=new VQ(t),i=l=>{if(!r)return;const c=un.getState(a.state);if(c!=null&&c.isVisible){console.log("[HorizontalPlugin] Vertical visible, forcing hide. VertState:",c);const f=br.getState(a.state);if(f!=null&&f.isVisible){const p=a.state.tr.setMeta(br,rr);a.dispatch(p)}return}const u=r.calculate(a,l);console.log("[HorizontalPlugin] Calculated state:",u);const d=br.getState(a.state);if(XQ(d,u))return;const h=a.state.tr.setMeta(br,u);a.dispatch(h)},s=()=>{const l=a.state.tr.setMeta(br,rr);a.dispatch(l)},a.dom.addEventListener("dragover",i),a.dom.addEventListener("dragend",s),o=l=>{const c=a.dom.getBoundingClientRect();if(!(l.clientX>=c.left&&l.clientX<=c.right&&l.clientY>=c.top&&l.clientY<=c.bottom)){const d=br.getState(a.state);if(d!=null&&d.isVisible){const h=a.state.tr.setMeta(br,rr);a.dispatch(h)}}},document.addEventListener("dragover",o,!0),{update(l,c){n==null||n.update(l,c)},destroy(){n==null||n.destroy(),n=null,i&&(a.dom.removeEventListener("dragover",i),i=null),s&&(a.dom.removeEventListener("dragend",s),s=null),o&&(document.removeEventListener("dragover",o,!0),o=null),r=null,e.view=null}}}})}const JQ=Je.create({name:"horizontalDragGuidelineV1",addOptions(){return ch},addStorage(){return{view:null}},addProseMirrorPlugins(){const t={...ch,...this.options},e=this.storage;return j.dragGuideline.debug("HorizontalDragGuidelineV1Extension loaded",{options:t}),[ZQ(t,e)]}});class QQ{constructor(e){this.editorView=e,this.element=null}update(e,n){const r=un.getState(e.state),i=un.getState(n);if(!r||!r.isVisible){this.hide();return}i&&i.isVisible&&i.mode===r.mode&&i.edgeX===r.edgeX&&i.top===r.top&&i.bottom===r.bottom||this.render(r)}destroy(){this.hide()}ensureElement(){var i;if(this.element)return this.element;const e=this.editorView.dom,r=(e.offsetParent??e.parentElement??((i=this.editorView.dom.ownerDocument)==null?void 0:i.body)??document.body).appendChild(document.createElement("div"));return r.classList.add(Xv),r.style.position="absolute",r.style.pointerEvents="none",r.style.zIndex="9999",this.element=r,r}hide(){this.element&&(this.element.remove(),this.element=null),this.editorView.dom.removeAttribute("data-vertical-guideline-visible")}render(e){const n=this.ensureElement(),r=this.editorView.dom;r.setAttribute("data-vertical-guideline-visible","true");const i=r.getBoundingClientRect(),s=i.width/(r.offsetWidth||1),o=i.height/(r.offsetHeight||1),a=n.parentElement;let l,c;if(!a||a===document.body&&getComputedStyle(a).position==="static")l=-window.pageXOffset,c=-window.pageYOffset;else{const h=a.getBoundingClientRect(),f=h.width/(a.offsetWidth||1),p=h.height/(a.offsetHeight||1);l=h.left-a.scrollLeft*f,c=h.top-a.scrollTop*p}if(n.className=Xv,e.mode==="columns-edge"?n.classList.add(GQ):e.mode==="editor-border"&&n.classList.add(KQ),e.edgeX==null||e.top==null||e.bottom==null){this.hide();return}const u=e.bottom-e.top;if(u<=0){this.hide();return}const d=n.offsetWidth||4;n.style.left=`${(e.edgeX-d/2-l)/s}px`,n.style.top=`${(e.top-c)/o}px`,n.style.width=`${d/s}px`,n.style.height=`${u/o}px`}}class eee{constructor(e){this.config={threshold:e.columnHotzoneThreshold??24,containerSelector:e.columnContainerSelector??".columns-container-grid",columnSelector:e.columnSelector??'[data-type="column"]',debug:e.debug??!1}}update(e){this.config={threshold:e.columnHotzoneThreshold??this.config.threshold,containerSelector:e.columnContainerSelector??this.config.containerSelector,columnSelector:e.columnSelector??this.config.columnSelector,debug:e.debug??this.config.debug}}detect(e,n,r){const i=r.querySelectorAll(this.config.containerSelector);if(i.length===0)return null;for(const s of i){const o=s.getBoundingClientRect(),a=this.config.threshold;if(!(n>=o.top-a&&n<=o.bottom+a))continue;const c=s.querySelectorAll(this.config.columnSelector);if(c.length<2)continue;const u=Array.from(c).map(d=>d.getBoundingClientRect());for(let d=0;d<u.length-1;d++){const h=u[d],f=u[d+1],p=(h.right+f.left)/2;if(Math.abs(e-p)<=a)return this.config.debug&&j.dragGuideline.debug("vertical: Gap ",{mouseX:e,gapCenter:p,index:d}),{type:"gap",edgeX:p,top:o.top,bottom:o.bottom,columnIndex:d,columnsElement:s}}}return null}}class tee{constructor(e){this.options=e}detect(e,n,r){const{editorBorderHorizontalThreshold:i,editorBorderVerticalTolerance:s,debug:o}=this.options;if(!(n>=r.top-s&&n<=r.bottom+s))return null;const l=r.left-i,c=r.right+i;return e>=l&&e<r.left?(o&&j.dragGuideline.debug("vertical: ",{clientX:e,editorLeft:r.left,leftLimit:l}),{side:"left",edgeX:r.left,top:r.top,bottom:r.bottom}):e<=c&&e>r.right?(o&&j.dragGuideline.debug("vertical: ",{clientX:e,editorRight:r.right,rightLimit:c}),{side:"right",edgeX:r.right,top:r.top,bottom:r.bottom}):null}}class Zv{constructor(e){this.editorView=e}findTargetBlockAtY(e,n){const r=Math.max(n.top,Math.min(e,n.bottom)),i=(n.left+n.right)/2,s=this.editorView.posAtCoords({left:i,top:r});if(!s)return null;let a=this.editorView.domAtPos(s.pos).node;const l=this.findContainerNode(a);if(l)return l;const c=this.findBlockNode(a);return c||null}findContainerNode(e){let n=e;for(;n&&n!==this.editorView.dom;){if(n.nodeType!==1){n=n.parentElement;continue}if(n.matches('.columns-container-grid, [data-type="columns"], [data-type="columnsFlex"]')||n.matches('table, .tableWrapper, [data-type="table"]')||n.matches('.callout-wrapper, [data-type="callout"]'))return n;n=n.parentElement}return null}findBlockNode(e){const n=this.findTopLevelListContainer(e);if(n)return n;let r=e;for(;r&&r!==this.editorView.dom;){if(r.nodeType===1&&r.matches('h1, h2, h3, h4, h5, h6, p, blockquote, pre, .draggable-node, li[data-type="taskItem"]'))return r;r=r.parentElement}return null}findTopLevelListContainer(e){let n=e,r=null;for(;n&&n!==this.editorView.dom;)n.nodeType===1&&(n.matches("ul")||n.matches("ol"))&&(r=n),n=n.parentElement;return r}}class nee{constructor(e){this.borderNodeFinder=null,this.options={columnContainerSelector:e.columnContainerSelector??".columns-container-grid",columnSelector:e.columnSelector??'[data-type="column"]',columnHotzoneThreshold:e.columnHotzoneThreshold??24,enableColumnGuideline:e.enableColumnGuideline??!0,enableEditorBorderGuideline:e.enableEditorBorderGuideline??!0,editorBorderHorizontalThreshold:e.editorBorderHorizontalThreshold??1e3,editorBorderVerticalTolerance:e.editorBorderVerticalTolerance??50,debug:e.debug??!1},this.columnDetector=new eee(this.options),this.borderDetector=new tee(this.options)}calculateForEditorDragover(e,n){if(!e.editable||!e.dragging||!this.options.enableColumnGuideline)return en;const r=this.columnDetector.detect(n.clientX,n.clientY,e.dom);return r?this.buildColumnEdgeState(e,r):(this.options.debug&&j.dragGuideline.debug("VerticalGuideline: editor dragover, no hotzone detected"),en)}calculateForGlobalDragover(e,n){if(!e.editable||!e.dragging||!this.options.enableEditorBorderGuideline)return en;const r=e.dom.getBoundingClientRect();if(n.clientX>=r.left&&n.clientX<=r.right&&n.clientY>=r.top&&n.clientY<=r.bottom)return en;const s=this.borderDetector.detect(n.clientX,n.clientY,r);if(!s)return en;const o=this.resolveBorderBlockRect(e,n.clientY,r);if(!o)return en;this.borderNodeFinder||(this.borderNodeFinder=new Zv(e));const a=this.borderNodeFinder.findTargetBlockAtY(n.clientY,r);if(!a)return en;const l=e.posAtDOM(a,0);if(l==null)return en;const c=e.state.doc.resolve(l);let u=!1;for(let d=c.depth;d>=0;d--)if(c.node(d).type.name===xi){u=!0;break}return this.buildEditorBorderState(s,o,l,u)}clear(){return en}buildColumnEdgeState(e,n){const r=e.posAtDOM(n.columnsElement,0);let i=null;return n.type==="left-edge"?i="left":(n.type==="right-edge"||n.type==="column-gap"||n.type==="gap")&&(i="right"),{mode:"columns-edge",isVisible:!0,edgeX:n.edgeX,top:n.top,bottom:n.bottom,side:i,hotzoneType:n.type,targetColumnIndex:n.columnIndex??null,targetNodePos:r??null,isInsideColumns:!0}}buildEditorBorderState(e,n,r,i){return{mode:"editor-border",isVisible:!0,edgeX:e.edgeX,top:n.top,bottom:n.bottom,side:e.side,hotzoneType:null,targetColumnIndex:null,targetNodePos:r,isInsideColumns:i}}resolveBorderBlockRect(e,n,r){this.borderNodeFinder||(this.borderNodeFinder=new Zv(e));const i=this.borderNodeFinder.findTargetBlockAtY(n,r);if(!i)return null;const s=i.getBoundingClientRect();return{top:Math.max(s.top,r.top),bottom:Math.min(s.bottom,r.bottom)}}}function ree(t,e,n,r){const{state:i,dragging:s}=t;if(console.log("[createTwoColumnLayoutAt] START",{targetPos:e,side:n,insertAfterIndex:r,hasDragging:!!s}),j.dragGuideline.debug("[createTwoColumnLayoutAt] START",{targetPos:e,side:n,hasDragging:!!s}),!s||s.from===void 0||s.to===void 0||!s.slice)return console.log("[createTwoColumnLayoutAt] skip: invalid dragging data"),j.dragGuideline.debug("[createTwoColumnLayoutAt] skip: invalid dragging data",{hasDragging:!!s}),!1;const o=iee(i.doc,e);if(!o)return console.log("[createTwoColumnLayoutAt] skip: could not resolve block node"),j.dragGuideline.debug("[createTwoColumnLayoutAt] skip: could not resolve block node",{targetPos:e}),!1;let{pos:a,node:l}=o;const c=i.doc.resolve(a);if(console.log("[createTwoColumnLayoutAt] Resolved target",{pos:a,nodeType:l.type.name}),j.dragGuideline.debug("[createTwoColumnLayoutAt] Resolved target",{pos:a,nodeType:l.type.name,depth:c.depth}),!l||!l.isBlock)return console.log("[createTwoColumnLayoutAt] skip: target node is not a block"),j.dragGuideline.debug("[createTwoColumnLayoutAt] skip: target node is not a block",{pos:a,nodeType:l==null?void 0:l.type.name}),!1;if(l.type.name===xi)return console.log("[createTwoColumnLayoutAt] Target IS a COLUMNS node"),j.dragGuideline.debug("[createTwoColumnLayoutAt]  Target IS a COLUMNS node, calling addColumnToExistingColumns",{columnsPos:a,side:n,columnsChildCount:l.childCount}),j.dragGuideline.debug("vertical-drop: target is columns node, add column",{columnsPos:a,side:n,insertAfterIndex:r,columnsChildCount:l.childCount}),Jv(t,a,l,n,r);j.dragGuideline.debug("[createTwoColumnLayoutAt] Checking if target is inside columns...");for(let E=c.depth;E>=0;E--){const I=c.node(E);if(j.dragGuideline.debug(`[createTwoColumnLayoutAt] depth ${E}: ${I.type.name}`),I.type.name===xi){const $=E,T=I,P=c.before($);return console.log("[createTwoColumnLayoutAt] Found COLUMNS ancestor"),j.dragGuideline.debug("[createTwoColumnLayoutAt]  Found COLUMNS ancestor, calling addColumnToExistingColumns",{columnsPos:P,columnsDepth:$,side:n,columnsChildCount:T.childCount}),j.dragGuideline.debug("vertical-drop: target inside existing columns, add column",{columnsPos:P,side:n,insertAfterIndex:r,columnsChildCount:T.childCount}),Jv(t,P,T,n,r)}}j.dragGuideline.debug("[createTwoColumnLayoutAt] No COLUMNS ancestor found, creating new two-column layout");for(let E=c.depth;E>=0;E--){const I=c.node(E);if(I.type.name===lr)return console.log("[createTwoColumnLayoutAt] skip: target inside column without columns ancestor"),j.dragGuideline.debug("[createTwoColumnLayoutAt] skip: target inside column without columns ancestor",{nodeType:I.type.name,depth:E}),!1}const u=i.schema.nodes[xi],d=i.schema.nodes[lr];if(!u||!d)return console.log("[createTwoColumnLayoutAt] schema missing columns/column"),j.dragGuideline.error("vertical-drop: columns / column node type not found in schema",{available:Object.keys(i.schema.nodes)}),!1;const h=s.slice.content.firstChild||i.schema.nodes.paragraph.create(),p=i.doc.slice(a,a+l.nodeSize).content.firstChild||i.schema.nodes.paragraph.create(),g=n==="left"?h:p,m=n==="left"?p:h,y=d.create({width:50},g),b=d.create({width:50},m),C=u.create({count:2,columnWidths:[50,50],layout:"grid"},[y,b]),v=i.tr;v.delete(a,a+l.nodeSize),v.insert(a,C);const{from:k,to:w,move:S}=s;if(S&&k!==void 0&&w!==void 0){const E=k<a?k:k+C.nodeSize-l.nodeSize,I=E+(w-k);v.delete(E,I)}return t.dispatch(v),console.log("[createTwoColumnLayoutAt] Success: columns created"),j.dragGuideline.debug("[createTwoColumnLayoutAt] columns created",{targetPos:a,from:s.from,to:s.to,move:s.move}),!0}function iee(t,e){const n=t.resolve(e);for(let i=n.depth;i>=0;i--){const s=n.node(i);if(s.isBlock&&s.type.name!=="doc"){const o=i>0?n.before(i):0;return{node:s,pos:o}}}const r=n.nodeAfter||n.nodeBefore;return r&&r.isBlock?{node:r,pos:n.pos}:null}function Jv(t,e,n,r,i){const{state:s,dragging:o}=t;if(console.log("[addColumnToExistingColumns] START",{columnsPos:e,side:r,insertAfterIndex:i,currentCount:n.childCount}),j.dragGuideline.debug("[addColumnToExistingColumns] START",{columnsPos:e,side:r,currentCount:n.childCount,hasDragging:!!o}),!o||o.slice==null)return console.log("[addColumnToExistingColumns] skip: no dragging slice"),j.dragGuideline.debug("[addColumnToExistingColumns] skip: no dragging slice"),j.dragGuideline.debug("vertical-drop: addColumnToExistingColumns skipped, no dragging slice"),!1;const{schema:a}=s,l=a.nodes[lr];if(!l)return console.log("[addColumnToExistingColumns] skip: column node type not found"),j.dragGuideline.error("vertical-drop: column node type not found in schema",{available:Object.keys(a.nodes)}),!1;const c=n.childCount;if(c>=Uo)return console.log("[addColumnToExistingColumns] skip: reached MAX_COLUMNS"),j.dragGuideline.debug("[addColumnToExistingColumns] skip: reached MAX_COLUMNS",{currentCount:c,MAX_COLUMNS:Uo}),j.dragGuideline.debug("vertical-drop: reached MAX_COLUMNS, skip add column",{currentCount:c,MAX_COLUMNS:Uo}),!1;const u=o.slice.content.firstChild||a.nodes.paragraph.create();j.dragGuideline.debug("[addColumnToExistingColumns] Building new columns structure",{side:r,insertAfterIndex:i,draggedContentType:u.type.name});const d=[],h=l.create({width:0},u);if(i!=null&&i>=0&&i<n.childCount)for(let w=0;w<n.childCount;w++)d.push(n.child(w)),w===i&&d.push(h);else{r==="left"&&d.push(h);for(let w=0;w<n.childCount;w++)d.push(n.child(w));r==="right"&&d.push(h)}const f=d.length,p=100/f,g=Array(f).fill(p);j.dragGuideline.debug("[addColumnToExistingColumns] Creating new columns node",{newCount:f,newWidths:g,oldCount:n.childCount});const m={...n.attrs,count:f,columnWidths:g},y=n.type.create(m,d);let b=s.tr.replaceWith(e,e+n.nodeSize,y);const{from:C,to:v,move:k}=o;if(k&&C!==void 0&&v!==void 0){const w=b.mapping.map(C),S=b.mapping.map(v);j.dragGuideline.debug("[addColumnToExistingColumns] Deleting dragging source",{from:C,to:v,mappedFrom:w,mappedTo:S}),b=b.delete(w,S)}return t.dispatch(b),j.dragGuideline.debug("[addColumnToExistingColumns]  SUCCESS: Added column to existing columns",{columnsPos:e,newCount:f,side:r}),!0}class Qv{constructor(e){this.options=e}execute(e,n,r){const i=r();if(console.log("[VerticalDropExecutor] executing with state:",i),!i||!i.isVisible)return console.log("[VerticalDropExecutor] Failed: state empty or not visible"),!1;if(i.mode!=="editor-border"&&i.mode!=="columns-edge")return console.log("[VerticalDropExecutor] Failed: mode mismatch",i.mode),!1;if(!e.dragging)return console.log("[VerticalDropExecutor] Failed: view.dragging is null"),j.dragGuideline.debug("[VerticalDropExecutor] skip: no dragging data on view"),!1;const{debug:s}=this.options;if(s&&j.dragGuideline.debug("VerticalDropExecutor: drop with state",{mode:i.mode,side:i.side,targetNodePos:i.targetNodePos,targetColumnIndex:i.targetColumnIndex,isInsideColumns:i.isInsideColumns}),i.targetNodePos==null||!i.side)return j.dragGuideline.debug("[VerticalDropExecutor] skip: missing targetNodePos or side",{targetNodePos:i.targetNodePos,side:i.side}),!1;try{const o=i.side,a=i.targetColumnIndex;if(ree(e,i.targetNodePos,o,a))return e.dragging=null,n.preventDefault(),n.stopPropagation(),s&&j.dragGuideline.debug("VerticalDropExecutor: created two-column layout"),!0}catch(o){j.dragGuideline.error("VerticalDropExecutor: failed to handle drop",{error:o})}return j.dragGuideline.debug("[VerticalDropExecutor] finished: drop not handled, fallback to default"),!1}}function ew(t,e){return t?t.mode===e.mode&&t.isVisible===e.isVisible&&t.edgeX===e.edgeX&&t.top===e.top&&t.bottom===e.bottom&&t.side===e.side&&t.hotzoneType===e.hotzoneType&&t.targetColumnIndex===e.targetColumnIndex&&t.targetNodePos===e.targetNodePos&&t.isInsideColumns===e.isInsideColumns:!1}function see(t,e){let n=null,r=null,i=null,s=null,o=null,a=null,l=null;return new Ge({key:un,props:{handleDOMEvents:{drop:(c,u)=>{const d=u;if(!c.dragging)return!1;if(j.dragGuideline.debug("[VerticalGuidelinePlugin] editor drop",{hasDragging:!!c.dragging,clientX:d.clientX,clientY:d.clientY}),new Qv(t).execute(c,d,()=>un.getState(c.state))){const p=c.state.tr.setMeta(un,en);return c.dispatch(p),!0}return!1}}},state:{init(){return en},apply(c,u){const d=c.getMeta(un);return d?{...u,...d}:c.docChanged?en:u}},view(c){return e.view=c,n=new QQ(c),r=new nee(t),i=u=>{if(!r)return;const d=r.calculateForEditorDragover(c,u);console.log("[VerticalPlugin] Editor dragover state:",d);const h=un.getState(c.state);if(ew(h,d))return;const f=c.state.tr.setMeta(un,d);c.dispatch(f)},s=()=>{const u=c.state.tr.setMeta(un,en);c.dispatch(u)},c.dom.addEventListener("dragover",i),c.dom.addEventListener("dragend",s),o=u=>{if(!r)return;const d=r.calculateForGlobalDragover(c,u),h=un.getState(c.state);if((d.isVisible||c.dragging)&&(u.preventDefault(),u.dataTransfer.dropEffect="move"),ew(h,d))return;d.isVisible&&j.dragGuideline.debug("[VerticalGuidelinePlugin] Global dragover - showing guideline",{mode:d.mode,side:d.side,edgeX:d.edgeX});const f=c.state.tr.setMeta(un,d);c.dispatch(f)},a=u=>{const d=un.getState(c.state);if(!(d!=null&&d.isVisible))return;if(console.log("[VerticalPlugin] Global DROP event",{clientX:u.clientX,clientY:u.clientY,hasDragging:!!c.dragging}),!c.dragging){console.log("[VerticalPlugin] Drop skipped: No dragging data");const g=c.state.tr.setMeta(un,en);c.dispatch(g);return}const f=new Qv(t).execute(c,u,()=>un.getState(c.state));console.log("[VerticalPlugin] Drop handled by executor?",f);const p=c.state.tr.setMeta(un,en);c.dispatch(p),f&&(u.preventDefault(),u.stopPropagation())},l=u=>{j.dragGuideline.debug("[VerticalGuidelinePlugin] Document drop event captured",{clientX:u.clientX,clientY:u.clientY,target:u.target,defaultPrevented:u.defaultPrevented})},document.addEventListener("drop",l,!0),document.addEventListener("dragover",o,!0),document.addEventListener("drop",a,!0),{update(u,d){n==null||n.update(u,d)},destroy(){n==null||n.destroy(),n=null,i&&(c.dom.removeEventListener("dragover",i),i=null),s&&(c.dom.removeEventListener("dragend",s),s=null),o&&(document.removeEventListener("dragover",o,!0),o=null),a&&(document.removeEventListener("drop",a,!0),a=null),l&&(document.removeEventListener("drop",l,!0),l=null),r=null,e.view=null}}}})}const oee=Je.create({name:"verticalDragGuideline",addOptions(){return Yv},addStorage(){return{view:null}},addProseMirrorPlugins(){const t={...Yv,...this.options},e=this.storage;return j.dragGuideline.debug("VerticalDragGuidelineExtension loaded",{options:t}),[see(t,e)]}}),aee=kS(CS);function lee(t=!1){const e=[l0.configure({heading:!1,dropcursor:!1}),Qk.configure({placeholder:"..."})];return t?e.push(Dl({types:["heading","paragraph"]})):e.push(Dl({types:["heading"]})),e.push(d0.configure({levels:[1,2,3,4,5,6]})),e}function tw(t=!0){const e=[l0.configure({codeBlock:!1,heading:!1,dropcursor:!1}),D$.extend({addAttributes(){var n;return{...(n=this.parent)==null?void 0:n.call(this),language:{default:"javascript",parseHTML:r=>r.getAttribute("data-language"),renderHTML:r=>({"data-language":r.language,class:`language-${r.language}`})}}},addNodeView(){return _h(SZ,{contentDOMElementTag:"code"})}}).configure({lowlight:aee,defaultLanguage:"javascript"}),Qk.configure({placeholder:"..."}),i$,rS,K$,H$.configure({multicolor:!0})];return t?e.push(Dl({types:FN})):e.push(Dl({types:["heading"]})),e.push(d0.configure({levels:[1,2,3,4,5,6]}),iY,sY,nF,XK,...hX(),B$.configure({HTMLAttributes:{class:"task-list"}}),P$.configure({nested:!0,HTMLAttributes:{class:"task-item"}})),e.push(HQ.configure({visibilityMode:"default-hidden",enableHover:!0,offset:50}),JQ.configure({thickness:2,debug:!1}),oee.configure({enableColumnGuideline:!0,enableEditorBorderGuideline:!0,columnHotzoneThreshold:24,editorBorderHorizontalThreshold:1e3,editorBorderVerticalTolerance:50,debug:!1})),e}function cee(){return[l0.configure({heading:!1,dropcursor:!1}),Dl({types:["heading"]}),d0.configure({levels:[1,2,3,4,5,6]})]}const uee="full",dee=!0,hee={attributes:{class:"focus:outline-none min-h-[500px] max-w-4xl mx-auto p-6"}};class fee{static getPresetExtensions(e,n){switch(e){case"basic":return lee(n);case"full":return tw(n);case"demo":return cee();default:return tw(n)}}static build(e={}){const{preset:n=uee,additionalExtensions:r=[],enableUniversalId:i=dee,content:s,editable:o=!0,editorProps:a=hee}=e;return{extensions:[...this.getPresetExtensions(n,i),...r],content:s,editable:o,editorProps:a}}}function pee(t={}){return fee.build(t)}const gee=280,mee=48,oO=({headings:t,topOffset:e=64,onWidthChange:n,collapsedIds:r,onToggleFold:i,onScrollToHeading:s,activeIds:o})=>{const[a,l]=L.useState(!1),[c,u]=L.useState([]),[d,h]=L.useState(new Set),f=r??d,p=r!==void 0,g=o??c,m=o!==void 0,y=L.useMemo(()=>{const T=new Set;let P=1/0;for(const B of t){if(B.level<=P&&(P=1/0),B.level>P){T.add(B.id);continue}f.has(B.id)&&(P=B.level)}return T},[t,f]),b=L.useRef(null),C=L.useRef(null),v=L.useRef(!1),k=L.useRef(null),w=L.useCallback(()=>{l(T=>!T)},[]);L.useEffect(()=>{const P=t.length>0?a?mee:gee:0;n==null||n(P)},[t.length,a,n]);const S=L.useCallback((T,P)=>{if(T.preventDefault(),p){i==null||i(P);return}h(B=>{const A=new Set(B);return A.has(P)?A.delete(P):A.add(P),A})},[p,i]),E=L.useCallback(()=>{if(m){v.current=!1;return}const T=document.querySelectorAll("h1, h2, h3, h4, h5, h6"),P=window.scrollY,B=P+window.innerHeight,A=[];T.forEach(M=>{const O=M.id;if(!O)return;const F=M.offsetTop;F+M.offsetHeight>=P-100&&F<=B+100&&A.push(O)}),u(A),v.current=!1},[m]),I=L.useCallback(()=>{if(!b.current||!C.current)return;const T=b.current.querySelectorAll(".toc-link.active");if(T.length===0){C.current&&(C.current.style.setProperty("--toc-height","0px"),C.current.classList.add("hidden"));return}const P=T[0],B=T[T.length-1],A=b.current.getBoundingClientRect(),M=P.getBoundingClientRect(),O=B.getBoundingClientRect(),F=M.top-A.top,R=O.bottom-M.top;C.current&&(C.current.style.setProperty("--toc-top",`${F}px`),C.current.style.setProperty("--toc-height",`${R}px`),C.current.classList.remove("hidden"))},[]),$=L.useCallback((T,P)=>{if(T.preventDefault(),s&&P.pos!==void 0){s(P.pos,P.id);return}const B=document.getElementById(P.id);if(!B)return;const A=B.offsetTop-e-16;window.scrollTo({top:A,behavior:"smooth"}),k.current&&window.clearTimeout(k.current),setTimeout(()=>{B.classList.add("toc-heading-highlight"),k.current=window.setTimeout(()=>{B.classList.remove("toc-heading-highlight")},1e3)},300)},[e,s]);return L.useEffect(()=>{const T=()=>{v.current||(window.requestAnimationFrame(E),v.current=!0)};return window.addEventListener("scroll",T,{passive:!0}),E(),()=>{window.removeEventListener("scroll",T),k.current&&window.clearTimeout(k.current)}},[E]),L.useEffect(()=>{I()},[g,I]),t.length===0?null:_.jsx("aside",{className:`toc-container ${a?"collapsed":"expanded"} thin-scrollbar`,"aria-label":"Page sections",style:{"--toc-top-offset":`${e}px`,"--header-height":`${e}px`},children:_.jsxs("div",{className:"toc-inner",ref:b,children:[_.jsx("div",{className:"toc-indicator",ref:C,style:{"--toc-top":"0px","--toc-height":"0px"}}),_.jsx("div",{className:"toc-header",children:_.jsxs("button",{className:"toc-toggle-btn",onClick:w,title:a?"":"",children:[_.jsxs("svg",{className:"icon-expanded",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",style:{display:a?"none":"block"},children:[_.jsx("path",{d:"M16 5L11 10L16 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),_.jsx("path",{d:"M11 5L6 10L11 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),_.jsxs("svg",{className:"icon-collapsed",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",style:{display:a?"block":"none"},children:[_.jsx("path",{d:"M4 5L9 10L4 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),_.jsx("path",{d:"M9 5L14 10L9 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})]})}),_.jsx("div",{className:"toc-mini-nav thin-scrollbar",children:t.map(T=>{const P=y.has(T.id);return _.jsx("button",{className:`toc-mini-item level-${T.level} ${g.includes(T.id)?"active":""} ${P?"toc-mini-item-hidden":""}`,"data-id":T.id,title:T.text,onClick:B=>$(B,T)},`mini-${T.id}`)})}),_.jsx("div",{className:"toc-content",children:_.jsx("div",{className:"toc-scroll-area",children:_.jsx("div",{className:"toc-scroll-viewport","data-radix-scroll-area-viewport":"",children:_.jsx("div",{className:"toc-scroll-inner",children:_.jsx("ul",{className:"toc-list",children:t.map(T=>{const P=g.includes(T.id),B=.75+(T.level-1)*.75,A=f.has(T.id),M=y.has(T.id);return _.jsxs("li",{className:`toc-item ${M?"toc-item-hidden":""}`,children:[T.hasChildren?_.jsx("button",{className:`toc-fold-btn ${A?"":"expanded"}`,style:{marginLeft:`${B}rem`},onClick:O=>S(O,T.id),type:"button","aria-label":` ${T.text} `,children:_.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"none",children:_.jsx("path",{d:"M7.712 11.351L3.34 5.9a.45.45 0 010-.538.278.278 0 01.215-.112h8.89c.168 0 .305.17.305.381a.432.432 0 01-.09.269l-4.372 5.451c-.159.199-.417.199-.576 0z",fill:"currentColor",style:{opacity:.6}})})}):_.jsx("div",{className:"toc-spacer",style:{marginLeft:`${B}rem`}}),_.jsx("a",{href:`#${T.id}`,className:`toc-link ${P?"active":""}`,"data-id":T.id,onClick:O=>$(O,T),children:T.text})]},T.id)})})})})})})]})})};oO.displayName="TocNew";const yee=[{name:"default",color:"#37352f"},{name:"gray",color:"#9b9a97"},{name:"brown",color:"#64473a"},{name:"orange",color:"#d9730d"},{name:"yellow",color:"#cb912f"},{name:"green",color:"#448361"},{name:"blue",color:"#337ea9"},{name:"purple",color:"#9065b0"},{name:"pink",color:"#c14c8a"},{name:"red",color:"#d44c47"}],bee=[{name:"default",color:"transparent"},{name:"gray",color:"#ebeced"},{name:"brown",color:"#e9e5e3"},{name:"orange",color:"#faebdd"},{name:"yellow",color:"#fbf3db"},{name:"green",color:"#ddedea"},{name:"blue",color:"#ddebf1"},{name:"purple",color:"#eae4f2"},{name:"pink",color:"#f4dfeb"},{name:"red",color:"#fbe4e4"}],aO=({open:t=!1,position:e={x:0,y:0},onClose:n,onFormat:r,onColorChange:i,activeFormats:s=[]})=>{const{t:o}=ki(),[a,l]=L.useState(!1),[c,u]=L.useState("#37352f"),d=sr.useRef(null),h=sr.useRef(null),f=L.useCallback(()=>{l(!1)},[]);sr.useEffect(()=>{if(!t){l(!1);return}const C=k=>{var I,$;const w=k.target,S=(I=d.current)==null?void 0:I.contains(w),E=($=h.current)==null?void 0:$.contains(w);!S&&!E&&(n==null||n())},v=setTimeout(()=>{document.addEventListener("mousedown",C)},10);return()=>{clearTimeout(v),document.removeEventListener("mousedown",C)}},[t,n]);const p=L.useCallback(C=>{r==null||r(C)},[r]),g=L.useCallback(()=>{l(C=>!C)},[]),m=L.useCallback(C=>{u(C),i==null||i(C,!1),f()},[i,f]),y=L.useCallback(C=>{i==null||i(C,!0),f()},[i,f]);if(!t)return null;const b=C=>s.includes(C);return sw.createPortal(_.jsxs(_.Fragment,{children:[_.jsxs("div",{ref:d,className:"selection-toolbar",style:{left:`${e.x}px`,top:`${e.y}px`},onMouseDown:C=>C.preventDefault(),children:[_.jsxs("div",{className:"selection-toolbar-content",children:[_.jsxs("div",{className:"selection-toolbar-group",children:[_.jsx("button",{className:Ot("selection-toolbar-btn",b("bold")&&"active"),onClick:()=>p("bold"),title:`${o("formatBold")} B`,children:_.jsx(xee,{})}),_.jsx("button",{className:Ot("selection-toolbar-btn",b("italic")&&"active"),onClick:()=>p("italic"),title:`${o("formatItalic")} I`,children:_.jsx(vee,{})}),_.jsx("button",{className:Ot("selection-toolbar-btn",b("underline")&&"active"),onClick:()=>p("underline"),title:`${o("formatUnderline")} U`,children:_.jsx(wee,{})}),_.jsx("button",{className:Ot("selection-toolbar-btn",b("strike")&&"active"),onClick:()=>p("strike"),title:`${o("formatStrikethrough")} S`,children:_.jsx(Cee,{})}),_.jsx("button",{className:Ot("selection-toolbar-btn",b("code")&&"active"),onClick:()=>p("code"),title:`${o("formatCode")} E`,children:_.jsx(kee,{})})]}),_.jsx("div",{className:"selection-toolbar-divider"}),_.jsx("div",{className:"selection-toolbar-group",children:_.jsx("button",{className:Ot("selection-toolbar-btn",a&&"active"),onClick:g,title:o("formatColor"),children:_.jsxs("div",{className:"color-indicator",children:[_.jsx(See,{}),_.jsx("div",{className:"color-indicator-bar",style:{background:c}})]})})})]}),_.jsx("div",{className:"selection-toolbar-arrow"})]}),a&&_.jsxs("div",{ref:h,className:"selection-color-picker",style:{left:`${e.x}px`,top:`${e.y+50}px`},children:[_.jsxs("div",{className:"color-section",children:[_.jsx("div",{className:"color-section-title",children:o("colorTextColor")}),_.jsx("div",{className:"color-grid",children:yee.map(C=>_.jsx("button",{className:Ot("color-option",`text-color-${C.name}`,c===C.color&&"selected"),onClick:()=>m(C.color),title:o(`color${C.name.charAt(0).toUpperCase()+C.name.slice(1)}`)},C.name))})]}),_.jsxs("div",{className:"color-section",children:[_.jsx("div",{className:"color-section-title",children:o("colorBackground")}),_.jsx("div",{className:"color-grid",children:bee.map(C=>_.jsx("button",{className:Ot("color-option",`bg-color-${C.name}`),onClick:()=>y(C.color),title:o(`color${C.name.charAt(0).toUpperCase()+C.name.slice(1)}Bg`)},C.name))})]})]})]}),document.body)};function xee(){return _.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("path",{d:"M7 5h6a4 4 0 0 1 0 8H7z"}),_.jsx("path",{d:"M7 13h7a4 4 0 0 1 0 8H7z"}),_.jsx("line",{x1:"7",y1:"5",x2:"7",y2:"21"})]})}function vee(){return _.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[_.jsx("line",{x1:"19",y1:"4",x2:"10",y2:"4"}),_.jsx("line",{x1:"14",y1:"20",x2:"5",y2:"20"}),_.jsx("line",{x1:"15",y1:"4",x2:"9",y2:"20"})]})}function wee(){return _.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[_.jsx("path",{d:"M6 4v6a6 6 0 0 0 12 0V4"}),_.jsx("line",{x1:"4",y1:"20",x2:"20",y2:"20"})]})}function Cee(){return _.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("path",{d:"M16 4H9a4 4 0 0 0 0 8h6a4 4 0 0 1 0 8H8"}),_.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"})]})}function kee(){return _.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("polyline",{points:"16 18 22 12 16 6"}),_.jsx("polyline",{points:"8 6 2 12 8 18"})]})}function See(){return _.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M12 4L5 20h2.5l1.5-4h6l1.5 4H19L12 4zm-1.5 10l1.5-4 1.5 4h-3z"})})}aO.displayName="SelectionToolbar";function nw(t){const e=[];return t.isActive("bold")&&e.push("bold"),t.isActive("italic")&&e.push("italic"),t.isActive("underline")&&e.push("underline"),t.isActive("strike")&&e.push("strike"),t.isActive("code")&&e.push("code"),e}function _ee(t,e){const{view:n,state:r}=t,{selection:i}=r;if(i.empty)return null;const{from:s,to:o}=i,a=n.coordsAtPos(s),l=n.coordsAtPos(o),c=(a.left+l.right)/2,u=Math.min(a.top,l.top)-e;return{x:c,y:u+window.scrollY}}function Eee(t){const{state:e}=t,{selection:n}=e;if(n.empty||n.node)return!1;const{from:r,to:i}=n;let s=!1;return e.doc.nodesBetween(r,i,o=>{if(o.isText)return s=!0,!1}),s}function Tee({editor:t,offsetY:e=50}){const[n,r]=L.useState({open:!1,position:{x:0,y:0},activeFormats:[]}),i=L.useRef(null),s=L.useCallback(()=>{r(c=>({...c,open:!1}))},[]),o=L.useCallback(()=>{if(!t)return;if(i.current&&(clearTimeout(i.current),i.current=null),!Eee(t)){i.current=window.setTimeout(()=>{r(d=>({...d,open:!1}))},100);return}const c=_ee(t,e);if(!c){r(d=>({...d,open:!1}));return}const u=nw(t);r({open:!0,position:c,activeFormats:u})},[t,e]),a=L.useCallback(c=>{if(t){switch(t.chain().focus(),c){case"bold":t.chain().toggleBold().run();break;case"italic":t.chain().toggleItalic().run();break;case"underline":t.chain().toggleUnderline().run();break;case"strike":t.chain().toggleStrike().run();break;case"code":t.chain().toggleCode().run();break}setTimeout(()=>{t&&r(u=>({...u,activeFormats:nw(t)}))},0)}},[t]),l=L.useCallback((c,u)=>{t&&(u?c==="transparent"?t.chain().focus().unsetHighlight().run():t.chain().focus().setHighlight({color:c}).run():c==="#37352f"?t.chain().focus().unsetColor().run():t.chain().focus().setColor(c).run())},[t]);return L.useEffect(()=>{if(!t)return;o();const c=()=>{o()},u=()=>{o()};return t.on("selectionUpdate",c),t.on("transaction",u),()=>{t.off("selectionUpdate",c),t.off("transaction",u),i.current&&clearTimeout(i.current)}},[t,o]),{...n,close:s,format:a,setColor:l}}function Mee(t){return`
<h1>${t("editorWelcomeTitle")}</h1>
<p>${t("editorWelcomeDesc")}</p>

<h2 data-numbered="true" data-manual-number="1.">${t("editorCalloutTitle")}</h2>
<p>${t("editorCalloutDesc")}</p>

<div data-type="callout" data-theme="blue" data-emoji="">
  <p>${t("editorCalloutInfo")}</p>
</div>

<div data-type="callout" data-theme="green" data-emoji="">
  <p>${t("editorCalloutSuccess")}</p>
</div>

<div data-type="callout" data-theme="yellow" data-emoji="">
  <p>${t("editorCalloutWarning")}</p>
</div>

<div data-type="callout" data-theme="red" data-emoji="">
  <p>${t("editorCalloutDanger")}</p>
</div>

<h2 data-numbered="true" data-manual-number="2.">${t("editorColumnsTitle")}</h2>
<p>${t("editorColumnsDesc")}</p>

<div data-type="columns" data-columns="2" data-column-widths="[50,50]">
  <div data-type="column">
    <p><strong>${t("editorLeftColumn")}</strong></p>
    <p>${t("editorLeftColumnContent")}</p>
    <ul>
      <li>${t("editorListItem1")}</li>
      <li>${t("editorListItem2")}</li>
    </ul>
  </div>
  <div data-type="column">
    <p><strong>${t("editorRightColumn")}</strong></p>
    <p>${t("editorRightColumnContent")}</p>
    <p>${t("editorRightColumnTip")}</p>
  </div>
</div>

<div data-type="columns" data-columns="3" data-column-widths="[33.33,33.33,33.34]">
  <div data-type="column">
    <p><strong>${t("editorFirstColumn")}</strong></p>
    <p>${t("editorThreeColumnExample")}</p>
  </div>
  <div data-type="column">
    <p><strong>${t("editorSecondColumn")}</strong></p>
    <p>${t("editorMiddleColumnContent")}</p>
  </div>
  <div data-type="column">
    <p><strong>${t("editorThirdColumn")}</strong></p>
    <p>${t("editorRightmostColumn")}</p>
  </div>
</div>

<h2 data-numbered="true" data-manual-number="3.">${t("editorCodeBlockTitle")}</h2>
<p>${t("editorCodeBlockDesc")}</p>

<pre data-language="typescript"><code class="language-typescript">// TypeScript Example
interface User {
  id: number
  name: string
  email: string
}

function greet(user: User): string {
  return \`Hello, \${user.name}!\`
}

const user: User = {
  id: 1,
  name: 'Syllo',
  email: 'hello@nova.dev'
}

console.log(greet(user))</code></pre>

<pre data-language="python"><code class="language-python"># Python Example
def fibonacci(n: int) -> list[int]:
    """Generate Fibonacci sequence"""
    if n <= 0:
        return []

    sequence = [0, 1]
    while len(sequence) < n:
        sequence.append(sequence[-1] + sequence[-2])

    return sequence[:n]

print(fibonacci(10))</code></pre>

<h2 data-numbered="true" data-manual-number="4.">${t("editorMermaidTitle")}</h2>
<p>${t("editorMermaidDesc")}</p>

<div data-type="mermaid"></div>

<h2 data-numbered="true" data-manual-number="5.">${t("editorTableTitle")}</h2>
<p>${t("editorTableDesc")}</p>

<table>
  <tbody>
    <tr>
      <th>${t("editorTableHeader1")}</th>
      <th>${t("editorTableHeader2")}</th>
      <th>${t("editorTableHeader3")}</th>
    </tr>
    <tr>
      <td>${t("editorTableCell1_1")}</td>
      <td>${t("editorTableCell1_2")}</td>
      <td>${t("editorTableCell1_3")}</td>
    </tr>
    <tr>
      <td>${t("editorTableCell2_1")}</td>
      <td>${t("editorTableCell2_2")}</td>
      <td>${t("editorTableCell2_3")}</td>
    </tr>
  </tbody>
</table>

<h2 data-numbered="true" data-manual-number="6.">${t("editorNumberedHeadingTitle")}</h2>
<p>${t("editorNumberedHeadingDesc")}</p>

<h2 data-indent="0">${t("editorChapter1")}</h2>
<p>${t("editorChapter1Content")}</p>

<h3 data-indent="1">${t("editorSection1_1")}</h3>
<p>${t("editorSection1_1Content")}</p>

<h3 data-indent="1">${t("editorSection1_2")}</h3>
<p>${t("editorSection1_2Content")}</p>

<h4 data-indent="2">${t("editorSection1_2_1")}</h4>
<p>${t("editorSection1_2_1Content")}</p>

<h2 data-indent="0">${t("editorChapter2")}</h2>
<p>${t("editorChapter2Content")}</p>

<h2 data-numbered="true" data-manual-number="7.">${t("editorBasicFormatTitle")}</h2>
<p>${t("editorBasicFormatDesc")}</p>
<ul>
  <li>${t("editorBold")}</li>
  <li>${t("editorItalic")}</li>
  <li>${t("editorStrikethrough")}</li>
  <li>${t("editorInlineCode")}</li>
</ul>

<blockquote>
  <p>${t("editorBlockquote")}</p>
</blockquote>

<h2 data-numbered="true" data-manual-number="8.">${t("editorListTitle")}</h2>
<p>${t("editorListDesc")}</p>

<ol>
  <li>${t("editorOrderedItem")} 1</li>
  <li>${t("editorOrderedItem")} 2</li>
  <li>${t("editorOrderedItem")} 3</li>
</ol>

<ul>
  <li>${t("editorUnorderedItem")}</li>
  <li>${t("editorUnorderedItem")}</li>
  <li>${t("editorUnorderedItem")}</li>
</ul>

<h2 data-numbered="true" data-manual-number="9.">${t("editorTaskListTitle")}</h2>
<p>${t("editorTaskListDesc")}</p>

<ul data-type="taskList">
  <li data-type="taskItem" data-checked="true"><p>${t("editorTaskItem1")}</p></li>
  <li data-type="taskItem" data-checked="true"><p>${t("editorTaskItem2")}</p></li>
  <li data-type="taskItem" data-checked="false"><p>${t("editorTaskItem3")}</p></li>
  <li data-type="taskItem" data-checked="false"><p>${t("editorTaskItem4")}</p></li>
</ul>

<h2>${t("editorStartCreating")}</h2>
<p>${t("editorStartCreatingDesc")}</p>
`}function Aee(t){if(!t)return new Set;const e=new Set;return t.state.doc.descendants(n=>{n.type.name==="heading"&&n.attrs.collapsed&&n.attrs.id&&e.add(n.attrs.id)}),e}function Nee(t){if(!t)return[];const e=[];return t.state.doc.descendants((r,i)=>{if(r.type.name==="heading"){const s=r.attrs.id||`heading-${i}`,o=r.attrs.level||1;let a=r.textContent;r.attrs.numbered&&r.attrs.manualNumber&&(a=`${r.attrs.manualNumber} ${a}`),e.push({id:s,level:o,text:a,pos:i})}}),e.map((r,i)=>{let s=!1;for(let o=i+1;o<e.length;o++){if(e[o].level>r.level){s=!0;break}if(e[o].level<=r.level)break}return{...r,hasChildren:s}})}function Oee(){const{t}=ki(),[e,n]=L.useState([]),[r,i]=L.useState(280),[s,o]=L.useState(new Set),[a,l]=L.useState([]),c=L.useMemo(()=>Mee(t),[t]),u=pee({preset:"full",enableUniversalId:!0,content:c,editorProps:{attributes:{class:"focus:outline-none min-h-[calc(100vh-120px)] p-8"}}}),d=UB(u),h=Tee({editor:d}),f=L.useCallback(()=>{d&&(n(Nee(d)),o(Aee(d)))},[d]);L.useEffect(()=>{d&&d.commands.setContent(c)},[d,c]),L.useEffect(()=>{if(!d)return;f();const w=({transaction:S})=>{f()};return d.on("update",w),()=>{d.off("update",w)}},[d,f]);const p=L.useCallback(()=>{if(!d||e.length===0)return;const w=window.scrollY,S=w+window.innerHeight,E=80,I=[];for(const $ of e){const T=d.view.nodeDOM($.pos);let P=null;if(T instanceof HTMLElement?P=T:T instanceof Text&&T.parentElement&&(P=T.parentElement),P){const B=P.getBoundingClientRect(),A=B.top+window.scrollY;A+B.height>=w+E-50&&A<=S+50&&I.push($.id)}}l(I)},[d,e]);L.useEffect(()=>{let w=!1;const S=()=>{w||(window.requestAnimationFrame(()=>{p(),w=!1}),w=!0)};return window.addEventListener("scroll",S,{passive:!0}),p(),()=>{window.removeEventListener("scroll",S)}},[p]);const g=L.useCallback(w=>{i(w)},[]),m=L.useCallback((w,S)=>{if(!d)return null;const E=d.view.nodeDOM(w);if(E instanceof HTMLElement||E instanceof Element)return E;if(E instanceof Text){const $=E.parentElement;if($ instanceof HTMLElement)return $}if(S){const $=document.getElementById(S);if($ instanceof HTMLElement)return $}const I=document.querySelectorAll("h1, h2, h3, h4, h5, h6");for(const $ of Array.from(I))if($ instanceof HTMLElement)try{const T=d.view.posAtDOM($,0);if(Math.abs(T-w)<=2)return $}catch{}return null},[d]),y=L.useCallback(w=>{w.classList.remove("toc-heading-highlight"),w.offsetWidth,w.classList.add("toc-heading-highlight"),setTimeout(()=>{w.classList.remove("toc-heading-highlight")},1e3)},[]),b=L.useCallback((w,S)=>{if(!d)return;const E=m(w,S);if(!E)return;const $=E.offsetTop-80-32;window.scrollTo({top:$,behavior:"smooth"}),requestAnimationFrame(()=>y(E))},[d,m,y]),C=L.useCallback(w=>{if(!d)return;let S=null,E=null;if(d.state.doc.descendants((I,$)=>{if(I.type.name==="heading"&&I.attrs.id===w)return S=$,E=I,!1}),S!==null&&E){const I=d.state.tr;I.setNodeMarkup(S,void 0,{...E.attrs,collapsed:!E.attrs.collapsed}),I.setMeta("fold-changed",!0),d.view.dispatch(I)}},[d]),k=24+(r===0?0:Math.max(r,48))+24;return _.jsxs("div",{className:"editor-layout",children:[_.jsx("div",{className:"toc-wrapper",style:{paddingLeft:"24px"},children:_.jsx(oO,{headings:e,topOffset:80,onWidthChange:g,collapsedIds:s,onToggleFold:C,onScrollToHeading:b,activeIds:a})}),_.jsx("main",{className:"editor-main",style:{marginLeft:`${k}px`,marginRight:"120px"},children:_.jsx(BB,{editor:d})}),_.jsx(aO,{open:h.open,position:h.position,activeFormats:h.activeFormats,onClose:h.close,onFormat:h.format,onColorChange:h.setColor})]})}const pte=Object.freeze(Object.defineProperty({__proto__:null,default:Oee},Symbol.toStringTag,{value:"Module"}));export{qS as $,pl as A,aF as B,M4 as C,Y0 as D,pn as E,BS as F,sU as G,a9 as H,Ex as I,f8 as J,UF as K,sa as L,$ee as M,Uh as N,l4 as O,p0 as P,$x as Q,JH as R,wu as S,iU as T,oc as U,m4 as V,sc as W,pe as X,Ee as Y,XW as Z,x as _,C4 as a,Dn as a$,KH as a0,T0 as a1,jee as a2,Gee as a3,Co as a4,i1 as a5,r1 as a6,Yee as a7,Kee as a8,Vee as a9,VW as aA,$7 as aB,FW as aC,z0 as aD,rv as aE,xj as aF,YH as aG,Pee as aH,fc as aI,yj as aJ,mj as aK,k0 as aL,Bi as aM,Zx as aN,M6 as aO,$l as aP,lo as aQ,GW as aR,I2 as aS,$h as aT,Wh as aU,Gd as aV,B2 as aW,R2 as aX,kW as aY,ye as aZ,C2 as a_,Wee as aa,Uee as ab,Zee as ac,qee as ad,Xee as ae,jj as af,jM as ag,lte as ah,g8 as ai,zt as aj,cs as ak,F0 as al,mT as am,ho as an,W2 as ao,Be as ap,Xr as aq,Dq as ar,ate as as,cte as at,ste as au,be as av,ote as aw,yq as ax,hq as ay,dq as az,w4 as b,w6 as b0,C0 as b1,s_ as b2,lc as b3,l_ as b4,Hee as b5,oF as b6,qW as b7,$W as b8,_7 as b9,KW as bA,Hh as bB,pte as bC,H0 as ba,xW as bb,YW as bc,dc as bd,va as be,jd as bf,NW as bg,iV as bh,uc as bi,Vd as bj,SW as bk,T2 as bl,M7 as bm,A7 as bn,ks as bo,S1 as bp,N7 as bq,W0 as br,T7 as bs,R7 as bt,wa as bu,ls as bv,x1 as bw,U0 as bx,A2 as by,Jg as bz,et as c,Ve as d,jS as e,$t as f,S4 as g,wi as h,dr as i,w8 as j,ba as k,G as l,j2 as m,Fee as n,dte as o,_4 as p,E4 as q,ute as r,k4 as s,p8 as t,kr as u,lq as v,lU as w,Jee as x,v4 as y,zee as z};
