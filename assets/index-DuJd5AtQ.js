const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dagre-6UL2VRFP-DWAtR1We.js","assets/graph-Cp_FeNQS.js","assets/_baseUniq-C5dm7oxA.js","assets/layout-JqCKyz4i.js","assets/_basePickBy-BeUUaQeS.js","assets/clone-MF9neNBO.js","assets/index-BZU_YUbO.js","assets/index-DoMn2EzG.css","assets/cose-bilkent-S5V4N54A-CldgMEyn.js","assets/cytoscape.esm-BQaXIfA_.js","assets/c4Diagram-YG6GDRKO-5z8Y7VpF.js","assets/chunk-TZMSLE5B-eXukA1f1.js","assets/flowDiagram-NV44I4VS-D9H4PbAh.js","assets/chunk-FMBD7UC4-Cy6RsOQJ.js","assets/chunk-55IACEB6-DfvSwliE.js","assets/chunk-QN33PNHL-DNleFqlG.js","assets/channel-CG7M_An2.js","assets/erDiagram-Q2GNP2WA-BKcc8QRT.js","assets/gitGraphDiagram-NY62KEGX-hA_4VN-5.js","assets/chunk-4BX2VUAB-ru8yzI1y.js","assets/chunk-QZHKN3VN-C1wA4xT0.js","assets/treemap-KMMF4GRG-B8uiQegs.js","assets/ganttDiagram-JELNMOA3-DLRP2za5.js","assets/linear-DVnt4J-h.js","assets/init-Gi6I4Gst.js","assets/defaultLocale-C4B-KCzX.js","assets/infoDiagram-WHAUD3N6-06l3nYao.js","assets/pieDiagram-ADFJNKIX-Br9SssUu.js","assets/arc-B6gEPpGG.js","assets/ordinal-Cboi1Yqb.js","assets/quadrantDiagram-AYHSOK5B-uEZG07dn.js","assets/xychartDiagram-PRI3JC2R-90Pjm0pz.js","assets/requirementDiagram-UZGBJVZJ-B0Q2QBUm.js","assets/sequenceDiagram-WL72ISMW-Cxy9Szpx.js","assets/classDiagram-2ON5EDUG-zvVV8sb6.js","assets/chunk-B4BG7PRW-DMEPKlGR.js","assets/classDiagram-v2-WZHVMYZB-zvVV8sb6.js","assets/stateDiagram-FKZM4ZOC-DBUWYFNN.js","assets/chunk-DI55MBZ5-YsReMFDU.js","assets/stateDiagram-v2-4FDKWEC3-LSWfmN39.js","assets/journeyDiagram-XKPGCS4Q-gVwpTt9u.js","assets/timeline-definition-IT6M3QCI-K01LIYmj.js","assets/mindmap-definition-VGOIOE7T-BGkq58Rc.js","assets/kanban-definition-3W4ZIXB7-C63Dy6Qe.js","assets/sankeyDiagram-TZEHDZUN-DaWiSZlJ.js","assets/diagram-S2PKOQOG-VCaRdv9P.js","assets/diagram-QEK2KX5R-DMiCsMjF.js","assets/blockDiagram-VD42YOAC-BJL4LDOY.js","assets/architectureDiagram-VXUJARFQ-DWqbc_h3.js","assets/diagram-PSM6KHXK-j-6apACh.js"])))=>i.map(i=>d[i]);
var vO=Object.defineProperty;var wO=(t,e,n)=>e in t?vO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var lt=(t,e,n)=>wO(t,typeof e!="symbol"?e+"":e,n);import{c as ow,r as sw,g as mm,R as or,a as O,j as _,b as CO,d as aw,l as j,u as ki,_ as rt,e as lw,f as cw,h as kO,i as uw,k as jr,m as Jl,P as as,n as qr,A as dw,o as Ql,p as hw,q as fw,s as pw,t as gw,v as mw,F as yw,D as bw,C as SO,w as _O,x as Ot,y as EO,z as TO,B as Cl,E as MO,I as hf}from"./index-BZU_YUbO.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],NO=ow("search",AO);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],LO=ow("x",OO);var ff={exports:{}},pf={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function RO(){if(F0)return pf;F0=1;var t=sw();function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function a(d,h){var f=h(),p=r({inst:{value:f,getSnapshot:h}}),g=p[0].inst,m=p[1];return o(function(){g.value=f,g.getSnapshot=h,l(g)&&m({inst:g})},[d,f,h]),i(function(){return l(g)&&m({inst:g}),d(function(){l(g)&&m({inst:g})})},[d]),s(f),f}function l(d){var h=d.getSnapshot;d=d.value;try{var f=h();return!n(d,f)}catch{return!0}}function c(d,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return pf.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,pf}var z0;function xw(){return z0||(z0=1,ff.exports=RO()),ff.exports}var vw=xw();function Jt(t){this.content=t}Jt.prototype={constructor:Jt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new Jt(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Jt(n)},addToStart:function(t,e){return new Jt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Jt(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new Jt(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Jt.from(t),t.size?new Jt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Jt.from(t),t.size?new Jt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Jt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Jt.from=function(t){if(t instanceof Jt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Jt(e)};function ww(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=ww(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function Cw(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),a=e.child(--o),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let c=0,u=Math.min(s.text.length,a.text.length);for(;c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let c=Cw(s.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class V{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,a=0;a<n;s++){let l=this.content[s],c=a+l.nodeSize;if(c>e&&r(l,i+a,o||null,s)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(s?s=!1:o+=r),o+=c},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new V(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let a=this.content[o],l=s+a.nodeSize;l>e&&((s<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),i+=a.nodeSize),s=l}return new V(r,i)}cutByIndex(e,n){return e==n?V.empty:e==0&&n==this.content.length?this:new V(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new V(i,o)}addToStart(e){return new V([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new V(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return ww(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Cw(this,e,n,r)}findIndex(e){if(e==0)return Ec(0,e);if(e==this.size)return Ec(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),o=r+i.nodeSize;if(o>=e)return o==e?Ec(n+1,o):Ec(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return V.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new V(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return V.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new V(n||e,r)}static from(e){if(!e)return V.empty;if(e instanceof V)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new V([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}V.empty=new V([],0);const gf={index:0,offset:0};function Ec(t,e){return gf.index=t,gf.offset=e,gf}function Ru(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Ru(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Ru(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let ht=class Tp{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ru(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Tp.none;if(e instanceof Tp)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};ht.none=[];class Iu extends Error{}class re{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Sw(this.content,e+this.openStart,n);return r&&new re(r,this.openStart,this.openEnd)}removeBetween(e,n){return new re(kw(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return re.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new re(V.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new re(e,r,i)}}re.empty=new re(V.empty,0,0);function kw(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(i==e||o.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(kw(o.content,e-i-1,n-i-1)))}function Sw(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=Sw(s.content,e-o-1,n,s);return a&&t.replaceChild(i,s.copy(a))}function IO(t,e,n){if(n.openStart>t.depth)throw new Iu("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Iu("Inconsistent open depths");return _w(t,e,n,0)}function _w(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=_w(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,a=s.content;return Bo(s,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=DO(n,t);return Bo(o,Tw(t,s,a,e,r))}else return Bo(o,Du(t,e,r))}function Ew(t,e){if(!e.type.compatibleContent(t.type))throw new Iu("Cannot join "+e.type.name+" onto "+t.type.name)}function Mp(t,e,n){let r=t.node(n);return Ew(r,e.node(n)),r}function Do(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function rl(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(Do(t.nodeAfter,r),o++));for(let a=o;a<s;a++)Do(i.child(a),r);e&&e.depth==n&&e.textOffset&&Do(e.nodeBefore,r)}function Bo(t,e){return t.type.checkContent(e),t.copy(e)}function Tw(t,e,n,r,i){let o=t.depth>i&&Mp(t,e,i+1),s=r.depth>i&&Mp(n,r,i+1),a=[];return rl(null,t,i,a),o&&s&&e.index(i)==n.index(i)?(Ew(o,s),Do(Bo(o,Tw(t,e,n,r,i+1)),a)):(o&&Do(Bo(o,Du(t,e,i+1)),a),rl(e,n,i,a),s&&Do(Bo(s,Du(n,r,i+1)),a)),rl(r,null,i,a),new V(a)}function Du(t,e,n){let r=[];if(rl(null,t,n,r),t.depth>n){let i=Mp(t,e,n+1);Do(Bo(i,Du(t,e,n+1)),r)}return rl(e,null,n,r),new V(r)}function DO(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(V.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class kl{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return ht.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Bu(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(o),c=o-l;if(r.push(s,a,i+l),!c||(s=s.child(a),s.isText))break;o=c-1,i+=l+1}return new kl(n,r,o)}static resolveCached(e,n){let r=H0.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==n)return s}else H0.set(e,r=new BO);let i=r.elts[r.i]=kl.resolve(e,n);return r.i=(r.i+1)%PO,i}}class BO{constructor(){this.elts=[],this.i=0}}const PO=12,H0=new WeakMap;class Bu{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const $O=Object.create(null);let qi=class Ap{constructor(e,n,r,i=ht.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||V.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Ru(this.attrs,n||e.defaultAttrs||$O)&&ht.sameSet(this.marks,r||ht.none)}copy(e=null){return e==this.content?this:new Ap(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Ap(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return re.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),a=i.start(s),c=i.node(s).content.cut(i.pos-a,o.pos-a);return new re(c,i.depth-s,o.depth-s)}replace(e,n,r){return IO(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return kl.resolveCached(this,e)}resolveNoCache(e){return kl.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Mw(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=V.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ht.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!ht.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=V.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};qi.prototype.text=void 0;class Pu extends qi{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Mw(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Pu(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Pu(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Mw(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Uo{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new FO(e,n);if(r.next==null)return Uo.empty;let i=Aw(r);r.next&&r.err("Unexpected trailing text");let o=VO(qO(i));return GO(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,a){let l=s.matchFragment(e,r);if(l&&(!n||l.validEnd))return V.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:d}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let h=o(d,a.concat(u));if(h)return h}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let a=i;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:l}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}Uo.empty=new Uo(!0);class FO{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Aw(t){let e=[];do e.push(zO(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function zO(t){let e=[];do e.push(HO(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function HO(t){let e=jO(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=WO(t,e);else break;return e}function W0(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function WO(t,e){let n=W0(t),r=n;return t.eat(",")&&(t.next!="}"?r=W0(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function UO(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.isInGroup(e)&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function jO(t){if(t.eat("(")){let e=Aw(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=UO(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function qO(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,a,l){let c={term:l,to:a};return e[s].push(c),c}function i(s,a){s.forEach(l=>l.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(o(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=o(s.exprs[l],a);if(l==s.exprs.length-1)return c;i(c,a=n())}else if(s.type=="star"){let l=n();return r(a,l),i(o(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return i(o(s.expr,a),l),i(o(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(o(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let u=n();i(o(s.expr,l),u),l=u}if(s.max==-1)i(o(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let u=n();r(l,u),i(o(s.expr,l),u),l=u}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function Nw(t,e){return e-t}function U0(t,e){let n=[];return r(e),n.sort(Nw);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:a,to:l}=o[s];!a&&n.indexOf(l)==-1&&r(l)}}}function VO(t){let e=Object.create(null);return n(U0(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);U0(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=e[r.join(",")]=new Uo(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let a=i[s][1].sort(Nw);o.next.push({type:i[s][0],next:e[a.join(",")]||n(a)})}return o}}function GO(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];s.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Ow(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Lw(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Rw(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function Iw(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new YO(t,r,e[r]);return n}let j0=class Dw{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Iw(e,r.attrs),this.defaultAttrs=Ow(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Uo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Lw(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new qi(this,this.computeAttrs(e),V.from(n),ht.setFrom(r))}createChecked(e=null,n,r){return n=V.from(n),this.checkContent(n),new qi(this,this.computeAttrs(e),n,ht.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=V.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(V.empty,!0);return o?new qi(this,e,n.append(o),ht.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Rw(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:ht.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new Dw(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function KO(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class YO{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?KO(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class dh{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=Iw(e,i.attrs),this.excluded=null;let o=Ow(this.attrs);this.instance=o?new ht(this,o):null}create(e=null){return!e&&this.instance?this.instance:new ht(this,Lw(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new dh(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Rw(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Bw{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Jt.from(e.nodes),n.marks=Jt.from(e.marks||{}),this.nodes=j0.compile(this.spec.nodes,this),this.marks=dh.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",a=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=Uo.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=a=="_"?null:a?q0(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:q0(this,s.split(" "))}this.nodeFromJSON=i=>qi.fromJSON(this,i),this.markFromJSON=i=>ht.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof j0){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Pu(r,r.defaultAttrs,e,ht.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function q0(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function XO(t){return t.tag!=null}function ZO(t){return t.style!=null}class Vi{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(XO(i))this.tags.push(i);else if(ZO(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new G0(this,n,!1);return r.addAll(e,ht.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new G0(this,n,!0);return r.addAll(e,ht.none,n.from,n.to),re.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(eL(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=K0(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=K0(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Vi(e,Vi.schemaRules(e)))}}const Pw={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},JO={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},$w={ol:!0,ul:!0},Sl=1,Np=2,il=4;function V0(t,e,n){return e!=null?(e?Sl:0)|(e==="full"?Np:0):t&&t.whitespace=="pre"?Sl|Np:n&~il}class Tc{constructor(e,n,r,i,o,s){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=ht.none,this.match=o||(s&il?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(V.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Sl)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=V.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(V.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Pw.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class G0{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,s=V0(null,n.preserveWhitespace,0)|(r?il:0);i?o=new Tc(i.type,i.attrs,ht.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new Tc(null,null,ht.none,!0,null,s):o=new Tc(e.schema.topNodeType,null,ht.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&Np?"full":this.localPreserveWS||(i.options&Sl)>0,{schema:s}=this.parser;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(s.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(s.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(s.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(s.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(s.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),a;$w.hasOwnProperty(s)&&this.parser.normalizeLists&&QO(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:JO.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(Pw.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),c=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(o),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(o,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,i){let o,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(s,n.attrs||null,r,n.preserveWhitespace);l&&(o=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}o&&this.sync(a)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let s=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];s!=a;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,n);this.findAtPoint(e,o)}findPlace(e,n,r){let i,o;for(let s=this.open,a=0;s>=0;s--){let l=this.nodes[s],c=l.findWrapping(e);if(c&&(!i||i.length>c.length+a)&&(i=c,o=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!i)return null;this.sync(o);for(let s=0;s<i.length;s++)n=this.enterInner(i[s],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let s=ht.none;for(let a of i.concat(e.marks))(o.type?o.type.allowsMarkType(a.type):Y0(a.type,e.type))&&(s=a.addToSet(s));return o.content.push(e.mark(s)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r,!1);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let a=V0(e,o,s.options);s.options&il&&s.content.length==0&&(a|=il);let l=ht.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):Y0(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Tc(e,n,l,i,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Sl)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=o;l--)if(s(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function QO(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&$w.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function eL(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function K0(t){let e={};for(let n in t)e[n]=t[n];return e}function Y0(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||o.indexOf(u)<0&&s(u))return!0}};if(s(i.contentMatch))return!0}}class ls{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=mf(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let a=0,l=0;for(;a<o.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(o[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)i=o.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],u=this.serializeMark(c,s.isInline,n);u&&(o.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=uu(mf(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&uu(mf(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return uu(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ls(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=X0(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return X0(e.marks)}}function X0(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function mf(t){return t.document||window.document}const Z0=new WeakMap;function tL(t){let e=Z0.get(t);return e===void 0&&Z0.set(t,e=nL(t)),e}function nL(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function uu(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=tL(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let a,l=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let h=d.indexOf(" ");h>0?l.setAttributeNS(d.slice(0,h),d.slice(h+1),c[d]):d=="style"&&l.style?l.style.cssText=c[d]:l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let h=e[d];if(h===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:f,contentDOM:p}=uu(t,h,n,r);if(l.appendChild(f),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const Fw=65535,zw=Math.pow(2,16);function rL(t,e){return t+e*zw}function J0(t){return t&Fw}function iL(t){return(t-(t&Fw))/zw}const Hw=1,Ww=2,du=4,Uw=8;class Op{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Uw)>0}get deletedBefore(){return(this.delInfo&(Hw|du))>0}get deletedAfter(){return(this.delInfo&(Ww|du))>0}get deletedAcross(){return(this.delInfo&du)>0}}class Vn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Vn.empty)return Vn.empty}recover(e){let n=0,r=J0(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+iL(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+o],u=this.ranges[a+s],d=l+c;if(e<=d){let h=c?e==l?-1:e==d?1:n:n,f=l+i+(h<0?0:u);if(r)return f;let p=e==(n<0?l:d)?null:rL(a/3,e-l),g=e==l?Ww:e==d?Hw:du;return(n<0?e!=l:e!=d)&&(g|=Uw),new Op(f,g,p)}i+=u-c}return r?e+i:new Op(e+i,0,null)}touches(e,n){let r=0,i=J0(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+o],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],a=s-(this.inverted?o:0),l=s+(this.inverted?0:o),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),o+=u-c}}invert(){return new Vn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Vn.empty:new Vn(e<0?[0,-e,0]:[0,0,e])}}Vn.empty=new Vn([]);class _l{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new _l(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new _l;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this._maps[o],a=s.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new Op(e,i,null)}}const yf=Object.create(null);let bn=class{getMap(){return Vn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=yf[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in yf)throw new RangeError("Duplicate use of step JSON ID "+e);return yf[e]=n,n.prototype.jsonID=e,n}};class Rt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Rt(e,null)}static fail(e){return new Rt(null,e)}static fromReplace(e,n,r,i){try{return Rt.ok(e.replace(n,r,i))}catch(o){if(o instanceof Iu)return Rt.fail(o.message);throw o}}}function ym(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(ym(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return V.fromArray(r)}class zi extends bn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new re(ym(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return Rt.fromReplace(e,this.from,this.to,o)}invert(){return new Sr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new zi(n.pos,r.pos,this.mark)}merge(e){return e instanceof zi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new zi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new zi(n.from,n.to,e.markFromJSON(n.mark))}}bn.jsonID("addMark",zi);class Sr extends bn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new re(ym(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Rt.fromReplace(e,this.from,this.to,r)}invert(){return new zi(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Sr(n.pos,r.pos,this.mark)}merge(e){return e instanceof Sr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Sr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Sr(n.from,n.to,e.markFromJSON(n.mark))}}bn.jsonID("removeMark",Sr);class Hi extends bn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Rt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Rt.fromReplace(e,this.pos,this.pos+1,new re(V.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Hi(this.pos,n.marks[i]);return new Hi(this.pos,this.mark)}}return new jo(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Hi(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Hi(n.pos,e.markFromJSON(n.mark))}}bn.jsonID("addNodeMark",Hi);class jo extends bn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Rt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Rt.fromReplace(e,this.pos,this.pos+1,new re(V.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Hi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new jo(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new jo(n.pos,e.markFromJSON(n.mark))}}bn.jsonID("removeNodeMark",jo);class Ut extends bn{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Lp(e,this.from,this.to)?Rt.fail("Structure replace would overwrite content"):Rt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Vn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ut(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ut(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Ut)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?re.empty:new re(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ut(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?re.empty:new re(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ut(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ut(n.from,n.to,re.fromJSON(e,n.slice),!!n.structure)}}bn.jsonID("replace",Ut);class jt extends bn{constructor(e,n,r,i,o,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=a}apply(e){if(this.structure&&(Lp(e,this.from,this.gapFrom)||Lp(e,this.gapTo,this.to)))return Rt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Rt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Rt.fromReplace(e,this.from,this.to,r):Rt.fail("Content does not fit in gap")}getMap(){return new Vn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new jt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new jt(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new jt(n.from,n.to,n.gapFrom,n.gapTo,re.fromJSON(e,n.slice),n.insert,!!n.structure)}}bn.jsonID("replaceAround",jt);function Lp(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function oL(t,e,n,r){let i=[],o=[],s,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),f=Math.min(c+l.nodeSize,n),p=r.addToSet(d);for(let g=0;g<d.length;g++)d[g].isInSet(p)||(s&&s.to==h&&s.mark.eq(d[g])?s.to=f:i.push(s=new Sr(h,f,d[g])));a&&a.to==h?a.to=f:o.push(a=new zi(h,f,r))}}),i.forEach(l=>t.step(l)),o.forEach(l=>t.step(l))}function sL(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,a)=>{if(!s.isInline)return;o++;let l=null;if(r instanceof dh){let c=s.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let c=Math.min(a+s.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],h;for(let f=0;f<i.length;f++){let p=i[f];p.step==o-1&&d.eq(i[f].style)&&(h=p)}h?(h.to=c,h.step=o):i.push({style:d,from:Math.max(a,e),to:c,step:o})}}}),i.forEach(s=>t.step(new Sr(s.from,s.to,s.style)))}function bm(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),s=[],a=e+1;for(let l=0;l<o.childCount;l++){let c=o.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)s.push(new Ut(a,u,re.empty));else{r=d;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new Sr(a,u,c.marks[h]));if(i&&c.isText&&n.whitespace!="pre"){let h,f=/\r?\n|\r/g,p;for(;h=f.exec(c.text);)p||(p=new re(V.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new Ut(a+h.index,a+h.index+h[0].length,p))}}a=u}if(!r.validEnd){let l=r.fillBefore(V.empty,!0);t.replace(a,a,new re(l,0,0))}for(let l=s.length-1;l>=0;l--)t.step(s[l])}function aL(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function ya(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,o=0;;--r){let s=t.$from.node(r),a=t.$from.index(r)+i,l=t.$to.indexAfter(r)-o;if(r<t.depth&&s.canReplace(a,l,n))return r;if(r==0||s.type.spec.isolating||!aL(s,a,l))break;a&&(i=1),l<s.childCount&&(o=1)}return null}function lL(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),a=i.after(o+1),l=s,c=a,u=V.empty,d=0;for(let p=o,g=!1;p>n;p--)g||r.index(p)>0?(g=!0,u=V.from(r.node(p).copy(u)),d++):l--;let h=V.empty,f=0;for(let p=o,g=!1;p>n;p--)g||i.after(p+1)<i.end(p)?(g=!0,h=V.from(i.node(p).copy(h)),f++):c++;t.step(new jt(l,c,s,a,new re(u.append(h),d,f),u.size-d,!0))}function xm(t,e,n=null,r=t){let i=cL(t,e),o=i&&uL(r,e);return o?i.map(Q0).concat({type:e,attrs:n}).concat(o.map(Q0)):null}function Q0(t){return{type:t,attrs:null}}function cL(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function uL(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:s}function dL(t,e,n){let r=V.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=V.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new jt(i,o,i,o,new re(r,0,0),n.length,!0))}function hL(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,a)=>{let l=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,l)&&fL(t.doc,t.mapping.slice(o).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let f=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);f&&!p?c=!1:!f&&p&&(c=!0)}c===!1&&qw(t,s,a,o),bm(t,t.mapping.slice(o).map(a,1),r,void 0,c===null);let u=t.mapping.slice(o),d=u.map(a,1),h=u.map(a+s.nodeSize,1);return t.step(new jt(d,h,d+1,h-1,new re(V.from(r.create(l,null,s.marks)),0,0),1,!0)),c===!0&&jw(t,s,a,o),!1}})}function jw(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(i.text);){let l=t.mapping.slice(r).map(n+1+o+s.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function qw(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+o);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function fL(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function pL(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new jt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new re(V.from(s),0,0),1,!0))}function gi(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>o;c--,u--){let d=i.node(c),h=i.index(c);if(d.type.spec.isolating)return!1;let f=d.content.cutByIndex(h,d.childCount),p=r&&r[u+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let g=r&&r[u]||d;if(!d.canReplace(h+1,d.childCount)||!g.type.validContent(f))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function gL(t,e,n=1,r){let i=t.doc.resolve(e),o=V.empty,s=V.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){o=V.from(i.node(a).copy(o));let u=r&&r[c];s=V.from(u?u.type.create(u.attrs,s):i.node(a).copy(s))}t.step(new Ut(e,e,new re(o.append(s),n,n),!0))}function oo(t,e){let n=t.resolve(e),r=n.index();return Vw(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function mL(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),s=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function Vw(t,e){return!!(t&&e&&!t.isLeaf&&mL(t,e))}function hh(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,a=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),a++,s=r.node(i).maybeChild(a)):(o=r.node(i).maybeChild(a-1),s=r.node(i+1)),o&&!o.isTextblock&&Vw(o,s)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function yL(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),s=o.node().type;if(i&&s.inlineContent){let u=s.whitespace=="pre",d=!!s.contentMatch.matchType(i);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);qw(t,u.node(),u.before(),a)}s.inlineContent&&bm(t,e+n-1,s,o.node().contentMatchAt(o.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new Ut(c,l.map(e+n,-1),re.empty,!0)),r===!0){let u=t.doc.resolve(c);jw(t,u.node(),u.before(),t.steps.length)}return t}function bL(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function vm(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),c=r.node(s),u=!1;if(o==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function fh(t,e,n=e,r=re.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return Gw(i,o,r)?new Ut(e,n,r):new xL(i,o,r).fit()}function Gw(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class xL{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=V.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=V.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,a=i.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let l=new re(o,s,a);return e>-1?new jt(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Ut(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=bf(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(s?c.matchType(s.type)||(d=c.fillBefore(V.from(s),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:d};if(n==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=bf(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new re(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=bf(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new re(ja(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new re(ja(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let g=0;g<o.length;g++)this.openFrontierNode(o[g]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[n];if(i){for(let g=0;g<i.childCount;g++)u.push(i.child(g));d=d.matchFragment(i)}let f=a.size+e-(s.content.size-s.openEnd);for(;c<a.childCount;){let g=a.child(c),m=d.matchType(g.type);if(!m)break;c++,(c>1||l==0||g.content.size)&&(d=m,u.push(Kw(g.mark(h.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=qa(this.placed,n,V.from(u)),this.frontier[n].match=d,p&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,m=a;g<f;g++){let y=m.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),m=y.content}this.unplaced=p?e==0?re.empty:new re(ja(s.content,e-1,1),e-1,f<0?s.openEnd:e-1):new re(ja(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!xf(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=xf(e,n,i,r,o);if(s){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=xf(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=qa(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=qa(this.placed,this.depth,V.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(V.empty,!0);n.childCount&&(this.placed=qa(this.placed,this.frontier.length,n))}}function ja(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(ja(t.firstChild.content,e-1,n)))}function qa(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(qa(t.lastChild.content,e-1,n)))}function bf(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Kw(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Kw(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(V.empty,!0)))),t.copy(r)}function xf(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!vL(n,o.content,s)?a:null}function vL(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function wL(t){return t.spec.defining||t.spec.definingForContent}function CL(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(Gw(i,o,r))return t.step(new Ut(e,n,r));let s=Xw(i,o);s[s.length-1]==0&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let h=i.depth,f=i.pos-1;h>0;h--,f--){let p=i.node(h).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;s.indexOf(h)>-1?a=h:i.before(h)==f&&s.splice(1,0,-h)}let l=s.indexOf(a),c=[],u=r.openStart;for(let h=r.content,f=0;;f++){let p=h.firstChild;if(c.push(p),f==r.openStart)break;h=p.content}for(let h=u-1;h>=0;h--){let f=c[h],p=wL(f.type);if(p&&!f.sameMarkup(i.node(Math.abs(a)-1)))u=h;else if(p||!f.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let f=(h+u+1)%(r.openStart+1),p=c[f];if(p)for(let g=0;g<s.length;g++){let m=s[(g+l)%s.length],y=!0;m<0&&(y=!1,m=-m);let b=i.node(m-1),C=i.index(m-1);if(b.canReplaceWith(C,C,p.type,p.marks))return t.replace(i.before(m),y?o.after(m):n,new re(Yw(r.content,0,r.openStart,f),f,r.openEnd))}}let d=t.steps.length;for(let h=s.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>d));h--){let f=s[h];f<0||(e=i.before(f),n=o.after(f))}}function Yw(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(Yw(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(V.empty,!0))}return t}function kL(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=bL(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new re(V.from(r),0,0))}function SL(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=Xw(r,i);for(let s=0;s<o.length;s++){let a=o[s],l=s==o.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function Xw(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class $s extends bn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Rt.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Rt.fromReplace(e,this.pos,this.pos+1,new re(V.from(i),0,n.isLeaf?0:1))}getMap(){return Vn.empty}invert(e){return new $s(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new $s(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new $s(n.pos,n.attr,n.value)}}bn.jsonID("attr",$s);class El extends bn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Rt.ok(r)}getMap(){return Vn.empty}invert(e){return new El(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new El(n.attr,n.value)}}bn.jsonID("docAttr",El);let Js=class extends Error{};Js=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Js.prototype=Object.create(Error.prototype);Js.prototype.constructor=Js;Js.prototype.name="TransformError";let wm=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new _l}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Js(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=re.empty){let i=fh(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new re(V.from(r),0,0))}delete(e,n){return this.replace(e,n,re.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return CL(this,e,n,r),this}replaceRangeWith(e,n,r){return kL(this,e,n,r),this}deleteRange(e,n){return SL(this,e,n),this}lift(e,n){return lL(this,e,n),this}join(e,n=1){return yL(this,e,n),this}wrap(e,n){return dL(this,e,n),this}setBlockType(e,n=e,r,i=null){return hL(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return pL(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new $s(e,n,r)),this}setDocAttribute(e,n){return this.step(new El(e,n)),this}addNodeMark(e,n){return this.step(new Hi(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof ht)n.isInSet(r.marks)&&this.step(new jo(e,n));else{let i=r.marks,o,s=[];for(;o=n.isInSet(i);)s.push(new jo(e,o)),i=o.removeFromSet(i);for(let a=s.length-1;a>=0;a--)this.step(s[a])}return this}split(e,n=1,r){return gL(this,e,n,r),this}addMark(e,n,r){return oL(this,e,n,r),this}removeMark(e,n,r){return sL(this,e,n,r),this}clearIncompatible(e,n,r){return bm(this,e,n,r),this}};const vf=Object.create(null);let Ie=class{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Zw(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=re.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=e.mapping.slice(o);e.replaceRange(u.map(l.pos),u.map(c.pos),a?re.empty:n),a==0&&nb(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:a}=i[o],l=e.mapping.slice(r),c=l.map(s.pos),u=l.map(a.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),nb(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new _e(e):_s(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?_s(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):_s(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Kn(e.node(0))}static atStart(e){return _s(e,e,0,0,1)||new Kn(e)}static atEnd(e){return _s(e,e,e.content.size,e.childCount,-1)||new Kn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=vf[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in vf)throw new RangeError("Duplicate use of selection JSON ID "+e);return vf[e]=n,n.prototype.jsonID=e,n}getBookmark(){return _e.between(this.$anchor,this.$head).getBookmark()}};Ie.prototype.visible=!0;class Zw{constructor(e,n){this.$from=e,this.$to=n}}let eb=!1;function tb(t){!eb&&!t.parent.inlineContent&&(eb=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class _e extends Ie{constructor(e,n=e){tb(e),tb(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Ie.near(r);let i=e.resolve(n.map(this.anchor));return new _e(i.parent.inlineContent?i:r,r)}replace(e,n=re.empty){if(super.replace(e,n),n==re.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof _e&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new ph(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new _e(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=Ie.findFrom(n,r,!0)||Ie.findFrom(n,-r,!0);if(o)n=o.$head;else return Ie.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(Ie.findFrom(e,-r,!0)||Ie.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new _e(e,n)}}Ie.jsonID("text",_e);class ph{constructor(e,n){this.anchor=e,this.head=n}map(e){return new ph(e.map(this.anchor),e.map(this.head))}resolve(e){return _e.between(e.resolve(this.anchor),e.resolve(this.head))}}class xe extends Ie{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?Ie.near(o):new xe(o)}content(){return new re(V.from(this.node),0,0)}eq(e){return e instanceof xe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Cm(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new xe(e.resolve(n.anchor))}static create(e,n){return new xe(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}xe.prototype.visible=!1;Ie.jsonID("node",xe);class Cm{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new ph(r,r):new Cm(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&xe.isSelectable(r)?new xe(n):Ie.near(n)}}class Kn extends Ie{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=re.empty){if(n==re.empty){e.delete(0,e.doc.content.size);let r=Ie.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Kn(e)}map(e){return new Kn(e)}eq(e){return e instanceof Kn}getBookmark(){return _L}}Ie.jsonID("all",Kn);const _L={map(){return this},resolve(t){return new Kn(t)}};function _s(t,e,n,r,i,o=!1){if(e.inlineContent)return _e.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let a=e.child(s);if(a.isAtom){if(!o&&xe.isSelectable(a))return xe.create(t,n-(i<0?a.nodeSize:0))}else{let l=_s(t,a,n+i,i<0?a.childCount:0,i,o);if(l)return l}n+=a.nodeSize*i}return null}function nb(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Ut||i instanceof jt))return;let o=t.mapping.maps[r],s;o.forEach((a,l,c,u)=>{s==null&&(s=u)}),t.setSelection(Ie.near(t.doc.resolve(s),n))}const rb=1,Mc=2,ib=4;class EL extends wm{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|rb)&~Mc,this.storedMarks=null,this}get selectionSet(){return(this.updated&rb)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Mc,this}ensureMarks(e){return ht.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Mc)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Mc,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ht.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Ie.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=ib,this}get scrolledIntoView(){return(this.updated&ib)>0}}function ob(t,e){return!e||!t?t:t.bind(e)}class Va{constructor(e,n,r){this.name=e,this.init=ob(n.init,r),this.apply=ob(n.apply,r)}}const TL=[new Va("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Va("selection",{init(t,e){return t.selection||Ie.atStart(e.doc)},apply(t){return t.selection}}),new Va("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Va("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class wf{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=TL.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Va(r.key,r.spec.state,r))})}}class Bs{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=i?i[s].n:0,c=i?i[s].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<s?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Bs(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new EL(this)}static create(e){let n=new wf(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Bs(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new wf(this.schema,e.plugins),r=n.fields,i=new Bs(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new wf(e.schema,e.plugins),o=new Bs(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=qi.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=Ie.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){o[s.name]=c.fromJSON.call(l,e,n[a],o);return}}o[s.name]=s.init(e,o)}}),o}}function Jw(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Jw(i,e,{})),n[r]=i}return n}class Ge{constructor(e){this.spec=e,this.props={},e.props&&Jw(e.props,this,this.props),this.key=e.key?e.key.key:Qw("plugin")}getState(e){return e[this.key]}}const Cf=Object.create(null);function Qw(t){return t in Cf?t+"$"+ ++Cf[t]:(Cf[t]=0,t+"$")}class Je{constructor(e="key"){this.key=Qw(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const km=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function eC(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const tC=(t,e,n)=>{let r=eC(t,n);if(!r)return!1;let i=Sm(r);if(!i){let s=r.blockRange(),a=s&&ya(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}let o=i.nodeBefore;if(uC(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Qs(o,"end")||xe.isSelectable(o)))for(let s=r.depth;;s--){let a=fh(t.doc,r.before(s),r.after(s),re.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Qs(o,"end")?Ie.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):xe.create(l.doc,i.pos-o.nodeSize)),e(l.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},ML=(t,e,n)=>{let r=eC(t,n);if(!r)return!1;let i=Sm(r);return i?nC(t,i,e):!1},AL=(t,e,n)=>{let r=iC(t,n);if(!r)return!1;let i=_m(r);return i?nC(t,i,e):!1};function nC(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let s=e.nodeAfter,a=s,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=fh(t.doc,o,l,re.empty);if(!c||c.from!=o||c instanceof Ut&&c.slice.size>=l-o)return!1;if(n){let u=t.tr.step(c);u.setSelection(_e.create(u.doc,o)),n(u.scrollIntoView())}return!0}function Qs(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const rC=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=Sm(r)}let s=o&&o.nodeBefore;return!s||!xe.isSelectable(s)?!1:(e&&e(t.tr.setSelection(xe.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Sm(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function iC(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const oC=(t,e,n)=>{let r=iC(t,n);if(!r)return!1;let i=_m(r);if(!i)return!1;let o=i.nodeAfter;if(uC(t,i,e,1))return!0;if(r.parent.content.size==0&&(Qs(o,"start")||xe.isSelectable(o))){let s=fh(t.doc,r.before(),r.after(),re.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(Qs(o,"start")?Ie.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):xe.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},sC=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=_m(r)}let s=o&&o.nodeAfter;return!s||!xe.isSelectable(s)?!1:(e&&e(t.tr.setSelection(xe.create(t.doc,o.pos)).scrollIntoView()),!0)};function _m(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const NL=(t,e)=>{let n=t.selection,r=n instanceof xe,i;if(r){if(n.node.isTextblock||!oo(t.doc,n.from))return!1;i=n.from}else if(i=hh(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(xe.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},OL=(t,e)=>{let n=t.selection,r;if(n instanceof xe){if(n.node.isTextblock||!oo(t.doc,n.to))return!1;r=n.to}else if(r=hh(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},LL=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&ya(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},aC=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Em(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const RL=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=Em(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,s.createAndFill());l.setSelection(Ie.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},lC=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Kn||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Em(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(s,o.createAndFill());a.setSelection(_e.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},cC=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(gi(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&ya(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function IL(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof xe&&e.selection.node.isBlock)return!r.parentOffset||!gi(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],s,a,l=!1,c=!1;for(let f=r.depth;;f--)if(r.node(f).isBlock){l=r.end(f)==r.pos+(r.depth-f),c=r.start(f)==r.pos-(r.depth-f),a=Em(r.node(f-1).contentMatchAt(r.indexAfter(f-1))),o.unshift(l&&a?{type:a}:null),s=f;break}else{if(f==1)return!1;o.unshift(null)}let u=e.tr;(e.selection instanceof _e||e.selection instanceof Kn)&&u.deleteSelection();let d=u.mapping.map(r.pos),h=gi(u.doc,d,o.length,o);if(h||(o[0]=a?{type:a}:null,h=gi(u.doc,d,o.length,o)),!h)return!1;if(u.split(d,o.length,o),!l&&c&&r.node(s).type!=a){let f=u.mapping.map(r.before(s)),p=u.doc.resolve(f);a&&r.node(s-1).canReplaceWith(p.index(),p.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(s)),a)}return n&&n(u.scrollIntoView()),!0}}const DL=IL(),BL=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(xe.create(t.doc,i))),!0)};function PL(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||oo(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function uC(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,s,a,l=i.type.spec.isolating||o.type.spec.isolating;if(!l&&PL(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(a=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&a.matchType(s[0]||o.type).validEnd){if(n){let f=e.pos+o.nodeSize,p=V.empty;for(let y=s.length-1;y>=0;y--)p=V.from(s[y].create(null,p));p=V.from(i.copy(p));let g=t.tr.step(new jt(e.pos-1,f,e.pos,f,new re(p,1,0),s.length,!0)),m=g.doc.resolve(f+2*s.length);m.nodeAfter&&m.nodeAfter.type==i.type&&oo(g.doc,m.pos)&&g.join(m.pos),n(g.scrollIntoView())}return!0}let u=o.type.spec.isolating||r>0&&l?null:Ie.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),h=d&&ya(d);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(d,h).scrollIntoView()),!0;if(c&&Qs(o,"start",!0)&&Qs(i,"end")){let f=i,p=[];for(;p.push(f),!f.isTextblock;)f=f.lastChild;let g=o,m=1;for(;!g.isTextblock;g=g.firstChild)m++;if(f.canReplace(f.childCount,f.childCount,g.content)){if(n){let y=V.empty;for(let C=p.length-1;C>=0;C--)y=V.from(p[C].copy(y));let b=t.tr.step(new jt(e.pos-p.length,e.pos+o.nodeSize,e.pos+m,e.pos+o.nodeSize-m,new re(y,p.length,0),0,!0));n(b.scrollIntoView())}return!0}}return!1}function dC(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(_e.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const $L=dC(-1),FL=dC(1);function zL(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=s&&xm(s,t,e);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function sb(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[o];n.doc.nodesBetween(s,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];o.setBlockType(a,l,t,e)}r(o.scrollIntoView())}return!0}}function Tm(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}Tm(km,tC,rC);Tm(km,oC,sC);Tm(aC,lC,cC,DL);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function HL(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o);if(!s)return!1;let a=r?n.tr:null;return WL(a,s,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function WL(t,e,n,r=null){let i=!1,o=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=s.resolve(e.start-2);o=new Bu(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Bu(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=xm(o,n,r,e);return a?(t&&UL(t,e,a,i,n),!0):!1}function UL(t,e,n,r,i){let o=V.empty;for(let u=n.length-1;u>=0;u--)o=V.from(n[u].type.create(n[u].attrs,o));t.step(new jt(e.start-(r?2:0),e.end,e.start,e.end,new re(o,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==i&&(s=u+1);let a=n.length-s,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,h=!0;u<d;u++,h=!1)!h&&gi(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function jL(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?qL(e,n,t,o):VL(e,n,o):!0:!1}}function qL(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new jt(o-1,s,o,s,new re(V.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Bu(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const a=ya(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(o,-1)-1);return oo(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function VL(t,e,n){let r=t.tr,i=n.parent;for(let f=n.end,p=n.endIndex-1,g=n.startIndex;p>g;p--)f-=i.child(p).nodeSize,r.delete(f-1,f+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?V.empty:V.from(i))))return!1;let d=o.pos,h=d+s.nodeSize;return r.step(new jt(d-(a?1:0),h+(l?1:0),d+1,h-1,new re((a?V.empty:V.from(i.copy(V.empty))).append(l?V.empty:V.from(i.copy(V.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function GL(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=V.from(c?t.create():null),d=new re(V.from(t.create(null,V.from(a.type.create(null,u)))),c?3:1,0),h=o.start,f=o.end;n(e.tr.step(new jt(h-(c?3:1),f,h,f,d,1,!0)).scrollIntoView())}return!0}}const tn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},ea=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Rp=null;const fi=function(t,e,n){let r=Rp||(Rp=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},KL=function(){Rp=null},qo=function(t,e,n,r){return n&&(ab(t,e,n,r,-1)||ab(t,e,n,r,1))},YL=/^(img|br|input|textarea|hr)$/i;function ab(t,e,n,r,i){for(var o;;){if(t==n&&e==r)return!0;if(e==(i<0?0:ir(t))){let s=t.parentNode;if(!s||s.nodeType!=1||ec(t)||YL.test(t.nodeName)||t.contentEditable=="false")return!1;e=tn(t)+(i<0?0:1),t=s}else if(t.nodeType==1){let s=t.childNodes[e+(i<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((o=s.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=i;else return!1;else t=s,e=i<0?ir(t):0}else return!1}}function ir(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function XL(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=ir(t)}else if(t.parentNode&&!ec(t))e=tn(t),t=t.parentNode;else return null}}function ZL(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!ec(t))e=tn(t)+1,t=t.parentNode;else return null}}function JL(t,e,n){for(let r=e==0,i=e==ir(t);r||i;){if(t==n)return!0;let o=tn(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==ir(t)}}function ec(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const gh=function(t){return t.focusNode&&qo(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function _o(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function QL(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function eR(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(ir(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(ir(r.startContainer),r.startOffset)}}}const Kr=typeof navigator<"u"?navigator:null,lb=typeof document<"u"?document:null,so=Kr&&Kr.userAgent||"",Ip=/Edge\/(\d+)/.exec(so),hC=/MSIE \d/.exec(so),Dp=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(so),Bn=!!(hC||Dp||Ip),Gi=hC?document.documentMode:Dp?+Dp[1]:Ip?+Ip[1]:0,sr=!Bn&&/gecko\/(\d+)/i.test(so);sr&&+(/Firefox\/(\d+)/.exec(so)||[0,0])[1];const Bp=!Bn&&/Chrome\/(\d+)/.exec(so),fn=!!Bp,fC=Bp?+Bp[1]:0,_n=!Bn&&!!Kr&&/Apple Computer/.test(Kr.vendor),ta=_n&&(/Mobile\/\w+/.test(so)||!!Kr&&Kr.maxTouchPoints>2),nr=ta||(Kr?/Mac/.test(Kr.platform):!1),tR=Kr?/Win/.test(Kr.platform):!1,pi=/Android \d/.test(so),tc=!!lb&&"webkitFontSmoothing"in lb.documentElement.style,nR=tc?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function rR(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function ri(t,e){return typeof t=="number"?t:t[e]}function iR(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function cb(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=ea(s);continue}let a=s,l=a==o.body,c=l?rR(o):iR(a),u=0,d=0;if(e.top<c.top+ri(r,"top")?d=-(c.top-e.top+ri(i,"top")):e.bottom>c.bottom-ri(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+ri(i,"top")-c.top:e.bottom-c.bottom+ri(i,"bottom")),e.left<c.left+ri(r,"left")?u=-(c.left-e.left+ri(i,"left")):e.right>c.right-ri(r,"right")&&(u=e.right-c.right+ri(i,"right")),u||d)if(l)o.defaultView.scrollBy(u,d);else{let f=a.scrollLeft,p=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let g=a.scrollLeft-f,m=a.scrollTop-p;e={left:e.left-g,top:e.top-m,right:e.right-g,bottom:e.bottom-m}}let h=l?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(h))break;s=h=="absolute"?s.offsetParent:ea(s)}}function oR(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=t.root.elementFromPoint(o,s);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:pC(t.dom)}}function pC(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=ea(r));return e}function sR({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;gC(n,r==0?0:r-e)}function gC(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let vs=null;function aR(t){if(t.setActive)return t.setActive();if(vs)return t.focus(vs);let e=pC(t);t.focus(vs==null?{get preventScroll(){return vs={preventScroll:!0},!0}}:void 0),vs||(vs=!1,gC(e,0))}function mC(t,e){let n,r=2e8,i,o=0,s=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=fi(u).getClientRects();else continue;for(let f=0;f<h.length;f++){let p=h[f];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);let g=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(g<r){n=u,r=g,i=g&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&g&&(o=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(o=d+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?lR(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:mC(n,i)}function lR(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=Oi(r,1);if(o.top!=o.bottom&&Mm(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function Mm(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function cR(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function uR(t,e,n){let{node:r,offset:i}=mC(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function dR(t,e,n,r){let i=-1;for(let o=e,s=!1;o!=t.dom;){let a=t.docView.nearestDesc(o,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!s&&l.left>r.left||l.top>r.top?i=a.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),s=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;o=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function yC(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=t.childNodes[o];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Mm(e,c))return yC(s,e,c)}}if((o=(o+1)%r)==i)break}return t}function hR(t,e){let n=t.dom.ownerDocument,r,i=0,o=eR(n,e.left,e.top);o&&({node:r,offset:i}=o);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=t.dom.getBoundingClientRect();if(!Mm(e,c)||(s=yC(t.dom,e,c),!s))return null}if(_n)for(let c=s;r&&c;c=ea(c))c.draggable&&(r=void 0);if(s=cR(s,e),r){if(sr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;tc&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=dR(t,r,i,e))}a==null&&(a=uR(t,s,e));let l=t.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function ub(t){return t.top<t.bottom||t.left<t.right}function Oi(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(ub(r))return r}return Array.prototype.find.call(n,ub)||t.getBoundingClientRect()}const fR=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function bC(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=tc||sr;if(r.nodeType==3)if(s&&(fR.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=Oi(fi(r,i,i),n);if(sr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=Oi(fi(r,i-1,i-1),-1);if(c.top==l.top){let u=Oi(fi(r,i,i+1),-1);if(u.top!=l.top)return Ta(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,Ta(Oi(fi(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==ir(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return kf(l.getBoundingClientRect(),!1)}if(o==null&&i<ir(r)){let l=r.childNodes[i];if(l.nodeType==1)return kf(l.getBoundingClientRect(),!0)}return kf(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==ir(r))){let l=r.childNodes[i-1],c=l.nodeType==3?fi(l,ir(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Ta(Oi(c,1),!1)}if(o==null&&i<ir(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?fi(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return Ta(Oi(c,-1),!0)}return Ta(Oi(r.nodeType==3?fi(r):r,-n),n>=0)}function Ta(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function kf(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function xC(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function pR(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return xC(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.contentDOM||a.dom;break}o=a.dom.parentNode}let s=bC(t,i.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=fi(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const gR=/[\u0590-\u08ac]/;function mR(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=t.domSelection();return a?!gR.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?o:s:xC(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let f=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:g}=t.domSelectionRange(),m=p&&!f.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==g;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),m}):r.pos==r.start()||r.pos==r.end()}let db=null,hb=null,fb=!1;function yR(t,e,n){return db==e&&hb==n?fb:(db=e,hb=n,fb=n=="up"||n=="down"?pR(t,e,n):mR(t,e,n))}const ar=0,pb=1,Eo=2,Yr=3;class nc{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=ar,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>tn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let a=i.children[s];if(a.size){i=a;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.size;if(a>e||s instanceof wC){i=e-o;break}o=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof vC&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?tn(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?tn(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,a=0;;a++){let l=this.children[a],c=s+l.size;if(i==-1&&e<=c){let u=s+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=s;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){i=tn(h.dom)+1;break}e-=h.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=tn(d.dom);break}n+=d.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let f=0,p=0;f<this.children.length;f++){let g=this.children[f],m=p+g.size;if(o>p&&s<m)return g.setSelection(e-p-g.border,n-p-g.border,r,i);p=m}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((sr||_n)&&e==n){let{node:f,offset:p}=a;if(f.nodeType==3){if(d=!!(p&&f.nodeValue[p-1]==`
`),d&&p==f.nodeValue.length)for(let g=f,m;g;g=g.parentNode){if(m=g.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:tn(m)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=f.childNodes[p-1];d=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(sr&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let f=u.focusNode.childNodes[u.focusOffset];f&&f.contentEditable=="false"&&(i=!0)}if(!(i||d&&_n)&&qo(a.node,a.offset,u.anchorNode,u.anchorOffset)&&qo(l.node,l.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==n)&&!(d&&sr)){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let p=a;a=l,l=p}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let a=r+o.border,l=s-o.border;if(e>=a&&n<=l){this.dirty=e==r||n==s?Eo:pb,e==a&&n==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Yr:o.markDirty(e-a,n-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Eo:Yr}r=s}this.dirty=Eo}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Eo:pb;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class vC extends nc{constructor(e,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==ar&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class bR extends nc{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Vo extends nc{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=ls.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Vo(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Yr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Yr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ar){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ar}}slice(e,n,r){let i=Vo.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=$p(o,n,s,r)),e>0&&(o=$p(o,0,e,r));for(let a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ki extends nc{constructor(e,n,r,i,o,s,a,l,c){super(e,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,o,s){let a=o.nodeViews[n.type.name],l,c=a&&a(n,o,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=ls.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=SC(u,r,n),c?l=new xR(e,n,r,i,u,d||null,h,c,o,s+1):n.isText?new mh(e,n,r,i,u,h,o):new Ki(e,n,r,i,u,d||null,h,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>V.empty)}return e}matchesNode(e,n,r){return this.dirty==ar&&e.eq(this.node)&&$u(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new wR(this,s&&s.node,e);SR(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?ht.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,d,h)=>{l.syncToMarks(c.marks,r,e);let f;l.findNodeMatch(c,u,d,h)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(f=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(c,u,d,f,e)||l.updateNextNode(c,u,d,e,h,i)||l.addNode(c,u,d,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Eo)&&(s&&this.protectLocalComposition(e,s),CC(this.contentDOM,this.children,e),ta&&_R(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof _e)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,a=ER(this.node.content,s,r-n,i-n);return a<0?null:{node:o,pos:a,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new bR(this,o,n,i);e.input.compositionNodes.push(s),this.children=$p(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==Yr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=ar}updateOuterDeco(e){if($u(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=kC(this.dom,this.nodeDOM,Pp(this.outerDeco,this.node,n),Pp(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function gb(t,e,n,r,i){SC(r,e,t);let o=new Ki(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class mh extends Ki{constructor(e,n,r,i,o,s,a){super(e,n,r,i,o,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Yr||this.dirty!=ar&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ar||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=ar,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new mh(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Yr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class wC extends nc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ar&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class xR extends Ki{constructor(e,n,r,i,o,s,a,l,c,u){super(e,n,r,i,o,s,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==Yr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function CC(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=mb(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(s instanceof Vo){let l=r?r.previousSibling:t.lastChild;CC(s.contentDOM,s.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=mb(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const ol=function(t){t&&(this.nodeName=t)};ol.prototype=Object.create(null);const To=[new ol];function Pp(t,e,n){if(t.length==0)return To;let r=n?To[0]:new ol,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new ol(s.nodeName));for(let a in s){let l=s[a];l!=null&&(n&&i.length==1&&i.push(r=new ol(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function kC(t,e,n,r){if(n==To&&r==To)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(o){let l;a&&a.nodeName==s.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=To[0]),i=l}vR(i,a||To[0],s)}return i}function vR(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function SC(t,e,n){return kC(t,t,To,Pp(e,n,t.nodeType!=1))}function $u(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function mb(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class wR{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=CR(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=ar,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[o])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Vo.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))o=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let s=this.top.children[i];return s.dirty==Yr&&s.dom==s.contentDOM&&(s.dirty=Eo),s.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Ki){let c=this.preMatch.matched.get(l);if(c!=null&&c!=o)return!1;let u=l.dom,d,h=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Yr&&$u(n,l.outerDeco));if(!h&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(l,e,n,r,i,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Eo,d.updateChildren(i,s+1),d.dirty=ar),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!$u(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Ki.create(this.top,n,r,i,o,s);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,o){let s=Ki.create(this.top,e,n,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new vC(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Vo;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof mh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((_n||fn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new wC(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function CR(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof Vo)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function kR(t,e){return t.type.side-e.type.side}function SR(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(o,u),c),o+=u.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,d;for(;s<i.length&&i[s].to==o;){let m=i[s++];m.widget&&(u?(d||(d=[u])).push(m):u=m)}if(u)if(d){d.sort(kR);for(let m=0;m<d.length;m++)n(d[m],c,!!l)}else n(u,c,!!l);let h,f;if(l)f=-1,h=l,l=null;else if(c<t.childCount)f=c,h=t.child(c++);else break;for(let m=0;m<a.length;m++)a[m].to<=o&&a.splice(m--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let p=o+h.nodeSize;if(h.isText){let m=p;s<i.length&&i[s].from<m&&(m=i[s].from);for(let y=0;y<a.length;y++)a[y].to<m&&(m=a[y].to);m<p&&(l=h.cut(m-o),h=h.cut(0,m-o),p=m,f=-1)}else for(;s<i.length&&i[s].to<p;)s++;let g=h.isInline&&!h.isLeaf?a.filter(m=>!m.inline):a.slice();r(h,g,e.forChild(o,h),f),o=p}}function _R(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function ER(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<t.childCount;){let c=t.child(i++);if(o+=c.nodeSize,!c.isText)break;l+=c.text}if(o>=n){if(o>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function $p(t,e,n,r,i){let o=[];for(let s=0,a=0;s<t.length;s++){let l=t[s],c=a,u=a+=l.size;c>=n||u<=e?o.push(l):(c<e&&o.push(l.slice(0,e-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(l.slice(n-c,l.size,r)))}return o}function Am(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(gh(n)){for(l=s;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&xe.isSelectable(d)&&i.parent&&!(d.isInline&&JL(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;c=new xe(s==h?a:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=s,h=s;for(let f=0;f<n.rangeCount;f++){let p=n.getRangeAt(f);d=Math.min(d,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(d<0)return null;[l,s]=h==t.state.selection.anchor?[h,d]:[d,h],a=r.resolve(s)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!o?1:-1;c=Nm(t,u,a,d)}return c}function _C(t){return t.editable?t.hasFocus():TC(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function mi(t,e=!1){let n=t.state.selection;if(EC(t,n),!!_C(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&fn){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&qo(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)MR(t);else{let{anchor:r,head:i}=n,o,s;yb&&!(n instanceof _e)&&(n.$from.parent.inlineContent||(o=bb(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=bb(t,n.to))),t.docView.setSelection(r,i,t,e),yb&&(o&&xb(o),s&&xb(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&TR(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const yb=_n||fn&&fC<63;function bb(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(_n&&i&&i.contentEditable=="false")return Sf(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return Sf(i);if(o)return Sf(o)}}function Sf(t){return t.contentEditable="true",_n&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function xb(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function TR(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!_C(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function MR(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,tn(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Bn&&Gi<=11&&(n.disabled=!0,n.disabled=!1)}function EC(t,e){if(e instanceof xe){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(vb(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else vb(t)}function vb(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Nm(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||_e.between(e,n,r)}function wb(t){return t.editable&&!t.hasFocus()?!1:TC(t)}function TC(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function AR(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return qo(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Fp(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&Ie.findFrom(o,e)}function Ri(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Cb(t,e,n){let r=t.state.selection;if(r instanceof _e)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return Ri(t,new _e(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Fp(t.state,e);return i&&i instanceof xe?Ri(t,i):!1}else if(!(nr&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let a=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(a))&&!s.contentDOM?xe.isSelectable(o)?Ri(t,new xe(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):tc?Ri(t,new _e(t.state.doc.resolve(e<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof xe&&r.node.isInline)return Ri(t,new _e(e>0?r.$to:r.$from));{let i=Fp(t.state,e);return i?Ri(t,i):!1}}}function Fu(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function sl(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function ws(t,e){return e<0?NR(t):OR(t)}function NR(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(sr&&n.nodeType==1&&r<Fu(n)&&sl(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(sl(a,-1))i=n,o=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(MC(n))break;{let a=n.previousSibling;for(;a&&sl(a,-1);)i=n.parentNode,o=tn(a),a=a.previousSibling;if(a)n=a,r=Fu(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?zp(t,n,r):i&&zp(t,i,o)}function OR(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Fu(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(sl(a,1))o=n,s=++r;else break}else{if(MC(n))break;{let a=n.nextSibling;for(;a&&sl(a,1);)o=a.parentNode,s=tn(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=Fu(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&zp(t,o,s)}function MC(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function LR(t,e){for(;t&&e==t.childNodes.length&&!ec(t);)e=tn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function RR(t,e){for(;t&&!e&&!ec(t);)e=tn(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function zp(t,e,n){if(e.nodeType!=3){let o,s;(s=LR(e,n))?(e=s,n=0):(o=RR(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(gh(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&mi(t)},50)}function kb(t,e){let n=t.state.doc.resolve(e);if(!(fn||tR)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Sb(t,e,n){let r=t.state.selection;if(r instanceof _e&&!r.empty||n.indexOf("s")>-1||nr&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=Fp(t.state,e);if(s&&s instanceof xe)return Ri(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,a=r instanceof Kn?Ie.near(s,e):Ie.findFrom(s,e);return a?Ri(t,a):!1}return!1}function _b(t,e){if(!(t.state.selection instanceof _e))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function Eb(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function IR(t){if(!_n||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Eb(t,r,"true"),setTimeout(()=>Eb(t,r,"false"),20)}return!1}function DR(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function BR(t,e){let n=e.keyCode,r=DR(e);if(n==8||nr&&n==72&&r=="c")return _b(t,-1)||ws(t,-1);if(n==46&&!e.shiftKey||nr&&n==68&&r=="c")return _b(t,1)||ws(t,1);if(n==13||n==27)return!0;if(n==37||nr&&n==66&&r=="c"){let i=n==37?kb(t,t.state.selection.from)=="ltr"?-1:1:-1;return Cb(t,i,r)||ws(t,i)}else if(n==39||nr&&n==70&&r=="c"){let i=n==39?kb(t,t.state.selection.from)=="ltr"?1:-1:1;return Cb(t,i,r)||ws(t,i)}else{if(n==38||nr&&n==80&&r=="c")return Sb(t,-1,r)||ws(t,-1);if(n==40||nr&&n==78&&r=="c")return IR(t)||Sb(t,1,r)||ws(t,1);if(r==(nr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Om(t,e){t.someProp("transformCopied",f=>{e=f(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let s=t.someProp("clipboardSerializer")||ls.fromSchema(t.state.schema),a=IC(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=RC[c.nodeName.toLowerCase()]);){for(let f=u.length-1;f>=0;f--){let p=a.createElement(u[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",f=>f(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function AC(t,e,n,r,i){let o=i.parent.type.spec.code,s,a;if(!n&&!e)return null;let l=!!e&&(r||o||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,o||r,t)}),o)return a=new re(V.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",h=>{a=h(a,t,!0)}),a;let d=t.someProp("clipboardTextParser",h=>h(e,i,r,t));if(d)a=d;else{let h=i.marks(),{schema:f}=t.state,p=ls.fromSchema(f);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let m=s.appendChild(document.createElement("p"));g&&m.appendChild(p.serializeNode(f.text(g,h)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),s=zR(n),tc&&HR(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=s.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;s=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Vi.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!PR.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=WR(Tb(a,+u[1],+u[2]),u[4]);else if(a=re.maxOpen($R(a.content,i),!0),a.openStart||a.openEnd){let d=0,h=0;for(let f=a.content.firstChild;d<a.openStart&&!f.type.spec.isolating;d++,f=f.firstChild);for(let f=a.content.lastChild;h<a.openEnd&&!f.type.spec.isolating;h++,f=f.lastChild);a=Tb(a,d,h)}return t.someProp("transformPasted",d=>{a=d(a,t,l)}),a}const PR=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function $R(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(a=>{if(!s)return;let l=i.findWrapping(a.type),c;if(!l)return s=null;if(c=s.length&&o.length&&OC(l,o,a,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=LC(s[s.length-1],o.length));let u=NC(a,l);s.push(u),i=i.matchType(u.type),o=l}}),s)return V.from(s)}return t}function NC(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,V.from(t));return t}function OC(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=OC(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(V.from(NC(n,t,i+1))))}}function LC(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,LC(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(V.empty,!0);return t.copy(n.append(r))}function Hp(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,a=s.content;return t.childCount>1&&(o=0),i<r-1&&(a=Hp(a,e,n,r,i+1,o)),i>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(V.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function Tb(t,e,n){return e<t.openStart&&(t=new re(Hp(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new re(Hp(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const RC={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Mb=null;function IC(){return Mb||(Mb=document.implementation.createHTMLDocument("title"))}let _f=null;function FR(t){let e=window.trustedTypes;return e?(_f||(_f=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),_f.createHTML(t)):t}function zR(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=IC().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&RC[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=FR(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function HR(t){let e=t.querySelectorAll(fn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function WR(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=V.from(l.create(r[a+1],i)),o++,s++}return new re(i,o,s)}const En={},Tn={},UR={touchstart:!0,touchmove:!0};class jR{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function qR(t){for(let e in En){let n=En[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{GR(t,r)&&!Lm(t,r)&&(t.editable||!(r.type in Tn))&&n(t,r)},UR[e]?{passive:!0}:void 0)}_n&&t.dom.addEventListener("input",()=>null),Wp(t)}function Wi(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function VR(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Wp(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Lm(t,r))})}function Lm(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function GR(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function KR(t,e){!Lm(t,e)&&En[e.type]&&(t.editable||!(e.type in Tn))&&En[e.type](t,e)}Tn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!BC(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(pi&&fn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ta&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,_o(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||BR(t,n)?n.preventDefault():Wi(t,"key")};Tn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Tn.keypress=(t,e)=>{let n=e;if(BC(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||nr&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof _e)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),o=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i,o))&&t.dispatch(o()),n.preventDefault()}};function yh(t){return{left:t.clientX,top:t.clientY}}function YR(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Rm(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,a=>s>o.depth?a(t,n,o.nodeAfter,o.before(s),i,!0):a(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function Fs(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function XR(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&xe.isSelectable(r)?(Fs(t,new xe(n)),!0):!1}function ZR(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof xe&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s);if(xe.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(Fs(t,xe.create(t.state.doc,i)),!0):!1}function JR(t,e,n,r,i){return Rm(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?ZR(t,n):XR(t,n))}function QR(t,e,n,r){return Rm(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function eI(t,e,n,r){return Rm(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||tI(t,n,r)}function tI(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Fs(t,_e.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)Fs(t,_e.create(r,a+1,a+1+s.content.size));else if(xe.isSelectable(s))Fs(t,xe.create(r,a));else continue;return!0}}function Im(t){return zu(t)}const DC=nr?"metaKey":"ctrlKey";En.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Im(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&YR(n,t.input.lastClick)&&!n[DC]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o,button:n.button};let s=t.posAtCoords(yh(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new nI(t,s,n,!!r)):(o=="doubleClick"?QR:eI)(t,s.pos,s.inside,n)?n.preventDefault():Wi(t,"pointer"))};class nI{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[DC],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let u=e.state.doc.resolve(n.pos);o=u.parent,s=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof xe&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&sr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Wi(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>mi(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(yh(e))),this.updateAllowDefault(e),this.allowDefault||!n?Wi(this.view,"pointer"):JR(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||_n&&this.mightDrag&&!this.mightDrag.node.isAtom||fn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Fs(this.view,Ie.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Wi(this.view,"pointer")}move(e){this.updateAllowDefault(e),Wi(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}En.touchstart=t=>{t.input.lastTouch=Date.now(),Im(t),Wi(t,"pointer")};En.touchmove=t=>{t.input.lastTouch=Date.now(),Wi(t,"pointer")};En.contextmenu=t=>Im(t);function BC(t,e){return t.composing?!0:_n&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const rI=pi?5e3:-1;Tn.compositionstart=Tn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof _e&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),zu(t,!0),t.markCursor=null;else if(zu(t,!e.selection.empty),sr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let a=t.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}PC(t,rI)};Tn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,PC(t,20))};function PC(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>zu(t),e))}function $C(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=oI());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function iI(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=XL(e.focusNode,e.focusOffset),r=ZL(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function oI(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function zu(t,e=!1){if(!(pi&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),$C(t),e||t.docView&&t.docView.dirty){let n=Am(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function sI(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Tl=Bn&&Gi<15||ta&&nR<604;En.copy=Tn.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=Tl?null:n.clipboardData,s=r.content(),{dom:a,text:l}=Om(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):sI(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function aI(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function lI(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Ml(t,r.value,null,i,e):Ml(t,r.textContent,r.innerHTML,i,e)},50)}function Ml(t,e,n,r,i){let o=AC(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,o||re.empty)))return!0;if(!o)return!1;let s=aI(o),a=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(o);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function FC(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Tn.paste=(t,e)=>{let n=e;if(t.composing&&!pi)return;let r=Tl?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Ml(t,FC(r),r.getData("text/html"),i,n)?n.preventDefault():lI(t,n)};class zC{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const cI=nr?"altKey":"ctrlKey";function HC(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[cI]}En.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(yh(n)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof xe?i.to-1:i.to))){if(r&&r.mightDrag)s=xe.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(s=xe.create(t.state.doc,d.posBefore))}}let a=(s||t.state.selection).content(),{dom:l,text:c,slice:u}=Om(t,a);(!n.dataTransfer.files.length||!fn||fC>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Tl?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Tl||n.dataTransfer.setData("text/plain",c),t.dragging=new zC(u,HC(t,n),s)};En.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Tn.dragover=Tn.dragenter=(t,e)=>e.preventDefault();Tn.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(yh(n));if(!i)return;let o=t.state.doc.resolve(i.pos),s=r&&r.slice;s?t.someProp("transformPasted",p=>{s=p(s,t,!1)}):s=AC(t,FC(n.dataTransfer),Tl?null:n.dataTransfer.getData("text/html"),!1,o);let a=!!(r&&HC(t,n));if(t.someProp("handleDrop",p=>p(t,n,s||re.empty,a))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?vm(t.state.doc,o.pos,s):o.pos;l==null&&(l=o.pos);let c=t.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(h))return;let f=c.doc.resolve(u);if(d&&xe.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new xe(f));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,m,y,b)=>p=b),c.setSelection(Nm(t,f,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};En.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&mi(t)},20))};En.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};En.beforeinput=(t,e)=>{if(fn&&pi&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,_o(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Tn)En[t]=Tn[t];function Al(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Hu{constructor(e,n){this.toDOM=e,this.spec=n||Po,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new St(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Hu&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Al(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Yi{constructor(e,n){this.attrs=e,this.spec=n||Po}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new St(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Yi&&Al(this.attrs,e.attrs)&&Al(this.spec,e.spec)}static is(e){return e.type instanceof Yi}destroy(){}}class Dm{constructor(e,n){this.attrs=e,this.spec=n||Po}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new St(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof Dm&&Al(this.attrs,e.attrs)&&Al(this.spec,e.spec)}destroy(){}}class St{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new St(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new St(e,e,new Hu(n,r))}static inline(e,n,r,i){return new St(e,n,new Yi(r,i))}static node(e,n,r,i){return new St(e,n,new Dm(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Yi}get widget(){return this.type instanceof Hu}}const Es=[],Po={};class at{constructor(e,n){this.local=e.length?e:Es,this.children=n.length?n:Es}static create(e,n){return n.length?Wu(n,e,0,Po):hn}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=e&&(!o||o(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,n-a,r,i+a,o)}}map(e,n,r){return this==hn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Po)}mapInner(e,n,r,i,o){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(s||(s=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?uI(this.children,s||[],e,n,r,i,o):s?new at(s.sort($o),Es):hn}add(e,n){return n.length?this==hn?at.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((a,l)=>{let c=l+r,u;if(u=UC(n,a,c)){for(i||(i=this.children.slice());o<i.length&&i[o]<l;)o+=3;i[o]==l?i[o+2]=i[o+2].addInner(a,u,c+1):i.splice(o,0,l,l+a.nodeSize,Wu(u,a,c+1,Po)),o+=3}});let s=WC(o?jC(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new at(s.length?this.local.concat(s).sort($o):this.local,i||this.children)}remove(e){return e.length==0||this==hn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,a=r[o]+n,l=r[o+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(s,a+1);c!=hn?r[o+2]=c:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let a=0;a<i.length;a++)i[a].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new at(i,r):hn}forChild(e,n){if(this==hn)return this;if(n.isLeaf)return at.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let o=e+1,s=o+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>o&&l.type instanceof Yi){let c=Math.max(o,l.from)-o,u=Math.min(s,l.to)-o;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new at(i.sort($o),Es);return r?new Pi([a,r]):a}return r||hn}eq(e){if(this==e)return!0;if(!(e instanceof at)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Bm(this.localsInner(e))}localsInner(e){if(this==hn)return Es;if(e.inlineContent||!this.local.some(Yi.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Yi||n.push(this.local[r]);return n}forEachSet(e){e(this)}}at.empty=new at([],[]);at.removeOverlap=Bm;const hn=at.empty;class Pi{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Po));return Pi.from(r)}forChild(e,n){if(n.isLeaf)return at.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=hn&&(o instanceof Pi?r=r.concat(o.members):r.push(o))}return Pi.from(r)}eq(e){if(!(e instanceof Pi)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?Bm(r?n:n.sort($o)):Es}static from(e){switch(e.length){case 0:return hn;case 1:return e[0];default:return new Pi(e.every(n=>n instanceof at)?e:e.reduce((n,r)=>n.concat(r instanceof at?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function uI(t,e,n,r,i,o,s){let a=t.slice();for(let c=0,u=o;c<n.maps.length;c++){let d=0;n.maps[c].forEach((h,f,p,g)=>{let m=g-p-(f-h);for(let y=0;y<a.length;y+=3){let b=a[y+1];if(b<0||h>b+u-d)continue;let C=a[y]+u-d;f>=C?a[y+1]=h<=C?-2:-1:h>=u&&m&&(a[y]+=m,a[y+1]+=m)}d+=m}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+o),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let h=n.map(t[c+1]+o,-1),f=h-i,{index:p,offset:g}=r.content.findIndex(d),m=r.maybeChild(p);if(m&&g==d&&g+m.nodeSize==f){let y=a[c+2].mapInner(n,m,u+1,t[c]+o+1,s);y!=hn?(a[c]=d,a[c+1]=f,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=dI(a,t,e,n,i,o,s),u=Wu(c,r,0,s);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let f=u.children[d];for(;h<a.length&&a[h]<f;)h+=3;a.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new at(e.sort($o),a)}function WC(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new St(i.from+e,i.to+e,i.type))}return n}function dI(t,e,n,r,i,o,s){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?n.push(d):s.onRemove&&s.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+o+1);return n}function UC(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function jC(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Wu(t,e,n,r){let i=[],o=!1;e.forEach((a,l)=>{let c=UC(t,a,l+n);if(c){o=!0;let u=Wu(c,a,n+l+1,r);u!=hn&&i.push(l,l+a.nodeSize,u)}});let s=WC(o?jC(t):t,-n).sort($o);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new at(s,i):hn}function $o(t,e){return t.from-e.from||t.to-e.to}function Bm(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),Ab(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),Ab(e,i,r.copy(o.from,r.to)));break}}}return e}function Ab(t,e,n){for(;e<t.length&&$o(n,t[e])>0;)e++;t.splice(e,0,n)}function Ef(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=hn&&e.push(r)}),t.cursorWrapper&&e.push(at.create(t.state.doc,[t.cursorWrapper.deco])),Pi.from(e)}const hI={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},fI=Bn&&Gi<=11;class pI{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class gI{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new pI,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Bn&&Gi<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),fI&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,hI)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(wb(this.view)){if(this.suppressingSelectionUpdates)return mi(this.view);if(Bn&&Gi<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&qo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=ea(o))n.add(o);for(let o=e.anchorNode;o;o=ea(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&wb(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(o=o<0?d.from:Math.min(d.from,o),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(a=!0))}if(sr&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,h]=u;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of u){let f=h.parentNode;f&&f.nodeName=="LI"&&(!d||bI(e,d)!=f)&&h.remove()}}}let c=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&gh(r)&&(c=Am(e))&&c.eq(Ie.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,mi(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),mI(e)),this.handleDOMChange(o,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||mi(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(Bn&&Gi<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(o=h)}let s=i&&i.parentNode==e.target?tn(i)+1:0,a=r.localPosFromDOM(e.target,s,-1),l=o&&o.parentNode==e.target?tn(o):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Nb=new WeakMap,Ob=!1;function mI(t){if(!Nb.has(t)&&(Nb.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=sr,Ob)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Ob=!0}}function Lb(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return qo(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function yI(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Lb(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Lb(t,n):null}function bI(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function xI(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],gh(l)||c.push({node:l.focusNode,offset:l.focusOffset})),fn&&t.input.lastKeyCode===8)for(let m=o;m>i;m--){let y=r.childNodes[m-1],b=y.pmViewDesc;if(y.nodeName=="BR"&&!b){o=m;break}if(!b||b.size)break}let d=t.state.doc,h=t.someProp("domParser")||Vi.fromSchema(t.state.schema),f=d.resolve(s),p=null,g=h.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:o,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:vI,context:f});if(c&&c[0].pos!=null){let m=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=m),p={anchor:m+s,head:y+s}}return{doc:g,sel:p,from:s,to:a}}function vI(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(_n&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||_n&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const wI=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function CI(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let S=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,E=Am(t,S);if(E&&!t.state.selection.eq(E)){if(fn&&pi&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",$=>$(t,_o(13,"Enter"))))return;let R=t.state.tr.setSelection(E);S=="pointer"?R.setMeta("pointer",!0):S=="key"&&R.scrollIntoView(),o&&R.setMeta("composition",o),t.dispatch(R)}return}let s=t.state.doc.resolve(e),a=s.sharedDepth(n);e=s.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=xI(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),h,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,f="end"):(h=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let p=_I(d.content,c.doc.content,c.from,h,f);if(p&&t.input.domChangeCount++,(ta&&t.input.lastIOSEnter>Date.now()-225||pi)&&i.some(S=>S.nodeType==1&&!wI.test(S.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",S=>S(t,_o(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof _e&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let S=Rb(t,t.state.doc,c.sel);if(S&&!S.eq(t.state.selection)){let E=t.state.tr.setSelection(S);o&&E.setMeta("composition",o),t.dispatch(E)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof _e&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),Bn&&Gi<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let g=c.doc.resolveNoCache(p.start-c.from),m=c.doc.resolveNoCache(p.endB-c.from),y=u.resolve(p.start),b=g.sameParent(m)&&g.parent.inlineContent&&y.end()>=p.endA;if((ta&&t.input.lastIOSEnter>Date.now()-225&&(!b||i.some(S=>S.nodeName=="DIV"||S.nodeName=="P"))||!b&&g.pos<c.doc.content.size&&(!g.sameParent(m)||!g.parent.inlineContent)&&g.pos<m.pos&&!/\S/.test(c.doc.textBetween(g.pos,m.pos,"","")))&&t.someProp("handleKeyDown",S=>S(t,_o(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&SI(u,p.start,p.endA,g,m)&&t.someProp("handleKeyDown",S=>S(t,_o(8,"Backspace")))){pi&&fn&&t.domObserver.suppressSelectionUpdates();return}fn&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),pi&&!b&&g.start()!=m.start()&&m.parentOffset==0&&g.depth==m.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,m=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(S){return S(t,_o(13,"Enter"))})},20));let C=p.start,v=p.endA,k=S=>{let E=S||t.state.tr.replace(C,v,c.doc.slice(p.start-c.from,p.endB-c.from));if(c.sel){let R=Rb(t,E.doc,c.sel);R&&!(fn&&t.composing&&R.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(R.head==C||R.head==E.mapping.map(v)-1)||Bn&&R.empty&&R.head==C)&&E.setSelection(R)}return o&&E.setMeta("composition",o),E.scrollIntoView()},w;if(b)if(g.pos==m.pos){Bn&&Gi<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>mi(t),20));let S=k(t.state.tr.delete(C,v)),E=u.resolve(p.start).marksAcross(u.resolve(p.endA));E&&S.ensureMarks(E),t.dispatch(S)}else if(p.endA==p.endB&&(w=kI(g.parent.content.cut(g.parentOffset,m.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start())))){let S=k(t.state.tr);w.type=="add"?S.addMark(C,v,w.mark):S.removeMark(C,v,w.mark),t.dispatch(S)}else if(g.parent.child(g.index()).isText&&g.index()==m.index()-(m.textOffset?0:1)){let S=g.parent.textBetween(g.parentOffset,m.parentOffset),E=()=>k(t.state.tr.insertText(S,C,v));t.someProp("handleTextInput",R=>R(t,C,v,S,E))||t.dispatch(E())}else t.dispatch(k());else t.dispatch(k())}function Rb(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Nm(t,e.resolve(n.anchor),e.resolve(n.head))}function kI(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,s,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)o=n[u].removeFromSet(o);if(i.length==1&&o.length==0)a=i[0],s="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&o.length==1)a=o[0],s="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(V.from(c).eq(t))return{mark:a,type:s}}function SI(t,e,n,r,i){if(n-e<=i.pos-r.pos||Tf(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let a=o.nodeAfter;return a!=null&&n==e+a.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(Tf(o,!0,!0));return!s.parent.isTextblock||s.pos>n||Tf(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Tf(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function _I(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:s,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,o-Math.min(s,a));r-=s+l-o}if(s<o&&t.size<e.size){let l=r<=o&&r>=s?o-r:0;o-=l,o&&o<e.size&&Ib(e.textBetween(o-1,o+1))&&(o+=l?1:-1),a=o+(a-s),s=o}else if(a<o){let l=r<=o&&r>=a?o-r:0;o-=l,o&&o<t.size&&Ib(t.textBetween(o-1,o+1))&&(o+=l?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}function Ib(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class qC{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new jR,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Fb),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Pb(this),Bb(this),this.nodeViews=$b(this),this.docView=gb(this.state.doc,Db(this),Ef(this),this.dom,this),this.domObserver=new gI(this,(r,i,o,s)=>CI(this,r,i,o,s)),this.domObserver.start(),qR(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Wp(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Fb),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&($C(this),s=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=$b(this);TI(f,this.nodeViews)&&(this.nodeViews=f,o=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&Wp(this),this.editable=Pb(this),Bb(this);let l=Ef(this),c=Db(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=o||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(i.selection))&&(s=!0);let h=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&oR(this);if(s){this.domObserver.stop();let f=d&&(Bn||fn)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&EI(i.selection,e.selection);if(d){let p=fn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=iI(this)),(o||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=gb(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&AR(this))?mi(this,f):(EC(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&sR(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof xe){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&cb(this,n.getBoundingClientRect(),e)}else cb(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new zC(e.slice,e.move,i<0?void 0:xe.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(i=n?n(a):a))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let a=o[s].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Bn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&aR(this.dom),mi(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return hR(this,e)}coordsAtPos(e,n=1){return bC(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return yR(this,n||this.state,e)}pasteHTML(e,n){return Ml(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Ml(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Om(this,e)}destroy(){this.docView&&(VR(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ef(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,KL())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return KR(this,e)}domSelectionRange(){let e=this.domSelection();return e?_n&&this.root.nodeType===11&&QL(this.dom.ownerDocument)==this.dom&&yI(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}qC.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function Db(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[St.node(0,t.state.doc.content.size,e)]}function Bb(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:St.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Pb(t){return!t.someProp("editable",e=>e(t.state)===!1)}function EI(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function $b(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function TI(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Fb(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Zi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Uu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},MI=typeof navigator<"u"&&/Mac/.test(navigator.platform),AI=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var nn=0;nn<10;nn++)Zi[48+nn]=Zi[96+nn]=String(nn);for(var nn=1;nn<=24;nn++)Zi[nn+111]="F"+nn;for(var nn=65;nn<=90;nn++)Zi[nn]=String.fromCharCode(nn+32),Uu[nn]=String.fromCharCode(nn);for(var Mf in Zi)Uu.hasOwnProperty(Mf)||(Uu[Mf]=Zi[Mf]);function NI(t){var e=MI&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||AI&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Uu:Zi)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const OI=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),LI=typeof navigator<"u"&&/Win/.test(navigator.platform);function RI(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))OI?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function II(t){let e=Object.create(null);for(let n in t)e[RI(n)]=t[n];return e}function Af(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function DI(t){return new Ge({props:{handleKeyDown:Pm(t)}})}function Pm(t){let e=II(t);return function(n,r){let i=NI(r),o,s=e[Af(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[Af(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(LI&&r.ctrlKey&&r.altKey)&&(o=Zi[r.keyCode])&&o!=i){let a=e[Af(o,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var BI=Object.defineProperty,$m=(t,e)=>{for(var n in e)BI(t,n,{get:e[n],enumerable:!0})};function bh(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}var xh=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([s,a])=>[s,(...c)=>{const u=a(...c)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,s=[],a=!!t,l=t||i.tr,c=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(l),s.every(d=>d===!0)),u={...Object.fromEntries(Object.entries(n).map(([d,h])=>[d,(...p)=>{const g=this.buildProps(l,e),m=h(...p)(g);return s.push(m),u}])),run:c};return u}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,o=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>l(...c)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,s={tr:t,editor:r,view:o,state:bh({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...c)=>l(...c)(s)]))}};return s}},VC={};$m(VC,{blur:()=>PI,clearContent:()=>$I,clearNodes:()=>FI,command:()=>zI,createParagraphNear:()=>HI,cut:()=>WI,deleteCurrentNode:()=>UI,deleteNode:()=>jI,deleteRange:()=>qI,deleteSelection:()=>VI,enter:()=>GI,exitCode:()=>KI,extendMarkRange:()=>YI,first:()=>XI,focus:()=>ZI,forEach:()=>JI,insertContent:()=>QI,insertContentAt:()=>nD,joinBackward:()=>oD,joinDown:()=>iD,joinForward:()=>sD,joinItemBackward:()=>aD,joinItemForward:()=>lD,joinTextblockBackward:()=>cD,joinTextblockForward:()=>uD,joinUp:()=>rD,keyboardShortcut:()=>hD,lift:()=>fD,liftEmptyBlock:()=>pD,liftListItem:()=>gD,newlineInCode:()=>mD,resetAttributes:()=>yD,scrollIntoView:()=>bD,selectAll:()=>xD,selectNodeBackward:()=>vD,selectNodeForward:()=>wD,selectParentNode:()=>CD,selectTextblockEnd:()=>kD,selectTextblockStart:()=>SD,setContent:()=>_D,setMark:()=>HD,setMeta:()=>WD,setNode:()=>UD,setNodeSelection:()=>jD,setTextSelection:()=>qD,sinkListItem:()=>VD,splitBlock:()=>GD,splitListItem:()=>KD,toggleList:()=>YD,toggleMark:()=>XD,toggleNode:()=>ZD,toggleWrap:()=>JD,undoInputRule:()=>QD,unsetAllMarks:()=>eB,unsetMark:()=>tB,updateAttributes:()=>nB,wrapIn:()=>rB,wrapInList:()=>iB});var PI=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),$I=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),FI=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),h=c.resolve(u.map(l+a.nodeSize)),f=d.blockRange(h);if(!f)return;const p=ya(f);if(a.type.isTextblock){const{defaultType:g}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(f.start,g)}(p||p===0)&&e.lift(f,p)})}),!0},zI=t=>e=>t(e),HI=()=>({state:t,dispatch:e})=>lC(t,e),WI=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new _e(r.doc.resolve(Math.max(s-1,0)))),!0},UI=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const a=i.before(o),l=i.after(o);t.delete(a,l).scrollIntoView()}return!0}return!1};function It(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var jI=t=>({tr:e,state:n,dispatch:r})=>{const i=It(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const l=o.before(s),c=o.after(s);e.delete(l,c).scrollIntoView()}return!0}return!1},qI=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},VI=()=>({state:t,dispatch:e})=>km(t,e),GI=()=>({commands:t})=>t.keyboardShortcut("Enter"),KI=()=>({state:t,dispatch:e})=>RL(t,e);function Fm(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function ju(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:Fm(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function GC(t,e,n={}){return t.find(r=>r.type===e&&ju(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function zb(t,e,n={}){return!!GC(t,e,n)}function zm(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!GC([...i.node.marks],e,n)))return;let s=i.index,a=t.start()+i.offset,l=s+1,c=a+i.node.nodeSize;for(;s>0&&zb([...t.parent.child(s-1).marks],e,n);)s-=1,a-=t.parent.child(s).nodeSize;for(;l<t.parent.childCount&&zb([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Si(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var YI=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=Si(t,r.schema),{doc:s,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){const d=zm(l,o,e);if(d&&d.from<=c&&d.to>=u){const h=_e.create(s,d.from,d.to);n.setSelection(h)}}return!0},XI=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function KC(t){return t instanceof _e}function Mo(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function YC(t,e=null){if(!e)return null;const n=Ie.atStart(t),r=Ie.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?_e.create(t,Mo(0,i,o),Mo(t.content.size,i,o)):_e.create(t,Mo(e,i,o),Mo(e,i,o))}function XC(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function vh(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var ZI=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{(vh()||XC())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!KC(n.state.selection))return s(),!0;const a=YC(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},JI=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),QI=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),ZC=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&ZC(r)}return t};function Ac(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return ZC(n)}function Nl(t,e,n){if(t instanceof qi||t instanceof V)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return V.fromArray(t.map(a=>e.nodeFromJSON(a)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),Nl("",e,n)}if(i){if(n.errorOnInvalidContent){let s=!1,a="";const l=new Bw({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Vi.fromSchema(l).parseSlice(Ac(t),n.parseOptions):Vi.fromSchema(l).parse(Ac(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const o=Vi.fromSchema(e);return n.slice?o.parseSlice(Ac(t),n.parseOptions).content:o.parse(Ac(t),n.parseOptions)}return Nl("",e,n)}function eD(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Ut||i instanceof jt))return;const o=t.mapping.maps[r];let s=0;o.forEach((a,l,c,u)=>{s===0&&(s=u)}),t.setSelection(Ie.near(t.doc.resolve(s),n))}var tD=t=>!("type"in t),nD=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=m=>{o.emit("contentError",{editor:o,error:m,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Nl(e,o.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(m){l(m)}try{a=Nl(e,o.schema,{parseOptions:c,errorOnInvalidContent:(s=n.errorOnInvalidContent)!=null?s:o.options.enableContentCheck})}catch(m){return l(m),!1}let{from:u,to:d}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},h=!0,f=!0;if((tD(a)?a:[a]).forEach(m=>{m.check(),h=h?m.isText&&m.marks.length===0:!1,f=f?m.isBlock:!1}),u===d&&f){const{parent:m}=r.doc.resolve(u);m.isTextblock&&!m.type.spec.code&&!m.childCount&&(u-=1,d+=1)}let g;if(h){if(Array.isArray(e))g=e.map(m=>m.text||"").join("");else if(e instanceof V){let m="";e.forEach(y=>{y.text&&(m+=y.text)}),g=m}else typeof e=="object"&&e&&e.text?g=e.text:g=e;r.insertText(g,u,d)}else{g=a;const m=r.doc.resolve(u),y=m.node(),b=m.parentOffset===0,C=y.isText||y.isTextblock,v=y.content.size>0;b&&C&&v&&(u=Math.max(0,u-1)),r.replaceWith(u,d,g)}n.updateSelection&&eD(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:g}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:g})}return!0},rD=()=>({state:t,dispatch:e})=>NL(t,e),iD=()=>({state:t,dispatch:e})=>OL(t,e),oD=()=>({state:t,dispatch:e})=>tC(t,e),sD=()=>({state:t,dispatch:e})=>oC(t,e),aD=()=>({state:t,dispatch:e,tr:n})=>{try{const r=hh(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},lD=()=>({state:t,dispatch:e,tr:n})=>{try{const r=hh(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},cD=()=>({state:t,dispatch:e})=>ML(t,e),uD=()=>({state:t,dispatch:e})=>AL(t,e);function JC(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function dD(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))vh()||JC()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var hD=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=dD(t).split(/-(?!$)/),s=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function Ji(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?It(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(d,h)=>{if(d.isText)return;const f=Math.max(r,h),p=Math.min(i,h+d.nodeSize);a.push({node:d,from:f,to:p})});const l=i-r,c=a.filter(d=>s?s.name===d.node.type.name:!0).filter(d=>ju(d.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((d,h)=>d+h.to-h.from,0)>=l}var fD=(t,e={})=>({state:n,dispatch:r})=>{const i=It(t,n.schema);return Ji(n,i,e)?LL(n,r):!1},pD=()=>({state:t,dispatch:e})=>cC(t,e),gD=t=>({state:e,dispatch:n})=>{const r=It(t,e.schema);return jL(r)(e,n)},mD=()=>({state:t,dispatch:e})=>aC(t,e);function wh(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Hb(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var yD=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=wh(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=It(t,r.schema)),a==="mark"&&(s=Si(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{o&&o===c.type&&n.setNodeMarkup(u,void 0,Hb(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(d=>{s===d.type&&n.addMark(u,u+c.nodeSize,s.create(Hb(d.attrs,e)))})})}),!0):!1},bD=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),xD=()=>({tr:t,dispatch:e})=>{if(e){const n=new Kn(t.doc);t.setSelection(n)}return!0},vD=()=>({state:t,dispatch:e})=>rC(t,e),wD=()=>({state:t,dispatch:e})=>sC(t,e),CD=()=>({state:t,dispatch:e})=>BL(t,e),kD=()=>({state:t,dispatch:e})=>FL(t,e),SD=()=>({state:t,dispatch:e})=>$L(t,e);function Up(t,e,n={},r={}){return Nl(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var _D=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:o,dispatch:s,commands:a})=>{const{doc:l}=o;if(r.preserveWhitespace!=="full"){const c=Up(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return s&&o.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!n),!0}return s&&o.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function QC(t,e){const n=Si(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{s.push(...l.marks)});const a=s.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function Hm(t,e){const n=new wm(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function ED(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function qu(t,e){const n=[];return t.descendants((r,i)=>{e(r)&&n.push({node:r,pos:i})}),n}function ek(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,o)=>{n(i)&&r.push({node:i,pos:o})}),r}function tk(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Ch(t){return e=>tk(e.$from,t)}function Se(t,e,n){return t.config[e]===void 0&&t.parent?Se(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Se(t.parent,e,n):null}):t.config[e]}function Wm(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Se(e,"addExtensions",n);return r?[e,...Wm(r())]:e}).flat(10)}function Um(t,e){const n=ls.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function nk(t){return typeof t=="function"}function et(t,e=void 0,...n){return nk(t)?e?t.bind(e)(...n):t(...n):t}function TD(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Ol(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function rk(t){const e=[],{nodeExtensions:n,markExtensions:r}=Ol(t),i=[...n,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage,extensions:i},l=Se(s,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([h,f])=>{e.push({type:d,name:h,attribute:{...o,...f}})})})})}),i.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=Se(s,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const h={...o,...d};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:s.name,name:u,attribute:h})})}),e}function Qe(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const a=o?String(o).split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else if(i==="style"){const a=o?o.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,h]=u.split(":").map(f=>f.trim());c.set(d,h)}),a.forEach(u=>{const[d,h]=u.split(":").map(f=>f.trim());c.set(d,h)}),r[i]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[i]=o}),r},{})}function Ll(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Qe(n,r),{})}function MD(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Wb(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(n):MD(n.getAttribute(s.name));return a==null?o:{...o,[s.name]:a}},{});return{...r,...i}}}}function Ub(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&TD(n)?!1:n!=null))}function jb(t){var e,n,r;const i={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&((n=t==null?void 0:t.attribute)==null?void 0:n.default)!==void 0&&(i.default=t.attribute.default),((r=t==null?void 0:t.attribute)==null?void 0:r.validate)!==void 0&&(i.validate=t.attribute.validate),[t.name,i]}function AD(t,e){var n;const r=rk(t),{nodeExtensions:i,markExtensions:o}=Ol(t),s=(n=i.find(c=>Se(c,"topNode")))==null?void 0:n.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(y=>y.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((y,b)=>{const C=Se(b,"extendNodeSchema",d);return{...y,...C?C(c):{}}},{}),f=Ub({...h,content:et(Se(c,"content",d)),marks:et(Se(c,"marks",d)),group:et(Se(c,"group",d)),inline:et(Se(c,"inline",d)),atom:et(Se(c,"atom",d)),selectable:et(Se(c,"selectable",d)),draggable:et(Se(c,"draggable",d)),code:et(Se(c,"code",d)),whitespace:et(Se(c,"whitespace",d)),linebreakReplacement:et(Se(c,"linebreakReplacement",d)),defining:et(Se(c,"defining",d)),isolating:et(Se(c,"isolating",d)),attrs:Object.fromEntries(u.map(jb))}),p=et(Se(c,"parseHTML",d));p&&(f.parseDOM=p.map(y=>Wb(y,u)));const g=Se(c,"renderHTML",d);g&&(f.toDOM=y=>g({node:y,HTMLAttributes:Ll(y,u)}));const m=Se(c,"renderText",d);return m&&(f.toText=m),[c.name,f]})),l=Object.fromEntries(o.map(c=>{const u=r.filter(m=>m.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((m,y)=>{const b=Se(y,"extendMarkSchema",d);return{...m,...b?b(c):{}}},{}),f=Ub({...h,inclusive:et(Se(c,"inclusive",d)),excludes:et(Se(c,"excludes",d)),group:et(Se(c,"group",d)),spanning:et(Se(c,"spanning",d)),code:et(Se(c,"code",d)),attrs:Object.fromEntries(u.map(jb))}),p=et(Se(c,"parseHTML",d));p&&(f.parseDOM=p.map(m=>Wb(m,u)));const g=Se(c,"renderHTML",d);return g&&(f.toDOM=m=>g({mark:m,HTMLAttributes:Ll(m,u)})),[c.name,f]}));return new Bw({topNode:s,nodes:a,marks:l})}function ND(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function jm(t){return t.sort((n,r)=>{const i=Se(n,"priority")||100,o=Se(r,"priority")||100;return i>o?-1:i<o?1:0})}function ik(t){const e=jm(Wm(t)),n=ND(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function ok(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let a="";return t.nodesBetween(r,i,(l,c,u,d)=>{var h;l.isBlock&&c>r&&(a+=o);const f=s==null?void 0:s[l.type.name];if(f)return u&&(a+=f({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)==null?void 0:h.slice(Math.max(r,c)-c,i-c))}),a}function OD(t,e){const n={from:0,to:t.content.size};return ok(t,n,e)}function sk(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function LD(t,e){const n=It(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,a=>{o.push(a)});const s=o.reverse().find(a=>a.type.name===n.name);return s?{...s.attrs}:{}}function ak(t,e){const n=wh(typeof e=="string"?e:e.name,t.schema);return n==="node"?LD(t,e):n==="mark"?QC(t,e):{}}function RD(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function ID(t){const e=RD(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,s)=>s!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function qm(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,o)=>{const s=[];if(i.ranges.length)i.forEach((a,l)=>{s.push({from:a,to:l})});else{const{from:a,to:l}=n[o];if(a===void 0||l===void 0)return;s.push({from:a,to:l})}s.forEach(({from:a,to:l})=>{const c=e.slice(o).map(a,-1),u=e.slice(o).map(l),d=e.invert().map(c,-1),h=e.invert().map(u);r.push({oldRange:{from:d,to:h},newRange:{from:c,to:u}})})}),ID(r)}function Vm(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),s=zm(o,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(t,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}var DD=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let o=r,s=null;for(;o>0&&s===null;){const a=i.node(o);(a==null?void 0:a.type.name)===e?s=a:o-=1}return[s,o]};function Nf(t,e){return e.nodes[t]||e.marks[t]||null}function hu(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}var BD=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,s,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)==null?void 0:c.call(l,{node:i,pos:o,parent:s,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-o))}),n};function jp(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?Si(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>o?o.name===d.type.name:!0).find(d=>ju(d.attrs,n,{strict:!1}));let s=0;const a=[];if(i.forEach(({$from:d,$to:h})=>{const f=d.pos,p=h.pos;t.doc.nodesBetween(f,p,(g,m)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(f,m),b=Math.min(p,m+g.nodeSize),C=b-y;s+=C,a.push(...g.marks.map(v=>({mark:v,from:y,to:b})))})}),s===0)return!1;const l=a.filter(d=>o?o.name===d.mark.type.name:!0).filter(d=>ju(d.mark.attrs,n,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),c=a.filter(d=>o?d.mark.type!==o&&d.mark.type.excludes(o):!0).reduce((d,h)=>d+h.to-h.from,0);return(l>0?l+c:l)>=s}function PD(t,e,n={}){if(!e)return Ji(t,null,n)||jp(t,null,n);const r=wh(e,t.schema);return r==="node"?Ji(t,e,n):r==="mark"?jp(t,e,n):!1}var $D=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const o=Ch(a=>a.type.name===e)(t.selection);if(!o)return!1;const s=t.doc.resolve(o.pos+1);return i.pos+1===s.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},FD=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function qb(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Vb(t,e){const{nodeExtensions:n}=Ol(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=et(Se(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function kh(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(kh(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function lk(t){return t instanceof xe}function zD(t,e,n){var r;const{selection:i}=e;let o=null;if(KC(i)&&(o=i.$cursor),o){const a=(r=t.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(c=>c.type.excludes(n)))}const{ranges:s}=i;return s.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,h)=>{if(c)return!1;if(u.isInline){const f=!h||h.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(g=>g.type.excludes(n));c=f&&p}return!c}),c})}var HD=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:a}=o,l=Si(t,r.schema);if(i)if(s){const c=QC(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(h,f)=>{const p=Math.max(f,u),g=Math.min(f+h.nodeSize,d);h.marks.find(y=>y.type===l)?h.marks.forEach(y=>{l===y.type&&n.addMark(p,g,l.create({...y.attrs,...e}))}):n.addMark(p,g,l.create(e))})});return zD(r,n,l)},WD=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),UD=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=It(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:a})=>sb(o,{...s,...e})(n)?!0:a.clearNodes()).command(({state:a})=>sb(o,{...s,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},jD=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Mo(t,0,r.content.size),o=xe.create(r,i);e.setSelection(o)}return!0},qD=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=_e.atStart(r).from,a=_e.atEnd(r).to,l=Mo(i,s,a),c=Mo(o,s,a),u=_e.create(r,l,c);e.setSelection(u)}return!0},VD=t=>({state:e,dispatch:n})=>{const r=It(t,e.schema);return GL(r)(e,n)};function Gb(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}var GD=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:a,$to:l}=o,c=i.extensionManager.attributes,u=hu(c,a.node().type.name,a.node().attrs);if(o instanceof xe&&o.node.isBlock)return!a.parentOffset||!gi(s,a.pos)?!1:(r&&(t&&Gb(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:ED(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=d&&h?[{type:h,attrs:u}]:void 0,p=gi(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!p&&gi(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(p=!0,f=h?[{type:h,attrs:u}]:void 0),r){if(p&&(o instanceof _e&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,f),h&&!d&&!a.parentOffset&&a.parent.type!==h)){const g=e.mapping.map(a.before()),m=e.doc.resolve(g);a.node(-1).canReplaceWith(m.index(),m.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&Gb(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return p},KD=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var s;const a=It(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const h=o.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let y=V.empty;const b=l.index(-1)?1:l.index(-2)?2:3;for(let E=l.depth-b;E>=l.depth-3;E-=1)y=V.from(l.node(E).copy(y));const C=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,v={...hu(h,l.node().type.name,l.node().attrs),...e},k=((s=a.contentMatch.defaultType)==null?void 0:s.createAndFill(v))||void 0;y=y.append(V.from(a.createAndFill(null,k)||void 0));const w=l.before(l.depth-(b-1));n.replace(w,l.after(-C),new re(y,4-b,0));let S=-1;n.doc.nodesBetween(w,n.doc.content.size,(E,R)=>{if(S>-1)return!1;E.isTextblock&&E.content.size===0&&(S=R+1)}),S>-1&&n.setSelection(_e.near(n.doc.resolve(S))),n.scrollIntoView()}return!0}const f=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,p={...hu(h,d.type.name,d.attrs),...e},g={...hu(h,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const m=f?[{type:a,attrs:p},{type:f,attrs:g}]:[{type:a,attrs:p}];if(!gi(n.doc,l.pos,2))return!1;if(i){const{selection:y,storedMarks:b}=r,{splittableMarks:C}=o.extensionManager,v=b||y.$to.parentOffset&&y.$from.marks();if(n.split(l.pos,2,m).scrollIntoView(),!v||!i)return!0;const k=v.filter(w=>C.includes(w.type.name));n.ensureMarks(k)}return!0},Of=(t,e)=>{const n=Ch(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&oo(t.doc,n.pos)&&t.join(n.pos),!0},Lf=(t,e)=>{const n=Ch(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&oo(t.doc,r)&&t.join(r),!0},YD=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=i.extensionManager,f=It(t,s.schema),p=It(e,s.schema),{selection:g,storedMarks:m}=s,{$from:y,$to:b}=g,C=y.blockRange(b),v=m||g.$to.parentOffset&&g.$from.marks();if(!C)return!1;const k=Ch(w=>Vb(w.type.name,d))(g);if(C.depth>=1&&k&&C.depth-k.depth<=1){if(k.node.type===f)return c.liftListItem(p);if(Vb(k.node.type.name,d)&&f.validContent(k.node.content)&&a)return l().command(()=>(o.setNodeMarkup(k.pos,f),!0)).command(()=>Of(o,f)).command(()=>Lf(o,f)).run()}return!n||!v||!a?l().command(()=>u().wrapInList(f,r)?!0:c.clearNodes()).wrapInList(f,r).command(()=>Of(o,f)).command(()=>Lf(o,f)).run():l().command(()=>{const w=u().wrapInList(f,r),S=v.filter(E=>h.includes(E.type.name));return o.ensureMarks(S),w?!0:c.clearNodes()}).wrapInList(f,r).command(()=>Of(o,f)).command(()=>Lf(o,f)).run()},XD=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=Si(t,r.schema);return jp(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},ZD=(t,e,n={})=>({state:r,commands:i})=>{const o=It(t,r.schema),s=It(e,r.schema),a=Ji(r,o,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(s,l):i.setNode(o,{...l,...n})},JD=(t,e={})=>({state:n,commands:r})=>{const i=It(t,n.schema);return Ji(n,i,e)?r.lift(i):r.wrapIn(i,e)},QD=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(o.text){const l=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,l))}else s.delete(o.from,o.to)}return!0}}return!1},eB=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},tB=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,l=Si(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&s){let{from:h,to:f}=a;const p=(o=c.marks().find(m=>m.type===l))==null?void 0:o.attrs,g=zm(c,l,p);g&&(h=g.from,f=g.to),n.removeMark(h,f,l)}else d.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},nB=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=wh(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=It(t,r.schema)),a==="mark"&&(s=Si(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let d,h,f,p;n.selection.empty?r.doc.nodesBetween(c,u,(g,m)=>{o&&o===g.type&&(f=Math.max(m,c),p=Math.min(m+g.nodeSize,u),d=m,h=g)}):r.doc.nodesBetween(c,u,(g,m)=>{m<c&&o&&o===g.type&&(f=Math.max(m,c),p=Math.min(m+g.nodeSize,u),d=m,h=g),m>=c&&m<=u&&(o&&o===g.type&&n.setNodeMarkup(m,void 0,{...g.attrs,...e}),s&&g.marks.length&&g.marks.forEach(y=>{if(s===y.type){const b=Math.max(m,c),C=Math.min(m+g.nodeSize,u);n.addMark(b,C,s.create({...y.attrs,...e}))}}))}),h&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),s&&h.marks.length&&h.marks.forEach(g=>{s===g.type&&n.addMark(f,p,s.create({...g.attrs,...e}))}))}),!0):!1},rB=(t,e={})=>({state:n,dispatch:r})=>{const i=It(t,n.schema);return zL(i,e)(n,r)},iB=(t,e={})=>({state:n,dispatch:r})=>{const i=It(t,n.schema);return HL(i,e)(n,r)},oB=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},rc=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},sB=(t,e)=>{if(Fm(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Nc(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const d=BD(c)+o;return s.forEach(h=>{if(u)return;const f=sB(d,h.find);if(!f)return;const p=l.state.tr,g=bh({state:l.state,transaction:p}),m={from:r-(f[0].length-o.length),to:i},{commands:y,chain:b,can:C}=new xh({editor:n,state:g});h.handler({state:g,range:m,match:f,commands:y,chain:b,can:C})===null||!p.steps.length||(h.undoable&&p.setMeta(a,{transform:p,from:r,to:i,text:o}),l.dispatch(p),u=!0)}),u}function aB(t){const{editor:e,rules:n}=t,r=new Ge({state:{init(){return null},apply(i,o,s){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=Um(V.from(u),s.schema);const{from:d}=l,h=d+u.length;Nc({editor:e,from:d,to:h,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,s,a){return Nc({editor:e,from:o,to:s,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&Nc({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?Nc({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function lB(t){return Object.prototype.toString.call(t).slice(8,-1)}function Oc(t){return lB(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function ck(t,e){const n={...t};return Oc(t)&&Oc(e)&&Object.keys(e).forEach(r=>{Oc(e[r])&&Oc(t[r])?n[r]=ck(t[r],e[r]):n[r]=e[r]}),n}var Gm=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...et(Se(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...et(Se(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>ck(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},_i=class uk extends Gm{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new uk(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=s.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function cB(t){return typeof t=="number"}var uB=class{constructor(t){this.find=t.find,this.handler=t.handler}},dB=(t,e,n)=>{if(Fm(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function hB(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:s,dropEvent:a}=t,{commands:l,chain:c,can:u}=new xh({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(f,p)=>{var g,m,y,b,C;if((m=(g=f.type)==null?void 0:g.spec)!=null&&m.code||!(f.isText||f.isTextblock||f.isInline))return;const v=(C=(b=(y=f.content)==null?void 0:y.size)!=null?b:f.nodeSize)!=null?C:0,k=Math.max(r,p),w=Math.min(i,p+v);if(k>=w)return;const S=f.isText?f.text||"":f.textBetween(k-p,w-p,void 0,"");dB(S,o.find,s).forEach(R=>{if(R.index===void 0)return;const $=k+R.index+1,T=$+R[0].length,P={from:n.tr.mapping.map($),to:n.tr.mapping.map(T)},B=o.handler({state:n,range:P,match:R,commands:l,chain:c,can:u,pasteEvent:s,dropEvent:a});d.push(B)})}),d.every(f=>f!==null)}var Lc=null,fB=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function pB(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:h,rule:f,pasteEvt:p})=>{const g=u.tr,m=bh({state:u,transaction:g});if(!(!hB({editor:e,state:m,from:Math.max(d-1,0),to:h.b-1,rule:f,pasteEvent:p,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(u=>new Ge({view(d){const h=p=>{var g;r=(g=d.dom.parentElement)!=null&&g.contains(p.target)?d.dom.parentElement:null,r&&(Lc=e)},f=()=>{Lc&&(Lc=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",f),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",f)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(o=r===d.dom.parentElement,a=h,!o){const f=Lc;f!=null&&f.isEditable&&setTimeout(()=>{const p=f.state.selection;p&&f.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(d,h)=>{var f;const p=(f=h.clipboardData)==null?void 0:f.getData("text/html");return s=h,i=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(d,h,f)=>{const p=d[0],g=p.getMeta("uiEvent")==="paste"&&!i,m=p.getMeta("uiEvent")==="drop"&&!o,y=p.getMeta("applyPasteRules"),b=!!y;if(!g&&!m&&!b)return;if(b){let{text:k}=y;typeof k=="string"?k=k:k=Um(V.from(k),f.schema);const{from:w}=y,S=w+k.length,E=fB(k);return l({rule:u,state:f,from:w,to:{b:S},pasteEvt:E})}const C=h.doc.content.findDiffStart(f.doc.content),v=h.doc.content.findDiffEnd(f.doc.content);if(!(!cB(C)||!v||C===v.b))return l({rule:u,state:f,from:C,to:v,pasteEvt:s})}}))}var Sh=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=ik(t),this.schema=AD(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Nf(e.name,this.schema)},r=Se(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return jm([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Nf(r.name,this.schema)},o=[],s=Se(r,"addKeyboardShortcuts",i);let a={};if(r.type==="mark"&&Se(r,"exitable",i)&&(a.ArrowRight=()=>_i.handleExit({editor:t,mark:r})),s){const h=Object.fromEntries(Object.entries(s()).map(([f,p])=>[f,()=>p({editor:t})]));a={...a,...h}}const l=DI(a);o.push(l);const c=Se(r,"addInputRules",i);if(qb(r,t.options.enableInputRules)&&c){const h=c();if(h&&h.length){const f=aB({editor:t,rules:h}),p=Array.isArray(f)?f:[f];o.push(...p)}}const u=Se(r,"addPasteRules",i);if(qb(r,t.options.enablePasteRules)&&u){const h=u();if(h&&h.length){const f=pB({editor:t,rules:h});o.push(...f)}}const d=Se(r,"addProseMirrorPlugins",i);if(d){const h=d();o.push(...h)}return o})}get attributes(){return rk(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Ol(this.extensions);return Object.fromEntries(e.filter(n=>!!Se(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:It(n.name,this.schema)},o=Se(n,"addNodeView",i);if(!o)return[];const s=o();if(!s)return[];const a=(l,c,u,d,h)=>{const f=Ll(l,r);return s({node:l,view:c,getPos:u,decorations:d,innerDecorations:h,editor:t,extension:n,HTMLAttributes:f})};return[n.name,a]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=Ol(this.extensions);return Object.fromEntries(e.filter(n=>!!Se(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Si(n.name,this.schema)},o=Se(n,"addMarkView",i);if(!o)return[];const s=(a,l,c)=>{const u=Ll(a,r);return o()({mark:a,view:l,inline:c,editor:t,extension:n,HTMLAttributes:u,updateAttributes:d=>{MB(a,t,d)}})};return[n.name,s]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Nf(e.name,this.schema)};e.type==="mark"&&((n=et(Se(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=Se(e,"onBeforeCreate",r),o=Se(e,"onCreate",r),s=Se(e,"onUpdate",r),a=Se(e,"onSelectionUpdate",r),l=Se(e,"onTransaction",r),c=Se(e,"onFocus",r),u=Se(e,"onBlur",r),d=Se(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}};Sh.resolve=ik;Sh.sort=jm;Sh.flatten=Wm;var gB={};$m(gB,{ClipboardTextSerializer:()=>hk,Commands:()=>fk,Delete:()=>pk,Drop:()=>gk,Editable:()=>mk,FocusEvents:()=>bk,Keymap:()=>xk,Paste:()=>vk,Tabindex:()=>wk,focusEventsPluginKey:()=>yk});var Ye=class dk extends Gm{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new dk(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},hk=Ye.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ge({key:new Je("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(u=>u.$from.pos)),a=Math.max(...o.map(u=>u.$to.pos)),l=sk(n);return ok(r,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),fk=Ye.create({name:"commands",addCommands(){return{...VC}}}),pk=Ye.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const o=()=>{var s,a,l,c;if((c=(l=(a=(s=this.editor.options.coreExtensionOptions)==null?void 0:s.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?c:t.getMeta("y-sync$"))return;const u=Hm(t.before,[t,...e]);qm(u).forEach(f=>{u.mapping.mapResult(f.oldRange.from).deletedAfter&&u.mapping.mapResult(f.oldRange.to).deletedBefore&&u.before.nodesBetween(f.oldRange.from,f.oldRange.to,(p,g)=>{const m=g+p.nodeSize-2,y=f.oldRange.from<=g&&m<=f.oldRange.to;this.editor.emit("delete",{type:"node",node:p,from:g,to:m,newFrom:u.mapping.map(g),newTo:u.mapping.map(m),deletedRange:f.oldRange,newRange:f.newRange,partial:!y,editor:this.editor,transaction:t,combinedTransform:u})})});const h=u.mapping;u.steps.forEach((f,p)=>{var g,m;if(f instanceof Sr){const y=h.slice(p).map(f.from,-1),b=h.slice(p).map(f.to),C=h.invert().map(y,-1),v=h.invert().map(b),k=(g=u.doc.nodeAt(y-1))==null?void 0:g.marks.some(S=>S.eq(f.mark)),w=(m=u.doc.nodeAt(b))==null?void 0:m.marks.some(S=>S.eq(f.mark));this.editor.emit("delete",{type:"mark",mark:f.mark,from:f.from,to:f.to,deletedRange:{from:C,to:v},newRange:{from:y,to:b},partial:!!(w||k),editor:this.editor,transaction:t,combinedTransform:u})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(o,0):o()}}),gk=Ye.create({name:"drop",addProseMirrorPlugins(){return[new Ge({key:new Je("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),mk=Ye.create({name:"editable",addProseMirrorPlugins(){return[new Ge({key:new Je("editable"),props:{editable:()=>this.editor.options.editable}})]}}),yk=new Je("focusEvents"),bk=Ye.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Ge({key:yk,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),xk=Ye.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:h,parent:f}=d,p=d.parent.isTextblock&&h>0?a.doc.resolve(h-1):d,g=p.parent.type.spec.isolating,m=d.pos-d.parentOffset,y=g&&p.parent.childCount===1?m===d.pos:Ie.atStart(c).from===h;return!u||!f.type.isTextblock||f.textContent.length||!y||y&&d.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return vh()||JC()?o:i},addProseMirrorPlugins(){return[new Ge({key:new Je("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:s,to:a}=e.selection,l=Ie.atStart(e.doc).from,c=Ie.atEnd(e.doc).to;if(o||!(s===l&&a===c)||!kh(n.doc))return;const h=n.tr,f=bh({state:n,transaction:h}),{commands:p}=new xh({editor:this.editor,state:f});if(p.clearNodes(),!!h.steps.length)return h}})]}}),vk=Ye.create({name:"paste",addProseMirrorPlugins(){return[new Ge({key:new Je("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),wk=Ye.create({name:"tabindex",addProseMirrorPlugins(){return[new Ge({key:new Je("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),mB=class Ts{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Ts(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Ts(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Ts(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,s=this.pos+r+(o?0:1);if(s<0||s>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(s);if(!i&&a.depth<=this.depth)return;const l=new Ts(a,this.editor,i,i?n:null);i&&(l.actualDepth=this.depth+1),e.push(new Ts(a,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,s=Object.keys(n);for(let a=0;a<s.length;a+=1){const l=s[a];if(o[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&o.every(l=>n[l]===s.node.attrs[l])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},yB=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function bB(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var xB=class extends oB{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:o})=>this.options.onDrop(r,i,o)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=YC(e,this.options.autofocus);this.editorState=Bs.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=bB(yB,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=nk(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const o=typeof i=="string"?`${i}$`:i.key;n=n.filter(s=>!s.key.startsWith(o))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[mk,hk.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),fk,bk,xk,wk,gk,vk,pk].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new Sh(r,this)}createCommandManager(){this.commandManager=new xh({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=Up(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=Up(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new qC(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(c=>{var u;return(u=this.capturedTransaction)==null?void 0:u.step(c)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const s=n.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=s==null?void 0:s.getMeta("focus"),l=s==null?void 0:s.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:s}),l&&this.emit("blur",{editor:this,event:l.event,transaction:s}),!(t.getMeta("preventUpdate")||!n.some(c=>c.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return ak(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return PD(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Um(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return OD(this.state.doc,{blockSeparator:e,textSerializers:{...sk(this.schema),...n}})}get isEmpty(){return kh(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new mB(e,this)}get $doc(){return this.$pos(0)}};function Go(t){return new rc({find:t.find,handler:({state:e,range:n,match:r})=>{const i=et(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],a=r[0];if(s){const l=a.search(/\S/),c=n.from+a.indexOf(s),u=c+s.length;if(Vm(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(g=>g===t.type&&g!==f.mark.type)).filter(f=>f.to>c).length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+l,c);const h=n.from+l+s.length;o.addMark(n.from+l,h,t.type.create(i||{})),o.removeStoredMark(t.type)}},undoable:t.undoable})}function vB(t){return new rc({find:t.find,handler:({state:e,range:n,match:r})=>{const i=et(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=s+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];o.insertText(d,s+r[0].length-1),o.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?s:s-1;o.insert(c,t.type.create(i)).delete(o.mapping.map(s),o.mapping.map(a))}o.scrollIntoView()},undoable:t.undoable})}function qp(t){return new rc({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=et(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)},undoable:t.undoable})}function na(t){return new rc({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=et(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),l=s.doc.resolve(n.from).blockRange(),c=l&&xm(l,t.type,o);if(!c)return null;if(s.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:h}=e,{splittableMarks:f}=t.editor.extensionManager,p=h||d.$to.parentOffset&&d.$from.marks();if(p){const g=p.filter(m=>f.includes(m.type.name));s.ensureMarks(g)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,o).run()}const u=s.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&oo(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&s.join(n.from-1)},undoable:t.undoable})}function wB(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof xe){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let i=r.depth;for(;i>=0;){const o=r.index(i);if(r.node(i).contentMatchAt(o).matchType(e))return!0;i-=1}return!1}var CB={};$m(CB,{createAtomBlockMarkdownSpec:()=>kB,createBlockMarkdownSpec:()=>SB,createInlineMarkdownSpec:()=>TB,parseAttributes:()=>Km,parseIndentedBlocks:()=>Vp,renderNestedMarkdownContent:()=>Xm,serializeAttributes:()=>Ym});function Km(t){if(!(t!=null&&t.trim()))return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,c=>(n.push(c),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const c=i.map(u=>u.trim().slice(1));e.class=c.join(" ")}const o=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(e.id=o[1]);const s=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(s)).forEach(([,c,u])=>{var d;const h=parseInt(((d=u.match(/__QUOTED_(\d+)__/))==null?void 0:d[1])||"0",10),f=n[h];f&&(e[c]=f.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(u=>{u.match(/^[a-zA-Z][\w-]*$/)&&(e[u]=!0)}),e}function Ym(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function kB(t){const{nodeName:e,name:n,parseAttributes:r=Km,serializeAttributes:i=Ym,defaultAttributes:o={},requiredAttributes:s=[],allowedAttributes:a}=t,l=n||e,c=u=>{if(!a)return u;const d={};return a.forEach(h=>{h in u&&(d[h]=u[h])}),d};return{parseMarkdown:(u,d)=>{const h={...o,...u.attributes};return d.createNode(e,h,[])},markdownTokenizer:{name:e,level:"block",start(u){var d;const h=new RegExp(`^:::${l}(?:\\s|$)`,"m"),f=(d=u.match(h))==null?void 0:d.index;return f!==void 0?f:-1},tokenize(u,d,h){const f=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),p=u.match(f);if(!p)return;const g=p[1]||"",m=r(g);if(!s.find(b=>!(b in m)))return{type:e,raw:p[0],attributes:m}}},renderMarkdown:u=>{const d=c(u.attrs||{}),h=i(d),f=h?` {${h}}`:"";return`:::${l}${f} :::`}}}function SB(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=Km,serializeAttributes:o=Ym,defaultAttributes:s={},content:a="block",allowedAttributes:l}=t,c=n||e,u=d=>{if(!l)return d;const h={};return l.forEach(f=>{f in d&&(h[f]=d[f])}),h};return{parseMarkdown:(d,h)=>{let f;if(r){const g=r(d);f=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?f=h.parseChildren(d.tokens||[]):f=h.parseInline(d.tokens||[]);const p={...s,...d.attributes};return h.createNode(e,p,f)},markdownTokenizer:{name:e,level:"block",start(d){var h;const f=new RegExp(`^:::${c}`,"m"),p=(h=d.match(f))==null?void 0:h.index;return p!==void 0?p:-1},tokenize(d,h,f){var p;const g=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),m=d.match(g);if(!m)return;const[y,b=""]=m,C=i(b);let v=1;const k=y.length;let w="";const S=/^:::([\w-]*)(\s.*)?/gm,E=d.slice(k);for(S.lastIndex=0;;){const R=S.exec(E);if(R===null)break;const $=R.index,T=R[1];if(!((p=R[2])!=null&&p.endsWith(":::"))){if(T)v+=1;else if(v-=1,v===0){const P=E.slice(0,$);w=P.trim();const B=d.slice(0,k+$+R[0].length);let A=[];if(w)if(a==="block")for(A=f.blockTokens(P),A.forEach(M=>{M.text&&(!M.tokens||M.tokens.length===0)&&(M.tokens=f.inlineTokens(M.text))});A.length>0;){const M=A[A.length-1];if(M.type==="paragraph"&&(!M.text||M.text.trim()===""))A.pop();else break}else A=f.inlineTokens(w);return{type:e,raw:B,attributes:C,content:w,tokens:A}}}}}},renderMarkdown:(d,h)=>{const f=u(d.attrs||{}),p=o(f),g=p?` {${p}}`:"",m=h.renderChildren(d.content||[],`

`);return`:::${c}${g}

${m}

:::`}}}function _B(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,i,o,s]=r;e[i]=o||s,r=n.exec(t)}return e}function EB(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function TB(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=_B,serializeAttributes:o=EB,defaultAttributes:s={},selfClosing:a=!1,allowedAttributes:l}=t,c=n||e,u=h=>{if(!l)return h;const f={};return l.forEach(p=>{p in h&&(f[p]=h[p])}),f},d=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(h,f)=>{const p={...s,...h.attributes};if(a)return f.createNode(e,p);const g=r?r(h):h.content||"";return g?f.createNode(e,p,[f.createTextNode(g)]):f.createNode(e,p,[])},markdownTokenizer:{name:e,level:"inline",start(h){const f=a?new RegExp(`\\[${d}\\s*[^\\]]*\\]`):new RegExp(`\\[${d}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${d}\\]`),p=h.match(f),g=p==null?void 0:p.index;return g!==void 0?g:-1},tokenize(h,f,p){const g=a?new RegExp(`^\\[${d}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${d}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${d}\\]`),m=h.match(g);if(!m)return;let y="",b="";if(a){const[,v]=m;b=v}else{const[,v,k]=m;b=v,y=k||""}const C=i(b.trim());return{type:e,raw:m[0],content:y.trim(),attributes:C}}},renderMarkdown:h=>{let f="";r?f=r(h):h.content&&h.content.length>0&&(f=h.content.filter(y=>y.type==="text").map(y=>y.text).join(""));const p=u(h.attrs||{}),g=o(p),m=g?` ${g}`:"";return a?`[${c}${m}]`:`[${c}${m}]${f}[/${c}]`}}}function Vp(t,e,n){var r,i,o,s;const a=t.split(`
`),l=[];let c="",u=0;const d=e.baseIndentSize||2;for(;u<a.length;){const h=a[u],f=h.match(e.itemPattern);if(!f){if(l.length>0)break;if(h.trim()===""){u+=1;continue}else return}const p=e.extractItemData(f),{indentLevel:g,mainContent:m}=p;c=`${c}${h}
`;const y=[m];for(u+=1;u<a.length;){const k=a[u];if(k.trim()===""){const S=a.slice(u+1).findIndex($=>$.trim()!=="");if(S===-1)break;if((((i=(r=a[u+1+S].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>g){y.push(k),c=`${c}${k}
`,u+=1;continue}else break}if((((s=(o=k.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:s.length)||0)>g)y.push(k),c=`${c}${k}
`,u+=1;else break}let b;const C=y.slice(1);if(C.length>0){const k=C.map(w=>w.slice(g+d)).join(`
`);k.trim()&&(e.customNestedParser?b=e.customNestedParser(k):b=n.blockTokens(k))}const v=e.createToken(p,b);l.push(v)}if(l.length!==0)return{items:l,raw:c.trim()}}function Xm(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const i=typeof n=="function"?n(r):n,[o,...s]=t.content,a=e.renderChildren([o]),l=[`${i}${a}`];return s&&s.length>0&&s.forEach(c=>{const u=e.renderChildren([c]);if(u){const d=u.split(`
`).map(h=>h?e.indent(h):"").join(`
`);l.push(d)}}),l.join(`
`)}function MB(t,e,n={}){const{state:r}=e,{doc:i,tr:o}=r,s=t;i.descendants((a,l)=>{const c=o.mapping.map(l),u=o.mapping.map(l)+a.nodeSize;let d=null;if(a.marks.forEach(f=>{if(f!==s)return!1;d=f}),!d)return;let h=!1;if(Object.keys(n).forEach(f=>{n[f]!==d.attrs[f]&&(h=!0)}),h){const f=t.type.create({...t.attrs,...n});o.removeMark(c,u,t.type),o.addMark(c,u,f)}}),o.docChanged&&e.view.dispatch(o)}var _t=class Ck extends Gm{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new Ck(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},AB=class{constructor(t,e,n){this.isDragging=!1,this.component=t,this.editor=e.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=e.extension,this.node=e.node,this.decorations=e.decorations,this.innerDecorations=e.innerDecorations,this.view=e.view,this.HTMLAttributes=e.HTMLAttributes,this.getPos=e.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var e,n,r,i,o,s,a;const{view:l}=this.editor,c=t.target,u=c.nodeType===3?(e=c.parentElement)==null?void 0:e.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||(n=this.contentDOM)!=null&&n.contains(c)||!u)return;let d=0,h=0;if(this.dom!==u){const b=this.dom.getBoundingClientRect(),C=u.getBoundingClientRect(),v=(i=t.offsetX)!=null?i:(r=t.nativeEvent)==null?void 0:r.offsetX,k=(s=t.offsetY)!=null?s:(o=t.nativeEvent)==null?void 0:o.offsetY;d=C.x-b.x+v,h=C.y-b.y+k}const f=this.dom.cloneNode(!0);try{const b=this.dom.getBoundingClientRect();f.style.width=`${Math.round(b.width)}px`,f.style.height=`${Math.round(b.height)}px`,f.style.boxSizing="border-box",f.style.pointerEvents="none"}catch{}let p=null;try{p=document.createElement("div"),p.style.position="absolute",p.style.top="-9999px",p.style.left="-9999px",p.style.pointerEvents="none",p.appendChild(f),document.body.appendChild(p),(a=t.dataTransfer)==null||a.setDragImage(f,d,h)}finally{p&&setTimeout(()=>{try{p==null||p.remove()}catch{}},0)}const g=this.getPos();if(typeof g!="number")return;const m=xe.create(l.state.doc,g),y=l.state.tr.setSelection(m);l.dispatch(y)}stopEvent(t){var e;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:t});const n=t.target;if(!(this.dom.contains(n)&&!((e=this.contentDOM)!=null&&e.contains(n))))return!1;const i=t.type.startsWith("drag"),o=t.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!o&&!i)return!0;const{isEditable:a}=this.editor,{isDragging:l}=this,c=!!this.node.type.spec.draggable,u=xe.isSelectable(this.node),d=t.type==="copy",h=t.type==="paste",f=t.type==="cut",p=t.type==="mousedown";if(!c&&u&&i&&t.target===this.dom&&t.preventDefault(),c&&i&&!l&&t.target===this.dom)return t.preventDefault(),!1;if(c&&a&&!l&&p){const g=n.closest("[data-drag-handle]");g&&(this.dom===g||this.dom.contains(g))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(l||o||d||h||f||p&&u)}ignoreMutation(t){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:t}):this.node.isLeaf||this.node.isAtom?!0:t.type==="selection"||this.dom.contains(t.target)&&t.type==="childList"&&(vh()||XC())&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(n=>n.isContentEditable)?!1:this.contentDOM===t.target&&t.type==="attributes"?!0:!this.contentDOM.contains(t.target)}updateAttributes(t){this.editor.commands.command(({tr:e})=>{const n=this.getPos();return typeof n!="number"?!1:(e.setNodeMarkup(n,void 0,{...this.node.attrs,...t}),!0)})}deleteNode(){const t=this.getPos();if(typeof t!="number")return;const e=t+this.node.nodeSize;this.editor.commands.deleteRange({from:t,to:e})}};function Qi(t){return new uB({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=et(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:s}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),h=d+a.length;if(Vm(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(m=>m===t.type&&m!==p.mark.type)).filter(p=>p.to>d).length)return null;h<n.to&&s.delete(h,n.to),d>n.from&&s.delete(n.from+u,d),c=n.from+u+a.length,s.addMark(n.from+u,c,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}var Rf,Kb;function NB(){return Kb||(Kb=1,Rf=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!(s==="_owner"&&e.$$typeof)&&!t(e[s],n[s]))return!1}return!0}return e!==e&&n!==n}),Rf}var OB=NB();const LB=mm(OB);var If={exports:{}},Df={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yb;function RB(){if(Yb)return Df;Yb=1;var t=sw(),e=xw();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,s=t.useEffect,a=t.useMemo,l=t.useDebugValue;return Df.useSyncExternalStoreWithSelector=function(c,u,d,h,f){var p=o(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=a(function(){function y(w){if(!b){if(b=!0,C=w,w=h(w),f!==void 0&&g.hasValue){var S=g.value;if(f(S,w))return v=S}return v=w}if(S=v,r(C,w))return S;var E=h(w);return f!==void 0&&f(S,E)?(C=w,S):(C=w,v=E)}var b=!1,C,v,k=d===void 0?null:d;return[function(){return y(u())},k===null?void 0:function(){return y(k())}]},[u,d,h,f]);var m=i(c,p[0],p[1]);return s(function(){g.hasValue=!0,g.value=m},[m]),l(m),m},Df}var Xb;function IB(){return Xb||(Xb=1,If.exports=RB()),If.exports}var DB=IB(),BB=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},PB=({contentComponent:t})=>{const e=vw.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return _.jsx(_.Fragment,{children:Object.values(e)})};function $B(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:CO.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}var FB=class extends or.Component{constructor(t){var e;super(t),this.editorContentRef=or.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(t.view.dom),t.setOptions({element:e}),t.contentComponent=$B(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.firstChild))return;const n=document.createElement("div");n.append(e.view.dom),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return _.jsxs(_.Fragment,{children:[_.jsx("div",{ref:BB(e,this.editorContentRef),...n}),(t==null?void 0:t.contentComponent)&&_.jsx(PB,{contentComponent:t.contentComponent})]})}},zB=O.forwardRef((t,e)=>{const n=or.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return or.createElement(FB,{key:n,innerRef:e,...t})}),HB=or.memo(zB),WB=typeof window<"u"?O.useLayoutEffect:O.useEffect,UB=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function jB(t){var e;const[n]=O.useState(()=>new UB(t.editor)),r=DB.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:LB);return WB(()=>n.watch(t.editor),[t.editor,n]),O.useDebugValue(r),r}var qB=!1,Gp=typeof window>"u",VB=Gp||!!(typeof window<"u"&&window.next),GB=class kk{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Gp||VB?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onBeforeCreate)==null?void 0:o.call(i,...r)},onBlur:(...r)=>{var i,o;return(o=(i=this.options.current).onBlur)==null?void 0:o.call(i,...r)},onCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onCreate)==null?void 0:o.call(i,...r)},onDestroy:(...r)=>{var i,o;return(o=(i=this.options.current).onDestroy)==null?void 0:o.call(i,...r)},onFocus:(...r)=>{var i,o;return(o=(i=this.options.current).onFocus)==null?void 0:o.call(i,...r)},onSelectionUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onSelectionUpdate)==null?void 0:o.call(i,...r)},onTransaction:(...r)=>{var i,o;return(o=(i=this.options.current).onTransaction)==null?void 0:o.call(i,...r)},onUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onUpdate)==null?void 0:o.call(i,...r)},onContentError:(...r)=>{var i,o;return(o=(i=this.options.current).onContentError)==null?void 0:o.call(i,...r)},onDrop:(...r)=>{var i,o;return(o=(i=this.options.current).onDrop)==null?void 0:o.call(i,...r)},onPaste:(...r)=>{var i,o;return(o=(i=this.options.current).onPaste)==null?void 0:o.call(i,...r)},onDelete:(...r)=>{var i,o;return(o=(i=this.options.current).onDelete)==null?void 0:o.call(i,...r)}};return new xB(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,o)=>{var s;return i===((s=n.extensions)==null?void 0:s[o])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?kk.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function KB(t={},e=[]){const n=O.useRef(t);n.current=t;const[r]=O.useState(()=>new GB(n)),i=vw.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return O.useDebugValue(i),O.useEffect(r.onRender(e)),jB({editor:i,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&o===0?0:o+1}),i}var YB=O.createContext({editor:null});YB.Consumer;var Sk=O.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),_k=()=>O.useContext(Sk);function Zm({as:t="div",...e}){const{nodeViewContentRef:n,nodeViewContentChildren:r}=_k();return _.jsx(t,{...e,ref:n,"data-node-view-content":"",style:{whiteSpace:"pre-wrap",...e.style},children:r})}var _h=or.forwardRef((t,e)=>{const{onDragStart:n}=_k(),r=t.as||"div";return _.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function Zb(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function Jb(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.forward_ref)"||t.$$typeof.description==="react.forward_ref"))}function XB(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.memo)"||t.$$typeof.description==="react.memo"))}function ZB(t){if(Zb(t)||Jb(t))return!0;if(XB(t)){const e=t.type;if(e)return Zb(e)||Jb(e)}return!1}function JB(){try{if(O.version)return parseInt(O.version.split(".")[0],10)>=19}catch{}return!1}var QB=class{constructor(t,{editor:e,props:n={},as:r="div",className:i=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=t,this.editor=e,this.props=n,this.element=document.createElement(r),this.element.classList.add("react-renderer"),i&&this.element.classList.add(...i.split(" ")),this.editor.isInitialized?aw.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var t;const e=this.component,n=this.props,r=this.editor,i=JB(),o=ZB(e),s={...n};s.ref&&!(i||o)&&delete s.ref,!s.ref&&(i||o)&&(s.ref=a=>{this.ref=a}),this.reactElement=_.jsx(e,{...s}),(t=r==null?void 0:r.contentComponent)==null||t.setRenderer(this.id,this)}updateProps(t={}){this.props={...this.props,...t},this.render()}destroy(){var t;const e=this.editor;(t=e==null?void 0:e.contentComponent)==null||t.removeRenderer(this.id);try{this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}catch{}}updateAttributes(t){Object.keys(t).forEach(e=>{this.element.setAttribute(e,t[e])})}};or.createContext({markViewContentRef:()=>{}});var eP=class extends AB{constructor(t,e,n){if(super(t,e,n),!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const r=this.dom.querySelector("[data-node-view-content]");if(!r)return;r.appendChild(this.contentDOMElement)}}mount(){const t={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(l={})=>this.updateAttributes(l),deleteNode:()=>this.deleteNode(),ref:O.createRef()};if(!this.component.displayName){const l=c=>c.charAt(0).toUpperCase()+c.substring(1);this.component.displayName=l(this.extension.name)}const r={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:l=>{l&&this.contentDOMElement&&l.firstChild!==this.contentDOMElement&&(l.hasAttribute("data-node-view-wrapper")&&l.removeAttribute("data-node-view-wrapper"),l.appendChild(this.contentDOMElement))}},i=this.component,o=O.memo(l=>_.jsx(Sk.Provider,{value:r,children:O.createElement(i,l)}));o.displayName="ReactNodeView";let s=this.node.isInline?"span":"div";this.options.as&&(s=this.options.as);const{className:a=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new QB(o,{editor:this.editor,props:t,as:s,className:`node-${this.node.type.name} ${a}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var t;if(this.renderer.element.firstElementChild&&!((t=this.renderer.element.firstElementChild)!=null&&t.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:t,to:e}=this.editor.state.selection,n=this.getPos();if(typeof n=="number")if(t<=n&&e>=n+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(t,e,n){const r=i=>{this.renderer.updateProps(i),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(t.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const i=this.node,o=this.decorations,s=this.innerDecorations;return this.node=t,this.decorations=e,this.innerDecorations=n,this.options.update({oldNode:i,oldDecorations:o,newNode:t,newDecorations:e,oldInnerDecorations:s,innerDecorations:n,updateProps:()=>r({node:t,decorations:e,innerDecorations:n})})}return t===this.node&&this.decorations===e&&this.innerDecorations===n||(this.node=t,this.decorations=e,this.innerDecorations=n,r({node:t,decorations:e,innerDecorations:n})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let t={};if(typeof this.options.attrs=="function"){const e=this.editor.extensionManager.attributes,n=Ll(this.node,e);t=this.options.attrs({node:this.node,HTMLAttributes:n})}else t=this.options.attrs;this.renderer.updateAttributes(t)}}};function Eh(t,e){return n=>n.editor.contentComponent?new eP(t,n,e):{}}var Vu=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},tP=/^\s*>\s$/,nP=_t.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Vu("blockquote",{...Qe(this.options.HTMLAttributes,t),children:Vu("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(i=>{const a=e.renderChildren([i]).split(`
`).map(l=>l.trim()===""?n:`${n} ${l}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[na({find:tP,type:this.type})]}}),rP=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,iP=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,oP=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,sP=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,aP=_i.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Vu("strong",{...Qe(this.options.HTMLAttributes,t),children:Vu("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Go({find:rP,type:this.type}),Go({find:oP,type:this.type})]},addPasteRules(){return[Qi({find:iP,type:this.type}),Qi({find:sP,type:this.type})]}}),lP=/(^|[^`])`([^`]+)`(?!`)$/,cP=/(^|[^`])`([^`]+)`(?!`)/g,uP=_i.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Qe(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Go({find:lP,type:this.type})]},addPasteRules(){return[Qi({find:cP,type:this.type})]}}),Bf=4,dP=/^```([a-z]+)?[\s\n]$/,hP=/^~~~([a-z]+)?[\s\n]$/,Ek=_t.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Bf,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const o=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Qe(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const i=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Bf,{state:r}=t,{selection:i}=r,{$from:o,empty:s}=i;if(o.parent.type!==this.type)return!1;const a=" ".repeat(n);return s?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:c,to:u}=i,f=r.doc.textBetween(c,u,`
`,`
`).split(`
`).map(p=>a+p).join(`
`);return l.replaceWith(c,u,r.schema.text(f)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Bf,{state:r}=t,{selection:i}=r,{$from:o,empty:s}=i;return o.parent.type!==this.type?!1:s?t.commands.command(({tr:a})=>{var l;const{pos:c}=o,u=o.start(),d=o.end(),f=r.doc.textBetween(u,d,`
`,`
`).split(`
`);let p=0,g=0;const m=c-u;for(let w=0;w<f.length;w+=1){if(g+f[w].length>=m){p=w;break}g+=f[w].length+1}const b=((l=f[p].match(/^ */))==null?void 0:l[0])||"",C=Math.min(b.length,n);if(C===0)return!0;let v=u;for(let w=0;w<p;w+=1)v+=f[w].length+1;return a.delete(v,v+C),c-v<=C&&a.setSelection(_e.create(a.doc,v)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:c}=i,h=r.doc.textBetween(l,c,`
`,`
`).split(`
`).map(f=>{var p;const g=((p=f.match(/^ */))==null?void 0:p[0])||"",m=Math.min(g.length,n);return f.slice(m)}).join(`
`);return a.replaceWith(l,c,r.schema.text(h)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(Ie.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[qp({find:dP,type:this.type,getAttributes:t=>({language:t[1]})}),qp({find:hP,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Ge({key:new Je("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:s,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:o},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(_e.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),fP=Ek,pP=_t.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),gP=_t.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Qe(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:a}=r.extensionManager,l=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&s){const d=l.filter(h=>a.includes(h.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Tk=_t.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Qe(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,i="#".repeat(r);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>qp({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),mP=Tk,yP=_t.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Qe(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!wB(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return lk(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:o,tr:s,dispatch:a})=>{if(a){const{$to:l}=s.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?s.setSelection(_e.create(s.doc,l.pos+1)):l.nodeAfter.isBlock?s.setSelection(xe.create(s.doc,l.pos)):s.setSelection(_e.create(s.doc,l.pos));else{const u=o.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,d=u==null?void 0:u.create();d&&(s.insert(c,d),s.setSelection(_e.create(s.doc,c+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[vB({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),bP=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,xP=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,vP=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,wP=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,CP=_i.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Qe(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Go({find:bP,type:this.type}),Go({find:vP,type:this.type})]},addPasteRules(){return[Qi({find:xP,type:this.type}),Qi({find:wP,type:this.type})]}});const kP="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",SP="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Kp="numeric",Yp="ascii",Xp="alpha",al="asciinumeric",Ga="alphanumeric",Zp="domain",Mk="emoji",_P="scheme",EP="slashscheme",Pf="whitespace";function TP(t,e){return t in e||(e[t]=[]),e[t]}function Ao(t,e,n){e[Kp]&&(e[al]=!0,e[Ga]=!0),e[Yp]&&(e[al]=!0,e[Xp]=!0),e[al]&&(e[Ga]=!0),e[Xp]&&(e[Ga]=!0),e[Ga]&&(e[Zp]=!0),e[Mk]&&(e[Zp]=!0);for(const r in e){const i=TP(r,n);i.indexOf(t)<0&&i.push(t)}}function MP(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Ln(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Ln.groups={};Ln.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],o=e.jr[r][1];if(o&&i.test(t))return o}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||Ln.groups;let i;return e&&e.j?i=e:(i=new Ln(e),n&&r&&Ao(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const o=t.length;if(!o)return i;for(let s=0;s<o-1;s++)i=i.tt(t[s]);return i.tt(t[o-1],e,n,r)},tt(t,e,n,r){r=r||Ln.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const o=e;let s,a=i.go(t);if(a?(s=new Ln,Object.assign(s.j,a.j),s.jr.push.apply(s.jr,a.jr),s.jd=a.jd,s.t=a.t):s=new Ln,o){if(r)if(s.t&&typeof s.t=="string"){const l=Object.assign(MP(s.t,r),n);Ao(o,l,r)}else n&&Ao(o,n,r);s.t=o}return i.j[t]=s,s}};const Fe=(t,e,n,r,i)=>t.ta(e,n,r,i),vt=(t,e,n,r,i)=>t.tr(e,n,r,i),Qb=(t,e,n,r,i)=>t.ts(e,n,r,i),ee=(t,e,n,r,i)=>t.tt(e,n,r,i),li="WORD",Jp="UWORD",Ak="ASCIINUMERICAL",Nk="ALPHANUMERICAL",Rl="LOCALHOST",Qp="TLD",eg="UTLD",fu="SCHEME",Ms="SLASH_SCHEME",Jm="NUM",tg="WS",Qm="NL",ll="OPENBRACE",cl="CLOSEBRACE",Gu="OPENBRACKET",Ku="CLOSEBRACKET",Yu="OPENPAREN",Xu="CLOSEPAREN",Zu="OPENANGLEBRACKET",Ju="CLOSEANGLEBRACKET",Qu="FULLWIDTHLEFTPAREN",ed="FULLWIDTHRIGHTPAREN",td="LEFTCORNERBRACKET",nd="RIGHTCORNERBRACKET",rd="LEFTWHITECORNERBRACKET",id="RIGHTWHITECORNERBRACKET",od="FULLWIDTHLESSTHAN",sd="FULLWIDTHGREATERTHAN",ad="AMPERSAND",ld="APOSTROPHE",cd="ASTERISK",Ii="AT",ud="BACKSLASH",dd="BACKTICK",hd="CARET",$i="COLON",ey="COMMA",fd="DOLLAR",Fr="DOT",pd="EQUALS",ty="EXCLAMATION",tr="HYPHEN",ul="PERCENT",gd="PIPE",md="PLUS",yd="POUND",dl="QUERY",ny="QUOTE",Ok="FULLWIDTHMIDDLEDOT",ry="SEMI",zr="SLASH",hl="TILDE",bd="UNDERSCORE",Lk="EMOJI",xd="SYM";var Rk=Object.freeze({__proto__:null,ALPHANUMERICAL:Nk,AMPERSAND:ad,APOSTROPHE:ld,ASCIINUMERICAL:Ak,ASTERISK:cd,AT:Ii,BACKSLASH:ud,BACKTICK:dd,CARET:hd,CLOSEANGLEBRACKET:Ju,CLOSEBRACE:cl,CLOSEBRACKET:Ku,CLOSEPAREN:Xu,COLON:$i,COMMA:ey,DOLLAR:fd,DOT:Fr,EMOJI:Lk,EQUALS:pd,EXCLAMATION:ty,FULLWIDTHGREATERTHAN:sd,FULLWIDTHLEFTPAREN:Qu,FULLWIDTHLESSTHAN:od,FULLWIDTHMIDDLEDOT:Ok,FULLWIDTHRIGHTPAREN:ed,HYPHEN:tr,LEFTCORNERBRACKET:td,LEFTWHITECORNERBRACKET:rd,LOCALHOST:Rl,NL:Qm,NUM:Jm,OPENANGLEBRACKET:Zu,OPENBRACE:ll,OPENBRACKET:Gu,OPENPAREN:Yu,PERCENT:ul,PIPE:gd,PLUS:md,POUND:yd,QUERY:dl,QUOTE:ny,RIGHTCORNERBRACKET:nd,RIGHTWHITECORNERBRACKET:id,SCHEME:fu,SEMI:ry,SLASH:zr,SLASH_SCHEME:Ms,SYM:xd,TILDE:hl,TLD:Qp,UNDERSCORE:bd,UTLD:eg,UWORD:Jp,WORD:li,WS:tg});const ii=/[a-z]/,Ma=new RegExp("\\p{L}","u"),$f=new RegExp("\\p{Emoji}","u"),oi=/\d/,Ff=/\s/,ex="\r",zf=`
`,AP="",NP="",Hf="";let Rc=null,Ic=null;function OP(t=[]){const e={};Ln.groups=e;const n=new Ln;Rc==null&&(Rc=tx(kP)),Ic==null&&(Ic=tx(SP)),ee(n,"'",ld),ee(n,"{",ll),ee(n,"}",cl),ee(n,"[",Gu),ee(n,"]",Ku),ee(n,"(",Yu),ee(n,")",Xu),ee(n,"<",Zu),ee(n,">",Ju),ee(n,"",Qu),ee(n,"",ed),ee(n,"",td),ee(n,"",nd),ee(n,"",rd),ee(n,"",id),ee(n,"",od),ee(n,"",sd),ee(n,"&",ad),ee(n,"*",cd),ee(n,"@",Ii),ee(n,"`",dd),ee(n,"^",hd),ee(n,":",$i),ee(n,",",ey),ee(n,"$",fd),ee(n,".",Fr),ee(n,"=",pd),ee(n,"!",ty),ee(n,"-",tr),ee(n,"%",ul),ee(n,"|",gd),ee(n,"+",md),ee(n,"#",yd),ee(n,"?",dl),ee(n,'"',ny),ee(n,"/",zr),ee(n,";",ry),ee(n,"~",hl),ee(n,"_",bd),ee(n,"\\",ud),ee(n,"",Ok);const r=vt(n,oi,Jm,{[Kp]:!0});vt(r,oi,r);const i=vt(r,ii,Ak,{[al]:!0}),o=vt(r,Ma,Nk,{[Ga]:!0}),s=vt(n,ii,li,{[Yp]:!0});vt(s,oi,i),vt(s,ii,s),vt(i,oi,i),vt(i,ii,i);const a=vt(n,Ma,Jp,{[Xp]:!0});vt(a,ii),vt(a,oi,o),vt(a,Ma,a),vt(o,oi,o),vt(o,ii),vt(o,Ma,o);const l=ee(n,zf,Qm,{[Pf]:!0}),c=ee(n,ex,tg,{[Pf]:!0}),u=vt(n,Ff,tg,{[Pf]:!0});ee(n,Hf,u),ee(c,zf,l),ee(c,Hf,u),vt(c,Ff,u),ee(u,ex),ee(u,zf),vt(u,Ff,u),ee(u,Hf,u);const d=vt(n,$f,Lk,{[Mk]:!0});ee(d,"#"),vt(d,$f,d),ee(d,AP,d);const h=ee(d,NP);ee(h,"#"),vt(h,$f,d);const f=[[ii,s],[oi,i]],p=[[ii,null],[Ma,a],[oi,o]];for(let g=0;g<Rc.length;g++)Ni(n,Rc[g],Qp,li,f);for(let g=0;g<Ic.length;g++)Ni(n,Ic[g],eg,Jp,p);Ao(Qp,{tld:!0,ascii:!0},e),Ao(eg,{utld:!0,alpha:!0},e),Ni(n,"file",fu,li,f),Ni(n,"mailto",fu,li,f),Ni(n,"http",Ms,li,f),Ni(n,"https",Ms,li,f),Ni(n,"ftp",Ms,li,f),Ni(n,"ftps",Ms,li,f),Ao(fu,{scheme:!0,ascii:!0},e),Ao(Ms,{slashscheme:!0,ascii:!0},e),t=t.sort((g,m)=>g[0]>m[0]?1:-1);for(let g=0;g<t.length;g++){const m=t[g][0],b=t[g][1]?{[_P]:!0}:{[EP]:!0};m.indexOf("-")>=0?b[Zp]=!0:ii.test(m)?oi.test(m)?b[al]=!0:b[Yp]=!0:b[Kp]=!0,Qb(n,m,m,b)}return Qb(n,"localhost",Rl,{ascii:!0}),n.jd=new Ln(xd),{start:n,tokens:Object.assign({groups:e},Rk)}}function Ik(t,e){const n=LP(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,i=[];let o=0,s=0;for(;s<r;){let a=t,l=null,c=0,u=null,d=-1,h=-1;for(;s<r&&(l=a.go(n[s]));)a=l,a.accepts()?(d=0,h=0,u=a):d>=0&&(d+=n[s].length,h++),c+=n[s].length,o+=n[s].length,s++;o-=d,s-=h,c-=d,i.push({t:u.t,v:e.slice(o-c,o),s:o-c,e:o})}return i}function LP(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),o,s=i<55296||i>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}function Ni(t,e,n,r,i){let o;const s=e.length;for(let a=0;a<s-1;a++){const l=e[a];t.j[l]?o=t.j[l]:(o=new Ln(r),o.jr=i.slice(),t.j[l]=o),t=o}return o=new Ln(n),o.jr=i.slice(),t.j[e[s-1]]=o,o}function tx(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let o=0;for(;i.indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let s=parseInt(t.substring(r,r+o),10);s>0;s--)n.pop();r+=o}else n.push(t[r]),r++}return e}const Il={defaultProtocol:"http",events:null,format:nx,formatHref:nx,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function iy(t,e=null){let n=Object.assign({},Il);t&&(n=Object.assign(n,t instanceof iy?t.o:t));const r=n.ignoreTags,i=[];for(let o=0;o<r.length;o++)i.push(r[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}iy.prototype={o:Il,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Il[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function nx(t){return t}function Dk(t,e){this.t="token",this.v=t,this.tk=e}Dk.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Il.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),o=this.toFormattedString(t),s={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),u=t.getObj("attributes",n,e),d=t.getObj("events",n,e);return s.href=r,a&&(s.class=a),l&&(s.target=l),c&&(s.rel=c),u&&Object.assign(s,u),{tagName:i,attributes:s,content:o,eventListeners:d}}};function Th(t,e){class n extends Dk{constructor(i,o){super(i,o),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const rx=Th("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),ix=Th("text"),RP=Th("nl"),Dc=Th("url",{isLink:!0,toHref(t=Il.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Rl&&t[1].t===$i}}),Qn=t=>new Ln(t);function IP({groups:t}){const e=t.domain.concat([ad,cd,Ii,ud,dd,hd,fd,pd,tr,Jm,ul,gd,md,yd,zr,xd,hl,bd]),n=[ld,$i,ey,Fr,ty,ul,dl,ny,ry,Zu,Ju,ll,cl,Ku,Gu,Yu,Xu,Qu,ed,td,nd,rd,id,od,sd],r=[ad,ld,cd,ud,dd,hd,fd,pd,tr,ll,cl,ul,gd,md,yd,dl,zr,xd,hl,bd],i=Qn(),o=ee(i,hl);Fe(o,r,o),Fe(o,t.domain,o);const s=Qn(),a=Qn(),l=Qn();Fe(i,t.domain,s),Fe(i,t.scheme,a),Fe(i,t.slashscheme,l),Fe(s,r,o),Fe(s,t.domain,s);const c=ee(s,Ii);ee(o,Ii,c),ee(a,Ii,c),ee(l,Ii,c);const u=ee(o,Fr);Fe(u,r,o),Fe(u,t.domain,o);const d=Qn();Fe(c,t.domain,d),Fe(d,t.domain,d);const h=ee(d,Fr);Fe(h,t.domain,d);const f=Qn(rx);Fe(h,t.tld,f),Fe(h,t.utld,f),ee(c,Rl,f);const p=ee(d,tr);ee(p,tr,p),Fe(p,t.domain,d),Fe(f,t.domain,d),ee(f,Fr,h),ee(f,tr,p);const g=ee(f,$i);Fe(g,t.numeric,rx);const m=ee(s,tr),y=ee(s,Fr);ee(m,tr,m),Fe(m,t.domain,s),Fe(y,r,o),Fe(y,t.domain,s);const b=Qn(Dc);Fe(y,t.tld,b),Fe(y,t.utld,b),Fe(b,t.domain,s),Fe(b,r,o),ee(b,Fr,y),ee(b,tr,m),ee(b,Ii,c);const C=ee(b,$i),v=Qn(Dc);Fe(C,t.numeric,v);const k=Qn(Dc),w=Qn();Fe(k,e,k),Fe(k,n,w),Fe(w,e,k),Fe(w,n,w),ee(b,zr,k),ee(v,zr,k);const S=ee(a,$i),E=ee(l,$i),R=ee(E,zr),$=ee(R,zr);Fe(a,t.domain,s),ee(a,Fr,y),ee(a,tr,m),Fe(l,t.domain,s),ee(l,Fr,y),ee(l,tr,m),Fe(S,t.domain,k),ee(S,zr,k),ee(S,dl,k),Fe($,t.domain,k),Fe($,e,k),ee($,zr,k);const T=[[ll,cl],[Gu,Ku],[Yu,Xu],[Zu,Ju],[Qu,ed],[td,nd],[rd,id],[od,sd]];for(let P=0;P<T.length;P++){const[B,A]=T[P],M=ee(k,B);ee(w,B,M),ee(M,A,k);const L=Qn(Dc);Fe(M,e,L);const F=Qn();Fe(M,n),Fe(L,e,L),Fe(L,n,F),Fe(F,e,L),Fe(F,n,F),ee(L,A,k),ee(F,A,k)}return ee(i,Rl,b),ee(i,Qm,RP),{start:i,tokens:Rk}}function DP(t,e,n){let r=n.length,i=0,o=[],s=[];for(;i<r;){let a=t,l=null,c=null,u=0,d=null,h=-1;for(;i<r&&!(l=a.go(n[i].t));)s.push(n[i++]);for(;i<r&&(c=l||a.go(n[i].t));)l=null,a=c,a.accepts()?(h=0,d=a):h>=0&&h++,i++,u++;if(h<0)i-=u,i<r&&(s.push(n[i]),i++);else{s.length>0&&(o.push(Wf(ix,e,s)),s=[]),i-=h,u-=h;const f=d.t,p=n.slice(i-u,i);o.push(Wf(f,e,p))}}return s.length>0&&o.push(Wf(ix,e,s)),o}function Wf(t,e,n){const r=n[0].s,i=n[n.length-1].e,o=e.slice(r,i);return new t(o,n)}const BP=typeof console<"u"&&console&&console.warn||(()=>{}),PP="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",mt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function $P(){return Ln.groups={},mt.scanner=null,mt.parser=null,mt.tokenQueue=[],mt.pluginQueue=[],mt.customSchemes=[],mt.initialized=!1,mt}function ox(t,e=!1){if(mt.initialized&&BP(`linkifyjs: already initialized - will not register custom scheme "${t}" ${PP}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);mt.customSchemes.push([t,e])}function FP(){mt.scanner=OP(mt.customSchemes);for(let t=0;t<mt.tokenQueue.length;t++)mt.tokenQueue[t][1]({scanner:mt.scanner});mt.parser=IP(mt.scanner.tokens);for(let t=0;t<mt.pluginQueue.length;t++)mt.pluginQueue[t][1]({scanner:mt.scanner,parser:mt.parser});return mt.initialized=!0,mt}function oy(t){return mt.initialized||FP(),DP(mt.parser.start,t,Ik(mt.scanner.start,t))}oy.scan=Ik;function Bk(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new iy(n),i=oy(t),o=[];for(let s=0;s<i.length;s++){const a=i[s];a.isLink&&(!e||a.t===e)&&r.check(a)&&o.push(a.toFormattedObject(r))}return o}var sy="[\0- -\u2029]",zP=new RegExp(sy),HP=new RegExp(`${sy}$`),WP=new RegExp(sy,"g");function UP(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function jP(t){return new Ge({key:new Je("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),o=e.some(c=>c.getMeta("preventAutolink"));if(!i||o)return;const{tr:s}=r,a=Hm(n.doc,[...e]);if(qm(a).forEach(({newRange:c})=>{const u=ek(r.doc,c,f=>f.isTextblock);let d,h;if(u.length>1)d=u[0],h=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(u.length){const f=r.doc.textBetween(c.from,c.to," "," ");if(!HP.test(f))return;d=u[0],h=r.doc.textBetween(d.pos,c.to,void 0," ")}if(d&&h){const f=h.split(zP).filter(Boolean);if(f.length<=0)return!1;const p=f[f.length-1],g=d.pos+h.lastIndexOf(p);if(!p)return!1;const m=oy(p).map(y=>y.toObject(t.defaultProtocol));if(!UP(m))return!1;m.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>r.schema.marks.code?!r.doc.rangeHasMark(y.from,y.to,r.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{Vm(y.from,y.to,r.doc).some(b=>b.mark.type===t.type)||s.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!s.steps.length)return s}})}function qP(t){return new Ge({key:new Je("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,o;if(r.button!==0||!e.editable)return!1;let s=null;if(r.target instanceof HTMLAnchorElement)s=r.target;else{let u=r.target;const d=[];for(;u.nodeName!=="DIV";)d.push(u),u=u.parentNode;s=d.find(h=>h.nodeName==="A")}if(!s)return!1;const a=ak(e.state,t.type.name),l=(i=s==null?void 0:s.href)!=null?i:a.href,c=(o=s==null?void 0:s.target)!=null?o:a.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),s&&l?(window.open(l,c),!0):!1}}})}function VP(t){return new Ge({key:new Je("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:i}=t,{state:o}=e,{selection:s}=o,{empty:a}=s;if(a)return!1;let l="";r.content.forEach(u=>{l+=u.textContent});const c=Bk(l,{defaultProtocol:t.defaultProtocol}).find(u=>u.isLink&&u.value===l);return!l||!c||i!==void 0&&!i(c.href)?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function xo(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(WP,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var GP=_i.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){ox(t);return}ox(t.scheme,t.optionalSlashes)})},onDestroy(){$P()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!xo(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!xo(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!xo(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Qe(this.options.HTMLAttributes,t),0]:["a",Qe(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!xo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!xo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Qi({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=Bk(t).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:s=>!!xo(s,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(o=>{this.options.shouldAutoLink(o.value)&&e.push({text:o.value,data:{href:o.href},index:o.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(jP({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!xo(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(qP({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(VP({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),KP=Object.defineProperty,YP=(t,e)=>{for(var n in e)KP(t,n,{get:e[n],enumerable:!0})},XP="listItem",sx="textStyle",ax=/^\s*([-+*])\s$/,Pk=_t.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Qe(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(XP,this.editor.getAttributes(sx)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=na({find:ax,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=na({find:ax,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(sx),editor:this.editor})),[t]}}),$k=_t.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Qe(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))n=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const s=t.tokens.slice(1),a=e.parseChildren(s);n.push(...a)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>Xm(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ZP={};YP(ZP,{findListItemPos:()=>ic,getNextListDepth:()=>ay,handleBackspace:()=>ng,handleDelete:()=>rg,hasListBefore:()=>Fk,hasListItemAfter:()=>JP,hasListItemBefore:()=>zk,listItemHasSubList:()=>Hk,nextListIsDeeper:()=>Wk,nextListIsHigher:()=>Uk});var ic=(t,e)=>{const{$from:n}=e.selection,r=It(t,e.schema);let i=null,o=n.depth,s=n.pos,a=null;for(;o>0&&a===null;)i=n.node(o),i.type===r?a=o:(o-=1,s-=1);return a===null?null:{$pos:e.doc.resolve(s),depth:a}},ay=(t,e)=>{const n=ic(t,e);if(!n)return!1;const[,r]=DD(e,t,n.$pos.pos+4);return r},Fk=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),o=t.doc.resolve(i).node();return!(!o||!n.includes(o.type.name))},zk=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},Hk=(t,e,n)=>{if(!n)return!1;const r=It(t,e.schema);let i=!1;return n.descendants(o=>{o.type===r&&(i=!0)}),i},ng=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Ji(t.state,e)&&Fk(t.state,e,n)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),c=[];l.node().descendants((h,f)=>{h.type.name===e&&c.push({node:h,pos:f})});const u=c.at(-1);if(!u)return!1;const d=t.state.doc.resolve(l.start()+u.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},d.end()).joinForward().run()}if(!Ji(t.state,e)||!FD(t.state))return!1;const r=ic(e,t.state);if(!r)return!1;const o=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),s=Hk(e,t.state,o);return zk(e,t.state)&&!s?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},Wk=(t,e)=>{const n=ay(t,e),r=ic(t,e);return!r||!n?!1:n>r.depth},Uk=(t,e)=>{const n=ay(t,e),r=ic(t,e);return!r||!n?!1:n<r.depth},rg=(t,e)=>{if(!Ji(t.state,e)||!$D(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:Wk(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():Uk(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},JP=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},jk=Ye.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&rg(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&rg(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&ng(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&ng(t,n,r)&&(e=!0)}),e}}}}),lx=/^(\s*)(\d+)\.\s+(.*)$/,QP=/^\s/;function e$(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n],o=i.match(lx);if(!o)break;const[,s,a,l]=o,c=s.length;let u=l,d=n+1;const h=[i];for(;d<t.length;){const f=t[d];if(f.match(lx))break;if(f.trim()==="")h.push(f),u+=`
`,d+=1;else if(f.match(QP))h.push(f),u+=`
${f.slice(c+2)}`,d+=1;else break}e.push({indent:c,number:parseInt(a,10),content:u.trim(),raw:h.join(`
`)}),r=d,n=d}return[e,r]}function qk(t,e,n){var r;const i=[];let o=0;for(;o<t.length;){const s=t[o];if(s.indent===e){const a=s.content.split(`
`),l=((r=a[0])==null?void 0:r.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:n.inlineTokens(l)});const u=a.slice(1).join(`
`).trim();if(u){const f=n.blockTokens(u);c.push(...f)}let d=o+1;const h=[];for(;d<t.length&&t[d].indent>e;)h.push(t[d]),d+=1;if(h.length>0){const f=Math.min(...h.map(g=>g.indent)),p=qk(h,f,n);c.push({type:"list",ordered:!0,start:h[0].number,items:p,raw:h.map(g=>g.raw).join(`
`)})}i.push({type:"list_item",raw:s.raw,tokens:c}),o=d}else o+=1}return i}function t$(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const o=e.parseChildren([i]);r.push({type:"paragraph",content:o})}else{const o=e.parseChildren([i]);o.length>0&&r.push(...o)}}),{type:"listItem",content:r}})}var n$="listItem",cx="textStyle",ux=/^(\d+)\.\s$/,Vk=_t.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Qe(this.options.HTMLAttributes,n),0]:["ol",Qe(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?t$(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e==null?void 0:e.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const i=t.split(`
`),[o,s]=e$(i);if(o.length===0)return;const a=qk(o,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=o[0])==null?void 0:r.number)||1,items:a,raw:i.slice(0,s).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(n$,this.editor.getAttributes(cx)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=na({find:ux,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=na({find:ux,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(cx)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),r$=/^\s*(\[([( |x])?\])\s$/,Gk=_t.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Qe(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const i=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return Xm(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),o=document.createElement("label"),s=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=u=>{var d,h;a.ariaLabel=((h=(d=this.options.a11y)==null?void 0:d.checkboxLabel)==null?void 0:h.call(d,u,a.checked))||`Task item checkbox for ${u.textContent||"empty task item"}`};return c(t),o.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",u=>u.preventDefault()),a.addEventListener("change",u=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:d}=u.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:h})=>{const f=n();if(typeof f!="number")return!1;const p=h.doc.nodeAt(f);return h.setNodeMarkup(f,void 0,{...p==null?void 0:p.attrs,checked:d}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,d)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([u,d])=>{i.setAttribute(u,d)}),i.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,o.append(a,s),i.append(o,l),Object.entries(e).forEach(([u,d])=>{i.setAttribute(u,d)}),{dom:i,contentDOM:l,update:u=>u.type!==this.type?!1:(i.dataset.checked=u.attrs.checked,a.checked=u.attrs.checked,c(u),!0)}}},addInputRules(){return[na({find:r$,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),Kk=_t.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Qe(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=o=>{const s=Vp(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},n);return s?[{type:"taskList",raw:s.raw,items:s.items}]:n.blockTokens(o)},i=Vp(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,s)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:n.inlineTokens(o.mainContent),nestedTokens:s}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Ye.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(Pk.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push($k.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(jk.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(Vk.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(Gk.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(Kk.configure(this.options.taskList)),t}});var i$=_t.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Qe(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),o$=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,s$=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,a$=_i.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Qe(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Go({find:o$,type:this.type})]},addPasteRules(){return[Qi({find:s$,type:this.type})]}}),l$=_t.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),Yk=_i.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Qe(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const o=i[2].trim();return{type:"underline",raw:i[0],text:o,tokens:n.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),c$=Yk;function u$(t={}){return new Ge({view(e){return new d$(e,t)}})}class d${constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,o=i.getBoundingClientRect(),s=o.width/i.offsetWidth,a=o.height/i.offsetHeight;if(n){let d=e.nodeBefore,h=e.nodeAfter;if(d||h){let f=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(f){let p=f.getBoundingClientRect(),g=d?p.bottom:p.top;d&&h&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let m=this.width/2*a;r={left:p.left,right:p.right,top:g-m,bottom:g+m}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*s;r={left:d.left-h,right:d.left+h,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let d=l.getBoundingClientRect(),h=d.width/l.offsetWidth,f=d.height/l.offsetHeight;c=d.left-l.scrollLeft*h,u=d.top-l.scrollTop*f}this.element.style.left=(r.left-c)/s+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=vm(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class wt extends Ie{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return wt.valid(r)?new wt(r):Ie.near(r)}content(){return re.empty}eq(e){return e instanceof wt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new wt(e.resolve(n.pos))}getBookmark(){return new ly(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!h$(e)||!f$(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&wt.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let a=e.node(s);if(n>0?e.indexAfter(s)<a.childCount:e.index(s)>0){o=a.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let l=e.doc.resolve(i);if(wt.valid(l))return l}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!xe.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let a=e.doc.resolve(i);if(wt.valid(a))return a}return null}}}wt.prototype.visible=!1;wt.findFrom=wt.findGapCursorFrom;Ie.jsonID("gapcursor",wt);class ly{constructor(e){this.pos=e}map(e){return new ly(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return wt.valid(n)?new wt(n):Ie.near(n)}}function Xk(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function h$(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||Xk(i.type))return!0;if(i.inlineContent)return!1}}return!0}function f$(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||Xk(i.type))return!0;if(i.inlineContent)return!1}}return!0}function p$(){return new Ge({props:{decorations:b$,createSelectionBetween(t,e,n){return e.pos==n.pos&&wt.valid(n)?new wt(n):null},handleClick:m$,handleKeyDown:g$,handleDOMEvents:{beforeinput:y$}}})}const g$=Pm({ArrowLeft:Bc("horiz",-1),ArrowRight:Bc("horiz",1),ArrowUp:Bc("vert",-1),ArrowDown:Bc("vert",1)});function Bc(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof _e){if(!o.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=wt.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new wt(c))),!0):!1}}function m$(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!wt.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&xe.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new wt(r))),!0)}function y$(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof wt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=V.empty;for(let s=r.length-1;s>=0;s--)i=V.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new re(i,0,0));return o.setSelection(_e.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function b$(t){if(!(t.selection instanceof wt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",at.create(t.doc,[St.widget(t.selection.head,e,{key:"gapcursor"})])}var vd=200,qt=function(){};qt.prototype.append=function(e){return e.length?(e=qt.from(e),!this.length&&e||e.length<vd&&this.leafAppend(e)||this.length<vd&&e.leafPrepend(this)||this.appendInner(e)):this};qt.prototype.prepend=function(e){return e.length?qt.from(e).append(this):this};qt.prototype.appendInner=function(e){return new x$(this,e)};qt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?qt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};qt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};qt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};qt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};qt.from=function(e){return e instanceof qt?e:e&&e.length?new Zk(e):qt.empty};var Zk=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,a){for(var l=o;l<s;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,a){for(var l=o-1;l>=s;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=vd)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=vd)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(qt);qt.empty=new Zk([]);var x$=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(o,a),s)===!1||o>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,o)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(o,a)-a,s+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(i,a),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(qt);const v$=500;class wr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,a,l,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){i||(i=this.remapping(r,h+1),o=i.maps.length),o--,u.push(d);return}if(i){u.push(new Hr(d.map));let f=d.step.map(i.slice(o)),p;f&&s.maybeStep(f).doc&&(p=s.mapping.maps[s.mapping.maps.length-1],c.push(new Hr(p,void 0,void 0,c.length+u.length))),o--,p&&i.appendMap(p,o)}else s.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(o)):d.selection,l=new wr(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,n,r,i){let o=[],s=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),h=new Hr(e.mapping.maps[u],d,n),f;(f=l&&l.merge(h))&&(h=f,u?o.pop():a=a.slice(0,a.length-1)),o.push(h),n&&(s++,n=void 0),i||(l=h)}let c=s-r.depth;return c>C$&&(a=w$(a,c),s-=c),new wr(a.append(o),s)}remapping(e,n){let r=new _l;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new wr(this.items.append(e.map(n=>new Hr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},i);let l=n;this.items.forEach(h=>{let f=o.getMirror(--l);if(f==null)return;s=Math.min(s,f);let p=o.maps[f];if(h.step){let g=e.steps[f].invert(e.docs[f]),m=h.selection&&h.selection.map(o.slice(l+1,f));m&&a++,r.push(new Hr(p,g,m))}else r.push(new Hr(p))},i);let c=[];for(let h=n;h<s;h++)c.push(new Hr(o.maps[h]));let u=this.items.slice(0,i).append(c).append(r),d=new wr(u,a);return d.emptyItemCount()>v$&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,a)=>{if(a>=e)i.push(s),s.selection&&o++;else if(s.step){let l=s.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=s.selection&&s.selection.map(n.slice(r));u&&o++;let d=new Hr(c.invert(),l,u),h,f=i.length-1;(h=i.length&&i[f].merge(d))?i[f]=h:i.push(d)}}else s.map&&r--},this.items.length,0),new wr(qt.from(i.reverse()),o)}}wr.empty=new wr(qt.empty,0);function w$(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Hr{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Hr(n.getMap().invert(),n,this.selection)}}}class Di{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const C$=20;function k$(t,e,n,r){let i=n.getMeta(Fo),o;if(i)return i.historyState;n.getMeta(E$)&&(t=new Di(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(Fo))return s.getMeta(Fo).redo?new Di(t.done.addTransform(n,void 0,r,pu(e)),t.undone,dx(n.mapping.maps),t.prevTime,t.prevComposition):new Di(t.done,t.undone.addTransform(n,void 0,r,pu(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!s&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!S$(n,t.prevRanges)),c=s?Uf(t.prevRanges,n.mapping):dx(n.mapping.maps);return new Di(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,pu(e)),wr.empty,c,n.time,a??t.prevComposition)}else return(o=n.getMeta("rebased"))?new Di(t.done.rebased(n,o),t.undone.rebased(n,o),Uf(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Di(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Uf(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function S$(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function dx(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,s)=>e.push(o,s));return e}function Uf(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function _$(t,e,n){let r=pu(e),i=Fo.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),a=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),l=new Di(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(Fo,{redo:n,historyState:l})}let jf=!1,hx=null;function pu(t){let e=t.plugins;if(hx!=e){jf=!1,hx=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){jf=!0;break}}return jf}const Fo=new Je("history"),E$=new Je("closeHistory");function T$(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Ge({key:Fo,state:{init(){return new Di(wr.empty,wr.empty,null,0,-1)},apply(e,n,r){return k$(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?Qk:r=="historyRedo"?eS:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function Jk(t,e){return(n,r)=>{let i=Fo.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=_$(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const Qk=Jk(!1,!0),eS=Jk(!0,!0);Ye.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new Ge({key:new Je("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const o=this.storage.characters({node:r.doc});if(o>i){const s=o-i,a=0,l=s;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const c=r.tr.deleteRange(a,l);return t=!0,c}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),o=this.storage.characters({node:e.doc});if(o<=r||i>r&&o>r&&o<=i)return!0;if(i>r&&o>r&&o>i||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=o-r,c=a-l,u=a;return e.deleteRange(c,u),!(this.storage.characters({node:e.doc})>r)}})]}});var M$=Ye.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[u$(this.options)]}});Ye.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Ge({key:new Je("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,o=[];if(!n||!r)return at.create(t,[]);let s=0;this.options.mode==="deepest"&&t.descendants((l,c)=>{if(l.isText)return;if(!(i>=c&&i<=c+l.nodeSize-1))return!1;s+=1});let a=0;return t.descendants((l,c)=>{if(l.isText||!(i>=c&&i<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&s-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";o.push(St.node(c,c+l.nodeSize,{class:this.options.className}))}),at.create(t,o)}}})]}});var A$=Ye.create({name:"gapCursor",addProseMirrorPlugins(){return[p$()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=et(Se(t,"allowGapCursor",n)))!=null?e:null}}}),N$=Ye.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Ge({key:new Je("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const o=this.editor.isEmpty;return t.descendants((s,a)=>{const l=r>=a&&r<=a+s.nodeSize,c=!s.isLeaf&&kh(s);if((l||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];o&&u.push(this.options.emptyEditorClass);const d=St.node(a,a+s.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:s,pos:a,hasAnchor:l}):this.options.placeholder});i.push(d)}return this.options.includeChildren}),at.create(t,i)}}})]}});Ye.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Ge({key:new Je("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||lk(n.selection)||t.view.dragging?null:at.create(n.doc,[St.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function fx({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var O$=Ye.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Je(this.name),n=((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||this.options.node||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new Ge({key:e,appendTransaction:(i,o,s)=>{const{doc:a,tr:l,schema:c}=s,u=e.getState(s),d=a.content.size,h=c.nodes[n];if(u)return l.insert(d,h.create())},state:{init:(i,o)=>{const s=o.tr.doc.lastChild;return!fx({node:s,types:r})},apply:(i,o)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return o;const s=i.doc.lastChild;return!fx({node:s,types:r})}}})]}}),L$=Ye.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>Qk(t,e),redo:()=>({state:t,dispatch:e})=>eS(t,e)}},addProseMirrorPlugins(){return[T$(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),R$=Ye.create({name:"starterKit",addExtensions(){var t,e,n,r;const i=[];return this.options.bold!==!1&&i.push(aP.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(nP.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(Pk.configure(this.options.bulletList)),this.options.code!==!1&&i.push(uP.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(Ek.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(pP.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(M$.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(A$.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(gP.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(Tk.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(L$.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(yP.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(CP.configure(this.options.italic)),this.options.listItem!==!1&&i.push($k.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(jk.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(GP.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(Vk.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(i$.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(a$.configure(this.options.strike)),this.options.text!==!1&&i.push(l$.configure(this.options.text)),this.options.underline!==!1&&i.push(Yk.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(O$.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),cy=R$,tS=N$,qf,px;function I$(){if(px)return qf;px=1;function t(N){return N instanceof Map?N.clear=N.delete=N.set=function(){throw new Error("map is read-only")}:N instanceof Set&&(N.add=N.clear=N.delete=function(){throw new Error("set is read-only")}),Object.freeze(N),Object.getOwnPropertyNames(N).forEach(U=>{const X=N[U],Me=typeof X;(Me==="object"||Me==="function")&&!Object.isFrozen(X)&&t(X)}),N}class e{constructor(U){U.data===void 0&&(U.data={}),this.data=U.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function n(N){return N.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(N,...U){const X=Object.create(null);for(const Me in N)X[Me]=N[Me];return U.forEach(function(Me){for(const ut in Me)X[ut]=Me[ut]}),X}const i="</span>",o=N=>!!N.scope,s=(N,{prefix:U})=>{if(N.startsWith("language:"))return N.replace("language:","language-");if(N.includes(".")){const X=N.split(".");return[`${U}${X.shift()}`,...X.map((Me,ut)=>`${Me}${"_".repeat(ut+1)}`)].join(" ")}return`${U}${N}`};class a{constructor(U,X){this.buffer="",this.classPrefix=X.classPrefix,U.walk(this)}addText(U){this.buffer+=n(U)}openNode(U){if(!o(U))return;const X=s(U.scope,{prefix:this.classPrefix});this.span(X)}closeNode(U){o(U)&&(this.buffer+=i)}value(){return this.buffer}span(U){this.buffer+=`<span class="${U}">`}}const l=(N={})=>{const U={children:[]};return Object.assign(U,N),U};class c{constructor(){this.rootNode=l(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(U){this.top.children.push(U)}openNode(U){const X=l({scope:U});this.add(X),this.stack.push(X)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(U){return this.constructor._walk(U,this.rootNode)}static _walk(U,X){return typeof X=="string"?U.addText(X):X.children&&(U.openNode(X),X.children.forEach(Me=>this._walk(U,Me)),U.closeNode(X)),U}static _collapse(U){typeof U!="string"&&U.children&&(U.children.every(X=>typeof X=="string")?U.children=[U.children.join("")]:U.children.forEach(X=>{c._collapse(X)}))}}class u extends c{constructor(U){super(),this.options=U}addText(U){U!==""&&this.add(U)}startScope(U){this.openNode(U)}endScope(){this.closeNode()}__addSublanguage(U,X){const Me=U.root;X&&(Me.scope=`language:${X}`),this.add(Me)}toHTML(){return new a(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function d(N){return N?typeof N=="string"?N:N.source:null}function h(N){return g("(?=",N,")")}function f(N){return g("(?:",N,")*")}function p(N){return g("(?:",N,")?")}function g(...N){return N.map(X=>d(X)).join("")}function m(N){const U=N[N.length-1];return typeof U=="object"&&U.constructor===Object?(N.splice(N.length-1,1),U):{}}function y(...N){return"("+(m(N).capture?"":"?:")+N.map(Me=>d(Me)).join("|")+")"}function b(N){return new RegExp(N.toString()+"|").exec("").length-1}function C(N,U){const X=N&&N.exec(U);return X&&X.index===0}const v=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function k(N,{joinWith:U}){let X=0;return N.map(Me=>{X+=1;const ut=X;let it=d(Me),he="";for(;it.length>0;){const de=v.exec(it);if(!de){he+=it;break}he+=it.substring(0,de.index),it=it.substring(de.index+de[0].length),de[0][0]==="\\"&&de[1]?he+="\\"+String(Number(de[1])+ut):(he+=de[0],de[0]==="("&&X++)}return he}).map(Me=>`(${Me})`).join(U)}const w=/\b\B/,S="[a-zA-Z]\\w*",E="[a-zA-Z_]\\w*",R="\\b\\d+(\\.\\d+)?",$="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",T="\\b(0b[01]+)",P="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",B=(N={})=>{const U=/^#![ ]*\//;return N.binary&&(N.begin=g(U,/.*\b/,N.binary,/\b.*/)),r({scope:"meta",begin:U,end:/$/,relevance:0,"on:begin":(X,Me)=>{X.index!==0&&Me.ignoreMatch()}},N)},A={begin:"\\\\[\\s\\S]",relevance:0},M={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[A]},L={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[A]},F={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},I=function(N,U,X={}){const Me=r({scope:"comment",begin:N,end:U,contains:[]},X);Me.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const ut=y("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return Me.contains.push({begin:g(/[ ]+/,"(",ut,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),Me},q=I("//","$"),Z=I("/\\*","\\*/"),Q=I("#","$"),H={scope:"number",begin:R,relevance:0},Y={scope:"number",begin:$,relevance:0},oe={scope:"number",begin:T,relevance:0},K={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[A,{begin:/\[/,end:/\]/,relevance:0,contains:[A]}]},ne={scope:"title",begin:S,relevance:0},ue={scope:"title",begin:E,relevance:0},ke={begin:"\\.\\s*"+E,relevance:0};var De=Object.freeze({__proto__:null,APOS_STRING_MODE:M,BACKSLASH_ESCAPE:A,BINARY_NUMBER_MODE:oe,BINARY_NUMBER_RE:T,COMMENT:I,C_BLOCK_COMMENT_MODE:Z,C_LINE_COMMENT_MODE:q,C_NUMBER_MODE:Y,C_NUMBER_RE:$,END_SAME_AS_BEGIN:function(N){return Object.assign(N,{"on:begin":(U,X)=>{X.data._beginMatch=U[1]},"on:end":(U,X)=>{X.data._beginMatch!==U[1]&&X.ignoreMatch()}})},HASH_COMMENT_MODE:Q,IDENT_RE:S,MATCH_NOTHING_RE:w,METHOD_GUARD:ke,NUMBER_MODE:H,NUMBER_RE:R,PHRASAL_WORDS_MODE:F,QUOTE_STRING_MODE:L,REGEXP_MODE:K,RE_STARTERS_RE:P,SHEBANG:B,TITLE_MODE:ne,UNDERSCORE_IDENT_RE:E,UNDERSCORE_TITLE_MODE:ue});function Xe(N,U){N.input[N.index-1]==="."&&U.ignoreMatch()}function Et(N,U){N.className!==void 0&&(N.scope=N.className,delete N.className)}function bt(N,U){U&&N.beginKeywords&&(N.begin="\\b("+N.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",N.__beforeBegin=Xe,N.keywords=N.keywords||N.beginKeywords,delete N.beginKeywords,N.relevance===void 0&&(N.relevance=0))}function Vt(N,U){Array.isArray(N.illegal)&&(N.illegal=y(...N.illegal))}function rn(N,U){if(N.match){if(N.begin||N.end)throw new Error("begin & end are not supported with match");N.begin=N.match,delete N.match}}function He(N,U){N.relevance===void 0&&(N.relevance=1)}const on=(N,U)=>{if(!N.beforeMatch)return;if(N.starts)throw new Error("beforeMatch cannot be used with starts");const X=Object.assign({},N);Object.keys(N).forEach(Me=>{delete N[Me]}),N.keywords=X.keywords,N.begin=g(X.beforeMatch,h(X.begin)),N.starts={relevance:0,contains:[Object.assign(X,{endsParent:!0})]},N.relevance=0,delete X.beforeMatch},Dt=["of","and","for","in","not","or","if","then","parent","list","value"],Fn="keyword";function Gt(N,U,X=Fn){const Me=Object.create(null);return typeof N=="string"?ut(X,N.split(" ")):Array.isArray(N)?ut(X,N):Object.keys(N).forEach(function(it){Object.assign(Me,Gt(N[it],U,it))}),Me;function ut(it,he){U&&(he=he.map(de=>de.toLowerCase())),he.forEach(function(de){const Le=de.split("|");Me[Le[0]]=[it,zn(Le[0],Le[1])]})}}function zn(N,U){return U?Number(U):Or(N)?0:1}function Or(N){return Dt.includes(N.toLowerCase())}const Jn={},Kt=N=>{console.error(N)},Hn=(N,...U)=>{console.log(`WARN: ${N}`,...U)},Ht=(N,U)=>{Jn[`${N}/${U}`]||(console.log(`Deprecated as of ${N}. ${U}`),Jn[`${N}/${U}`]=!0)},sn=new Error;function Lr(N,U,{key:X}){let Me=0;const ut=N[X],it={},he={};for(let de=1;de<=U.length;de++)he[de+Me]=ut[de],it[de+Me]=!0,Me+=b(U[de-1]);N[X]=he,N[X]._emit=it,N[X]._multi=!0}function ps(N){if(Array.isArray(N.begin)){if(N.skip||N.excludeBegin||N.returnBegin)throw Kt("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),sn;if(typeof N.beginScope!="object"||N.beginScope===null)throw Kt("beginScope must be object"),sn;Lr(N,N.begin,{key:"beginScope"}),N.begin=k(N.begin,{joinWith:""})}}function gs(N){if(Array.isArray(N.end)){if(N.skip||N.excludeEnd||N.returnEnd)throw Kt("skip, excludeEnd, returnEnd not compatible with endScope: {}"),sn;if(typeof N.endScope!="object"||N.endScope===null)throw Kt("endScope must be object"),sn;Lr(N,N.end,{key:"endScope"}),N.end=k(N.end,{joinWith:""})}}function go(N){N.scope&&typeof N.scope=="object"&&N.scope!==null&&(N.beginScope=N.scope,delete N.scope)}function ms(N){go(N),typeof N.beginScope=="string"&&(N.beginScope={_wrap:N.beginScope}),typeof N.endScope=="string"&&(N.endScope={_wrap:N.endScope}),ps(N),gs(N)}function Ti(N){function U(he,de){return new RegExp(d(he),"m"+(N.case_insensitive?"i":"")+(N.unicodeRegex?"u":"")+(de?"g":""))}class X{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(de,Le){Le.position=this.position++,this.matchIndexes[this.matchAt]=Le,this.regexes.push([Le,de]),this.matchAt+=b(de)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const de=this.regexes.map(Le=>Le[1]);this.matcherRe=U(k(de,{joinWith:"|"}),!0),this.lastIndex=0}exec(de){this.matcherRe.lastIndex=this.lastIndex;const Le=this.matcherRe.exec(de);if(!Le)return null;const Nt=Le.findIndex((Un,ys)=>ys>0&&Un!==void 0),Ze=this.matchIndexes[Nt];return Le.splice(0,Nt),Object.assign(Le,Ze)}}class Me{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(de){if(this.multiRegexes[de])return this.multiRegexes[de];const Le=new X;return this.rules.slice(de).forEach(([Nt,Ze])=>Le.addRule(Nt,Ze)),Le.compile(),this.multiRegexes[de]=Le,Le}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(de,Le){this.rules.push([de,Le]),Le.type==="begin"&&this.count++}exec(de){const Le=this.getMatcher(this.regexIndex);Le.lastIndex=this.lastIndex;let Nt=Le.exec(de);if(this.resumingScanAtSamePosition()&&!(Nt&&Nt.index===this.lastIndex)){const Ze=this.getMatcher(0);Ze.lastIndex=this.lastIndex+1,Nt=Ze.exec(de)}return Nt&&(this.regexIndex+=Nt.position+1,this.regexIndex===this.count&&this.considerAll()),Nt}}function ut(he){const de=new Me;return he.contains.forEach(Le=>de.addRule(Le.begin,{rule:Le,type:"begin"})),he.terminatorEnd&&de.addRule(he.terminatorEnd,{type:"end"}),he.illegal&&de.addRule(he.illegal,{type:"illegal"}),de}function it(he,de){const Le=he;if(he.isCompiled)return Le;[Et,rn,ms,on].forEach(Ze=>Ze(he,de)),N.compilerExtensions.forEach(Ze=>Ze(he,de)),he.__beforeBegin=null,[bt,Vt,He].forEach(Ze=>Ze(he,de)),he.isCompiled=!0;let Nt=null;return typeof he.keywords=="object"&&he.keywords.$pattern&&(he.keywords=Object.assign({},he.keywords),Nt=he.keywords.$pattern,delete he.keywords.$pattern),Nt=Nt||/\w+/,he.keywords&&(he.keywords=Gt(he.keywords,N.case_insensitive)),Le.keywordPatternRe=U(Nt,!0),de&&(he.begin||(he.begin=/\B|\b/),Le.beginRe=U(Le.begin),!he.end&&!he.endsWithParent&&(he.end=/\B|\b/),he.end&&(Le.endRe=U(Le.end)),Le.terminatorEnd=d(Le.end)||"",he.endsWithParent&&de.terminatorEnd&&(Le.terminatorEnd+=(he.end?"|":"")+de.terminatorEnd)),he.illegal&&(Le.illegalRe=U(he.illegal)),he.contains||(he.contains=[]),he.contains=[].concat(...he.contains.map(function(Ze){return ae(Ze==="self"?he:Ze)})),he.contains.forEach(function(Ze){it(Ze,Le)}),he.starts&&it(he.starts,de),Le.matcher=ut(Le),Le}if(N.compilerExtensions||(N.compilerExtensions=[]),N.contains&&N.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return N.classNameAliases=r(N.classNameAliases||{}),it(N)}function W(N){return N?N.endsWithParent||W(N.starts):!1}function ae(N){return N.variants&&!N.cachedVariants&&(N.cachedVariants=N.variants.map(function(U){return r(N,{variants:null},U)})),N.cachedVariants?N.cachedVariants:W(N)?r(N,{starts:N.starts?r(N.starts):null}):Object.isFrozen(N)?r(N):N}var Ee="11.11.1";class qe extends Error{constructor(U,X){super(U),this.name="HTMLInjectionError",this.html=X}}const $e=n,Tt=r,Mt=Symbol("nomatch"),Wn=7,mo=function(N){const U=Object.create(null),X=Object.create(null),Me=[];let ut=!0;const it="Could not find the language '{}', did you forget to load/include a language module?",he={disableAutodetect:!0,name:"Plain text",contains:[]};let de={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:u};function Le(te){return de.noHighlightRe.test(te)}function Nt(te){let le=te.className+" ";le+=te.parentNode?te.parentNode.className:"";const We=de.languageDetectRe.exec(le);if(We){const ot=J(We[1]);return ot||(Hn(it.replace("{}",We[1])),Hn("Falling back to no-highlight mode for this block.",te)),ot?We[1]:"no-highlight"}return le.split(/\s+/).find(ot=>Le(ot)||J(ot))}function Ze(te,le,We){let ot="",Bt="";typeof le=="object"?(ot=te,We=le.ignoreIllegals,Bt=le.language):(Ht("10.7.0","highlight(lang, code, ...args) has been deprecated."),Ht("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Bt=te,ot=le),We===void 0&&(We=!0);const mr={code:ot,language:Bt};Nn("before:highlight",mr);const Ai=mr.result?mr.result:Un(mr.language,mr.code,We);return Ai.code=mr.code,Nn("after:highlight",Ai),Ai}function Un(te,le,We,ot){const Bt=Object.create(null);function mr(se,we){return se.keywords[we]}function Ai(){if(!Pe.keywords){Yt.addText(ft);return}let se=0;Pe.keywordPatternRe.lastIndex=0;let we=Pe.keywordPatternRe.exec(ft),ze="";for(;we;){ze+=ft.substring(se,we.index);const st=Ir.case_insensitive?we[0].toLowerCase():we[0],ln=mr(Pe,st);if(ln){const[ni,bO]=ln;if(Yt.addText(ze),ze="",Bt[st]=(Bt[st]||0)+1,Bt[st]<=Wn&&(_c+=bO),ni.startsWith("_"))ze+=we[0];else{const xO=Ir.classNameAliases[ni]||ni;Rr(we[0],xO)}}else ze+=we[0];se=Pe.keywordPatternRe.lastIndex,we=Pe.keywordPatternRe.exec(ft)}ze+=ft.substring(se),Yt.addText(ze)}function kc(){if(ft==="")return;let se=null;if(typeof Pe.subLanguage=="string"){if(!U[Pe.subLanguage]){Yt.addText(ft);return}se=Un(Pe.subLanguage,ft,!0,$0[Pe.subLanguage]),$0[Pe.subLanguage]=se._top}else se=bs(ft,Pe.subLanguage.length?Pe.subLanguage:null);Pe.relevance>0&&(_c+=se.relevance),Yt.__addSublanguage(se._emitter,se.language)}function jn(){Pe.subLanguage!=null?kc():Ai(),ft=""}function Rr(se,we){se!==""&&(Yt.startScope(we),Yt.addText(se),Yt.endScope())}function I0(se,we){let ze=1;const st=we.length-1;for(;ze<=st;){if(!se._emit[ze]){ze++;continue}const ln=Ir.classNameAliases[se[ze]]||se[ze],ni=we[ze];ln?Rr(ni,ln):(ft=ni,Ai(),ft=""),ze++}}function D0(se,we){return se.scope&&typeof se.scope=="string"&&Yt.openNode(Ir.classNameAliases[se.scope]||se.scope),se.beginScope&&(se.beginScope._wrap?(Rr(ft,Ir.classNameAliases[se.beginScope._wrap]||se.beginScope._wrap),ft=""):se.beginScope._multi&&(I0(se.beginScope,we),ft="")),Pe=Object.create(se,{parent:{value:Pe}}),Pe}function B0(se,we,ze){let st=C(se.endRe,ze);if(st){if(se["on:end"]){const ln=new e(se);se["on:end"](we,ln),ln.isMatchIgnored&&(st=!1)}if(st){for(;se.endsParent&&se.parent;)se=se.parent;return se}}if(se.endsWithParent)return B0(se.parent,we,ze)}function fO(se){return Pe.matcher.regexIndex===0?(ft+=se[0],1):(df=!0,0)}function pO(se){const we=se[0],ze=se.rule,st=new e(ze),ln=[ze.__beforeBegin,ze["on:begin"]];for(const ni of ln)if(ni&&(ni(se,st),st.isMatchIgnored))return fO(we);return ze.skip?ft+=we:(ze.excludeBegin&&(ft+=we),jn(),!ze.returnBegin&&!ze.excludeBegin&&(ft=we)),D0(ze,se),ze.returnBegin?0:we.length}function gO(se){const we=se[0],ze=le.substring(se.index),st=B0(Pe,se,ze);if(!st)return Mt;const ln=Pe;Pe.endScope&&Pe.endScope._wrap?(jn(),Rr(we,Pe.endScope._wrap)):Pe.endScope&&Pe.endScope._multi?(jn(),I0(Pe.endScope,se)):ln.skip?ft+=we:(ln.returnEnd||ln.excludeEnd||(ft+=we),jn(),ln.excludeEnd&&(ft=we));do Pe.scope&&Yt.closeNode(),!Pe.skip&&!Pe.subLanguage&&(_c+=Pe.relevance),Pe=Pe.parent;while(Pe!==st.parent);return st.starts&&D0(st.starts,se),ln.returnEnd?0:we.length}function mO(){const se=[];for(let we=Pe;we!==Ir;we=we.parent)we.scope&&se.unshift(we.scope);se.forEach(we=>Yt.openNode(we))}let Sc={};function P0(se,we){const ze=we&&we[0];if(ft+=se,ze==null)return jn(),0;if(Sc.type==="begin"&&we.type==="end"&&Sc.index===we.index&&ze===""){if(ft+=le.slice(we.index,we.index+1),!ut){const st=new Error(`0 width match regex (${te})`);throw st.languageName=te,st.badRule=Sc.rule,st}return 1}if(Sc=we,we.type==="begin")return pO(we);if(we.type==="illegal"&&!We){const st=new Error('Illegal lexeme "'+ze+'" for mode "'+(Pe.scope||"<unnamed>")+'"');throw st.mode=Pe,st}else if(we.type==="end"){const st=gO(we);if(st!==Mt)return st}if(we.type==="illegal"&&ze==="")return ft+=`
`,1;if(uf>1e5&&uf>we.index*3)throw new Error("potential infinite loop, way more iterations than matches");return ft+=ze,ze.length}const Ir=J(te);if(!Ir)throw Kt(it.replace("{}",te)),new Error('Unknown language: "'+te+'"');const yO=Ti(Ir);let cf="",Pe=ot||yO;const $0={},Yt=new de.__emitter(de);mO();let ft="",_c=0,bo=0,uf=0,df=!1;try{if(Ir.__emitTokens)Ir.__emitTokens(le,Yt);else{for(Pe.matcher.considerAll();;){uf++,df?df=!1:Pe.matcher.considerAll(),Pe.matcher.lastIndex=bo;const se=Pe.matcher.exec(le);if(!se)break;const we=le.substring(bo,se.index),ze=P0(we,se);bo=se.index+ze}P0(le.substring(bo))}return Yt.finalize(),cf=Yt.toHTML(),{language:te,value:cf,relevance:_c,illegal:!1,_emitter:Yt,_top:Pe}}catch(se){if(se.message&&se.message.includes("Illegal"))return{language:te,value:$e(le),illegal:!0,relevance:0,_illegalBy:{message:se.message,index:bo,context:le.slice(bo-100,bo+100),mode:se.mode,resultSoFar:cf},_emitter:Yt};if(ut)return{language:te,value:$e(le),illegal:!1,relevance:0,errorRaised:se,_emitter:Yt,_top:Pe};throw se}}function ys(te){const le={value:$e(te),illegal:!1,relevance:0,_top:he,_emitter:new de.__emitter(de)};return le._emitter.addText(te),le}function bs(te,le){le=le||de.languages||Object.keys(U);const We=ys(te),ot=le.filter(J).filter(dt).map(jn=>Un(jn,te,!1));ot.unshift(We);const Bt=ot.sort((jn,Rr)=>{if(jn.relevance!==Rr.relevance)return Rr.relevance-jn.relevance;if(jn.language&&Rr.language){if(J(jn.language).supersetOf===Rr.language)return 1;if(J(Rr.language).supersetOf===jn.language)return-1}return 0}),[mr,Ai]=Bt,kc=mr;return kc.secondBest=Ai,kc}function _a(te,le,We){const ot=le&&X[le]||We;te.classList.add("hljs"),te.classList.add(`language-${ot}`)}function xs(te){let le=null;const We=Nt(te);if(Le(We))return;if(Nn("before:highlightElement",{el:te,language:We}),te.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",te);return}if(te.children.length>0&&(de.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(te)),de.throwUnescapedHTML))throw new qe("One of your code blocks includes unescaped HTML.",te.innerHTML);le=te;const ot=le.textContent,Bt=We?Ze(ot,{language:We,ignoreIllegals:!0}):bs(ot);te.innerHTML=Bt.value,te.dataset.highlighted="yes",_a(te,We,Bt.language),te.result={language:Bt.language,re:Bt.relevance,relevance:Bt.relevance},Bt.secondBest&&(te.secondBest={language:Bt.secondBest.language,relevance:Bt.secondBest.relevance}),Nn("after:highlightElement",{el:te,result:Bt,text:ot})}function gr(te){de=Tt(de,te)}const wc=()=>{yo(),Ht("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Cc(){yo(),Ht("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let Ea=!1;function yo(){function te(){yo()}if(document.readyState==="loading"){Ea||window.addEventListener("DOMContentLoaded",te,!1),Ea=!0;return}document.querySelectorAll(de.cssSelector).forEach(xs)}function lf(te,le){let We=null;try{We=le(N)}catch(ot){if(Kt("Language definition for '{}' could not be registered.".replace("{}",te)),ut)Kt(ot);else throw ot;We=he}We.name||(We.name=te),U[te]=We,We.rawDefinition=le.bind(null,N),We.aliases&&fe(We.aliases,{languageName:te})}function ve(te){delete U[te];for(const le of Object.keys(X))X[le]===te&&delete X[le]}function D(){return Object.keys(U)}function J(te){return te=(te||"").toLowerCase(),U[te]||U[X[te]]}function fe(te,{languageName:le}){typeof te=="string"&&(te=[te]),te.forEach(We=>{X[We.toLowerCase()]=le})}function dt(te){const le=J(te);return le&&!le.disableAutodetect}function Wt(te){te["before:highlightBlock"]&&!te["before:highlightElement"]&&(te["before:highlightElement"]=le=>{te["before:highlightBlock"](Object.assign({block:le.el},le))}),te["after:highlightBlock"]&&!te["after:highlightElement"]&&(te["after:highlightElement"]=le=>{te["after:highlightBlock"](Object.assign({block:le.el},le))})}function xt(te){Wt(te),Me.push(te)}function an(te){const le=Me.indexOf(te);le!==-1&&Me.splice(le,1)}function Nn(te,le){const We=te;Me.forEach(function(ot){ot[We]&&ot[We](le)})}function Mi(te){return Ht("10.7.0","highlightBlock will be removed entirely in v12.0"),Ht("10.7.0","Please use highlightElement now."),xs(te)}Object.assign(N,{highlight:Ze,highlightAuto:bs,highlightAll:yo,highlightElement:xs,highlightBlock:Mi,configure:gr,initHighlighting:wc,initHighlightingOnLoad:Cc,registerLanguage:lf,unregisterLanguage:ve,listLanguages:D,getLanguage:J,registerAliases:fe,autoDetection:dt,inherit:Tt,addPlugin:xt,removePlugin:an}),N.debugMode=function(){ut=!1},N.safeMode=function(){ut=!0},N.versionString=Ee,N.regex={concat:g,lookahead:h,either:y,optional:p,anyNumberOfTimes:f};for(const te in De)typeof De[te]=="object"&&t(De[te]);return Object.assign(N,De),N},At=mo({});return At.newInstance=()=>mo({}),qf=At,At.HighlightJS=At,At.default=At,qf}var D$=I$();const nS=mm(D$);function rS(t,e=[]){return t.flatMap(n=>{const r=[...e,...n.properties?n.properties.className:[]];return n.children?rS(n.children,r):{text:n.value,classes:r}})}function gx(t){return t.value||t.children||[]}function B$(t){return!!nS.getLanguage(t)}function mx({doc:t,name:e,lowlight:n,defaultLanguage:r}){const i=[];return qu(t,o=>o.type.name===e).forEach(o=>{var s;let a=o.pos+1;const l=o.node.attrs.language||r,c=n.listLanguages(),u=l&&(c.includes(l)||B$(l)||(s=n.registered)!=null&&s.call(n,l))?gx(n.highlight(l,o.node.textContent)):gx(n.highlightAuto(o.node.textContent));rS(u).forEach(d=>{const h=a+d.text.length;if(d.classes.length){const f=St.inline(a,h,{class:d.classes.join(" ")});i.push(f)}a=h})}),at.create(t,i)}function P$(t){return typeof t=="function"}function $$({name:t,lowlight:e,defaultLanguage:n}){if(!["highlight","highlightAuto","listLanguages"].every(i=>P$(e[i])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new Ge({key:new Je("lowlight"),state:{init:(i,{doc:o})=>mx({doc:o,name:t,lowlight:e,defaultLanguage:n}),apply:(i,o,s,a)=>{const l=s.selection.$head.parent.type.name,c=a.selection.$head.parent.type.name,u=qu(s.doc,h=>h.type.name===t),d=qu(a.doc,h=>h.type.name===t);return i.docChanged&&([l,c].includes(t)||d.length!==u.length||i.steps.some(h=>h.from!==void 0&&h.to!==void 0&&u.some(f=>f.pos>=h.from&&f.pos+f.node.nodeSize<=h.to)))?mx({doc:i.doc,name:t,lowlight:e,defaultLanguage:n}):o.map(i.mapping,i.doc)}},props:{decorations(i){return r.getState(i)}}});return r}var F$=fP.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),lowlight:{},languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},addProseMirrorPlugins(){var t;return[...((t=this.parent)==null?void 0:t.call(this))||[],$$({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}}),z$=F$,H$=Kk,W$=Gk,U$=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,j$=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,q$=_i.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",Qe(this.options.HTMLAttributes,t),0]},renderMarkdown:(t,e)=>`==${e.renderChildren(t)}==`,parseMarkdown:(t,e)=>e.applyMark("highlight",e.parseInline(t.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:t=>t.indexOf("=="),tokenize(t,e,n){const i=/^(==)([^=]+)(==)/.exec(t);if(i){const o=i[2].trim(),s=n.inlineTokens(o);return{type:"highlight",raw:i[0],text:o,tokens:s}}}},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Go({find:U$,type:this.type})]},addPasteRules(){return[Qi({find:j$,type:this.type})]}}),V$=q$,G$=20,iS=(t,e=0)=>{const n=[];return!t.children.length||e>G$||Array.from(t.children).forEach(r=>{r.tagName==="SPAN"?n.push(r):r.children.length&&n.push(...iS(r,e+1))}),n},K$=t=>{if(!t.children.length)return;const e=iS(t);e&&e.forEach(n=>{var r,i;const o=n.getAttribute("style"),s=(i=(r=n.parentElement)==null?void 0:r.closest("span"))==null?void 0:i.getAttribute("style");n.setAttribute("style",`${s};${o}`)})},oS=_i.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&K$(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",Qe(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:e})=>e.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(o=>!!o))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),Y$=Ye.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const o=r[i].split(":");if(o.length>=2){const s=o[0].trim().toLowerCase(),a=o.slice(1).join(":").trim();if(s==="background-color")return a.replace(/['"]+/g,"")}}}return(e=t.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:e})=>e().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),sS=Ye.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const o=r[i].split(":");if(o.length>=2){const s=o[0].trim().toLowerCase(),a=o.slice(1).join(":").trim();if(s==="color")return a.replace(/['"]+/g,"")}}}return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),X$=Ye.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),Z$=Ye.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),J$=Ye.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:e})=>e().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});Ye.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push(Y$.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(sS.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(X$.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(Z$.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(J$.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(oS.configure(this.options.textStyle)),t}});var Q$=sS;function e3(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",s="(?!struct)("+r+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",a={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},d={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},h={className:"title",begin:e.optional(i)+t.IDENT_RE,relevance:0},f=e.optional(i)+t.IDENT_RE+"\\s*\\(",p=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],g=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],m=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],y=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],v={type:g,keyword:p,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:m},k={className:"function.dispatch",relevance:0,keywords:{_hint:y},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},w=[k,d,a,n,t.C_BLOCK_COMMENT_MODE,u,c],S={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:v,contains:w.concat([{begin:/\(/,end:/\)/,keywords:v,contains:w.concat(["self"]),relevance:0}]),relevance:0},E={className:"function",begin:"("+s+"[\\*&\\s]+)+"+f,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:v,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:v,relevance:0},{begin:f,returnBegin:!0,contains:[h],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[c,u]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,c,u,a,{begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,c,u,a]}]},a,n,t.C_BLOCK_COMMENT_MODE,d]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:v,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(S,E,k,w,[d,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:v,contains:["self",a]},{begin:t.IDENT_RE+"::",keywords:v},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function t3(t){const e={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},n=e3(t),r=n.keywords;return r.type=[...r.type,...e.type],r.literal=[...r.literal,...e.literal],r.built_in=[...r.built_in,...e.built_in],r._hints=e._hints,n.name="Arduino",n.aliases=["ino"],n.supersetOf="cpp",n}function n3(t){const e=t.regex,n={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:e.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const i={className:"subst",begin:/\$\(/,end:/\)/,contains:[t.BACKSLASH_ESCAPE]},o=t.inherit(t.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),s={begin:/<<-?\s*(?=\w+)/,starts:{contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},a={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,n,i]};i.contains.push(a);const l={match:/\\"/},c={className:"string",begin:/'/,end:/'/},u={match:/\\'/},d={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},t.NUMBER_MODE,n]},h=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],f=t.SHEBANG({binary:`(${h.join("|")})`,relevance:10}),p={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[t.inherit(t.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},g=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],m=["true","false"],y={match:/(\/[a-z._-]+)+/},b=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],C=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],v=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],k=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:g,literal:m,built_in:[...b,...C,"set","shopt",...v,...k]},contains:[f,t.SHEBANG(),p,d,o,s,y,a,l,c,u,n]}}function r3(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",s="("+r+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",a={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},d={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},h={className:"title",begin:e.optional(i)+t.IDENT_RE,relevance:0},f=e.optional(i)+t.IDENT_RE+"\\s*\\(",m={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},y=[d,a,n,t.C_BLOCK_COMMENT_MODE,u,c],b={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:m,contains:y.concat([{begin:/\(/,end:/\)/,keywords:m,contains:y.concat(["self"]),relevance:0}]),relevance:0},C={begin:"("+s+"[\\*&\\s]+)+"+f,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:m,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:m,relevance:0},{begin:f,returnBegin:!0,contains:[t.inherit(h,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:m,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,c,u,a,{begin:/\(/,end:/\)/,keywords:m,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,c,u,a]}]},a,n,t.C_BLOCK_COMMENT_MODE,d]};return{name:"C",aliases:["h"],keywords:m,disableAutodetect:!0,illegal:"</",contains:[].concat(b,C,y,[d,{begin:t.IDENT_RE+"::",keywords:m},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},t.TITLE_MODE]}]),exports:{preprocessor:d,strings:c,keywords:m}}}function i3(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",s="(?!struct)("+r+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",a={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},d={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},h={className:"title",begin:e.optional(i)+t.IDENT_RE,relevance:0},f=e.optional(i)+t.IDENT_RE+"\\s*\\(",p=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],g=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],m=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],y=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],v={type:g,keyword:p,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:m},k={className:"function.dispatch",relevance:0,keywords:{_hint:y},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},w=[k,d,a,n,t.C_BLOCK_COMMENT_MODE,u,c],S={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:v,contains:w.concat([{begin:/\(/,end:/\)/,keywords:v,contains:w.concat(["self"]),relevance:0}]),relevance:0},E={className:"function",begin:"("+s+"[\\*&\\s]+)+"+f,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:v,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:v,relevance:0},{begin:f,returnBegin:!0,contains:[h],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[c,u]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,c,u,a,{begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,c,u,a]}]},a,n,t.C_BLOCK_COMMENT_MODE,d]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:v,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(S,E,k,w,[d,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:v,contains:["self",a]},{begin:t.IDENT_RE+"::",keywords:v},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function o3(t){const e=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],n=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],r=["default","false","null","true"],i=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],o=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],s={keyword:i.concat(o),built_in:e,literal:r},a=t.inherit(t.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),l={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},c={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},u={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},d=t.inherit(u,{illegal:/\n/}),h={className:"subst",begin:/\{/,end:/\}/,keywords:s},f=t.inherit(h,{illegal:/\n/}),p={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},t.BACKSLASH_ESCAPE,f]},g={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},h]},m=t.inherit(g,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},f]});h.contains=[g,p,u,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,l,t.C_BLOCK_COMMENT_MODE],f.contains=[m,p,d,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,l,t.inherit(t.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const y={variants:[c,g,p,u,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},b={begin:"<",end:">",contains:[{beginKeywords:"in out"},a]},C=t.IDENT_RE+"(<"+t.IDENT_RE+"(\\s*,\\s*"+t.IDENT_RE+")*>)?(\\[\\])?",v={begin:"@"+t.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:s,illegal:/::/,contains:[t.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},y,l,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},a,b,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[a,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[a,b,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+C+"\\s+)+"+t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:s,contains:[{beginKeywords:n.join(" "),relevance:0},{begin:t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[t.TITLE_MODE,b],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,relevance:0,contains:[y,l,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},v]}}const s3=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),a3=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],l3=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],c3=[...a3,...l3],u3=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),d3=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),h3=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),f3=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function p3(t){const e=t.regex,n=s3(t),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},i="and or not only",o=/@-?\w[\w]*(-\w+)*/,s="[a-zA-Z-][a-zA-Z0-9_-]*",a=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,r,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+s,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+d3.join("|")+")"},{begin:":(:)?("+h3.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+f3.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...a,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...a,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:o},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:i,attribute:u3.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...a,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+c3.join("|")+")\\b"}]}}function g3(t){const e=t.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function m3(t){const o={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:o,illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"string",variants:[t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[t.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:o,illegal:/["']/}]}]}}function y3(t){const e=t.regex,n=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[t.HASH_COMMENT_MODE,t.QUOTE_STRING_MODE,t.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:e.concat(n,e.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function b3(t){const e=t.regex,n={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:t.NUMBER_RE}]},r=t.COMMENT();r.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const i={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},o={className:"literal",begin:/\bon|off|true|false|yes|no\b/},s={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},a={begin:/\[/,end:/\]/,contains:[r,o,i,s,n,"self"],relevance:0},l=/[A-Za-z0-9_-]+/,c=/"(\\"|[^"])*"/,u=/'[^']*'/,d=e.either(l,c,u),h=e.concat(d,"(\\s*\\.\\s*",d,")*",e.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[r,{className:"section",begin:/\[+/,end:/\]+/},{begin:h,className:"attr",starts:{end:/$/,contains:[r,a,o,i,s,n]}}]}}var As="[0-9](_*[0-9])*",Pc=`\\.(${As})`,$c="[0-9a-fA-F](_*[0-9a-fA-F])*",yx={className:"number",variants:[{begin:`(\\b(${As})((${Pc})|\\.)?|(${Pc}))[eE][+-]?(${As})[fFdD]?\\b`},{begin:`\\b(${As})((${Pc})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${Pc})[fFdD]?\\b`},{begin:`\\b(${As})[fFdD]\\b`},{begin:`\\b0[xX]((${$c})\\.?|(${$c})?\\.(${$c}))[pP][+-]?(${As})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${$c})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function aS(t,e,n){return n===-1?"":t.replace(e,r=>aS(t,e,n-1))}function x3(t){const e=t.regex,n="[-a-zA-Z_$][-a-zA-Z_$0-9]*",r=n+aS("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),l={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},c={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},u={className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[t.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:l,illegal:/<\/|#/,contains:[t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[t.BACKSLASH_ESCAPE]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[e.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[u,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+r+"\\s+)",t.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:l,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[c,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,yx,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},yx,c]}}const bx="[A-Za-z$_][0-9A-Za-z$_]*",v3=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],w3=["true","false","null","undefined","NaN","Infinity"],lS=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],cS=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],uS=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],C3=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],k3=[].concat(uS,lS,cS);function S3(t){const e=t.regex,n=(I,{after:q})=>{const Z="</"+I[0].slice(1);return I.input.indexOf(Z,q)!==-1},r=bx,i={begin:"<>",end:"</>"},o=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(I,q)=>{const Z=I[0].length+I.index,Q=I.input[Z];if(Q==="<"||Q===","){q.ignoreMatch();return}Q===">"&&(n(I,{after:Z})||q.ignoreMatch());let H;const Y=I.input.substring(Z);if(H=Y.match(/^\s*=/)){q.ignoreMatch();return}if((H=Y.match(/^\s+extends\s+/))&&H.index===0){q.ignoreMatch();return}}},a={$pattern:bx,keyword:v3,literal:w3,built_in:k3,"variable.language":C3},l="[0-9](_?[0-9])*",c=`\\.(${l})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${u})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${u})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},h={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},f={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"xml"}},p={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"css"}},g={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"graphql"}},m={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,h]},b={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},C=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,f,p,g,m,{match:/\$\d+/},d];h.contains=C.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(C)});const v=[].concat(b,h.contains),k=v.concat([{begin:/(\s*)\(/,end:/\)/,keywords:a,contains:["self"].concat(v)}]),w={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:k},S={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},E={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...lS,...cS]}},R={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},$={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[w],illegal:/%/},T={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function P(I){return e.concat("(?!",I.join("|"),")")}const B={match:e.concat(/\b/,P([...uS,"super","import"].map(I=>`${I}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},A={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},M={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},w]},L="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",F={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(L)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[w]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:k,CLASS_REFERENCE:E},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),R,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,f,p,g,m,b,{match:/\$\d+/},d,E,{scope:"attr",match:r+e.lookahead(":"),relevance:0},F,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[b,t.REGEXP_MODE,{className:"function",begin:L,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:k}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:o},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},$,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[w,t.inherit(t.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},A,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[w]},B,T,S,M,{match:/\$[(.]/}]}}function _3(t){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],i={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[e,n,t.QUOTE_STRING_MODE,i,t.C_NUMBER_MODE,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var Ns="[0-9](_*[0-9])*",Fc=`\\.(${Ns})`,zc="[0-9a-fA-F](_*[0-9a-fA-F])*",E3={className:"number",variants:[{begin:`(\\b(${Ns})((${Fc})|\\.)?|(${Fc}))[eE][+-]?(${Ns})[fFdD]?\\b`},{begin:`\\b(${Ns})((${Fc})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${Fc})[fFdD]?\\b`},{begin:`\\b(${Ns})[fFdD]\\b`},{begin:`\\b0[xX]((${zc})\\.?|(${zc})?\\.(${zc}))[pP][+-]?(${Ns})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${zc})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function T3(t){const e={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},n={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},r={className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"@"},i={className:"subst",begin:/\$\{/,end:/\}/,contains:[t.C_NUMBER_MODE]},o={className:"variable",begin:"\\$"+t.UNDERSCORE_IDENT_RE},s={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[o,i]},{begin:"'",end:"'",illegal:/\n/,contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[t.BACKSLASH_ESCAPE,o,i]}]};i.contains.push(s);const a={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+t.UNDERSCORE_IDENT_RE+")?"},l={className:"meta",begin:"@"+t.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[t.inherit(s,{className:"string"}),"self"]}]},c=E3,u=t.COMMENT("/\\*","\\*/",{contains:[t.C_BLOCK_COMMENT_MODE]}),d={variants:[{className:"type",begin:t.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},h=d;return h.variants[1].contains=[d],d.variants[1].contains=[h],{name:"Kotlin",aliases:["kt","kts"],keywords:e,contains:[t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),t.C_LINE_COMMENT_MODE,u,n,r,a,l,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:e,relevance:5,contains:[{begin:t.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[t.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:e,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[d,t.C_LINE_COMMENT_MODE,u],relevance:0},t.C_LINE_COMMENT_MODE,u,a,l,s,t.C_NUMBER_MODE]},u]},{begin:[/class|interface|trait/,/\s+/,t.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},t.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},a,l]},s,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},c]}}const M3=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),A3=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],N3=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],O3=[...A3,...N3],L3=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),dS=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),hS=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),R3=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),I3=dS.concat(hS).sort().reverse();function D3(t){const e=M3(t),n=I3,r="and or not only",i="[\\w-]+",o="("+i+"|@\\{"+i+"\\})",s=[],a=[],l=function(C){return{className:"string",begin:"~?"+C+".*?"+C}},c=function(C,v,k){return{className:C,begin:v,relevance:k}},u={$pattern:/[a-z-]+/,keyword:r,attribute:L3.join(" ")},d={begin:"\\(",end:"\\)",contains:a,keywords:u,relevance:0};a.push(t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,l("'"),l('"'),e.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},e.HEXCOLOR,d,c("variable","@@?"+i,10),c("variable","@\\{"+i+"\\}"),c("built_in","~?`[^`]*?`"),{className:"attribute",begin:i+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},e.IMPORTANT,{beginKeywords:"and not"},e.FUNCTION_DISPATCH);const h=a.concat({begin:/\{/,end:/\}/,contains:s}),f={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(a)},p={begin:o+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+R3.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:a}}]},g={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:u,returnEnd:!0,contains:a,relevance:0}},m={className:"variable",variants:[{begin:"@"+i+"\\s*:",relevance:15},{begin:"@"+i}],starts:{end:"[;}]",returnEnd:!0,contains:h}},y={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:o,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,f,c("keyword","all\\b"),c("variable","@\\{"+i+"\\}"),{begin:"\\b("+O3.join("|")+")\\b",className:"selector-tag"},e.CSS_NUMBER_MODE,c("selector-tag",o,0),c("selector-id","#"+o),c("selector-class","\\."+o,0),c("selector-tag","&",0),e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+dS.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+hS.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:h},{begin:"!important"},e.FUNCTION_DISPATCH]},b={begin:i+`:(:)?(${n.join("|")})`,returnBegin:!0,contains:[y]};return s.push(t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,g,m,b,p,y,f,e.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:s}}function B3(t){const e="\\[=*\\[",n="\\]=*\\]",r={begin:e,end:n,contains:["self"]},i=[t.COMMENT("--(?!"+e+")","$"),t.COMMENT("--"+e,n,{contains:[r],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:t.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:i.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[t.inherit(t.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:i}].concat(i)},t.C_NUMBER_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{className:"string",begin:e,end:n,contains:[r],relevance:5}])}}function P3(t){const e={className:"variable",variants:[{begin:"\\$\\("+t.UNDERSCORE_IDENT_RE+"\\)",contains:[t.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},n={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,e]},r={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[e,n]},i={begin:"^"+t.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},o={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},s={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[e]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[t.HASH_COMMENT_MODE,e,n,r,i,o,s]}}function $3(t){const e=t.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},i={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},o={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},s={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},a=/[A-Za-z][A-Za-z0-9+.-]*/,l={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,a,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},c={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},u={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},d=t.inherit(c,{contains:[]}),h=t.inherit(u,{contains:[]});c.contains.push(h),u.contains.push(d);let f=[n,l];return[c,u,d,h].forEach(y=>{y.contains=y.contains.concat(f)}),f=f.concat(c,u),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:f},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:f}]}]},n,o,c,u,{className:"quote",begin:"^>\\s+",contains:f,end:"$"},i,r,l,s,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function F3(t){const e={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,a={"variable.language":["this","super"],$pattern:n,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},l={$pattern:n,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:a,illegal:"</",contains:[e,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,t.C_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+l.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:l,contains:[t.UNDERSCORE_TITLE_MODE]},{begin:"\\."+t.UNDERSCORE_IDENT_RE,relevance:0}]}}function z3(t){const e=t.regex,n=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],r=/[dualxmsipngr]{0,12}/,i={$pattern:/[\w.]+/,keyword:n.join(" ")},o={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:i},s={begin:/->\{/,end:/\}/},a={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},l={scope:"variable",variants:[{begin:/\$\d/},{begin:e.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[a]},c={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},u=[t.BACKSLASH_ESCAPE,o,l],d=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],h=(g,m,y="\\1")=>{const b=y==="\\1"?y:e.concat(y,m);return e.concat(e.concat("(?:",g,")"),m,/(?:\\.|[^\\\/])*?/,b,/(?:\\.|[^\\\/])*?/,y,r)},f=(g,m,y)=>e.concat(e.concat("(?:",g,")"),m,/(?:\\.|[^\\\/])*?/,y,r),p=[l,t.HASH_COMMENT_MODE,t.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),s,{className:"string",contains:u,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},c,{begin:"(\\/\\/|"+t.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[t.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:h("s|tr|y",e.either(...d,{capture:!0}))},{begin:h("s|tr|y","\\(","\\)")},{begin:h("s|tr|y","\\[","\\]")},{begin:h("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:f("(?:m|qr)?",/\//,/\//)},{begin:f("m|qr",e.either(...d,{capture:!0}),/\1/)},{begin:f("m|qr",/\(/,/\)/)},{begin:f("m|qr",/\[/,/\]/)},{begin:f("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,a]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,a,c]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return o.contains=p,s.contains=p,{name:"Perl",aliases:["pl","pm"],keywords:i,contains:p}}function H3(t){const e=t.regex,n=/(?![A-Za-z0-9])(?![$])/,r=e.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),i=e.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),o=e.concat(/[A-Z]+/,n),s={scope:"variable",match:"\\$+"+r},a={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},l={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},c=t.inherit(t.APOS_STRING_MODE,{illegal:null}),u=t.inherit(t.QUOTE_STRING_MODE,{illegal:null,contains:t.QUOTE_STRING_MODE.contains.concat(l)}),d={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:t.QUOTE_STRING_MODE.contains.concat(l),"on:begin":(A,M)=>{M.data._beginMatch=A[1]||A[2]},"on:end":(A,M)=>{M.data._beginMatch!==A[1]&&M.ignoreMatch()}},h=t.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),f=`[ 	
]`,p={scope:"string",variants:[u,c,d,h]},g={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},m=["false","null","true"],y=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],b=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],v={keyword:y,literal:(A=>{const M=[];return A.forEach(L=>{M.push(L),L.toLowerCase()===L?M.push(L.toUpperCase()):M.push(L.toLowerCase())}),M})(m),built_in:b},k=A=>A.map(M=>M.replace(/\|\d+$/,"")),w={variants:[{match:[/new/,e.concat(f,"+"),e.concat("(?!",k(b).join("\\b|"),"\\b)"),i],scope:{1:"keyword",4:"title.class"}}]},S=e.concat(r,"\\b(?!\\()"),E={variants:[{match:[e.concat(/::/,e.lookahead(/(?!class\b)/)),S],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[i,e.concat(/::/,e.lookahead(/(?!class\b)/)),S],scope:{1:"title.class",3:"variable.constant"}},{match:[i,e.concat("::",e.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[i,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},R={scope:"attr",match:e.concat(r,e.lookahead(":"),e.lookahead(/(?!::)/))},$={relevance:0,begin:/\(/,end:/\)/,keywords:v,contains:[R,s,E,t.C_BLOCK_COMMENT_MODE,p,g,w]},T={relevance:0,match:[/\b/,e.concat("(?!fn\\b|function\\b|",k(y).join("\\b|"),"|",k(b).join("\\b|"),"\\b)"),r,e.concat(f,"*"),e.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[$]};$.contains.push(T);const P=[R,E,t.C_BLOCK_COMMENT_MODE,p,g,w],B={begin:e.concat(/#\[\s*\\?/,e.either(i,o)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:m,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:m,keyword:["new","array"]},contains:["self",...P]},...P,{scope:"meta",variants:[{match:i},{match:o}]}]};return{case_insensitive:!1,keywords:v,contains:[B,t.HASH_COMMENT_MODE,t.COMMENT("//","$"),t.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:t.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},a,{scope:"variable.language",match:/\$this\b/},s,T,E,{match:[/const/,/\s/,r],scope:{1:"keyword",3:"variable.constant"}},w,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},t.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:v,contains:["self",B,s,E,t.C_BLOCK_COMMENT_MODE,p,g]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},t.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[t.inherit(t.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},t.UNDERSCORE_TITLE_MODE]},p,g]}}function W3(t){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},t.inherit(t.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),t.inherit(t.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function U3(t){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function j3(t){const e=t.regex,n=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],a={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},l={className:"meta",begin:/^(>>>|\.\.\.) /},c={className:"subst",begin:/\{/,end:/\}/,keywords:a,illegal:/#/},u={begin:/\{\{/,relevance:0},d={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,l,u,c]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,l,u,c]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,u,c]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,u,c]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},h="[0-9](_?[0-9])*",f=`(\\b(${h}))?\\.(${h})|\\b(${h})\\.`,p=`\\b|${r.join("|")}`,g={className:"number",relevance:0,variants:[{begin:`(\\b(${h})|(${f}))[eE][+-]?(${h})[jJ]?(?=${p})`},{begin:`(${f})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${p})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${p})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${p})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${p})`},{begin:`\\b(${h})[jJ](?=${p})`}]},m={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:a,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},y={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:["self",l,g,d,t.HASH_COMMENT_MODE]}]};return c.contains=[d,g,l],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:a,illegal:/(<\/|\?)|=>/,contains:[l,g,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},d,m,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[y]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[g,y,d]}]}}function q3(t){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function V3(t){const e=t.regex,n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,r=e.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),i=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,o=e.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:n,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[t.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:e.lookahead(e.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:n},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),t.HASH_COMMENT_MODE,{scope:"string",contains:[t.BACKSLASH_ESCAPE],variants:[t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[i,r]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,r]},{scope:{1:"punctuation",2:"number"},match:[o,r]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,r]}]},{scope:{3:"operator"},match:[n,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:i},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:o},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function G3(t){const e=t.regex,n="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",r=e.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),i=e.concat(r,/(::\w+)*/),s={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},a={className:"doctag",begin:"@[A-Za-z]+"},l={begin:"#<",end:">"},c=[t.COMMENT("#","$",{contains:[a]}),t.COMMENT("^=begin","^=end",{contains:[a],relevance:10}),t.COMMENT("^__END__",t.MATCH_NOTHING_RE)],u={className:"subst",begin:/#\{/,end:/\}/,keywords:s},d={className:"string",contains:[t.BACKSLASH_ESCAPE,u],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:e.concat(/<<[-~]?'?/,e.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[t.BACKSLASH_ESCAPE,u]})]}]},h="[1-9](_?[0-9])*|0",f="[0-9](_?[0-9])*",p={className:"number",relevance:0,variants:[{begin:`\\b(${h})(\\.(${f}))?([eE][+-]?(${f})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},g={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:s}]},w=[d,{variants:[{match:[/class\s+/,i,/\s+<\s+/,i]},{match:[/\b(class|module)\s+/,i]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:s},{match:[/(include|extend)\s+/,i],scope:{2:"title.class"},keywords:s},{relevance:0,match:[i,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:r,scope:"title.class"},{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[g]},{begin:t.IDENT_RE+"::"},{className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[d,{begin:n}],relevance:0},p,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:s},{begin:"("+t.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[t.BACKSLASH_ESCAPE,u],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(l,c),relevance:0}].concat(l,c);u.contains=w,g.contains=w;const $=[{begin:/^\s*=>/,starts:{end:"$",contains:w}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:s,contains:w}}];return c.unshift(l),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:s,illegal:/\/\*/,contains:[t.SHEBANG({binary:"ruby"})].concat($).concat(c).concat(w)}}function K3(t){const e=t.regex,n=/(r#)?/,r=e.concat(n,t.UNDERSCORE_IDENT_RE),i=e.concat(n,t.IDENT_RE),o={className:"title.function.invoke",relevance:0,begin:e.concat(/\b/,/(?!let|for|while|if|else|match\b)/,i,e.lookahead(/\s*\(/))},s="([ui](8|16|32|64|128|size)|f(32|64))?",a=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],l=["true","false","Some","None","Ok","Err"],c=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],u=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:t.IDENT_RE+"!?",type:u,keyword:a,literal:l,built_in:c},illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.COMMENT("/\\*","\\*/",{contains:["self"]}),t.inherit(t.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+s},{begin:"\\b0o([0-7_]+)"+s},{begin:"\\b0x([A-Fa-f0-9_]+)"+s},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+s}],relevance:0},{begin:[/fn/,/\s+/,r],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,r],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,r,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:t.IDENT_RE+"::",keywords:{keyword:"Self",built_in:c,type:u}},{className:"punctuation",begin:"->"},o]}}const Y3=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),X3=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Z3=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],J3=[...X3,...Z3],Q3=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),e5=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),t5=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),n5=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function r5(t){const e=Y3(t),n=t5,r=e5,i="@[a-z-]+",o="and or not only",a={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,e.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+J3.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},a,{begin:/\(/,end:/\)/,contains:[e.CSS_NUMBER_MODE]},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+n5.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[e.BLOCK_COMMENT,a,e.HEXCOLOR,e.CSS_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.IMPORTANT,e.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:i,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:o,attribute:Q3.join(" ")},contains:[{begin:i,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},a,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.HEXCOLOR,e.CSS_NUMBER_MODE]},e.FUNCTION_DISPATCH]}}function i5(t){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function o5(t){const e=t.regex,n=t.COMMENT("--","$"),r={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},i={begin:/"/,end:/"/,contains:[{match:/""/}]},o=["true","false","unknown"],s=["double precision","large object","with timezone","without timezone"],a=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],l=["add","asc","collation","desc","final","first","last","view"],c=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],u=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],d=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],h=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],f=u,p=[...c,...l].filter(k=>!u.includes(k)),g={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},m={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},y={match:e.concat(/\b/,e.either(...f),/\s*\(/),relevance:0,keywords:{built_in:f}};function b(k){return e.concat(/\b/,e.either(...k.map(w=>w.replace(/\s+/,"\\s+"))),/\b/)}const C={scope:"keyword",match:b(h),relevance:0};function v(k,{exceptions:w,when:S}={}){const E=S;return w=w||[],k.map(R=>R.match(/\|\d+$/)||w.includes(R)?R:E(R)?`${R}|0`:R)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:v(p,{when:k=>k.length<3}),literal:o,type:a,built_in:d},contains:[{scope:"type",match:b(s)},C,y,g,r,i,t.C_NUMBER_MODE,t.C_BLOCK_COMMENT_MODE,n,m]}}function fS(t){return t?typeof t=="string"?t:t.source:null}function Aa(t){return ct("(?=",t,")")}function ct(...t){return t.map(n=>fS(n)).join("")}function s5(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function wn(...t){return"("+(s5(t).capture?"":"?:")+t.map(r=>fS(r)).join("|")+")"}const uy=t=>ct(/\b/,t,/\w$/.test(t)?/\b/:/\B/),a5=["Protocol","Type"].map(uy),xx=["init","self"].map(uy),l5=["Any","Self"],Vf=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],vx=["false","nil","true"],c5=["assignment","associativity","higherThan","left","lowerThan","none","right"],u5=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],wx=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],pS=wn(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),gS=wn(pS,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),Gf=ct(pS,gS,"*"),mS=wn(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),wd=wn(mS,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),Br=ct(mS,wd,"*"),Hc=ct(/[A-Z]/,wd,"*"),d5=["attached","autoclosure",ct(/convention\(/,wn("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",ct(/objc\(/,Br,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],h5=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function f5(t){const e={match:/\s+/,relevance:0},n=t.COMMENT("/\\*","\\*/",{contains:["self"]}),r=[t.C_LINE_COMMENT_MODE,n],i={match:[/\./,wn(...a5,...xx)],className:{2:"keyword"}},o={match:ct(/\./,wn(...Vf)),relevance:0},s=Vf.filter(He=>typeof He=="string").concat(["_|0"]),a=Vf.filter(He=>typeof He!="string").concat(l5).map(uy),l={variants:[{className:"keyword",match:wn(...a,...xx)}]},c={$pattern:wn(/\b\w+/,/#\w+/),keyword:s.concat(u5),literal:vx},u=[i,o,l],d={match:ct(/\./,wn(...wx)),relevance:0},h={className:"built_in",match:ct(/\b/,wn(...wx),/(?=\()/)},f=[d,h],p={match:/->/,relevance:0},g={className:"operator",relevance:0,variants:[{match:Gf},{match:`\\.(\\.|${gS})+`}]},m=[p,g],y="([0-9]_*)+",b="([0-9a-fA-F]_*)+",C={className:"number",relevance:0,variants:[{match:`\\b(${y})(\\.(${y}))?([eE][+-]?(${y}))?\\b`},{match:`\\b0x(${b})(\\.(${b}))?([pP][+-]?(${y}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},v=(He="")=>({className:"subst",variants:[{match:ct(/\\/,He,/[0\\tnr"']/)},{match:ct(/\\/,He,/u\{[0-9a-fA-F]{1,8}\}/)}]}),k=(He="")=>({className:"subst",match:ct(/\\/,He,/[\t ]*(?:[\r\n]|\r\n)/)}),w=(He="")=>({className:"subst",label:"interpol",begin:ct(/\\/,He,/\(/),end:/\)/}),S=(He="")=>({begin:ct(He,/"""/),end:ct(/"""/,He),contains:[v(He),k(He),w(He)]}),E=(He="")=>({begin:ct(He,/"/),end:ct(/"/,He),contains:[v(He),w(He)]}),R={className:"string",variants:[S(),S("#"),S("##"),S("###"),E(),E("#"),E("##"),E("###")]},$=[t.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[t.BACKSLASH_ESCAPE]}],T={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:$},P=He=>{const on=ct(He,/\//),Dt=ct(/\//,He);return{begin:on,end:Dt,contains:[...$,{scope:"comment",begin:`#(?!.*${Dt})`,end:/$/}]}},B={scope:"regexp",variants:[P("###"),P("##"),P("#"),T]},A={match:ct(/`/,Br,/`/)},M={className:"variable",match:/\$\d+/},L={className:"variable",match:`\\$${wd}+`},F=[A,M,L],I={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:h5,contains:[...m,C,R]}]}},q={scope:"keyword",match:ct(/@/,wn(...d5),Aa(wn(/\(/,/\s+/)))},Z={scope:"meta",match:ct(/@/,Br)},Q=[I,q,Z],H={match:Aa(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:ct(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,wd,"+")},{className:"type",match:Hc,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:ct(/\s+&\s+/,Aa(Hc)),relevance:0}]},Y={begin:/</,end:/>/,keywords:c,contains:[...r,...u,...Q,p,H]};H.contains.push(Y);const oe={match:ct(Br,/\s*:/),keywords:"_|0",relevance:0},K={begin:/\(/,end:/\)/,relevance:0,keywords:c,contains:["self",oe,...r,B,...u,...f,...m,C,R,...F,...Q,H]},ne={begin:/</,end:/>/,keywords:"repeat each",contains:[...r,H]},ue={begin:wn(Aa(ct(Br,/\s*:/)),Aa(ct(Br,/\s+/,Br,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:Br}]},ke={begin:/\(/,end:/\)/,keywords:c,contains:[ue,...r,...u,...m,C,R,...Q,H,K],endsParent:!0,illegal:/["']/},Oe={match:[/(func|macro)/,/\s+/,wn(A.match,Br,Gf)],className:{1:"keyword",3:"title.function"},contains:[ne,ke,e],illegal:[/\[/,/%/]},De={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[ne,ke,e],illegal:/\[|%/},Xe={match:[/operator/,/\s+/,Gf],className:{1:"keyword",3:"title"}},Et={begin:[/precedencegroup/,/\s+/,Hc],className:{1:"keyword",3:"title"},contains:[H],keywords:[...c5,...vx],end:/}/},bt={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},Vt={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},rn={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,Br,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:c,contains:[ne,...u,{begin:/:/,end:/\{/,keywords:c,contains:[{scope:"title.class.inherited",match:Hc},...u],relevance:0}]};for(const He of R.variants){const on=He.contains.find(Fn=>Fn.label==="interpol");on.keywords=c;const Dt=[...u,...f,...m,C,R,...F];on.contains=[...Dt,{begin:/\(/,end:/\)/,contains:["self",...Dt]}]}return{name:"Swift",keywords:c,contains:[...r,Oe,De,bt,Vt,rn,Xe,Et,{beginKeywords:"import",end:/$/,contains:[...r],relevance:0},B,...u,...f,...m,C,R,...F,...Q,H,K]}}const Cd="[A-Za-z$_][0-9A-Za-z$_]*",yS=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],bS=["true","false","null","undefined","NaN","Infinity"],xS=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],vS=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],wS=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],CS=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],kS=[].concat(wS,xS,vS);function p5(t){const e=t.regex,n=(I,{after:q})=>{const Z="</"+I[0].slice(1);return I.input.indexOf(Z,q)!==-1},r=Cd,i={begin:"<>",end:"</>"},o=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(I,q)=>{const Z=I[0].length+I.index,Q=I.input[Z];if(Q==="<"||Q===","){q.ignoreMatch();return}Q===">"&&(n(I,{after:Z})||q.ignoreMatch());let H;const Y=I.input.substring(Z);if(H=Y.match(/^\s*=/)){q.ignoreMatch();return}if((H=Y.match(/^\s+extends\s+/))&&H.index===0){q.ignoreMatch();return}}},a={$pattern:Cd,keyword:yS,literal:bS,built_in:kS,"variable.language":CS},l="[0-9](_?[0-9])*",c=`\\.(${l})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${u})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${u})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},h={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},f={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"xml"}},p={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"css"}},g={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"graphql"}},m={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,h]},b={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},C=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,f,p,g,m,{match:/\$\d+/},d];h.contains=C.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(C)});const v=[].concat(b,h.contains),k=v.concat([{begin:/(\s*)\(/,end:/\)/,keywords:a,contains:["self"].concat(v)}]),w={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:k},S={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},E={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...xS,...vS]}},R={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},$={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[w],illegal:/%/},T={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function P(I){return e.concat("(?!",I.join("|"),")")}const B={match:e.concat(/\b/,P([...wS,"super","import"].map(I=>`${I}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},A={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},M={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},w]},L="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",F={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(L)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[w]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:k,CLASS_REFERENCE:E},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),R,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,f,p,g,m,b,{match:/\$\d+/},d,E,{scope:"attr",match:r+e.lookahead(":"),relevance:0},F,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[b,t.REGEXP_MODE,{className:"function",begin:L,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:k}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:o},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},$,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[w,t.inherit(t.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},A,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[w]},B,T,S,M,{match:/\$[(.]/}]}}function g5(t){const e=t.regex,n=p5(t),r=Cd,i=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],o={begin:[/namespace/,/\s+/,t.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},s={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:i},contains:[n.exports.CLASS_REFERENCE]},a={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},l=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],c={$pattern:Cd,keyword:yS.concat(l),literal:bS,built_in:kS.concat(i),"variable.language":CS},u={className:"meta",begin:"@"+r},d=(g,m,y)=>{const b=g.contains.findIndex(C=>C.label===m);if(b===-1)throw new Error("can not find mode to replace");g.contains.splice(b,1,y)};Object.assign(n.keywords,c),n.exports.PARAMS_CONTAINS.push(u);const h=n.contains.find(g=>g.scope==="attr"),f=Object.assign({},h,{match:e.concat(r,e.lookahead(/\s*\?:/))});n.exports.PARAMS_CONTAINS.push([n.exports.CLASS_REFERENCE,h,f]),n.contains=n.contains.concat([u,o,s,f]),d(n,"shebang",t.SHEBANG()),d(n,"use_strict",a);const p=n.contains.find(g=>g.label==="func.def");return p.relevance=0,Object.assign(n,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),n}function m5(t){const e=t.regex,n={className:"string",begin:/"(""|[^/n])"C\b/},r={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},i=/\d{1,2}\/\d{1,2}\/\d{4}/,o=/\d{4}-\d{1,2}-\d{1,2}/,s=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,a=/\d{1,2}(:\d{1,2}){1,2}/,l={className:"literal",variants:[{begin:e.concat(/# */,e.either(o,i),/ *#/)},{begin:e.concat(/# */,a,/ *#/)},{begin:e.concat(/# */,s,/ *#/)},{begin:e.concat(/# */,e.either(o,i),/ +/,e.either(s,a),/ *#/)}]},c={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},u={className:"label",begin:/^\w+:/},d=t.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),h=t.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[n,r,l,c,u,d,h,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[h]}]}}function y5(t){t.regex;const e=t.COMMENT(/\(;/,/;\)/);e.contains.push("self");const n=t.COMMENT(/;;/,/$/),r=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],i={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},o={className:"variable",begin:/\$[\w_]+/},s={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},a={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},l={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},c={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:r},contains:[n,e,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},o,s,i,t.QUOTE_STRING_MODE,l,c,a]}}function b5(t){const e=t.regex,n=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,i={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},o={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},s=t.inherit(o,{begin:/\(/,end:/\)/}),a=t.inherit(t.APOS_STRING_MODE,{className:"string"}),l=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),c={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[i]},{begin:/'/,end:/'/,contains:[i]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[o,l,a,s,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[o,s,l,a]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},i,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[c],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[c],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(n,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:c}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function x5(t){const e="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},i={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},o={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},s={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,i]},a=t.inherit(s,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),h={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},f={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},p={begin:/\{/,end:/\}/,contains:[f],illegal:"\\n",relevance:0},g={begin:"\\[",end:"\\]",contains:[f],illegal:"\\n",relevance:0},m=[r,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},h,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},p,g,o,s],y=[...m];return y.pop(),y.push(a),f.contains=y,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:m}}const SS={arduino:t3,bash:n3,c:r3,cpp:i3,csharp:o3,css:p3,diff:g3,go:m3,graphql:y3,ini:b3,java:x3,javascript:S3,json:_3,kotlin:T3,less:D3,lua:B3,makefile:P3,markdown:$3,objectivec:F3,perl:z3,php:H3,"php-template":W3,plaintext:U3,python:j3,"python-repl":q3,r:V3,ruby:G3,rust:K3,scss:r5,shell:i5,sql:o5,swift:f5,typescript:g5,vbnet:m5,wasm:y5,xml:b5,yaml:x5},Cx={},v5="hljs-";function _S(t){const e=nS.newInstance();return t&&o(t),{highlight:n,highlightAuto:r,listLanguages:i,register:o,registerAlias:s,registered:a};function n(l,c,u){const d=u||Cx,h=typeof d.prefix=="string"?d.prefix:v5;if(!e.getLanguage(l))throw new Error("Unknown language: `"+l+"` is not registered");e.configure({__emitter:w5,classPrefix:h});const f=e.highlight(c,{ignoreIllegals:!0,language:l});if(f.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:f.errorRaised});const p=f._emitter.root,g=p.data;return g.language=f.language,g.relevance=f.relevance,p}function r(l,c){const d=(c||Cx).subset||i();let h=-1,f=0,p;for(;++h<d.length;){const g=d[h];if(!e.getLanguage(g))continue;const m=n(g,l,c);m.data&&m.data.relevance!==void 0&&m.data.relevance>f&&(f=m.data.relevance,p=m)}return p||{type:"root",children:[],data:{language:void 0,relevance:f}}}function i(){return e.listLanguages()}function o(l,c){if(typeof l=="string")e.registerLanguage(l,c);else{let u;for(u in l)Object.hasOwn(l,u)&&e.registerLanguage(u,l[u])}}function s(l,c){if(typeof l=="string")e.registerAliases(typeof c=="string"?c:[...c],{languageName:l});else{let u;for(u in l)if(Object.hasOwn(l,u)){const d=l[u];e.registerAliases(typeof d=="string"?d:[...d],{languageName:u})}}}function a(l){return!!e.getLanguage(l)}}class w5{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(e==="")return;const n=this.stack[this.stack.length-1],r=n.children[n.children.length-1];r&&r.type==="text"?r.value+=e:n.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,n){const r=this.stack[this.stack.length-1],i=e.root.children;n?r.children.push({type:"element",tagName:"span",properties:{className:[n]},children:i}):r.children.push(...i)}openNode(e){const n=this,r=e.split(".").map(function(s,a){return a?s+"_".repeat(a):n.options.classPrefix+s}),i=this.stack[this.stack.length-1],o={type:"element",tagName:"span",properties:{className:r},children:[]};i.children.push(o),this.stack.push(o)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}var Xt=[];for(var Kf=0;Kf<256;++Kf)Xt.push((Kf+256).toString(16).slice(1));function C5(t,e=0){return(Xt[t[e+0]]+Xt[t[e+1]]+Xt[t[e+2]]+Xt[t[e+3]]+"-"+Xt[t[e+4]]+Xt[t[e+5]]+"-"+Xt[t[e+6]]+Xt[t[e+7]]+"-"+Xt[t[e+8]]+Xt[t[e+9]]+"-"+Xt[t[e+10]]+Xt[t[e+11]]+Xt[t[e+12]]+Xt[t[e+13]]+Xt[t[e+14]]+Xt[t[e+15]]).toLowerCase()}var Wc,k5=new Uint8Array(16);function S5(){if(!Wc&&(Wc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Wc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Wc(k5)}var _5=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const kx={randomUUID:_5};function E5(t,e,n){if(kx.randomUUID&&!t)return kx.randomUUID();t=t||{};var r=t.random||(t.rng||S5)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,C5(r)}function T5(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function M5(t){const e=t.filter((r,i)=>t.indexOf(r)!==i);return T5(e)}var A5=Ye.create({name:"uniqueID",priority:1e4,addOptions(){return{attributeName:"id",types:[],generateID:()=>E5(),filterTransaction:null,updateDocument:!0}},addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:t=>t.getAttribute(`data-${this.options.attributeName}`),renderHTML:t=>t[this.options.attributeName]?{[`data-${this.options.attributeName}`]:t[this.options.attributeName]}:{}}}}]},onCreate(){var t;if(!this.options.updateDocument)return;const e=this.editor.extensionManager.extensions.find(a=>a.name==="collaboration"),n=this.editor.extensionManager.extensions.find(a=>a.name==="collaborationCaret"),i=[e,n].filter(Boolean).find(a=>{var l;return(l=a==null?void 0:a.options)==null?void 0:l.provider}),o=(t=i==null?void 0:i.options)==null?void 0:t.provider,s=()=>{const{view:a,state:l}=this.editor,{tr:c,doc:u}=l,{types:d,attributeName:h,generateID:f}=this.options;qu(u,g=>d.includes(g.type.name)&&g.attrs[h]===null).forEach(({node:g,pos:m})=>{c.setNodeMarkup(m,void 0,{...g.attrs,[h]:f({node:g,pos:m})})}),c.setMeta("addToHistory",!1),a.dispatch(c),o&&o.off("synced",s)};if(i){if(!o)return s();o.on("synced",s)}else return s()},addProseMirrorPlugins(){if(!this.options.updateDocument)return[];let t=null,e=!1;return[new Ge({key:new Je("uniqueID"),appendTransaction:(n,r,i)=>{const o=n.some(g=>g.docChanged)&&!r.doc.eq(i.doc),s=this.options.filterTransaction&&n.some(g=>{var m,y;return!((y=(m=this.options).filterTransaction)!=null&&y.call(m,g))});if(n.find(g=>g.getMeta("y-sync$"))||!o||s)return;const{tr:l}=i,{types:c,attributeName:u,generateID:d}=this.options,h=Hm(r.doc,n),{mapping:f}=h;if(qm(h).forEach(({newRange:g})=>{const m=ek(i.doc,g,b=>c.includes(b.type.name)),y=m.map(({node:b})=>b.attrs[u]).filter(b=>b!==null);m.forEach(({node:b,pos:C},v)=>{var k;const w=(k=l.doc.nodeAt(C))==null?void 0:k.attrs[u];if(w===null){l.setNodeMarkup(C,void 0,{...b.attrs,[u]:d({node:b,pos:C})});return}const S=m[v+1];if(S&&b.content.size===0){if(l.setNodeMarkup(S.pos,void 0,{...S.node.attrs,[u]:w}),y[v+1]=w,S.node.attrs[u])return;const T=d({node:b,pos:C});return l.setNodeMarkup(C,void 0,{...b.attrs,[u]:T}),y[v]=T,l}const E=M5(y),{deleted:R}=f.invert().mapResult(C);R&&E.includes(w)&&l.setNodeMarkup(C,void 0,{...b.attrs,[u]:d({node:b,pos:C})})})}),!!l.steps.length)return l.setStoredMarks(i.tr.storedMarks),l.setMeta("__uniqueIDTransaction",!0),l},view(n){const r=i=>{var o;t=(o=n.dom.parentElement)!=null&&o.contains(i.target)?n.dom.parentElement:null};return window.addEventListener("dragstart",r),{destroy(){window.removeEventListener("dragstart",r)}}},props:{handleDOMEvents:{drop:(n,r)=>{var i,o;return(t!==n.dom.parentElement||((i=r.dataTransfer)==null?void 0:i.effectAllowed)==="copyMove"||((o=r.dataTransfer)==null?void 0:o.effectAllowed)==="copy")&&(t=null,e=!0),!1},paste:()=>(e=!0,!1)},transformPasted:n=>{if(!e)return n;const{types:r,attributeName:i}=this.options,o=s=>{const a=[];return s.forEach(l=>{if(l.isText){a.push(l);return}if(!r.includes(l.type.name)){a.push(l.copy(o(l.content)));return}const c=l.type.create({...l.attrs,[i]:null},o(l.content),l.marks);a.push(c)}),V.from(a)};return e=!1,new re(o(n.content),n.openStart,n.openEnd)}}})]}});const N5="id",O5=[],L5=!0,R5=typeof crypto<"u"&&typeof crypto.randomUUID=="function";function I5(){if(R5)return crypto.randomUUID();const t=Date.now().toString(36),e=Math.random().toString(36).slice(2,10);return`node-${t}-${e}`}class D5{static create(e={}){const n={attributeName:e.attributeName??N5,types:e.types??O5,generateID:e.generateID??(()=>I5()),filterTransaction:e.filterTransaction??null,updateDocument:e.updateDocument??L5};return A5.configure(n)}static forHeading(){return this.create({types:["heading"],attributeName:"id"})}static forTypes(e){return this.create({types:e,attributeName:"id"})}}function Dl(t){return D5.create(t)}const Sx=6,B5=1,P5=4,$5=new Je("heading-numbering");function F5(t){return{1:" 1",2:" 2",3:" 3",4:" 4",5:" 5",6:" 6"}[t]||""}function _x(t){const e=[];return t.descendants((n,r)=>{if(n.type.name==="heading"&&n.attrs.numbered&&n.attrs.manualNumber){const i=n.attrs.manualNumber,o=n.content.size===0,s=n.attrs.level||1;e.push(St.widget(r+1,()=>{const a=document.createElement("span");if(a.className="numbered-heading-number",a.contentEditable="false",a.setAttribute("aria-hidden","true"),a.setAttribute("data-heading-number",i),a.textContent=i,o){const l=document.createElement("span");l.className="numbered-heading-placeholder",l.textContent=F5(s),a.appendChild(l)}return a.addEventListener("mousedown",l=>l.preventDefault()),a.addEventListener("click",l=>l.preventDefault()),a},{side:-1,key:`heading-number-${r}-${o}`}))}}),j.numbering.debug("",{count:e.length}),at.create(t,e)}function z5(){return new Ge({key:$5,state:{init(t,e){return j.numbering.debug(""),_x(e.doc)},apply(t,e){const n=t.docChanged,r=t.getMeta("numbering-changed");return j.numbering.debug("NumberingPlugin.apply ",{docChanged:n,numberingChanged:r}),!n&&!r?(j.numbering.debug(""),e.map(t.mapping,t.doc)):(j.numbering.debug("",{docChanged:n,numberingChanged:r}),_x(t.doc))}},props:{decorations(t){return this.getState(t)}}})}function Ko(t){return t.type.name==="heading"}function kd(t){j.foldCalculator.debug("  heading depth",{attrs:t});const e=typeof t.level=="number"?t.level:parseInt(String(t.level??1),10)||1,n=Math.max(1,Math.min(e,6));return j.foldCalculator.debug("  level  depth",{level:e,depth:n,attrs:t}),n}class H5{calculate(e,n,r){j.foldCalculator.debug(" ",{headingPos:e,headingDepth:n});const i=r.nodeAt(e);if(!i||!Ko(i))return j.foldCalculator.warn(": ",{headingPos:e}),null;const o=r.resolve(e);let s=r.content.size,a=0,l=null;for(let p=o.depth;p>0;p-=1){const g=o.node(p);if(g.type.spec.isolating){l=g,a=o.start(p),s=a+g.content.size,j.foldCalculator.debug("",{containerStart:a,containerEnd:s});break}}const c=e+i.nodeSize;if(c>=s)return j.foldCalculator.debug("from >= containerEnd",{from:c,containerEnd:s}),null;let u=s;const d=kd(i.attrs);j.foldCalculator.info(" ",{headingPos:e,currentLevel:d,containerEnd:s,hasContainer:!!l});let h=!1;if(r.descendants((p,g)=>{if(h)return!1;if(!(g<=e)){if(g>=s)return j.foldCalculator.debug(" container ",{pos:g,containerEnd:s}),!1;if(l){const m=r.resolve(g);let y=!1;for(let b=m.depth;b>0;b-=1)if(m.node(b)===l){y=!0;break}if(!y){j.foldCalculator.debug("  container",{pos:g,nodeType:p.type.name});return}}if(Ko(p)){const m=kd(p.attrs);if(j.foldCalculator.info(" ",{pos:g,nodeType:p.type.name,nodeLevel:m,currentLevel:d,willStop:m<=d,nodeAttrs:p.attrs}),m<=d)return u=g,h=!0,j.foldCalculator.info(" ",{stopAt:g,nodeLevel:m,currentLevel:d}),!1}}}),c>=u)return j.foldCalculator.debug("from >= to",{from:c,to:u}),null;const f={from:c,to:u};return j.foldCalculator.info(" ",f),f}}function dy(t,e,n){return new H5().calculate(t,e,n)}const W5=new Je("heading-fold");function Ex(t){const e=[];return t.descendants((n,r)=>{if(!Ko(n))return;const i=!!n.attrs.collapsed,o=kd(n.attrs),s=dy(r,o,t);if(s&&i){j.foldButton.info(" ",{headingPos:r,depth:o,rangeFrom:s.from,rangeTo:s.to,headingAttrs:n.attrs});const a=typeof n.attrs.level=="number"?n.attrs.level:parseInt(String(n.attrs.level??1),10)||1;t.nodesBetween(s.from,s.to,(l,c,u,d)=>{if(l.isBlock){if(Ko(l)){const h=typeof l.attrs.level=="number"?l.attrs.level:parseInt(String(l.attrs.level??1),10)||1;if(j.foldButton.debug("",{nodePos:c,nodeLevel:h,currentLevel:a,nodeAttrs:l.attrs}),h<=a)return j.foldButton.warn(" ",{nodePos:c,nodeLevel:h,currentLevel:a}),!1}return j.foldButton.debug(" ",{nodePos:c,nodeType:l.type.name,nodeSize:l.nodeSize}),e.push(St.node(c,c+l.nodeSize,{class:"heading-folded-content"})),!1}})}}),at.create(t,e)}function U5(){return new Ge({key:W5,state:{init(t,e){return Ex(e.doc)},apply(t,e){return!t.docChanged&&!t.getMeta("fold-changed")?e.map(t.mapping,t.doc):Ex(t.doc)}},props:{decorations(t){return this.getState(t)},handleClick(t,e,n){const r=n.target,i=r==null?void 0:r.closest(".heading-fold-toggle-inline");if(!i)return!1;n.preventDefault();const o=i.getAttribute("data-heading-pos");if(!o)return!1;const s=Number(o),a=t.state.doc.nodeAt(s);if(!a||!Ko(a))return!1;const l=!a.attrs.collapsed,c=t.state.tr;return c.setNodeMarkup(s,void 0,{...a.attrs,collapsed:l}),c.setMeta("fold-changed",!0),t.dispatch(c),!0}}})}const hy=mP.extend({addAttributes(){var t;return{...(t=this.parent)==null?void 0:t.call(this),numbered:{default:!1,parseHTML:e=>e.getAttribute("data-numbered")==="true"||e.getAttribute("data-type")==="numbered",renderHTML:e=>e.numbered?{"data-numbered":"true","data-type":"numbered"}:{}},manualNumber:{default:null,parseHTML:e=>e.getAttribute("data-manual-number"),renderHTML:e=>e.manualNumber?{"data-manual-number":e.manualNumber}:{}},indent:{default:0,parseHTML:e=>{const n=e.getAttribute("data-indent");return n?Number(n):0},renderHTML:e=>e.indent&&e.indent>0?{"data-indent":e.indent}:{}},collapsed:{default:!1,parseHTML:e=>e.getAttribute("data-collapsed")==="true",renderHTML:e=>e.collapsed?{"data-collapsed":"true"}:{}}}},addCommands(){var t;return{...(t=this.parent)==null?void 0:t.call(this),toggleNumbered:()=>({state:e,dispatch:n})=>{const{$from:r}=e.selection,i=r.parent;if(i.type.name!=="heading")return!1;if(n){const o=e.tr;o.setNodeMarkup(r.before(),void 0,{...i.attrs,numbered:!i.attrs.numbered,manualNumber:i.attrs.numbered?null:i.attrs.manualNumber}),o.setMeta("fold-changed",!0),n(o)}return!0},indentHeading:()=>({state:e,dispatch:n})=>{const{$from:r}=e.selection,i=r.parent;if(i.type.name!=="heading"||!i.attrs.numbered)return!1;const o=i.attrs.indent,s=i.attrs.level;if(o>=P5||s>=Sx)return!1;if(n){j.headingExtension.debug("",{indent:o,level:s});const a=e.tr;a.setNodeMarkup(r.before(),void 0,{...i.attrs,indent:o+1,level:Math.min(s+1,Sx)}),a.setMeta("numbering-changed",!0),n(a)}return!0},outdentHeading:()=>({state:e,dispatch:n})=>{const{$from:r}=e.selection,i=r.parent;if(i.type.name!=="heading"||!i.attrs.numbered)return!1;const o=i.attrs.indent,s=i.attrs.level;if(o===0)return!1;if(n){j.headingExtension.debug("",{indent:o,level:s});const a=e.tr;a.setNodeMarkup(r.before(),void 0,{...i.attrs,indent:o-1,level:Math.max(s-1,B5)}),a.setMeta("numbering-changed",!0),n(a)}return!0},toggleFold:()=>({state:e,dispatch:n})=>{const{$from:r}=e.selection,i=r.parent;if(i.type.name!=="heading")return!1;if(n){j.headingExtension.debug("",{level:i.attrs.level,collapsed:!i.attrs.collapsed});const o=e.tr;o.setNodeMarkup(r.before(),void 0,{...i.attrs,collapsed:!i.attrs.collapsed}),o.setMeta("fold-changed",!0),n(o)}return!0}}},addInputRules(){var n;const t=((n=this.parent)==null?void 0:n.call(this))??[],e=new rc({find:/^((?:\d+\.)+)\s$/,handler:({state:r,range:i,match:o})=>{const{tr:s}=r,a=i.from,l=i.to,c=o[1];s.delete(a,l);const u=s.doc.resolve(a),d=u.parent;d.type.name==="heading"&&s.setNodeMarkup(u.before(),void 0,{...d.attrs,numbered:!0,manualNumber:c})}});return[...t,e]},addKeyboardShortcuts(){var e;return{...((e=this.parent)==null?void 0:e.call(this))??{}}},renderHTML({node:t,HTMLAttributes:e}){const r=this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0],i={};return t.attrs.numbered&&(i["data-numbered"]="true",t.attrs.manualNumber&&(i["data-manual-number"]=t.attrs.manualNumber)),t.attrs.collapsed&&(i["data-collapsed"]="true"),t.attrs.indent>0&&(i["data-indent"]=String(t.attrs.indent)),[`h${r}`,Qe(this.options.HTMLAttributes,e,i),0]},addProseMirrorPlugins(){var e;return[...((e=this.parent)==null?void 0:e.call(this))??[],z5(),U5()]}}),Uc={theme:"blue",emoji:""},j5={blue:{name:"",defaultEmoji:"",bgClass:"bg-blue-50",borderClass:"border-blue-500",description:""},green:{name:"",defaultEmoji:"",bgClass:"bg-green-50",borderClass:"border-green-500",description:""},yellow:{name:"",defaultEmoji:"",bgClass:"bg-yellow-50",borderClass:"border-yellow-500",description:""},red:{name:"",defaultEmoji:"",bgClass:"bg-red-50",borderClass:"border-red-500",description:""},purple:{name:"",defaultEmoji:"",bgClass:"bg-purple-50",borderClass:"border-purple-500",description:""},gray:{name:"",defaultEmoji:"",bgClass:"bg-gray-50",borderClass:"border-gray-400",description:""},orange:{name:"",defaultEmoji:"",bgClass:"bg-orange-50",borderClass:"border-orange-500",description:""},cyan:{name:"",defaultEmoji:"",bgClass:"bg-cyan-50",borderClass:"border-cyan-500",description:""}};function Tx(t){return j5[t].defaultEmoji}const q5=[{theme:"blue",nameKey:"colorBlue",bgColor:"#eff6ff",borderColor:"#3b82f6"},{theme:"green",nameKey:"colorGreen",bgColor:"#f0fdf4",borderColor:"#22c55e"},{theme:"yellow",nameKey:"colorYellow",bgColor:"#fefce8",borderColor:"#eab308"},{theme:"red",nameKey:"colorRed",bgColor:"#fef2f2",borderColor:"#ef4444"},{theme:"purple",nameKey:"colorPurple",bgColor:"#faf5ff",borderColor:"#a855f7"},{theme:"gray",nameKey:"colorGray",bgColor:"#f9fafb",borderColor:"#6b7280"},{theme:"orange",nameKey:"colorOrange",bgColor:"#fff7ed",borderColor:"#f97316"},{theme:"cyan",nameKey:"colorCyan",bgColor:"#ecfeff",borderColor:"#06b6d4"}];function V5(){return q5}const G5=()=>_.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:_.jsx("polyline",{points:"20 6 9 17 4 12"})});function K5({currentTheme:t,currentCustomColor:e,onSelect:n,onClose:r}){const{t:i}=ki(),o=V5(),s=O.useRef(null);O.useEffect(()=>{const l=c=>{s.current&&!s.current.contains(c.target)&&r()};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[r]);const a=l=>{n(l),r()};return _.jsx("div",{ref:s,className:"color-picker-container",role:"listbox","aria-label":i("changeColor"),children:_.jsx("div",{className:"color-picker-grid",children:o.map(l=>{const c=l.theme===t&&!e,u=i(l.nameKey);return _.jsxs("button",{type:"button",className:`color-picker-item ${c?"color-picker-item-selected":""}`,onClick:()=>a(l.theme),title:u,"aria-label":u,"aria-selected":c,role:"option",children:[_.jsx("span",{className:"color-picker-swatch",style:{backgroundColor:l.borderColor}}),c&&_.jsx("span",{className:"color-picker-check",children:_.jsx(G5,{})})]},l.theme)})})})}const Y5=[{emoji:"",nameKey:"iconLightbulb"},{emoji:"",nameKey:"iconCheck"},{emoji:"",nameKey:"iconWarning"},{emoji:"",nameKey:"iconAlarm"},{emoji:"",nameKey:"iconStar"},{emoji:"",nameKey:"iconMemo"},{emoji:"",nameKey:"iconFire"},{emoji:"",nameKey:"iconTarget"},{emoji:"",nameKey:"iconPin"},{emoji:"",nameKey:"iconSpeech"},{emoji:"",nameKey:"iconBooks"},{emoji:"",nameKey:"iconPalette"},{emoji:"",nameKey:"iconBell"},{emoji:"",nameKey:"iconParty"},{emoji:"",nameKey:"iconThought"},{emoji:"",nameKey:"iconHeart"}];function X5(){return Y5}const Z5=()=>_.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:_.jsx("polyline",{points:"20 6 9 17 4 12"})});function J5({currentEmoji:t,onSelect:e,onClose:n}){const{t:r}=ki(),i=X5(),o=O.useRef(null);O.useEffect(()=>{const a=l=>{o.current&&!o.current.contains(l.target)&&n()};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[n]);const s=a=>{e(a),n()};return _.jsx("div",{ref:o,className:"icon-picker-container",role:"listbox","aria-label":r("changeIcon"),children:_.jsx("div",{className:"icon-picker-grid",children:i.map(a=>{const l=a.emoji===t,c=r(a.nameKey);return _.jsxs("button",{type:"button",className:`icon-picker-item ${l?"icon-picker-item-selected":""}`,onClick:()=>s(a.emoji),title:c,"aria-label":c,"aria-selected":l,role:"option",children:[_.jsx("span",{className:"icon-picker-emoji",children:a.emoji}),l&&_.jsx("span",{className:"icon-picker-check",children:_.jsx(Z5,{})})]},a.emoji)})})})}const Q5=()=>_.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("circle",{cx:"12",cy:"12",r:"10"}),_.jsx("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}),_.jsx("line",{x1:"9",y1:"9",x2:"9.01",y2:"9"}),_.jsx("line",{x1:"15",y1:"9",x2:"15.01",y2:"9"})]}),eF=()=>_.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("circle",{cx:"13.5",cy:"6.5",r:"1.5",fill:"currentColor",stroke:"none"}),_.jsx("circle",{cx:"17.5",cy:"10.5",r:"1.5",fill:"currentColor",stroke:"none"}),_.jsx("circle",{cx:"8.5",cy:"7.5",r:"1.5",fill:"currentColor",stroke:"none"}),_.jsx("circle",{cx:"6.5",cy:"12.5",r:"1.5",fill:"currentColor",stroke:"none"}),_.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.563-2.512 5.563-5.563C22 6.375 17.5 2 12 2Z"})]}),tF=()=>_.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("path",{d:"M3 6h18"}),_.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),_.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),_.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),_.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]});function nF({currentTheme:t,currentEmoji:e,currentCustomColor:n,visible:r,onEmojiChange:i,onColorChange:o,onDelete:s}){const{t:a}=ki(),[l,c]=O.useState(!1),[u,d]=O.useState(!1);if(!r)return null;const h=()=>{c(!1),d(!1)};return _.jsx("div",{className:"callout-hover-toolbar",contentEditable:!1,children:_.jsxs("div",{className:"callout-hover-toolbar-content",children:[_.jsxs("div",{style:{position:"relative"},children:[_.jsx("button",{type:"button",className:"callout-hover-toolbar-button",onClick:()=>{d(!1),c(!l)},title:a("changeIcon"),"aria-label":a("changeIcon"),children:_.jsx(Q5,{})}),l&&_.jsx("div",{style:{position:"absolute",top:"100%",left:0,marginTop:"4px"},children:_.jsx(J5,{currentEmoji:e,onSelect:f=>{i(f),h()},onClose:()=>c(!1)})})]}),_.jsxs("div",{style:{position:"relative"},children:[_.jsx("button",{type:"button",className:"callout-hover-toolbar-button",onClick:()=>{c(!1),d(!u)},title:a("changeColor"),"aria-label":a("changeColor"),children:_.jsx(eF,{})}),u&&_.jsx("div",{style:{position:"absolute",top:"100%",left:0,marginTop:"4px"},children:_.jsx(K5,{currentTheme:t,currentCustomColor:n,onSelect:o,onClose:()=>d(!1)})})]}),_.jsx("button",{type:"button",className:"callout-hover-toolbar-button callout-hover-toolbar-delete",onClick:s,title:a("delete"),"aria-label":a("delete"),children:_.jsx(tF,{})})]})})}const rF={blue:"info",green:"success",yellow:"warning",red:"danger",gray:"note",purple:"purple",orange:"orange",cyan:"cyan"};function iF(t){const{node:e,editor:n,getPos:r,deleteNode:i}=t,{theme:o,emoji:s,customColor:a}=e.attrs,l=rF[o]||"info",c=(h,f)=>{const p=r();typeof p=="number"&&n.commands.command(({tr:g,dispatch:m})=>(m&&g.setNodeMarkup(p,void 0,{...e.attrs,theme:h,customColor:f||null}),!0))},u=h=>{const f=r();typeof f=="number"&&n.commands.command(({tr:p,dispatch:g})=>(g&&p.setNodeMarkup(f,void 0,{...e.attrs,emoji:h}),!0))},d=()=>{i()};return _.jsx(_h,{"data-callout-node-view":!0,children:_.jsxs("div",{className:"callout-wrapper","data-theme":o,"data-emoji":s,style:{position:"relative"},children:[_.jsx(nF,{currentTheme:o,currentEmoji:s,currentCustomColor:a,visible:!0,onEmojiChange:u,onColorChange:c,onDelete:d}),_.jsxs("div",{className:`callout-container callout-${l}`,children:[_.jsx("div",{className:"callout-emoji-container",contentEditable:!1,children:_.jsx("span",{className:"callout-emoji-display",children:s})}),_.jsx("div",{className:"callout-content",children:_.jsx(Zm,{})})]})]})})}const oF=Eh(iF),sF=_t.create({name:"callout",group:"block",content:"block+",defining:!0,addOptions(){return{HTMLAttributes:{}}},addAttributes(){return{theme:{default:Uc.theme,parseHTML:t=>t.getAttribute("data-theme")||Uc.theme,renderHTML:t=>({"data-theme":t.theme})},emoji:{default:Uc.emoji,parseHTML:t=>{const e=t.getAttribute("data-theme");return t.getAttribute("data-emoji")||Tx(e||"blue")},renderHTML:t=>({"data-emoji":t.emoji})},customColor:{default:null,parseHTML:t=>t.getAttribute("data-custom-color")||null,renderHTML:t=>t.customColor?{"data-custom-color":t.customColor}:{}}}},parseHTML(){return[{tag:'div[data-type="callout"]'}]},renderHTML({node:t,HTMLAttributes:e}){return["div",Qe(this.options.HTMLAttributes,e,{"data-type":"callout"}),0]},addNodeView(){return oF},addCommands(){return{insertCallout:(t={})=>({commands:e})=>{const n=t.theme||Uc.theme,r=t.emoji||Tx(n);return e.insertContent({type:this.name,attrs:{theme:n,emoji:r},content:[{type:"paragraph"}]})},updateCalloutAttrs:t=>({tr:e,state:n,dispatch:r})=>{const{selection:i}=n,{$from:o}=i;let s=null,a=null;for(let l=o.depth;l>0;l--){const c=o.node(l);if(c.type.name==="callout"){s=c,a=o.before(l);break}}return!s||a===null?!1:(r&&e.setNodeMarkup(a,void 0,{...s.attrs,...t}),!0)}}}}),aF=sF;var Mx={name:"mermaid",version:"11.12.2",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.13",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},gu={exports:{}},lF=gu.exports,Ax;function cF(){return Ax||(Ax=1,(function(t,e){(function(n,r){t.exports=r()})(lF,(function(){var n=1e3,r=6e4,i=36e5,o="millisecond",s="second",a="minute",l="hour",c="day",u="week",d="month",h="quarter",f="year",p="date",g="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(A){var M=["th","st","nd","rd"],L=A%100;return"["+A+(M[(L-20)%10]||M[L]||M[0])+"]"}},C=function(A,M,L){var F=String(A);return!F||F.length>=M?A:""+Array(M+1-F.length).join(L)+A},v={s:C,z:function(A){var M=-A.utcOffset(),L=Math.abs(M),F=Math.floor(L/60),I=L%60;return(M<=0?"+":"-")+C(F,2,"0")+":"+C(I,2,"0")},m:function A(M,L){if(M.date()<L.date())return-A(L,M);var F=12*(L.year()-M.year())+(L.month()-M.month()),I=M.clone().add(F,d),q=L-I<0,Z=M.clone().add(F+(q?-1:1),d);return+(-(F+(L-I)/(q?I-Z:Z-I))||0)},a:function(A){return A<0?Math.ceil(A)||0:Math.floor(A)},p:function(A){return{M:d,y:f,w:u,d:c,D:p,h:l,m:a,s,ms:o,Q:h}[A]||String(A||"").toLowerCase().replace(/s$/,"")},u:function(A){return A===void 0}},k="en",w={};w[k]=b;var S="$isDayjsObject",E=function(A){return A instanceof P||!(!A||!A[S])},R=function A(M,L,F){var I;if(!M)return k;if(typeof M=="string"){var q=M.toLowerCase();w[q]&&(I=q),L&&(w[q]=L,I=q);var Z=M.split("-");if(!I&&Z.length>1)return A(Z[0])}else{var Q=M.name;w[Q]=M,I=Q}return!F&&I&&(k=I),I||!F&&k},$=function(A,M){if(E(A))return A.clone();var L=typeof M=="object"?M:{};return L.date=A,L.args=arguments,new P(L)},T=v;T.l=R,T.i=E,T.w=function(A,M){return $(A,{locale:M.$L,utc:M.$u,x:M.$x,$offset:M.$offset})};var P=(function(){function A(L){this.$L=R(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[S]=!0}var M=A.prototype;return M.parse=function(L){this.$d=(function(F){var I=F.date,q=F.utc;if(I===null)return new Date(NaN);if(T.u(I))return new Date;if(I instanceof Date)return new Date(I);if(typeof I=="string"&&!/Z$/i.test(I)){var Z=I.match(m);if(Z){var Q=Z[2]-1||0,H=(Z[7]||"0").substring(0,3);return q?new Date(Date.UTC(Z[1],Q,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,H)):new Date(Z[1],Q,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,H)}}return new Date(I)})(L),this.init()},M.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},M.$utils=function(){return T},M.isValid=function(){return this.$d.toString()!==g},M.isSame=function(L,F){var I=$(L);return this.startOf(F)<=I&&I<=this.endOf(F)},M.isAfter=function(L,F){return $(L)<this.startOf(F)},M.isBefore=function(L,F){return this.endOf(F)<$(L)},M.$g=function(L,F,I){return T.u(L)?this[F]:this.set(I,L)},M.unix=function(){return Math.floor(this.valueOf()/1e3)},M.valueOf=function(){return this.$d.getTime()},M.startOf=function(L,F){var I=this,q=!!T.u(F)||F,Z=T.p(L),Q=function(Oe,De){var Xe=T.w(I.$u?Date.UTC(I.$y,De,Oe):new Date(I.$y,De,Oe),I);return q?Xe:Xe.endOf(c)},H=function(Oe,De){return T.w(I.toDate()[Oe].apply(I.toDate("s"),(q?[0,0,0,0]:[23,59,59,999]).slice(De)),I)},Y=this.$W,oe=this.$M,K=this.$D,ne="set"+(this.$u?"UTC":"");switch(Z){case f:return q?Q(1,0):Q(31,11);case d:return q?Q(1,oe):Q(0,oe+1);case u:var ue=this.$locale().weekStart||0,ke=(Y<ue?Y+7:Y)-ue;return Q(q?K-ke:K+(6-ke),oe);case c:case p:return H(ne+"Hours",0);case l:return H(ne+"Minutes",1);case a:return H(ne+"Seconds",2);case s:return H(ne+"Milliseconds",3);default:return this.clone()}},M.endOf=function(L){return this.startOf(L,!1)},M.$set=function(L,F){var I,q=T.p(L),Z="set"+(this.$u?"UTC":""),Q=(I={},I[c]=Z+"Date",I[p]=Z+"Date",I[d]=Z+"Month",I[f]=Z+"FullYear",I[l]=Z+"Hours",I[a]=Z+"Minutes",I[s]=Z+"Seconds",I[o]=Z+"Milliseconds",I)[q],H=q===c?this.$D+(F-this.$W):F;if(q===d||q===f){var Y=this.clone().set(p,1);Y.$d[Q](H),Y.init(),this.$d=Y.set(p,Math.min(this.$D,Y.daysInMonth())).$d}else Q&&this.$d[Q](H);return this.init(),this},M.set=function(L,F){return this.clone().$set(L,F)},M.get=function(L){return this[T.p(L)]()},M.add=function(L,F){var I,q=this;L=Number(L);var Z=T.p(F),Q=function(oe){var K=$(q);return T.w(K.date(K.date()+Math.round(oe*L)),q)};if(Z===d)return this.set(d,this.$M+L);if(Z===f)return this.set(f,this.$y+L);if(Z===c)return Q(1);if(Z===u)return Q(7);var H=(I={},I[a]=r,I[l]=i,I[s]=n,I)[Z]||1,Y=this.$d.getTime()+L*H;return T.w(Y,this)},M.subtract=function(L,F){return this.add(-1*L,F)},M.format=function(L){var F=this,I=this.$locale();if(!this.isValid())return I.invalidDate||g;var q=L||"YYYY-MM-DDTHH:mm:ssZ",Z=T.z(this),Q=this.$H,H=this.$m,Y=this.$M,oe=I.weekdays,K=I.months,ne=I.meridiem,ue=function(De,Xe,Et,bt){return De&&(De[Xe]||De(F,q))||Et[Xe].slice(0,bt)},ke=function(De){return T.s(Q%12||12,De,"0")},Oe=ne||function(De,Xe,Et){var bt=De<12?"AM":"PM";return Et?bt.toLowerCase():bt};return q.replace(y,(function(De,Xe){return Xe||(function(Et){switch(Et){case"YY":return String(F.$y).slice(-2);case"YYYY":return T.s(F.$y,4,"0");case"M":return Y+1;case"MM":return T.s(Y+1,2,"0");case"MMM":return ue(I.monthsShort,Y,K,3);case"MMMM":return ue(K,Y);case"D":return F.$D;case"DD":return T.s(F.$D,2,"0");case"d":return String(F.$W);case"dd":return ue(I.weekdaysMin,F.$W,oe,2);case"ddd":return ue(I.weekdaysShort,F.$W,oe,3);case"dddd":return oe[F.$W];case"H":return String(Q);case"HH":return T.s(Q,2,"0");case"h":return ke(1);case"hh":return ke(2);case"a":return Oe(Q,H,!0);case"A":return Oe(Q,H,!1);case"m":return String(H);case"mm":return T.s(H,2,"0");case"s":return String(F.$s);case"ss":return T.s(F.$s,2,"0");case"SSS":return T.s(F.$ms,3,"0");case"Z":return Z}return null})(De)||Z.replace(":","")}))},M.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},M.diff=function(L,F,I){var q,Z=this,Q=T.p(F),H=$(L),Y=(H.utcOffset()-this.utcOffset())*r,oe=this-H,K=function(){return T.m(Z,H)};switch(Q){case f:q=K()/12;break;case d:q=K();break;case h:q=K()/3;break;case u:q=(oe-Y)/6048e5;break;case c:q=(oe-Y)/864e5;break;case l:q=oe/i;break;case a:q=oe/r;break;case s:q=oe/n;break;default:q=oe}return I?q:T.a(q)},M.daysInMonth=function(){return this.endOf(d).$D},M.$locale=function(){return w[this.$L]},M.locale=function(L,F){if(!L)return this.$L;var I=this.clone(),q=R(L,F,!0);return q&&(I.$L=q),I},M.clone=function(){return T.w(this.$d,this)},M.toDate=function(){return new Date(this.valueOf())},M.toJSON=function(){return this.isValid()?this.toISOString():null},M.toISOString=function(){return this.$d.toISOString()},M.toString=function(){return this.$d.toUTCString()},A})(),B=P.prototype;return $.prototype=B,[["$ms",o],["$s",s],["$m",a],["$H",l],["$W",c],["$M",d],["$y",f],["$D",p]].forEach((function(A){B[A[1]]=function(M){return this.$g(M,A[0],A[1])}})),$.extend=function(A,M){return A.$i||(A(M,P,$),A.$i=!0),$},$.locale=R,$.isDayjs=E,$.unix=function(A){return $(1e3*A)},$.en=w[k],$.Ls=w,$.p={},$}))})(gu)),gu.exports}var uF=cF();const dF=mm(uF);var ES=Object.defineProperty,x=(t,e)=>ES(t,"name",{value:e,configurable:!0}),hF=(t,e)=>{for(var n in e)ES(t,n,{get:e[n],enumerable:!0})},si={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},G={trace:x((...t)=>{},"trace"),debug:x((...t)=>{},"debug"),info:x((...t)=>{},"info"),warn:x((...t)=>{},"warn"),error:x((...t)=>{},"error"),fatal:x((...t)=>{},"fatal")},fy=x(function(t="fatal"){let e=si.fatal;typeof t=="string"?t.toLowerCase()in si&&(e=si[t]):typeof t=="number"&&(e=t),G.trace=()=>{},G.debug=()=>{},G.info=()=>{},G.warn=()=>{},G.error=()=>{},G.fatal=()=>{},e<=si.fatal&&(G.fatal=console.error?console.error.bind(console,er("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",er("FATAL"))),e<=si.error&&(G.error=console.error?console.error.bind(console,er("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",er("ERROR"))),e<=si.warn&&(G.warn=console.warn?console.warn.bind(console,er("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",er("WARN"))),e<=si.info&&(G.info=console.info?console.info.bind(console,er("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",er("INFO"))),e<=si.debug&&(G.debug=console.debug?console.debug.bind(console,er("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",er("DEBUG"))),e<=si.trace&&(G.trace=console.debug?console.debug.bind(console,er("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",er("TRACE")))},"setLogLevel"),er=x(t=>`%c${dF().format("ss.SSS")} : ${t} : `,"format");const mu={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:t=>t>=255?255:t<0?0:t,g:t=>t>=255?255:t<0?0:t,b:t=>t>=255?255:t<0?0:t,h:t=>t%360,s:t=>t>=100?100:t<0?0:t,l:t=>t>=100?100:t<0?0:t,a:t=>t>=1?1:t<0?0:t},toLinear:t=>{const e=t/255;return t>.03928?Math.pow((e+.055)/1.055,2.4):e/12.92},hue2rgb:(t,e,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t),hsl2rgb:({h:t,s:e,l:n},r)=>{if(!e)return n*2.55;t/=360,e/=100,n/=100;const i=n<.5?n*(1+e):n+e-n*e,o=2*n-i;switch(r){case"r":return mu.hue2rgb(o,i,t+1/3)*255;case"g":return mu.hue2rgb(o,i,t)*255;case"b":return mu.hue2rgb(o,i,t-1/3)*255}},rgb2hsl:({r:t,g:e,b:n},r)=>{t/=255,e/=255,n/=255;const i=Math.max(t,e,n),o=Math.min(t,e,n),s=(i+o)/2;if(r==="l")return s*100;if(i===o)return 0;const a=i-o,l=s>.5?a/(2-i-o):a/(i+o);if(r==="s")return l*100;switch(i){case t:return((e-n)/a+(e<n?6:0))*60;case e:return((n-t)/a+2)*60;case n:return((t-e)/a+4)*60;default:return-1}}},fF={clamp:(t,e,n)=>e>n?Math.min(e,Math.max(n,t)):Math.min(n,Math.max(e,t)),round:t=>Math.round(t*1e10)/1e10},pF={dec2hex:t=>{const e=Math.round(t).toString(16);return e.length>1?e:`0${e}`}},Be={channel:mu,lang:fF,unit:pF},Li={};for(let t=0;t<=255;t++)Li[t]=Be.unit.dec2hex(t);const cn={ALL:0,RGB:1,HSL:2};class gF{constructor(){this.type=cn.ALL}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=cn.ALL}is(e){return this.type===e}}class mF{constructor(e,n){this.color=n,this.changed=!1,this.data=e,this.type=new gF}set(e,n){return this.color=n,this.changed=!1,this.data=e,this.type.type=cn.ALL,this}_ensureHSL(){const e=this.data,{h:n,s:r,l:i}=e;n===void 0&&(e.h=Be.channel.rgb2hsl(e,"h")),r===void 0&&(e.s=Be.channel.rgb2hsl(e,"s")),i===void 0&&(e.l=Be.channel.rgb2hsl(e,"l"))}_ensureRGB(){const e=this.data,{r:n,g:r,b:i}=e;n===void 0&&(e.r=Be.channel.hsl2rgb(e,"r")),r===void 0&&(e.g=Be.channel.hsl2rgb(e,"g")),i===void 0&&(e.b=Be.channel.hsl2rgb(e,"b"))}get r(){const e=this.data,n=e.r;return!this.type.is(cn.HSL)&&n!==void 0?n:(this._ensureHSL(),Be.channel.hsl2rgb(e,"r"))}get g(){const e=this.data,n=e.g;return!this.type.is(cn.HSL)&&n!==void 0?n:(this._ensureHSL(),Be.channel.hsl2rgb(e,"g"))}get b(){const e=this.data,n=e.b;return!this.type.is(cn.HSL)&&n!==void 0?n:(this._ensureHSL(),Be.channel.hsl2rgb(e,"b"))}get h(){const e=this.data,n=e.h;return!this.type.is(cn.RGB)&&n!==void 0?n:(this._ensureRGB(),Be.channel.rgb2hsl(e,"h"))}get s(){const e=this.data,n=e.s;return!this.type.is(cn.RGB)&&n!==void 0?n:(this._ensureRGB(),Be.channel.rgb2hsl(e,"s"))}get l(){const e=this.data,n=e.l;return!this.type.is(cn.RGB)&&n!==void 0?n:(this._ensureRGB(),Be.channel.rgb2hsl(e,"l"))}get a(){return this.data.a}set r(e){this.type.set(cn.RGB),this.changed=!0,this.data.r=e}set g(e){this.type.set(cn.RGB),this.changed=!0,this.data.g=e}set b(e){this.type.set(cn.RGB),this.changed=!0,this.data.b=e}set h(e){this.type.set(cn.HSL),this.changed=!0,this.data.h=e}set s(e){this.type.set(cn.HSL),this.changed=!0,this.data.s=e}set l(e){this.type.set(cn.HSL),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}}const Mh=new mF({r:0,g:0,b:0,a:0},"transparent"),zs={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:t=>{if(t.charCodeAt(0)!==35)return;const e=t.match(zs.re);if(!e)return;const n=e[1],r=parseInt(n,16),i=n.length,o=i%4===0,s=i>4,a=s?1:17,l=s?8:4,c=o?0:-1,u=s?255:15;return Mh.set({r:(r>>l*(c+3)&u)*a,g:(r>>l*(c+2)&u)*a,b:(r>>l*(c+1)&u)*a,a:o?(r&u)*a/255:1},t)},stringify:t=>{const{r:e,g:n,b:r,a:i}=t;return i<1?`#${Li[Math.round(e)]}${Li[Math.round(n)]}${Li[Math.round(r)]}${Li[Math.round(i*255)]}`:`#${Li[Math.round(e)]}${Li[Math.round(n)]}${Li[Math.round(r)]}`}},No={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:t=>{const e=t.match(No.hueRe);if(e){const[,n,r]=e;switch(r){case"grad":return Be.channel.clamp.h(parseFloat(n)*.9);case"rad":return Be.channel.clamp.h(parseFloat(n)*180/Math.PI);case"turn":return Be.channel.clamp.h(parseFloat(n)*360)}}return Be.channel.clamp.h(parseFloat(t))},parse:t=>{const e=t.charCodeAt(0);if(e!==104&&e!==72)return;const n=t.match(No.re);if(!n)return;const[,r,i,o,s,a]=n;return Mh.set({h:No._hue2deg(r),s:Be.channel.clamp.s(parseFloat(i)),l:Be.channel.clamp.l(parseFloat(o)),a:s?Be.channel.clamp.a(a?parseFloat(s)/100:parseFloat(s)):1},t)},stringify:t=>{const{h:e,s:n,l:r,a:i}=t;return i<1?`hsla(${Be.lang.round(e)}, ${Be.lang.round(n)}%, ${Be.lang.round(r)}%, ${i})`:`hsl(${Be.lang.round(e)}, ${Be.lang.round(n)}%, ${Be.lang.round(r)}%)`}},fl={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:t=>{t=t.toLowerCase();const e=fl.colors[t];if(e)return zs.parse(e)},stringify:t=>{const e=zs.stringify(t);for(const n in fl.colors)if(fl.colors[n]===e)return n}},Ka={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:t=>{const e=t.charCodeAt(0);if(e!==114&&e!==82)return;const n=t.match(Ka.re);if(!n)return;const[,r,i,o,s,a,l,c,u]=n;return Mh.set({r:Be.channel.clamp.r(i?parseFloat(r)*2.55:parseFloat(r)),g:Be.channel.clamp.g(s?parseFloat(o)*2.55:parseFloat(o)),b:Be.channel.clamp.b(l?parseFloat(a)*2.55:parseFloat(a)),a:c?Be.channel.clamp.a(u?parseFloat(c)/100:parseFloat(c)):1},t)},stringify:t=>{const{r:e,g:n,b:r,a:i}=t;return i<1?`rgba(${Be.lang.round(e)}, ${Be.lang.round(n)}, ${Be.lang.round(r)}, ${Be.lang.round(i)})`:`rgb(${Be.lang.round(e)}, ${Be.lang.round(n)}, ${Be.lang.round(r)})`}},Xr={format:{keyword:fl,hex:zs,rgb:Ka,rgba:Ka,hsl:No,hsla:No},parse:t=>{if(typeof t!="string")return t;const e=zs.parse(t)||Ka.parse(t)||No.parse(t)||fl.parse(t);if(e)return e;throw new Error(`Unsupported color format: "${t}"`)},stringify:t=>!t.changed&&t.color?t.color:t.type.is(cn.HSL)||t.data.r===void 0?No.stringify(t):t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?Ka.stringify(t):zs.stringify(t)},TS=(t,e)=>{const n=Xr.parse(t);for(const r in e)n[r]=Be.channel.clamp[r](e[r]);return Xr.stringify(n)},pl=(t,e,n=0,r=1)=>{if(typeof t!="number")return TS(t,{a:e});const i=Mh.set({r:Be.channel.clamp.r(t),g:Be.channel.clamp.g(e),b:Be.channel.clamp.b(n),a:Be.channel.clamp.a(r)});return Xr.stringify(i)},yF=t=>{const{r:e,g:n,b:r}=Xr.parse(t),i=.2126*Be.channel.toLinear(e)+.7152*Be.channel.toLinear(n)+.0722*Be.channel.toLinear(r);return Be.lang.round(i)},bF=t=>yF(t)>=.5,oc=t=>!bF(t),MS=(t,e,n)=>{const r=Xr.parse(t),i=r[e],o=Be.channel.clamp[e](i+n);return i!==o&&(r[e]=o),Xr.stringify(r)},pe=(t,e)=>MS(t,"l",e),Te=(t,e)=>MS(t,"l",-e),z=(t,e)=>{const n=Xr.parse(t),r={};for(const i in e)e[i]&&(r[i]=n[i]+e[i]);return TS(t,r)},xF=(t,e,n=50)=>{const{r,g:i,b:o,a:s}=Xr.parse(t),{r:a,g:l,b:c,a:u}=Xr.parse(e),d=n/100,h=d*2-1,f=s-u,g=((h*f===-1?h:(h+f)/(1+h*f))+1)/2,m=1-g,y=r*g+a*m,b=i*g+l*m,C=o*g+c*m,v=s*d+u*(1-d);return pl(y,b,C,v)},ie=(t,e=100)=>{const n=Xr.parse(t);return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,xF(n,t,e)};/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:AS,setPrototypeOf:Nx,isFrozen:vF,getPrototypeOf:wF,getOwnPropertyDescriptor:CF}=Object;let{freeze:Mn,seal:ur,create:ig}=Object,{apply:og,construct:sg}=typeof Reflect<"u"&&Reflect;Mn||(Mn=function(e){return e});ur||(ur=function(e){return e});og||(og=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return e.apply(n,i)});sg||(sg=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new e(...r)});const jc=An(Array.prototype.forEach),kF=An(Array.prototype.lastIndexOf),Ox=An(Array.prototype.pop),Na=An(Array.prototype.push),SF=An(Array.prototype.splice),yu=An(String.prototype.toLowerCase),Yf=An(String.prototype.toString),Xf=An(String.prototype.match),Oa=An(String.prototype.replace),_F=An(String.prototype.indexOf),EF=An(String.prototype.trim),yr=An(Object.prototype.hasOwnProperty),vn=An(RegExp.prototype.test),La=TF(TypeError);function An(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return og(t,e,r)}}function TF(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return sg(t,n)}}function Ue(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yu;Nx&&Nx(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const o=n(i);o!==i&&(vF(e)||(e[r]=o),i=o)}t[i]=!0}return t}function MF(t){for(let e=0;e<t.length;e++)yr(t,e)||(t[e]=null);return t}function ci(t){const e=ig(null);for(const[n,r]of AS(t))yr(t,n)&&(Array.isArray(r)?e[n]=MF(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=ci(r):e[n]=r);return e}function Ra(t,e){for(;t!==null;){const r=CF(t,e);if(r){if(r.get)return An(r.get);if(typeof r.value=="function")return An(r.value)}t=wF(t)}function n(){return null}return n}const Lx=Mn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Zf=Mn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Jf=Mn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),AF=Mn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Qf=Mn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),NF=Mn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Rx=Mn(["#text"]),Ix=Mn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ep=Mn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Dx=Mn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),qc=Mn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),OF=ur(/\{\{[\w\W]*|[\w\W]*\}\}/gm),LF=ur(/<%[\w\W]*|[\w\W]*%>/gm),RF=ur(/\$\{[\w\W]*/gm),IF=ur(/^data-[\-\w.\u00B7-\uFFFF]+$/),DF=ur(/^aria-[\-\w]+$/),NS=ur(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),BF=ur(/^(?:\w+script|data):/i),PF=ur(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),OS=ur(/^html$/i),$F=ur(/^[a-z][.\w]*(-[.\w]+)+$/i);var Bx=Object.freeze({__proto__:null,ARIA_ATTR:DF,ATTR_WHITESPACE:PF,CUSTOM_ELEMENT:$F,DATA_ATTR:IF,DOCTYPE_NAME:OS,ERB_EXPR:LF,IS_ALLOWED_URI:NS,IS_SCRIPT_OR_DATA:BF,MUSTACHE_EXPR:OF,TMPLIT_EXPR:RF});const Ia={element:1,text:3,progressingInstruction:7,comment:8,document:9},FF=function(){return typeof window>"u"?null:window},zF=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const o="dompurify"+(r?"#"+r:"");try{return e.createPolicy(o,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}},Px=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function LS(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:FF();const e=ve=>LS(ve);if(e.version="3.3.0",e.removed=[],!t||!t.document||t.document.nodeType!==Ia.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:o,HTMLTemplateElement:s,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:h,trustedTypes:f}=t,p=l.prototype,g=Ra(p,"cloneNode"),m=Ra(p,"remove"),y=Ra(p,"nextSibling"),b=Ra(p,"childNodes"),C=Ra(p,"parentNode");if(typeof s=="function"){const ve=n.createElement("template");ve.content&&ve.content.ownerDocument&&(n=ve.content.ownerDocument)}let v,k="";const{implementation:w,createNodeIterator:S,createDocumentFragment:E,getElementsByTagName:R}=n,{importNode:$}=r;let T=Px();e.isSupported=typeof AS=="function"&&typeof C=="function"&&w&&w.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:P,ERB_EXPR:B,TMPLIT_EXPR:A,DATA_ATTR:M,ARIA_ATTR:L,IS_SCRIPT_OR_DATA:F,ATTR_WHITESPACE:I,CUSTOM_ELEMENT:q}=Bx;let{IS_ALLOWED_URI:Z}=Bx,Q=null;const H=Ue({},[...Lx,...Zf,...Jf,...Qf,...Rx]);let Y=null;const oe=Ue({},[...Ix,...ep,...Dx,...qc]);let K=Object.seal(ig(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ne=null,ue=null;const ke=Object.seal(ig(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Oe=!0,De=!0,Xe=!1,Et=!0,bt=!1,Vt=!0,rn=!1,He=!1,on=!1,Dt=!1,Fn=!1,Gt=!1,zn=!0,Or=!1;const Jn="user-content-";let Kt=!0,Hn=!1,Ht={},sn=null;const Lr=Ue({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ps=null;const gs=Ue({},["audio","video","img","source","image","track"]);let go=null;const ms=Ue({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ti="http://www.w3.org/1998/Math/MathML",W="http://www.w3.org/2000/svg",ae="http://www.w3.org/1999/xhtml";let Ee=ae,qe=!1,$e=null;const Tt=Ue({},[Ti,W,ae],Yf);let Mt=Ue({},["mi","mo","mn","ms","mtext"]),Wn=Ue({},["annotation-xml"]);const mo=Ue({},["title","style","font","a","script"]);let At=null;const N=["application/xhtml+xml","text/html"],U="text/html";let X=null,Me=null;const ut=n.createElement("form"),it=function(D){return D instanceof RegExp||D instanceof Function},he=function(){let D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Me&&Me===D)){if((!D||typeof D!="object")&&(D={}),D=ci(D),At=N.indexOf(D.PARSER_MEDIA_TYPE)===-1?U:D.PARSER_MEDIA_TYPE,X=At==="application/xhtml+xml"?Yf:yu,Q=yr(D,"ALLOWED_TAGS")?Ue({},D.ALLOWED_TAGS,X):H,Y=yr(D,"ALLOWED_ATTR")?Ue({},D.ALLOWED_ATTR,X):oe,$e=yr(D,"ALLOWED_NAMESPACES")?Ue({},D.ALLOWED_NAMESPACES,Yf):Tt,go=yr(D,"ADD_URI_SAFE_ATTR")?Ue(ci(ms),D.ADD_URI_SAFE_ATTR,X):ms,ps=yr(D,"ADD_DATA_URI_TAGS")?Ue(ci(gs),D.ADD_DATA_URI_TAGS,X):gs,sn=yr(D,"FORBID_CONTENTS")?Ue({},D.FORBID_CONTENTS,X):Lr,ne=yr(D,"FORBID_TAGS")?Ue({},D.FORBID_TAGS,X):ci({}),ue=yr(D,"FORBID_ATTR")?Ue({},D.FORBID_ATTR,X):ci({}),Ht=yr(D,"USE_PROFILES")?D.USE_PROFILES:!1,Oe=D.ALLOW_ARIA_ATTR!==!1,De=D.ALLOW_DATA_ATTR!==!1,Xe=D.ALLOW_UNKNOWN_PROTOCOLS||!1,Et=D.ALLOW_SELF_CLOSE_IN_ATTR!==!1,bt=D.SAFE_FOR_TEMPLATES||!1,Vt=D.SAFE_FOR_XML!==!1,rn=D.WHOLE_DOCUMENT||!1,Dt=D.RETURN_DOM||!1,Fn=D.RETURN_DOM_FRAGMENT||!1,Gt=D.RETURN_TRUSTED_TYPE||!1,on=D.FORCE_BODY||!1,zn=D.SANITIZE_DOM!==!1,Or=D.SANITIZE_NAMED_PROPS||!1,Kt=D.KEEP_CONTENT!==!1,Hn=D.IN_PLACE||!1,Z=D.ALLOWED_URI_REGEXP||NS,Ee=D.NAMESPACE||ae,Mt=D.MATHML_TEXT_INTEGRATION_POINTS||Mt,Wn=D.HTML_INTEGRATION_POINTS||Wn,K=D.CUSTOM_ELEMENT_HANDLING||{},D.CUSTOM_ELEMENT_HANDLING&&it(D.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(K.tagNameCheck=D.CUSTOM_ELEMENT_HANDLING.tagNameCheck),D.CUSTOM_ELEMENT_HANDLING&&it(D.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(K.attributeNameCheck=D.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),D.CUSTOM_ELEMENT_HANDLING&&typeof D.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(K.allowCustomizedBuiltInElements=D.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),bt&&(De=!1),Fn&&(Dt=!0),Ht&&(Q=Ue({},Rx),Y=[],Ht.html===!0&&(Ue(Q,Lx),Ue(Y,Ix)),Ht.svg===!0&&(Ue(Q,Zf),Ue(Y,ep),Ue(Y,qc)),Ht.svgFilters===!0&&(Ue(Q,Jf),Ue(Y,ep),Ue(Y,qc)),Ht.mathMl===!0&&(Ue(Q,Qf),Ue(Y,Dx),Ue(Y,qc))),D.ADD_TAGS&&(typeof D.ADD_TAGS=="function"?ke.tagCheck=D.ADD_TAGS:(Q===H&&(Q=ci(Q)),Ue(Q,D.ADD_TAGS,X))),D.ADD_ATTR&&(typeof D.ADD_ATTR=="function"?ke.attributeCheck=D.ADD_ATTR:(Y===oe&&(Y=ci(Y)),Ue(Y,D.ADD_ATTR,X))),D.ADD_URI_SAFE_ATTR&&Ue(go,D.ADD_URI_SAFE_ATTR,X),D.FORBID_CONTENTS&&(sn===Lr&&(sn=ci(sn)),Ue(sn,D.FORBID_CONTENTS,X)),Kt&&(Q["#text"]=!0),rn&&Ue(Q,["html","head","body"]),Q.table&&(Ue(Q,["tbody"]),delete ne.tbody),D.TRUSTED_TYPES_POLICY){if(typeof D.TRUSTED_TYPES_POLICY.createHTML!="function")throw La('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof D.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw La('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');v=D.TRUSTED_TYPES_POLICY,k=v.createHTML("")}else v===void 0&&(v=zF(f,i)),v!==null&&typeof k=="string"&&(k=v.createHTML(""));Mn&&Mn(D),Me=D}},de=Ue({},[...Zf,...Jf,...AF]),Le=Ue({},[...Qf,...NF]),Nt=function(D){let J=C(D);(!J||!J.tagName)&&(J={namespaceURI:Ee,tagName:"template"});const fe=yu(D.tagName),dt=yu(J.tagName);return $e[D.namespaceURI]?D.namespaceURI===W?J.namespaceURI===ae?fe==="svg":J.namespaceURI===Ti?fe==="svg"&&(dt==="annotation-xml"||Mt[dt]):!!de[fe]:D.namespaceURI===Ti?J.namespaceURI===ae?fe==="math":J.namespaceURI===W?fe==="math"&&Wn[dt]:!!Le[fe]:D.namespaceURI===ae?J.namespaceURI===W&&!Wn[dt]||J.namespaceURI===Ti&&!Mt[dt]?!1:!Le[fe]&&(mo[fe]||!de[fe]):!!(At==="application/xhtml+xml"&&$e[D.namespaceURI]):!1},Ze=function(D){Na(e.removed,{element:D});try{C(D).removeChild(D)}catch{m(D)}},Un=function(D,J){try{Na(e.removed,{attribute:J.getAttributeNode(D),from:J})}catch{Na(e.removed,{attribute:null,from:J})}if(J.removeAttribute(D),D==="is")if(Dt||Fn)try{Ze(J)}catch{}else try{J.setAttribute(D,"")}catch{}},ys=function(D){let J=null,fe=null;if(on)D="<remove></remove>"+D;else{const xt=Xf(D,/^[\r\n\t ]+/);fe=xt&&xt[0]}At==="application/xhtml+xml"&&Ee===ae&&(D='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+D+"</body></html>");const dt=v?v.createHTML(D):D;if(Ee===ae)try{J=new h().parseFromString(dt,At)}catch{}if(!J||!J.documentElement){J=w.createDocument(Ee,"template",null);try{J.documentElement.innerHTML=qe?k:dt}catch{}}const Wt=J.body||J.documentElement;return D&&fe&&Wt.insertBefore(n.createTextNode(fe),Wt.childNodes[0]||null),Ee===ae?R.call(J,rn?"html":"body")[0]:rn?J.documentElement:Wt},bs=function(D){return S.call(D.ownerDocument||D,D,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},_a=function(D){return D instanceof d&&(typeof D.nodeName!="string"||typeof D.textContent!="string"||typeof D.removeChild!="function"||!(D.attributes instanceof u)||typeof D.removeAttribute!="function"||typeof D.setAttribute!="function"||typeof D.namespaceURI!="string"||typeof D.insertBefore!="function"||typeof D.hasChildNodes!="function")},xs=function(D){return typeof a=="function"&&D instanceof a};function gr(ve,D,J){jc(ve,fe=>{fe.call(e,D,J,Me)})}const wc=function(D){let J=null;if(gr(T.beforeSanitizeElements,D,null),_a(D))return Ze(D),!0;const fe=X(D.nodeName);if(gr(T.uponSanitizeElement,D,{tagName:fe,allowedTags:Q}),Vt&&D.hasChildNodes()&&!xs(D.firstElementChild)&&vn(/<[/\w!]/g,D.innerHTML)&&vn(/<[/\w!]/g,D.textContent)||D.nodeType===Ia.progressingInstruction||Vt&&D.nodeType===Ia.comment&&vn(/<[/\w]/g,D.data))return Ze(D),!0;if(!(ke.tagCheck instanceof Function&&ke.tagCheck(fe))&&(!Q[fe]||ne[fe])){if(!ne[fe]&&Ea(fe)&&(K.tagNameCheck instanceof RegExp&&vn(K.tagNameCheck,fe)||K.tagNameCheck instanceof Function&&K.tagNameCheck(fe)))return!1;if(Kt&&!sn[fe]){const dt=C(D)||D.parentNode,Wt=b(D)||D.childNodes;if(Wt&&dt){const xt=Wt.length;for(let an=xt-1;an>=0;--an){const Nn=g(Wt[an],!0);Nn.__removalCount=(D.__removalCount||0)+1,dt.insertBefore(Nn,y(D))}}}return Ze(D),!0}return D instanceof l&&!Nt(D)||(fe==="noscript"||fe==="noembed"||fe==="noframes")&&vn(/<\/no(script|embed|frames)/i,D.innerHTML)?(Ze(D),!0):(bt&&D.nodeType===Ia.text&&(J=D.textContent,jc([P,B,A],dt=>{J=Oa(J,dt," ")}),D.textContent!==J&&(Na(e.removed,{element:D.cloneNode()}),D.textContent=J)),gr(T.afterSanitizeElements,D,null),!1)},Cc=function(D,J,fe){if(zn&&(J==="id"||J==="name")&&(fe in n||fe in ut))return!1;if(!(De&&!ue[J]&&vn(M,J))){if(!(Oe&&vn(L,J))){if(!(ke.attributeCheck instanceof Function&&ke.attributeCheck(J,D))){if(!Y[J]||ue[J]){if(!(Ea(D)&&(K.tagNameCheck instanceof RegExp&&vn(K.tagNameCheck,D)||K.tagNameCheck instanceof Function&&K.tagNameCheck(D))&&(K.attributeNameCheck instanceof RegExp&&vn(K.attributeNameCheck,J)||K.attributeNameCheck instanceof Function&&K.attributeNameCheck(J,D))||J==="is"&&K.allowCustomizedBuiltInElements&&(K.tagNameCheck instanceof RegExp&&vn(K.tagNameCheck,fe)||K.tagNameCheck instanceof Function&&K.tagNameCheck(fe))))return!1}else if(!go[J]){if(!vn(Z,Oa(fe,I,""))){if(!((J==="src"||J==="xlink:href"||J==="href")&&D!=="script"&&_F(fe,"data:")===0&&ps[D])){if(!(Xe&&!vn(F,Oa(fe,I,"")))){if(fe)return!1}}}}}}}return!0},Ea=function(D){return D!=="annotation-xml"&&Xf(D,q)},yo=function(D){gr(T.beforeSanitizeAttributes,D,null);const{attributes:J}=D;if(!J||_a(D))return;const fe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Y,forceKeepAttr:void 0};let dt=J.length;for(;dt--;){const Wt=J[dt],{name:xt,namespaceURI:an,value:Nn}=Wt,Mi=X(xt),te=Nn;let le=xt==="value"?te:EF(te);if(fe.attrName=Mi,fe.attrValue=le,fe.keepAttr=!0,fe.forceKeepAttr=void 0,gr(T.uponSanitizeAttribute,D,fe),le=fe.attrValue,Or&&(Mi==="id"||Mi==="name")&&(Un(xt,D),le=Jn+le),Vt&&vn(/((--!?|])>)|<\/(style|title|textarea)/i,le)){Un(xt,D);continue}if(Mi==="attributename"&&Xf(le,"href")){Un(xt,D);continue}if(fe.forceKeepAttr)continue;if(!fe.keepAttr){Un(xt,D);continue}if(!Et&&vn(/\/>/i,le)){Un(xt,D);continue}bt&&jc([P,B,A],ot=>{le=Oa(le,ot," ")});const We=X(D.nodeName);if(!Cc(We,Mi,le)){Un(xt,D);continue}if(v&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!an)switch(f.getAttributeType(We,Mi)){case"TrustedHTML":{le=v.createHTML(le);break}case"TrustedScriptURL":{le=v.createScriptURL(le);break}}if(le!==te)try{an?D.setAttributeNS(an,xt,le):D.setAttribute(xt,le),_a(D)?Ze(D):Ox(e.removed)}catch{Un(xt,D)}}gr(T.afterSanitizeAttributes,D,null)},lf=function ve(D){let J=null;const fe=bs(D);for(gr(T.beforeSanitizeShadowDOM,D,null);J=fe.nextNode();)gr(T.uponSanitizeShadowNode,J,null),wc(J),yo(J),J.content instanceof o&&ve(J.content);gr(T.afterSanitizeShadowDOM,D,null)};return e.sanitize=function(ve){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},J=null,fe=null,dt=null,Wt=null;if(qe=!ve,qe&&(ve="<!-->"),typeof ve!="string"&&!xs(ve))if(typeof ve.toString=="function"){if(ve=ve.toString(),typeof ve!="string")throw La("dirty is not a string, aborting")}else throw La("toString is not a function");if(!e.isSupported)return ve;if(He||he(D),e.removed=[],typeof ve=="string"&&(Hn=!1),Hn){if(ve.nodeName){const Nn=X(ve.nodeName);if(!Q[Nn]||ne[Nn])throw La("root node is forbidden and cannot be sanitized in-place")}}else if(ve instanceof a)J=ys("<!---->"),fe=J.ownerDocument.importNode(ve,!0),fe.nodeType===Ia.element&&fe.nodeName==="BODY"||fe.nodeName==="HTML"?J=fe:J.appendChild(fe);else{if(!Dt&&!bt&&!rn&&ve.indexOf("<")===-1)return v&&Gt?v.createHTML(ve):ve;if(J=ys(ve),!J)return Dt?null:Gt?k:""}J&&on&&Ze(J.firstChild);const xt=bs(Hn?ve:J);for(;dt=xt.nextNode();)wc(dt),yo(dt),dt.content instanceof o&&lf(dt.content);if(Hn)return ve;if(Dt){if(Fn)for(Wt=E.call(J.ownerDocument);J.firstChild;)Wt.appendChild(J.firstChild);else Wt=J;return(Y.shadowroot||Y.shadowrootmode)&&(Wt=$.call(r,Wt,!0)),Wt}let an=rn?J.outerHTML:J.innerHTML;return rn&&Q["!doctype"]&&J.ownerDocument&&J.ownerDocument.doctype&&J.ownerDocument.doctype.name&&vn(OS,J.ownerDocument.doctype.name)&&(an="<!DOCTYPE "+J.ownerDocument.doctype.name+`>
`+an),bt&&jc([P,B,A],Nn=>{an=Oa(an,Nn," ")}),v&&Gt?v.createHTML(an):an},e.setConfig=function(){let ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};he(ve),He=!0},e.clearConfig=function(){Me=null,He=!1},e.isValidAttribute=function(ve,D,J){Me||he({});const fe=X(ve),dt=X(D);return Cc(fe,dt,J)},e.addHook=function(ve,D){typeof D=="function"&&Na(T[ve],D)},e.removeHook=function(ve,D){if(D!==void 0){const J=kF(T[ve],D);return J===-1?void 0:SF(T[ve],J,1)[0]}return Ox(T[ve])},e.removeHooks=function(ve){T[ve]=[]},e.removeAllHooks=function(){T=Px()},e}var ra=LS(),RS=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,gl=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,HF=/\s*%%.*\n/gm,js,IS=(js=class extends Error{constructor(e){super(e),this.name="UnknownDiagramError"}},x(js,"UnknownDiagramError"),js),Yo={},py=x(function(t,e){t=t.replace(RS,"").replace(gl,"").replace(HF,`
`);for(const[n,{detector:r}]of Object.entries(Yo))if(r(t,e))return n;throw new IS(`No diagram type detected matching given configuration for text: ${t}`)},"detectType"),ag=x((...t)=>{for(const{id:e,detector:n,loader:r}of t)DS(e,n,r)},"registerLazyLoadedDiagrams"),DS=x((t,e,n)=>{Yo[t]&&G.warn(`Detector with key ${t} already exists. Overwriting.`),Yo[t]={detector:e,loader:n},G.debug(`Detector with key ${t} added${n?" with loader":""}`)},"addDetector"),WF=x(t=>Yo[t].loader,"getDiagramLoader"),lg=x((t,e,{depth:n=2,clobber:r=!1}={})=>{const i={depth:n,clobber:r};return Array.isArray(e)&&!Array.isArray(t)?(e.forEach(o=>lg(t,o,i)),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach(o=>{t.includes(o)||t.push(o)}),t):t===void 0||n<=0?t!=null&&typeof t=="object"&&typeof e=="object"?Object.assign(t,e):e:(e!==void 0&&typeof t=="object"&&typeof e=="object"&&Object.keys(e).forEach(o=>{typeof e[o]=="object"&&(t[o]===void 0||typeof t[o]=="object")?(t[o]===void 0&&(t[o]=Array.isArray(e[o])?[]:{}),t[o]=lg(t[o],e[o],{depth:n-1,clobber:r})):(r||typeof t[o]!="object"&&typeof e[o]!="object")&&(t[o]=e[o])}),t)},"assignWithDepth"),$t=lg,Ah="#ffffff",Nh="#f2f2f2",Cn=x((t,e)=>e?z(t,{s:-40,l:10}):z(t,{s:-40,l:-10}),"mkBorder"),qs,UF=(qs=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var n,r,i,o,s,a,l,c,u,d,h,f,p,g,m,y,b,C,v,k,w;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||z(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||z(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Cn(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Cn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Cn(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Cn(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||ie(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||ie(this.tertiaryColor),this.lineColor=this.lineColor||ie(this.background),this.arrowheadColor=this.arrowheadColor||ie(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?Te(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||Te(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||ie(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||pe(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||Te(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Te(this.mainBkg,10)):(this.rowOdd=this.rowOdd||pe(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||pe(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||z(this.primaryColor,{h:30}),this.cScale4=this.cScale4||z(this.primaryColor,{h:60}),this.cScale5=this.cScale5||z(this.primaryColor,{h:90}),this.cScale6=this.cScale6||z(this.primaryColor,{h:120}),this.cScale7=this.cScale7||z(this.primaryColor,{h:150}),this.cScale8=this.cScale8||z(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||z(this.primaryColor,{h:270}),this.cScale10=this.cScale10||z(this.primaryColor,{h:300}),this.cScale11=this.cScale11||z(this.primaryColor,{h:330}),this.darkMode)for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScale"+S]=Te(this["cScale"+S],75);else for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScale"+S]=Te(this["cScale"+S],25);for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScaleInv"+S]=this["cScaleInv"+S]||ie(this["cScale"+S]);for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this.darkMode?this["cScalePeer"+S]=this["cScalePeer"+S]||pe(this["cScale"+S],10):this["cScalePeer"+S]=this["cScalePeer"+S]||Te(this["cScale"+S],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScaleLabel"+S]=this["cScaleLabel"+S]||this.scaleLabelColor;const e=this.darkMode?-4:-1;for(let S=0;S<5;S++)this["surface"+S]=this["surface"+S]||z(this.mainBkg,{h:180,s:-15,l:e*(5+S*3)}),this["surfacePeer"+S]=this["surfacePeer"+S]||z(this.mainBkg,{h:180,s:-15,l:e*(8+S*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||z(this.primaryColor,{h:64}),this.fillType3=this.fillType3||z(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||z(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||z(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||z(this.primaryColor,{h:128}),this.fillType7=this.fillType7||z(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||z(this.primaryColor,{l:-10}),this.pie5=this.pie5||z(this.secondaryColor,{l:-10}),this.pie6=this.pie6||z(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||z(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||z(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||z(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||z(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||z(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||z(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:((n=this.radar)==null?void 0:n.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((i=this.radar)==null?void 0:i.axisLabelFontSize)||12,curveOpacity:((o=this.radar)==null?void 0:o.curveOpacity)||.5,curveStrokeWidth:((s=this.radar)==null?void 0:s.curveStrokeWidth)||2,graticuleColor:((a=this.radar)==null?void 0:a.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((l=this.radar)==null?void 0:l.graticuleStrokeWidth)||1,graticuleOpacity:((c=this.radar)==null?void 0:c.graticuleOpacity)||.3,legendBoxSize:((u=this.radar)==null?void 0:u.legendBoxSize)||12,legendFontSize:((d=this.radar)==null?void 0:d.legendFontSize)||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||oc(this.quadrant1Fill)?pe(this.quadrant1Fill):Te(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((h=this.xyChart)==null?void 0:h.backgroundColor)||this.background,titleColor:((f=this.xyChart)==null?void 0:f.titleColor)||this.primaryTextColor,xAxisTitleColor:((p=this.xyChart)==null?void 0:p.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((g=this.xyChart)==null?void 0:g.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((m=this.xyChart)==null?void 0:m.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((y=this.xyChart)==null?void 0:y.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((b=this.xyChart)==null?void 0:b.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((C=this.xyChart)==null?void 0:C.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((v=this.xyChart)==null?void 0:v.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((k=this.xyChart)==null?void 0:k.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((w=this.xyChart)==null?void 0:w.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Te(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||z(this.primaryColor,{h:-30}),this.git4=this.git4||z(this.primaryColor,{h:-60}),this.git5=this.git5||z(this.primaryColor,{h:-90}),this.git6=this.git6||z(this.primaryColor,{h:60}),this.git7=this.git7||z(this.primaryColor,{h:120}),this.darkMode?(this.git0=pe(this.git0,25),this.git1=pe(this.git1,25),this.git2=pe(this.git2,25),this.git3=pe(this.git3,25),this.git4=pe(this.git4,25),this.git5=pe(this.git5,25),this.git6=pe(this.git6,25),this.git7=pe(this.git7,25)):(this.git0=Te(this.git0,25),this.git1=Te(this.git1,25),this.git2=Te(this.git2,25),this.git3=Te(this.git3,25),this.git4=Te(this.git4,25),this.git5=Te(this.git5,25),this.git6=Te(this.git6,25),this.git7=Te(this.git7,25)),this.gitInv0=this.gitInv0||ie(this.git0),this.gitInv1=this.gitInv1||ie(this.git1),this.gitInv2=this.gitInv2||ie(this.git2),this.gitInv3=this.gitInv3||ie(this.git3),this.gitInv4=this.gitInv4||ie(this.git4),this.gitInv5=this.gitInv5||ie(this.git5),this.gitInv6=this.gitInv6||ie(this.git6),this.gitInv7=this.gitInv7||ie(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ah,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Nh}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}},x(qs,"Theme"),qs),jF=x(t=>{const e=new UF;return e.calculate(t),e},"getThemeVariables"),Vs,qF=(Vs=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=pe(this.primaryColor,16),this.tertiaryColor=z(this.primaryColor,{h:-160}),this.primaryBorderColor=ie(this.background),this.secondaryBorderColor=Cn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Cn(this.tertiaryColor,this.darkMode),this.primaryTextColor=ie(this.primaryColor),this.secondaryTextColor=ie(this.secondaryColor),this.tertiaryTextColor=ie(this.tertiaryColor),this.lineColor=ie(this.background),this.textColor=ie(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=pe(ie("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=pl(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=Te("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=Te(this.sectionBkgColor,10),this.taskBorderColor=pl(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=pl(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||pe(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Te(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,m,y,b,C,v,k;this.secondBkg=pe(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=pe(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=pe(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=z(this.primaryColor,{h:64}),this.fillType3=z(this.secondaryColor,{h:64}),this.fillType4=z(this.primaryColor,{h:-64}),this.fillType5=z(this.secondaryColor,{h:-64}),this.fillType6=z(this.primaryColor,{h:128}),this.fillType7=z(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||z(this.primaryColor,{h:30}),this.cScale4=this.cScale4||z(this.primaryColor,{h:60}),this.cScale5=this.cScale5||z(this.primaryColor,{h:90}),this.cScale6=this.cScale6||z(this.primaryColor,{h:120}),this.cScale7=this.cScale7||z(this.primaryColor,{h:150}),this.cScale8=this.cScale8||z(this.primaryColor,{h:210}),this.cScale9=this.cScale9||z(this.primaryColor,{h:270}),this.cScale10=this.cScale10||z(this.primaryColor,{h:300}),this.cScale11=this.cScale11||z(this.primaryColor,{h:330});for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleInv"+w]=this["cScaleInv"+w]||ie(this["cScale"+w]);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScalePeer"+w]=this["cScalePeer"+w]||pe(this["cScale"+w],10);for(let w=0;w<5;w++)this["surface"+w]=this["surface"+w]||z(this.mainBkg,{h:30,s:-30,l:-(-10+w*4)}),this["surfacePeer"+w]=this["surfacePeer"+w]||z(this.mainBkg,{h:30,s:-30,l:-(-7+w*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleLabel"+w]=this["cScaleLabel"+w]||this.scaleLabelColor;for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["pie"+w]=this["cScale"+w];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||oc(this.quadrant1Fill)?pe(this.quadrant1Fill):Te(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((n=this.xyChart)==null?void 0:n.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((o=this.xyChart)==null?void 0:o.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((s=this.xyChart)==null?void 0:s.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((a=this.xyChart)==null?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((d=this.xyChart)==null?void 0:d.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:((h=this.radar)==null?void 0:h.axisColor)||this.lineColor,axisStrokeWidth:((f=this.radar)==null?void 0:f.axisStrokeWidth)||2,axisLabelFontSize:((p=this.radar)==null?void 0:p.axisLabelFontSize)||12,curveOpacity:((g=this.radar)==null?void 0:g.curveOpacity)||.5,curveStrokeWidth:((m=this.radar)==null?void 0:m.curveStrokeWidth)||2,graticuleColor:((y=this.radar)==null?void 0:y.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((b=this.radar)==null?void 0:b.graticuleStrokeWidth)||1,graticuleOpacity:((C=this.radar)==null?void 0:C.graticuleOpacity)||.3,legendBoxSize:((v=this.radar)==null?void 0:v.legendBoxSize)||12,legendFontSize:((k=this.radar)==null?void 0:k.legendFontSize)||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Te(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=pe(this.secondaryColor,20),this.git1=pe(this.pie2||this.secondaryColor,20),this.git2=pe(this.pie3||this.tertiaryColor,20),this.git3=pe(this.pie4||z(this.primaryColor,{h:-30}),20),this.git4=pe(this.pie5||z(this.primaryColor,{h:-60}),20),this.git5=pe(this.pie6||z(this.primaryColor,{h:-90}),10),this.git6=pe(this.pie7||z(this.primaryColor,{h:60}),10),this.git7=pe(this.pie8||z(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||ie(this.git0),this.gitInv1=this.gitInv1||ie(this.git1),this.gitInv2=this.gitInv2||ie(this.git2),this.gitInv3=this.gitInv3||ie(this.git3),this.gitInv4=this.gitInv4||ie(this.git4),this.gitInv5=this.gitInv5||ie(this.git5),this.gitInv6=this.gitInv6||ie(this.git6),this.gitInv7=this.gitInv7||ie(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ie(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ie(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||pe(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||pe(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}},x(Vs,"Theme"),Vs),VF=x(t=>{const e=new qF;return e.calculate(t),e},"getThemeVariables"),Gs,GF=(Gs=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=z(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=z(this.primaryColor,{h:-160}),this.primaryBorderColor=Cn(this.primaryColor,this.darkMode),this.secondaryBorderColor=Cn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Cn(this.tertiaryColor,this.darkMode),this.primaryTextColor=ie(this.primaryColor),this.secondaryTextColor=ie(this.secondaryColor),this.tertiaryTextColor=ie(this.tertiaryColor),this.lineColor=ie(this.background),this.textColor=ie(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=pl(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,m,y,b,C,v,k;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||z(this.primaryColor,{h:30}),this.cScale4=this.cScale4||z(this.primaryColor,{h:60}),this.cScale5=this.cScale5||z(this.primaryColor,{h:90}),this.cScale6=this.cScale6||z(this.primaryColor,{h:120}),this.cScale7=this.cScale7||z(this.primaryColor,{h:150}),this.cScale8=this.cScale8||z(this.primaryColor,{h:210}),this.cScale9=this.cScale9||z(this.primaryColor,{h:270}),this.cScale10=this.cScale10||z(this.primaryColor,{h:300}),this.cScale11=this.cScale11||z(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Te(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Te(this.tertiaryColor,40);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScale"+w]=Te(this["cScale"+w],10),this["cScalePeer"+w]=this["cScalePeer"+w]||Te(this["cScale"+w],25);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleInv"+w]=this["cScaleInv"+w]||z(this["cScale"+w],{h:180});for(let w=0;w<5;w++)this["surface"+w]=this["surface"+w]||z(this.mainBkg,{h:30,l:-(5+w*5)}),this["surfacePeer"+w]=this["surfacePeer"+w]||z(this.mainBkg,{h:30,l:-(7+w*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||ie(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||ie(this.labelTextColor);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleLabel"+w]=this["cScaleLabel"+w]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=pe(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||pe(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||pe(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=z(this.primaryColor,{h:64}),this.fillType3=z(this.secondaryColor,{h:64}),this.fillType4=z(this.primaryColor,{h:-64}),this.fillType5=z(this.secondaryColor,{h:-64}),this.fillType6=z(this.primaryColor,{h:128}),this.fillType7=z(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||z(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||z(this.primaryColor,{l:-10}),this.pie5=this.pie5||z(this.secondaryColor,{l:-30}),this.pie6=this.pie6||z(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||z(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||z(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||z(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||z(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||z(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||z(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||oc(this.quadrant1Fill)?pe(this.quadrant1Fill):Te(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:((e=this.radar)==null?void 0:e.axisColor)||this.lineColor,axisStrokeWidth:((n=this.radar)==null?void 0:n.axisStrokeWidth)||2,axisLabelFontSize:((r=this.radar)==null?void 0:r.axisLabelFontSize)||12,curveOpacity:((i=this.radar)==null?void 0:i.curveOpacity)||.5,curveStrokeWidth:((o=this.radar)==null?void 0:o.curveStrokeWidth)||2,graticuleColor:((s=this.radar)==null?void 0:s.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((a=this.radar)==null?void 0:a.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((c=this.radar)==null?void 0:c.legendBoxSize)||12,legendFontSize:((u=this.radar)==null?void 0:u.legendFontSize)||12},this.xyChart={backgroundColor:((d=this.xyChart)==null?void 0:d.backgroundColor)||this.background,titleColor:((h=this.xyChart)==null?void 0:h.titleColor)||this.primaryTextColor,xAxisTitleColor:((f=this.xyChart)==null?void 0:f.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((p=this.xyChart)==null?void 0:p.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((g=this.xyChart)==null?void 0:g.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((m=this.xyChart)==null?void 0:m.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((y=this.xyChart)==null?void 0:y.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((b=this.xyChart)==null?void 0:b.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((C=this.xyChart)==null?void 0:C.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((v=this.xyChart)==null?void 0:v.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((k=this.xyChart)==null?void 0:k.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||z(this.primaryColor,{h:-30}),this.git4=this.git4||z(this.primaryColor,{h:-60}),this.git5=this.git5||z(this.primaryColor,{h:-90}),this.git6=this.git6||z(this.primaryColor,{h:60}),this.git7=this.git7||z(this.primaryColor,{h:120}),this.darkMode?(this.git0=pe(this.git0,25),this.git1=pe(this.git1,25),this.git2=pe(this.git2,25),this.git3=pe(this.git3,25),this.git4=pe(this.git4,25),this.git5=pe(this.git5,25),this.git6=pe(this.git6,25),this.git7=pe(this.git7,25)):(this.git0=Te(this.git0,25),this.git1=Te(this.git1,25),this.git2=Te(this.git2,25),this.git3=Te(this.git3,25),this.git4=Te(this.git4,25),this.git5=Te(this.git5,25),this.git6=Te(this.git6,25),this.git7=Te(this.git7,25)),this.gitInv0=this.gitInv0||Te(ie(this.git0),25),this.gitInv1=this.gitInv1||ie(this.git1),this.gitInv2=this.gitInv2||ie(this.git2),this.gitInv3=this.gitInv3||ie(this.git3),this.gitInv4=this.gitInv4||ie(this.git4),this.gitInv5=this.gitInv5||ie(this.git5),this.gitInv6=this.gitInv6||ie(this.git6),this.gitInv7=this.gitInv7||ie(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ie(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ie(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ah,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Nh}calculate(e){if(Object.keys(this).forEach(r=>{this[r]==="calculated"&&(this[r]=void 0)}),typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}},x(Gs,"Theme"),Gs),KF=x(t=>{const e=new GF;return e.calculate(t),e},"getThemeVariables"),Ks,YF=(Ks=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=pe("#cde498",10),this.primaryBorderColor=Cn(this.primaryColor,this.darkMode),this.secondaryBorderColor=Cn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Cn(this.tertiaryColor,this.darkMode),this.primaryTextColor=ie(this.primaryColor),this.secondaryTextColor=ie(this.secondaryColor),this.tertiaryTextColor=ie(this.primaryColor),this.lineColor=ie(this.background),this.textColor=ie(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,m,y,b,C,v,k;this.actorBorder=Te(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||z(this.primaryColor,{h:30}),this.cScale4=this.cScale4||z(this.primaryColor,{h:60}),this.cScale5=this.cScale5||z(this.primaryColor,{h:90}),this.cScale6=this.cScale6||z(this.primaryColor,{h:120}),this.cScale7=this.cScale7||z(this.primaryColor,{h:150}),this.cScale8=this.cScale8||z(this.primaryColor,{h:210}),this.cScale9=this.cScale9||z(this.primaryColor,{h:270}),this.cScale10=this.cScale10||z(this.primaryColor,{h:300}),this.cScale11=this.cScale11||z(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Te(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Te(this.tertiaryColor,40);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScale"+w]=Te(this["cScale"+w],10),this["cScalePeer"+w]=this["cScalePeer"+w]||Te(this["cScale"+w],25);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleInv"+w]=this["cScaleInv"+w]||z(this["cScale"+w],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleLabel"+w]=this["cScaleLabel"+w]||this.scaleLabelColor;for(let w=0;w<5;w++)this["surface"+w]=this["surface"+w]||z(this.mainBkg,{h:30,s:-30,l:-(5+w*5)}),this["surfacePeer"+w]=this["surfacePeer"+w]||z(this.mainBkg,{h:30,s:-30,l:-(8+w*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||pe(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||pe(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=z(this.primaryColor,{h:64}),this.fillType3=z(this.secondaryColor,{h:64}),this.fillType4=z(this.primaryColor,{h:-64}),this.fillType5=z(this.secondaryColor,{h:-64}),this.fillType6=z(this.primaryColor,{h:128}),this.fillType7=z(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||z(this.primaryColor,{l:-30}),this.pie5=this.pie5||z(this.secondaryColor,{l:-30}),this.pie6=this.pie6||z(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||z(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||z(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||z(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||z(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||z(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||z(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||oc(this.quadrant1Fill)?pe(this.quadrant1Fill):Te(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:((e=this.radar)==null?void 0:e.axisColor)||this.lineColor,axisStrokeWidth:((n=this.radar)==null?void 0:n.axisStrokeWidth)||2,axisLabelFontSize:((r=this.radar)==null?void 0:r.axisLabelFontSize)||12,curveOpacity:((i=this.radar)==null?void 0:i.curveOpacity)||.5,curveStrokeWidth:((o=this.radar)==null?void 0:o.curveStrokeWidth)||2,graticuleColor:((s=this.radar)==null?void 0:s.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((a=this.radar)==null?void 0:a.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((c=this.radar)==null?void 0:c.legendBoxSize)||12,legendFontSize:((u=this.radar)==null?void 0:u.legendFontSize)||12},this.xyChart={backgroundColor:((d=this.xyChart)==null?void 0:d.backgroundColor)||this.background,titleColor:((h=this.xyChart)==null?void 0:h.titleColor)||this.primaryTextColor,xAxisTitleColor:((f=this.xyChart)==null?void 0:f.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((p=this.xyChart)==null?void 0:p.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((g=this.xyChart)==null?void 0:g.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((m=this.xyChart)==null?void 0:m.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((y=this.xyChart)==null?void 0:y.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((b=this.xyChart)==null?void 0:b.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((C=this.xyChart)==null?void 0:C.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((v=this.xyChart)==null?void 0:v.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((k=this.xyChart)==null?void 0:k.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||z(this.primaryColor,{h:-30}),this.git4=this.git4||z(this.primaryColor,{h:-60}),this.git5=this.git5||z(this.primaryColor,{h:-90}),this.git6=this.git6||z(this.primaryColor,{h:60}),this.git7=this.git7||z(this.primaryColor,{h:120}),this.darkMode?(this.git0=pe(this.git0,25),this.git1=pe(this.git1,25),this.git2=pe(this.git2,25),this.git3=pe(this.git3,25),this.git4=pe(this.git4,25),this.git5=pe(this.git5,25),this.git6=pe(this.git6,25),this.git7=pe(this.git7,25)):(this.git0=Te(this.git0,25),this.git1=Te(this.git1,25),this.git2=Te(this.git2,25),this.git3=Te(this.git3,25),this.git4=Te(this.git4,25),this.git5=Te(this.git5,25),this.git6=Te(this.git6,25),this.git7=Te(this.git7,25)),this.gitInv0=this.gitInv0||ie(this.git0),this.gitInv1=this.gitInv1||ie(this.git1),this.gitInv2=this.gitInv2||ie(this.git2),this.gitInv3=this.gitInv3||ie(this.git3),this.gitInv4=this.gitInv4||ie(this.git4),this.gitInv5=this.gitInv5||ie(this.git5),this.gitInv6=this.gitInv6||ie(this.git6),this.gitInv7=this.gitInv7||ie(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ie(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ie(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ah,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Nh}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}},x(Ks,"Theme"),Ks),XF=x(t=>{const e=new YF;return e.calculate(t),e},"getThemeVariables"),Ys,ZF=(Ys=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=pe(this.contrast,55),this.background="#ffffff",this.tertiaryColor=z(this.primaryColor,{h:-160}),this.primaryBorderColor=Cn(this.primaryColor,this.darkMode),this.secondaryBorderColor=Cn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Cn(this.tertiaryColor,this.darkMode),this.primaryTextColor=ie(this.primaryColor),this.secondaryTextColor=ie(this.secondaryColor),this.tertiaryTextColor=ie(this.tertiaryColor),this.lineColor=ie(this.background),this.textColor=ie(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||pe(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,m,y,b,C,v,k;this.secondBkg=pe(this.contrast,55),this.border2=this.contrast,this.actorBorder=pe(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleInv"+w]=this["cScaleInv"+w]||ie(this["cScale"+w]);for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this.darkMode?this["cScalePeer"+w]=this["cScalePeer"+w]||pe(this["cScale"+w],10):this["cScalePeer"+w]=this["cScalePeer"+w]||Te(this["cScale"+w],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["cScaleLabel"+w]=this["cScaleLabel"+w]||this.scaleLabelColor;for(let w=0;w<5;w++)this["surface"+w]=this["surface"+w]||z(this.mainBkg,{l:-(5+w*5)}),this["surfacePeer"+w]=this["surfacePeer"+w]||z(this.mainBkg,{l:-(8+w*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=pe(this.contrast,30),this.sectionBkgColor2=pe(this.contrast,30),this.taskBorderColor=Te(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=pe(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=Te(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=z(this.primaryColor,{h:64}),this.fillType3=z(this.secondaryColor,{h:64}),this.fillType4=z(this.primaryColor,{h:-64}),this.fillType5=z(this.secondaryColor,{h:-64}),this.fillType6=z(this.primaryColor,{h:128}),this.fillType7=z(this.secondaryColor,{h:128});for(let w=0;w<this.THEME_COLOR_LIMIT;w++)this["pie"+w]=this["cScale"+w];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||oc(this.quadrant1Fill)?pe(this.quadrant1Fill):Te(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((n=this.xyChart)==null?void 0:n.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((o=this.xyChart)==null?void 0:o.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((s=this.xyChart)==null?void 0:s.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((a=this.xyChart)==null?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((d=this.xyChart)==null?void 0:d.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:((h=this.radar)==null?void 0:h.axisColor)||this.lineColor,axisStrokeWidth:((f=this.radar)==null?void 0:f.axisStrokeWidth)||2,axisLabelFontSize:((p=this.radar)==null?void 0:p.axisLabelFontSize)||12,curveOpacity:((g=this.radar)==null?void 0:g.curveOpacity)||.5,curveStrokeWidth:((m=this.radar)==null?void 0:m.curveStrokeWidth)||2,graticuleColor:((y=this.radar)==null?void 0:y.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((b=this.radar)==null?void 0:b.graticuleStrokeWidth)||1,graticuleOpacity:((C=this.radar)==null?void 0:C.graticuleOpacity)||.3,legendBoxSize:((v=this.radar)==null?void 0:v.legendBoxSize)||12,legendFontSize:((k=this.radar)==null?void 0:k.legendFontSize)||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Te(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||z(this.primaryColor,{h:-30}),this.git4=this.pie5||z(this.primaryColor,{h:-60}),this.git5=this.pie6||z(this.primaryColor,{h:-90}),this.git6=this.pie7||z(this.primaryColor,{h:60}),this.git7=this.pie8||z(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||ie(this.git0),this.gitInv1=this.gitInv1||ie(this.git1),this.gitInv2=this.gitInv2||ie(this.git2),this.gitInv3=this.gitInv3||ie(this.git3),this.gitInv4=this.gitInv4||ie(this.git4),this.gitInv5=this.gitInv5||ie(this.git5),this.gitInv6=this.gitInv6||ie(this.git6),this.gitInv7=this.gitInv7||ie(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ah,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Nh}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}},x(Ys,"Theme"),Ys),JF=x(t=>{const e=new ZF;return e.calculate(t),e},"getThemeVariables"),yi={base:{getThemeVariables:jF},dark:{getThemeVariables:VF},default:{getThemeVariables:KF},forest:{getThemeVariables:XF},neutral:{getThemeVariables:JF}},Dr={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},BS={...Dr,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:yi.default.getThemeVariables(),sequence:{...Dr.sequence,messageFont:x(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:x(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:x(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...Dr.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Dr.c4,useWidth:void 0,personFont:x(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...Dr.flowchart,inheritDir:!1},external_personFont:x(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:x(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:x(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:x(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:x(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:x(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:x(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:x(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:x(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:x(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:x(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:x(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:x(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:x(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:x(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:x(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:x(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:x(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:x(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:x(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:x(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...Dr.pie,useWidth:984},xyChart:{...Dr.xyChart,useWidth:void 0},requirement:{...Dr.requirement,useWidth:void 0},packet:{...Dr.packet},radar:{...Dr.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},PS=x((t,e="")=>Object.keys(t).reduce((n,r)=>Array.isArray(t[r])?n:typeof t[r]=="object"&&t[r]!==null?[...n,e+r,...PS(t[r],"")]:[...n,e+r],[]),"keyify"),QF=new Set(PS(BS,"")),$S=BS,Sd=x(t=>{if(G.debug("sanitizeDirective called with",t),!(typeof t!="object"||t==null)){if(Array.isArray(t)){t.forEach(e=>Sd(e));return}for(const e of Object.keys(t)){if(G.debug("Checking key",e),e.startsWith("__")||e.includes("proto")||e.includes("constr")||!QF.has(e)||t[e]==null){G.debug("sanitize deleting key: ",e),delete t[e];continue}if(typeof t[e]=="object"){G.debug("sanitizing object",e),Sd(t[e]);continue}const n=["themeCSS","fontFamily","altFontFamily"];for(const r of n)e.includes(r)&&(G.debug("sanitizing css option",e),t[e]=e4(t[e]))}if(t.themeVariables)for(const e of Object.keys(t.themeVariables)){const n=t.themeVariables[e];n!=null&&n.match&&!n.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[e]="")}G.debug("After sanitization",t)}},"sanitizeDirective"),e4=x(t=>{let e=0,n=0;for(const r of t){if(e<n)return"{ /* ERROR: Unbalanced CSS */ }";r==="{"?e++:r==="}"&&n++}return e!==n?"{ /* ERROR: Unbalanced CSS */ }":t},"sanitizeCss"),ia=Object.freeze($S),Rn=$t({},ia),_d,Xo=[],ml=$t({},ia),Oh=x((t,e)=>{let n=$t({},t),r={};for(const i of e)HS(i),r=$t(r,i);if(n=$t(n,r),r.theme&&r.theme in yi){const i=$t({},_d),o=$t(i.themeVariables||{},r.themeVariables);n.theme&&n.theme in yi&&(n.themeVariables=yi[n.theme].getThemeVariables(o))}return ml=n,WS(ml),ml},"updateCurrentConfig"),t4=x(t=>(Rn=$t({},ia),Rn=$t(Rn,t),t.theme&&yi[t.theme]&&(Rn.themeVariables=yi[t.theme].getThemeVariables(t.themeVariables)),Oh(Rn,Xo),Rn),"setSiteConfig"),n4=x(t=>{_d=$t({},t)},"saveConfigFromInitialize"),r4=x(t=>(Rn=$t(Rn,t),Oh(Rn,Xo),Rn),"updateSiteConfig"),FS=x(()=>$t({},Rn),"getSiteConfig"),zS=x(t=>(WS(t),$t(ml,t),pn()),"setConfig"),pn=x(()=>$t({},ml),"getConfig"),HS=x(t=>{t&&(["secure",...Rn.secure??[]].forEach(e=>{Object.hasOwn(t,e)&&(G.debug(`Denied attempt to modify a secure key ${e}`,t[e]),delete t[e])}),Object.keys(t).forEach(e=>{e.startsWith("__")&&delete t[e]}),Object.keys(t).forEach(e=>{typeof t[e]=="string"&&(t[e].includes("<")||t[e].includes(">")||t[e].includes("url(data:"))&&delete t[e],typeof t[e]=="object"&&HS(t[e])}))},"sanitize"),i4=x(t=>{var e;Sd(t),t.fontFamily&&!((e=t.themeVariables)!=null&&e.fontFamily)&&(t.themeVariables={...t.themeVariables,fontFamily:t.fontFamily}),Xo.push(t),Oh(Rn,Xo)},"addDirective"),Ed=x((t=Rn)=>{Xo=[],Oh(t,Xo)},"reset"),o4={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},$x={},s4=x(t=>{$x[t]||(G.warn(o4[t]),$x[t]=!0)},"issueWarning"),WS=x(t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&s4("LAZY_LOAD_DEPRECATED")},"checkConfig"),Wee=x(()=>{let t={};_d&&(t=$t(t,_d));for(const e of Xo)t=$t(t,e);return t},"getUserDefinedConfig"),sc=/<br\s*\/?>/gi,a4=x(t=>t?qS(t).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),l4=(()=>{let t=!1;return()=>{t||(US(),t=!0)}})();function US(){const t="data-temp-href-target";ra.addHook("beforeSanitizeAttributes",e=>{e.tagName==="A"&&e.hasAttribute("target")&&e.setAttribute(t,e.getAttribute("target")??"")}),ra.addHook("afterSanitizeAttributes",e=>{e.tagName==="A"&&e.hasAttribute(t)&&(e.setAttribute("target",e.getAttribute(t)??""),e.removeAttribute(t),e.getAttribute("target")==="_blank"&&e.setAttribute("rel","noopener"))})}x(US,"setupDompurifyHooks");var jS=x(t=>(l4(),ra.sanitize(t)),"removeScript"),Fx=x((t,e)=>{var n;if(((n=e.flowchart)==null?void 0:n.htmlLabels)!==!1){const r=e.securityLevel;r==="antiscript"||r==="strict"?t=jS(t):r!=="loose"&&(t=qS(t),t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/=/g,"&equals;"),t=h4(t))}return t},"sanitizeMore"),dr=x((t,e)=>t&&(e.dompurifyConfig?t=ra.sanitize(Fx(t,e),e.dompurifyConfig).toString():t=ra.sanitize(Fx(t,e),{FORBID_TAGS:["style"]}).toString(),t),"sanitizeText"),c4=x((t,e)=>typeof t=="string"?dr(t,e):t.flat().map(n=>dr(n,e)),"sanitizeTextOrArray"),u4=x(t=>sc.test(t),"hasBreaks"),d4=x(t=>t.split(sc),"splitBreaks"),h4=x(t=>t.replace(/#br#/g,"<br/>"),"placeholderToBreak"),qS=x(t=>t.replace(sc,"#br#"),"breakToPlaceholder"),f4=x(t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=CSS.escape(e)),e},"getUrl"),zt=x(t=>!(t===!1||["false","null","0"].includes(String(t).trim().toLowerCase())),"evaluate"),p4=x(function(...t){const e=t.filter(n=>!isNaN(n));return Math.max(...e)},"getMax"),g4=x(function(...t){const e=t.filter(n=>!isNaN(n));return Math.min(...e)},"getMin"),zx=x(function(t){const e=t.split(/(,)/),n=[];for(let r=0;r<e.length;r++){let i=e[r];if(i===","&&r>0&&r+1<e.length){const o=e[r-1],s=e[r+1];m4(o,s)&&(i=o+","+s,r++,n.pop())}n.push(y4(i))}return n.join("")},"parseGenericTypes"),cg=x((t,e)=>Math.max(0,t.split(e).length-1),"countOccurrence"),m4=x((t,e)=>{const n=cg(t,"~"),r=cg(e,"~");return n===1&&r===1},"shouldCombineSets"),y4=x(t=>{const e=cg(t,"~");let n=!1;if(e<=1)return t;e%2!==0&&t.startsWith("~")&&(t=t.substring(1),n=!0);const r=[...t];let i=r.indexOf("~"),o=r.lastIndexOf("~");for(;i!==-1&&o!==-1&&i!==o;)r[i]="<",r[o]=">",i=r.indexOf("~"),o=r.lastIndexOf("~");return n&&r.unshift("~"),r.join("")},"processSet"),Hx=x(()=>window.MathMLElement!==void 0,"isMathMLSupported"),ug=/\$\$(.*)\$\$/g,oa=x(t=>{var e;return(((e=t.match(ug))==null?void 0:e.length)??0)>0},"hasKatex"),Uee=x(async(t,e)=>{const n=document.createElement("div");n.innerHTML=await gy(t,e),n.id="katex-temp",n.style.visibility="hidden",n.style.position="absolute",n.style.top="0";const r=document.querySelector("body");r==null||r.insertAdjacentElement("beforeend",n);const i={width:n.clientWidth,height:n.clientHeight};return n.remove(),i},"calculateMathMLDimensions"),b4=x(async(t,e)=>{if(!oa(t))return t;if(!(Hx()||e.legacyMathML||e.forceLegacyMathML))return t.replace(ug,"MathML is unsupported in this environment.");{const{default:n}=await rt(async()=>{const{default:i}=await import("./katex-BbEIqZs1.js");return{default:i}},[]),r=e.forceLegacyMathML||!Hx()&&e.legacyMathML?"htmlAndMathml":"mathml";return t.split(sc).map(i=>oa(i)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${i}</div>`:`<div>${i}</div>`).join("").replace(ug,(i,o)=>n.renderToString(o,{throwOnError:!0,displayMode:!0,output:r}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatexUnsanitized"),gy=x(async(t,e)=>dr(await b4(t,e),e),"renderKatexSanitized"),ba={getRows:a4,sanitizeText:dr,sanitizeTextOrArray:c4,hasBreaks:u4,splitBreaks:d4,lineBreakRegex:sc,removeScript:jS,getUrl:f4,evaluate:zt,getMax:p4,getMin:g4},x4=x(function(t,e){for(let n of e)t.attr(n[0],n[1])},"d3Attrs"),v4=x(function(t,e,n){let r=new Map;return n?(r.set("width","100%"),r.set("style",`max-width: ${e}px;`)):(r.set("height",t),r.set("width",e)),r},"calculateSvgSizeAttrs"),VS=x(function(t,e,n,r){const i=v4(e,n,r);x4(t,i)},"configureSvgSize"),w4=x(function(t,e,n,r){const i=e.node().getBBox(),o=i.width,s=i.height;G.info(`SVG bounds: ${o}x${s}`,i);let a=0,l=0;G.info(`Graph bounds: ${a}x${l}`,t),a=o+n*2,l=s+n*2,G.info(`Calculated bounds: ${a}x${l}`),VS(e,l,a,r);const c=`${i.x-n} ${i.y-n} ${i.width+2*n} ${i.height+2*n}`;e.attr("viewBox",c)},"setupGraphViewbox"),bu={},C4=x((t,e,n)=>{let r="";return t in bu&&bu[t]?r=bu[t](n):G.warn(`No theme found for ${t}`),` & {
    font-family: ${n.fontFamily};
    font-size: ${n.fontSize};
    fill: ${n.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${n.errorBkgColor};
  }
  & .error-text {
    fill: ${n.errorTextColor};
    stroke: ${n.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${n.lineColor};
    stroke: ${n.lineColor};
  }
  & .marker.cross {
    stroke: ${n.lineColor};
  }

  & svg {
    font-family: ${n.fontFamily};
    font-size: ${n.fontSize};
  }
   & p {
    margin: 0
   }

  ${r}

  ${e}
`},"getStyles"),k4=x((t,e)=>{e!==void 0&&(bu[t]=e)},"addStylesForDiagram"),S4=C4,GS={};hF(GS,{clear:()=>_4,getAccDescription:()=>A4,getAccTitle:()=>T4,getDiagramTitle:()=>O4,setAccDescription:()=>M4,setAccTitle:()=>E4,setDiagramTitle:()=>N4});var my="",yy="",by="",xy=x(t=>dr(t,pn()),"sanitizeText"),_4=x(()=>{my="",by="",yy=""},"clear"),E4=x(t=>{my=xy(t).replace(/^\s+/g,"")},"setAccTitle"),T4=x(()=>my,"getAccTitle"),M4=x(t=>{by=xy(t).replace(/\n\s+/g,`
`)},"setAccDescription"),A4=x(()=>by,"getAccDescription"),N4=x(t=>{yy=xy(t)},"setDiagramTitle"),O4=x(()=>yy,"getDiagramTitle"),Wx=G,L4=fy,tt=pn,jee=zS,qee=ia,vy=x(t=>dr(t,tt()),"sanitizeText"),R4=w4,I4=x(()=>GS,"getCommonDb"),Td={},Md=x((t,e,n)=>{var r;Td[t]&&Wx.warn(`Diagram with id ${t} already registered. Overwriting.`),Td[t]=e,n&&DS(t,n),k4(t,e.styles),(r=e.injectUtils)==null||r.call(e,Wx,L4,tt,vy,R4,I4(),()=>{})},"registerDiagram"),dg=x(t=>{if(t in Td)return Td[t];throw new D4(t)},"getDiagram"),Xs,D4=(Xs=class extends Error{constructor(e){super(`Diagram ${e} not found.`)}},x(Xs,"DiagramNotFoundError"),Xs),B4={value:()=>{}};function KS(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new xu(n)}function xu(t){this._=t}function P4(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}xu.prototype=KS.prototype={constructor:xu,on:function(t,e){var n=this._,r=P4(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=$4(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=Ux(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Ux(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new xu(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function $4(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Ux(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=B4,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var hg="http://www.w3.org/1999/xhtml";const jx={svg:"http://www.w3.org/2000/svg",xhtml:hg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Lh(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),jx.hasOwnProperty(e)?{space:jx[e],local:t}:t}function F4(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===hg&&e.documentElement.namespaceURI===hg?e.createElement(t):e.createElementNS(n,t)}}function z4(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function YS(t){var e=Lh(t);return(e.local?z4:F4)(e)}function H4(){}function wy(t){return t==null?H4:function(){return this.querySelector(t)}}function W4(t){typeof t!="function"&&(t=wy(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),l,c,u=0;u<s;++u)(l=o[u])&&(c=t.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Xn(r,this._parents)}function U4(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function j4(){return[]}function XS(t){return t==null?j4:function(){return this.querySelectorAll(t)}}function q4(t){return function(){return U4(t.apply(this,arguments))}}function V4(t){typeof t=="function"?t=q4(t):t=XS(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&(r.push(t.call(l,l.__data__,c,s)),i.push(l));return new Xn(r,i)}function ZS(t){return function(){return this.matches(t)}}function JS(t){return function(e){return e.matches(t)}}var G4=Array.prototype.find;function K4(t){return function(){return G4.call(this.children,t)}}function Y4(){return this.firstElementChild}function X4(t){return this.select(t==null?Y4:K4(typeof t=="function"?t:JS(t)))}var Z4=Array.prototype.filter;function J4(){return Array.from(this.children)}function Q4(t){return function(){return Z4.call(this.children,t)}}function ez(t){return this.selectAll(t==null?J4:Q4(typeof t=="function"?t:JS(t)))}function tz(t){typeof t!="function"&&(t=ZS(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],l,c=0;c<s;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&a.push(l);return new Xn(r,this._parents)}function QS(t){return new Array(t.length)}function nz(){return new Xn(this._enter||this._groups.map(QS),this._parents)}function Ad(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ad.prototype={constructor:Ad,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function rz(t){return function(){return t}}function iz(t,e,n,r,i,o){for(var s=0,a,l=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new Ad(t,o[s]);for(;s<l;++s)(a=e[s])&&(i[s]=a)}function oz(t,e,n,r,i,o,s){var a,l,c=new Map,u=e.length,d=o.length,h=new Array(u),f;for(a=0;a<u;++a)(l=e[a])&&(h[a]=f=s.call(l,l.__data__,a,e)+"",c.has(f)?i[a]=l:c.set(f,l));for(a=0;a<d;++a)f=s.call(t,o[a],a,o)+"",(l=c.get(f))?(r[a]=l,l.__data__=o[a],c.delete(f)):n[a]=new Ad(t,o[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(h[a])===l&&(i[a]=l)}function sz(t){return t.__data__}function az(t,e){if(!arguments.length)return Array.from(this,sz);var n=e?oz:iz,r=this._parents,i=this._groups;typeof t!="function"&&(t=rz(t));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],d=i[c],h=d.length,f=lz(t.call(u,u&&u.__data__,c,r)),p=f.length,g=a[c]=new Array(p),m=s[c]=new Array(p),y=l[c]=new Array(h);n(u,d,g,m,y,f,e);for(var b=0,C=0,v,k;b<p;++b)if(v=g[b]){for(b>=C&&(C=b+1);!(k=m[C])&&++C<p;);v._next=k||null}}return s=new Xn(s,r),s._enter=a,s._exit=l,s}function lz(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function cz(){return new Xn(this._exit||this._groups.map(QS),this._parents)}function uz(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function dz(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var c=n[l],u=r[l],d=c.length,h=a[l]=new Array(d),f,p=0;p<d;++p)(f=c[p]||u[p])&&(h[p]=f);for(;l<i;++l)a[l]=n[l];return new Xn(a,this._parents)}function hz(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function fz(t){t||(t=pz);function e(d,h){return d&&h?t(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),c,u=0;u<a;++u)(c=s[u])&&(l[u]=c);l.sort(e)}return new Xn(i,this._parents).order()}function pz(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function gz(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function mz(){return Array.from(this)}function yz(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function bz(){let t=0;for(const e of this)++t;return t}function xz(){return!this.node()}function vz(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function wz(t){return function(){this.removeAttribute(t)}}function Cz(t){return function(){this.removeAttributeNS(t.space,t.local)}}function kz(t,e){return function(){this.setAttribute(t,e)}}function Sz(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function _z(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ez(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Tz(t,e){var n=Lh(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Cz:wz:typeof e=="function"?n.local?Ez:_z:n.local?Sz:kz)(n,e))}function e_(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Mz(t){return function(){this.style.removeProperty(t)}}function Az(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Nz(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Oz(t,e,n){return arguments.length>1?this.each((e==null?Mz:typeof e=="function"?Nz:Az)(t,e,n??"")):sa(this.node(),t)}function sa(t,e){return t.style.getPropertyValue(e)||e_(t).getComputedStyle(t,null).getPropertyValue(e)}function Lz(t){return function(){delete this[t]}}function Rz(t,e){return function(){this[t]=e}}function Iz(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Dz(t,e){return arguments.length>1?this.each((e==null?Lz:typeof e=="function"?Iz:Rz)(t,e)):this.node()[t]}function t_(t){return t.trim().split(/^|\s+/)}function Cy(t){return t.classList||new n_(t)}function n_(t){this._node=t,this._names=t_(t.getAttribute("class")||"")}n_.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function r_(t,e){for(var n=Cy(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function i_(t,e){for(var n=Cy(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Bz(t){return function(){r_(this,t)}}function Pz(t){return function(){i_(this,t)}}function $z(t,e){return function(){(e.apply(this,arguments)?r_:i_)(this,t)}}function Fz(t,e){var n=t_(t+"");if(arguments.length<2){for(var r=Cy(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?$z:e?Bz:Pz)(n,e))}function zz(){this.textContent=""}function Hz(t){return function(){this.textContent=t}}function Wz(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Uz(t){return arguments.length?this.each(t==null?zz:(typeof t=="function"?Wz:Hz)(t)):this.node().textContent}function jz(){this.innerHTML=""}function qz(t){return function(){this.innerHTML=t}}function Vz(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Gz(t){return arguments.length?this.each(t==null?jz:(typeof t=="function"?Vz:qz)(t)):this.node().innerHTML}function Kz(){this.nextSibling&&this.parentNode.appendChild(this)}function Yz(){return this.each(Kz)}function Xz(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Zz(){return this.each(Xz)}function Jz(t){var e=typeof t=="function"?t:YS(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Qz(){return null}function eH(t,e){var n=typeof t=="function"?t:YS(t),r=e==null?Qz:typeof e=="function"?e:wy(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function tH(){var t=this.parentNode;t&&t.removeChild(this)}function nH(){return this.each(tH)}function rH(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function iH(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function oH(t){return this.select(t?iH:rH)}function sH(t){return arguments.length?this.property("__data__",t):this.node().__data__}function aH(t){return function(e){t.call(this,e,this.__data__)}}function lH(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function cH(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function uH(t,e,n){return function(){var r=this.__on,i,o=aH(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function dH(t,e,n){var r=lH(t+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(a=e?uH:cH,i=0;i<o;++i)this.each(a(r[i],e,n));return this}function o_(t,e,n){var r=e_(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function hH(t,e){return function(){return o_(this,t,e)}}function fH(t,e){return function(){return o_(this,t,e.apply(this,arguments))}}function pH(t,e){return this.each((typeof e=="function"?fH:hH)(t,e))}function*gH(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var s_=[null];function Xn(t,e){this._groups=t,this._parents=e}function ac(){return new Xn([[document.documentElement]],s_)}function mH(){return this}Xn.prototype=ac.prototype={constructor:Xn,select:W4,selectAll:V4,selectChild:X4,selectChildren:ez,filter:tz,data:az,enter:nz,exit:cz,join:uz,merge:dz,selection:mH,order:hz,sort:fz,call:gz,nodes:mz,node:yz,size:bz,empty:xz,each:vz,attr:Tz,style:Oz,property:Dz,classed:Fz,text:Uz,html:Gz,raise:Yz,lower:Zz,append:Jz,insert:eH,remove:nH,clone:oH,datum:sH,on:dH,dispatch:pH,[Symbol.iterator]:gH};function Ve(t){return typeof t=="string"?new Xn([[document.querySelector(t)]],[document.documentElement]):new Xn([[t]],s_)}function ky(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function a_(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function lc(){}var Bl=.7,Nd=1/Bl,Hs="\\s*([+-]?\\d+)\\s*",Pl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yH=/^#([0-9a-f]{3,8})$/,bH=new RegExp(`^rgb\\(${Hs},${Hs},${Hs}\\)$`),xH=new RegExp(`^rgb\\(${Vr},${Vr},${Vr}\\)$`),vH=new RegExp(`^rgba\\(${Hs},${Hs},${Hs},${Pl}\\)$`),wH=new RegExp(`^rgba\\(${Vr},${Vr},${Vr},${Pl}\\)$`),CH=new RegExp(`^hsl\\(${Pl},${Vr},${Vr}\\)$`),kH=new RegExp(`^hsla\\(${Pl},${Vr},${Vr},${Pl}\\)$`),qx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ky(lc,$l,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Vx,formatHex:Vx,formatHex8:SH,formatHsl:_H,formatRgb:Gx,toString:Gx});function Vx(){return this.rgb().formatHex()}function SH(){return this.rgb().formatHex8()}function _H(){return l_(this).formatHsl()}function Gx(){return this.rgb().formatRgb()}function $l(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=yH.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Kx(e):n===3?new Dn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Vc(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Vc(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=bH.exec(t))?new Dn(e[1],e[2],e[3],1):(e=xH.exec(t))?new Dn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vH.exec(t))?Vc(e[1],e[2],e[3],e[4]):(e=wH.exec(t))?Vc(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=CH.exec(t))?Zx(e[1],e[2]/100,e[3]/100,1):(e=kH.exec(t))?Zx(e[1],e[2]/100,e[3]/100,e[4]):qx.hasOwnProperty(t)?Kx(qx[t]):t==="transparent"?new Dn(NaN,NaN,NaN,0):null}function Kx(t){return new Dn(t>>16&255,t>>8&255,t&255,1)}function Vc(t,e,n,r){return r<=0&&(t=e=n=NaN),new Dn(t,e,n,r)}function EH(t){return t instanceof lc||(t=$l(t)),t?(t=t.rgb(),new Dn(t.r,t.g,t.b,t.opacity)):new Dn}function fg(t,e,n,r){return arguments.length===1?EH(t):new Dn(t,e,n,r??1)}function Dn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ky(Dn,fg,a_(lc,{brighter(t){return t=t==null?Nd:Math.pow(Nd,t),new Dn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Bl:Math.pow(Bl,t),new Dn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Dn(zo(this.r),zo(this.g),zo(this.b),Od(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yx,formatHex:Yx,formatHex8:TH,formatRgb:Xx,toString:Xx}));function Yx(){return`#${Oo(this.r)}${Oo(this.g)}${Oo(this.b)}`}function TH(){return`#${Oo(this.r)}${Oo(this.g)}${Oo(this.b)}${Oo((isNaN(this.opacity)?1:this.opacity)*255)}`}function Xx(){const t=Od(this.opacity);return`${t===1?"rgb(":"rgba("}${zo(this.r)}, ${zo(this.g)}, ${zo(this.b)}${t===1?")":`, ${t})`}`}function Od(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function zo(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Oo(t){return t=zo(t),(t<16?"0":"")+t.toString(16)}function Zx(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Cr(t,e,n,r)}function l_(t){if(t instanceof Cr)return new Cr(t.h,t.s,t.l,t.opacity);if(t instanceof lc||(t=$l(t)),!t)return new Cr;if(t instanceof Cr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new Cr(s,a,l,t.opacity)}function MH(t,e,n,r){return arguments.length===1?l_(t):new Cr(t,e,n,r??1)}function Cr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ky(Cr,MH,a_(lc,{brighter(t){return t=t==null?Nd:Math.pow(Nd,t),new Cr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Bl:Math.pow(Bl,t),new Cr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Dn(tp(t>=240?t-240:t+120,i,r),tp(t,i,r),tp(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Cr(Jx(this.h),Gc(this.s),Gc(this.l),Od(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Od(this.opacity);return`${t===1?"hsl(":"hsla("}${Jx(this.h)}, ${Gc(this.s)*100}%, ${Gc(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Jx(t){return t=(t||0)%360,t<0?t+360:t}function Gc(t){return Math.max(0,Math.min(1,t||0))}function tp(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Sy=t=>()=>t;function c_(t,e){return function(n){return t+n*e}}function AH(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Vee(t,e){var n=e-t;return n?c_(t,n>180||n<-180?n-360*Math.round(n/360):n):Sy(isNaN(t)?e:t)}function NH(t){return(t=+t)==1?u_:function(e,n){return n-e?AH(e,n,t):Sy(isNaN(e)?n:e)}}function u_(t,e){var n=e-t;return n?c_(t,n):Sy(isNaN(t)?e:t)}const Qx=(function t(e){var n=NH(e);function r(i,o){var s=n((i=fg(i)).r,(o=fg(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),c=u_(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r})(1);function Bi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var pg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,np=new RegExp(pg.source,"g");function OH(t){return function(){return t}}function LH(t){return function(e){return t(e)+""}}function RH(t,e){var n=pg.lastIndex=np.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(t=t+"",e=e+"";(r=pg.exec(t))&&(i=np.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Bi(r,i)})),n=np.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?LH(l[0].x):OH(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}var e1=180/Math.PI,gg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function d_(t,e,n,r,i,o){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*e1,skewX:Math.atan(l)*e1,scaleX:s,scaleY:a}}var Kc;function IH(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?gg:d_(e.a,e.b,e.c,e.d,e.e,e.f)}function DH(t){return t==null||(Kc||(Kc=document.createElementNS("http://www.w3.org/2000/svg","g")),Kc.setAttribute("transform",t),!(t=Kc.transform.baseVal.consolidate()))?gg:(t=t.matrix,d_(t.a,t.b,t.c,t.d,t.e,t.f))}function h_(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,u,d,h,f,p){if(c!==d||u!==h){var g=f.push("translate(",null,e,null,n);p.push({i:g-4,x:Bi(c,d)},{i:g-2,x:Bi(u,h)})}else(d||h)&&f.push("translate("+d+e+h+n)}function s(c,u,d,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Bi(c,u)})):u&&d.push(i(d)+"rotate("+u+r)}function a(c,u,d,h){c!==u?h.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Bi(c,u)}):u&&d.push(i(d)+"skewX("+u+r)}function l(c,u,d,h,f,p){if(c!==d||u!==h){var g=f.push(i(f)+"scale(",null,",",null,")");p.push({i:g-4,x:Bi(c,d)},{i:g-2,x:Bi(u,h)})}else(d!==1||h!==1)&&f.push(i(f)+"scale("+d+","+h+")")}return function(c,u){var d=[],h=[];return c=t(c),u=t(u),o(c.translateX,c.translateY,u.translateX,u.translateY,d,h),s(c.rotate,u.rotate,d,h),a(c.skewX,u.skewX,d,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,h),c=u=null,function(f){for(var p=-1,g=h.length,m;++p<g;)d[(m=h[p]).i]=m.x(f);return d.join("")}}}var BH=h_(IH,"px, ","px)","deg)"),PH=h_(DH,", ",")",")"),aa=0,Ya=0,Da=0,f_=1e3,Ld,Xa,Rd=0,Zo=0,Rh=0,Fl=typeof performance=="object"&&performance.now?performance:Date,p_=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function _y(){return Zo||(p_($H),Zo=Fl.now()+Rh)}function $H(){Zo=0}function Id(){this._call=this._time=this._next=null}Id.prototype=g_.prototype={constructor:Id,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?_y():+n)+(e==null?0:+e),!this._next&&Xa!==this&&(Xa?Xa._next=this:Ld=this,Xa=this),this._call=t,this._time=n,mg()},stop:function(){this._call&&(this._call=null,this._time=1/0,mg())}};function g_(t,e,n){var r=new Id;return r.restart(t,e,n),r}function FH(){_y(),++aa;for(var t=Ld,e;t;)(e=Zo-t._time)>=0&&t._call.call(void 0,e),t=t._next;--aa}function t1(){Zo=(Rd=Fl.now())+Rh,aa=Ya=0;try{FH()}finally{aa=0,HH(),Zo=0}}function zH(){var t=Fl.now(),e=t-Rd;e>f_&&(Rh-=e,Rd=t)}function HH(){for(var t,e=Ld,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ld=n);Xa=t,mg(r)}function mg(t){if(!aa){Ya&&(Ya=clearTimeout(Ya));var e=t-Zo;e>24?(t<1/0&&(Ya=setTimeout(t1,t-Fl.now()-Rh)),Da&&(Da=clearInterval(Da))):(Da||(Rd=Fl.now(),Da=setInterval(zH,f_)),aa=1,p_(t1))}}function n1(t,e,n){var r=new Id;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var WH=KS("start","end","cancel","interrupt"),UH=[],m_=0,r1=1,yg=2,vu=3,i1=4,bg=5,wu=6;function Ih(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;jH(t,n,{name:e,index:r,group:i,on:WH,tween:UH,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:m_})}function Ey(t,e){var n=Mr(t,e);if(n.state>m_)throw new Error("too late; already scheduled");return n}function Qr(t,e){var n=Mr(t,e);if(n.state>vu)throw new Error("too late; already running");return n}function Mr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function jH(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=g_(o,0,n.time);function o(c){n.state=r1,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var u,d,h,f;if(n.state!==r1)return l();for(u in r)if(f=r[u],f.name===n.name){if(f.state===vu)return n1(s);f.state===i1?(f.state=wu,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<e&&(f.state=wu,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[u])}if(n1(function(){n.state===vu&&(n.state=i1,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=yg,n.on.call("start",t,t.__data__,n.index,n.group),n.state===yg){for(n.state=vu,i=new Array(h=n.tween.length),u=0,d=-1;u<h;++u)(f=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=f);i.length=d+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=bg,1),d=-1,h=i.length;++d<h;)i[d].call(t,u);n.state===bg&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=wu,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function qH(t,e){var n=t.__transition,r,i,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>yg&&r.state<bg,r.state=wu,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function VH(t){return this.each(function(){qH(this,t)})}function GH(t,e){var n,r;return function(){var i=Qr(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function KH(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Qr(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}o.tween=i}}function YH(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Mr(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?GH:KH)(n,t,e))}function Ty(t,e,n){var r=t._id;return t.each(function(){var i=Qr(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Mr(i,r).value[e]}}function y_(t,e){var n;return(typeof e=="number"?Bi:e instanceof $l?Qx:(n=$l(e))?(e=n,Qx):RH)(t,e)}function XH(t){return function(){this.removeAttribute(t)}}function ZH(t){return function(){this.removeAttributeNS(t.space,t.local)}}function JH(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function QH(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function e6(t,e,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a)))}}function t6(t,e,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a)))}}function n6(t,e){var n=Lh(t),r=n==="transform"?PH:y_;return this.attrTween(t,typeof e=="function"?(n.local?t6:e6)(n,r,Ty(this,"attr."+t,e)):e==null?(n.local?ZH:XH)(n):(n.local?QH:JH)(n,r,e))}function r6(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function i6(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function o6(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&i6(t,o)),n}return i._value=e,i}function s6(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&r6(t,o)),n}return i._value=e,i}function a6(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Lh(t);return this.tween(n,(r.local?o6:s6)(r,e))}function l6(t,e){return function(){Ey(this,t).delay=+e.apply(this,arguments)}}function c6(t,e){return e=+e,function(){Ey(this,t).delay=e}}function u6(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?l6:c6)(e,t)):Mr(this.node(),e).delay}function d6(t,e){return function(){Qr(this,t).duration=+e.apply(this,arguments)}}function h6(t,e){return e=+e,function(){Qr(this,t).duration=e}}function f6(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?d6:h6)(e,t)):Mr(this.node(),e).duration}function p6(t,e){if(typeof e!="function")throw new Error;return function(){Qr(this,t).ease=e}}function g6(t){var e=this._id;return arguments.length?this.each(p6(e,t)):Mr(this.node(),e).ease}function m6(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Qr(this,t).ease=n}}function y6(t){if(typeof t!="function")throw new Error;return this.each(m6(this._id,t))}function b6(t){typeof t!="function"&&(t=ZS(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],l,c=0;c<s;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&a.push(l);return new vi(r,this._parents,this._name,this._id)}function x6(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=e[a],c=n[a],u=l.length,d=s[a]=new Array(u),h,f=0;f<u;++f)(h=l[f]||c[f])&&(d[f]=h);for(;a<r;++a)s[a]=e[a];return new vi(s,this._parents,this._name,this._id)}function v6(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function w6(t,e,n){var r,i,o=v6(e)?Ey:Qr;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}function C6(t,e){var n=this._id;return arguments.length<2?Mr(this.node(),n).on.on(t):this.each(w6(n,t,e))}function k6(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function S6(){return this.on("end.remove",k6(this._id))}function _6(t){var e=this._name,n=this._id;typeof t!="function"&&(t=wy(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,c=o[s]=new Array(l),u,d,h=0;h<l;++h)(u=a[h])&&(d=t.call(u,u.__data__,h,a))&&("__data__"in u&&(d.__data__=u.__data__),c[h]=d,Ih(c[h],e,n,h,c,Mr(u,n)));return new vi(o,this._parents,e,n)}function E6(t){var e=this._name,n=this._id;typeof t!="function"&&(t=XS(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var h=t.call(u,u.__data__,d,l),f,p=Mr(u,n),g=0,m=h.length;g<m;++g)(f=h[g])&&Ih(f,e,n,g,h,p);o.push(h),s.push(u)}return new vi(o,s,e,n)}var T6=ac.prototype.constructor;function M6(){return new T6(this._groups,this._parents)}function A6(t,e){var n,r,i;return function(){var o=sa(this,t),s=(this.style.removeProperty(t),sa(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function b_(t){return function(){this.style.removeProperty(t)}}function N6(t,e,n){var r,i=n+"",o;return function(){var s=sa(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function O6(t,e,n){var r,i,o;return function(){var s=sa(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),sa(this,t))),s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a))}}function L6(t,e){var n,r,i,o="style."+e,s="end."+o,a;return function(){var l=Qr(this,t),c=l.on,u=l.value[o]==null?a||(a=b_(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(s,i=u),l.on=r}}function R6(t,e,n){var r=(t+="")=="transform"?BH:y_;return e==null?this.styleTween(t,A6(t,r)).on("end.style."+t,b_(t)):typeof e=="function"?this.styleTween(t,O6(t,r,Ty(this,"style."+t,e))).each(L6(this._id,t)):this.styleTween(t,N6(t,r,e),n).on("end.style."+t,null)}function I6(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function D6(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&I6(t,s,n)),r}return o._value=e,o}function B6(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,D6(t,e,n??""))}function P6(t){return function(){this.textContent=t}}function $6(t){return function(){var e=t(this);this.textContent=e??""}}function F6(t){return this.tween("text",typeof t=="function"?$6(Ty(this,"text",t)):P6(t==null?"":t+""))}function z6(t){return function(e){this.textContent=t.call(this,e)}}function H6(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&z6(i)),e}return r._value=t,r}function W6(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,H6(t))}function U6(){for(var t=this._name,e=this._id,n=x_(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,c=0;c<a;++c)if(l=s[c]){var u=Mr(l,e);Ih(l,t,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new vi(r,this._parents,t,n)}function j6(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var c=Qr(this,r),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),i===0&&o()})}var q6=0;function vi(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function x_(){return++q6}var ai=ac.prototype;vi.prototype={constructor:vi,select:_6,selectAll:E6,selectChild:ai.selectChild,selectChildren:ai.selectChildren,filter:b6,merge:x6,selection:M6,transition:U6,call:ai.call,nodes:ai.nodes,node:ai.node,size:ai.size,empty:ai.empty,each:ai.each,on:C6,attr:n6,attrTween:a6,style:R6,styleTween:B6,text:F6,textTween:W6,remove:S6,tween:YH,delay:u6,duration:f6,ease:g6,easeVarying:y6,end:j6,[Symbol.iterator]:ai[Symbol.iterator]};function V6(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var G6={time:null,delay:0,duration:250,ease:V6};function K6(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Y6(t){var e,n;t instanceof vi?(e=t._id,t=t._name):(e=x_(),(n=G6).time=_y(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&Ih(l,t,e,c,s,n||K6(l,e));return new vi(r,this._parents,t,e)}ac.prototype.interrupt=VH;ac.prototype.transition=Y6;const xg=Math.PI,vg=2*xg,wo=1e-6,X6=vg-wo;function v_(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Z6(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return v_;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class J6{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?v_:Z6(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-e,c=i-n,u=s-e,d=a-n,h=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>wo)if(!(Math.abs(d*l-c*u)>wo)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let f=r-s,p=i-a,g=l*l+c*c,m=f*f+p*p,y=Math.sqrt(g),b=Math.sqrt(h),C=o*Math.tan((xg-Math.acos((g+h-m)/(2*y*b)))/2),v=C/b,k=C/y;Math.abs(v-1)>wo&&this._append`L${e+v*u},${n+v*d}`,this._append`A${o},${o},0,0,${+(d*f>u*p)},${this._x1=e+k*l},${this._y1=n+k*c}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=e+a,u=n+l,d=1^s,h=s?i-o:o-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>wo||Math.abs(this._y1-u)>wo)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%vg+vg),h>X6?this._append`A${r},${r},0,1,${d},${e-a},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:h>wo&&this._append`A${r},${r},0,${+(h>=xg)},${d},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Cs(t){return function(){return t}}const Gee=Math.abs,Kee=Math.atan2,Yee=Math.cos,Xee=Math.max,Zee=Math.min,Jee=Math.sin,Qee=Math.sqrt,o1=1e-12,My=Math.PI,s1=My/2,ete=2*My;function tte(t){return t>1?0:t<-1?My:Math.acos(t)}function nte(t){return t>=1?s1:t<=-1?-s1:Math.asin(t)}function Q6(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new J6(e)}function e9(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function w_(t){this._context=t}w_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Dd(t){return new w_(t)}function t9(t){return t[0]}function n9(t){return t[1]}function r9(t,e){var n=Cs(!0),r=null,i=Dd,o=null,s=Q6(a);t=typeof t=="function"?t:t===void 0?t9:Cs(t),e=typeof e=="function"?e:e===void 0?n9:Cs(e);function a(l){var c,u=(l=e9(l)).length,d,h=!1,f;for(r==null&&(o=i(f=s())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(d,c,l),+e(d,c,l));if(f)return o=null,f+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Cs(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:Cs(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Cs(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),a):r},a}class C_{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function k_(t){return new C_(t,!0)}function S_(t){return new C_(t,!1)}function eo(){}function Bd(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Dh(t){this._context=t}Dh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Bd(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Bd(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Cu(t){return new Dh(t)}function __(t){this._context=t}__.prototype={areaStart:eo,areaEnd:eo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Bd(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function i9(t){return new __(t)}function E_(t){this._context=t}E_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Bd(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function o9(t){return new E_(t)}function T_(t,e){this._basis=new Dh(t),this._beta=e}T_.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],o=t[n]-r,s=e[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*t[a]+(1-this._beta)*(r+l*o),this._beta*e[a]+(1-this._beta)*(i+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const s9=(function t(e){function n(r){return e===1?new Dh(r):new T_(r,e)}return n.beta=function(r){return t(+r)},n})(.85);function Pd(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Ay(t,e){this._context=t,this._k=(1-e)/6}Ay.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Pd(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Pd(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const M_=(function t(e){function n(r){return new Ay(r,e)}return n.tension=function(r){return t(+r)},n})(0);function Ny(t,e){this._context=t,this._k=(1-e)/6}Ny.prototype={areaStart:eo,areaEnd:eo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Pd(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const a9=(function t(e){function n(r){return new Ny(r,e)}return n.tension=function(r){return t(+r)},n})(0);function Oy(t,e){this._context=t,this._k=(1-e)/6}Oy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Pd(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const l9=(function t(e){function n(r){return new Oy(r,e)}return n.tension=function(r){return t(+r)},n})(0);function Ly(t,e,n){var r=t._x1,i=t._y1,o=t._x2,s=t._y2;if(t._l01_a>o1){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>o1){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/u,s=(s*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,o,s,t._x2,t._y2)}function A_(t,e){this._context=t,this._alpha=e}A_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Ly(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const N_=(function t(e){function n(r){return e?new A_(r,e):new Ay(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function O_(t,e){this._context=t,this._alpha=e}O_.prototype={areaStart:eo,areaEnd:eo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ly(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const c9=(function t(e){function n(r){return e?new O_(r,e):new Ny(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function L_(t,e){this._context=t,this._alpha=e}L_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ly(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const u9=(function t(e){function n(r){return e?new L_(r,e):new Oy(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function R_(t){this._context=t}R_.prototype={areaStart:eo,areaEnd:eo,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function d9(t){return new R_(t)}function a1(t){return t<0?-1:1}function l1(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(a1(o)+a1(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function c1(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function rp(t,e,n){var r=t._x0,i=t._y0,o=t._x1,s=t._y1,a=(o-r)/3;t._context.bezierCurveTo(r+a,i+a*e,o-a,s-a*n,o,s)}function $d(t){this._context=t}$d.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:rp(this,this._t0,c1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,rp(this,c1(this,n=l1(this,t,e)),n);break;default:rp(this,this._t0,n=l1(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function I_(t){this._context=new D_(t)}(I_.prototype=Object.create($d.prototype)).point=function(t,e){$d.prototype.point.call(this,e,t)};function D_(t){this._context=t}D_.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function B_(t){return new $d(t)}function P_(t){return new I_(t)}function $_(t){this._context=t}$_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=u1(t),i=u1(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function u1(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function F_(t){return new $_(t)}function Bh(t,e){this._context=t,this._t=e}Bh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function z_(t){return new Bh(t,.5)}function H_(t){return new Bh(t,0)}function W_(t){return new Bh(t,1)}function Za(t,e,n){this.k=t,this.x=e,this.y=n}Za.prototype={constructor:Za,scale:function(t){return t===1?this:new Za(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Za(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Za.prototype;var h9=x(t=>{var i;const{securityLevel:e}=tt();let n=Ve("body");if(e==="sandbox"){const s=((i=Ve(`#i${t}`).node())==null?void 0:i.contentDocument)??document;n=Ve(s.body)}return n.select(`#${t}`)},"selectSvgElement");function Ry(t){return typeof t>"u"||t===null}x(Ry,"isNothing");function U_(t){return typeof t=="object"&&t!==null}x(U_,"isObject");function j_(t){return Array.isArray(t)?t:Ry(t)?[]:[t]}x(j_,"toArray");function q_(t,e){var n,r,i,o;if(e)for(o=Object.keys(e),n=0,r=o.length;n<r;n+=1)i=o[n],t[i]=e[i];return t}x(q_,"extend");function V_(t,e){var n="",r;for(r=0;r<e;r+=1)n+=t;return n}x(V_,"repeat");function G_(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}x(G_,"isNegativeZero");var f9=Ry,p9=U_,g9=j_,m9=V_,y9=G_,b9=q_,Ft={isNothing:f9,isObject:p9,toArray:g9,repeat:m9,isNegativeZero:y9,extend:b9};function Iy(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),r+" "+n):r}x(Iy,"formatError");function la(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Iy(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}x(la,"YAMLException$1");la.prototype=Object.create(Error.prototype);la.prototype.constructor=la;la.prototype.toString=x(function(e){return this.name+": "+Iy(this,e)},"toString");var In=la;function ku(t,e,n,r,i){var o="",s="",a=Math.floor(i/2)-1;return r-e>a&&(o=" ... ",e=r-a+o.length),n-r>a&&(s=" ...",n=r+a-s.length),{str:o+t.slice(e,n).replace(/\t/g,"")+s,pos:r-e+o.length}}x(ku,"getLine");function Su(t,e){return Ft.repeat(" ",e-t.length)+t}x(Su,"padStart");function K_(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],o,s=-1;o=n.exec(t.buffer);)i.push(o.index),r.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=r.length-2);s<0&&(s=r.length-1);var a="",l,c,u=Math.min(t.line+e.linesAfter,i.length).toString().length,d=e.maxLength-(e.indent+u+3);for(l=1;l<=e.linesBefore&&!(s-l<0);l++)c=ku(t.buffer,r[s-l],i[s-l],t.position-(r[s]-r[s-l]),d),a=Ft.repeat(" ",e.indent)+Su((t.line-l+1).toString(),u)+" | "+c.str+`
`+a;for(c=ku(t.buffer,r[s],i[s],t.position,d),a+=Ft.repeat(" ",e.indent)+Su((t.line+1).toString(),u)+" | "+c.str+`
`,a+=Ft.repeat("-",e.indent+u+3+c.pos)+`^
`,l=1;l<=e.linesAfter&&!(s+l>=i.length);l++)c=ku(t.buffer,r[s+l],i[s+l],t.position-(r[s]-r[s+l]),d),a+=Ft.repeat(" ",e.indent)+Su((t.line+l+1).toString(),u)+" | "+c.str+`
`;return a.replace(/\n$/,"")}x(K_,"makeSnippet");var x9=K_,v9=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],w9=["scalar","sequence","mapping"];function Y_(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(r){e[String(r)]=n})}),e}x(Y_,"compileStyleAliases");function X_(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(v9.indexOf(n)===-1)throw new In('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Y_(e.styleAliases||null),w9.indexOf(this.kind)===-1)throw new In('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}x(X_,"Type$1");var gn=X_;function wg(t,e){var n=[];return t[e].forEach(function(r){var i=n.length;n.forEach(function(o,s){o.tag===r.tag&&o.kind===r.kind&&o.multi===r.multi&&(i=s)}),n[i]=r}),n}x(wg,"compileList");function Z_(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function r(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(x(r,"collectType"),e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(r);return t}x(Z_,"compileMap");function Fd(t){return this.extend(t)}x(Fd,"Schema$1");Fd.prototype.extend=x(function(e){var n=[],r=[];if(e instanceof gn)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new In("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(o){if(!(o instanceof gn))throw new In("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new In("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new In("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(o){if(!(o instanceof gn))throw new In("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Fd.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=wg(i,"implicit"),i.compiledExplicit=wg(i,"explicit"),i.compiledTypeMap=Z_(i.compiledImplicit,i.compiledExplicit),i},"extend");var C9=Fd,k9=new gn("tag:yaml.org,2002:str",{kind:"scalar",construct:x(function(t){return t!==null?t:""},"construct")}),S9=new gn("tag:yaml.org,2002:seq",{kind:"sequence",construct:x(function(t){return t!==null?t:[]},"construct")}),_9=new gn("tag:yaml.org,2002:map",{kind:"mapping",construct:x(function(t){return t!==null?t:{}},"construct")}),E9=new C9({explicit:[k9,S9,_9]});function J_(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}x(J_,"resolveYamlNull");function Q_(){return null}x(Q_,"constructYamlNull");function eE(t){return t===null}x(eE,"isNull");var T9=new gn("tag:yaml.org,2002:null",{kind:"scalar",resolve:J_,construct:Q_,predicate:eE,represent:{canonical:x(function(){return"~"},"canonical"),lowercase:x(function(){return"null"},"lowercase"),uppercase:x(function(){return"NULL"},"uppercase"),camelcase:x(function(){return"Null"},"camelcase"),empty:x(function(){return""},"empty")},defaultStyle:"lowercase"});function tE(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}x(tE,"resolveYamlBoolean");function nE(t){return t==="true"||t==="True"||t==="TRUE"}x(nE,"constructYamlBoolean");function rE(t){return Object.prototype.toString.call(t)==="[object Boolean]"}x(rE,"isBoolean");var M9=new gn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:tE,construct:nE,predicate:rE,represent:{lowercase:x(function(t){return t?"true":"false"},"lowercase"),uppercase:x(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:x(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function iE(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}x(iE,"isHexCode");function oE(t){return 48<=t&&t<=55}x(oE,"isOctCode");function sE(t){return 48<=t&&t<=57}x(sE,"isDecCode");function aE(t){if(t===null)return!1;var e=t.length,n=0,r=!1,i;if(!e)return!1;if(i=t[n],(i==="-"||i==="+")&&(i=t[++n]),i==="0"){if(n+1===e)return!0;if(i=t[++n],i==="b"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!iE(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!oE(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<e;n++)if(i=t[n],i!=="_"){if(!sE(t.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}x(aE,"resolveYamlInteger");function lE(t){var e=t,n=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}x(lE,"constructYamlInteger");function cE(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Ft.isNegativeZero(t)}x(cE,"isInteger");var A9=new gn("tag:yaml.org,2002:int",{kind:"scalar",resolve:aE,construct:lE,predicate:cE,represent:{binary:x(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:x(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:x(function(t){return t.toString(10)},"decimal"),hexadecimal:x(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),N9=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function uE(t){return!(t===null||!N9.test(t)||t[t.length-1]==="_")}x(uE,"resolveYamlFloat");function dE(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}x(dE,"constructYamlFloat");var O9=/^[-+]?[0-9]+e/;function hE(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ft.isNegativeZero(t))return"-0.0";return n=t.toString(10),O9.test(n)?n.replace("e",".e"):n}x(hE,"representYamlFloat");function fE(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Ft.isNegativeZero(t))}x(fE,"isFloat");var L9=new gn("tag:yaml.org,2002:float",{kind:"scalar",resolve:uE,construct:dE,predicate:fE,represent:hE,defaultStyle:"lowercase"}),pE=E9.extend({implicit:[T9,M9,A9,L9]}),R9=pE,gE=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),mE=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function yE(t){return t===null?!1:gE.exec(t)!==null||mE.exec(t)!==null}x(yE,"resolveYamlTimestamp");function bE(t){var e,n,r,i,o,s,a,l=0,c=null,u,d,h;if(e=gE.exec(t),e===null&&(e=mE.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(n,r,i));if(o=+e[4],s=+e[5],a=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(u=+e[10],d=+(e[11]||0),c=(u*60+d)*6e4,e[9]==="-"&&(c=-c)),h=new Date(Date.UTC(n,r,i,o,s,a,l)),c&&h.setTime(h.getTime()-c),h}x(bE,"constructYamlTimestamp");function xE(t){return t.toISOString()}x(xE,"representYamlTimestamp");var I9=new gn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:yE,construct:bE,instanceOf:Date,represent:xE});function vE(t){return t==="<<"||t===null}x(vE,"resolveYamlMerge");var D9=new gn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:vE}),Dy=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function wE(t){if(t===null)return!1;var e,n,r=0,i=t.length,o=Dy;for(n=0;n<i;n++)if(e=o.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}x(wE,"resolveYamlBinary");function CE(t){var e,n,r=t.replace(/[\r\n=]/g,""),i=r.length,o=Dy,s=0,a=[];for(e=0;e<i;e++)e%4===0&&e&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|o.indexOf(r.charAt(e));return n=i%4*6,n===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):n===18?(a.push(s>>10&255),a.push(s>>2&255)):n===12&&a.push(s>>4&255),new Uint8Array(a)}x(CE,"constructYamlBinary");function kE(t){var e="",n=0,r,i,o=t.length,s=Dy;for(r=0;r<o;r++)r%3===0&&r&&(e+=s[n>>18&63],e+=s[n>>12&63],e+=s[n>>6&63],e+=s[n&63]),n=(n<<8)+t[r];return i=o%3,i===0?(e+=s[n>>18&63],e+=s[n>>12&63],e+=s[n>>6&63],e+=s[n&63]):i===2?(e+=s[n>>10&63],e+=s[n>>4&63],e+=s[n<<2&63],e+=s[64]):i===1&&(e+=s[n>>2&63],e+=s[n<<4&63],e+=s[64],e+=s[64]),e}x(kE,"representYamlBinary");function SE(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}x(SE,"isBinary");var B9=new gn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:wE,construct:CE,predicate:SE,represent:kE}),P9=Object.prototype.hasOwnProperty,$9=Object.prototype.toString;function _E(t){if(t===null)return!0;var e=[],n,r,i,o,s,a=t;for(n=0,r=a.length;n<r;n+=1){if(i=a[n],s=!1,$9.call(i)!=="[object Object]")return!1;for(o in i)if(P9.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}x(_E,"resolveYamlOmap");function EE(t){return t!==null?t:[]}x(EE,"constructYamlOmap");var F9=new gn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:_E,construct:EE}),z9=Object.prototype.toString;function TE(t){if(t===null)return!0;var e,n,r,i,o,s=t;for(o=new Array(s.length),e=0,n=s.length;e<n;e+=1){if(r=s[e],z9.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;o[e]=[i[0],r[i[0]]]}return!0}x(TE,"resolveYamlPairs");function ME(t){if(t===null)return[];var e,n,r,i,o,s=t;for(o=new Array(s.length),e=0,n=s.length;e<n;e+=1)r=s[e],i=Object.keys(r),o[e]=[i[0],r[i[0]]];return o}x(ME,"constructYamlPairs");var H9=new gn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:TE,construct:ME}),W9=Object.prototype.hasOwnProperty;function AE(t){if(t===null)return!0;var e,n=t;for(e in n)if(W9.call(n,e)&&n[e]!==null)return!1;return!0}x(AE,"resolveYamlSet");function NE(t){return t!==null?t:{}}x(NE,"constructYamlSet");var U9=new gn("tag:yaml.org,2002:set",{kind:"mapping",resolve:AE,construct:NE}),OE=R9.extend({implicit:[I9,D9],explicit:[B9,F9,H9,U9]}),to=Object.prototype.hasOwnProperty,zd=1,LE=2,RE=3,Hd=4,ip=1,j9=2,d1=3,q9=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,V9=/[\x85\u2028\u2029]/,G9=/[,\[\]\{\}]/,IE=/^(?:!|!!|![a-z\-]+!)$/i,DE=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Cg(t){return Object.prototype.toString.call(t)}x(Cg,"_class");function Er(t){return t===10||t===13}x(Er,"is_EOL");function Xi(t){return t===9||t===32}x(Xi,"is_WHITE_SPACE");function kn(t){return t===9||t===32||t===10||t===13}x(kn,"is_WS_OR_EOL");function Lo(t){return t===44||t===91||t===93||t===123||t===125}x(Lo,"is_FLOW_INDICATOR");function BE(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}x(BE,"fromHexCode");function PE(t){return t===120?2:t===117?4:t===85?8:0}x(PE,"escapedHexLen");function $E(t){return 48<=t&&t<=57?t-48:-1}x($E,"fromDecimalCode");function kg(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}x(kg,"simpleEscapeSequence");function FE(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}x(FE,"charFromCodepoint");var zE=new Array(256),HE=new Array(256);for(vo=0;vo<256;vo++)zE[vo]=kg(vo)?1:0,HE[vo]=kg(vo);var vo;function WE(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||OE,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}x(WE,"State$1");function By(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=x9(n),new In(e,n)}x(By,"generateError");function Ce(t,e){throw By(t,e)}x(Ce,"throwError");function zl(t,e){t.onWarning&&t.onWarning.call(null,By(t,e))}x(zl,"throwWarning");var h1={YAML:x(function(e,n,r){var i,o,s;e.version!==null&&Ce(e,"duplication of %YAML directive"),r.length!==1&&Ce(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&Ce(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&Ce(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&zl(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:x(function(e,n,r){var i,o;r.length!==2&&Ce(e,"TAG directive accepts exactly two arguments"),i=r[0],o=r[1],IE.test(i)||Ce(e,"ill-formed tag handle (first argument) of the TAG directive"),to.call(e.tagMap,i)&&Ce(e,'there is a previously declared suffix for "'+i+'" tag handle'),DE.test(o)||Ce(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{Ce(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o},"handleTagDirective")};function bi(t,e,n,r){var i,o,s,a;if(e<n){if(a=t.input.slice(e,n),r)for(i=0,o=a.length;i<o;i+=1)s=a.charCodeAt(i),s===9||32<=s&&s<=1114111||Ce(t,"expected valid JSON character");else q9.test(a)&&Ce(t,"the stream contains non-printable characters");t.result+=a}}x(bi,"captureSegment");function Sg(t,e,n,r){var i,o,s,a;for(Ft.isObject(n)||Ce(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),s=0,a=i.length;s<a;s+=1)o=i[s],to.call(e,o)||(e[o]=n[o],r[o]=!0)}x(Sg,"mergeMappings");function Ro(t,e,n,r,i,o,s,a,l){var c,u;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,u=i.length;c<u;c+=1)Array.isArray(i[c])&&Ce(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Cg(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&Cg(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(c=0,u=o.length;c<u;c+=1)Sg(t,e,o[c],n);else Sg(t,e,o,n);else!t.json&&!to.call(n,i)&&to.call(e,i)&&(t.line=s||t.line,t.lineStart=a||t.lineStart,t.position=l||t.position,Ce(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete n[i];return e}x(Ro,"storeMappingPair");function Ph(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Ce(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}x(Ph,"readLineBreak");function kt(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Xi(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Er(i))for(Ph(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return n!==-1&&r!==0&&t.lineIndent<n&&zl(t,"deficient indentation"),r}x(kt,"skipSeparationSpace");function cc(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||kn(n)))}x(cc,"testDocumentSeparator");function $h(t,e){e===1?t.result+=" ":e>1&&(t.result+=Ft.repeat(`
`,e-1))}x($h,"writeFoldedLines");function UE(t,e,n){var r,i,o,s,a,l,c,u,d=t.kind,h=t.result,f;if(f=t.input.charCodeAt(t.position),kn(f)||Lo(f)||f===35||f===38||f===42||f===33||f===124||f===62||f===39||f===34||f===37||f===64||f===96||(f===63||f===45)&&(i=t.input.charCodeAt(t.position+1),kn(i)||n&&Lo(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,a=!1;f!==0;){if(f===58){if(i=t.input.charCodeAt(t.position+1),kn(i)||n&&Lo(i))break}else if(f===35){if(r=t.input.charCodeAt(t.position-1),kn(r))break}else{if(t.position===t.lineStart&&cc(t)||n&&Lo(f))break;if(Er(f))if(l=t.line,c=t.lineStart,u=t.lineIndent,kt(t,!1,-1),t.lineIndent>=e){a=!0,f=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=l,t.lineStart=c,t.lineIndent=u;break}}a&&(bi(t,o,s,!1),$h(t,t.line-l),o=s=t.position,a=!1),Xi(f)||(s=t.position+1),f=t.input.charCodeAt(++t.position)}return bi(t,o,s,!1),t.result?!0:(t.kind=d,t.result=h,!1)}x(UE,"readPlainScalar");function jE(t,e){var n,r,i;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(bi(t,r,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)r=t.position,t.position++,i=t.position;else return!0;else Er(n)?(bi(t,r,i,!0),$h(t,kt(t,!1,e)),r=i=t.position):t.position===t.lineStart&&cc(t)?Ce(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);Ce(t,"unexpected end of the stream within a single quoted scalar")}x(jE,"readSingleQuotedScalar");function qE(t,e){var n,r,i,o,s,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return bi(t,n,t.position,!0),t.position++,!0;if(a===92){if(bi(t,n,t.position,!0),a=t.input.charCodeAt(++t.position),Er(a))kt(t,!1,e);else if(a<256&&zE[a])t.result+=HE[a],t.position++;else if((s=PE(a))>0){for(i=s,o=0;i>0;i--)a=t.input.charCodeAt(++t.position),(s=BE(a))>=0?o=(o<<4)+s:Ce(t,"expected hexadecimal character");t.result+=FE(o),t.position++}else Ce(t,"unknown escape sequence");n=r=t.position}else Er(a)?(bi(t,n,r,!0),$h(t,kt(t,!1,e)),n=r=t.position):t.position===t.lineStart&&cc(t)?Ce(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}Ce(t,"unexpected end of the stream within a double quoted scalar")}x(qE,"readDoubleQuotedScalar");function VE(t,e){var n=!0,r,i,o,s=t.tag,a,l=t.anchor,c,u,d,h,f,p=Object.create(null),g,m,y,b;if(b=t.input.charCodeAt(t.position),b===91)u=93,f=!1,a=[];else if(b===123)u=125,f=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),b=t.input.charCodeAt(++t.position);b!==0;){if(kt(t,!0,e),b=t.input.charCodeAt(t.position),b===u)return t.position++,t.tag=s,t.anchor=l,t.kind=f?"mapping":"sequence",t.result=a,!0;n?b===44&&Ce(t,"expected the node content, but found ','"):Ce(t,"missed comma between flow collection entries"),m=g=y=null,d=h=!1,b===63&&(c=t.input.charCodeAt(t.position+1),kn(c)&&(d=h=!0,t.position++,kt(t,!0,e))),r=t.line,i=t.lineStart,o=t.position,Jo(t,e,zd,!1,!0),m=t.tag,g=t.result,kt(t,!0,e),b=t.input.charCodeAt(t.position),(h||t.line===r)&&b===58&&(d=!0,b=t.input.charCodeAt(++t.position),kt(t,!0,e),Jo(t,e,zd,!1,!0),y=t.result),f?Ro(t,a,p,m,g,y,r,i,o):d?a.push(Ro(t,null,p,m,g,y,r,i,o)):a.push(g),kt(t,!0,e),b=t.input.charCodeAt(t.position),b===44?(n=!0,b=t.input.charCodeAt(++t.position)):n=!1}Ce(t,"unexpected end of the stream within a flow collection")}x(VE,"readFlowCollection");function GE(t,e){var n,r,i=ip,o=!1,s=!1,a=e,l=0,c=!1,u,d;if(d=t.input.charCodeAt(t.position),d===124)r=!1;else if(d===62)r=!0;else return!1;for(t.kind="scalar",t.result="";d!==0;)if(d=t.input.charCodeAt(++t.position),d===43||d===45)ip===i?i=d===43?d1:j9:Ce(t,"repeat of a chomping mode identifier");else if((u=$E(d))>=0)u===0?Ce(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Ce(t,"repeat of an indentation width identifier"):(a=e+u-1,s=!0);else break;if(Xi(d)){do d=t.input.charCodeAt(++t.position);while(Xi(d));if(d===35)do d=t.input.charCodeAt(++t.position);while(!Er(d)&&d!==0)}for(;d!==0;){for(Ph(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!s||t.lineIndent<a)&&d===32;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>a&&(a=t.lineIndent),Er(d)){l++;continue}if(t.lineIndent<a){i===d1?t.result+=Ft.repeat(`
`,o?1+l:l):i===ip&&o&&(t.result+=`
`);break}for(r?Xi(d)?(c=!0,t.result+=Ft.repeat(`
`,o?1+l:l)):c?(c=!1,t.result+=Ft.repeat(`
`,l+1)):l===0?o&&(t.result+=" "):t.result+=Ft.repeat(`
`,l):t.result+=Ft.repeat(`
`,o?1+l:l),o=!0,s=!0,l=0,n=t.position;!Er(d)&&d!==0;)d=t.input.charCodeAt(++t.position);bi(t,n,t.position,!1)}return!0}x(GE,"readBlockScalar");function _g(t,e){var n,r=t.tag,i=t.anchor,o=[],s,a=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Ce(t,"tab characters must not be used in indentation")),!(l!==45||(s=t.input.charCodeAt(t.position+1),!kn(s))));){if(a=!0,t.position++,kt(t,!0,-1)&&t.lineIndent<=e){o.push(null),l=t.input.charCodeAt(t.position);continue}if(n=t.line,Jo(t,e,RE,!1,!0),o.push(t.result),kt(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&l!==0)Ce(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=r,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}x(_g,"readBlockSequence");function KE(t,e,n){var r,i,o,s,a,l,c=t.tag,u=t.anchor,d={},h=Object.create(null),f=null,p=null,g=null,m=!1,y=!1,b;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=d),b=t.input.charCodeAt(t.position);b!==0;){if(!m&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Ce(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),o=t.line,(b===63||b===58)&&kn(r))b===63?(m&&(Ro(t,d,h,f,p,null,s,a,l),f=p=g=null),y=!0,m=!0,i=!0):m?(m=!1,i=!0):Ce(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,b=r;else{if(s=t.line,a=t.lineStart,l=t.position,!Jo(t,n,LE,!1,!0))break;if(t.line===o){for(b=t.input.charCodeAt(t.position);Xi(b);)b=t.input.charCodeAt(++t.position);if(b===58)b=t.input.charCodeAt(++t.position),kn(b)||Ce(t,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(Ro(t,d,h,f,p,null,s,a,l),f=p=g=null),y=!0,m=!1,i=!1,f=t.tag,p=t.result;else if(y)Ce(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=c,t.anchor=u,!0}else if(y)Ce(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=c,t.anchor=u,!0}if((t.line===o||t.lineIndent>e)&&(m&&(s=t.line,a=t.lineStart,l=t.position),Jo(t,e,Hd,!0,i)&&(m?p=t.result:g=t.result),m||(Ro(t,d,h,f,p,g,s,a,l),f=p=g=null),kt(t,!0,-1),b=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&b!==0)Ce(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return m&&Ro(t,d,h,f,p,null,s,a,l),y&&(t.tag=c,t.anchor=u,t.kind="mapping",t.result=d),y}x(KE,"readBlockMapping");function YE(t){var e,n=!1,r=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&Ce(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(n=!0,s=t.input.charCodeAt(++t.position)):s===33?(r=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,n){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):Ce(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!kn(s);)s===33&&(r?Ce(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),IE.test(i)||Ce(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),G9.test(o)&&Ce(t,"tag suffix cannot contain flow indicator characters")}o&&!DE.test(o)&&Ce(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{Ce(t,"tag name is malformed: "+o)}return n?t.tag=o:to.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:Ce(t,'undeclared tag handle "'+i+'"'),!0}x(YE,"readTagProperty");function XE(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&Ce(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!kn(n)&&!Lo(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Ce(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}x(XE,"readAnchorProperty");function ZE(t){var e,n,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!kn(r)&&!Lo(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Ce(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),to.call(t.anchorMap,n)||Ce(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],kt(t,!0,-1),!0}x(ZE,"readAlias");function Jo(t,e,n,r,i){var o,s,a,l=1,c=!1,u=!1,d,h,f,p,g,m;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=a=Hd===n||RE===n,r&&kt(t,!0,-1)&&(c=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;YE(t)||XE(t);)kt(t,!0,-1)?(c=!0,a=o,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):a=!1;if(a&&(a=c||i),(l===1||Hd===n)&&(zd===n||LE===n?g=e:g=e+1,m=t.position-t.lineStart,l===1?a&&(_g(t,m)||KE(t,m,g))||VE(t,g)?u=!0:(s&&GE(t,g)||jE(t,g)||qE(t,g)?u=!0:ZE(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&Ce(t,"alias node should not have any properties")):UE(t,g,zd===n)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(u=a&&_g(t,m))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Ce(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,h=t.implicitTypes.length;d<h;d+=1)if(p=t.implicitTypes[d],p.resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(to.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,f=t.typeMap.multi[t.kind||"fallback"],d=0,h=f.length;d<h;d+=1)if(t.tag.slice(0,f[d].tag.length)===f[d].tag){p=f[d];break}p||Ce(t,"unknown tag !<"+t.tag+">"),t.result!==null&&p.kind!==t.kind&&Ce(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Ce(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}x(Jo,"composeNode");function JE(t){var e=t.position,n,r,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(kt(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),n=t.position;s!==0&&!kn(s);)s=t.input.charCodeAt(++t.position);for(r=t.input.slice(n,t.position),i=[],r.length<1&&Ce(t,"directive name must not be less than one character in length");s!==0;){for(;Xi(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Er(s));break}if(Er(s))break;for(n=t.position;s!==0&&!kn(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(n,t.position))}s!==0&&Ph(t),to.call(h1,r)?h1[r](t,r,i):zl(t,'unknown document directive "'+r+'"')}if(kt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,kt(t,!0,-1)):o&&Ce(t,"directives end mark is expected"),Jo(t,t.lineIndent-1,Hd,!1,!0),kt(t,!0,-1),t.checkLineBreaks&&V9.test(t.input.slice(e,t.position))&&zl(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&cc(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,kt(t,!0,-1));return}if(t.position<t.length-1)Ce(t,"end of the stream or a document separator is expected");else return}x(JE,"readDocument");function Py(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new WE(t,e),r=t.indexOf("\0");for(r!==-1&&(n.position=r,Ce(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)JE(n);return n.documents}x(Py,"loadDocuments");function K9(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var r=Py(t,n);if(typeof e!="function")return r;for(var i=0,o=r.length;i<o;i+=1)e(r[i])}x(K9,"loadAll$1");function QE(t,e){var n=Py(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new In("expected a single document in the stream, but found more")}}x(QE,"load$1");var Y9=QE,X9={load:Y9},e2=Object.prototype.toString,t2=Object.prototype.hasOwnProperty,$y=65279,Z9=9,Hl=10,J9=13,Q9=32,e8=33,t8=34,Eg=35,n8=37,r8=38,i8=39,o8=42,n2=44,s8=45,Wd=58,a8=61,l8=62,c8=63,u8=64,r2=91,i2=93,d8=96,o2=123,h8=124,s2=125,xn={};xn[0]="\\0";xn[7]="\\a";xn[8]="\\b";xn[9]="\\t";xn[10]="\\n";xn[11]="\\v";xn[12]="\\f";xn[13]="\\r";xn[27]="\\e";xn[34]='\\"';xn[92]="\\\\";xn[133]="\\N";xn[160]="\\_";xn[8232]="\\L";xn[8233]="\\P";var f8=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],p8=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function a2(t,e){var n,r,i,o,s,a,l;if(e===null)return{};for(n={},r=Object.keys(e),i=0,o=r.length;i<o;i+=1)s=r[i],a=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),l=t.compiledTypeMap.fallback[s],l&&t2.call(l.styleAliases,a)&&(a=l.styleAliases[a]),n[s]=a;return n}x(a2,"compileStyleMap");function l2(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else if(t<=4294967295)n="U",r=8;else throw new In("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Ft.repeat("0",r-e.length)+e}x(l2,"encodeHex");var g8=1,Wl=2;function c2(t){this.schema=t.schema||OE,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Ft.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=a2(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Wl:g8,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}x(c2,"State");function Tg(t,e){for(var n=Ft.repeat(" ",e),r=0,i=-1,o="",s,a=t.length;r<a;)i=t.indexOf(`
`,r),i===-1?(s=t.slice(r),r=a):(s=t.slice(r,i+1),r=i+1),s.length&&s!==`
`&&(o+=n),o+=s;return o}x(Tg,"indentString");function Ud(t,e){return`
`+Ft.repeat(" ",t.indent*e)}x(Ud,"generateNextLine");function u2(t,e){var n,r,i;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(i=t.implicitTypes[n],i.resolve(e))return!0;return!1}x(u2,"testImplicitResolving");function Ul(t){return t===Q9||t===Z9}x(Ul,"isWhitespace");function ca(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==$y||65536<=t&&t<=1114111}x(ca,"isPrintable");function Mg(t){return ca(t)&&t!==$y&&t!==J9&&t!==Hl}x(Mg,"isNsCharOrWhitespace");function Ag(t,e,n){var r=Mg(t),i=r&&!Ul(t);return(n?r:r&&t!==n2&&t!==r2&&t!==i2&&t!==o2&&t!==s2)&&t!==Eg&&!(e===Wd&&!i)||Mg(e)&&!Ul(e)&&t===Eg||e===Wd&&i}x(Ag,"isPlainSafe");function d2(t){return ca(t)&&t!==$y&&!Ul(t)&&t!==s8&&t!==c8&&t!==Wd&&t!==n2&&t!==r2&&t!==i2&&t!==o2&&t!==s2&&t!==Eg&&t!==r8&&t!==o8&&t!==e8&&t!==h8&&t!==a8&&t!==l8&&t!==i8&&t!==t8&&t!==n8&&t!==u8&&t!==d8}x(d2,"isPlainSafeFirst");function h2(t){return!Ul(t)&&t!==Wd}x(h2,"isPlainSafeLast");function Ps(t,e){var n=t.charCodeAt(e),r;return n>=55296&&n<=56319&&e+1<t.length&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}x(Ps,"codePointAt");function Fy(t){var e=/^\n* /;return e.test(t)}x(Fy,"needIndentIndicator");var f2=1,Ng=2,p2=3,g2=4,Os=5;function m2(t,e,n,r,i,o,s,a){var l,c=0,u=null,d=!1,h=!1,f=r!==-1,p=-1,g=d2(Ps(t,0))&&h2(Ps(t,t.length-1));if(e||s)for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=Ps(t,l),!ca(c))return Os;g=g&&Ag(c,u,a),u=c}else{for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=Ps(t,l),c===Hl)d=!0,f&&(h=h||l-p-1>r&&t[p+1]!==" ",p=l);else if(!ca(c))return Os;g=g&&Ag(c,u,a),u=c}h=h||f&&l-p-1>r&&t[p+1]!==" "}return!d&&!h?g&&!s&&!i(t)?f2:o===Wl?Os:Ng:n>9&&Fy(t)?Os:s?o===Wl?Os:Ng:h?g2:p2}x(m2,"chooseScalarStyle");function y2(t,e,n,r,i){t.dump=(function(){if(e.length===0)return t.quotingType===Wl?'""':"''";if(!t.noCompatMode&&(f8.indexOf(e)!==-1||p8.test(e)))return t.quotingType===Wl?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,n),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),a=r||t.flowLevel>-1&&n>=t.flowLevel;function l(c){return u2(t,c)}switch(x(l,"testAmbiguity"),m2(e,a,t.indent,s,l,t.quotingType,t.forceQuotes&&!r,i)){case f2:return e;case Ng:return"'"+e.replace(/'/g,"''")+"'";case p2:return"|"+Og(e,t.indent)+Lg(Tg(e,o));case g2:return">"+Og(e,t.indent)+Lg(Tg(b2(e,s),o));case Os:return'"'+x2(e)+'"';default:throw new In("impossible error: invalid scalar style")}})()}x(y2,"writeScalar");function Og(t,e){var n=Fy(t)?String(e):"",r=t[t.length-1]===`
`,i=r&&(t[t.length-2]===`
`||t===`
`),o=i?"+":r?"":"-";return n+o+`
`}x(Og,"blockHeader");function Lg(t){return t[t.length-1]===`
`?t.slice(0,-1):t}x(Lg,"dropEndingNewline");function b2(t,e){for(var n=/(\n+)([^\n]*)/g,r=(function(){var c=t.indexOf(`
`);return c=c!==-1?c:t.length,n.lastIndex=c,Rg(t.slice(0,c),e)})(),i=t[0]===`
`||t[0]===" ",o,s;s=n.exec(t);){var a=s[1],l=s[2];o=l[0]===" ",r+=a+(!i&&!o&&l!==""?`
`:"")+Rg(l,e),i=o}return r}x(b2,"foldString");function Rg(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,r,i=0,o,s=0,a=0,l="";r=n.exec(t);)a=r.index,a-i>e&&(o=s>i?s:a,l+=`
`+t.slice(i,o),i=o+1),s=a;return l+=`
`,t.length-i>e&&s>i?l+=t.slice(i,s)+`
`+t.slice(s+1):l+=t.slice(i),l.slice(1)}x(Rg,"foldLine");function x2(t){for(var e="",n=0,r,i=0;i<t.length;n>=65536?i+=2:i++)n=Ps(t,i),r=xn[n],!r&&ca(n)?(e+=t[i],n>=65536&&(e+=t[i+1])):e+=r||l2(n);return e}x(x2,"escapeString");function v2(t,e,n){var r="",i=t.tag,o,s,a;for(o=0,s=n.length;o<s;o+=1)a=n[o],t.replacer&&(a=t.replacer.call(n,String(o),a)),(Zr(t,e,a,!1,!1)||typeof a>"u"&&Zr(t,e,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=i,t.dump="["+r+"]"}x(v2,"writeFlowSequence");function Ig(t,e,n,r){var i="",o=t.tag,s,a,l;for(s=0,a=n.length;s<a;s+=1)l=n[s],t.replacer&&(l=t.replacer.call(n,String(s),l)),(Zr(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&Zr(t,e+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=Ud(t,e)),t.dump&&Hl===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}x(Ig,"writeBlockSequence");function w2(t,e,n){var r="",i=t.tag,o=Object.keys(n),s,a,l,c,u;for(s=0,a=o.length;s<a;s+=1)u="",r!==""&&(u+=", "),t.condenseFlow&&(u+='"'),l=o[s],c=n[l],t.replacer&&(c=t.replacer.call(n,l,c)),Zr(t,e,l,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Zr(t,e,c,!1,!1)&&(u+=t.dump,r+=u));t.tag=i,t.dump="{"+r+"}"}x(w2,"writeFlowMapping");function C2(t,e,n,r){var i="",o=t.tag,s=Object.keys(n),a,l,c,u,d,h;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new In("sortKeys must be a boolean or a function");for(a=0,l=s.length;a<l;a+=1)h="",(!r||i!=="")&&(h+=Ud(t,e)),c=s[a],u=n[c],t.replacer&&(u=t.replacer.call(n,c,u)),Zr(t,e+1,c,!0,!0,!0)&&(d=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,d&&(t.dump&&Hl===t.dump.charCodeAt(0)?h+="?":h+="? "),h+=t.dump,d&&(h+=Ud(t,e)),Zr(t,e+1,u,!0,d)&&(t.dump&&Hl===t.dump.charCodeAt(0)?h+=":":h+=": ",h+=t.dump,i+=h));t.tag=o,t.dump=i||"{}"}x(C2,"writeBlockMapping");function Dg(t,e,n){var r,i,o,s,a,l;for(i=n?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(a=i[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(n?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(l=t.styleMap[a.tag]||a.defaultStyle,e2.call(a.represent)==="[object Function]")r=a.represent(e,l);else if(t2.call(a.represent,l))r=a.represent[l](e,l);else throw new In("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');t.dump=r}return!0}return!1}x(Dg,"detectType");function Zr(t,e,n,r,i,o,s){t.tag=null,t.dump=n,Dg(t,n,!1)||Dg(t,n,!0);var a=e2.call(t.dump),l=r,c;r&&(r=t.flowLevel<0||t.flowLevel>e);var u=a==="[object Object]"||a==="[object Array]",d,h;if(u&&(d=t.duplicates.indexOf(n),h=d!==-1),(t.tag!==null&&t.tag!=="?"||h||t.indent!==2&&e>0)&&(i=!1),h&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(u&&h&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),a==="[object Object]")r&&Object.keys(t.dump).length!==0?(C2(t,e,t.dump,i),h&&(t.dump="&ref_"+d+t.dump)):(w2(t,e,t.dump),h&&(t.dump="&ref_"+d+" "+t.dump));else if(a==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?Ig(t,e-1,t.dump,i):Ig(t,e,t.dump,i),h&&(t.dump="&ref_"+d+t.dump)):(v2(t,e,t.dump),h&&(t.dump="&ref_"+d+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&y2(t,t.dump,e,o,l);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new In("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(c=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",t.dump=c+" "+t.dump)}return!0}x(Zr,"writeNode");function k2(t,e){var n=[],r=[],i,o;for(jd(t,n,r),i=0,o=r.length;i<o;i+=1)e.duplicates.push(n[r[i]]);e.usedDuplicates=new Array(o)}x(k2,"getDuplicateReferences");function jd(t,e,n){var r,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)jd(t[i],e,n);else for(r=Object.keys(t),i=0,o=r.length;i<o;i+=1)jd(t[r[i]],e,n)}x(jd,"inspectNode");function m8(t,e){e=e||{};var n=new c2(e);n.noRefs||k2(t,n);var r=t;return n.replacer&&(r=n.replacer.call({"":r},"",r)),Zr(n,0,r,!0,!0)?n.dump+`
`:""}x(m8,"dump$1");function y8(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}x(y8,"renamed");var b8=pE,x8=X9.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var dn={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},f1={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function Ja(t,e){if(t===void 0||e===void 0)return{angle:0,deltaX:0,deltaY:0};t=yt(t),e=yt(e);const[n,r]=[t.x,t.y],[i,o]=[e.x,e.y],s=i-n,a=o-r;return{angle:Math.atan(a/s),deltaX:s,deltaY:a}}x(Ja,"calculateDeltaAndAngle");var yt=x(t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,"pointTransformer"),v8=x(t=>({x:x(function(e,n,r){let i=0;const o=yt(r[0]).x<yt(r[r.length-1]).x?"left":"right";if(n===0&&Object.hasOwn(dn,t.arrowTypeStart)){const{angle:f,deltaX:p}=Ja(r[0],r[1]);i=dn[t.arrowTypeStart]*Math.cos(f)*(p>=0?1:-1)}else if(n===r.length-1&&Object.hasOwn(dn,t.arrowTypeEnd)){const{angle:f,deltaX:p}=Ja(r[r.length-1],r[r.length-2]);i=dn[t.arrowTypeEnd]*Math.cos(f)*(p>=0?1:-1)}const s=Math.abs(yt(e).x-yt(r[r.length-1]).x),a=Math.abs(yt(e).y-yt(r[r.length-1]).y),l=Math.abs(yt(e).x-yt(r[0]).x),c=Math.abs(yt(e).y-yt(r[0]).y),u=dn[t.arrowTypeStart],d=dn[t.arrowTypeEnd],h=1;if(s<d&&s>0&&a<d){let f=d+h-s;f*=o==="right"?-1:1,i-=f}if(l<u&&l>0&&c<u){let f=u+h-l;f*=o==="right"?-1:1,i+=f}return yt(e).x+i},"x"),y:x(function(e,n,r){let i=0;const o=yt(r[0]).y<yt(r[r.length-1]).y?"down":"up";if(n===0&&Object.hasOwn(dn,t.arrowTypeStart)){const{angle:f,deltaY:p}=Ja(r[0],r[1]);i=dn[t.arrowTypeStart]*Math.abs(Math.sin(f))*(p>=0?1:-1)}else if(n===r.length-1&&Object.hasOwn(dn,t.arrowTypeEnd)){const{angle:f,deltaY:p}=Ja(r[r.length-1],r[r.length-2]);i=dn[t.arrowTypeEnd]*Math.abs(Math.sin(f))*(p>=0?1:-1)}const s=Math.abs(yt(e).y-yt(r[r.length-1]).y),a=Math.abs(yt(e).x-yt(r[r.length-1]).x),l=Math.abs(yt(e).y-yt(r[0]).y),c=Math.abs(yt(e).x-yt(r[0]).x),u=dn[t.arrowTypeStart],d=dn[t.arrowTypeEnd],h=1;if(s<d&&s>0&&a<d){let f=d+h-s;f*=o==="up"?-1:1,i-=f}if(l<u&&l>0&&c<u){let f=u+h-l;f*=o==="up"?-1:1,i+=f}return yt(e).y+i},"y")}),"getLineFunctionsWithOffset"),zy=x(({flowchart:t})=>{var i,o;const e=((i=t==null?void 0:t.subGraphTitleMargin)==null?void 0:i.top)??0,n=((o=t==null?void 0:t.subGraphTitleMargin)==null?void 0:o.bottom)??0,r=e+n;return{subGraphTitleTopMargin:e,subGraphTitleBottomMargin:n,subGraphTitleTotalMargin:r}},"getSubGraphTitleMargins"),w8=x(t=>{const{handDrawnSeed:e}=tt();return{fill:t,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:t,seed:e}},"solidStateFill"),xa=x(t=>{const e=C8([...t.cssCompiledStyles||[],...t.cssStyles||[],...t.labelStyle||[]]);return{stylesMap:e,stylesArray:[...e]}},"compileStyles"),C8=x(t=>{const e=new Map;return t.forEach(n=>{const[r,i]=n.split(":");e.set(r.trim(),i==null?void 0:i.trim())}),e},"styles2Map"),S2=x(t=>t==="color"||t==="font-size"||t==="font-family"||t==="font-weight"||t==="font-style"||t==="text-decoration"||t==="text-align"||t==="text-transform"||t==="line-height"||t==="letter-spacing"||t==="word-spacing"||t==="text-shadow"||t==="text-overflow"||t==="white-space"||t==="word-wrap"||t==="word-break"||t==="overflow-wrap"||t==="hyphens","isLabelStyle"),ye=x(t=>{const{stylesArray:e}=xa(t),n=[],r=[],i=[],o=[];return e.forEach(s=>{const a=s[0];S2(a)?n.push(s.join(":")+" !important"):(r.push(s.join(":")+" !important"),a.includes("stroke")&&i.push(s.join(":")+" !important"),a==="fill"&&o.push(s.join(":")+" !important"))}),{labelStyles:n.join(";"),nodeStyles:r.join(";"),stylesArray:e,borderStyles:i,backgroundStyles:o}},"styles2String"),me=x((t,e)=>{var l;const{themeVariables:n,handDrawnSeed:r}=tt(),{nodeBorder:i,mainBkg:o}=n,{stylesMap:s}=xa(t);return Object.assign({roughness:.7,fill:s.get("fill")||o,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:s.get("stroke")||i,seed:r,strokeWidth:((l=s.get("stroke-width"))==null?void 0:l.replace("px",""))||1.3,fillLineDash:[0,0],strokeLineDash:k8(s.get("stroke-dasharray"))},e)},"userNodeOverrides"),k8=x(t=>{if(!t)return[0,0];const e=t.trim().split(/\s+/).map(Number);if(e.length===1){const i=isNaN(e[0])?0:e[0];return[i,i]}const n=isNaN(e[0])?0:e[0],r=isNaN(e[1])?0:e[1];return[n,r]},"getStrokeDashArray"),Ba={},Pt={},p1;function S8(){return p1||(p1=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.BLANK_URL=Pt.relativeFirstCharacters=Pt.whitespaceEscapeCharsRegex=Pt.urlSchemeRegex=Pt.ctrlCharactersRegex=Pt.htmlCtrlEntityRegex=Pt.htmlEntitiesRegex=Pt.invalidProtocolRegex=void 0,Pt.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,Pt.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,Pt.htmlCtrlEntityRegex=/&(newline|tab);/gi,Pt.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Pt.urlSchemeRegex=/^.+(:|&colon;)/gim,Pt.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,Pt.relativeFirstCharacters=[".","/"],Pt.BLANK_URL="about:blank"),Pt}var g1;function _8(){if(g1)return Ba;g1=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.sanitizeUrl=void 0;var t=S8();function e(s){return t.relativeFirstCharacters.indexOf(s[0])>-1}function n(s){var a=s.replace(t.ctrlCharactersRegex,"");return a.replace(t.htmlEntitiesRegex,function(l,c){return String.fromCharCode(c)})}function r(s){return URL.canParse(s)}function i(s){try{return decodeURIComponent(s)}catch{return s}}function o(s){if(!s)return t.BLANK_URL;var a,l=i(s.trim());do l=n(l).replace(t.htmlCtrlEntityRegex,"").replace(t.ctrlCharactersRegex,"").replace(t.whitespaceEscapeCharsRegex,"").trim(),l=i(l),a=l.match(t.ctrlCharactersRegex)||l.match(t.htmlEntitiesRegex)||l.match(t.htmlCtrlEntityRegex)||l.match(t.whitespaceEscapeCharsRegex);while(a&&a.length>0);var c=l;if(!c)return t.BLANK_URL;if(e(c))return c;var u=c.trimStart(),d=u.match(t.urlSchemeRegex);if(!d)return c;var h=d[0].toLowerCase().trim();if(t.invalidProtocolRegex.test(h))return t.BLANK_URL;var f=u.replace(/\\/g,"/");if(h==="mailto:"||h.includes("://"))return f;if(h==="http:"||h==="https:"){if(!r(f))return t.BLANK_URL;var p=new URL(f);return p.protocol=p.protocol.toLowerCase(),p.hostname=p.hostname.toLowerCase(),p.toString()}return f}return Ba.sanitizeUrl=o,Ba}var E8=_8(),_2=typeof global=="object"&&global&&global.Object===Object&&global,T8=typeof self=="object"&&self&&self.Object===Object&&self,ei=_2||T8||Function("return this")(),qd=ei.Symbol,E2=Object.prototype,M8=E2.hasOwnProperty,A8=E2.toString,Pa=qd?qd.toStringTag:void 0;function N8(t){var e=M8.call(t,Pa),n=t[Pa];try{t[Pa]=void 0;var r=!0}catch{}var i=A8.call(t);return r&&(e?t[Pa]=n:delete t[Pa]),i}var O8=Object.prototype,L8=O8.toString;function R8(t){return L8.call(t)}var I8="[object Null]",D8="[object Undefined]",m1=qd?qd.toStringTag:void 0;function va(t){return t==null?t===void 0?D8:I8:m1&&m1 in Object(t)?N8(t):R8(t)}function cs(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var B8="[object AsyncFunction]",P8="[object Function]",$8="[object GeneratorFunction]",F8="[object Proxy]";function Hy(t){if(!cs(t))return!1;var e=va(t);return e==P8||e==$8||e==B8||e==F8}var op=ei["__core-js_shared__"],y1=(function(){var t=/[^.]+$/.exec(op&&op.keys&&op.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function z8(t){return!!y1&&y1 in t}var H8=Function.prototype,W8=H8.toString;function us(t){if(t!=null){try{return W8.call(t)}catch{}try{return t+""}catch{}}return""}var U8=/[\\^$.*+?()[\]{}|]/g,j8=/^\[object .+?Constructor\]$/,q8=Function.prototype,V8=Object.prototype,G8=q8.toString,K8=V8.hasOwnProperty,Y8=RegExp("^"+G8.call(K8).replace(U8,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function X8(t){if(!cs(t)||z8(t))return!1;var e=Hy(t)?Y8:j8;return e.test(us(t))}function Z8(t,e){return t==null?void 0:t[e]}function ds(t,e){var n=Z8(t,e);return X8(n)?n:void 0}var jl=ds(Object,"create");function J8(){this.__data__=jl?jl(null):{},this.size=0}function Q8(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var eW="__lodash_hash_undefined__",tW=Object.prototype,nW=tW.hasOwnProperty;function rW(t){var e=this.__data__;if(jl){var n=e[t];return n===eW?void 0:n}return nW.call(e,t)?e[t]:void 0}var iW=Object.prototype,oW=iW.hasOwnProperty;function sW(t){var e=this.__data__;return jl?e[t]!==void 0:oW.call(e,t)}var aW="__lodash_hash_undefined__";function lW(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=jl&&e===void 0?aW:e,this}function Qo(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Qo.prototype.clear=J8;Qo.prototype.delete=Q8;Qo.prototype.get=rW;Qo.prototype.has=sW;Qo.prototype.set=lW;function cW(){this.__data__=[],this.size=0}function Fh(t,e){return t===e||t!==t&&e!==e}function zh(t,e){for(var n=t.length;n--;)if(Fh(t[n][0],e))return n;return-1}var uW=Array.prototype,dW=uW.splice;function hW(t){var e=this.__data__,n=zh(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():dW.call(e,n,1),--this.size,!0}function fW(t){var e=this.__data__,n=zh(e,t);return n<0?void 0:e[n][1]}function pW(t){return zh(this.__data__,t)>-1}function gW(t,e){var n=this.__data__,r=zh(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Ei(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ei.prototype.clear=cW;Ei.prototype.delete=hW;Ei.prototype.get=fW;Ei.prototype.has=pW;Ei.prototype.set=gW;var ql=ds(ei,"Map");function mW(){this.size=0,this.__data__={hash:new Qo,map:new(ql||Ei),string:new Qo}}function yW(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Hh(t,e){var n=t.__data__;return yW(e)?n[typeof e=="string"?"string":"hash"]:n.map}function bW(t){var e=Hh(this,t).delete(t);return this.size-=e?1:0,e}function xW(t){return Hh(this,t).get(t)}function vW(t){return Hh(this,t).has(t)}function wW(t,e){var n=Hh(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function ao(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ao.prototype.clear=mW;ao.prototype.delete=bW;ao.prototype.get=xW;ao.prototype.has=vW;ao.prototype.set=wW;var CW="Expected a function";function uc(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(CW);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(uc.Cache||ao),n}uc.Cache=ao;function kW(){this.__data__=new Ei,this.size=0}function SW(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function _W(t){return this.__data__.get(t)}function EW(t){return this.__data__.has(t)}var TW=200;function MW(t,e){var n=this.__data__;if(n instanceof Ei){var r=n.__data__;if(!ql||r.length<TW-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new ao(r)}return n.set(t,e),this.size=n.size,this}function wa(t){var e=this.__data__=new Ei(t);this.size=e.size}wa.prototype.clear=kW;wa.prototype.delete=SW;wa.prototype.get=_W;wa.prototype.has=EW;wa.prototype.set=MW;var Vd=(function(){try{var t=ds(Object,"defineProperty");return t({},"",{}),t}catch{}})();function Wy(t,e,n){e=="__proto__"&&Vd?Vd(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Bg(t,e,n){(n!==void 0&&!Fh(t[e],n)||n===void 0&&!(e in t))&&Wy(t,e,n)}function AW(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var l=s[++i];if(n(o[l],l,o)===!1)break}return e}}var NW=AW(),T2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,b1=T2&&typeof module=="object"&&module&&!module.nodeType&&module,OW=b1&&b1.exports===T2,x1=OW?ei.Buffer:void 0,v1=x1?x1.allocUnsafe:void 0;function LW(t,e){if(e)return t.slice();var n=t.length,r=v1?v1(n):new t.constructor(n);return t.copy(r),r}var w1=ei.Uint8Array;function RW(t){var e=new t.constructor(t.byteLength);return new w1(e).set(new w1(t)),e}function IW(t,e){var n=e?RW(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function DW(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var C1=Object.create,BW=(function(){function t(){}return function(e){if(!cs(e))return{};if(C1)return C1(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}})();function M2(t,e){return function(n){return t(e(n))}}var A2=M2(Object.getPrototypeOf,Object),PW=Object.prototype;function Wh(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||PW;return t===n}function $W(t){return typeof t.constructor=="function"&&!Wh(t)?BW(A2(t)):{}}function dc(t){return t!=null&&typeof t=="object"}var FW="[object Arguments]";function k1(t){return dc(t)&&va(t)==FW}var N2=Object.prototype,zW=N2.hasOwnProperty,HW=N2.propertyIsEnumerable,Gd=k1((function(){return arguments})())?k1:function(t){return dc(t)&&zW.call(t,"callee")&&!HW.call(t,"callee")},Kd=Array.isArray,WW=9007199254740991;function O2(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=WW}function Uh(t){return t!=null&&O2(t.length)&&!Hy(t)}function UW(t){return dc(t)&&Uh(t)}function jW(){return!1}var L2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,S1=L2&&typeof module=="object"&&module&&!module.nodeType&&module,qW=S1&&S1.exports===L2,_1=qW?ei.Buffer:void 0,VW=_1?_1.isBuffer:void 0,Uy=VW||jW,GW="[object Object]",KW=Function.prototype,YW=Object.prototype,R2=KW.toString,XW=YW.hasOwnProperty,ZW=R2.call(Object);function JW(t){if(!dc(t)||va(t)!=GW)return!1;var e=A2(t);if(e===null)return!0;var n=XW.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&R2.call(n)==ZW}var QW="[object Arguments]",e7="[object Array]",t7="[object Boolean]",n7="[object Date]",r7="[object Error]",i7="[object Function]",o7="[object Map]",s7="[object Number]",a7="[object Object]",l7="[object RegExp]",c7="[object Set]",u7="[object String]",d7="[object WeakMap]",h7="[object ArrayBuffer]",f7="[object DataView]",p7="[object Float32Array]",g7="[object Float64Array]",m7="[object Int8Array]",y7="[object Int16Array]",b7="[object Int32Array]",x7="[object Uint8Array]",v7="[object Uint8ClampedArray]",w7="[object Uint16Array]",C7="[object Uint32Array]",gt={};gt[p7]=gt[g7]=gt[m7]=gt[y7]=gt[b7]=gt[x7]=gt[v7]=gt[w7]=gt[C7]=!0;gt[QW]=gt[e7]=gt[h7]=gt[t7]=gt[f7]=gt[n7]=gt[r7]=gt[i7]=gt[o7]=gt[s7]=gt[a7]=gt[l7]=gt[c7]=gt[u7]=gt[d7]=!1;function k7(t){return dc(t)&&O2(t.length)&&!!gt[va(t)]}function S7(t){return function(e){return t(e)}}var I2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,yl=I2&&typeof module=="object"&&module&&!module.nodeType&&module,_7=yl&&yl.exports===I2,sp=_7&&_2.process,E1=(function(){try{var t=yl&&yl.require&&yl.require("util").types;return t||sp&&sp.binding&&sp.binding("util")}catch{}})(),T1=E1&&E1.isTypedArray,jy=T1?S7(T1):k7;function Pg(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var E7=Object.prototype,T7=E7.hasOwnProperty;function M7(t,e,n){var r=t[e];(!(T7.call(t,e)&&Fh(r,n))||n===void 0&&!(e in t))&&Wy(t,e,n)}function A7(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=void 0;l===void 0&&(l=t[a]),i?Wy(n,a,l):M7(n,a,l)}return n}function N7(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var O7=9007199254740991,L7=/^(?:0|[1-9]\d*)$/;function D2(t,e){var n=typeof t;return e=e??O7,!!e&&(n=="number"||n!="symbol"&&L7.test(t))&&t>-1&&t%1==0&&t<e}var R7=Object.prototype,I7=R7.hasOwnProperty;function D7(t,e){var n=Kd(t),r=!n&&Gd(t),i=!n&&!r&&Uy(t),o=!n&&!r&&!i&&jy(t),s=n||r||i||o,a=s?N7(t.length,String):[],l=a.length;for(var c in t)(e||I7.call(t,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||D2(c,l)))&&a.push(c);return a}function B7(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var P7=Object.prototype,$7=P7.hasOwnProperty;function F7(t){if(!cs(t))return B7(t);var e=Wh(t),n=[];for(var r in t)r=="constructor"&&(e||!$7.call(t,r))||n.push(r);return n}function B2(t){return Uh(t)?D7(t,!0):F7(t)}function z7(t){return A7(t,B2(t))}function H7(t,e,n,r,i,o,s){var a=Pg(t,n),l=Pg(e,n),c=s.get(l);if(c){Bg(t,n,c);return}var u=o?o(a,l,n+"",t,e,s):void 0,d=u===void 0;if(d){var h=Kd(l),f=!h&&Uy(l),p=!h&&!f&&jy(l);u=l,h||f||p?Kd(a)?u=a:UW(a)?u=DW(a):f?(d=!1,u=LW(l,!0)):p?(d=!1,u=IW(l,!0)):u=[]:JW(l)||Gd(l)?(u=a,Gd(a)?u=z7(a):(!cs(a)||Hy(a))&&(u=$W(l))):d=!1}d&&(s.set(l,u),i(u,l,r,o,s),s.delete(l)),Bg(t,n,u)}function P2(t,e,n,r,i){t!==e&&NW(e,function(o,s){if(i||(i=new wa),cs(o))H7(t,e,s,n,P2,r,i);else{var a=r?r(Pg(t,s),o,s+"",t,e,i):void 0;a===void 0&&(a=o),Bg(t,s,a)}},B2)}function $2(t){return t}function W7(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var M1=Math.max;function U7(t,e,n){return e=M1(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=M1(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),W7(t,this,a)}}function j7(t){return function(){return t}}var q7=Vd?function(t,e){return Vd(t,"toString",{configurable:!0,enumerable:!1,value:j7(e),writable:!0})}:$2,V7=800,G7=16,K7=Date.now;function Y7(t){var e=0,n=0;return function(){var r=K7(),i=G7-(r-n);if(n=r,i>0){if(++e>=V7)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var X7=Y7(q7);function Z7(t,e){return X7(U7(t,e,$2),t+"")}function J7(t,e,n){if(!cs(n))return!1;var r=typeof e;return(r=="number"?Uh(n)&&D2(e,n.length):r=="string"&&e in n)?Fh(n[e],t):!1}function Q7(t){return Z7(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=t.length>3&&typeof o=="function"?(i--,o):void 0,s&&J7(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,o)}return e})}var eU=Q7(function(t,e,n){P2(t,e,n)}),tU="",nU={curveBasis:Cu,curveBasisClosed:i9,curveBasisOpen:o9,curveBumpX:k_,curveBumpY:S_,curveBundle:s9,curveCardinalClosed:a9,curveCardinalOpen:l9,curveCardinal:M_,curveCatmullRomClosed:c9,curveCatmullRomOpen:u9,curveCatmullRom:N_,curveLinear:Dd,curveLinearClosed:d9,curveMonotoneX:B_,curveMonotoneY:P_,curveNatural:F_,curveStep:z_,curveStepAfter:W_,curveStepBefore:H_},rU=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,iU=x(function(t,e){const n=F2(t,/(?:init\b)|(?:initialize\b)/);let r={};if(Array.isArray(n)){const s=n.map(a=>a.args);Sd(s),r=$t(r,[...s])}else r=n.args;if(!r)return;let i=py(t,e);const o="config";return r[o]!==void 0&&(i==="flowchart-v2"&&(i="flowchart"),r[i]=r[o],delete r[o]),r},"detectInit"),F2=x(function(t,e=null){var n,r;try{const i=new RegExp(`[%]{2}(?![{]${rU.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(i,"").replace(/'/gm,'"'),G.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${t}`);let o;const s=[];for(;(o=gl.exec(t))!==null;)if(o.index===gl.lastIndex&&gl.lastIndex++,o&&!e||e&&((n=o[1])!=null&&n.match(e))||e&&((r=o[2])!=null&&r.match(e))){const a=o[1]?o[1]:o[2],l=o[3]?o[3].trim():o[4]?JSON.parse(o[4].trim()):null;s.push({type:a,args:l})}return s.length===0?{type:t,args:null}:s.length===1?s[0]:s}catch(i){return G.error(`ERROR: ${i.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}},"detectDirective"),oU=x(function(t){return t.replace(gl,"")},"removeDirectives"),sU=x(function(t,e){for(const[n,r]of e.entries())if(r.match(t))return n;return-1},"isSubstringInArray");function qy(t,e){if(!t)return e;const n=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return nU[n]??e}x(qy,"interpolateToCurve");function z2(t,e){const n=t.trim();if(n)return e.securityLevel!=="loose"?E8.sanitizeUrl(n):n}x(z2,"formatUrl");var aU=x((t,...e)=>{const n=t.split("."),r=n.length-1,i=n[r];let o=window;for(let s=0;s<r;s++)if(o=o[n[s]],!o){G.error(`Function name: ${t} not found in window`);return}o[i](...e)},"runFunc");function Vy(t,e){return!t||!e?0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}x(Vy,"distance");function H2(t){let e,n=0;t.forEach(i=>{n+=Vy(i,e),e=i});const r=n/2;return Gy(t,r)}x(H2,"traverseEdge");function W2(t){return t.length===1?t[0]:H2(t)}x(W2,"calcLabelPosition");var A1=x((t,e=2)=>{const n=Math.pow(10,e);return Math.round(t*n)/n},"roundNumber"),Gy=x((t,e)=>{let n,r=e;for(const i of t){if(n){const o=Vy(i,n);if(o===0)return n;if(o<r)r-=o;else{const s=r/o;if(s<=0)return n;if(s>=1)return{x:i.x,y:i.y};if(s>0&&s<1)return{x:A1((1-s)*n.x+s*i.x,5),y:A1((1-s)*n.y+s*i.y,5)}}}n=i}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),lU=x((t,e,n)=>{G.info(`our points ${JSON.stringify(e)}`),e[0]!==n&&(e=e.reverse());const i=Gy(e,25),o=t?10:5,s=Math.atan2(e[0].y-i.y,e[0].x-i.x),a={x:0,y:0};return a.x=Math.sin(s)*o+(e[0].x+i.x)/2,a.y=-Math.cos(s)*o+(e[0].y+i.y)/2,a},"calcCardinalityPosition");function U2(t,e,n){const r=structuredClone(n);G.info("our points",r),e!=="start_left"&&e!=="start_right"&&r.reverse();const i=25+t,o=Gy(r,i),s=10+t*.5,a=Math.atan2(r[0].y-o.y,r[0].x-o.x),l={x:0,y:0};return e==="start_left"?(l.x=Math.sin(a+Math.PI)*s+(r[0].x+o.x)/2,l.y=-Math.cos(a+Math.PI)*s+(r[0].y+o.y)/2):e==="end_right"?(l.x=Math.sin(a-Math.PI)*s+(r[0].x+o.x)/2-5,l.y=-Math.cos(a-Math.PI)*s+(r[0].y+o.y)/2-5):e==="end_left"?(l.x=Math.sin(a)*s+(r[0].x+o.x)/2-5,l.y=-Math.cos(a)*s+(r[0].y+o.y)/2-5):(l.x=Math.sin(a)*s+(r[0].x+o.x)/2,l.y=-Math.cos(a)*s+(r[0].y+o.y)/2),l}x(U2,"calcTerminalLabelPosition");function j2(t){let e="",n="";for(const r of t)r!==void 0&&(r.startsWith("color:")||r.startsWith("text-align:")?n=n+r+";":e=e+r+";");return{style:e,labelStyle:n}}x(j2,"getStylesFromArray");var N1=0,cU=x(()=>(N1++,"id-"+Math.random().toString(36).substr(2,12)+"-"+N1),"generateId");function q2(t){let e="";const n="0123456789abcdef",r=n.length;for(let i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*r));return e}x(q2,"makeRandomHex");var uU=x(t=>q2(t.length),"random"),dU=x(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),hU=x(function(t,e){const n=e.text.replace(ba.lineBreakRegex," "),[,r]=jh(e.fontSize),i=t.append("text");i.attr("x",e.x),i.attr("y",e.y),i.style("text-anchor",e.anchor),i.style("font-family",e.fontFamily),i.style("font-size",r),i.style("font-weight",e.fontWeight),i.attr("fill",e.fill),e.class!==void 0&&i.attr("class",e.class);const o=i.append("tspan");return o.attr("x",e.x+e.textMargin*2),o.attr("fill",e.fill),o.text(n),i},"drawSimpleText"),fU=uc((t,e,n)=>{if(!t||(n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},n),ba.lineBreakRegex.test(t)))return t;const r=t.split(" ").filter(Boolean),i=[];let o="";return r.forEach((s,a)=>{const l=wi(`${s} `,n),c=wi(o,n);if(l>e){const{hyphenatedStrings:h,remainingWord:f}=pU(s,e,"-",n);i.push(o,...h),o=f}else c+l>=e?(i.push(o),o=s):o=[o,s].filter(Boolean).join(" ");a+1===r.length&&i.push(o)}),i.filter(s=>s!=="").join(n.joinWith)},(t,e,n)=>`${t}${e}${n.fontSize}${n.fontWeight}${n.fontFamily}${n.joinWith}`),pU=uc((t,e,n="-",r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},r);const i=[...t],o=[];let s="";return i.forEach((a,l)=>{const c=`${s}${a}`;if(wi(c,r)>=e){const d=l+1,h=i.length===d,f=`${c}${n}`;o.push(h?c:f),s=""}else s=c}),{hyphenatedStrings:o,remainingWord:s}},(t,e,n="-",r)=>`${t}${e}${n}${r.fontSize}${r.fontWeight}${r.fontFamily}`);function V2(t,e){return Ky(t,e).height}x(V2,"calculateTextHeight");function wi(t,e){return Ky(t,e).width}x(wi,"calculateTextWidth");var Ky=uc((t,e)=>{const{fontSize:n=12,fontFamily:r="Arial",fontWeight:i=400}=e;if(!t)return{width:0,height:0};const[,o]=jh(n),s=["sans-serif",r],a=t.split(ba.lineBreakRegex),l=[],c=Ve("body");if(!c.remove)return{width:0,height:0,lineHeight:0};const u=c.append("svg");for(const h of s){let f=0;const p={width:0,height:0,lineHeight:0};for(const g of a){const m=dU();m.text=g||tU;const y=hU(u,m).style("font-size",o).style("font-weight",i).style("font-family",h),b=(y._groups||y)[0][0].getBBox();if(b.width===0&&b.height===0)throw new Error("svg element not in render tree");p.width=Math.round(Math.max(p.width,b.width)),f=Math.round(b.height),p.height+=f,p.lineHeight=Math.round(Math.max(p.lineHeight,f))}l.push(p)}u.remove();const d=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[d]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`),Zs,gU=(Zs=class{constructor(e=!1,n){this.count=0,this.count=n?n.length:0,this.next=e?()=>this.count++:()=>Date.now()}},x(Zs,"InitIDGenerator"),Zs),Yc,mU=x(function(t){return Yc=Yc||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Yc.innerHTML=t,unescape(Yc.textContent)},"entityDecode");function Yy(t){return"str"in t}x(Yy,"isDetailedError");var yU=x((t,e,n,r)=>{var o;if(!r)return;const i=(o=t.node())==null?void 0:o.getBBox();i&&t.append("text").text(r).attr("text-anchor","middle").attr("x",i.x+i.width/2).attr("y",-n).attr("class",e)},"insertTitle"),jh=x(t=>{if(typeof t=="number")return[t,t+"px"];const e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]},"parseFontSize");function Xy(t,e){return eU({},t,e)}x(Xy,"cleanAndMerge");var kr={assignWithDepth:$t,wrapLabel:fU,calculateTextHeight:V2,calculateTextWidth:wi,calculateTextDimensions:Ky,cleanAndMerge:Xy,detectInit:iU,detectDirective:F2,isSubstringInArray:sU,interpolateToCurve:qy,calcLabelPosition:W2,calcCardinalityPosition:lU,calcTerminalLabelPosition:U2,formatUrl:z2,getStylesFromArray:j2,generateId:cU,random:uU,runFunc:aU,entityDecode:mU,insertTitle:yU,isLabelCoordinateInPath:G2,parseFontSize:jh,InitIDGenerator:gU},bU=x(function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,function(n){return n.substring(0,n.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(n){return n.substring(0,n.length-1)}),e=e.replace(/#\w+;/g,function(n){const r=n.substring(1,n.length-1);return/^\+?\d+$/.test(r)?""+r+"":""+r+""}),e},"encodeEntities"),hs=x(function(t){return t.replace(//g,"&#").replace(//g,"&").replace(//g,";")},"decodeEntities"),rte=x((t,e,{counter:n=0,prefix:r,suffix:i},o)=>o||`${r?`${r}_`:""}${t}_${e}_${n}${i?`_${i}`:""}`,"getEdgeId");function mn(t){return t??null}x(mn,"handleUndefinedAttr");function G2(t,e){const n=Math.round(t.x),r=Math.round(t.y),i=e.replace(/(\d+\.\d+)/g,o=>Math.round(parseFloat(o)).toString());return i.includes(n.toString())||i.includes(r.toString())}x(G2,"isLabelCoordinateInPath");const xU=Object.freeze({left:0,top:0,width:16,height:16}),Yd=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),K2=Object.freeze({...xU,...Yd}),vU=Object.freeze({...K2,body:"",hidden:!1}),wU=Object.freeze({width:null,height:null}),CU=Object.freeze({...wU,...Yd}),kU=(t,e,n,r="")=>{const i=t.split(":");if(t.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;r=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const a=i.pop(),l=i.pop(),c={provider:i.length>0?i[0]:r,prefix:l,name:a};return ap(c)?c:null}const o=i[0],s=o.split("-");if(s.length>1){const a={provider:r,prefix:s.shift(),name:s.join("-")};return ap(a)?a:null}if(n&&r===""){const a={provider:r,prefix:"",name:o};return ap(a,n)?a:null}return null},ap=(t,e)=>t?!!((e&&t.prefix===""||t.prefix)&&t.name):!1;function SU(t,e){const n={};!t.hFlip!=!e.hFlip&&(n.hFlip=!0),!t.vFlip!=!e.vFlip&&(n.vFlip=!0);const r=((t.rotate||0)+(e.rotate||0))%4;return r&&(n.rotate=r),n}function O1(t,e){const n=SU(t,e);for(const r in vU)r in Yd?r in t&&!(r in n)&&(n[r]=Yd[r]):r in e?n[r]=e[r]:r in t&&(n[r]=t[r]);return n}function _U(t,e){const n=t.icons,r=t.aliases||Object.create(null),i=Object.create(null);function o(s){if(n[s])return i[s]=[];if(!(s in i)){i[s]=null;const a=r[s]&&r[s].parent,l=a&&o(a);l&&(i[s]=[a].concat(l))}return i[s]}return(e||Object.keys(n).concat(Object.keys(r))).forEach(o),i}function L1(t,e,n){const r=t.icons,i=t.aliases||Object.create(null);let o={};function s(a){o=O1(r[a]||i[a],o)}return s(e),n.forEach(s),O1(t,o)}function EU(t,e){if(t.icons[e])return L1(t,e,[]);const n=_U(t,[e])[e];return n?L1(t,e,n):null}const TU=/(-?[0-9.]*[0-9]+[0-9.]*)/g,MU=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function R1(t,e,n){if(e===1)return t;if(n=n||100,typeof t=="number")return Math.ceil(t*e*n)/n;if(typeof t!="string")return t;const r=t.split(TU);if(r===null||!r.length)return t;const i=[];let o=r.shift(),s=MU.test(o);for(;;){if(s){const a=parseFloat(o);isNaN(a)?i.push(o):i.push(Math.ceil(a*e*n)/n)}else i.push(o);if(o=r.shift(),o===void 0)return i.join("");s=!s}}function AU(t,e="defs"){let n="";const r=t.indexOf("<"+e);for(;r>=0;){const i=t.indexOf(">",r),o=t.indexOf("</"+e);if(i===-1||o===-1)break;const s=t.indexOf(">",o);if(s===-1)break;n+=t.slice(i+1,o).trim(),t=t.slice(0,r).trim()+t.slice(s+1)}return{defs:n,content:t}}function NU(t,e){return t?"<defs>"+t+"</defs>"+e:e}function OU(t,e,n){const r=AU(t);return NU(r.defs,e+r.content+n)}const LU=t=>t==="unset"||t==="undefined"||t==="none";function RU(t,e){const n={...K2,...t},r={...CU,...e},i={left:n.left,top:n.top,width:n.width,height:n.height};let o=n.body;[n,r].forEach(g=>{const m=[],y=g.hFlip,b=g.vFlip;let C=g.rotate;y?b?C+=2:(m.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),m.push("scale(-1 1)"),i.top=i.left=0):b&&(m.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),m.push("scale(1 -1)"),i.top=i.left=0);let v;switch(C<0&&(C-=Math.floor(C/4)*4),C=C%4,C){case 1:v=i.height/2+i.top,m.unshift("rotate(90 "+v.toString()+" "+v.toString()+")");break;case 2:m.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:v=i.width/2+i.left,m.unshift("rotate(-90 "+v.toString()+" "+v.toString()+")");break}C%2===1&&(i.left!==i.top&&(v=i.left,i.left=i.top,i.top=v),i.width!==i.height&&(v=i.width,i.width=i.height,i.height=v)),m.length&&(o=OU(o,'<g transform="'+m.join(" ")+'">',"</g>"))});const s=r.width,a=r.height,l=i.width,c=i.height;let u,d;s===null?(d=a===null?"1em":a==="auto"?c:a,u=R1(d,l/c)):(u=s==="auto"?l:s,d=a===null?R1(u,c/l):a==="auto"?c:a);const h={},f=(g,m)=>{LU(m)||(h[g]=m.toString())};f("width",u),f("height",d);const p=[i.left,i.top,l,c];return h.viewBox=p.join(" "),{attributes:h,viewBox:p,body:o}}const IU=/\sid="(\S+)"/g,I1=new Map;function DU(t){t=t.replace(/[0-9]+$/,"")||"a";const e=I1.get(t)||0;return I1.set(t,e+1),e?`${t}${e}`:t}function BU(t){const e=[];let n;for(;n=IU.exec(t);)e.push(n[1]);if(!e.length)return t;const r="suffix"+(Math.random()*16777216|Date.now()).toString(16);return e.forEach(i=>{const o=DU(i),s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+s+')([")]|\\.[a-z])',"g"),"$1"+o+r+"$3")}),t=t.replace(new RegExp(r,"g"),""),t}function PU(t,e){let n=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in e)n+=" "+r+'="'+e[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+t+"</svg>"}function Zy(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var fs=Zy();function Y2(t){fs=t}var bl={exec:()=>null};function Ke(t,e=""){let n=typeof t=="string"?t:t.source,r={replace:(i,o)=>{let s=typeof o=="string"?o:o.source;return s=s.replace(Sn.caret,"$1"),n=n.replace(i,s),r},getRegex:()=>new RegExp(n,e)};return r}var $U=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Sn={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},FU=/^(?:[ \t]*(?:\n|$))+/,zU=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,HU=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hc=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,WU=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Jy=/(?:[*+-]|\d{1,9}[.)])/,X2=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Z2=Ke(X2).replace(/bull/g,Jy).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),UU=Ke(X2).replace(/bull/g,Jy).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Qy=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,jU=/^[^\n]+/,e0=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,qU=Ke(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",e0).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),VU=Ke(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Jy).getRegex(),qh="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",t0=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,GU=Ke("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",t0).replace("tag",qh).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),J2=Ke(Qy).replace("hr",hc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",qh).getRegex(),KU=Ke(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",J2).getRegex(),n0={blockquote:KU,code:zU,def:qU,fences:HU,heading:WU,hr:hc,html:GU,lheading:Z2,list:VU,newline:FU,paragraph:J2,table:bl,text:jU},D1=Ke("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",hc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",qh).getRegex(),YU={...n0,lheading:UU,table:D1,paragraph:Ke(Qy).replace("hr",hc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",D1).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",qh).getRegex()},XU={...n0,html:Ke(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",t0).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:bl,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ke(Qy).replace("hr",hc).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Z2).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ZU=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,JU=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Q2=/^( {2,}|\\)\n(?!\s*$)/,QU=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Vh=/[\p{P}\p{S}]/u,r0=/[\s\p{P}\p{S}]/u,eT=/[^\s\p{P}\p{S}]/u,ej=Ke(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,r0).getRegex(),tT=/(?!~)[\p{P}\p{S}]/u,tj=/(?!~)[\s\p{P}\p{S}]/u,nj=/(?:[^\s\p{P}\p{S}]|~)/u,rj=Ke(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",$U?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),nT=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,ij=Ke(nT,"u").replace(/punct/g,Vh).getRegex(),oj=Ke(nT,"u").replace(/punct/g,tT).getRegex(),rT="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",sj=Ke(rT,"gu").replace(/notPunctSpace/g,eT).replace(/punctSpace/g,r0).replace(/punct/g,Vh).getRegex(),aj=Ke(rT,"gu").replace(/notPunctSpace/g,nj).replace(/punctSpace/g,tj).replace(/punct/g,tT).getRegex(),lj=Ke("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,eT).replace(/punctSpace/g,r0).replace(/punct/g,Vh).getRegex(),cj=Ke(/\\(punct)/,"gu").replace(/punct/g,Vh).getRegex(),uj=Ke(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),dj=Ke(t0).replace("(?:-->|$)","-->").getRegex(),hj=Ke("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",dj).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Xd=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,fj=Ke(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Xd).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),iT=Ke(/^!?\[(label)\]\[(ref)\]/).replace("label",Xd).replace("ref",e0).getRegex(),oT=Ke(/^!?\[(ref)\](?:\[\])?/).replace("ref",e0).getRegex(),pj=Ke("reflink|nolink(?!\\()","g").replace("reflink",iT).replace("nolink",oT).getRegex(),B1=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,i0={_backpedal:bl,anyPunctuation:cj,autolink:uj,blockSkip:rj,br:Q2,code:JU,del:bl,emStrongLDelim:ij,emStrongRDelimAst:sj,emStrongRDelimUnd:lj,escape:ZU,link:fj,nolink:oT,punctuation:ej,reflink:iT,reflinkSearch:pj,tag:hj,text:QU,url:bl},gj={...i0,link:Ke(/^!?\[(label)\]\((.*?)\)/).replace("label",Xd).getRegex(),reflink:Ke(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Xd).getRegex()},$g={...i0,emStrongRDelimAst:aj,emStrongLDelim:oj,url:Ke(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",B1).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Ke(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",B1).getRegex()},mj={...$g,br:Ke(Q2).replace("{2,}","*").getRegex(),text:Ke($g.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Xc={normal:n0,gfm:YU,pedantic:XU},$a={normal:i0,gfm:$g,breaks:mj,pedantic:gj},yj={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},P1=t=>yj[t];function Pr(t,e){if(e){if(Sn.escapeTest.test(t))return t.replace(Sn.escapeReplace,P1)}else if(Sn.escapeTestNoEncode.test(t))return t.replace(Sn.escapeReplaceNoEncode,P1);return t}function $1(t){try{t=encodeURI(t).replace(Sn.percentDecode,"%")}catch{return null}return t}function F1(t,e){var o;let n=t.replace(Sn.findPipe,(s,a,l)=>{let c=!1,u=a;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),r=n.split(Sn.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!((o=r.at(-1))!=null&&o.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(Sn.slashPipe,"|");return r}function Fa(t,e,n){let r=t.length;if(r===0)return"";let i=0;for(;i<r&&t.charAt(r-i-1)===e;)i++;return t.slice(0,r-i)}function bj(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function z1(t,e,n,r,i){let o=e.href,s=e.title||null,a=t[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:o,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function xj(t,e,n){let r=t.match(n.other.indentCodeCompensation);if(r===null)return e;let i=r[1];return e.split(`
`).map(o=>{let s=o.match(n.other.beginningSpace);if(s===null)return o;let[a]=s;return a.length>=i.length?o.slice(i.length):o}).join(`
`)}var Zd=class{constructor(e){lt(this,"options");lt(this,"rules");lt(this,"lexer");this.options=e||fs}space(e){let n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){let n=this.rules.block.code.exec(e);if(n){let r=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Fa(r,`
`)}}}fences(e){let n=this.rules.block.fences.exec(e);if(n){let r=n[0],i=xj(r,n[3]||"",this.rules);return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:i}}}heading(e){let n=this.rules.block.heading.exec(e);if(n){let r=n[2].trim();if(this.rules.other.endingHash.test(r)){let i=Fa(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:Fa(n[0],`
`)}}blockquote(e){let n=this.rules.block.blockquote.exec(e);if(n){let r=Fa(n[0],`
`).split(`
`),i="",o="",s=[];for(;r.length>0;){let a=!1,l=[],c;for(c=0;c<r.length;c++)if(this.rules.other.blockquoteStart.test(r[c]))l.push(r[c]),a=!0;else if(!a)l.push(r[c]);else break;r=r.slice(c);let u=l.join(`
`),d=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${u}`:u,o=o?`${o}
${d}`:d;let h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,s,!0),this.lexer.state.top=h,r.length===0)break;let f=s.at(-1);if((f==null?void 0:f.type)==="code")break;if((f==null?void 0:f.type)==="blockquote"){let p=f,g=p.raw+`
`+r.join(`
`),m=this.blockquote(g);s[s.length-1]=m,i=i.substring(0,i.length-p.raw.length)+m.raw,o=o.substring(0,o.length-p.text.length)+m.text;break}else if((f==null?void 0:f.type)==="list"){let p=f,g=p.raw+`
`+r.join(`
`),m=this.list(g);s[s.length-1]=m,i=i.substring(0,i.length-f.raw.length)+m.raw,o=o.substring(0,o.length-p.raw.length)+m.raw,r=g.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:s,text:o}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r=n[1].trim(),i=r.length>1,o={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let s=this.rules.other.listItemRegex(r),a=!1;for(;e;){let c=!1,u="",d="";if(!(n=s.exec(e))||this.rules.block.hr.test(e))break;u=n[0],e=e.substring(u.length);let h=n[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,b=>" ".repeat(3*b.length)),f=e.split(`
`,1)[0],p=!h.trim(),g=0;if(this.options.pedantic?(g=2,d=h.trimStart()):p?g=n[1].length+1:(g=n[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,d=h.slice(g),g+=n[1].length),p&&this.rules.other.blankLine.test(f)&&(u+=f+`
`,e=e.substring(f.length+1),c=!0),!c){let b=this.rules.other.nextBulletRegex(g),C=this.rules.other.hrRegex(g),v=this.rules.other.fencesBeginRegex(g),k=this.rules.other.headingBeginRegex(g),w=this.rules.other.htmlBeginRegex(g);for(;e;){let S=e.split(`
`,1)[0],E;if(f=S,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),E=f):E=f.replace(this.rules.other.tabCharGlobal,"    "),v.test(f)||k.test(f)||w.test(f)||b.test(f)||C.test(f))break;if(E.search(this.rules.other.nonSpaceChar)>=g||!f.trim())d+=`
`+E.slice(g);else{if(p||h.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||v.test(h)||k.test(h)||C.test(h))break;d+=`
`+f}!p&&!f.trim()&&(p=!0),u+=S+`
`,e=e.substring(S.length+1),h=E.slice(g)}}o.loose||(a?o.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(a=!0));let m=null,y;this.options.gfm&&(m=this.rules.other.listIsTask.exec(d),m&&(y=m[0]!=="[ ] ",d=d.replace(this.rules.other.listReplaceTask,""))),o.items.push({type:"list_item",raw:u,task:!!m,checked:y,loose:!1,text:d,tokens:[]}),o.raw+=u}let l=o.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let c=0;c<o.items.length;c++)if(this.lexer.state.top=!1,o.items[c].tokens=this.lexer.blockTokens(o.items[c].text,[]),!o.loose){let u=o.items[c].tokens.filter(h=>h.type==="space"),d=u.length>0&&u.some(h=>this.rules.other.anyLine.test(h.raw));o.loose=d}if(o.loose)for(let c=0;c<o.items.length;c++)o.items[c].loose=!0;return o}}html(e){let n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){let n=this.rules.block.def.exec(e);if(n){let r=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:i,title:o}}}table(e){var a;let n=this.rules.block.table.exec(e);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;let r=F1(n[1]),i=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=(a=n[3])!=null&&a.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let l of i)this.rules.other.tableAlignRight.test(l)?s.align.push("right"):this.rules.other.tableAlignCenter.test(l)?s.align.push("center"):this.rules.other.tableAlignLeft.test(l)?s.align.push("left"):s.align.push(null);for(let l=0;l<r.length;l++)s.header.push({text:r[l],tokens:this.lexer.inline(r[l]),header:!0,align:s.align[l]});for(let l of o)s.rows.push(F1(l,s.header.length).map((c,u)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:s.align[u]})));return s}}lheading(e){let n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){let n=this.rules.block.paragraph.exec(e);if(n){let r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){let n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(e){let n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){let n=this.rules.inline.link.exec(e);if(n){let r=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let s=Fa(r.slice(0,-1),"\\");if((r.length-s.length)%2===0)return}else{let s=bj(n[2],"()");if(s===-2)return;if(s>-1){let a=(n[0].indexOf("!")===0?5:4)+n[1].length+s;n[2]=n[2].substring(0,s),n[0]=n[0].substring(0,a).trim(),n[3]=""}}let i=n[2],o="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(i);s&&(i=s[1],o=s[3])}else o=n[3]?n[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),z1(n,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer,this.rules)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=n[i.toLowerCase()];if(!o){let s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return z1(r,o,r[0],this.lexer,this.rules)}}emStrong(e,n,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!r||this.rules.inline.punctuation.exec(r))){let o=[...i[0]].length-1,s,a,l=o,c=0,u=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,n=n.slice(-1*e.length+o);(i=u.exec(n))!=null;){if(s=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!s)continue;if(a=[...s].length,i[3]||i[4]){l+=a;continue}else if((i[5]||i[6])&&o%3&&!((o+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);let d=[...i[0]][0].length,h=e.slice(0,o+i.index+d+a);if(Math.min(o,a)%2){let p=h.slice(1,-1);return{type:"em",raw:h,text:p,tokens:this.lexer.inlineTokens(p)}}let f=h.slice(2,-2);return{type:"strong",raw:h,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(e){let n=this.rules.inline.code.exec(e);if(n){let r=n[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(r),o=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&o&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:n[0],text:r}}}br(e){let n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){let n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){let n=this.rules.inline.autolink.exec(e);if(n){let r,i;return n[2]==="@"?(r=n[1],i="mailto:"+r):(r=n[1],i=r),{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){var r;let n;if(n=this.rules.inline.url.exec(e)){let i,o;if(n[2]==="@")i=n[0],o="mailto:"+i;else{let s;do s=n[0],n[0]=((r=this.rules.inline._backpedal.exec(n[0]))==null?void 0:r[0])??"";while(s!==n[0]);i=n[0],n[1]==="www."?o="http://"+n[0]:o=n[0]}return{type:"link",raw:n[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){let n=this.rules.inline.text.exec(e);if(n){let r=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:r}}}},xr=class Fg{constructor(e){lt(this,"tokens");lt(this,"options");lt(this,"state");lt(this,"tokenizer");lt(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||fs,this.options.tokenizer=this.options.tokenizer||new Zd,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:Sn,block:Xc.normal,inline:$a.normal};this.options.pedantic?(n.block=Xc.pedantic,n.inline=$a.pedantic):this.options.gfm&&(n.block=Xc.gfm,this.options.breaks?n.inline=$a.breaks:n.inline=$a.gfm),this.tokenizer.rules=n}static get rules(){return{block:Xc,inline:$a}}static lex(e,n){return new Fg(n).lex(e)}static lexInline(e,n){return new Fg(n).inlineTokens(e)}lex(e){e=e.replace(Sn.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){var i,o,s;for(this.options.pedantic&&(e=e.replace(Sn.tabCharGlobal,"    ").replace(Sn.spaceLine,""));e;){let a;if((o=(i=this.options.extensions)==null?void 0:i.block)!=null&&o.some(c=>(a=c.call({lexer:this},e,n))?(e=e.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);let c=n.at(-1);a.raw.length===1&&c!==void 0?c.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title},n.push(a));continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),n.push(a);continue}let l=e;if((s=this.options.extensions)!=null&&s.startBlock){let c=1/0,u=e.slice(1),d;this.options.extensions.startBlock.forEach(h=>{d=h.call({lexer:this},u),typeof d=="number"&&d>=0&&(c=Math.min(c,d))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){let c=n.at(-1);r&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a),r=l.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var l,c,u,d,h;let r=e,i=null;if(this.tokens.links){let f=Object.keys(this.tokens.links);if(f.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)f.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let o;for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)o=i[2]?i[2].length:0,r=r.slice(0,i.index+o)+"["+"a".repeat(i[0].length-o-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=((c=(l=this.options.hooks)==null?void 0:l.emStrongMask)==null?void 0:c.call({lexer:this},r))??r;let s=!1,a="";for(;e;){s||(a=""),s=!1;let f;if((d=(u=this.options.extensions)==null?void 0:u.inline)!=null&&d.some(g=>(f=g.call({lexer:this},e,n))?(e=e.substring(f.raw.length),n.push(f),!0):!1))continue;if(f=this.tokenizer.escape(e)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.tag(e)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.link(e)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(f.raw.length);let g=n.at(-1);f.type==="text"&&(g==null?void 0:g.type)==="text"?(g.raw+=f.raw,g.text+=f.text):n.push(f);continue}if(f=this.tokenizer.emStrong(e,r,a)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.codespan(e)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.br(e)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.del(e)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.autolink(e)){e=e.substring(f.raw.length),n.push(f);continue}if(!this.state.inLink&&(f=this.tokenizer.url(e))){e=e.substring(f.raw.length),n.push(f);continue}let p=e;if((h=this.options.extensions)!=null&&h.startInline){let g=1/0,m=e.slice(1),y;this.options.extensions.startInline.forEach(b=>{y=b.call({lexer:this},m),typeof y=="number"&&y>=0&&(g=Math.min(g,y))}),g<1/0&&g>=0&&(p=e.substring(0,g+1))}if(f=this.tokenizer.inlineText(p)){e=e.substring(f.raw.length),f.raw.slice(-1)!=="_"&&(a=f.raw.slice(-1)),s=!0;let g=n.at(-1);(g==null?void 0:g.type)==="text"?(g.raw+=f.raw,g.text+=f.text):n.push(f);continue}if(e){let g="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(g);break}else throw new Error(g)}}return n}},Jd=class{constructor(e){lt(this,"options");lt(this,"parser");this.options=e||fs}space(e){return""}code({text:e,lang:n,escaped:r}){var s;let i=(s=(n||"").match(Sn.notSpaceStart))==null?void 0:s[0],o=e.replace(Sn.endingNewline,"")+`
`;return i?'<pre><code class="language-'+Pr(i)+'">'+(r?o:Pr(o,!0))+`</code></pre>
`:"<pre><code>"+(r?o:Pr(o,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:n}){return`<h${n}>${this.parser.parseInline(e)}</h${n}>
`}hr(e){return`<hr>
`}list(e){let n=e.ordered,r=e.start,i="";for(let a=0;a<e.items.length;a++){let l=e.items[a];i+=this.listitem(l)}let o=n?"ol":"ul",s=n&&r!==1?' start="'+r+'"':"";return"<"+o+s+`>
`+i+"</"+o+`>
`}listitem(e){var r;let n="";if(e.task){let i=this.checkbox({checked:!!e.checked});e.loose?((r=e.tokens[0])==null?void 0:r.type)==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+Pr(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):n+=i+" "}return n+=this.parser.parse(e.tokens,!!e.loose),`<li>${n}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let n="",r="";for(let o=0;o<e.header.length;o++)r+=this.tablecell(e.header[o]);n+=this.tablerow({text:r});let i="";for(let o=0;o<e.rows.length;o++){let s=e.rows[o];r="";for(let a=0;a<s.length;a++)r+=this.tablecell(s[a]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let n=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+n+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Pr(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:n,tokens:r}){let i=this.parser.parseInline(r),o=$1(e);if(o===null)return i;e=o;let s='<a href="'+e+'"';return n&&(s+=' title="'+Pr(n)+'"'),s+=">"+i+"</a>",s}image({href:e,title:n,text:r,tokens:i}){i&&(r=this.parser.parseInline(i,this.parser.textRenderer));let o=$1(e);if(o===null)return Pr(r);e=o;let s=`<img src="${e}" alt="${r}"`;return n&&(s+=` title="${Pr(n)}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Pr(e.text)}},o0=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},vr=class zg{constructor(e){lt(this,"options");lt(this,"renderer");lt(this,"textRenderer");this.options=e||fs,this.options.renderer=this.options.renderer||new Jd,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new o0}static parse(e,n){return new zg(n).parse(e)}static parseInline(e,n){return new zg(n).parseInline(e)}parse(e,n=!0){var i,o;let r="";for(let s=0;s<e.length;s++){let a=e[s];if((o=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&o[a.type]){let c=a,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(c.type)){r+=u||"";continue}}let l=a;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"def":{r+=this.renderer.def(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;s+1<e.length&&e[s+1].type==="text";)c=e[++s],u+=`
`+this.renderer.text(c);n?r+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):r+=u;continue}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(e,n=this.renderer){var i,o;let r="";for(let s=0;s<e.length;s++){let a=e[s];if((o=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&o[a.type]){let c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=c||"";continue}}let l=a;switch(l.type){case"escape":{r+=n.text(l);break}case"html":{r+=n.html(l);break}case"link":{r+=n.link(l);break}case"image":{r+=n.image(l);break}case"strong":{r+=n.strong(l);break}case"em":{r+=n.em(l);break}case"codespan":{r+=n.codespan(l);break}case"br":{r+=n.br(l);break}case"del":{r+=n.del(l);break}case"text":{r+=n.text(l);break}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}},cu,Qa=(cu=class{constructor(e){lt(this,"options");lt(this,"block");this.options=e||fs}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?xr.lex:xr.lexInline}provideParser(){return this.block?vr.parse:vr.parseInline}},lt(cu,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),lt(cu,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),cu),vj=class{constructor(...e){lt(this,"defaults",Zy());lt(this,"options",this.setOptions);lt(this,"parse",this.parseMarkdown(!0));lt(this,"parseInline",this.parseMarkdown(!1));lt(this,"Parser",vr);lt(this,"Renderer",Jd);lt(this,"TextRenderer",o0);lt(this,"Lexer",xr);lt(this,"Tokenizer",Zd);lt(this,"Hooks",Qa);this.use(...e)}walkTokens(e,n){var i,o;let r=[];for(let s of e)switch(r=r.concat(n.call(this,s)),s.type){case"table":{let a=s;for(let l of a.header)r=r.concat(this.walkTokens(l.tokens,n));for(let l of a.rows)for(let c of l)r=r.concat(this.walkTokens(c.tokens,n));break}case"list":{let a=s;r=r.concat(this.walkTokens(a.items,n));break}default:{let a=s;(o=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&o[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{let c=a[l].flat(1/0);r=r.concat(this.walkTokens(c,n))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,n)))}}return r}use(...e){let n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let s=n.renderers[o.name];s?n.renderers[o.name]=function(...a){let l=o.renderer.apply(this,a);return l===!1&&(l=s.apply(this,a)),l}:n.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=n[o.level];s?s.unshift(o.tokenizer):n[o.level]=[o.tokenizer],o.start&&(o.level==="block"?n.startBlock?n.startBlock.push(o.start):n.startBlock=[o.start]:o.level==="inline"&&(n.startInline?n.startInline.push(o.start):n.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(n.childTokens[o.name]=o.childTokens)}),i.extensions=n),r.renderer){let o=this.defaults.renderer||new Jd(this.defaults);for(let s in r.renderer){if(!(s in o))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let a=s,l=r.renderer[a],c=o[a];o[a]=(...u)=>{let d=l.apply(o,u);return d===!1&&(d=c.apply(o,u)),d||""}}i.renderer=o}if(r.tokenizer){let o=this.defaults.tokenizer||new Zd(this.defaults);for(let s in r.tokenizer){if(!(s in o))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let a=s,l=r.tokenizer[a],c=o[a];o[a]=(...u)=>{let d=l.apply(o,u);return d===!1&&(d=c.apply(o,u)),d}}i.tokenizer=o}if(r.hooks){let o=this.defaults.hooks||new Qa;for(let s in r.hooks){if(!(s in o))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let a=s,l=r.hooks[a],c=o[a];Qa.passThroughHooks.has(s)?o[a]=u=>{if(this.defaults.async&&Qa.passThroughHooksRespectAsync.has(s))return(async()=>{let h=await l.call(o,u);return c.call(o,h)})();let d=l.call(o,u);return c.call(o,d)}:o[a]=(...u)=>{if(this.defaults.async)return(async()=>{let h=await l.apply(o,u);return h===!1&&(h=await c.apply(o,u)),h})();let d=l.apply(o,u);return d===!1&&(d=c.apply(o,u)),d}}i.hooks=o}if(r.walkTokens){let o=this.defaults.walkTokens,s=r.walkTokens;i.walkTokens=function(a){let l=[];return l.push(s.call(this,a)),o&&(l=l.concat(o.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return xr.lex(e,n??this.defaults)}parser(e,n){return vr.parse(e,n??this.defaults)}parseMarkdown(e){return(n,r)=>{let i={...r},o={...this.defaults,...i},s=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&i.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(o.hooks&&(o.hooks.options=o,o.hooks.block=e),o.async)return(async()=>{let a=o.hooks?await o.hooks.preprocess(n):n,l=await(o.hooks?await o.hooks.provideLexer():e?xr.lex:xr.lexInline)(a,o),c=o.hooks?await o.hooks.processAllTokens(l):l;o.walkTokens&&await Promise.all(this.walkTokens(c,o.walkTokens));let u=await(o.hooks?await o.hooks.provideParser():e?vr.parse:vr.parseInline)(c,o);return o.hooks?await o.hooks.postprocess(u):u})().catch(s);try{o.hooks&&(n=o.hooks.preprocess(n));let a=(o.hooks?o.hooks.provideLexer():e?xr.lex:xr.lexInline)(n,o);o.hooks&&(a=o.hooks.processAllTokens(a)),o.walkTokens&&this.walkTokens(a,o.walkTokens);let l=(o.hooks?o.hooks.provideParser():e?vr.parse:vr.parseInline)(a,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(a){return s(a)}}}onError(e,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+Pr(r.message+"",!0)+"</pre>";return n?Promise.resolve(i):i}if(n)return Promise.reject(r);throw r}}},es=new vj;function nt(t,e){return es.parse(t,e)}nt.options=nt.setOptions=function(t){return es.setOptions(t),nt.defaults=es.defaults,Y2(nt.defaults),nt};nt.getDefaults=Zy;nt.defaults=fs;nt.use=function(...t){return es.use(...t),nt.defaults=es.defaults,Y2(nt.defaults),nt};nt.walkTokens=function(t,e){return es.walkTokens(t,e)};nt.parseInline=es.parseInline;nt.Parser=vr;nt.parser=vr.parse;nt.Renderer=Jd;nt.TextRenderer=o0;nt.Lexer=xr;nt.lexer=xr.lex;nt.Tokenizer=Zd;nt.Hooks=Qa;nt.parse=nt;nt.options;nt.setOptions;nt.use;nt.walkTokens;nt.parseInline;vr.parse;xr.lex;function sT(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Array.from(typeof t=="string"?[t]:t);r[r.length-1]=r[r.length-1].replace(/\r?\n([\t ]*)$/,"");var i=r.reduce(function(a,l){var c=l.match(/\n([\t ]+|(?!\s).)/g);return c?a.concat(c.map(function(u){var d,h;return(h=(d=u.match(/[\t ]/g))===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0})):a},[]);if(i.length){var o=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");r=r.map(function(a){return a.replace(o,`
`)})}r[0]=r[0].replace(/^\r?\n/,"");var s=r[0];return e.forEach(function(a,l){var c=s.match(/(?:^|\n)( *)$/),u=c?c[1]:"",d=a;typeof a=="string"&&a.includes(`
`)&&(d=String(a).split(`
`).map(function(h,f){return f===0?h:""+u+h}).join(`
`)),s+=d+r[l+1]}),s}var wj={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},Hg=new Map,aT=new Map,Cj=x(t=>{for(const e of t){if(!e.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(G.debug("Registering icon pack:",e.name),"loader"in e)aT.set(e.name,e.loader);else if("icons"in e)Hg.set(e.name,e.icons);else throw G.error("Invalid icon loader:",e),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),lT=x(async(t,e)=>{const n=kU(t,!0,e!==void 0);if(!n)throw new Error(`Invalid icon name: ${t}`);const r=n.prefix||e;if(!r)throw new Error(`Icon name must contain a prefix: ${t}`);let i=Hg.get(r);if(!i){const s=aT.get(r);if(!s)throw new Error(`Icon set not found: ${n.prefix}`);try{i={...await s(),prefix:r},Hg.set(r,i)}catch(a){throw G.error(a),new Error(`Failed to load icon set: ${n.prefix}`)}}const o=EU(i,n.name);if(!o)throw new Error(`Icon not found: ${t}`);return o},"getRegisteredIconData"),kj=x(async t=>{try{return await lT(t),!0}catch{return!1}},"isIconAvailable"),fc=x(async(t,e,n)=>{let r;try{r=await lT(t,e==null?void 0:e.fallbackPrefix)}catch(s){G.error(s),r=wj}const i=RU(r,e),o=PU(BU(i.body),{...i.attributes,...n});return dr(o,pn())},"getIconSVG");function cT(t,{markdownAutoWrap:e}){const r=t.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),i=sT(r);return e===!1?i.replace(/ /g,"&nbsp;"):i}x(cT,"preprocessMarkdown");function uT(t,e={}){const n=cT(t,e),r=nt.lexer(n),i=[[]];let o=0;function s(a,l="normal"){a.type==="text"?a.text.split(`
`).forEach((u,d)=>{d!==0&&(o++,i.push([])),u.split(" ").forEach(h=>{h=h.replace(/&#39;/g,"'"),h&&i[o].push({content:h,type:l})})}):a.type==="strong"||a.type==="em"?a.tokens.forEach(c=>{s(c,a.type)}):a.type==="html"&&i[o].push({content:a.text,type:"normal"})}return x(s,"processNode"),r.forEach(a=>{var l;a.type==="paragraph"?(l=a.tokens)==null||l.forEach(c=>{s(c)}):a.type==="html"?i[o].push({content:a.text,type:"normal"}):i[o].push({content:a.raw,type:"normal"})}),i}x(uT,"markdownToLines");function dT(t,{markdownAutoWrap:e}={}){const n=nt.lexer(t);function r(i){var o,s,a;return i.type==="text"?e===!1?i.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):i.text.replace(/\n */g,"<br/>"):i.type==="strong"?`<strong>${(o=i.tokens)==null?void 0:o.map(r).join("")}</strong>`:i.type==="em"?`<em>${(s=i.tokens)==null?void 0:s.map(r).join("")}</em>`:i.type==="paragraph"?`<p>${(a=i.tokens)==null?void 0:a.map(r).join("")}</p>`:i.type==="space"?"":i.type==="html"?`${i.text}`:i.type==="escape"?i.text:(G.warn(`Unsupported markdown: ${i.type}`),i.raw)}return x(r,"output"),n.map(r).join("")}x(dT,"markdownToHTML");function hT(t){return Intl.Segmenter?[...new Intl.Segmenter().segment(t)].map(e=>e.segment):[...t]}x(hT,"splitTextToChars");function fT(t,e){const n=hT(e.content);return s0(t,[],n,e.type)}x(fT,"splitWordToFitWidth");function s0(t,e,n,r){if(n.length===0)return[{content:e.join(""),type:r},{content:"",type:r}];const[i,...o]=n,s=[...e,i];return t([{content:s.join(""),type:r}])?s0(t,s,o,r):(e.length===0&&i&&(e.push(i),n.shift()),[{content:e.join(""),type:r},{content:n.join(""),type:r}])}x(s0,"splitWordToFitWidthRecursion");function pT(t,e){if(t.some(({content:n})=>n.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return Qd(t,e)}x(pT,"splitLineToFitWidth");function Qd(t,e,n=[],r=[]){if(t.length===0)return r.length>0&&n.push(r),n.length>0?n:[];let i="";t[0].content===" "&&(i=" ",t.shift());const o=t.shift()??{content:" ",type:"normal"},s=[...r];if(i!==""&&s.push({content:i,type:"normal"}),s.push(o),e(s))return Qd(t,e,n,s);if(r.length>0)n.push(r),t.unshift(o);else if(o.content){const[a,l]=fT(e,o);n.push([a]),l.content&&t.unshift(l)}return Qd(t,e,n)}x(Qd,"splitLineToFitWidthRecursion");function Wg(t,e){e&&t.attr("style",e)}x(Wg,"applyStyle");async function gT(t,e,n,r,i=!1,o=pn()){const s=t.append("foreignObject");s.attr("width",`${10*n}px`),s.attr("height",`${10*n}px`);const a=s.append("xhtml:div"),l=oa(e.label)?await gy(e.label.replace(ba.lineBreakRegex,`
`),o):dr(e.label,o),c=e.isNode?"nodeLabel":"edgeLabel",u=a.append("span");u.html(l),Wg(u,e.labelStyle),u.attr("class",`${c} ${r}`),Wg(a,e.labelStyle),a.style("display","table-cell"),a.style("white-space","nowrap"),a.style("line-height","1.5"),a.style("max-width",n+"px"),a.style("text-align","center"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),i&&a.attr("class","labelBkg");let d=a.node().getBoundingClientRect();return d.width===n&&(a.style("display","table"),a.style("white-space","break-spaces"),a.style("width",n+"px"),d=a.node().getBoundingClientRect()),s.node()}x(gT,"addHtmlSpan");function Gh(t,e,n){return t.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*n-.1+"em").attr("dy",n+"em")}x(Gh,"createTspan");function mT(t,e,n){const r=t.append("text"),i=Gh(r,1,e);Kh(i,n);const o=i.node().getComputedTextLength();return r.remove(),o}x(mT,"computeWidthOfText");function Sj(t,e,n){var s;const r=t.append("text"),i=Gh(r,1,e);Kh(i,[{content:n,type:"normal"}]);const o=(s=i.node())==null?void 0:s.getBoundingClientRect();return o&&r.remove(),o}x(Sj,"computeDimensionOfText");function yT(t,e,n,r=!1){const o=e.append("g"),s=o.insert("rect").attr("class","background").attr("style","stroke: none"),a=o.append("text").attr("y","-10.1");let l=0;for(const c of n){const u=x(h=>mT(o,1.1,h)<=t,"checkWidth"),d=u(c)?[c]:pT(c,u);for(const h of d){const f=Gh(a,l,1.1);Kh(f,h),l++}}if(r){const c=a.node().getBBox(),u=2;return s.attr("x",c.x-u).attr("y",c.y-u).attr("width",c.width+2*u).attr("height",c.height+2*u),o.node()}else return a.node()}x(yT,"createFormattedText");function Kh(t,e){t.text(""),e.forEach((n,r)=>{const i=t.append("tspan").attr("font-style",n.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",n.type==="strong"?"bold":"normal");r===0?i.text(n.content):i.text(" "+n.content)})}x(Kh,"updateTextContentAndStyles");async function bT(t,e={}){const n=[];t.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(i,o,s)=>(n.push((async()=>{const a=`${o}:${s}`;return await kj(a)?await fc(a,void 0,{class:"label-icon"}):`<i class='${dr(i,e).replace(":"," ")}'></i>`})()),i));const r=await Promise.all(n);return t.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>r.shift()??"")}x(bT,"replaceIconSubstring");var lo=x(async(t,e="",{style:n="",isTitle:r=!1,classes:i="",useHtmlLabels:o=!0,isNode:s=!0,width:a=200,addSvgBackground:l=!1}={},c)=>{if(G.debug("XYZ createText",e,n,r,i,o,s,"addSvgBackground: ",l),o){const u=dT(e,c),d=await bT(hs(u),c),h=e.replace(/\\\\/g,"\\"),f={isNode:s,label:oa(e)?h:d,labelStyle:n.replace("fill:","color:")};return await gT(t,f,a,i,l,c)}else{const u=e.replace(/<br\s*\/?>/g,"<br/>"),d=uT(u.replace("<br>","<br/>"),c),h=yT(a,t,d,e?l:!1);if(s){/stroke:/.exec(n)&&(n=n.replace("stroke:","lineColor:"));const f=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Ve(h).attr("style",f)}else{const f=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");Ve(h).select("rect").attr("style",f.replace(/background:/g,"fill:"));const p=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Ve(h).select("text").attr("style",p)}return h}},"createText");function lp(t,e,n){if(t&&t.length){const[r,i]=e,o=Math.PI/180*n,s=Math.cos(o),a=Math.sin(o);for(const l of t){const[c,u]=l;l[0]=(c-r)*s-(u-i)*a+r,l[1]=(c-r)*a+(u-i)*s+i}}}function _j(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ej(t,e,n,r=1){const i=n,o=Math.max(e,.1),s=t[0]&&t[0][0]&&typeof t[0][0]=="number"?[t]:t,a=[0,0];if(i)for(const c of s)lp(c,a,i);const l=(function(c,u,d){const h=[];for(const b of c){const C=[...b];_j(C[0],C[C.length-1])||C.push([C[0][0],C[0][1]]),C.length>2&&h.push(C)}const f=[];u=Math.max(u,.1);const p=[];for(const b of h)for(let C=0;C<b.length-1;C++){const v=b[C],k=b[C+1];if(v[1]!==k[1]){const w=Math.min(v[1],k[1]);p.push({ymin:w,ymax:Math.max(v[1],k[1]),x:w===v[1]?v[0]:k[0],islope:(k[0]-v[0])/(k[1]-v[1])})}}if(p.sort(((b,C)=>b.ymin<C.ymin?-1:b.ymin>C.ymin?1:b.x<C.x?-1:b.x>C.x?1:b.ymax===C.ymax?0:(b.ymax-C.ymax)/Math.abs(b.ymax-C.ymax))),!p.length)return f;let g=[],m=p[0].ymin,y=0;for(;g.length||p.length;){if(p.length){let b=-1;for(let C=0;C<p.length&&!(p[C].ymin>m);C++)b=C;p.splice(0,b+1).forEach((C=>{g.push({s:m,edge:C})}))}if(g=g.filter((b=>!(b.edge.ymax<=m))),g.sort(((b,C)=>b.edge.x===C.edge.x?0:(b.edge.x-C.edge.x)/Math.abs(b.edge.x-C.edge.x))),(d!==1||y%u==0)&&g.length>1)for(let b=0;b<g.length;b+=2){const C=b+1;if(C>=g.length)break;const v=g[b].edge,k=g[C].edge;f.push([[Math.round(v.x),m],[Math.round(k.x),m]])}m+=d,g.forEach((b=>{b.edge.x=b.edge.x+d*b.edge.islope})),y++}return f})(s,o,r);if(i){for(const c of s)lp(c,a,-i);(function(c,u,d){const h=[];c.forEach((f=>h.push(...f))),lp(h,u,d)})(l,a,-i)}return l}function pc(t,e){var n;const r=e.hachureAngle+90;let i=e.hachureGap;i<0&&(i=4*e.strokeWidth),i=Math.round(Math.max(i,.1));let o=1;return e.roughness>=1&&(((n=e.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(o=i),Ej(t,i,r,o||1)}class a0{constructor(e){this.helper=e}fillPolygons(e,n){return this._fillPolygons(e,n)}_fillPolygons(e,n){const r=pc(e,n);return{type:"fillSketch",ops:this.renderLines(r,n)}}renderLines(e,n){const r=[];for(const i of e)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],n));return r}}function Yh(t){const e=t[0],n=t[1];return Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))}class Tj extends a0{fillPolygons(e,n){let r=n.hachureGap;r<0&&(r=4*n.strokeWidth),r=Math.max(r,.1);const i=pc(e,Object.assign({},n,{hachureGap:r})),o=Math.PI/180*n.hachureAngle,s=[],a=.5*r*Math.cos(o),l=.5*r*Math.sin(o);for(const[c,u]of i)Yh([c,u])&&s.push([[c[0]-a,c[1]+l],[...u]],[[c[0]+a,c[1]-l],[...u]]);return{type:"fillSketch",ops:this.renderLines(s,n)}}}class Mj extends a0{fillPolygons(e,n){const r=this._fillPolygons(e,n),i=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),o=this._fillPolygons(e,i);return r.ops=r.ops.concat(o.ops),r}}class Aj{constructor(e){this.helper=e}fillPolygons(e,n){const r=pc(e,n=Object.assign({},n,{hachureAngle:0}));return this.dotsOnLines(r,n)}dotsOnLines(e,n){const r=[];let i=n.hachureGap;i<0&&(i=4*n.strokeWidth),i=Math.max(i,.1);let o=n.fillWeight;o<0&&(o=n.strokeWidth/2);const s=i/4;for(const a of e){const l=Yh(a),c=l/i,u=Math.ceil(c)-1,d=l-u*i,h=(a[0][0]+a[1][0])/2-i/4,f=Math.min(a[0][1],a[1][1]);for(let p=0;p<u;p++){const g=f+d+p*i,m=h-s+2*Math.random()*s,y=g-s+2*Math.random()*s,b=this.helper.ellipse(m,y,o,o,n);r.push(...b.ops)}}return{type:"fillSketch",ops:r}}}class Nj{constructor(e){this.helper=e}fillPolygons(e,n){const r=pc(e,n);return{type:"fillSketch",ops:this.dashedLine(r,n)}}dashedLine(e,n){const r=n.dashOffset<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashOffset,i=n.dashGap<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashGap,o=[];return e.forEach((s=>{const a=Yh(s),l=Math.floor(a/(r+i)),c=(a+i-l*(r+i))/2;let u=s[0],d=s[1];u[0]>d[0]&&(u=s[1],d=s[0]);const h=Math.atan((d[1]-u[1])/(d[0]-u[0]));for(let f=0;f<l;f++){const p=f*(r+i),g=p+r,m=[u[0]+p*Math.cos(h)+c*Math.cos(h),u[1]+p*Math.sin(h)+c*Math.sin(h)],y=[u[0]+g*Math.cos(h)+c*Math.cos(h),u[1]+g*Math.sin(h)+c*Math.sin(h)];o.push(...this.helper.doubleLineOps(m[0],m[1],y[0],y[1],n))}})),o}}class Oj{constructor(e){this.helper=e}fillPolygons(e,n){const r=n.hachureGap<0?4*n.strokeWidth:n.hachureGap,i=n.zigzagOffset<0?r:n.zigzagOffset,o=pc(e,n=Object.assign({},n,{hachureGap:r+i}));return{type:"fillSketch",ops:this.zigzagLines(o,i,n)}}zigzagLines(e,n,r){const i=[];return e.forEach((o=>{const s=Yh(o),a=Math.round(s/(2*n));let l=o[0],c=o[1];l[0]>c[0]&&(l=o[1],c=o[0]);const u=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let d=0;d<a;d++){const h=2*d*n,f=2*(d+1)*n,p=Math.sqrt(2*Math.pow(n,2)),g=[l[0]+h*Math.cos(u),l[1]+h*Math.sin(u)],m=[l[0]+f*Math.cos(u),l[1]+f*Math.sin(u)],y=[g[0]+p*Math.cos(u+Math.PI/4),g[1]+p*Math.sin(u+Math.PI/4)];i.push(...this.helper.doubleLineOps(g[0],g[1],y[0],y[1],r),...this.helper.doubleLineOps(y[0],y[1],m[0],m[1],r))}})),i}}const On={};let Lj=class{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}};const Rj=0,cp=1,H1=2,Zc={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function up(t,e){return t.type===e}function l0(t){const e=[],n=(function(s){const a=new Array;for(;s!=="";)if(s.match(/^([ \t\r\n,]+)/))s=s.substr(RegExp.$1.length);else if(s.match(/^([aAcChHlLmMqQsStTvVzZ])/))a[a.length]={type:Rj,text:RegExp.$1},s=s.substr(RegExp.$1.length);else{if(!s.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];a[a.length]={type:cp,text:`${parseFloat(RegExp.$1)}`},s=s.substr(RegExp.$1.length)}return a[a.length]={type:H1,text:""},a})(t);let r="BOD",i=0,o=n[i];for(;!up(o,H1);){let s=0;const a=[];if(r==="BOD"){if(o.text!=="M"&&o.text!=="m")return l0("M0,0"+t);i++,s=Zc[o.text],r=o.text}else up(o,cp)?s=Zc[r]:(i++,s=Zc[o.text],r=o.text);if(!(i+s<n.length))throw new Error("Path data ended short");for(let l=i;l<i+s;l++){const c=n[l];if(!up(c,cp))throw new Error("Param not a number: "+r+","+c.text);a[a.length]=+c.text}if(typeof Zc[r]!="number")throw new Error("Bad segment: "+r);{const l={key:r,data:a};e.push(l),i+=s,o=n[i],r==="M"&&(r="L"),r==="m"&&(r="l")}}return e}function xT(t){let e=0,n=0,r=0,i=0;const o=[];for(const{key:s,data:a}of t)switch(s){case"M":o.push({key:"M",data:[...a]}),[e,n]=a,[r,i]=a;break;case"m":e+=a[0],n+=a[1],o.push({key:"M",data:[e,n]}),r=e,i=n;break;case"L":o.push({key:"L",data:[...a]}),[e,n]=a;break;case"l":e+=a[0],n+=a[1],o.push({key:"L",data:[e,n]});break;case"C":o.push({key:"C",data:[...a]}),e=a[4],n=a[5];break;case"c":{const l=a.map(((c,u)=>u%2?c+n:c+e));o.push({key:"C",data:l}),e=l[4],n=l[5];break}case"Q":o.push({key:"Q",data:[...a]}),e=a[2],n=a[3];break;case"q":{const l=a.map(((c,u)=>u%2?c+n:c+e));o.push({key:"Q",data:l}),e=l[2],n=l[3];break}case"A":o.push({key:"A",data:[...a]}),e=a[5],n=a[6];break;case"a":e+=a[5],n+=a[6],o.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],e,n]});break;case"H":o.push({key:"H",data:[...a]}),e=a[0];break;case"h":e+=a[0],o.push({key:"H",data:[e]});break;case"V":o.push({key:"V",data:[...a]}),n=a[0];break;case"v":n+=a[0],o.push({key:"V",data:[n]});break;case"S":o.push({key:"S",data:[...a]}),e=a[2],n=a[3];break;case"s":{const l=a.map(((c,u)=>u%2?c+n:c+e));o.push({key:"S",data:l}),e=l[2],n=l[3];break}case"T":o.push({key:"T",data:[...a]}),e=a[0],n=a[1];break;case"t":e+=a[0],n+=a[1],o.push({key:"T",data:[e,n]});break;case"Z":case"z":o.push({key:"Z",data:[]}),e=r,n=i}return o}function vT(t){const e=[];let n="",r=0,i=0,o=0,s=0,a=0,l=0;for(const{key:c,data:u}of t){switch(c){case"M":e.push({key:"M",data:[...u]}),[r,i]=u,[o,s]=u;break;case"C":e.push({key:"C",data:[...u]}),r=u[4],i=u[5],a=u[2],l=u[3];break;case"L":e.push({key:"L",data:[...u]}),[r,i]=u;break;case"H":r=u[0],e.push({key:"L",data:[r,i]});break;case"V":i=u[0],e.push({key:"L",data:[r,i]});break;case"S":{let d=0,h=0;n==="C"||n==="S"?(d=r+(r-a),h=i+(i-l)):(d=r,h=i),e.push({key:"C",data:[d,h,...u]}),a=u[0],l=u[1],r=u[2],i=u[3];break}case"T":{const[d,h]=u;let f=0,p=0;n==="Q"||n==="T"?(f=r+(r-a),p=i+(i-l)):(f=r,p=i);const g=r+2*(f-r)/3,m=i+2*(p-i)/3,y=d+2*(f-d)/3,b=h+2*(p-h)/3;e.push({key:"C",data:[g,m,y,b,d,h]}),a=f,l=p,r=d,i=h;break}case"Q":{const[d,h,f,p]=u,g=r+2*(d-r)/3,m=i+2*(h-i)/3,y=f+2*(d-f)/3,b=p+2*(h-p)/3;e.push({key:"C",data:[g,m,y,b,f,p]}),a=d,l=h,r=f,i=p;break}case"A":{const d=Math.abs(u[0]),h=Math.abs(u[1]),f=u[2],p=u[3],g=u[4],m=u[5],y=u[6];d===0||h===0?(e.push({key:"C",data:[r,i,m,y,m,y]}),r=m,i=y):(r!==m||i!==y)&&(wT(r,i,m,y,d,h,f,p,g).forEach((function(b){e.push({key:"C",data:b})})),r=m,i=y);break}case"Z":e.push({key:"Z",data:[]}),r=o,i=s}n=c}return e}function za(t,e,n){return[t*Math.cos(n)-e*Math.sin(n),t*Math.sin(n)+e*Math.cos(n)]}function wT(t,e,n,r,i,o,s,a,l,c){const u=(d=s,Math.PI*d/180);var d;let h=[],f=0,p=0,g=0,m=0;if(c)[f,p,g,m]=c;else{[t,e]=za(t,e,-u),[n,r]=za(n,r,-u);const B=(t-n)/2,A=(e-r)/2;let M=B*B/(i*i)+A*A/(o*o);M>1&&(M=Math.sqrt(M),i*=M,o*=M);const L=i*i,F=o*o,I=L*F-L*A*A-F*B*B,q=L*A*A+F*B*B,Z=(a===l?-1:1)*Math.sqrt(Math.abs(I/q));g=Z*i*A/o+(t+n)/2,m=Z*-o*B/i+(e+r)/2,f=Math.asin(parseFloat(((e-m)/o).toFixed(9))),p=Math.asin(parseFloat(((r-m)/o).toFixed(9))),t<g&&(f=Math.PI-f),n<g&&(p=Math.PI-p),f<0&&(f=2*Math.PI+f),p<0&&(p=2*Math.PI+p),l&&f>p&&(f-=2*Math.PI),!l&&p>f&&(p-=2*Math.PI)}let y=p-f;if(Math.abs(y)>120*Math.PI/180){const B=p,A=n,M=r;p=l&&p>f?f+120*Math.PI/180*1:f+120*Math.PI/180*-1,h=wT(n=g+i*Math.cos(p),r=m+o*Math.sin(p),A,M,i,o,s,0,l,[p,B,g,m])}y=p-f;const b=Math.cos(f),C=Math.sin(f),v=Math.cos(p),k=Math.sin(p),w=Math.tan(y/4),S=4/3*i*w,E=4/3*o*w,R=[t,e],$=[t+S*C,e-E*b],T=[n+S*k,r-E*v],P=[n,r];if($[0]=2*R[0]-$[0],$[1]=2*R[1]-$[1],c)return[$,T,P].concat(h);{h=[$,T,P].concat(h);const B=[];for(let A=0;A<h.length;A+=3){const M=za(h[A][0],h[A][1],u),L=za(h[A+1][0],h[A+1][1],u),F=za(h[A+2][0],h[A+2][1],u);B.push([M[0],M[1],L[0],L[1],F[0],F[1]])}return B}}const Ij={randOffset:function(t,e){return Re(t,e)},randOffsetWithRange:function(t,e,n){return eh(t,e,n)},ellipse:function(t,e,n,r,i){const o=kT(n,r,i);return Ug(t,e,i,o).opset},doubleLineOps:function(t,e,n,r,i){return no(t,e,n,r,i,!0)}};function CT(t,e,n,r,i){return{type:"path",ops:no(t,e,n,r,i)}}function _u(t,e,n){const r=(t||[]).length;if(r>2){const i=[];for(let o=0;o<r-1;o++)i.push(...no(t[o][0],t[o][1],t[o+1][0],t[o+1][1],n));return e&&i.push(...no(t[r-1][0],t[r-1][1],t[0][0],t[0][1],n)),{type:"path",ops:i}}return r===2?CT(t[0][0],t[0][1],t[1][0],t[1][1],n):{type:"path",ops:[]}}function Dj(t,e,n,r,i){return(function(o,s){return _u(o,!0,s)})([[t,e],[t+n,e],[t+n,e+r],[t,e+r]],i)}function W1(t,e){if(t.length){const n=typeof t[0][0]=="number"?[t]:t,r=Jc(n[0],1*(1+.2*e.roughness),e),i=e.disableMultiStroke?[]:Jc(n[0],1.5*(1+.22*e.roughness),q1(e));for(let o=1;o<n.length;o++){const s=n[o];if(s.length){const a=Jc(s,1*(1+.2*e.roughness),e),l=e.disableMultiStroke?[]:Jc(s,1.5*(1+.22*e.roughness),q1(e));for(const c of a)c.op!=="move"&&r.push(c);for(const c of l)c.op!=="move"&&i.push(c)}}return{type:"path",ops:r.concat(i)}}return{type:"path",ops:[]}}function kT(t,e,n){const r=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),o=2*Math.PI/i;let s=Math.abs(t/2),a=Math.abs(e/2);const l=1-n.curveFitting;return s+=Re(s*l,n),a+=Re(a*l,n),{increment:o,rx:s,ry:a}}function Ug(t,e,n,r){const[i,o]=V1(r.increment,t,e,r.rx,r.ry,1,r.increment*eh(.1,eh(.4,1,n),n),n);let s=th(i,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[a]=V1(r.increment,t,e,r.rx,r.ry,1.5,0,n),l=th(a,null,n);s=s.concat(l)}return{estimatedPoints:o,opset:{type:"path",ops:s}}}function U1(t,e,n,r,i,o,s,a,l){const c=t,u=e;let d=Math.abs(n/2),h=Math.abs(r/2);d+=Re(.01*d,l),h+=Re(.01*h,l);let f=i,p=o;for(;f<0;)f+=2*Math.PI,p+=2*Math.PI;p-f>2*Math.PI&&(f=0,p=2*Math.PI);const g=2*Math.PI/l.curveStepCount,m=Math.min(g/2,(p-f)/2),y=G1(m,c,u,d,h,f,p,1,l);if(!l.disableMultiStroke){const b=G1(m,c,u,d,h,f,p,1.5,l);y.push(...b)}return s&&(a?y.push(...no(c,u,c+d*Math.cos(f),u+h*Math.sin(f),l),...no(c,u,c+d*Math.cos(p),u+h*Math.sin(p),l)):y.push({op:"lineTo",data:[c,u]},{op:"lineTo",data:[c+d*Math.cos(f),u+h*Math.sin(f)]})),{type:"path",ops:y}}function j1(t,e){const n=vT(xT(l0(t))),r=[];let i=[0,0],o=[0,0];for(const{key:s,data:a}of n)switch(s){case"M":o=[a[0],a[1]],i=[a[0],a[1]];break;case"L":r.push(...no(o[0],o[1],a[0],a[1],e)),o=[a[0],a[1]];break;case"C":{const[l,c,u,d,h,f]=a;r.push(...Bj(l,c,u,d,h,f,o,e)),o=[h,f];break}case"Z":r.push(...no(o[0],o[1],i[0],i[1],e)),o=[i[0],i[1]]}return{type:"path",ops:r}}function dp(t,e){const n=[];for(const r of t)if(r.length){const i=e.maxRandomnessOffset||0,o=r.length;if(o>2){n.push({op:"move",data:[r[0][0]+Re(i,e),r[0][1]+Re(i,e)]});for(let s=1;s<o;s++)n.push({op:"lineTo",data:[r[s][0]+Re(i,e),r[s][1]+Re(i,e)]})}}return{type:"fillPath",ops:n}}function ks(t,e){return(function(n,r){let i=n.fillStyle||"hachure";if(!On[i])switch(i){case"zigzag":On[i]||(On[i]=new Tj(r));break;case"cross-hatch":On[i]||(On[i]=new Mj(r));break;case"dots":On[i]||(On[i]=new Aj(r));break;case"dashed":On[i]||(On[i]=new Nj(r));break;case"zigzag-line":On[i]||(On[i]=new Oj(r));break;default:i="hachure",On[i]||(On[i]=new a0(r))}return On[i]})(e,Ij).fillPolygons(t,e)}function q1(t){const e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}function ST(t){return t.randomizer||(t.randomizer=new Lj(t.seed||0)),t.randomizer.next()}function eh(t,e,n,r=1){return n.roughness*r*(ST(n)*(e-t)+t)}function Re(t,e,n=1){return eh(-t,t,e,n)}function no(t,e,n,r,i,o=!1){const s=o?i.disableMultiStrokeFill:i.disableMultiStroke,a=jg(t,e,n,r,i,!0,!1);if(s)return a;const l=jg(t,e,n,r,i,!0,!0);return a.concat(l)}function jg(t,e,n,r,i,o,s){const a=Math.pow(t-n,2)+Math.pow(e-r,2),l=Math.sqrt(a);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let u=i.maxRandomnessOffset||0;u*u*100>a&&(u=l/10);const d=u/2,h=.2+.2*ST(i);let f=i.bowing*i.maxRandomnessOffset*(r-e)/200,p=i.bowing*i.maxRandomnessOffset*(t-n)/200;f=Re(f,i,c),p=Re(p,i,c);const g=[],m=()=>Re(d,i,c),y=()=>Re(u,i,c),b=i.preserveVertices;return s?g.push({op:"move",data:[t+(b?0:m()),e+(b?0:m())]}):g.push({op:"move",data:[t+(b?0:Re(u,i,c)),e+(b?0:Re(u,i,c))]}),s?g.push({op:"bcurveTo",data:[f+t+(n-t)*h+m(),p+e+(r-e)*h+m(),f+t+2*(n-t)*h+m(),p+e+2*(r-e)*h+m(),n+(b?0:m()),r+(b?0:m())]}):g.push({op:"bcurveTo",data:[f+t+(n-t)*h+y(),p+e+(r-e)*h+y(),f+t+2*(n-t)*h+y(),p+e+2*(r-e)*h+y(),n+(b?0:y()),r+(b?0:y())]}),g}function Jc(t,e,n){if(!t.length)return[];const r=[];r.push([t[0][0]+Re(e,n),t[0][1]+Re(e,n)]),r.push([t[0][0]+Re(e,n),t[0][1]+Re(e,n)]);for(let i=1;i<t.length;i++)r.push([t[i][0]+Re(e,n),t[i][1]+Re(e,n)]),i===t.length-1&&r.push([t[i][0]+Re(e,n),t[i][1]+Re(e,n)]);return th(r,null,n)}function th(t,e,n){const r=t.length,i=[];if(r>3){const o=[],s=1-n.curveTightness;i.push({op:"move",data:[t[1][0],t[1][1]]});for(let a=1;a+2<r;a++){const l=t[a];o[0]=[l[0],l[1]],o[1]=[l[0]+(s*t[a+1][0]-s*t[a-1][0])/6,l[1]+(s*t[a+1][1]-s*t[a-1][1])/6],o[2]=[t[a+1][0]+(s*t[a][0]-s*t[a+2][0])/6,t[a+1][1]+(s*t[a][1]-s*t[a+2][1])/6],o[3]=[t[a+1][0],t[a+1][1]],i.push({op:"bcurveTo",data:[o[1][0],o[1][1],o[2][0],o[2][1],o[3][0],o[3][1]]})}}else r===3?(i.push({op:"move",data:[t[1][0],t[1][1]]}),i.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):r===2&&i.push(...jg(t[0][0],t[0][1],t[1][0],t[1][1],n,!0,!0));return i}function V1(t,e,n,r,i,o,s,a){const l=[],c=[];if(a.roughness===0){t/=4,c.push([e+r*Math.cos(-t),n+i*Math.sin(-t)]);for(let u=0;u<=2*Math.PI;u+=t){const d=[e+r*Math.cos(u),n+i*Math.sin(u)];l.push(d),c.push(d)}c.push([e+r*Math.cos(0),n+i*Math.sin(0)]),c.push([e+r*Math.cos(t),n+i*Math.sin(t)])}else{const u=Re(.5,a)-Math.PI/2;c.push([Re(o,a)+e+.9*r*Math.cos(u-t),Re(o,a)+n+.9*i*Math.sin(u-t)]);const d=2*Math.PI+u-.01;for(let h=u;h<d;h+=t){const f=[Re(o,a)+e+r*Math.cos(h),Re(o,a)+n+i*Math.sin(h)];l.push(f),c.push(f)}c.push([Re(o,a)+e+r*Math.cos(u+2*Math.PI+.5*s),Re(o,a)+n+i*Math.sin(u+2*Math.PI+.5*s)]),c.push([Re(o,a)+e+.98*r*Math.cos(u+s),Re(o,a)+n+.98*i*Math.sin(u+s)]),c.push([Re(o,a)+e+.9*r*Math.cos(u+.5*s),Re(o,a)+n+.9*i*Math.sin(u+.5*s)])}return[c,l]}function G1(t,e,n,r,i,o,s,a,l){const c=o+Re(.1,l),u=[];u.push([Re(a,l)+e+.9*r*Math.cos(c-t),Re(a,l)+n+.9*i*Math.sin(c-t)]);for(let d=c;d<=s;d+=t)u.push([Re(a,l)+e+r*Math.cos(d),Re(a,l)+n+i*Math.sin(d)]);return u.push([e+r*Math.cos(s),n+i*Math.sin(s)]),u.push([e+r*Math.cos(s),n+i*Math.sin(s)]),th(u,null,l)}function Bj(t,e,n,r,i,o,s,a){const l=[],c=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let u=[0,0];const d=a.disableMultiStroke?1:2,h=a.preserveVertices;for(let f=0;f<d;f++)f===0?l.push({op:"move",data:[s[0],s[1]]}):l.push({op:"move",data:[s[0]+(h?0:Re(c[0],a)),s[1]+(h?0:Re(c[0],a))]}),u=h?[i,o]:[i+Re(c[f],a),o+Re(c[f],a)],l.push({op:"bcurveTo",data:[t+Re(c[f],a),e+Re(c[f],a),n+Re(c[f],a),r+Re(c[f],a),u[0],u[1]]});return l}function Ha(t){return[...t]}function K1(t,e=0){const n=t.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(n===3)r.push(Ha(t[0]),Ha(t[1]),Ha(t[2]),Ha(t[2]));else{const i=[];i.push(t[0],t[0]);for(let a=1;a<t.length;a++)i.push(t[a]),a===t.length-1&&i.push(t[a]);const o=[],s=1-e;r.push(Ha(i[0]));for(let a=1;a+2<i.length;a++){const l=i[a];o[0]=[l[0],l[1]],o[1]=[l[0]+(s*i[a+1][0]-s*i[a-1][0])/6,l[1]+(s*i[a+1][1]-s*i[a-1][1])/6],o[2]=[i[a+1][0]+(s*i[a][0]-s*i[a+2][0])/6,i[a+1][1]+(s*i[a][1]-s*i[a+2][1])/6],o[3]=[i[a+1][0],i[a+1][1]],r.push(o[1],o[2],o[3])}}return r}function Eu(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function Pj(t,e,n){const r=Eu(e,n);if(r===0)return Eu(t,e);let i=((t[0]-e[0])*(n[0]-e[0])+(t[1]-e[1])*(n[1]-e[1]))/r;return i=Math.max(0,Math.min(1,i)),Eu(t,Co(e,n,i))}function Co(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]}function qg(t,e,n,r){const i=r||[];if((function(a,l){const c=a[l+0],u=a[l+1],d=a[l+2],h=a[l+3];let f=3*u[0]-2*c[0]-h[0];f*=f;let p=3*u[1]-2*c[1]-h[1];p*=p;let g=3*d[0]-2*h[0]-c[0];g*=g;let m=3*d[1]-2*h[1]-c[1];return m*=m,f<g&&(f=g),p<m&&(p=m),f+p})(t,e)<n){const a=t[e+0];i.length?(o=i[i.length-1],s=a,Math.sqrt(Eu(o,s))>1&&i.push(a)):i.push(a),i.push(t[e+3])}else{const l=t[e+0],c=t[e+1],u=t[e+2],d=t[e+3],h=Co(l,c,.5),f=Co(c,u,.5),p=Co(u,d,.5),g=Co(h,f,.5),m=Co(f,p,.5),y=Co(g,m,.5);qg([l,h,g,y],0,n,i),qg([y,m,p,d],0,n,i)}var o,s;return i}function $j(t,e){return nh(t,0,t.length,e)}function nh(t,e,n,r,i){const o=i||[],s=t[e],a=t[n-1];let l=0,c=1;for(let u=e+1;u<n-1;++u){const d=Pj(t[u],s,a);d>l&&(l=d,c=u)}return Math.sqrt(l)>r?(nh(t,e,c+1,r,o),nh(t,c,n,r,o)):(o.length||o.push(s),o.push(a)),o}function hp(t,e=.15,n){const r=[],i=(t.length-1)/3;for(let o=0;o<i;o++)qg(t,3*o,e,r);return n&&n>0?nh(r,0,r.length,n):r}const qn="none";class rh{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,n,r){return{shape:e,sets:n||[],options:r||this.defaultOptions}}line(e,n,r,i,o){const s=this._o(o);return this._d("line",[CT(e,n,r,i,s)],s)}rectangle(e,n,r,i,o){const s=this._o(o),a=[],l=Dj(e,n,r,i,s);if(s.fill){const c=[[e,n],[e+r,n],[e+r,n+i],[e,n+i]];s.fillStyle==="solid"?a.push(dp([c],s)):a.push(ks([c],s))}return s.stroke!==qn&&a.push(l),this._d("rectangle",a,s)}ellipse(e,n,r,i,o){const s=this._o(o),a=[],l=kT(r,i,s),c=Ug(e,n,s,l);if(s.fill)if(s.fillStyle==="solid"){const u=Ug(e,n,s,l).opset;u.type="fillPath",a.push(u)}else a.push(ks([c.estimatedPoints],s));return s.stroke!==qn&&a.push(c.opset),this._d("ellipse",a,s)}circle(e,n,r,i){const o=this.ellipse(e,n,r,r,i);return o.shape="circle",o}linearPath(e,n){const r=this._o(n);return this._d("linearPath",[_u(e,!1,r)],r)}arc(e,n,r,i,o,s,a=!1,l){const c=this._o(l),u=[],d=U1(e,n,r,i,o,s,a,!0,c);if(a&&c.fill)if(c.fillStyle==="solid"){const h=Object.assign({},c);h.disableMultiStroke=!0;const f=U1(e,n,r,i,o,s,!0,!1,h);f.type="fillPath",u.push(f)}else u.push((function(h,f,p,g,m,y,b){const C=h,v=f;let k=Math.abs(p/2),w=Math.abs(g/2);k+=Re(.01*k,b),w+=Re(.01*w,b);let S=m,E=y;for(;S<0;)S+=2*Math.PI,E+=2*Math.PI;E-S>2*Math.PI&&(S=0,E=2*Math.PI);const R=(E-S)/b.curveStepCount,$=[];for(let T=S;T<=E;T+=R)$.push([C+k*Math.cos(T),v+w*Math.sin(T)]);return $.push([C+k*Math.cos(E),v+w*Math.sin(E)]),$.push([C,v]),ks([$],b)})(e,n,r,i,o,s,c));return c.stroke!==qn&&u.push(d),this._d("arc",u,c)}curve(e,n){const r=this._o(n),i=[],o=W1(e,r);if(r.fill&&r.fill!==qn)if(r.fillStyle==="solid"){const s=W1(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(s.ops)})}else{const s=[],a=e;if(a.length){const l=typeof a[0][0]=="number"?[a]:a;for(const c of l)c.length<3?s.push(...c):c.length===3?s.push(...hp(K1([c[0],c[0],c[1],c[2]]),10,(1+r.roughness)/2)):s.push(...hp(K1(c),10,(1+r.roughness)/2))}s.length&&i.push(ks([s],r))}return r.stroke!==qn&&i.push(o),this._d("curve",i,r)}polygon(e,n){const r=this._o(n),i=[],o=_u(e,!0,r);return r.fill&&(r.fillStyle==="solid"?i.push(dp([e],r)):i.push(ks([e],r))),r.stroke!==qn&&i.push(o),this._d("polygon",i,r)}path(e,n){const r=this._o(n),i=[];if(!e)return this._d("path",i,r);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const o=r.fill&&r.fill!=="transparent"&&r.fill!==qn,s=r.stroke!==qn,a=!!(r.simplification&&r.simplification<1),l=(function(u,d,h){const f=vT(xT(l0(u))),p=[];let g=[],m=[0,0],y=[];const b=()=>{y.length>=4&&g.push(...hp(y,d)),y=[]},C=()=>{b(),g.length&&(p.push(g),g=[])};for(const{key:k,data:w}of f)switch(k){case"M":C(),m=[w[0],w[1]],g.push(m);break;case"L":b(),g.push([w[0],w[1]]);break;case"C":if(!y.length){const S=g.length?g[g.length-1]:m;y.push([S[0],S[1]])}y.push([w[0],w[1]]),y.push([w[2],w[3]]),y.push([w[4],w[5]]);break;case"Z":b(),g.push([m[0],m[1]])}if(C(),!h)return p;const v=[];for(const k of p){const w=$j(k,h);w.length&&v.push(w)}return v})(e,1,a?4-4*(r.simplification||1):(1+r.roughness)/2),c=j1(e,r);if(o)if(r.fillStyle==="solid")if(l.length===1){const u=j1(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(u.ops)})}else i.push(dp(l,r));else i.push(ks(l,r));return s&&(a?l.forEach((u=>{i.push(_u(u,!1,r))})):i.push(c)),this._d("path",i,r)}opsToPath(e,n){let r="";for(const i of e.ops){const o=typeof n=="number"&&n>=0?i.data.map((s=>+s.toFixed(n))):i.data;switch(i.op){case"move":r+=`M${o[0]} ${o[1]} `;break;case"bcurveTo":r+=`C${o[0]} ${o[1]}, ${o[2]} ${o[3]}, ${o[4]} ${o[5]} `;break;case"lineTo":r+=`L${o[0]} ${o[1]} `}}return r.trim()}toPaths(e){const n=e.sets||[],r=e.options||this.defaultOptions,i=[];for(const o of n){let s=null;switch(o.type){case"path":s={d:this.opsToPath(o),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:qn};break;case"fillPath":s={d:this.opsToPath(o),stroke:qn,strokeWidth:0,fill:r.fill||qn};break;case"fillSketch":s=this.fillSketch(o,r)}s&&i.push(s)}return i}fillSketch(e,n){let r=n.fillWeight;return r<0&&(r=n.strokeWidth/2),{d:this.opsToPath(e),stroke:n.fill||qn,strokeWidth:r,fill:qn}}_mergedShape(e){return e.filter(((n,r)=>r===0||n.op!=="move"))}}class Fj{constructor(e,n){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new rh(n)}draw(e){const n=e.sets||[],r=e.options||this.getDefaultOptions(),i=this.ctx,o=e.options.fixedDecimalPlaceDigits;for(const s of n)switch(s.type){case"path":i.save(),i.strokeStyle=r.stroke==="none"?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,s,o),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";const a=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,s,o,a),i.restore();break}case"fillSketch":this.fillSketch(i,s,r)}}fillSketch(e,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),e.save(),r.fillLineDash&&e.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(e.lineDashOffset=r.fillLineDashOffset),e.strokeStyle=r.fill||"",e.lineWidth=i,this._drawToContext(e,n,r.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,n,r,i="nonzero"){e.beginPath();for(const o of n.ops){const s=typeof r=="number"&&r>=0?o.data.map((a=>+a.toFixed(r))):o.data;switch(o.op){case"move":e.moveTo(s[0],s[1]);break;case"bcurveTo":e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"lineTo":e.lineTo(s[0],s[1])}}n.type==="fillPath"?e.fill(i):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,n,r,i,o){const s=this.gen.line(e,n,r,i,o);return this.draw(s),s}rectangle(e,n,r,i,o){const s=this.gen.rectangle(e,n,r,i,o);return this.draw(s),s}ellipse(e,n,r,i,o){const s=this.gen.ellipse(e,n,r,i,o);return this.draw(s),s}circle(e,n,r,i){const o=this.gen.circle(e,n,r,i);return this.draw(o),o}linearPath(e,n){const r=this.gen.linearPath(e,n);return this.draw(r),r}polygon(e,n){const r=this.gen.polygon(e,n);return this.draw(r),r}arc(e,n,r,i,o,s,a=!1,l){const c=this.gen.arc(e,n,r,i,o,s,a,l);return this.draw(c),c}curve(e,n){const r=this.gen.curve(e,n);return this.draw(r),r}path(e,n){const r=this.gen.path(e,n);return this.draw(r),r}}const Qc="http://www.w3.org/2000/svg";class zj{constructor(e,n){this.svg=e,this.gen=new rh(n)}draw(e){const n=e.sets||[],r=e.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,o=i.createElementNS(Qc,"g"),s=e.options.fixedDecimalPlaceDigits;for(const a of n){let l=null;switch(a.type){case"path":l=i.createElementNS(Qc,"path"),l.setAttribute("d",this.opsToPath(a,s)),l.setAttribute("stroke",r.stroke),l.setAttribute("stroke-width",r.strokeWidth+""),l.setAttribute("fill","none"),r.strokeLineDash&&l.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break;case"fillPath":l=i.createElementNS(Qc,"path"),l.setAttribute("d",this.opsToPath(a,s)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",r.fill||""),e.shape!=="curve"&&e.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(i,a,r)}l&&o.appendChild(l)}return o}fillSketch(e,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const o=e.createElementNS(Qc,"path");return o.setAttribute("d",this.opsToPath(n,r.fixedDecimalPlaceDigits)),o.setAttribute("stroke",r.fill||""),o.setAttribute("stroke-width",i+""),o.setAttribute("fill","none"),r.fillLineDash&&o.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&o.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),o}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,n){return this.gen.opsToPath(e,n)}line(e,n,r,i,o){const s=this.gen.line(e,n,r,i,o);return this.draw(s)}rectangle(e,n,r,i,o){const s=this.gen.rectangle(e,n,r,i,o);return this.draw(s)}ellipse(e,n,r,i,o){const s=this.gen.ellipse(e,n,r,i,o);return this.draw(s)}circle(e,n,r,i){const o=this.gen.circle(e,n,r,i);return this.draw(o)}linearPath(e,n){const r=this.gen.linearPath(e,n);return this.draw(r)}polygon(e,n){const r=this.gen.polygon(e,n);return this.draw(r)}arc(e,n,r,i,o,s,a=!1,l){const c=this.gen.arc(e,n,r,i,o,s,a,l);return this.draw(c)}curve(e,n){const r=this.gen.curve(e,n);return this.draw(r)}path(e,n){const r=this.gen.path(e,n);return this.draw(r)}}var ge={canvas:(t,e)=>new Fj(t,e),svg:(t,e)=>new zj(t,e),generator:t=>new rh(t),newSeed:()=>rh.newSeed()},Ne=x(async(t,e,n)=>{var d,h;let r;const i=e.useHtmlLabels||zt((d=tt())==null?void 0:d.htmlLabels);n?r=n:r="node default";const o=t.insert("g").attr("class",r).attr("id",e.domId||e.id),s=o.insert("g").attr("class","label").attr("style",mn(e.labelStyle));let a;e.label===void 0?a="":a=typeof e.label=="string"?e.label:e.label[0];const l=await lo(s,dr(hs(a),tt()),{useHtmlLabels:i,width:e.width||((h=tt().flowchart)==null?void 0:h.wrappingWidth),cssClasses:"markdown-node-label",style:e.labelStyle,addSvgBackground:!!e.icon||!!e.img});let c=l.getBBox();const u=((e==null?void 0:e.padding)??0)/2;if(i){const f=l.children[0],p=Ve(l),g=f.getElementsByTagName("img");if(g){const m=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...g].map(y=>new Promise(b=>{function C(){if(y.style.display="flex",y.style.flexDirection="column",m){const v=tt().fontSize?tt().fontSize:window.getComputedStyle(document.body).fontSize,k=5,[w=$S.fontSize]=jh(v),S=w*k+"px";y.style.minWidth=S,y.style.maxWidth=S}else y.style.width="100%";b(y)}x(C,"setupImage"),setTimeout(()=>{y.complete&&C()}),y.addEventListener("error",C),y.addEventListener("load",C)})))}c=f.getBoundingClientRect(),p.attr("width",c.width),p.attr("height",c.height)}return i?s.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"):s.attr("transform","translate(0, "+-c.height/2+")"),e.centerLabel&&s.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),s.insert("rect",":first-child"),{shapeSvg:o,bbox:c,halfPadding:u,label:s}},"labelHelper"),fp=x(async(t,e,n)=>{var l,c,u,d,h,f;const r=n.useHtmlLabels||zt((c=(l=tt())==null?void 0:l.flowchart)==null?void 0:c.htmlLabels),i=t.insert("g").attr("class","label").attr("style",n.labelStyle||""),o=await lo(i,dr(hs(e),tt()),{useHtmlLabels:r,width:n.width||((d=(u=tt())==null?void 0:u.flowchart)==null?void 0:d.wrappingWidth),style:n.labelStyle,addSvgBackground:!!n.icon||!!n.img});let s=o.getBBox();const a=n.padding/2;if(zt((f=(h=tt())==null?void 0:h.flowchart)==null?void 0:f.htmlLabels)){const p=o.children[0],g=Ve(o);s=p.getBoundingClientRect(),g.attr("width",s.width),g.attr("height",s.height)}return r?i.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"):i.attr("transform","translate(0, "+-s.height/2+")"),n.centerLabel&&i.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),i.insert("rect",":first-child"),{shapeSvg:t,bbox:s,halfPadding:a,label:i}},"insertLabel"),be=x((t,e)=>{const n=e.node().getBBox();t.width=n.width,t.height=n.height},"updateNodeBounds"),Ae=x((t,e)=>(t.look==="handDrawn"?"rough-node":"node")+" "+t.cssClasses+" "+(e||""),"getNodeClasses");function je(t){const e=t.map((n,r)=>`${r===0?"M":"L"}${n.x},${n.y}`);return e.push("Z"),e.join(" ")}x(je,"createPathFromPoints");function ro(t,e,n,r,i,o){const s=[],l=n-t,c=r-e,u=l/o,d=2*Math.PI/u,h=e+c/2;for(let f=0;f<=50;f++){const p=f/50,g=t+p*l,m=h+i*Math.sin(d*(g-t));s.push({x:g,y:m})}return s}x(ro,"generateFullSineWavePoints");function Vl(t,e,n,r,i,o){const s=[],a=i*Math.PI/180,u=(o*Math.PI/180-a)/(r-1);for(let d=0;d<r;d++){const h=a+d*u,f=t+n*Math.cos(h),p=e+n*Math.sin(h);s.push({x:-f,y:-p})}return s}x(Vl,"generateCirclePoints");var Hj=x((t,e)=>{var n=t.x,r=t.y,i=e.x-n,o=e.y-r,s=t.width/2,a=t.height/2,l,c;return Math.abs(o)*s>Math.abs(i)*a?(o<0&&(a=-a),l=o===0?0:a*i/o,c=a):(i<0&&(s=-s),l=s,c=i===0?0:s*o/i),{x:n+l,y:r+c}},"intersectRect"),Ca=Hj;function _T(t,e){e&&t.attr("style",e)}x(_T,"applyStyle");async function ET(t){const e=Ve(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),n=e.append("xhtml:div"),r=tt();let i=t.label;t.label&&oa(t.label)&&(i=await gy(t.label.replace(ba.lineBreakRegex,`
`),r));const s='<span class="'+(t.isNode?"nodeLabel":"edgeLabel")+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+i+"</span>";return n.html(dr(s,r)),_T(n,t.labelStyle),n.style("display","inline-block"),n.style("padding-right","1px"),n.style("white-space","nowrap"),n.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}x(ET,"addHtmlLabel");var Wj=x(async(t,e,n,r)=>{let i=t||"";if(typeof i=="object"&&(i=i[0]),zt(tt().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),G.info("vertexText"+i);const o={isNode:r,label:hs(i).replace(/fa[blrs]?:fa-[\w-]+/g,a=>`<i class='${a.replace(":"," ")}'></i>`),labelStyle:e&&e.replace("fill:","color:")};return await ET(o)}else{const o=document.createElementNS("http://www.w3.org/2000/svg","text");o.setAttribute("style",e.replace("color:","fill:"));let s=[];typeof i=="string"?s=i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?s=i:s=[];for(const a of s){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),n?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=a.trim(),o.appendChild(l)}return o}},"createLabel"),Io=Wj,co=x((t,e,n,r,i)=>["M",t+i,e,"H",t+n-i,"A",i,i,0,0,1,t+n,e+i,"V",e+r-i,"A",i,i,0,0,1,t+n-i,e+r,"H",t+i,"A",i,i,0,0,1,t,e+r-i,"V",e+i,"A",i,i,0,0,1,t+i,e,"Z"].join(" "),"createRoundedRectPathD"),TT=x(async(t,e)=>{G.info("Creating subgraph rect for ",e.id,e);const n=tt(),{themeVariables:r,handDrawnSeed:i}=n,{clusterBkg:o,clusterBorder:s}=r,{labelStyles:a,nodeStyles:l,borderStyles:c,backgroundStyles:u}=ye(e),d=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),h=zt(n.flowchart.htmlLabels),f=d.insert("g").attr("class","cluster-label "),p=await lo(f,e.label,{style:e.labelStyle,useHtmlLabels:h,isNode:!0});let g=p.getBBox();if(zt(n.flowchart.htmlLabels)){const S=p.children[0],E=Ve(p);g=S.getBoundingClientRect(),E.attr("width",g.width),E.attr("height",g.height)}const m=e.width<=g.width+e.padding?g.width+e.padding:e.width;e.width<=g.width+e.padding?e.diff=(m-e.width)/2-e.padding:e.diff=-e.padding;const y=e.height,b=e.x-m/2,C=e.y-y/2;G.trace("Data ",e,JSON.stringify(e));let v;if(e.look==="handDrawn"){const S=ge.svg(d),E=me(e,{roughness:.7,fill:o,stroke:s,fillWeight:3,seed:i}),R=S.path(co(b,C,m,y,0),E);v=d.insert(()=>(G.debug("Rough node insert CXC",R),R),":first-child"),v.select("path:nth-child(2)").attr("style",c.join(";")),v.select("path").attr("style",u.join(";").replace("fill","stroke"))}else v=d.insert("rect",":first-child"),v.attr("style",l).attr("rx",e.rx).attr("ry",e.ry).attr("x",b).attr("y",C).attr("width",m).attr("height",y);const{subGraphTitleTopMargin:k}=zy(n);if(f.attr("transform",`translate(${e.x-g.width/2}, ${e.y-e.height/2+k})`),a){const S=f.select("span");S&&S.attr("style",a)}const w=v.node().getBBox();return e.offsetX=0,e.width=w.width,e.height=w.height,e.offsetY=g.height-e.padding/2,e.intersect=function(S){return Ca(e,S)},{cluster:d,labelBBox:g}},"rect"),Uj=x((t,e)=>{const n=t.insert("g").attr("class","note-cluster").attr("id",e.id),r=n.insert("rect",":first-child"),i=0*e.padding,o=i/2;r.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-o).attr("y",e.y-e.height/2-o).attr("width",e.width+i).attr("height",e.height+i).attr("fill","none");const s=r.node().getBBox();return e.width=s.width,e.height=s.height,e.intersect=function(a){return Ca(e,a)},{cluster:n,labelBBox:{width:0,height:0}}},"noteGroup"),jj=x(async(t,e)=>{const n=tt(),{themeVariables:r,handDrawnSeed:i}=n,{altBackground:o,compositeBackground:s,compositeTitleBackground:a,nodeBorder:l}=r,c=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-id",e.id).attr("data-look",e.look),u=c.insert("g",":first-child"),d=c.insert("g").attr("class","cluster-label");let h=c.append("rect");const f=d.node().appendChild(await Io(e.label,e.labelStyle,void 0,!0));let p=f.getBBox();if(zt(n.flowchart.htmlLabels)){const R=f.children[0],$=Ve(f);p=R.getBoundingClientRect(),$.attr("width",p.width),$.attr("height",p.height)}const g=0*e.padding,m=g/2,y=(e.width<=p.width+e.padding?p.width+e.padding:e.width)+g;e.width<=p.width+e.padding?e.diff=(y-e.width)/2-e.padding:e.diff=-e.padding;const b=e.height+g,C=e.height+g-p.height-6,v=e.x-y/2,k=e.y-b/2;e.width=y;const w=e.y-e.height/2-m+p.height+2;let S;if(e.look==="handDrawn"){const R=e.cssClasses.includes("statediagram-cluster-alt"),$=ge.svg(c),T=e.rx||e.ry?$.path(co(v,k,y,b,10),{roughness:.7,fill:a,fillStyle:"solid",stroke:l,seed:i}):$.rectangle(v,k,y,b,{seed:i});S=c.insert(()=>T,":first-child");const P=$.rectangle(v,w,y,C,{fill:R?o:s,fillStyle:R?"hachure":"solid",stroke:l,seed:i});S=c.insert(()=>T,":first-child"),h=c.insert(()=>P)}else S=u.insert("rect",":first-child"),S.attr("class","outer").attr("x",v).attr("y",k).attr("width",y).attr("height",b).attr("data-look",e.look),h.attr("class","inner").attr("x",v).attr("y",w).attr("width",y).attr("height",C);d.attr("transform",`translate(${e.x-p.width/2}, ${k+1-(zt(n.flowchart.htmlLabels)?0:3)})`);const E=S.node().getBBox();return e.height=E.height,e.offsetX=0,e.offsetY=p.height-e.padding/2,e.labelBBox=p,e.intersect=function(R){return Ca(e,R)},{cluster:c,labelBBox:p}},"roundedWithTitle"),qj=x(async(t,e)=>{G.info("Creating subgraph rect for ",e.id,e);const n=tt(),{themeVariables:r,handDrawnSeed:i}=n,{clusterBkg:o,clusterBorder:s}=r,{labelStyles:a,nodeStyles:l,borderStyles:c,backgroundStyles:u}=ye(e),d=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),h=zt(n.flowchart.htmlLabels),f=d.insert("g").attr("class","cluster-label "),p=await lo(f,e.label,{style:e.labelStyle,useHtmlLabels:h,isNode:!0,width:e.width});let g=p.getBBox();if(zt(n.flowchart.htmlLabels)){const S=p.children[0],E=Ve(p);g=S.getBoundingClientRect(),E.attr("width",g.width),E.attr("height",g.height)}const m=e.width<=g.width+e.padding?g.width+e.padding:e.width;e.width<=g.width+e.padding?e.diff=(m-e.width)/2-e.padding:e.diff=-e.padding;const y=e.height,b=e.x-m/2,C=e.y-y/2;G.trace("Data ",e,JSON.stringify(e));let v;if(e.look==="handDrawn"){const S=ge.svg(d),E=me(e,{roughness:.7,fill:o,stroke:s,fillWeight:4,seed:i}),R=S.path(co(b,C,m,y,e.rx),E);v=d.insert(()=>(G.debug("Rough node insert CXC",R),R),":first-child"),v.select("path:nth-child(2)").attr("style",c.join(";")),v.select("path").attr("style",u.join(";").replace("fill","stroke"))}else v=d.insert("rect",":first-child"),v.attr("style",l).attr("rx",e.rx).attr("ry",e.ry).attr("x",b).attr("y",C).attr("width",m).attr("height",y);const{subGraphTitleTopMargin:k}=zy(n);if(f.attr("transform",`translate(${e.x-g.width/2}, ${e.y-e.height/2+k})`),a){const S=f.select("span");S&&S.attr("style",a)}const w=v.node().getBBox();return e.offsetX=0,e.width=w.width,e.height=w.height,e.offsetY=g.height-e.padding/2,e.intersect=function(S){return Ca(e,S)},{cluster:d,labelBBox:g}},"kanbanSection"),Vj=x((t,e)=>{const n=tt(),{themeVariables:r,handDrawnSeed:i}=n,{nodeBorder:o}=r,s=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-look",e.look),a=s.insert("g",":first-child"),l=0*e.padding,c=e.width+l;e.diff=-e.padding;const u=e.height+l,d=e.x-c/2,h=e.y-u/2;e.width=c;let f;if(e.look==="handDrawn"){const m=ge.svg(s).rectangle(d,h,c,u,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:o,seed:i});f=s.insert(()=>m,":first-child")}else f=a.insert("rect",":first-child"),f.attr("class","divider").attr("x",d).attr("y",h).attr("width",c).attr("height",u).attr("data-look",e.look);const p=f.node().getBBox();return e.height=p.height,e.offsetX=0,e.offsetY=0,e.intersect=function(g){return Ca(e,g)},{cluster:s,labelBBox:{}}},"divider"),Gj=TT,Kj={rect:TT,squareRect:Gj,roundedWithTitle:jj,noteGroup:Uj,divider:Vj,kanbanSection:qj},MT=new Map,Yj=x(async(t,e)=>{const n=e.shape||"rect",r=await Kj[n](t,e);return MT.set(e.id,r),r},"insertCluster"),ute=x(()=>{MT=new Map},"clear");function AT(t,e){return t.intersect(e)}x(AT,"intersectNode");var Xj=AT;function NT(t,e,n,r){var i=t.x,o=t.y,s=i-r.x,a=o-r.y,l=Math.sqrt(e*e*a*a+n*n*s*s),c=Math.abs(e*n*s/l);r.x<i&&(c=-c);var u=Math.abs(e*n*a/l);return r.y<o&&(u=-u),{x:i+c,y:o+u}}x(NT,"intersectEllipse");var OT=NT;function LT(t,e,n){return OT(t,e,e,n)}x(LT,"intersectCircle");var Zj=LT;function RT(t,e,n,r){{const i=e.y-t.y,o=t.x-e.x,s=e.x*t.y-t.x*e.y,a=i*n.x+o*n.y+s,l=i*r.x+o*r.y+s,c=1e-6;if(a!==0&&l!==0&&Vg(a,l))return;const u=r.y-n.y,d=n.x-r.x,h=r.x*n.y-n.x*r.y,f=u*t.x+d*t.y+h,p=u*e.x+d*e.y+h;if(Math.abs(f)<c&&Math.abs(p)<c&&Vg(f,p))return;const g=i*d-u*o;if(g===0)return;const m=Math.abs(g/2);let y=o*h-d*s;const b=y<0?(y-m)/g:(y+m)/g;y=u*s-i*h;const C=y<0?(y-m)/g:(y+m)/g;return{x:b,y:C}}}x(RT,"intersectLine");function Vg(t,e){return t*e>0}x(Vg,"sameSign");var Jj=RT;function IT(t,e,n){let r=t.x,i=t.y,o=[],s=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach(function(u){s=Math.min(s,u.x),a=Math.min(a,u.y)}):(s=Math.min(s,e.x),a=Math.min(a,e.y));let l=r-t.width/2-s,c=i-t.height/2-a;for(let u=0;u<e.length;u++){let d=e[u],h=e[u<e.length-1?u+1:0],f=Jj(t,n,{x:l+d.x,y:c+d.y},{x:l+h.x,y:c+h.y});f&&o.push(f)}return o.length?(o.length>1&&o.sort(function(u,d){let h=u.x-n.x,f=u.y-n.y,p=Math.sqrt(h*h+f*f),g=d.x-n.x,m=d.y-n.y,y=Math.sqrt(g*g+m*m);return p<y?-1:p===y?0:1}),o[0]):t}x(IT,"intersectPolygon");var Qj=IT,ce={node:Xj,circle:Zj,ellipse:OT,polygon:Qj,rect:Ca};function DT(t,e){const{labelStyles:n}=ye(e);e.labelStyle=n;const r=Ae(e);let i=r;r||(i="anchor");const o=t.insert("g").attr("class",i).attr("id",e.domId||e.id),s=1,{cssStyles:a}=e,l=ge.svg(o),c=me(e,{fill:"black",stroke:"none",fillStyle:"solid"});e.look!=="handDrawn"&&(c.roughness=0);const u=l.circle(0,0,s*2,c),d=o.insert(()=>u,":first-child");return d.attr("class","anchor").attr("style",mn(a)),be(e,d),e.intersect=function(h){return G.info("Circle intersect",e,s,h),ce.circle(e,s,h)},o}x(DT,"anchor");function Gg(t,e,n,r,i,o,s){const l=(t+n)/2,c=(e+r)/2,u=Math.atan2(r-e,n-t),d=(n-t)/2,h=(r-e)/2,f=d/i,p=h/o,g=Math.sqrt(f**2+p**2);if(g>1)throw new Error("The given radii are too small to create an arc between the points.");const m=Math.sqrt(1-g**2),y=l+m*o*Math.sin(u)*(s?-1:1),b=c-m*i*Math.cos(u)*(s?-1:1),C=Math.atan2((e-b)/o,(t-y)/i);let k=Math.atan2((r-b)/o,(n-y)/i)-C;s&&k<0&&(k+=2*Math.PI),!s&&k>0&&(k-=2*Math.PI);const w=[];for(let S=0;S<20;S++){const E=S/19,R=C+E*k,$=y+i*Math.cos(R),T=b+o*Math.sin(R);w.push({x:$,y:T})}return w}x(Gg,"generateArcPoints");async function BT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o}=await Ne(t,e,Ae(e)),s=o.width+e.padding+20,a=o.height+e.padding,l=a/2,c=l/(2.5+a/50),{cssStyles:u}=e,d=[{x:s/2,y:-a/2},{x:-s/2,y:-a/2},...Gg(-s/2,-a/2,-s/2,a/2,c,l,!1),{x:s/2,y:a/2},...Gg(s/2,a/2,s/2,-a/2,c,l,!0)],h=ge.svg(i),f=me(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=je(d),g=h.path(p,f),m=i.insert(()=>g,":first-child");return m.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",u),r&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",r),m.attr("transform",`translate(${c/2}, 0)`),be(e,m),e.intersect=function(y){return ce.polygon(e,d,y)},i}x(BT,"bowTieRect");function uo(t,e,n,r){return t.insert("polygon",":first-child").attr("points",r.map(function(i){return i.x+","+i.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+n/2+")")}x(uo,"insertPolygonShape");async function PT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o}=await Ne(t,e,Ae(e)),s=o.height+e.padding,a=12,l=o.width+e.padding+a,c=0,u=l,d=-s,h=0,f=[{x:c+a,y:d},{x:u,y:d},{x:u,y:h},{x:c,y:h},{x:c,y:d+a},{x:c+a,y:d}];let p;const{cssStyles:g}=e;if(e.look==="handDrawn"){const m=ge.svg(i),y=me(e,{}),b=je(f),C=m.path(b,y);p=i.insert(()=>C,":first-child").attr("transform",`translate(${-l/2}, ${s/2})`),g&&p.attr("style",g)}else p=uo(i,l,s,f);return r&&p.attr("style",r),be(e,p),e.intersect=function(m){return ce.polygon(e,f,m)},i}x(PT,"card");function $T(t,e){const{nodeStyles:n}=ye(e);e.label="";const r=t.insert("g").attr("class",Ae(e)).attr("id",e.domId??e.id),{cssStyles:i}=e,o=Math.max(28,e.width??0),s=[{x:0,y:o/2},{x:o/2,y:0},{x:0,y:-o/2},{x:-o/2,y:0}],a=ge.svg(r),l=me(e,{});e.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=je(s),u=a.path(c,l),d=r.insert(()=>u,":first-child");return i&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",i),n&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",n),e.width=28,e.height=28,e.intersect=function(h){return ce.polygon(e,s,h)},r}x($T,"choice");async function c0(t,e,n){const{labelStyles:r,nodeStyles:i}=ye(e);e.labelStyle=r;const{shapeSvg:o,bbox:s,halfPadding:a}=await Ne(t,e,Ae(e)),l=(n==null?void 0:n.padding)??a,c=s.width/2+l;let u;const{cssStyles:d}=e;if(e.look==="handDrawn"){const h=ge.svg(o),f=me(e,{}),p=h.circle(0,0,c*2,f);u=o.insert(()=>p,":first-child"),u.attr("class","basic label-container").attr("style",mn(d))}else u=o.insert("circle",":first-child").attr("class","basic label-container").attr("style",i).attr("r",c).attr("cx",0).attr("cy",0);return be(e,u),e.calcIntersect=function(h,f){const p=h.width/2;return ce.circle(h,p,f)},e.intersect=function(h){return G.info("Circle intersect",e,c,h),ce.circle(e,c,h)},o}x(c0,"circle");function FT(t){const e=Math.cos(Math.PI/4),n=Math.sin(Math.PI/4),r=t*2,i={x:r/2*e,y:r/2*n},o={x:-(r/2)*e,y:r/2*n},s={x:-(r/2)*e,y:-(r/2)*n},a={x:r/2*e,y:-(r/2)*n};return`M ${o.x},${o.y} L ${a.x},${a.y}
                   M ${i.x},${i.y} L ${s.x},${s.y}`}x(FT,"createLine");function zT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n,e.label="";const i=t.insert("g").attr("class",Ae(e)).attr("id",e.domId??e.id),o=Math.max(30,(e==null?void 0:e.width)??0),{cssStyles:s}=e,a=ge.svg(i),l=me(e,{});e.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=a.circle(0,0,o*2,l),u=FT(o),d=a.path(u,l),h=i.insert(()=>c,":first-child");return h.insert(()=>d),s&&e.look!=="handDrawn"&&h.selectAll("path").attr("style",s),r&&e.look!=="handDrawn"&&h.selectAll("path").attr("style",r),be(e,h),e.intersect=function(f){return G.info("crossedCircle intersect",e,{radius:o,point:f}),ce.circle(e,o,f)},i}x(zT,"crossedCircle");function ui(t,e,n,r=100,i=0,o=180){const s=[],a=i*Math.PI/180,u=(o*Math.PI/180-a)/(r-1);for(let d=0;d<r;d++){const h=a+d*u,f=t+n*Math.cos(h),p=e+n*Math.sin(h);s.push({x:-f,y:-p})}return s}x(ui,"generateCirclePoints");async function HT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,label:s}=await Ne(t,e,Ae(e)),a=o.width+(e.padding??0),l=o.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:u}=e,d=[...ui(a/2,-l/2,c,30,-90,0),{x:-a/2-c,y:c},...ui(a/2+c*2,-c,c,20,-180,-270),...ui(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:-l/2},...ui(a/2,l/2,c,20,0,90)],h=[{x:a/2,y:-l/2-c},{x:-a/2,y:-l/2-c},...ui(a/2,-l/2,c,20,-90,0),{x:-a/2-c,y:-c},...ui(a/2+a*.1,-c,c,20,-180,-270),...ui(a/2+a*.1,c,c,20,-90,-180),{x:-a/2-c,y:l/2},...ui(a/2,l/2,c,20,0,90),{x:-a/2,y:l/2+c},{x:a/2,y:l/2+c}],f=ge.svg(i),p=me(e,{fill:"none"});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=je(d).replace("Z",""),y=f.path(m,p),b=je(h),C=f.path(b,{...p}),v=i.insert("g",":first-child");return v.insert(()=>C,":first-child").attr("stroke-opacity",0),v.insert(()=>y,":first-child"),v.attr("class","text"),u&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",u),r&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",r),v.attr("transform",`translate(${c}, 0)`),s.attr("transform",`translate(${-a/2+c-(o.x-(o.left??0))},${-l/2+(e.padding??0)/2-(o.y-(o.top??0))})`),be(e,v),e.intersect=function(k){return ce.polygon(e,h,k)},i}x(HT,"curlyBraceLeft");function di(t,e,n,r=100,i=0,o=180){const s=[],a=i*Math.PI/180,u=(o*Math.PI/180-a)/(r-1);for(let d=0;d<r;d++){const h=a+d*u,f=t+n*Math.cos(h),p=e+n*Math.sin(h);s.push({x:f,y:p})}return s}x(di,"generateCirclePoints");async function WT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,label:s}=await Ne(t,e,Ae(e)),a=o.width+(e.padding??0),l=o.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:u}=e,d=[...di(a/2,-l/2,c,20,-90,0),{x:a/2+c,y:-c},...di(a/2+c*2,-c,c,20,-180,-270),...di(a/2+c*2,c,c,20,-90,-180),{x:a/2+c,y:l/2},...di(a/2,l/2,c,20,0,90)],h=[{x:-a/2,y:-l/2-c},{x:a/2,y:-l/2-c},...di(a/2,-l/2,c,20,-90,0),{x:a/2+c,y:-c},...di(a/2+c*2,-c,c,20,-180,-270),...di(a/2+c*2,c,c,20,-90,-180),{x:a/2+c,y:l/2},...di(a/2,l/2,c,20,0,90),{x:a/2,y:l/2+c},{x:-a/2,y:l/2+c}],f=ge.svg(i),p=me(e,{fill:"none"});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=je(d).replace("Z",""),y=f.path(m,p),b=je(h),C=f.path(b,{...p}),v=i.insert("g",":first-child");return v.insert(()=>C,":first-child").attr("stroke-opacity",0),v.insert(()=>y,":first-child"),v.attr("class","text"),u&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",u),r&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",r),v.attr("transform",`translate(${-c}, 0)`),s.attr("transform",`translate(${-a/2+(e.padding??0)/2-(o.x-(o.left??0))},${-l/2+(e.padding??0)/2-(o.y-(o.top??0))})`),be(e,v),e.intersect=function(k){return ce.polygon(e,h,k)},i}x(WT,"curlyBraceRight");function Zt(t,e,n,r=100,i=0,o=180){const s=[],a=i*Math.PI/180,u=(o*Math.PI/180-a)/(r-1);for(let d=0;d<r;d++){const h=a+d*u,f=t+n*Math.cos(h),p=e+n*Math.sin(h);s.push({x:-f,y:-p})}return s}x(Zt,"generateCirclePoints");async function UT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,label:s}=await Ne(t,e,Ae(e)),a=o.width+(e.padding??0),l=o.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:u}=e,d=[...Zt(a/2,-l/2,c,30,-90,0),{x:-a/2-c,y:c},...Zt(a/2+c*2,-c,c,20,-180,-270),...Zt(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:-l/2},...Zt(a/2,l/2,c,20,0,90)],h=[...Zt(-a/2+c+c/2,-l/2,c,20,-90,-180),{x:a/2-c/2,y:c},...Zt(-a/2-c/2,-c,c,20,0,90),...Zt(-a/2-c/2,c,c,20,-90,0),{x:a/2-c/2,y:-c},...Zt(-a/2+c+c/2,l/2,c,30,-180,-270)],f=[{x:a/2,y:-l/2-c},{x:-a/2,y:-l/2-c},...Zt(a/2,-l/2,c,20,-90,0),{x:-a/2-c,y:-c},...Zt(a/2+c*2,-c,c,20,-180,-270),...Zt(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:l/2},...Zt(a/2,l/2,c,20,0,90),{x:-a/2,y:l/2+c},{x:a/2-c-c/2,y:l/2+c},...Zt(-a/2+c+c/2,-l/2,c,20,-90,-180),{x:a/2-c/2,y:c},...Zt(-a/2-c/2,-c,c,20,0,90),...Zt(-a/2-c/2,c,c,20,-90,0),{x:a/2-c/2,y:-c},...Zt(-a/2+c+c/2,l/2,c,30,-180,-270)],p=ge.svg(i),g=me(e,{fill:"none"});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=je(d).replace("Z",""),b=p.path(y,g),v=je(h).replace("Z",""),k=p.path(v,g),w=je(f),S=p.path(w,{...g}),E=i.insert("g",":first-child");return E.insert(()=>S,":first-child").attr("stroke-opacity",0),E.insert(()=>b,":first-child"),E.insert(()=>k,":first-child"),E.attr("class","text"),u&&e.look!=="handDrawn"&&E.selectAll("path").attr("style",u),r&&e.look!=="handDrawn"&&E.selectAll("path").attr("style",r),E.attr("transform",`translate(${c-c/4}, 0)`),s.attr("transform",`translate(${-a/2+(e.padding??0)/2-(o.x-(o.left??0))},${-l/2+(e.padding??0)/2-(o.y-(o.top??0))})`),be(e,E),e.intersect=function(R){return ce.polygon(e,f,R)},i}x(UT,"curlyBraces");async function jT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o}=await Ne(t,e,Ae(e)),s=80,a=20,l=Math.max(s,(o.width+(e.padding??0)*2)*1.25,(e==null?void 0:e.width)??0),c=Math.max(a,o.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=c/2,{cssStyles:d}=e,h=ge.svg(i),f=me(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=l,g=c,m=p-u,y=g/4,b=[{x:m,y:0},{x:y,y:0},{x:0,y:g/2},{x:y,y:g},{x:m,y:g},...Vl(-m,-g/2,u,50,270,90)],C=je(b),v=h.path(C,f),k=i.insert(()=>v,":first-child");return k.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&k.selectChildren("path").attr("style",d),r&&e.look!=="handDrawn"&&k.selectChildren("path").attr("style",r),k.attr("transform",`translate(${-l/2}, ${-c/2})`),be(e,k),e.intersect=function(w){return ce.polygon(e,b,w)},i}x(jT,"curvedTrapezoid");var eq=x((t,e,n,r,i,o)=>[`M${t},${e+o}`,`a${i},${o} 0,0,0 ${n},0`,`a${i},${o} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${o} 0,0,0 ${n},0`,`l0,${-r}`].join(" "),"createCylinderPathD"),tq=x((t,e,n,r,i,o)=>[`M${t},${e+o}`,`M${t+n},${e+o}`,`a${i},${o} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${o} 0,0,0 ${n},0`,`l0,${-r}`].join(" "),"createOuterCylinderPathD"),nq=x((t,e,n,r,i,o)=>[`M${t-n/2},${-r/2}`,`a${i},${o} 0,0,0 ${n},0`].join(" "),"createInnerCylinderPathD");async function qT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,label:s}=await Ne(t,e,Ae(e)),a=Math.max(o.width+e.padding,e.width??0),l=a/2,c=l/(2.5+a/50),u=Math.max(o.height+c+e.padding,e.height??0);let d;const{cssStyles:h}=e;if(e.look==="handDrawn"){const f=ge.svg(i),p=tq(0,0,a,u,l,c),g=nq(0,c,a,u,l,c),m=f.path(p,me(e,{})),y=f.path(g,me(e,{fill:"none"}));d=i.insert(()=>y,":first-child"),d=i.insert(()=>m,":first-child"),d.attr("class","basic label-container"),h&&d.attr("style",h)}else{const f=eq(0,0,a,u,l,c);d=i.insert("path",":first-child").attr("d",f).attr("class","basic label-container").attr("style",mn(h)).attr("style",r)}return d.attr("label-offset-y",c),d.attr("transform",`translate(${-a/2}, ${-(u/2+c)})`),be(e,d),s.attr("transform",`translate(${-(o.width/2)-(o.x-(o.left??0))}, ${-(o.height/2)+(e.padding??0)/1.5-(o.y-(o.top??0))})`),e.intersect=function(f){const p=ce.rect(e,f),g=p.x-(e.x??0);if(l!=0&&(Math.abs(g)<(e.width??0)/2||Math.abs(g)==(e.width??0)/2&&Math.abs(p.y-(e.y??0))>(e.height??0)/2-c)){let m=c*c*(1-g*g/(l*l));m>0&&(m=Math.sqrt(m)),m=c-m,f.y-(e.y??0)>0&&(m=-m),p.y+=m}return p},i}x(qT,"cylinder");async function VT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,label:s}=await Ne(t,e,Ae(e)),a=o.width+e.padding,l=o.height+e.padding,c=l*.2,u=-a/2,d=-l/2-c/2,{cssStyles:h}=e,f=ge.svg(i),p=me(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:u,y:d+c},{x:-u,y:d+c},{x:-u,y:-d},{x:u,y:-d},{x:u,y:d},{x:-u,y:d},{x:-u,y:d+c}],m=f.polygon(g.map(b=>[b.x,b.y]),p),y=i.insert(()=>m,":first-child");return y.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",h),r&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",r),s.attr("transform",`translate(${u+(e.padding??0)/2-(o.x-(o.left??0))}, ${d+c+(e.padding??0)/2-(o.y-(o.top??0))})`),be(e,y),e.intersect=function(b){return ce.rect(e,b)},i}x(VT,"dividedRectangle");async function GT(t,e){var h,f;const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,halfPadding:s}=await Ne(t,e,Ae(e)),l=o.width/2+s+5,c=o.width/2+s;let u;const{cssStyles:d}=e;if(e.look==="handDrawn"){const p=ge.svg(i),g=me(e,{roughness:.2,strokeWidth:2.5}),m=me(e,{roughness:.2,strokeWidth:1.5}),y=p.circle(0,0,l*2,g),b=p.circle(0,0,c*2,m);u=i.insert("g",":first-child"),u.attr("class",mn(e.cssClasses)).attr("style",mn(d)),(h=u.node())==null||h.appendChild(y),(f=u.node())==null||f.appendChild(b)}else{u=i.insert("g",":first-child");const p=u.insert("circle",":first-child"),g=u.insert("circle");u.attr("class","basic label-container").attr("style",r),p.attr("class","outer-circle").attr("style",r).attr("r",l).attr("cx",0).attr("cy",0),g.attr("class","inner-circle").attr("style",r).attr("r",c).attr("cx",0).attr("cy",0)}return be(e,u),e.intersect=function(p){return G.info("DoubleCircle intersect",e,l,p),ce.circle(e,l,p)},i}x(GT,"doublecircle");function KT(t,e,{config:{themeVariables:n}}){const{labelStyles:r,nodeStyles:i}=ye(e);e.label="",e.labelStyle=r;const o=t.insert("g").attr("class",Ae(e)).attr("id",e.domId??e.id),s=7,{cssStyles:a}=e,l=ge.svg(o),{nodeBorder:c}=n,u=me(e,{fillStyle:"solid"});e.look!=="handDrawn"&&(u.roughness=0);const d=l.circle(0,0,s*2,u),h=o.insert(()=>d,":first-child");return h.selectAll("path").attr("style",`fill: ${c} !important;`),a&&a.length>0&&e.look!=="handDrawn"&&h.selectAll("path").attr("style",a),i&&e.look!=="handDrawn"&&h.selectAll("path").attr("style",i),be(e,h),e.intersect=function(f){return G.info("filledCircle intersect",e,{radius:s,point:f}),ce.circle(e,s,f)},o}x(KT,"filledCircle");async function YT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,label:s}=await Ne(t,e,Ae(e)),a=o.width+(e.padding??0),l=a+o.height,c=a+o.height,u=[{x:0,y:-l},{x:c,y:-l},{x:c/2,y:0}],{cssStyles:d}=e,h=ge.svg(i),f=me(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=je(u),g=h.path(p,f),m=i.insert(()=>g,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return d&&e.look!=="handDrawn"&&m.selectChildren("path").attr("style",d),r&&e.look!=="handDrawn"&&m.selectChildren("path").attr("style",r),e.width=a,e.height=l,be(e,m),s.attr("transform",`translate(${-o.width/2-(o.x-(o.left??0))}, ${-l/2+(e.padding??0)/2+(o.y-(o.top??0))})`),e.intersect=function(y){return G.info("Triangle intersect",e,u,y),ce.polygon(e,u,y)},i}x(YT,"flippedTriangle");function XT(t,e,{dir:n,config:{state:r,themeVariables:i}}){const{nodeStyles:o}=ye(e);e.label="";const s=t.insert("g").attr("class",Ae(e)).attr("id",e.domId??e.id),{cssStyles:a}=e;let l=Math.max(70,(e==null?void 0:e.width)??0),c=Math.max(10,(e==null?void 0:e.height)??0);n==="LR"&&(l=Math.max(10,(e==null?void 0:e.width)??0),c=Math.max(70,(e==null?void 0:e.height)??0));const u=-1*l/2,d=-1*c/2,h=ge.svg(s),f=me(e,{stroke:i.lineColor,fill:i.lineColor});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=h.rectangle(u,d,l,c,f),g=s.insert(()=>p,":first-child");a&&e.look!=="handDrawn"&&g.selectAll("path").attr("style",a),o&&e.look!=="handDrawn"&&g.selectAll("path").attr("style",o),be(e,g);const m=(r==null?void 0:r.padding)??0;return e.width&&e.height&&(e.width+=m/2||0,e.height+=m/2||0),e.intersect=function(y){return ce.rect(e,y)},s}x(XT,"forkJoin");async function ZT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const i=80,o=50,{shapeSvg:s,bbox:a}=await Ne(t,e,Ae(e)),l=Math.max(i,a.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),c=Math.max(o,a.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=c/2,{cssStyles:d}=e,h=ge.svg(s),f=me(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:-l/2,y:-c/2},{x:l/2-u,y:-c/2},...Vl(-l/2+u,0,u,50,90,270),{x:l/2-u,y:c/2},{x:-l/2,y:c/2}],g=je(p),m=h.path(g,f),y=s.insert(()=>m,":first-child");return y.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",d),r&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",r),be(e,y),e.intersect=function(b){return G.info("Pill intersect",e,{radius:u,point:b}),ce.polygon(e,p,b)},s}x(ZT,"halfRoundedRectangle");async function JT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o}=await Ne(t,e,Ae(e)),s=o.height+(e.padding??0),a=o.width+(e.padding??0)*2.5,{cssStyles:l}=e,c=ge.svg(i),u=me(e,{});e.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");let d=a/2;const h=d/6;d=d+h;const f=s/2,p=f/2,g=d-p,m=[{x:-g,y:-f},{x:0,y:-f},{x:g,y:-f},{x:d,y:0},{x:g,y:f},{x:0,y:f},{x:-g,y:f},{x:-d,y:0}],y=je(m),b=c.path(y,u),C=i.insert(()=>b,":first-child");return C.attr("class","basic label-container"),l&&e.look!=="handDrawn"&&C.selectChildren("path").attr("style",l),r&&e.look!=="handDrawn"&&C.selectChildren("path").attr("style",r),e.width=a,e.height=s,be(e,C),e.intersect=function(v){return ce.polygon(e,m,v)},i}x(JT,"hexagon");async function QT(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.label="",e.labelStyle=n;const{shapeSvg:i}=await Ne(t,e,Ae(e)),o=Math.max(30,(e==null?void 0:e.width)??0),s=Math.max(30,(e==null?void 0:e.height)??0),{cssStyles:a}=e,l=ge.svg(i),c=me(e,{});e.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const u=[{x:0,y:0},{x:o,y:0},{x:0,y:s},{x:o,y:s}],d=je(u),h=l.path(d,c),f=i.insert(()=>h,":first-child");return f.attr("class","basic label-container"),a&&e.look!=="handDrawn"&&f.selectChildren("path").attr("style",a),r&&e.look!=="handDrawn"&&f.selectChildren("path").attr("style",r),f.attr("transform",`translate(${-o/2}, ${-s/2})`),be(e,f),e.intersect=function(p){return G.info("Pill intersect",e,{points:u}),ce.polygon(e,u,p)},i}x(QT,"hourglass");async function eM(t,e,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:i}=ye(e);e.labelStyle=i;const o=e.assetHeight??48,s=e.assetWidth??48,a=Math.max(o,s),l=r==null?void 0:r.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:u,label:d}=await Ne(t,e,"icon-shape default"),h=e.pos==="t",f=a,p=a,{nodeBorder:g}=n,{stylesMap:m}=xa(e),y=-p/2,b=-f/2,C=e.label?8:0,v=ge.svg(c),k=me(e,{stroke:"none",fill:"none"});e.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const w=v.rectangle(y,b,p,f,k),S=Math.max(p,u.width),E=f+u.height+C,R=v.rectangle(-S/2,-E/2,S,E,{...k,fill:"transparent",stroke:"none"}),$=c.insert(()=>w,":first-child"),T=c.insert(()=>R);if(e.icon){const P=c.append("g");P.html(`<g>${await fc(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const B=P.node().getBBox(),A=B.width,M=B.height,L=B.x,F=B.y;P.attr("transform",`translate(${-A/2-L},${h?u.height/2+C/2-M/2-F:-u.height/2-C/2-M/2-F})`),P.attr("style",`color: ${m.get("stroke")??g};`)}return d.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${h?-E/2:E/2-u.height})`),$.attr("transform",`translate(0,${h?u.height/2+C/2:-u.height/2-C/2})`),be(e,T),e.intersect=function(P){if(G.info("iconSquare intersect",e,P),!e.label)return ce.rect(e,P);const B=e.x??0,A=e.y??0,M=e.height??0;let L=[];return h?L=[{x:B-u.width/2,y:A-M/2},{x:B+u.width/2,y:A-M/2},{x:B+u.width/2,y:A-M/2+u.height+C},{x:B+p/2,y:A-M/2+u.height+C},{x:B+p/2,y:A+M/2},{x:B-p/2,y:A+M/2},{x:B-p/2,y:A-M/2+u.height+C},{x:B-u.width/2,y:A-M/2+u.height+C}]:L=[{x:B-p/2,y:A-M/2},{x:B+p/2,y:A-M/2},{x:B+p/2,y:A-M/2+f},{x:B+u.width/2,y:A-M/2+f},{x:B+u.width/2/2,y:A+M/2},{x:B-u.width/2,y:A+M/2},{x:B-u.width/2,y:A-M/2+f},{x:B-p/2,y:A-M/2+f}],ce.polygon(e,L,P)},c}x(eM,"icon");async function tM(t,e,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:i}=ye(e);e.labelStyle=i;const o=e.assetHeight??48,s=e.assetWidth??48,a=Math.max(o,s),l=r==null?void 0:r.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:u,label:d}=await Ne(t,e,"icon-shape default"),h=20,f=e.label?8:0,p=e.pos==="t",{nodeBorder:g,mainBkg:m}=n,{stylesMap:y}=xa(e),b=ge.svg(c),C=me(e,{});e.look!=="handDrawn"&&(C.roughness=0,C.fillStyle="solid");const v=y.get("fill");C.stroke=v??m;const k=c.append("g");e.icon&&k.html(`<g>${await fc(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const w=k.node().getBBox(),S=w.width,E=w.height,R=w.x,$=w.y,T=Math.max(S,E)*Math.SQRT2+h*2,P=b.circle(0,0,T,C),B=Math.max(T,u.width),A=T+u.height+f,M=b.rectangle(-B/2,-A/2,B,A,{...C,fill:"transparent",stroke:"none"}),L=c.insert(()=>P,":first-child"),F=c.insert(()=>M);return k.attr("transform",`translate(${-S/2-R},${p?u.height/2+f/2-E/2-$:-u.height/2-f/2-E/2-$})`),k.attr("style",`color: ${y.get("stroke")??g};`),d.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${p?-A/2:A/2-u.height})`),L.attr("transform",`translate(0,${p?u.height/2+f/2:-u.height/2-f/2})`),be(e,F),e.intersect=function(I){return G.info("iconSquare intersect",e,I),ce.rect(e,I)},c}x(tM,"iconCircle");async function nM(t,e,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:i}=ye(e);e.labelStyle=i;const o=e.assetHeight??48,s=e.assetWidth??48,a=Math.max(o,s),l=r==null?void 0:r.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:u,halfPadding:d,label:h}=await Ne(t,e,"icon-shape default"),f=e.pos==="t",p=a+d*2,g=a+d*2,{nodeBorder:m,mainBkg:y}=n,{stylesMap:b}=xa(e),C=-g/2,v=-p/2,k=e.label?8:0,w=ge.svg(c),S=me(e,{});e.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const E=b.get("fill");S.stroke=E??y;const R=w.path(co(C,v,g,p,5),S),$=Math.max(g,u.width),T=p+u.height+k,P=w.rectangle(-$/2,-T/2,$,T,{...S,fill:"transparent",stroke:"none"}),B=c.insert(()=>R,":first-child").attr("class","icon-shape2"),A=c.insert(()=>P);if(e.icon){const M=c.append("g");M.html(`<g>${await fc(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const L=M.node().getBBox(),F=L.width,I=L.height,q=L.x,Z=L.y;M.attr("transform",`translate(${-F/2-q},${f?u.height/2+k/2-I/2-Z:-u.height/2-k/2-I/2-Z})`),M.attr("style",`color: ${b.get("stroke")??m};`)}return h.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${f?-T/2:T/2-u.height})`),B.attr("transform",`translate(0,${f?u.height/2+k/2:-u.height/2-k/2})`),be(e,A),e.intersect=function(M){if(G.info("iconSquare intersect",e,M),!e.label)return ce.rect(e,M);const L=e.x??0,F=e.y??0,I=e.height??0;let q=[];return f?q=[{x:L-u.width/2,y:F-I/2},{x:L+u.width/2,y:F-I/2},{x:L+u.width/2,y:F-I/2+u.height+k},{x:L+g/2,y:F-I/2+u.height+k},{x:L+g/2,y:F+I/2},{x:L-g/2,y:F+I/2},{x:L-g/2,y:F-I/2+u.height+k},{x:L-u.width/2,y:F-I/2+u.height+k}]:q=[{x:L-g/2,y:F-I/2},{x:L+g/2,y:F-I/2},{x:L+g/2,y:F-I/2+p},{x:L+u.width/2,y:F-I/2+p},{x:L+u.width/2/2,y:F+I/2},{x:L-u.width/2,y:F+I/2},{x:L-u.width/2,y:F-I/2+p},{x:L-g/2,y:F-I/2+p}],ce.polygon(e,q,M)},c}x(nM,"iconRounded");async function rM(t,e,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:i}=ye(e);e.labelStyle=i;const o=e.assetHeight??48,s=e.assetWidth??48,a=Math.max(o,s),l=r==null?void 0:r.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:u,halfPadding:d,label:h}=await Ne(t,e,"icon-shape default"),f=e.pos==="t",p=a+d*2,g=a+d*2,{nodeBorder:m,mainBkg:y}=n,{stylesMap:b}=xa(e),C=-g/2,v=-p/2,k=e.label?8:0,w=ge.svg(c),S=me(e,{});e.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const E=b.get("fill");S.stroke=E??y;const R=w.path(co(C,v,g,p,.1),S),$=Math.max(g,u.width),T=p+u.height+k,P=w.rectangle(-$/2,-T/2,$,T,{...S,fill:"transparent",stroke:"none"}),B=c.insert(()=>R,":first-child"),A=c.insert(()=>P);if(e.icon){const M=c.append("g");M.html(`<g>${await fc(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const L=M.node().getBBox(),F=L.width,I=L.height,q=L.x,Z=L.y;M.attr("transform",`translate(${-F/2-q},${f?u.height/2+k/2-I/2-Z:-u.height/2-k/2-I/2-Z})`),M.attr("style",`color: ${b.get("stroke")??m};`)}return h.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${f?-T/2:T/2-u.height})`),B.attr("transform",`translate(0,${f?u.height/2+k/2:-u.height/2-k/2})`),be(e,A),e.intersect=function(M){if(G.info("iconSquare intersect",e,M),!e.label)return ce.rect(e,M);const L=e.x??0,F=e.y??0,I=e.height??0;let q=[];return f?q=[{x:L-u.width/2,y:F-I/2},{x:L+u.width/2,y:F-I/2},{x:L+u.width/2,y:F-I/2+u.height+k},{x:L+g/2,y:F-I/2+u.height+k},{x:L+g/2,y:F+I/2},{x:L-g/2,y:F+I/2},{x:L-g/2,y:F-I/2+u.height+k},{x:L-u.width/2,y:F-I/2+u.height+k}]:q=[{x:L-g/2,y:F-I/2},{x:L+g/2,y:F-I/2},{x:L+g/2,y:F-I/2+p},{x:L+u.width/2,y:F-I/2+p},{x:L+u.width/2/2,y:F+I/2},{x:L-u.width/2,y:F+I/2},{x:L-u.width/2,y:F-I/2+p},{x:L-g/2,y:F-I/2+p}],ce.polygon(e,q,M)},c}x(rM,"iconSquare");async function iM(t,e,{config:{flowchart:n}}){const r=new Image;r.src=(e==null?void 0:e.img)??"",await r.decode();const i=Number(r.naturalWidth.toString().replace("px","")),o=Number(r.naturalHeight.toString().replace("px",""));e.imageAspectRatio=i/o;const{labelStyles:s}=ye(e);e.labelStyle=s;const a=n==null?void 0:n.wrappingWidth;e.defaultWidth=n==null?void 0:n.wrappingWidth;const l=Math.max(e.label?a??0:0,(e==null?void 0:e.assetWidth)??i),c=e.constraint==="on"&&e!=null&&e.assetHeight?e.assetHeight*e.imageAspectRatio:l,u=e.constraint==="on"?c/e.imageAspectRatio:(e==null?void 0:e.assetHeight)??o;e.width=Math.max(c,a??0);const{shapeSvg:d,bbox:h,label:f}=await Ne(t,e,"image-shape default"),p=e.pos==="t",g=-c/2,m=-u/2,y=e.label?8:0,b=ge.svg(d),C=me(e,{});e.look!=="handDrawn"&&(C.roughness=0,C.fillStyle="solid");const v=b.rectangle(g,m,c,u,C),k=Math.max(c,h.width),w=u+h.height+y,S=b.rectangle(-k/2,-w/2,k,w,{...C,fill:"none",stroke:"none"}),E=d.insert(()=>v,":first-child"),R=d.insert(()=>S);if(e.img){const $=d.append("image");$.attr("href",e.img),$.attr("width",c),$.attr("height",u),$.attr("preserveAspectRatio","none"),$.attr("transform",`translate(${-c/2},${p?w/2-u:-w/2})`)}return f.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${p?-u/2-h.height/2-y/2:u/2-h.height/2+y/2})`),E.attr("transform",`translate(0,${p?h.height/2+y/2:-h.height/2-y/2})`),be(e,R),e.intersect=function($){if(G.info("iconSquare intersect",e,$),!e.label)return ce.rect(e,$);const T=e.x??0,P=e.y??0,B=e.height??0;let A=[];return p?A=[{x:T-h.width/2,y:P-B/2},{x:T+h.width/2,y:P-B/2},{x:T+h.width/2,y:P-B/2+h.height+y},{x:T+c/2,y:P-B/2+h.height+y},{x:T+c/2,y:P+B/2},{x:T-c/2,y:P+B/2},{x:T-c/2,y:P-B/2+h.height+y},{x:T-h.width/2,y:P-B/2+h.height+y}]:A=[{x:T-c/2,y:P-B/2},{x:T+c/2,y:P-B/2},{x:T+c/2,y:P-B/2+u},{x:T+h.width/2,y:P-B/2+u},{x:T+h.width/2/2,y:P+B/2},{x:T-h.width/2,y:P+B/2},{x:T-h.width/2,y:P-B/2+u},{x:T-c/2,y:P-B/2+u}],ce.polygon(e,A,$)},d}x(iM,"imageSquare");async function oM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o}=await Ne(t,e,Ae(e)),s=Math.max(o.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),a=Math.max(o.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),l=[{x:0,y:0},{x:s,y:0},{x:s+3*a/6,y:-a},{x:-3*a/6,y:-a}];let c;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=ge.svg(i),h=me(e,{}),f=je(l),p=d.path(f,h);c=i.insert(()=>p,":first-child").attr("transform",`translate(${-s/2}, ${a/2})`),u&&c.attr("style",u)}else c=uo(i,s,a,l);return r&&c.attr("style",r),e.width=s,e.height=a,be(e,c),e.intersect=function(d){return ce.polygon(e,l,d)},i}x(oM,"inv_trapezoid");async function Xh(t,e,n){const{labelStyles:r,nodeStyles:i}=ye(e);e.labelStyle=r;const{shapeSvg:o,bbox:s}=await Ne(t,e,Ae(e)),a=Math.max(s.width+n.labelPaddingX*2,(e==null?void 0:e.width)||0),l=Math.max(s.height+n.labelPaddingY*2,(e==null?void 0:e.height)||0),c=-a/2,u=-l/2;let d,{rx:h,ry:f}=e;const{cssStyles:p}=e;if(n!=null&&n.rx&&n.ry&&(h=n.rx,f=n.ry),e.look==="handDrawn"){const g=ge.svg(o),m=me(e,{}),y=h||f?g.path(co(c,u,a,l,h||0),m):g.rectangle(c,u,a,l,m);d=o.insert(()=>y,":first-child"),d.attr("class","basic label-container").attr("style",mn(p))}else d=o.insert("rect",":first-child"),d.attr("class","basic label-container").attr("style",i).attr("rx",mn(h)).attr("ry",mn(f)).attr("x",c).attr("y",u).attr("width",a).attr("height",l);return be(e,d),e.calcIntersect=function(g,m){return ce.rect(g,m)},e.intersect=function(g){return ce.rect(e,g)},o}x(Xh,"drawRect");async function sM(t,e){const{shapeSvg:n,bbox:r,label:i}=await Ne(t,e,"label"),o=n.insert("rect",":first-child");return o.attr("width",.1).attr("height",.1),n.attr("class","label edgeLabel"),i.attr("transform",`translate(${-(r.width/2)-(r.x-(r.left??0))}, ${-(r.height/2)-(r.y-(r.top??0))})`),be(e,o),e.intersect=function(l){return ce.rect(e,l)},n}x(sM,"labelRect");async function aM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o}=await Ne(t,e,Ae(e)),s=Math.max(o.width+(e.padding??0),(e==null?void 0:e.width)??0),a=Math.max(o.height+(e.padding??0),(e==null?void 0:e.height)??0),l=[{x:0,y:0},{x:s+3*a/6,y:0},{x:s,y:-a},{x:-(3*a)/6,y:-a}];let c;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=ge.svg(i),h=me(e,{}),f=je(l),p=d.path(f,h);c=i.insert(()=>p,":first-child").attr("transform",`translate(${-s/2}, ${a/2})`),u&&c.attr("style",u)}else c=uo(i,s,a,l);return r&&c.attr("style",r),e.width=s,e.height=a,be(e,c),e.intersect=function(d){return ce.polygon(e,l,d)},i}x(aM,"lean_left");async function lM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o}=await Ne(t,e,Ae(e)),s=Math.max(o.width+(e.padding??0),(e==null?void 0:e.width)??0),a=Math.max(o.height+(e.padding??0),(e==null?void 0:e.height)??0),l=[{x:-3*a/6,y:0},{x:s,y:0},{x:s+3*a/6,y:-a},{x:0,y:-a}];let c;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=ge.svg(i),h=me(e,{}),f=je(l),p=d.path(f,h);c=i.insert(()=>p,":first-child").attr("transform",`translate(${-s/2}, ${a/2})`),u&&c.attr("style",u)}else c=uo(i,s,a,l);return r&&c.attr("style",r),e.width=s,e.height=a,be(e,c),e.intersect=function(d){return ce.polygon(e,l,d)},i}x(lM,"lean_right");function cM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.label="",e.labelStyle=n;const i=t.insert("g").attr("class",Ae(e)).attr("id",e.domId??e.id),{cssStyles:o}=e,s=Math.max(35,(e==null?void 0:e.width)??0),a=Math.max(35,(e==null?void 0:e.height)??0),l=7,c=[{x:s,y:0},{x:0,y:a+l/2},{x:s-2*l,y:a+l/2},{x:0,y:2*a},{x:s,y:a-l/2},{x:2*l,y:a-l/2}],u=ge.svg(i),d=me(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const h=je(c),f=u.path(h,d),p=i.insert(()=>f,":first-child");return o&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",o),r&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",r),p.attr("transform",`translate(-${s/2},${-a})`),be(e,p),e.intersect=function(g){return G.info("lightningBolt intersect",e,g),ce.polygon(e,c,g)},i}x(cM,"lightningBolt");var rq=x((t,e,n,r,i,o,s)=>[`M${t},${e+o}`,`a${i},${o} 0,0,0 ${n},0`,`a${i},${o} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${o} 0,0,0 ${n},0`,`l0,${-r}`,`M${t},${e+o+s}`,`a${i},${o} 0,0,0 ${n},0`].join(" "),"createCylinderPathD"),iq=x((t,e,n,r,i,o,s)=>[`M${t},${e+o}`,`M${t+n},${e+o}`,`a${i},${o} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${o} 0,0,0 ${n},0`,`l0,${-r}`,`M${t},${e+o+s}`,`a${i},${o} 0,0,0 ${n},0`].join(" "),"createOuterCylinderPathD"),oq=x((t,e,n,r,i,o)=>[`M${t-n/2},${-r/2}`,`a${i},${o} 0,0,0 ${n},0`].join(" "),"createInnerCylinderPathD");async function uM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,label:s}=await Ne(t,e,Ae(e)),a=Math.max(o.width+(e.padding??0),e.width??0),l=a/2,c=l/(2.5+a/50),u=Math.max(o.height+c+(e.padding??0),e.height??0),d=u*.1;let h;const{cssStyles:f}=e;if(e.look==="handDrawn"){const p=ge.svg(i),g=iq(0,0,a,u,l,c,d),m=oq(0,c,a,u,l,c),y=me(e,{}),b=p.path(g,y),C=p.path(m,y);i.insert(()=>C,":first-child").attr("class","line"),h=i.insert(()=>b,":first-child"),h.attr("class","basic label-container"),f&&h.attr("style",f)}else{const p=rq(0,0,a,u,l,c,d);h=i.insert("path",":first-child").attr("d",p).attr("class","basic label-container").attr("style",mn(f)).attr("style",r)}return h.attr("label-offset-y",c),h.attr("transform",`translate(${-a/2}, ${-(u/2+c)})`),be(e,h),s.attr("transform",`translate(${-(o.width/2)-(o.x-(o.left??0))}, ${-(o.height/2)+c-(o.y-(o.top??0))})`),e.intersect=function(p){const g=ce.rect(e,p),m=g.x-(e.x??0);if(l!=0&&(Math.abs(m)<(e.width??0)/2||Math.abs(m)==(e.width??0)/2&&Math.abs(g.y-(e.y??0))>(e.height??0)/2-c)){let y=c*c*(1-m*m/(l*l));y>0&&(y=Math.sqrt(y)),y=c-y,p.y-(e.y??0)>0&&(y=-y),g.y+=y}return g},i}x(uM,"linedCylinder");async function dM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,label:s}=await Ne(t,e,Ae(e)),a=Math.max(o.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(o.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=l/4,u=l+c,{cssStyles:d}=e,h=ge.svg(i),f=me(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:-a/2-a/2*.1,y:-u/2},{x:-a/2-a/2*.1,y:u/2},...ro(-a/2-a/2*.1,u/2,a/2+a/2*.1,u/2,c,.8),{x:a/2+a/2*.1,y:-u/2},{x:-a/2-a/2*.1,y:-u/2},{x:-a/2,y:-u/2},{x:-a/2,y:u/2*1.1},{x:-a/2,y:-u/2}],g=h.polygon(p.map(y=>[y.x,y.y]),f),m=i.insert(()=>g,":first-child");return m.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",d),r&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",r),m.attr("transform",`translate(0,${-c/2})`),s.attr("transform",`translate(${-a/2+(e.padding??0)+a/2*.1/2-(o.x-(o.left??0))},${-l/2+(e.padding??0)-c/2-(o.y-(o.top??0))})`),be(e,m),e.intersect=function(y){return ce.polygon(e,p,y)},i}x(dM,"linedWaveEdgedRect");async function hM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,label:s}=await Ne(t,e,Ae(e)),a=Math.max(o.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(o.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=5,u=-a/2,d=-l/2,{cssStyles:h}=e,f=ge.svg(i),p=me(e,{}),g=[{x:u-c,y:d+c},{x:u-c,y:d+l+c},{x:u+a-c,y:d+l+c},{x:u+a-c,y:d+l},{x:u+a,y:d+l},{x:u+a,y:d+l-c},{x:u+a+c,y:d+l-c},{x:u+a+c,y:d-c},{x:u+c,y:d-c},{x:u+c,y:d},{x:u,y:d},{x:u,y:d+c}],m=[{x:u,y:d+c},{x:u+a-c,y:d+c},{x:u+a-c,y:d+l},{x:u+a,y:d+l},{x:u+a,y:d},{x:u,y:d}];e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=je(g),b=f.path(y,p),C=je(m),v=f.path(C,{...p,fill:"none"}),k=i.insert(()=>v,":first-child");return k.insert(()=>b,":first-child"),k.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&k.selectAll("path").attr("style",h),r&&e.look!=="handDrawn"&&k.selectAll("path").attr("style",r),s.attr("transform",`translate(${-(o.width/2)-c-(o.x-(o.left??0))}, ${-(o.height/2)+c-(o.y-(o.top??0))})`),be(e,k),e.intersect=function(w){return ce.polygon(e,g,w)},i}x(hM,"multiRect");async function fM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,label:s}=await Ne(t,e,Ae(e)),a=Math.max(o.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(o.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=l/4,u=l+c,d=-a/2,h=-u/2,f=5,{cssStyles:p}=e,g=ro(d-f,h+u+f,d+a-f,h+u+f,c,.8),m=g==null?void 0:g[g.length-1],y=[{x:d-f,y:h+f},{x:d-f,y:h+u+f},...g,{x:d+a-f,y:m.y-f},{x:d+a,y:m.y-f},{x:d+a,y:m.y-2*f},{x:d+a+f,y:m.y-2*f},{x:d+a+f,y:h-f},{x:d+f,y:h-f},{x:d+f,y:h},{x:d,y:h},{x:d,y:h+f}],b=[{x:d,y:h+f},{x:d+a-f,y:h+f},{x:d+a-f,y:m.y-f},{x:d+a,y:m.y-f},{x:d+a,y:h},{x:d,y:h}],C=ge.svg(i),v=me(e,{});e.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const k=je(y),w=C.path(k,v),S=je(b),E=C.path(S,v),R=i.insert(()=>w,":first-child");return R.insert(()=>E),R.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&R.selectAll("path").attr("style",p),r&&e.look!=="handDrawn"&&R.selectAll("path").attr("style",r),R.attr("transform",`translate(0,${-c/2})`),s.attr("transform",`translate(${-(o.width/2)-f-(o.x-(o.left??0))}, ${-(o.height/2)+f-c/2-(o.y-(o.top??0))})`),be(e,R),e.intersect=function($){return ce.polygon(e,y,$)},i}x(fM,"multiWaveEdgedRectangle");async function pM(t,e,{config:{themeVariables:n}}){var b;const{labelStyles:r,nodeStyles:i}=ye(e);e.labelStyle=r,e.useHtmlLabels||((b=pn().flowchart)==null?void 0:b.htmlLabels)!==!1||(e.centerLabel=!0);const{shapeSvg:s,bbox:a,label:l}=await Ne(t,e,Ae(e)),c=Math.max(a.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),u=Math.max(a.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),d=-c/2,h=-u/2,{cssStyles:f}=e,p=ge.svg(s),g=me(e,{fill:n.noteBkgColor,stroke:n.noteBorderColor});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const m=p.rectangle(d,h,c,u,g),y=s.insert(()=>m,":first-child");return y.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",f),i&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",i),l.attr("transform",`translate(${-a.width/2-(a.x-(a.left??0))}, ${-(a.height/2)-(a.y-(a.top??0))})`),be(e,y),e.intersect=function(C){return ce.rect(e,C)},s}x(pM,"note");var sq=x((t,e,n)=>[`M${t+n/2},${e}`,`L${t+n},${e-n/2}`,`L${t+n/2},${e-n}`,`L${t},${e-n/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function gM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o}=await Ne(t,e,Ae(e)),s=o.width+e.padding,a=o.height+e.padding,l=s+a,c=.5,u=[{x:l/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}];let d;const{cssStyles:h}=e;if(e.look==="handDrawn"){const f=ge.svg(i),p=me(e,{}),g=sq(0,0,l),m=f.path(g,p);d=i.insert(()=>m,":first-child").attr("transform",`translate(${-l/2+c}, ${l/2})`),h&&d.attr("style",h)}else d=uo(i,l,l,u),d.attr("transform",`translate(${-l/2+c}, ${l/2})`);return r&&d.attr("style",r),be(e,d),e.calcIntersect=function(f,p){const g=f.width,m=[{x:g/2,y:0},{x:g,y:-g/2},{x:g/2,y:-g},{x:0,y:-g/2}],y=ce.polygon(f,m,p);return{x:y.x-.5,y:y.y-.5}},e.intersect=function(f){return this.calcIntersect(e,f)},i}x(gM,"question");async function mM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,label:s}=await Ne(t,e,Ae(e)),a=Math.max(o.width+(e.padding??0),(e==null?void 0:e.width)??0),l=Math.max(o.height+(e.padding??0),(e==null?void 0:e.height)??0),c=-a/2,u=-l/2,d=u/2,h=[{x:c+d,y:u},{x:c,y:0},{x:c+d,y:-u},{x:-c,y:-u},{x:-c,y:u}],{cssStyles:f}=e,p=ge.svg(i),g=me(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const m=je(h),y=p.path(m,g),b=i.insert(()=>y,":first-child");return b.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",f),r&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",r),b.attr("transform",`translate(${-d/2},0)`),s.attr("transform",`translate(${-d/2-o.width/2-(o.x-(o.left??0))}, ${-(o.height/2)-(o.y-(o.top??0))})`),be(e,b),e.intersect=function(C){return ce.polygon(e,h,C)},i}x(mM,"rect_left_inv_arrow");async function yM(t,e){var E,R;const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;let i;e.cssClasses?i="node "+e.cssClasses:i="node default";const o=t.insert("g").attr("class",i).attr("id",e.domId||e.id),s=o.insert("g"),a=o.insert("g").attr("class","label").attr("style",r),l=e.description,c=e.label,u=a.node().appendChild(await Io(c,e.labelStyle,!0,!0));let d={width:0,height:0};if(zt((R=(E=tt())==null?void 0:E.flowchart)==null?void 0:R.htmlLabels)){const $=u.children[0],T=Ve(u);d=$.getBoundingClientRect(),T.attr("width",d.width),T.attr("height",d.height)}G.info("Text 2",l);const h=l||[],f=u.getBBox(),p=a.node().appendChild(await Io(h.join?h.join("<br/>"):h,e.labelStyle,!0,!0)),g=p.children[0],m=Ve(p);d=g.getBoundingClientRect(),m.attr("width",d.width),m.attr("height",d.height);const y=(e.padding||0)/2;Ve(p).attr("transform","translate( "+(d.width>f.width?0:(f.width-d.width)/2)+", "+(f.height+y+5)+")"),Ve(u).attr("transform","translate( "+(d.width<f.width?0:-(f.width-d.width)/2)+", 0)"),d=a.node().getBBox(),a.attr("transform","translate("+-d.width/2+", "+(-d.height/2-y+3)+")");const b=d.width+(e.padding||0),C=d.height+(e.padding||0),v=-d.width/2-y,k=-d.height/2-y;let w,S;if(e.look==="handDrawn"){const $=ge.svg(o),T=me(e,{}),P=$.path(co(v,k,b,C,e.rx||0),T),B=$.line(-d.width/2-y,-d.height/2-y+f.height+y,d.width/2+y,-d.height/2-y+f.height+y,T);S=o.insert(()=>(G.debug("Rough node insert CXC",P),B),":first-child"),w=o.insert(()=>(G.debug("Rough node insert CXC",P),P),":first-child")}else w=s.insert("rect",":first-child"),S=s.insert("line"),w.attr("class","outer title-state").attr("style",r).attr("x",-d.width/2-y).attr("y",-d.height/2-y).attr("width",d.width+(e.padding||0)).attr("height",d.height+(e.padding||0)),S.attr("class","divider").attr("x1",-d.width/2-y).attr("x2",d.width/2+y).attr("y1",-d.height/2-y+f.height+y).attr("y2",-d.height/2-y+f.height+y);return be(e,w),e.intersect=function($){return ce.rect(e,$)},o}x(yM,"rectWithTitle");function el(t,e,n,r,i,o,s){const l=(t+n)/2,c=(e+r)/2,u=Math.atan2(r-e,n-t),d=(n-t)/2,h=(r-e)/2,f=d/i,p=h/o,g=Math.sqrt(f**2+p**2);if(g>1)throw new Error("The given radii are too small to create an arc between the points.");const m=Math.sqrt(1-g**2),y=l+m*o*Math.sin(u)*(s?-1:1),b=c-m*i*Math.cos(u)*(s?-1:1),C=Math.atan2((e-b)/o,(t-y)/i);let k=Math.atan2((r-b)/o,(n-y)/i)-C;s&&k<0&&(k+=2*Math.PI),!s&&k>0&&(k-=2*Math.PI);const w=[];for(let S=0;S<20;S++){const E=S/19,R=C+E*k,$=y+i*Math.cos(R),T=b+o*Math.sin(R);w.push({x:$,y:T})}return w}x(el,"generateArcPoints");async function bM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o}=await Ne(t,e,Ae(e)),s=(e==null?void 0:e.padding)??0,a=(e==null?void 0:e.padding)??0,l=(e!=null&&e.width?e==null?void 0:e.width:o.width)+s*2,c=(e!=null&&e.height?e==null?void 0:e.height:o.height)+a*2,u=e.radius||5,d=e.taper||5,{cssStyles:h}=e,f=ge.svg(i),p=me(e,{});e.stroke&&(p.stroke=e.stroke),e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:-l/2+d,y:-c/2},{x:l/2-d,y:-c/2},...el(l/2-d,-c/2,l/2,-c/2+d,u,u,!0),{x:l/2,y:-c/2+d},{x:l/2,y:c/2-d},...el(l/2,c/2-d,l/2-d,c/2,u,u,!0),{x:l/2-d,y:c/2},{x:-l/2+d,y:c/2},...el(-l/2+d,c/2,-l/2,c/2-d,u,u,!0),{x:-l/2,y:c/2-d},{x:-l/2,y:-c/2+d},...el(-l/2,-c/2+d,-l/2+d,-c/2,u,u,!0)],m=je(g),y=f.path(m,p),b=i.insert(()=>y,":first-child");return b.attr("class","basic label-container outer-path"),h&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",h),r&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",r),be(e,b),e.intersect=function(C){return ce.polygon(e,g,C)},i}x(bM,"roundedRect");async function xM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,label:s}=await Ne(t,e,Ae(e)),a=(e==null?void 0:e.padding)??0,l=Math.max(o.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),c=Math.max(o.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=-o.width/2-a,d=-o.height/2-a,{cssStyles:h}=e,f=ge.svg(i),p=me(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:u,y:d},{x:u+l+8,y:d},{x:u+l+8,y:d+c},{x:u-8,y:d+c},{x:u-8,y:d},{x:u,y:d},{x:u,y:d+c}],m=f.polygon(g.map(b=>[b.x,b.y]),p),y=i.insert(()=>m,":first-child");return y.attr("class","basic label-container").attr("style",mn(h)),r&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",r),h&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",r),s.attr("transform",`translate(${-l/2+4+(e.padding??0)-(o.x-(o.left??0))},${-c/2+(e.padding??0)-(o.y-(o.top??0))})`),be(e,y),e.intersect=function(b){return ce.rect(e,b)},i}x(xM,"shadedProcess");async function vM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,label:s}=await Ne(t,e,Ae(e)),a=Math.max(o.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(o.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=-a/2,u=-l/2,{cssStyles:d}=e,h=ge.svg(i),f=me(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:c,y:u},{x:c,y:u+l},{x:c+a,y:u+l},{x:c+a,y:u-l/2}],g=je(p),m=h.path(g,f),y=i.insert(()=>m,":first-child");return y.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",d),r&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",r),y.attr("transform",`translate(0, ${l/4})`),s.attr("transform",`translate(${-a/2+(e.padding??0)-(o.x-(o.left??0))}, ${-l/4+(e.padding??0)-(o.y-(o.top??0))})`),be(e,y),e.intersect=function(b){return ce.polygon(e,p,b)},i}x(vM,"slopedRect");async function wM(t,e){const n={rx:0,ry:0,labelPaddingX:e.labelPaddingX??((e==null?void 0:e.padding)||0)*2,labelPaddingY:((e==null?void 0:e.padding)||0)*1};return Xh(t,e,n)}x(wM,"squareRect");async function CM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o}=await Ne(t,e,Ae(e)),s=o.height+e.padding,a=o.width+s/4+e.padding,l=s/2,{cssStyles:c}=e,u=ge.svg(i),d=me(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const h=[{x:-a/2+l,y:-s/2},{x:a/2-l,y:-s/2},...Vl(-a/2+l,0,l,50,90,270),{x:a/2-l,y:s/2},...Vl(a/2-l,0,l,50,270,450)],f=je(h),p=u.path(f,d),g=i.insert(()=>p,":first-child");return g.attr("class","basic label-container outer-path"),c&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",c),r&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",r),be(e,g),e.intersect=function(m){return ce.polygon(e,h,m)},i}x(CM,"stadium");async function kM(t,e){return Xh(t,e,{rx:5,ry:5})}x(kM,"state");function SM(t,e,{config:{themeVariables:n}}){const{labelStyles:r,nodeStyles:i}=ye(e);e.labelStyle=r;const{cssStyles:o}=e,{lineColor:s,stateBorder:a,nodeBorder:l}=n,c=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),u=ge.svg(c),d=me(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const h=u.circle(0,0,14,{...d,stroke:s,strokeWidth:2}),f=a??l,p=u.circle(0,0,5,{...d,fill:f,stroke:f,strokeWidth:2,fillStyle:"solid"}),g=c.insert(()=>h,":first-child");return g.insert(()=>p),o&&g.selectAll("path").attr("style",o),i&&g.selectAll("path").attr("style",i),be(e,g),e.intersect=function(m){return ce.circle(e,7,m)},c}x(SM,"stateEnd");function _M(t,e,{config:{themeVariables:n}}){const{lineColor:r}=n,i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let o;if(e.look==="handDrawn"){const a=ge.svg(i).circle(0,0,14,w8(r));o=i.insert(()=>a),o.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else o=i.insert("circle",":first-child"),o.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return be(e,o),e.intersect=function(s){return ce.circle(e,7,s)},i}x(_M,"stateStart");async function EM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o}=await Ne(t,e,Ae(e)),s=((e==null?void 0:e.padding)||0)/2,a=o.width+e.padding,l=o.height+e.padding,c=-o.width/2-s,u=-o.height/2-s,d=[{x:0,y:0},{x:a,y:0},{x:a,y:-l},{x:0,y:-l},{x:0,y:0},{x:-8,y:0},{x:a+8,y:0},{x:a+8,y:-l},{x:-8,y:-l},{x:-8,y:0}];if(e.look==="handDrawn"){const h=ge.svg(i),f=me(e,{}),p=h.rectangle(c-8,u,a+16,l,f),g=h.line(c,u,c,u+l,f),m=h.line(c+a,u,c+a,u+l,f);i.insert(()=>g,":first-child"),i.insert(()=>m,":first-child");const y=i.insert(()=>p,":first-child"),{cssStyles:b}=e;y.attr("class","basic label-container").attr("style",mn(b)),be(e,y)}else{const h=uo(i,a,l,d);r&&h.attr("style",r),be(e,h)}return e.intersect=function(h){return ce.polygon(e,d,h)},i}x(EM,"subroutine");async function TM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o}=await Ne(t,e,Ae(e)),s=Math.max(o.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),a=Math.max(o.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),l=-s/2,c=-a/2,u=.2*a,d=.2*a,{cssStyles:h}=e,f=ge.svg(i),p=me(e,{}),g=[{x:l-u/2,y:c},{x:l+s+u/2,y:c},{x:l+s+u/2,y:c+a},{x:l-u/2,y:c+a}],m=[{x:l+s-u/2,y:c+a},{x:l+s+u/2,y:c+a},{x:l+s+u/2,y:c+a-d}];e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=je(g),b=f.path(y,p),C=je(m),v=f.path(C,{...p,fillStyle:"solid"}),k=i.insert(()=>v,":first-child");return k.insert(()=>b,":first-child"),k.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&k.selectAll("path").attr("style",h),r&&e.look!=="handDrawn"&&k.selectAll("path").attr("style",r),be(e,k),e.intersect=function(w){return ce.polygon(e,g,w)},i}x(TM,"taggedRect");async function MM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,label:s}=await Ne(t,e,Ae(e)),a=Math.max(o.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(o.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=l/4,u=.2*a,d=.2*l,h=l+c,{cssStyles:f}=e,p=ge.svg(i),g=me(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const m=[{x:-a/2-a/2*.1,y:h/2},...ro(-a/2-a/2*.1,h/2,a/2+a/2*.1,h/2,c,.8),{x:a/2+a/2*.1,y:-h/2},{x:-a/2-a/2*.1,y:-h/2}],y=-a/2+a/2*.1,b=-h/2-d*.4,C=[{x:y+a-u,y:(b+l)*1.4},{x:y+a,y:b+l-d},{x:y+a,y:(b+l)*.9},...ro(y+a,(b+l)*1.3,y+a-u,(b+l)*1.5,-l*.03,.5)],v=je(m),k=p.path(v,g),w=je(C),S=p.path(w,{...g,fillStyle:"solid"}),E=i.insert(()=>S,":first-child");return E.insert(()=>k,":first-child"),E.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&E.selectAll("path").attr("style",f),r&&e.look!=="handDrawn"&&E.selectAll("path").attr("style",r),E.attr("transform",`translate(0,${-c/2})`),s.attr("transform",`translate(${-a/2+(e.padding??0)-(o.x-(o.left??0))},${-l/2+(e.padding??0)-c/2-(o.y-(o.top??0))})`),be(e,E),e.intersect=function(R){return ce.polygon(e,m,R)},i}x(MM,"taggedWaveEdgedRectangle");async function AM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o}=await Ne(t,e,Ae(e)),s=Math.max(o.width+e.padding,(e==null?void 0:e.width)||0),a=Math.max(o.height+e.padding,(e==null?void 0:e.height)||0),l=-s/2,c=-a/2,u=i.insert("rect",":first-child");return u.attr("class","text").attr("style",r).attr("rx",0).attr("ry",0).attr("x",l).attr("y",c).attr("width",s).attr("height",a),be(e,u),e.intersect=function(d){return ce.rect(e,d)},i}x(AM,"text");var aq=x((t,e,n,r,i,o)=>`M${t},${e}
    a${i},${o} 0,0,1 0,${-r}
    l${n},0
    a${i},${o} 0,0,1 0,${r}
    M${n},${-r}
    a${i},${o} 0,0,0 0,${r}
    l${-n},0`,"createCylinderPathD"),lq=x((t,e,n,r,i,o)=>[`M${t},${e}`,`M${t+n},${e}`,`a${i},${o} 0,0,0 0,${-r}`,`l${-n},0`,`a${i},${o} 0,0,0 0,${r}`,`l${n},0`].join(" "),"createOuterCylinderPathD"),cq=x((t,e,n,r,i,o)=>[`M${t+n/2},${-r/2}`,`a${i},${o} 0,0,0 0,${r}`].join(" "),"createInnerCylinderPathD");async function NM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,label:s,halfPadding:a}=await Ne(t,e,Ae(e)),l=e.look==="neo"?a*2:a,c=o.height+l,u=c/2,d=u/(2.5+c/50),h=o.width+d+l,{cssStyles:f}=e;let p;if(e.look==="handDrawn"){const g=ge.svg(i),m=lq(0,0,h,c,d,u),y=cq(0,0,h,c,d,u),b=g.path(m,me(e,{})),C=g.path(y,me(e,{fill:"none"}));p=i.insert(()=>C,":first-child"),p=i.insert(()=>b,":first-child"),p.attr("class","basic label-container"),f&&p.attr("style",f)}else{const g=aq(0,0,h,c,d,u);p=i.insert("path",":first-child").attr("d",g).attr("class","basic label-container").attr("style",mn(f)).attr("style",r),p.attr("class","basic label-container"),f&&p.selectAll("path").attr("style",f),r&&p.selectAll("path").attr("style",r)}return p.attr("label-offset-x",d),p.attr("transform",`translate(${-h/2}, ${c/2} )`),s.attr("transform",`translate(${-(o.width/2)-d-(o.x-(o.left??0))}, ${-(o.height/2)-(o.y-(o.top??0))})`),be(e,p),e.intersect=function(g){const m=ce.rect(e,g),y=m.y-(e.y??0);if(u!=0&&(Math.abs(y)<(e.height??0)/2||Math.abs(y)==(e.height??0)/2&&Math.abs(m.x-(e.x??0))>(e.width??0)/2-d)){let b=d*d*(1-y*y/(u*u));b!=0&&(b=Math.sqrt(Math.abs(b))),b=d-b,g.x-(e.x??0)>0&&(b=-b),m.x+=b}return m},i}x(NM,"tiltedCylinder");async function OM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o}=await Ne(t,e,Ae(e)),s=o.width+e.padding,a=o.height+e.padding,l=[{x:-3*a/6,y:0},{x:s+3*a/6,y:0},{x:s,y:-a},{x:0,y:-a}];let c;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=ge.svg(i),h=me(e,{}),f=je(l),p=d.path(f,h);c=i.insert(()=>p,":first-child").attr("transform",`translate(${-s/2}, ${a/2})`),u&&c.attr("style",u)}else c=uo(i,s,a,l);return r&&c.attr("style",r),e.width=s,e.height=a,be(e,c),e.intersect=function(d){return ce.polygon(e,l,d)},i}x(OM,"trapezoid");async function LM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o}=await Ne(t,e,Ae(e)),s=60,a=20,l=Math.max(s,o.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),c=Math.max(a,o.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),{cssStyles:u}=e,d=ge.svg(i),h=me(e,{});e.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const f=[{x:-l/2*.8,y:-c/2},{x:l/2*.8,y:-c/2},{x:l/2,y:-c/2*.6},{x:l/2,y:c/2},{x:-l/2,y:c/2},{x:-l/2,y:-c/2*.6}],p=je(f),g=d.path(p,h),m=i.insert(()=>g,":first-child");return m.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&m.selectChildren("path").attr("style",u),r&&e.look!=="handDrawn"&&m.selectChildren("path").attr("style",r),be(e,m),e.intersect=function(y){return ce.polygon(e,f,y)},i}x(LM,"trapezoidalPentagon");async function RM(t,e){var b;const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,label:s}=await Ne(t,e,Ae(e)),a=zt((b=tt().flowchart)==null?void 0:b.htmlLabels),l=o.width+(e.padding??0),c=l+o.height,u=l+o.height,d=[{x:0,y:0},{x:u,y:0},{x:u/2,y:-c}],{cssStyles:h}=e,f=ge.svg(i),p=me(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=je(d),m=f.path(g,p),y=i.insert(()=>m,":first-child").attr("transform",`translate(${-c/2}, ${c/2})`);return h&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",h),r&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",r),e.width=l,e.height=c,be(e,y),s.attr("transform",`translate(${-o.width/2-(o.x-(o.left??0))}, ${c/2-(o.height+(e.padding??0)/(a?2:1)-(o.y-(o.top??0)))})`),e.intersect=function(C){return G.info("Triangle intersect",e,d,C),ce.polygon(e,d,C)},i}x(RM,"triangle");async function IM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,label:s}=await Ne(t,e,Ae(e)),a=Math.max(o.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(o.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=l/8,u=l+c,{cssStyles:d}=e,f=70-a,p=f>0?f/2:0,g=ge.svg(i),m=me(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=[{x:-a/2-p,y:u/2},...ro(-a/2-p,u/2,a/2+p,u/2,c,.8),{x:a/2+p,y:-u/2},{x:-a/2-p,y:-u/2}],b=je(y),C=g.path(b,m),v=i.insert(()=>C,":first-child");return v.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",d),r&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",r),v.attr("transform",`translate(0,${-c/2})`),s.attr("transform",`translate(${-a/2+(e.padding??0)-(o.x-(o.left??0))},${-l/2+(e.padding??0)-c-(o.y-(o.top??0))})`),be(e,v),e.intersect=function(k){return ce.polygon(e,y,k)},i}x(IM,"waveEdgedRectangle");async function DM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o}=await Ne(t,e,Ae(e)),s=100,a=50,l=Math.max(o.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),c=Math.max(o.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=l/c;let d=l,h=c;d>h*u?h=d/u:d=h*u,d=Math.max(d,s),h=Math.max(h,a);const f=Math.min(h*.2,h/4),p=h+f*2,{cssStyles:g}=e,m=ge.svg(i),y=me(e,{});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=[{x:-d/2,y:p/2},...ro(-d/2,p/2,d/2,p/2,f,1),{x:d/2,y:-p/2},...ro(d/2,-p/2,-d/2,-p/2,f,-1)],C=je(b),v=m.path(C,y),k=i.insert(()=>v,":first-child");return k.attr("class","basic label-container"),g&&e.look!=="handDrawn"&&k.selectAll("path").attr("style",g),r&&e.look!=="handDrawn"&&k.selectAll("path").attr("style",r),be(e,k),e.intersect=function(w){return ce.polygon(e,b,w)},i}x(DM,"waveRectangle");async function BM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,label:s}=await Ne(t,e,Ae(e)),a=Math.max(o.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(o.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=5,u=-a/2,d=-l/2,{cssStyles:h}=e,f=ge.svg(i),p=me(e,{}),g=[{x:u-c,y:d-c},{x:u-c,y:d+l},{x:u+a,y:d+l},{x:u+a,y:d-c}],m=`M${u-c},${d-c} L${u+a},${d-c} L${u+a},${d+l} L${u-c},${d+l} L${u-c},${d-c}
                M${u-c},${d} L${u+a},${d}
                M${u},${d-c} L${u},${d+l}`;e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=f.path(m,p),b=i.insert(()=>y,":first-child");return b.attr("transform",`translate(${c/2}, ${c/2})`),b.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",h),r&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",r),s.attr("transform",`translate(${-(o.width/2)+c/2-(o.x-(o.left??0))}, ${-(o.height/2)+c/2-(o.y-(o.top??0))})`),be(e,b),e.intersect=function(C){return ce.polygon(e,g,C)},i}x(BM,"windowPane");async function u0(t,e){var H,Y,oe,K;const n=e;if(n.alias&&(e.label=n.alias),e.look==="handDrawn"){const{themeVariables:ne}=pn(),{background:ue}=ne,ke={...e,id:e.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${ue}`]};await u0(t,ke)}const r=pn();e.useHtmlLabels=r.htmlLabels;let i=((H=r.er)==null?void 0:H.diagramPadding)??10,o=((Y=r.er)==null?void 0:Y.entityPadding)??6;const{cssStyles:s}=e,{labelStyles:a,nodeStyles:l}=ye(e);if(n.attributes.length===0&&e.label){const ne={rx:0,ry:0,labelPaddingX:i,labelPaddingY:i*1.5};wi(e.label,r)+ne.labelPaddingX*2<r.er.minEntityWidth&&(e.width=r.er.minEntityWidth);const ue=await Xh(t,e,ne);if(!zt(r.htmlLabels)){const ke=ue.select("text"),Oe=(oe=ke.node())==null?void 0:oe.getBBox();ke.attr("transform",`translate(${-Oe.width/2}, 0)`)}return ue}r.htmlLabels||(i*=1.25,o*=1.25);let c=Ae(e);c||(c="node default");const u=t.insert("g").attr("class",c).attr("id",e.domId||e.id),d=await Ls(u,e.label??"",r,0,0,["name"],a);d.height+=o;let h=0;const f=[],p=[];let g=0,m=0,y=0,b=0,C=!0,v=!0;for(const ne of n.attributes){const ue=await Ls(u,ne.type,r,0,h,["attribute-type"],a);g=Math.max(g,ue.width+i);const ke=await Ls(u,ne.name,r,0,h,["attribute-name"],a);m=Math.max(m,ke.width+i);const Oe=await Ls(u,ne.keys.join(),r,0,h,["attribute-keys"],a);y=Math.max(y,Oe.width+i);const De=await Ls(u,ne.comment,r,0,h,["attribute-comment"],a);b=Math.max(b,De.width+i);const Xe=Math.max(ue.height,ke.height,Oe.height,De.height)+o;p.push({yOffset:h,rowHeight:Xe}),h+=Xe}let k=4;y<=i&&(C=!1,y=0,k--),b<=i&&(v=!1,b=0,k--);const w=u.node().getBBox();if(d.width+i*2-(g+m+y+b)>0){const ne=d.width+i*2-(g+m+y+b);g+=ne/k,m+=ne/k,y>0&&(y+=ne/k),b>0&&(b+=ne/k)}const S=g+m+y+b,E=ge.svg(u),R=me(e,{});e.look!=="handDrawn"&&(R.roughness=0,R.fillStyle="solid");let $=0;p.length>0&&($=p.reduce((ne,ue)=>ne+((ue==null?void 0:ue.rowHeight)??0),0));const T=Math.max(w.width+i*2,(e==null?void 0:e.width)||0,S),P=Math.max(($??0)+d.height,(e==null?void 0:e.height)||0),B=-T/2,A=-P/2;u.selectAll("g:not(:first-child)").each((ne,ue,ke)=>{const Oe=Ve(ke[ue]),De=Oe.attr("transform");let Xe=0,Et=0;if(De){const Vt=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(De);Vt&&(Xe=parseFloat(Vt[1]),Et=parseFloat(Vt[2]),Oe.attr("class").includes("attribute-name")?Xe+=g:Oe.attr("class").includes("attribute-keys")?Xe+=g+m:Oe.attr("class").includes("attribute-comment")&&(Xe+=g+m+y))}Oe.attr("transform",`translate(${B+i/2+Xe}, ${Et+A+d.height+o/2})`)}),u.select(".name").attr("transform","translate("+-d.width/2+", "+(A+o/2)+")");const M=E.rectangle(B,A,T,P,R),L=u.insert(()=>M,":first-child").attr("style",s.join("")),{themeVariables:F}=pn(),{rowEven:I,rowOdd:q,nodeBorder:Z}=F;f.push(0);for(const[ne,ue]of p.entries()){const Oe=(ne+1)%2===0&&ue.yOffset!==0,De=E.rectangle(B,d.height+A+(ue==null?void 0:ue.yOffset),T,ue==null?void 0:ue.rowHeight,{...R,fill:Oe?I:q,stroke:Z});u.insert(()=>De,"g.label").attr("style",s.join("")).attr("class",`row-rect-${Oe?"even":"odd"}`)}let Q=E.line(B,d.height+A,T+B,d.height+A,R);u.insert(()=>Q).attr("class","divider"),Q=E.line(g+B,d.height+A,g+B,P+A,R),u.insert(()=>Q).attr("class","divider"),C&&(Q=E.line(g+m+B,d.height+A,g+m+B,P+A,R),u.insert(()=>Q).attr("class","divider")),v&&(Q=E.line(g+m+y+B,d.height+A,g+m+y+B,P+A,R),u.insert(()=>Q).attr("class","divider"));for(const ne of f)Q=E.line(B,d.height+A+ne,T+B,d.height+A+ne,R),u.insert(()=>Q).attr("class","divider");if(be(e,L),l&&e.look!=="handDrawn"){const ne=l.split(";"),ue=(K=ne==null?void 0:ne.filter(ke=>ke.includes("stroke")))==null?void 0:K.map(ke=>`${ke}`).join("; ");u.selectAll("path").attr("style",ue??""),u.selectAll(".row-rect-even path").attr("style",l)}return e.intersect=function(ne){return ce.rect(e,ne)},u}x(u0,"erBox");async function Ls(t,e,n,r=0,i=0,o=[],s=""){const a=t.insert("g").attr("class",`label ${o.join(" ")}`).attr("transform",`translate(${r}, ${i})`).attr("style",s);e!==zx(e)&&(e=zx(e),e=e.replaceAll("<","&lt;").replaceAll(">","&gt;"));const l=a.node().appendChild(await lo(a,e,{width:wi(e,n)+100,style:s,useHtmlLabels:n.htmlLabels},n));if(e.includes("&lt;")||e.includes("&gt;")){let u=l.children[0];for(u.textContent=u.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");u.childNodes[0];)u=u.childNodes[0],u.textContent=u.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let c=l.getBBox();if(zt(n.htmlLabels)){const u=l.children[0];u.style.textAlign="start";const d=Ve(l);c=u.getBoundingClientRect(),d.attr("width",c.width),d.attr("height",c.height)}return c}x(Ls,"addText");async function PM(t,e,n,r,i=n.class.padding??12){const o=r?0:3,s=t.insert("g").attr("class",Ae(e)).attr("id",e.domId||e.id);let a=null,l=null,c=null,u=null,d=0,h=0,f=0;if(a=s.insert("g").attr("class","annotation-group text"),e.annotations.length>0){const b=e.annotations[0];await tl(a,{text:`${b}`},0),d=a.node().getBBox().height}l=s.insert("g").attr("class","label-group text"),await tl(l,e,0,["font-weight: bolder"]);const p=l.node().getBBox();h=p.height,c=s.insert("g").attr("class","members-group text");let g=0;for(const b of e.members){const C=await tl(c,b,g,[b.parseClassifier()]);g+=C+o}f=c.node().getBBox().height,f<=0&&(f=i/2),u=s.insert("g").attr("class","methods-group text");let m=0;for(const b of e.methods){const C=await tl(u,b,m,[b.parseClassifier()]);m+=C+o}let y=s.node().getBBox();if(a!==null){const b=a.node().getBBox();a.attr("transform",`translate(${-b.width/2})`)}return l.attr("transform",`translate(${-p.width/2}, ${d})`),y=s.node().getBBox(),c.attr("transform",`translate(0, ${d+h+i*2})`),y=s.node().getBBox(),u.attr("transform",`translate(0, ${d+h+(f?f+i*4:i*2)})`),y=s.node().getBBox(),{shapeSvg:s,bbox:y}}x(PM,"textHelper");async function tl(t,e,n,r=[]){const i=t.insert("g").attr("class","label").attr("style",r.join("; ")),o=pn();let s="useHtmlLabels"in e?e.useHtmlLabels:zt(o.htmlLabels)??!0,a="";"text"in e?a=e.text:a=e.label,!s&&a.startsWith("\\")&&(a=a.substring(1)),oa(a)&&(s=!0);const l=await lo(i,vy(hs(a)),{width:wi(a,o)+50,classes:"markdown-node-label",useHtmlLabels:s},o);let c,u=1;if(s){const d=l.children[0],h=Ve(l);u=d.innerHTML.split("<br>").length,d.innerHTML.includes("</math>")&&(u+=d.innerHTML.split("<mrow>").length-1);const f=d.getElementsByTagName("img");if(f){const p=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...f].map(g=>new Promise(m=>{function y(){var b;if(g.style.display="flex",g.style.flexDirection="column",p){const C=((b=o.fontSize)==null?void 0:b.toString())??window.getComputedStyle(document.body).fontSize,k=parseInt(C,10)*5+"px";g.style.minWidth=k,g.style.maxWidth=k}else g.style.width="100%";m(g)}x(y,"setupImage"),setTimeout(()=>{g.complete&&y()}),g.addEventListener("error",y),g.addEventListener("load",y)})))}c=d.getBoundingClientRect(),h.attr("width",c.width),h.attr("height",c.height)}else{r.includes("font-weight: bolder")&&Ve(l).selectAll("tspan").attr("font-weight",""),u=l.children.length;const d=l.children[0];(l.textContent===""||l.textContent.includes("&gt"))&&(d.textContent=a[0]+a.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),a[1]===" "&&(d.textContent=d.textContent[0]+" "+d.textContent.substring(1))),d.textContent==="undefined"&&(d.textContent=""),c=l.getBBox()}return i.attr("transform","translate(0,"+(-c.height/(2*u)+n)+")"),c.height}x(tl,"addText");async function $M(t,e){var R,$;const n=tt(),r=n.class.padding??12,i=r,o=e.useHtmlLabels??zt(n.htmlLabels)??!0,s=e;s.annotations=s.annotations??[],s.members=s.members??[],s.methods=s.methods??[];const{shapeSvg:a,bbox:l}=await PM(t,e,n,o,i),{labelStyles:c,nodeStyles:u}=ye(e);e.labelStyle=c,e.cssStyles=s.styles||"";const d=((R=s.styles)==null?void 0:R.join(";"))||u||"";e.cssStyles||(e.cssStyles=d.replaceAll("!important","").split(";"));const h=s.members.length===0&&s.methods.length===0&&!(($=n.class)!=null&&$.hideEmptyMembersBox),f=ge.svg(a),p=me(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=l.width;let m=l.height;s.members.length===0&&s.methods.length===0?m+=i:s.members.length>0&&s.methods.length===0&&(m+=i*2);const y=-g/2,b=-m/2,C=f.rectangle(y-r,b-r-(h?r:s.members.length===0&&s.methods.length===0?-r/2:0),g+2*r,m+2*r+(h?r*2:s.members.length===0&&s.methods.length===0?-r:0),p),v=a.insert(()=>C,":first-child");v.attr("class","basic label-container");const k=v.node().getBBox();a.selectAll(".text").each((T,P,B)=>{var q;const A=Ve(B[P]),M=A.attr("transform");let L=0;if(M){const Q=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(M);Q&&(L=parseFloat(Q[2]))}let F=L+b+r-(h?r:s.members.length===0&&s.methods.length===0?-r/2:0);o||(F-=4);let I=y;(A.attr("class").includes("label-group")||A.attr("class").includes("annotation-group"))&&(I=-((q=A.node())==null?void 0:q.getBBox().width)/2||0,a.selectAll("text").each(function(Z,Q,H){window.getComputedStyle(H[Q]).textAnchor==="middle"&&(I=0)})),A.attr("transform",`translate(${I}, ${F})`)});const w=a.select(".annotation-group").node().getBBox().height-(h?r/2:0)||0,S=a.select(".label-group").node().getBBox().height-(h?r/2:0)||0,E=a.select(".members-group").node().getBBox().height-(h?r/2:0)||0;if(s.members.length>0||s.methods.length>0||h){const T=f.line(k.x,w+S+b+r,k.x+k.width,w+S+b+r,p);a.insert(()=>T).attr("class","divider").attr("style",d)}if(h||s.members.length>0||s.methods.length>0){const T=f.line(k.x,w+S+E+b+i*2+r,k.x+k.width,w+S+E+b+r+i*2,p);a.insert(()=>T).attr("class","divider").attr("style",d)}if(s.look!=="handDrawn"&&a.selectAll("path").attr("style",d),v.select(":nth-child(2)").attr("style",d),a.selectAll(".divider").select("path").attr("style",d),e.labelStyle?a.selectAll("span").attr("style",e.labelStyle):a.selectAll("span").attr("style",d),!o){const T=RegExp(/color\s*:\s*([^;]*)/),P=T.exec(d);if(P){const B=P[0].replace("color","fill");a.selectAll("tspan").attr("style",B)}else if(c){const B=T.exec(c);if(B){const A=B[0].replace("color","fill");a.selectAll("tspan").attr("style",A)}}}return be(e,v),e.intersect=function(T){return ce.rect(e,T)},a}x($M,"classBox");async function FM(t,e){var w,S;const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const i=e,o=e,s=20,a=20,l="verifyMethod"in e,c=Ae(e),u=t.insert("g").attr("class",c).attr("id",e.domId??e.id);let d;l?d=await $r(u,`&lt;&lt;${i.type}&gt;&gt;`,0,e.labelStyle):d=await $r(u,"&lt;&lt;Element&gt;&gt;",0,e.labelStyle);let h=d;const f=await $r(u,i.name,h,e.labelStyle+"; font-weight: bold;");if(h+=f+a,l){const E=await $r(u,`${i.requirementId?`ID: ${i.requirementId}`:""}`,h,e.labelStyle);h+=E;const R=await $r(u,`${i.text?`Text: ${i.text}`:""}`,h,e.labelStyle);h+=R;const $=await $r(u,`${i.risk?`Risk: ${i.risk}`:""}`,h,e.labelStyle);h+=$,await $r(u,`${i.verifyMethod?`Verification: ${i.verifyMethod}`:""}`,h,e.labelStyle)}else{const E=await $r(u,`${o.type?`Type: ${o.type}`:""}`,h,e.labelStyle);h+=E,await $r(u,`${o.docRef?`Doc Ref: ${o.docRef}`:""}`,h,e.labelStyle)}const p=(((w=u.node())==null?void 0:w.getBBox().width)??200)+s,g=(((S=u.node())==null?void 0:S.getBBox().height)??200)+s,m=-p/2,y=-g/2,b=ge.svg(u),C=me(e,{});e.look!=="handDrawn"&&(C.roughness=0,C.fillStyle="solid");const v=b.rectangle(m,y,p,g,C),k=u.insert(()=>v,":first-child");if(k.attr("class","basic label-container").attr("style",r),u.selectAll(".label").each((E,R,$)=>{const T=Ve($[R]),P=T.attr("transform");let B=0,A=0;if(P){const I=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(P);I&&(B=parseFloat(I[1]),A=parseFloat(I[2]))}const M=A-g/2;let L=m+s/2;(R===0||R===1)&&(L=B),T.attr("transform",`translate(${L}, ${M+s})`)}),h>d+f+a){const E=b.line(m,y+d+f+a,m+p,y+d+f+a,C);u.insert(()=>E).attr("style",r)}return be(e,k),e.intersect=function(E){return ce.rect(e,E)},u}x(FM,"requirementBox");async function $r(t,e,n,r=""){if(e==="")return 0;const i=t.insert("g").attr("class","label").attr("style",r),o=tt(),s=o.htmlLabels??!0,a=await lo(i,vy(hs(e)),{width:wi(e,o)+50,classes:"markdown-node-label",useHtmlLabels:s,style:r},o);let l;if(s){const c=a.children[0],u=Ve(a);l=c.getBoundingClientRect(),u.attr("width",l.width),u.attr("height",l.height)}else{const c=a.children[0];for(const u of c.children)u.textContent=u.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),r&&u.setAttribute("style",r);l=a.getBBox(),l.height+=6}return i.attr("transform",`translate(${-l.width/2},${-l.height/2+n})`),l.height}x($r,"addText");var uq=x(t=>{switch(t){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function zM(t,e,{config:n}){var P,B;const{labelStyles:r,nodeStyles:i}=ye(e);e.labelStyle=r||"";const o=10,s=e.width;e.width=(e.width??200)-10;const{shapeSvg:a,bbox:l,label:c}=await Ne(t,e,Ae(e)),u=e.padding||10;let d="",h;"ticket"in e&&e.ticket&&((P=n==null?void 0:n.kanban)!=null&&P.ticketBaseUrl)&&(d=(B=n==null?void 0:n.kanban)==null?void 0:B.ticketBaseUrl.replace("#TICKET#",e.ticket),h=a.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",d).attr("target","_blank"));const f={useHtmlLabels:e.useHtmlLabels,labelStyle:e.labelStyle||"",width:e.width,img:e.img,padding:e.padding||8,centerLabel:!1};let p,g;h?{label:p,bbox:g}=await fp(h,"ticket"in e&&e.ticket||"",f):{label:p,bbox:g}=await fp(a,"ticket"in e&&e.ticket||"",f);const{label:m,bbox:y}=await fp(a,"assigned"in e&&e.assigned||"",f);e.width=s;const b=10,C=(e==null?void 0:e.width)||0,v=Math.max(g.height,y.height)/2,k=Math.max(l.height+b*2,(e==null?void 0:e.height)||0)+v,w=-C/2,S=-k/2;c.attr("transform","translate("+(u-C/2)+", "+(-v-l.height/2)+")"),p.attr("transform","translate("+(u-C/2)+", "+(-v+l.height/2)+")"),m.attr("transform","translate("+(u+C/2-y.width-2*o)+", "+(-v+l.height/2)+")");let E;const{rx:R,ry:$}=e,{cssStyles:T}=e;if(e.look==="handDrawn"){const A=ge.svg(a),M=me(e,{}),L=R||$?A.path(co(w,S,C,k,R||0),M):A.rectangle(w,S,C,k,M);E=a.insert(()=>L,":first-child"),E.attr("class","basic label-container").attr("style",T||null)}else{E=a.insert("rect",":first-child"),E.attr("class","basic label-container __APA__").attr("style",i).attr("rx",R??5).attr("ry",$??5).attr("x",w).attr("y",S).attr("width",C).attr("height",k);const A="priority"in e&&e.priority;if(A){const M=a.append("line"),L=w+2,F=S+Math.floor((R??0)/2),I=S+k-Math.floor((R??0)/2);M.attr("x1",L).attr("y1",F).attr("x2",L).attr("y2",I).attr("stroke-width","4").attr("stroke",uq(A))}}return be(e,E),e.height=k,e.intersect=function(A){return ce.rect(e,A)},a}x(zM,"kanbanItem");async function HM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,halfPadding:s,label:a}=await Ne(t,e,Ae(e)),l=o.width+10*s,c=o.height+8*s,u=.15*l,{cssStyles:d}=e,h=o.width+20,f=o.height+20,p=Math.max(l,h),g=Math.max(c,f);a.attr("transform",`translate(${-o.width/2}, ${-o.height/2})`);let m;const y=`M0 0 
    a${u},${u} 1 0,0 ${p*.25},${-1*g*.1}
    a${u},${u} 1 0,0 ${p*.25},0
    a${u},${u} 1 0,0 ${p*.25},0
    a${u},${u} 1 0,0 ${p*.25},${g*.1}

    a${u},${u} 1 0,0 ${p*.15},${g*.33}
    a${u*.8},${u*.8} 1 0,0 0,${g*.34}
    a${u},${u} 1 0,0 ${-1*p*.15},${g*.33}

    a${u},${u} 1 0,0 ${-1*p*.25},${g*.15}
    a${u},${u} 1 0,0 ${-1*p*.25},0
    a${u},${u} 1 0,0 ${-1*p*.25},0
    a${u},${u} 1 0,0 ${-1*p*.25},${-1*g*.15}

    a${u},${u} 1 0,0 ${-1*p*.1},${-1*g*.33}
    a${u*.8},${u*.8} 1 0,0 0,${-1*g*.34}
    a${u},${u} 1 0,0 ${p*.1},${-1*g*.33}
  H0 V0 Z`;if(e.look==="handDrawn"){const b=ge.svg(i),C=me(e,{}),v=b.path(y,C);m=i.insert(()=>v,":first-child"),m.attr("class","basic label-container").attr("style",mn(d))}else m=i.insert("path",":first-child").attr("class","basic label-container").attr("style",r).attr("d",y);return m.attr("transform",`translate(${-p/2}, ${-g/2})`),be(e,m),e.calcIntersect=function(b,C){return ce.rect(b,C)},e.intersect=function(b){return G.info("Bang intersect",e,b),ce.rect(e,b)},i}x(HM,"bang");async function WM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,halfPadding:s,label:a}=await Ne(t,e,Ae(e)),l=o.width+2*s,c=o.height+2*s,u=.15*l,d=.25*l,h=.35*l,f=.2*l,{cssStyles:p}=e;let g;const m=`M0 0 
    a${u},${u} 0 0,1 ${l*.25},${-1*l*.1}
    a${h},${h} 1 0,1 ${l*.4},${-1*l*.1}
    a${d},${d} 1 0,1 ${l*.35},${l*.2}

    a${u},${u} 1 0,1 ${l*.15},${c*.35}
    a${f},${f} 1 0,1 ${-1*l*.15},${c*.65}

    a${d},${u} 1 0,1 ${-1*l*.25},${l*.15}
    a${h},${h} 1 0,1 ${-1*l*.5},0
    a${u},${u} 1 0,1 ${-1*l*.25},${-1*l*.15}

    a${u},${u} 1 0,1 ${-1*l*.1},${-1*c*.35}
    a${f},${f} 1 0,1 ${l*.1},${-1*c*.65}
  H0 V0 Z`;if(e.look==="handDrawn"){const y=ge.svg(i),b=me(e,{}),C=y.path(m,b);g=i.insert(()=>C,":first-child"),g.attr("class","basic label-container").attr("style",mn(p))}else g=i.insert("path",":first-child").attr("class","basic label-container").attr("style",r).attr("d",m);return a.attr("transform",`translate(${-o.width/2}, ${-o.height/2})`),g.attr("transform",`translate(${-l/2}, ${-c/2})`),be(e,g),e.calcIntersect=function(y,b){return ce.rect(y,b)},e.intersect=function(y){return G.info("Cloud intersect",e,y),ce.rect(e,y)},i}x(WM,"cloud");async function UM(t,e){const{labelStyles:n,nodeStyles:r}=ye(e);e.labelStyle=n;const{shapeSvg:i,bbox:o,halfPadding:s,label:a}=await Ne(t,e,Ae(e)),l=o.width+8*s,c=o.height+2*s,u=5,d=`
    M${-l/2} ${c/2-u}
    v${-c+2*u}
    q0,-${u} ${u},-${u}
    h${l-2*u}
    q${u},0 ${u},${u}
    v${c-2*u}
    q0,${u} -${u},${u}
    h${-l+2*u}
    q-${u},0 -${u},-${u}
    Z
  `,h=i.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+e.type).attr("style",r).attr("d",d);return i.append("line").attr("class","node-line-").attr("x1",-l/2).attr("y1",c/2).attr("x2",l/2).attr("y2",c/2),a.attr("transform",`translate(${-o.width/2}, ${-o.height/2})`),i.append(()=>a.node()),be(e,h),e.calcIntersect=function(f,p){return ce.rect(f,p)},e.intersect=function(f){return ce.rect(e,f)},i}x(UM,"defaultMindmapNode");async function jM(t,e){const n={padding:e.padding??0};return c0(t,e,n)}x(jM,"mindmapCircle");var dq=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:wM},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:bM},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:CM},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:EM},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:qT},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:c0},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:HM},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:WM},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:gM},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:JT},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:lM},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:aM},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:OM},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:oM},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:GT},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:AM},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:PT},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:xM},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:_M},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:SM},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:XT},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:QT},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:HT},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:WT},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:UT},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:cM},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:IM},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:ZT},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:NM},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:uM},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:jT},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:VT},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:RM},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:BM},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:KT},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:LM},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:YT},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:vM},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:fM},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:hM},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:BT},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:zT},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:MM},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:TM},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:DM},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:mM},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:dM}],hq=x(()=>{const e=[...Object.entries({state:kM,choice:$T,note:pM,rectWithTitle:yM,labelRect:sM,iconSquare:rM,iconCircle:tM,icon:eM,iconRounded:nM,imageSquare:iM,anchor:DT,kanbanItem:zM,mindmapCircle:jM,defaultMindmapNode:UM,classBox:$M,erBox:u0,requirementBox:FM}),...dq.flatMap(n=>[n.shortName,..."aliases"in n?n.aliases:[],..."internalAliases"in n?n.internalAliases:[]].map(i=>[i,n.handler]))];return Object.fromEntries(e)},"generateShapeMap"),qM=hq();function fq(t){return t in qM}x(fq,"isValidShape");var Zh=new Map;async function VM(t,e,n){let r,i;e.shape==="rect"&&(e.rx&&e.ry?e.shape="roundedRect":e.shape="squareRect");const o=e.shape?qM[e.shape]:void 0;if(!o)throw new Error(`No such shape: ${e.shape}. Please check your syntax.`);if(e.link){let s;n.config.securityLevel==="sandbox"?s="_top":e.linkTarget&&(s=e.linkTarget||"_blank"),r=t.insert("svg:a").attr("xlink:href",e.link).attr("target",s??null),i=await o(r,e,n)}else i=await o(t,e,n),r=i;return e.tooltip&&i.attr("title",e.tooltip),Zh.set(e.id,r),e.haveCallback&&r.attr("class",r.attr("class")+" clickable"),r}x(VM,"insertNode");var dte=x((t,e)=>{Zh.set(e.id,t)},"setNodeElem"),hte=x(()=>{Zh.clear()},"clear"),fte=x(t=>{const e=Zh.get(t.id);G.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const n=8,r=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+r-t.width/2)+", "+(t.y-t.height/2-n)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),r},"positionNode"),pq=x((t,e,n,r,i,o)=>{e.arrowTypeStart&&Y1(t,"start",e.arrowTypeStart,n,r,i,o),e.arrowTypeEnd&&Y1(t,"end",e.arrowTypeEnd,n,r,i,o)},"addEdgeMarkers"),gq={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},Y1=x((t,e,n,r,i,o,s)=>{var d;const a=gq[n];if(!a){G.warn(`Unknown arrow type: ${n}`);return}const l=a.type,u=`${i}_${o}-${l}${e==="start"?"Start":"End"}`;if(s&&s.trim()!==""){const h=s.replace(/[^\dA-Za-z]/g,"_"),f=`${u}_${h}`;if(!document.getElementById(f)){const p=document.getElementById(u);if(p){const g=p.cloneNode(!0);g.id=f,g.querySelectorAll("path, circle, line").forEach(y=>{y.setAttribute("stroke",s),a.fill&&y.setAttribute("fill",s)}),(d=p.parentNode)==null||d.appendChild(g)}}t.attr(`marker-${e}`,`url(${r}#${f})`)}else t.attr(`marker-${e}`,`url(${r}#${u})`)},"addEdgeMarker"),ih=new Map,Qt=new Map,pte=x(()=>{ih.clear(),Qt.clear()},"clear"),eu=x(t=>t?t.reduce((n,r)=>n+";"+r,""):"","getLabelStyles"),mq=x(async(t,e)=>{let n=zt(tt().flowchart.htmlLabels);const{labelStyles:r}=ye(e);e.labelStyle=r;const i=await lo(t,e.label,{style:e.labelStyle,useHtmlLabels:n,addSvgBackground:!0,isNode:!1});G.info("abc82",e,e.labelType);const o=t.insert("g").attr("class","edgeLabel"),s=o.insert("g").attr("class","label").attr("data-id",e.id);s.node().appendChild(i);let a=i.getBBox();if(n){const c=i.children[0],u=Ve(i);a=c.getBoundingClientRect(),u.attr("width",a.width),u.attr("height",a.height)}s.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),ih.set(e.id,o),e.width=a.width,e.height=a.height;let l;if(e.startLabelLeft){const c=await Io(e.startLabelLeft,eu(e.labelStyle)),u=t.insert("g").attr("class","edgeTerminals"),d=u.insert("g").attr("class","inner");l=d.node().appendChild(c);const h=c.getBBox();d.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),Qt.get(e.id)||Qt.set(e.id,{}),Qt.get(e.id).startLeft=u,nl(l,e.startLabelLeft)}if(e.startLabelRight){const c=await Io(e.startLabelRight,eu(e.labelStyle)),u=t.insert("g").attr("class","edgeTerminals"),d=u.insert("g").attr("class","inner");l=u.node().appendChild(c),d.node().appendChild(c);const h=c.getBBox();d.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),Qt.get(e.id)||Qt.set(e.id,{}),Qt.get(e.id).startRight=u,nl(l,e.startLabelRight)}if(e.endLabelLeft){const c=await Io(e.endLabelLeft,eu(e.labelStyle)),u=t.insert("g").attr("class","edgeTerminals"),d=u.insert("g").attr("class","inner");l=d.node().appendChild(c);const h=c.getBBox();d.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),u.node().appendChild(c),Qt.get(e.id)||Qt.set(e.id,{}),Qt.get(e.id).endLeft=u,nl(l,e.endLabelLeft)}if(e.endLabelRight){const c=await Io(e.endLabelRight,eu(e.labelStyle)),u=t.insert("g").attr("class","edgeTerminals"),d=u.insert("g").attr("class","inner");l=d.node().appendChild(c);const h=c.getBBox();d.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),u.node().appendChild(c),Qt.get(e.id)||Qt.set(e.id,{}),Qt.get(e.id).endRight=u,nl(l,e.endLabelRight)}return i},"insertEdgeLabel");function nl(t,e){tt().flowchart.htmlLabels&&t&&(t.style.width=e.length*9+"px",t.style.height="12px")}x(nl,"setTerminalWidth");var yq=x((t,e)=>{G.debug("Moving label abc88 ",t.id,t.label,ih.get(t.id),e);let n=e.updatedPath?e.updatedPath:e.originalPath;const r=tt(),{subGraphTitleTotalMargin:i}=zy(r);if(t.label){const o=ih.get(t.id);let s=t.x,a=t.y;if(n){const l=kr.calcLabelPosition(n);G.debug("Moving label "+t.label+" from (",s,",",a,") to (",l.x,",",l.y,") abc88"),e.updatedPath&&(s=l.x,a=l.y)}o.attr("transform",`translate(${s}, ${a+i/2})`)}if(t.startLabelLeft){const o=Qt.get(t.id).startLeft;let s=t.x,a=t.y;if(n){const l=kr.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",n);s=l.x,a=l.y}o.attr("transform",`translate(${s}, ${a})`)}if(t.startLabelRight){const o=Qt.get(t.id).startRight;let s=t.x,a=t.y;if(n){const l=kr.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",n);s=l.x,a=l.y}o.attr("transform",`translate(${s}, ${a})`)}if(t.endLabelLeft){const o=Qt.get(t.id).endLeft;let s=t.x,a=t.y;if(n){const l=kr.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",n);s=l.x,a=l.y}o.attr("transform",`translate(${s}, ${a})`)}if(t.endLabelRight){const o=Qt.get(t.id).endRight;let s=t.x,a=t.y;if(n){const l=kr.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",n);s=l.x,a=l.y}o.attr("transform",`translate(${s}, ${a})`)}},"positionEdgeLabel"),bq=x((t,e)=>{const n=t.x,r=t.y,i=Math.abs(e.x-n),o=Math.abs(e.y-r),s=t.width/2,a=t.height/2;return i>=s||o>=a},"outsideNode"),xq=x((t,e,n)=>{G.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(n)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const r=t.x,i=t.y,o=Math.abs(r-n.x),s=t.width/2;let a=n.x<e.x?s-o:s+o;const l=t.height/2,c=Math.abs(e.y-n.y),u=Math.abs(e.x-n.x);if(Math.abs(i-e.y)*s>Math.abs(r-e.x)*l){let d=n.y<e.y?e.y-l-i:i-l-e.y;a=u*d/c;const h={x:n.x<e.x?n.x+a:n.x-u+a,y:n.y<e.y?n.y+c-d:n.y-c+d};return a===0&&(h.x=e.x,h.y=e.y),u===0&&(h.x=e.x),c===0&&(h.y=e.y),G.debug(`abc89 top/bottom calc, Q ${c}, q ${d}, R ${u}, r ${a}`,h),h}else{n.x<e.x?a=e.x-s-r:a=r-s-e.x;let d=c*a/u,h=n.x<e.x?n.x+u-a:n.x-u+a,f=n.y<e.y?n.y+d:n.y-d;return G.debug(`sides calc abc89, Q ${c}, q ${d}, R ${u}, r ${a}`,{_x:h,_y:f}),a===0&&(h=e.x,f=e.y),u===0&&(h=e.x),c===0&&(f=e.y),{x:h,y:f}}},"intersection"),X1=x((t,e)=>{G.warn("abc88 cutPathAtIntersect",t,e);let n=[],r=t[0],i=!1;return t.forEach(o=>{if(G.info("abc88 checking point",o,e),!bq(e,o)&&!i){const s=xq(e,r,o);G.debug("abc88 inside",o,r,s),G.debug("abc88 intersection",s,e);let a=!1;n.forEach(l=>{a=a||l.x===s.x&&l.y===s.y}),n.some(l=>l.x===s.x&&l.y===s.y)?G.warn("abc88 no intersect",s,n):n.push(s),i=!0}else G.warn("abc88 outside",o,r),r=o,i||n.push(o)}),G.debug("returning points",n),n},"cutPathAtIntersect");function GM(t){const e=[],n=[];for(let r=1;r<t.length-1;r++){const i=t[r-1],o=t[r],s=t[r+1];(i.x===o.x&&o.y===s.y&&Math.abs(o.x-s.x)>5&&Math.abs(o.y-i.y)>5||i.y===o.y&&o.x===s.x&&Math.abs(o.x-i.x)>5&&Math.abs(o.y-s.y)>5)&&(e.push(o),n.push(r))}return{cornerPoints:e,cornerPointPositions:n}}x(GM,"extractCornerPoints");var Z1=x(function(t,e,n){const r=e.x-t.x,i=e.y-t.y,o=Math.sqrt(r*r+i*i),s=n/o;return{x:e.x-s*r,y:e.y-s*i}},"findAdjacentPoint"),vq=x(function(t){const{cornerPointPositions:e}=GM(t),n=[];for(let r=0;r<t.length;r++)if(e.includes(r)){const i=t[r-1],o=t[r+1],s=t[r],a=Z1(i,s,5),l=Z1(o,s,5),c=l.x-a.x,u=l.y-a.y;n.push(a);const d=Math.sqrt(2)*2;let h={x:s.x,y:s.y};if(Math.abs(o.x-i.x)>10&&Math.abs(o.y-i.y)>=10){G.debug("Corner point fixing",Math.abs(o.x-i.x),Math.abs(o.y-i.y));const f=5;s.x===a.x?h={x:c<0?a.x-f+d:a.x+f-d,y:u<0?a.y-d:a.y+d}:h={x:c<0?a.x-d:a.x+d,y:u<0?a.y-f+d:a.y+f-d}}else G.debug("Corner point skipping fixing",Math.abs(o.x-i.x),Math.abs(o.y-i.y));n.push(h,l)}else n.push(t[r]);return n},"fixCorners"),wq=x((t,e,n)=>{const r=t-e-n,i=2,o=2,s=i+o,a=Math.floor(r/s),l=Array(a).fill(`${i} ${o}`).join(" ");return`0 ${e} ${l} ${n}`},"generateDashArray"),Cq=x(function(t,e,n,r,i,o,s,a=!1){var A;const{handDrawnSeed:l}=tt();let c=e.points,u=!1;const d=i;var h=o;const f=[];for(const M in e.cssCompiledStyles)S2(M)||f.push(e.cssCompiledStyles[M]);G.debug("UIO intersect check",e.points,h.x,d.x),h.intersect&&d.intersect&&!a&&(c=c.slice(1,e.points.length-1),c.unshift(d.intersect(c[0])),G.debug("Last point UIO",e.start,"-->",e.end,c[c.length-1],h,h.intersect(c[c.length-1])),c.push(h.intersect(c[c.length-1])));const p=btoa(JSON.stringify(c));e.toCluster&&(G.info("to cluster abc88",n.get(e.toCluster)),c=X1(e.points,n.get(e.toCluster).node),u=!0),e.fromCluster&&(G.debug("from cluster abc88",n.get(e.fromCluster),JSON.stringify(c,null,2)),c=X1(c.reverse(),n.get(e.fromCluster).node).reverse(),u=!0);let g=c.filter(M=>!Number.isNaN(M.y));g=vq(g);let m=Cu;switch(m=Dd,e.curve){case"linear":m=Dd;break;case"basis":m=Cu;break;case"cardinal":m=M_;break;case"bumpX":m=k_;break;case"bumpY":m=S_;break;case"catmullRom":m=N_;break;case"monotoneX":m=B_;break;case"monotoneY":m=P_;break;case"natural":m=F_;break;case"step":m=z_;break;case"stepAfter":m=W_;break;case"stepBefore":m=H_;break;default:m=Cu}const{x:y,y:b}=v8(e),C=r9().x(y).y(b).curve(m);let v;switch(e.thickness){case"normal":v="edge-thickness-normal";break;case"thick":v="edge-thickness-thick";break;case"invisible":v="edge-thickness-invisible";break;default:v="edge-thickness-normal"}switch(e.pattern){case"solid":v+=" edge-pattern-solid";break;case"dotted":v+=" edge-pattern-dotted";break;case"dashed":v+=" edge-pattern-dashed";break;default:v+=" edge-pattern-solid"}let k,w=e.curve==="rounded"?KM(YM(g,e),5):C(g);const S=Array.isArray(e.style)?e.style:[e.style];let E=S.find(M=>M==null?void 0:M.startsWith("stroke:")),R=!1;if(e.look==="handDrawn"){const M=ge.svg(t);Object.assign([],g);const L=M.path(w,{roughness:.3,seed:l});v+=" transition",k=Ve(L).select("path").attr("id",e.id).attr("class"," "+v+(e.classes?" "+e.classes:"")).attr("style",S?S.reduce((I,q)=>I+";"+q,""):"");let F=k.attr("d");k.attr("d",F),t.node().appendChild(k.node())}else{const M=f.join(";"),L=S?S.reduce((Y,oe)=>Y+oe+";",""):"";let F="";e.animate&&(F=" edge-animation-fast"),e.animation&&(F=" edge-animation-"+e.animation);const I=(M?M+";"+L+";":L)+";"+(S?S.reduce((Y,oe)=>Y+";"+oe,""):"");k=t.append("path").attr("d",w).attr("id",e.id).attr("class"," "+v+(e.classes?" "+e.classes:"")+(F??"")).attr("style",I),E=(A=I.match(/stroke:([^;]+)/))==null?void 0:A[1],R=e.animate===!0||!!e.animation||M.includes("animation");const q=k.node(),Z=typeof q.getTotalLength=="function"?q.getTotalLength():0,Q=f1[e.arrowTypeStart]||0,H=f1[e.arrowTypeEnd]||0;if(e.look==="neo"&&!R){const oe=`stroke-dasharray: ${e.pattern==="dotted"||e.pattern==="dashed"?wq(Z,Q,H):`0 ${Q} ${Z-Q-H} ${H}`}; stroke-dashoffset: 0;`;k.attr("style",oe+k.attr("style"))}}k.attr("data-edge",!0),k.attr("data-et","edge"),k.attr("data-id",e.id),k.attr("data-points",p),e.showPoints&&g.forEach(M=>{t.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",M.x).attr("cy",M.y)});let $="";(tt().flowchart.arrowMarkerAbsolute||tt().state.arrowMarkerAbsolute)&&($=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,$=$.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),G.info("arrowTypeStart",e.arrowTypeStart),G.info("arrowTypeEnd",e.arrowTypeEnd),pq(k,e,$,s,r,E);const T=Math.floor(c.length/2),P=c[T];kr.isLabelCoordinateInPath(P,k.attr("d"))||(u=!0);let B={};return u&&(B.updatedPath=c),B.originalPath=e.points,B},"insertEdge");function KM(t,e){if(t.length<2)return"";let n="";const r=t.length,i=1e-5;for(let o=0;o<r;o++){const s=t[o],a=t[o-1],l=t[o+1];if(o===0)n+=`M${s.x},${s.y}`;else if(o===r-1)n+=`L${s.x},${s.y}`;else{const c=s.x-a.x,u=s.y-a.y,d=l.x-s.x,h=l.y-s.y,f=Math.hypot(c,u),p=Math.hypot(d,h);if(f<i||p<i){n+=`L${s.x},${s.y}`;continue}const g=c/f,m=u/f,y=d/p,b=h/p,C=g*y+m*b,v=Math.max(-1,Math.min(1,C)),k=Math.acos(v);if(k<i||Math.abs(Math.PI-k)<i){n+=`L${s.x},${s.y}`;continue}const w=Math.min(e/Math.sin(k/2),f/2,p/2),S=s.x-g*w,E=s.y-m*w,R=s.x+y*w,$=s.y+b*w;n+=`L${S},${E}`,n+=`Q${s.x},${s.y} ${R},${$}`}}return n}x(KM,"generateRoundedPath");function Kg(t,e){if(!t||!e)return{angle:0,deltaX:0,deltaY:0};const n=e.x-t.x,r=e.y-t.y;return{angle:Math.atan2(r,n),deltaX:n,deltaY:r}}x(Kg,"calculateDeltaAndAngle");function YM(t,e){const n=t.map(i=>({...i}));if(t.length>=2&&dn[e.arrowTypeStart]){const i=dn[e.arrowTypeStart],o=t[0],s=t[1],{angle:a}=Kg(o,s),l=i*Math.cos(a),c=i*Math.sin(a);n[0].x=o.x+l,n[0].y=o.y+c}const r=t.length;if(r>=2&&dn[e.arrowTypeEnd]){const i=dn[e.arrowTypeEnd],o=t[r-1],s=t[r-2],{angle:a}=Kg(s,o),l=i*Math.cos(a),c=i*Math.sin(a);n[r-1].x=o.x-l,n[r-1].y=o.y-c}return n}x(YM,"applyMarkerOffsetsToPoints");var kq=x((t,e,n,r)=>{e.forEach(i=>{Fq[i](t,n,r)})},"insertMarkers"),Sq=x((t,e,n)=>{G.trace("Making markers for ",n),t.append("defs").append("marker").attr("id",n+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",n+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),_q=x((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",n+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),Eq=x((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",n+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),Tq=x((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",n+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),Mq=x((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",n+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),Aq=x((t,e,n)=>{t.append("marker").attr("id",n+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",n+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),Nq=x((t,e,n)=>{t.append("marker").attr("id",n+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",n+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),Oq=x((t,e,n)=>{t.append("marker").attr("id",n+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",n+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),Lq=x((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),Rq=x((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-onlyOneStart").attr("class","marker onlyOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",n+"_"+e+"-onlyOneEnd").attr("class","marker onlyOne "+e).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),Iq=x((t,e,n)=>{const r=t.append("defs").append("marker").attr("id",n+"_"+e+"-zeroOrOneStart").attr("class","marker zeroOrOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");r.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),r.append("path").attr("d","M9,0 L9,18");const i=t.append("defs").append("marker").attr("id",n+"_"+e+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+e).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),i.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),Dq=x((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-oneOrMoreStart").attr("class","marker oneOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",n+"_"+e+"-oneOrMoreEnd").attr("class","marker oneOrMore "+e).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),Bq=x((t,e,n)=>{const r=t.append("defs").append("marker").attr("id",n+"_"+e+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");r.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),r.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const i=t.append("defs").append("marker").attr("id",n+"_"+e+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+e).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),i.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),Pq=x((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),$q=x((t,e,n)=>{const r=t.append("defs").append("marker").attr("id",n+"_"+e+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");r.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),r.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),r.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),Fq={extension:Sq,composition:_q,aggregation:Eq,dependency:Tq,lollipop:Mq,point:Aq,circle:Nq,cross:Oq,barb:Lq,only_one:Rq,zero_or_one:Iq,one_or_more:Dq,zero_or_more:Bq,requirement_arrow:Pq,requirement_contains:$q},zq=kq,Hq={common:ba,getConfig:pn,insertCluster:Yj,insertEdge:Cq,insertEdgeLabel:mq,insertMarkers:zq,insertNode:VM,interpolateToCurve:qy,labelHelper:Ne,log:G,positionEdgeLabel:yq},Gl={},XM=x(t=>{for(const e of t)Gl[e.name]=e},"registerLayoutLoaders"),Wq=x(()=>{XM([{name:"dagre",loader:x(async()=>await rt(()=>import("./dagre-6UL2VRFP-DWAtR1We.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])),"loader")},{name:"cose-bilkent",loader:x(async()=>await rt(()=>import("./cose-bilkent-S5V4N54A-CldgMEyn.js"),__vite__mapDeps([8,9,6,7])),"loader")}])},"registerDefaultLayoutLoaders");Wq();var gte=x(async(t,e)=>{if(!(t.layoutAlgorithm in Gl))throw new Error(`Unknown layout algorithm: ${t.layoutAlgorithm}`);const n=Gl[t.layoutAlgorithm];return(await n.loader()).render(t,e,Hq,{algorithm:n.algorithm})},"render"),mte=x((t="",{fallback:e="dagre"}={})=>{if(t in Gl)return t;if(e in Gl)return G.warn(`Layout algorithm ${t} is not registered. Using ${e} as fallback.`),e;throw new Error(`Both layout algorithms ${t} and ${e} are not registered.`)},"getRegisteredLayoutAlgorithm"),ZM="comm",JM="rule",QM="decl",Uq="@import",jq="@namespace",qq="@keyframes",Vq="@layer",eA=Math.abs,d0=String.fromCharCode;function tA(t){return t.trim()}function Tu(t,e,n){return t.replace(e,n)}function Gq(t,e,n){return t.indexOf(e,n)}function Ws(t,e){return t.charCodeAt(e)|0}function ua(t,e,n){return t.slice(e,n)}function Wr(t){return t.length}function Kq(t){return t.length}function tu(t,e){return e.push(t),t}var Jh=1,da=1,nA=0,hr=0,Lt=0,ka="";function h0(t,e,n,r,i,o,s,a){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:Jh,column:da,length:s,return:"",siblings:a}}function Yq(){return Lt}function Xq(){return Lt=hr>0?Ws(ka,--hr):0,da--,Lt===10&&(da=1,Jh--),Lt}function Tr(){return Lt=hr<nA?Ws(ka,hr++):0,da++,Lt===10&&(da=1,Jh++),Lt}function Ui(){return Ws(ka,hr)}function Mu(){return hr}function Qh(t,e){return ua(ka,t,e)}function Kl(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Zq(t){return Jh=da=1,nA=Wr(ka=t),hr=0,[]}function Jq(t){return ka="",t}function pp(t){return tA(Qh(hr-1,Yg(t===91?t+2:t===40?t+1:t)))}function Qq(t){for(;(Lt=Ui())&&Lt<33;)Tr();return Kl(t)>2||Kl(Lt)>3?"":" "}function eV(t,e){for(;--e&&Tr()&&!(Lt<48||Lt>102||Lt>57&&Lt<65||Lt>70&&Lt<97););return Qh(t,Mu()+(e<6&&Ui()==32&&Tr()==32))}function Yg(t){for(;Tr();)switch(Lt){case t:return hr;case 34:case 39:t!==34&&t!==39&&Yg(Lt);break;case 40:t===41&&Yg(t);break;case 92:Tr();break}return hr}function tV(t,e){for(;Tr()&&t+Lt!==57;)if(t+Lt===84&&Ui()===47)break;return"/*"+Qh(e,hr-1)+"*"+d0(t===47?t:Tr())}function nV(t){for(;!Kl(Ui());)Tr();return Qh(t,hr)}function rV(t){return Jq(Au("",null,null,null,[""],t=Zq(t),0,[0],t))}function Au(t,e,n,r,i,o,s,a,l){for(var c=0,u=0,d=s,h=0,f=0,p=0,g=1,m=1,y=1,b=0,C="",v=i,k=o,w=r,S=C;m;)switch(p=b,b=Tr()){case 40:if(p!=108&&Ws(S,d-1)==58){Gq(S+=Tu(pp(b),"&","&\f"),"&\f",eA(c?a[c-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:S+=pp(b);break;case 9:case 10:case 13:case 32:S+=Qq(p);break;case 92:S+=eV(Mu()-1,7);continue;case 47:switch(Ui()){case 42:case 47:tu(iV(tV(Tr(),Mu()),e,n,l),l),(Kl(p||1)==5||Kl(Ui()||1)==5)&&Wr(S)&&ua(S,-1,void 0)!==" "&&(S+=" ");break;default:S+="/"}break;case 123*g:a[c++]=Wr(S)*y;case 125*g:case 59:case 0:switch(b){case 0:case 125:m=0;case 59+u:y==-1&&(S=Tu(S,/\f/g,"")),f>0&&(Wr(S)-d||g===0&&p===47)&&tu(f>32?Q1(S+";",r,n,d-1,l):Q1(Tu(S," ","")+";",r,n,d-2,l),l);break;case 59:S+=";";default:if(tu(w=J1(S,e,n,c,u,i,a,C,v=[],k=[],d,o),o),b===123)if(u===0)Au(S,e,w,w,v,o,d,a,k);else{switch(h){case 99:if(Ws(S,3)===110)break;case 108:if(Ws(S,2)===97)break;default:u=0;case 100:case 109:case 115:}u?Au(t,w,w,r&&tu(J1(t,w,w,0,0,i,a,C,i,v=[],d,k),k),i,k,d,a,r?v:k):Au(S,w,w,w,[""],k,0,a,k)}}c=u=f=0,g=y=1,C=S="",d=s;break;case 58:d=1+Wr(S),f=p;default:if(g<1){if(b==123)--g;else if(b==125&&g++==0&&Xq()==125)continue}switch(S+=d0(b),b*g){case 38:y=u>0?1:(S+="\f",-1);break;case 44:a[c++]=(Wr(S)-1)*y,y=1;break;case 64:Ui()===45&&(S+=pp(Tr())),h=Ui(),u=d=Wr(C=S+=nV(Mu())),b++;break;case 45:p===45&&Wr(S)==2&&(g=0)}}return o}function J1(t,e,n,r,i,o,s,a,l,c,u,d){for(var h=i-1,f=i===0?o:[""],p=Kq(f),g=0,m=0,y=0;g<r;++g)for(var b=0,C=ua(t,h+1,h=eA(m=s[g])),v=t;b<p;++b)(v=tA(m>0?f[b]+" "+C:Tu(C,/&\f/g,f[b])))&&(l[y++]=v);return h0(t,e,n,i===0?JM:a,l,c,u,d)}function iV(t,e,n,r){return h0(t,e,n,ZM,d0(Yq()),ua(t,2,-2),0,r)}function Q1(t,e,n,r,i){return h0(t,e,n,QM,ua(t,0,r),ua(t,r+1,-1),r,i)}function Xg(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function oV(t,e,n,r){switch(t.type){case Vq:if(t.children.length)break;case Uq:case jq:case QM:return t.return=t.return||t.value;case ZM:return"";case qq:return t.return=t.value+"{"+Xg(t.children,r)+"}";case JM:if(!Wr(t.value=t.props.join(",")))return""}return Wr(n=Xg(t.children,r))?t.return=t.value+"{"+n+"}":""}var sV=M2(Object.keys,Object),aV=Object.prototype,lV=aV.hasOwnProperty;function cV(t){if(!Wh(t))return sV(t);var e=[];for(var n in Object(t))lV.call(t,n)&&n!="constructor"&&e.push(n);return e}var Zg=ds(ei,"DataView"),Jg=ds(ei,"Promise"),Qg=ds(ei,"Set"),em=ds(ei,"WeakMap"),ev="[object Map]",uV="[object Object]",tv="[object Promise]",nv="[object Set]",rv="[object WeakMap]",iv="[object DataView]",dV=us(Zg),hV=us(ql),fV=us(Jg),pV=us(Qg),gV=us(em),ko=va;(Zg&&ko(new Zg(new ArrayBuffer(1)))!=iv||ql&&ko(new ql)!=ev||Jg&&ko(Jg.resolve())!=tv||Qg&&ko(new Qg)!=nv||em&&ko(new em)!=rv)&&(ko=function(t){var e=va(t),n=e==uV?t.constructor:void 0,r=n?us(n):"";if(r)switch(r){case dV:return iv;case hV:return ev;case fV:return tv;case pV:return nv;case gV:return rv}return e});var mV="[object Map]",yV="[object Set]",bV=Object.prototype,xV=bV.hasOwnProperty;function ov(t){if(t==null)return!0;if(Uh(t)&&(Kd(t)||typeof t=="string"||typeof t.splice=="function"||Uy(t)||jy(t)||Gd(t)))return!t.length;var e=ko(t);if(e==mV||e==yV)return!t.size;if(Wh(t))return!cV(t).length;for(var n in t)if(xV.call(t,n))return!1;return!0}var rA="c4",vV=x(t=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(t),"detector"),wV=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./c4Diagram-YG6GDRKO-5z8Y7VpF.js");return{diagram:e}},__vite__mapDeps([10,11,6,7]));return{id:rA,diagram:t}},"loader"),CV={id:rA,detector:vV,loader:wV},kV=CV,iA="flowchart",SV=x((t,e)=>{var n,r;return((n=e==null?void 0:e.flowchart)==null?void 0:n.defaultRenderer)==="dagre-wrapper"||((r=e==null?void 0:e.flowchart)==null?void 0:r.defaultRenderer)==="elk"?!1:/^\s*graph/.test(t)},"detector"),_V=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./flowDiagram-NV44I4VS-D9H4PbAh.js");return{diagram:e}},__vite__mapDeps([12,13,14,15,16,6,7]));return{id:iA,diagram:t}},"loader"),EV={id:iA,detector:SV,loader:_V},TV=EV,oA="flowchart-v2",MV=x((t,e)=>{var n,r,i;return((n=e==null?void 0:e.flowchart)==null?void 0:n.defaultRenderer)==="dagre-d3"?!1:(((r=e==null?void 0:e.flowchart)==null?void 0:r.defaultRenderer)==="elk"&&(e.layout="elk"),/^\s*graph/.test(t)&&((i=e==null?void 0:e.flowchart)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(t))},"detector"),AV=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./flowDiagram-NV44I4VS-D9H4PbAh.js");return{diagram:e}},__vite__mapDeps([12,13,14,15,16,6,7]));return{id:oA,diagram:t}},"loader"),NV={id:oA,detector:MV,loader:AV},OV=NV,sA="er",LV=x(t=>/^\s*erDiagram/.test(t),"detector"),RV=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./erDiagram-Q2GNP2WA-BKcc8QRT.js");return{diagram:e}},__vite__mapDeps([17,14,15,16,6,7]));return{id:sA,diagram:t}},"loader"),IV={id:sA,detector:LV,loader:RV},DV=IV,aA="gitGraph",BV=x(t=>/^\s*gitGraph/.test(t),"detector"),PV=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./gitGraphDiagram-NY62KEGX-hA_4VN-5.js");return{diagram:e}},__vite__mapDeps([18,19,20,21,6,7,2,4,5]));return{id:aA,diagram:t}},"loader"),$V={id:aA,detector:BV,loader:PV},FV=$V,lA="gantt",zV=x(t=>/^\s*gantt/.test(t),"detector"),HV=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./ganttDiagram-JELNMOA3-DLRP2za5.js");return{diagram:e}},__vite__mapDeps([22,6,7,23,24,25]));return{id:lA,diagram:t}},"loader"),WV={id:lA,detector:zV,loader:HV},UV=WV,cA="info",jV=x(t=>/^\s*info/.test(t),"detector"),qV=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./infoDiagram-WHAUD3N6-06l3nYao.js");return{diagram:e}},__vite__mapDeps([26,21,6,7,2,4,5]));return{id:cA,diagram:t}},"loader"),VV={id:cA,detector:jV,loader:qV},uA="pie",GV=x(t=>/^\s*pie/.test(t),"detector"),KV=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./pieDiagram-ADFJNKIX-Br9SssUu.js");return{diagram:e}},__vite__mapDeps([27,19,21,6,7,2,4,5,28,29,24]));return{id:uA,diagram:t}},"loader"),YV={id:uA,detector:GV,loader:KV},dA="quadrantChart",XV=x(t=>/^\s*quadrantChart/.test(t),"detector"),ZV=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./quadrantDiagram-AYHSOK5B-uEZG07dn.js");return{diagram:e}},__vite__mapDeps([30,23,24,25,6,7]));return{id:dA,diagram:t}},"loader"),JV={id:dA,detector:XV,loader:ZV},QV=JV,hA="xychart",eG=x(t=>/^\s*xychart(-beta)?/.test(t),"detector"),tG=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./xychartDiagram-PRI3JC2R-90Pjm0pz.js");return{diagram:e}},__vite__mapDeps([31,24,29,23,25,6,7]));return{id:hA,diagram:t}},"loader"),nG={id:hA,detector:eG,loader:tG},rG=nG,fA="requirement",iG=x(t=>/^\s*requirement(Diagram)?/.test(t),"detector"),oG=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./requirementDiagram-UZGBJVZJ-B0Q2QBUm.js");return{diagram:e}},__vite__mapDeps([32,14,15,6,7]));return{id:fA,diagram:t}},"loader"),sG={id:fA,detector:iG,loader:oG},aG=sG,pA="sequence",lG=x(t=>/^\s*sequenceDiagram/.test(t),"detector"),cG=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./sequenceDiagram-WL72ISMW-Cxy9Szpx.js");return{diagram:e}},__vite__mapDeps([33,11,20,6,7]));return{id:pA,diagram:t}},"loader"),uG={id:pA,detector:lG,loader:cG},dG=uG,gA="class",hG=x((t,e)=>{var n;return((n=e==null?void 0:e.class)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(t)},"detector"),fG=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./classDiagram-2ON5EDUG-zvVV8sb6.js");return{diagram:e}},__vite__mapDeps([34,35,13,14,15,6,7]));return{id:gA,diagram:t}},"loader"),pG={id:gA,detector:hG,loader:fG},gG=pG,mA="classDiagram",mG=x((t,e)=>{var n;return/^\s*classDiagram/.test(t)&&((n=e==null?void 0:e.class)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(t)},"detector"),yG=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./classDiagram-v2-WZHVMYZB-zvVV8sb6.js");return{diagram:e}},__vite__mapDeps([36,35,13,14,15,6,7]));return{id:mA,diagram:t}},"loader"),bG={id:mA,detector:mG,loader:yG},xG=bG,yA="state",vG=x((t,e)=>{var n;return((n=e==null?void 0:e.state)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(t)},"detector"),wG=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./stateDiagram-FKZM4ZOC-DBUWYFNN.js");return{diagram:e}},__vite__mapDeps([37,38,14,15,1,2,3,4,6,7]));return{id:yA,diagram:t}},"loader"),CG={id:yA,detector:vG,loader:wG},kG=CG,bA="stateDiagram",SG=x((t,e)=>{var n;return!!(/^\s*stateDiagram-v2/.test(t)||/^\s*stateDiagram/.test(t)&&((n=e==null?void 0:e.state)==null?void 0:n.defaultRenderer)==="dagre-wrapper")},"detector"),_G=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./stateDiagram-v2-4FDKWEC3-LSWfmN39.js");return{diagram:e}},__vite__mapDeps([39,38,14,15,6,7]));return{id:bA,diagram:t}},"loader"),EG={id:bA,detector:SG,loader:_G},TG=EG,xA="journey",MG=x(t=>/^\s*journey/.test(t),"detector"),AG=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./journeyDiagram-XKPGCS4Q-gVwpTt9u.js");return{diagram:e}},__vite__mapDeps([40,11,13,28,6,7]));return{id:xA,diagram:t}},"loader"),NG={id:xA,detector:MG,loader:AG},OG=NG,LG=x((t,e,n)=>{G.debug(`rendering svg for syntax error
`);const r=h9(e),i=r.append("g");r.attr("viewBox","0 0 2412 512"),VS(r,100,512,!0),i.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),i.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),i.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),i.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),i.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),i.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),i.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),i.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${n}`)},"draw"),vA={draw:LG},RG=vA,IG={db:{},renderer:vA,parser:{parse:x(()=>{},"parse")}},DG=IG,wA="flowchart-elk",BG=x((t,e={})=>{var n;return/^\s*flowchart-elk/.test(t)||/^\s*(flowchart|graph)/.test(t)&&((n=e==null?void 0:e.flowchart)==null?void 0:n.defaultRenderer)==="elk"?(e.layout="elk",!0):!1},"detector"),PG=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./flowDiagram-NV44I4VS-D9H4PbAh.js");return{diagram:e}},__vite__mapDeps([12,13,14,15,16,6,7]));return{id:wA,diagram:t}},"loader"),$G={id:wA,detector:BG,loader:PG},FG=$G,CA="timeline",zG=x(t=>/^\s*timeline/.test(t),"detector"),HG=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./timeline-definition-IT6M3QCI-K01LIYmj.js");return{diagram:e}},__vite__mapDeps([41,28,6,7]));return{id:CA,diagram:t}},"loader"),WG={id:CA,detector:zG,loader:HG},UG=WG,kA="mindmap",jG=x(t=>/^\s*mindmap/.test(t),"detector"),qG=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./mindmap-definition-VGOIOE7T-BGkq58Rc.js");return{diagram:e}},__vite__mapDeps([42,14,15,6,7]));return{id:kA,diagram:t}},"loader"),VG={id:kA,detector:jG,loader:qG},GG=VG,SA="kanban",KG=x(t=>/^\s*kanban/.test(t),"detector"),YG=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./kanban-definition-3W4ZIXB7-C63Dy6Qe.js");return{diagram:e}},__vite__mapDeps([43,13,6,7]));return{id:SA,diagram:t}},"loader"),XG={id:SA,detector:KG,loader:YG},ZG=XG,_A="sankey",JG=x(t=>/^\s*sankey(-beta)?/.test(t),"detector"),QG=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./sankeyDiagram-TZEHDZUN-DaWiSZlJ.js");return{diagram:e}},__vite__mapDeps([44,29,24,6,7]));return{id:_A,diagram:t}},"loader"),eK={id:_A,detector:JG,loader:QG},tK=eK,EA="packet",nK=x(t=>/^\s*packet(-beta)?/.test(t),"detector"),rK=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./diagram-S2PKOQOG-VCaRdv9P.js");return{diagram:e}},__vite__mapDeps([45,19,21,6,7,2,4,5]));return{id:EA,diagram:t}},"loader"),iK={id:EA,detector:nK,loader:rK},TA="radar",oK=x(t=>/^\s*radar-beta/.test(t),"detector"),sK=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./diagram-QEK2KX5R-DMiCsMjF.js");return{diagram:e}},__vite__mapDeps([46,19,21,6,7,2,4,5]));return{id:TA,diagram:t}},"loader"),aK={id:TA,detector:oK,loader:sK},MA="block",lK=x(t=>/^\s*block(-beta)?/.test(t),"detector"),cK=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./blockDiagram-VD42YOAC-BJL4LDOY.js");return{diagram:e}},__vite__mapDeps([47,13,5,2,1,16,6,7]));return{id:MA,diagram:t}},"loader"),uK={id:MA,detector:lK,loader:cK},dK=uK,AA="architecture",hK=x(t=>/^\s*architecture/.test(t),"detector"),fK=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./architectureDiagram-VXUJARFQ-DWqbc_h3.js");return{diagram:e}},__vite__mapDeps([48,19,21,6,7,2,4,5,9]));return{id:AA,diagram:t}},"loader"),pK={id:AA,detector:hK,loader:fK},gK=pK,NA="treemap",mK=x(t=>/^\s*treemap/.test(t),"detector"),yK=x(async()=>{const{diagram:t}=await rt(async()=>{const{diagram:e}=await import("./diagram-PSM6KHXK-j-6apACh.js");return{diagram:e}},__vite__mapDeps([49,15,19,21,6,7,2,4,5,25,29,24]));return{id:NA,diagram:t}},"loader"),bK={id:NA,detector:mK,loader:yK},sv=!1,ef=x(()=>{sv||(sv=!0,Md("error",DG,t=>t.toLowerCase().trim()==="error"),Md("---",{db:{clear:x(()=>{},"clear")},styles:{},renderer:{draw:x(()=>{},"draw")},parser:{parse:x(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:x(()=>null,"init")},t=>t.toLowerCase().trimStart().startsWith("---")),ag(FG,GG,gK),ag(kV,ZG,xG,gG,DV,UV,VV,YV,aG,dG,OV,TV,UG,FV,TG,kG,OG,QV,tK,iK,rG,dK,aK,bK))},"addDiagrams"),xK=x(async()=>{G.debug("Loading registered diagrams");const e=(await Promise.allSettled(Object.entries(Yo).map(async([n,{detector:r,loader:i}])=>{if(i)try{dg(n)}catch{try{const{diagram:o,id:s}=await i();Md(s,o,r)}catch(o){throw G.error(`Failed to load external diagram with key ${n}. Removing from detectors.`),delete Yo[n],o}}}))).filter(n=>n.status==="rejected");if(e.length>0){G.error(`Failed to load ${e.length} external diagrams`);for(const n of e)G.error(n);throw new Error(`Failed to load ${e.length} external diagrams`)}},"loadRegisteredDiagrams"),vK="graphics-document document";function OA(t,e){t.attr("role",vK),e!==""&&t.attr("aria-roledescription",e)}x(OA,"setA11yDiagramInfo");function LA(t,e,n,r){if(t.insert!==void 0){if(n){const i=`chart-desc-${r}`;t.attr("aria-describedby",i),t.insert("desc",":first-child").attr("id",i).text(n)}if(e){const i=`chart-title-${r}`;t.attr("aria-labelledby",i),t.insert("title",":first-child").attr("id",i).text(e)}}}x(LA,"addSVGa11yTitleDescription");var Wo,tm=(Wo=class{constructor(e,n,r,i,o){this.type=e,this.text=n,this.db=r,this.parser=i,this.renderer=o}static async fromText(e,n={}){var c,u;const r=pn(),i=py(e,r);e=bU(e)+`
`;try{dg(i)}catch{const d=WF(i);if(!d)throw new IS(`Diagram ${i} not found.`);const{id:h,diagram:f}=await d();Md(h,f)}const{db:o,parser:s,renderer:a,init:l}=dg(i);return s.parser&&(s.parser.yy=o),(c=o.clear)==null||c.call(o),l==null||l(r),n.title&&((u=o.setDiagramTitle)==null||u.call(o,n.title)),await s.parse(e),new Wo(i,e,o,s,a)}async render(e,n){await this.renderer.draw(this.text,e,n,this)}getParser(){return this.parser}getType(){return this.type}},x(Wo,"Diagram"),Wo),av=[],wK=x(()=>{av.forEach(t=>{t()}),av=[]},"attachFunctions"),CK=x(t=>t.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function RA(t){const e=t.match(RS);if(!e)return{text:t,metadata:{}};let n=x8(e[1],{schema:b8})??{};n=typeof n=="object"&&!Array.isArray(n)?n:{};const r={};return n.displayMode&&(r.displayMode=n.displayMode.toString()),n.title&&(r.title=n.title.toString()),n.config&&(r.config=n.config),{text:t.slice(e[0].length),metadata:r}}x(RA,"extractFrontMatter");var kK=x(t=>t.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(e,n,r)=>"<"+n+r.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),SK=x(t=>{const{text:e,metadata:n}=RA(t),{displayMode:r,title:i,config:o={}}=n;return r&&(o.gantt||(o.gantt={}),o.gantt.displayMode=r),{title:i,config:o,text:e}},"processFrontmatter"),_K=x(t=>{const e=kr.detectInit(t)??{},n=kr.detectDirective(t,"wrap");return Array.isArray(n)?e.wrap=n.some(({type:r})=>r==="wrap"):(n==null?void 0:n.type)==="wrap"&&(e.wrap=!0),{text:oU(t),directive:e}},"processDirectives");function f0(t){const e=kK(t),n=SK(e),r=_K(n.text),i=Xy(n.config,r.directive);return t=CK(r.text),{code:t,title:n.title,config:i}}x(f0,"preprocessDiagram");function IA(t){const e=new TextEncoder().encode(t),n=Array.from(e,r=>String.fromCodePoint(r)).join("");return btoa(n)}x(IA,"toBase64");var EK=5e4,TK="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",MK="sandbox",AK="loose",NK="http://www.w3.org/2000/svg",OK="http://www.w3.org/1999/xlink",LK="http://www.w3.org/1999/xhtml",RK="100%",IK="100%",DK="border:0;margin:0;",BK="margin:0",PK="allow-top-navigation-by-user-activation allow-popups",$K='The "iframe" tag is not supported by your browser.',FK=["foreignobject"],zK=["dominant-baseline"];function p0(t){const e=f0(t);return Ed(),i4(e.config??{}),e}x(p0,"processAndSetConfigs");async function DA(t,e){ef();try{const{code:n,config:r}=p0(t);return{diagramType:(await PA(n)).type,config:r}}catch(n){if(e!=null&&e.suppressErrors)return!1;throw n}}x(DA,"parse");var lv=x((t,e,n=[])=>`
.${t} ${e} { ${n.join(" !important; ")} !important; }`,"cssImportantStyles"),HK=x((t,e=new Map)=>{var r;let n="";if(t.themeCSS!==void 0&&(n+=`
${t.themeCSS}`),t.fontFamily!==void 0&&(n+=`
:root { --mermaid-font-family: ${t.fontFamily}}`),t.altFontFamily!==void 0&&(n+=`
:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),e instanceof Map){const a=t.htmlLabels??((r=t.flowchart)==null?void 0:r.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];e.forEach(l=>{ov(l.styles)||a.forEach(c=>{n+=lv(l.id,c,l.styles)}),ov(l.textStyles)||(n+=lv(l.id,"tspan",((l==null?void 0:l.textStyles)||[]).map(c=>c.replace("color","fill"))))})}return n},"createCssStyles"),WK=x((t,e,n,r)=>{const i=HK(t,n),o=S4(e,i,t.themeVariables);return Xg(rV(`${r}{${o}}`),oV)},"createUserStyles"),UK=x((t="",e,n)=>{let r=t;return!n&&!e&&(r=r.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),r=hs(r),r=r.replace(/<br>/g,"<br/>"),r},"cleanUpSvgCode"),jK=x((t="",e)=>{var i,o;const n=(o=(i=e==null?void 0:e.viewBox)==null?void 0:i.baseVal)!=null&&o.height?e.viewBox.baseVal.height+"px":IK,r=IA(`<body style="${BK}">${t}</body>`);return`<iframe style="width:${RK};height:${n};${DK}" src="data:text/html;charset=UTF-8;base64,${r}" sandbox="${PK}">
  ${$K}
</iframe>`},"putIntoIFrame"),cv=x((t,e,n,r,i)=>{const o=t.append("div");o.attr("id",n),r&&o.attr("style",r);const s=o.append("svg").attr("id",e).attr("width","100%").attr("xmlns",NK);return i&&s.attr("xmlns:xlink",i),s.append("g"),t},"appendDivSvgG");function nm(t,e){return t.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}x(nm,"sandboxedIframe");var qK=x((t,e,n,r)=>{var i,o,s;(i=t.getElementById(e))==null||i.remove(),(o=t.getElementById(n))==null||o.remove(),(s=t.getElementById(r))==null||s.remove()},"removeExistingElements"),VK=x(async function(t,e,n){var P,B,A,M,L,F;ef();const r=p0(e);e=r.code;const i=pn();G.debug(i),e.length>((i==null?void 0:i.maxTextSize)??EK)&&(e=TK);const o="#"+t,s="i"+t,a="#"+s,l="d"+t,c="#"+l,u=x(()=>{const q=Ve(h?a:c).node();q&&"remove"in q&&q.remove()},"removeTempElements");let d=Ve("body");const h=i.securityLevel===MK,f=i.securityLevel===AK,p=i.fontFamily;if(n!==void 0){if(n&&(n.innerHTML=""),h){const I=nm(Ve(n),s);d=Ve(I.nodes()[0].contentDocument.body),d.node().style.margin=0}else d=Ve(n);cv(d,t,l,`font-family: ${p}`,OK)}else{if(qK(document,t,l,s),h){const I=nm(Ve("body"),s);d=Ve(I.nodes()[0].contentDocument.body),d.node().style.margin=0}else d=Ve("body");cv(d,t,l)}let g,m;try{g=await tm.fromText(e,{title:r.title})}catch(I){if(i.suppressErrorRendering)throw u(),I;g=await tm.fromText("error"),m=I}const y=d.select(c).node(),b=g.type,C=y.firstChild,v=C.firstChild,k=(B=(P=g.renderer).getClasses)==null?void 0:B.call(P,e,g),w=WK(i,b,k,o),S=document.createElement("style");S.innerHTML=w,C.insertBefore(S,v);try{await g.renderer.draw(e,t,Mx.version,g)}catch(I){throw i.suppressErrorRendering?u():RG.draw(e,t,Mx.version),I}const E=d.select(`${c} svg`),R=(M=(A=g.db).getAccTitle)==null?void 0:M.call(A),$=(F=(L=g.db).getAccDescription)==null?void 0:F.call(L);$A(b,E,R,$),d.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns",LK);let T=d.select(c).node().innerHTML;if(G.debug("config.arrowMarkerAbsolute",i.arrowMarkerAbsolute),T=UK(T,h,zt(i.arrowMarkerAbsolute)),h){const I=d.select(c+" svg").node();T=jK(T,I)}else f||(T=ra.sanitize(T,{ADD_TAGS:FK,ADD_ATTR:zK,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(wK(),m)throw m;return u(),{diagramType:b,svg:T,bindFunctions:g.db.bindFunctions}},"render");function BA(t={}){var r;const e=$t({},t);e!=null&&e.fontFamily&&!((r=e.themeVariables)!=null&&r.fontFamily)&&(e.themeVariables||(e.themeVariables={}),e.themeVariables.fontFamily=e.fontFamily),n4(e),e!=null&&e.theme&&e.theme in yi?e.themeVariables=yi[e.theme].getThemeVariables(e.themeVariables):e&&(e.themeVariables=yi.default.getThemeVariables(e.themeVariables));const n=typeof e=="object"?t4(e):FS();fy(n.logLevel),ef()}x(BA,"initialize");var PA=x((t,e={})=>{const{code:n}=f0(t);return tm.fromText(n,e)},"getDiagramFromText");function $A(t,e,n,r){OA(e,t),LA(e,n,r,e.attr("id"))}x($A,"addA11yInfo");var ts=Object.freeze({render:VK,parse:DA,getDiagramFromText:PA,initialize:BA,getConfig:pn,setConfig:zS,getSiteConfig:FS,updateSiteConfig:r4,reset:x(()=>{Ed()},"reset"),globalReset:x(()=>{Ed(ia)},"globalReset"),defaultConfig:ia});fy(pn().logLevel);Ed(pn());var GK=x((t,e,n)=>{G.warn(t),Yy(t)?(n&&n(t.str,t.hash),e.push({...t,message:t.str,error:t})):(n&&n(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},"handleError"),FA=x(async function(t={querySelector:".mermaid"}){try{await KK(t)}catch(e){if(Yy(e)&&G.error(e.str),Yn.parseError&&Yn.parseError(e),!t.suppressErrors)throw G.error("Use the suppressErrors option to suppress these errors"),e}},"run"),KK=x(async function({postRenderCallback:t,querySelector:e,nodes:n}={querySelector:".mermaid"}){const r=ts.getConfig();G.debug(`${t?"":"No "}Callback function found`);let i;if(n)i=n;else if(e)i=document.querySelectorAll(e);else throw new Error("Nodes and querySelector are both undefined");G.debug(`Found ${i.length} diagrams`),(r==null?void 0:r.startOnLoad)!==void 0&&(G.debug("Start On Load: "+(r==null?void 0:r.startOnLoad)),ts.updateSiteConfig({startOnLoad:r==null?void 0:r.startOnLoad}));const o=new kr.InitIDGenerator(r.deterministicIds,r.deterministicIDSeed);let s;const a=[];for(const l of Array.from(i)){if(G.info("Rendering diagram: "+l.id),l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const c=`mermaid-${o.next()}`;s=l.innerHTML,s=sT(kr.entityDecode(s)).trim().replace(/<br\s*\/?>/gi,"<br/>");const u=kr.detectInit(s);u&&G.debug("Detected early reinit: ",u);try{const{svg:d,bindFunctions:h}=await UA(c,s,l);l.innerHTML=d,t&&await t(c),h&&h(l)}catch(d){GK(d,a,Yn.parseError)}}if(a.length>0)throw a[0]},"runThrowsErrors"),zA=x(function(t){ts.initialize(t)},"initialize"),YK=x(async function(t,e,n){G.warn("mermaid.init is deprecated. Please use run instead."),t&&zA(t);const r={postRenderCallback:n,querySelector:".mermaid"};typeof e=="string"?r.querySelector=e:e&&(e instanceof HTMLElement?r.nodes=[e]:r.nodes=e),await FA(r)},"init"),XK=x(async(t,{lazyLoad:e=!0}={})=>{ef(),ag(...t),e===!1&&await xK()},"registerExternalDiagrams"),HA=x(function(){if(Yn.startOnLoad){const{startOnLoad:t}=ts.getConfig();t&&Yn.run().catch(e=>G.error("Mermaid failed to initialize",e))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",HA,!1);var ZK=x(function(t){Yn.parseError=t},"setParseErrorHandler"),oh=[],gp=!1,WA=x(async()=>{if(!gp){for(gp=!0;oh.length>0;){const t=oh.shift();if(t)try{await t()}catch(e){G.error("Error executing queue",e)}}gp=!1}},"executeQueue"),JK=x(async(t,e)=>new Promise((n,r)=>{const i=x(()=>new Promise((o,s)=>{ts.parse(t,e).then(a=>{o(a),n(a)},a=>{var l;G.error("Error parsing",a),(l=Yn.parseError)==null||l.call(Yn,a),s(a),r(a)})}),"performCall");oh.push(i),WA().catch(r)}),"parse"),UA=x((t,e,n)=>new Promise((r,i)=>{const o=x(()=>new Promise((s,a)=>{ts.render(t,e,n).then(l=>{s(l),r(l)},l=>{var c;G.error("Error parsing",l),(c=Yn.parseError)==null||c.call(Yn,l),a(l),i(l)})}),"performCall");oh.push(o),WA().catch(i)}),"render"),QK=x(()=>Object.keys(Yo).map(t=>({id:t})),"getRegisteredDiagramsMetadata"),Yn={startOnLoad:!0,mermaidAPI:ts,parse:JK,render:UA,init:YK,run:FA,registerExternalDiagrams:XK,registerLayoutLoaders:XM,initialize:zA,parseError:void 0,contentLoaded:HA,setParseErrorHandler:ZK,detectType:py,registerIconPacks:Cj,getRegisteredDiagramsMetadata:QK},jA=Yn;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */function uv(t,e){return t.attrs.id||`node-${e}`}jA.initialize({startOnLoad:!1,theme:"default",securityLevel:"loose"});const eY=({node:t,updateAttributes:e,editor:n,getPos:r})=>{const{t:i}=ki(),[o,s]=O.useState(t.attrs.code||""),[a,l]=O.useState("split"),[c,u]=O.useState(""),[d,h]=O.useState(null),f=O.useRef(`mermaid-${Math.random().toString(36).substr(2,9)}`).current,p=O.useCallback(()=>{var b,C;const y=(C=(b=n==null?void 0:n.storage)==null?void 0:b.handleDisplay)==null?void 0:C.handleView;if(y){const v=r(),k=uv(t,v);y.showHandleByNodeId(k)}},[n,t,r]),g=O.useCallback(y=>{var v,k;const b=(k=(v=n==null?void 0:n.storage)==null?void 0:v.handleDisplay)==null?void 0:k.handleView;if(!b)return;const C=y.relatedTarget;C!=null&&C.closest(".drag-handle")||setTimeout(()=>{const w=r(),S=uv(t,w);b.getCurrentNodeId()===S&&b.hideAllHandles()},50)},[n,t,r]),m=O.useCallback(async y=>{if(!y){u("");return}try{const b=document.getElementById(f);b&&b.remove();const{svg:C}=await jA.render(f,y);u(C),h(null)}catch(b){console.error("Mermaid rendering error:",b),h("Syntax Error")}},[f]);return O.useEffect(()=>{const y=setTimeout(()=>{m(o),o!==t.attrs.code&&e({code:o})},500);return()=>clearTimeout(y)},[o,m,e,t.attrs.code]),_.jsx(_h,{className:"mermaid-node-view","data-type":"mermaid",children:_.jsxs("div",{className:"mermaid-container","data-type":"mermaid",onMouseEnter:p,onMouseLeave:g,children:[_.jsxs("div",{className:"mermaid-toolbar",children:[_.jsxs("div",{className:"mermaid-title",children:[_.jsx("span",{children:""})," ",i("editorMermaidTitle")]}),_.jsxs("div",{className:"mermaid-mode-group",children:[_.jsx("button",{className:`mermaid-mode-btn ${a==="code"?"active":""}`,onClick:()=>l("code"),children:i("editorMermaidCode")}),_.jsx("button",{className:`mermaid-mode-btn ${a==="split"?"active":""}`,onClick:()=>l("split"),children:i("editorMermaidSplit")}),_.jsx("button",{className:`mermaid-mode-btn ${a==="preview"?"active":""}`,onClick:()=>l("preview"),children:i("editorMermaidPreview")})]})]}),_.jsxs("div",{className:`mermaid-content-wrapper mode-${a}`,children:[_.jsx("div",{className:"mermaid-pane mermaid-editor-pane",children:_.jsx("textarea",{className:"mermaid-textarea",value:o,onChange:y=>s(y.target.value),spellCheck:!1,placeholder:i("editorMermaidPlaceholder")})}),_.jsx("div",{className:"mermaid-pane mermaid-preview-pane",children:d?_.jsxs("div",{className:"text-red-500 text-sm p-4 text-center",children:[_.jsx("div",{className:"font-bold mb-2",children:i("editorMermaidRenderError")}),d==="Syntax Error"?i("editorMermaidSyntaxError"):d]}):_.jsx("div",{className:"mermaid-svg-wrapper",dangerouslySetInnerHTML:{__html:c}})})]})]})})},tY=_t.create({name:"mermaid",group:"block",atom:!0,addOptions(){return{HTMLAttributes:{}}},addAttributes(){return{code:{default:`graph TD
 A[Start] --> B[End]`}}},parseHTML(){return[{tag:'div[data-type="mermaid"]'}]},renderHTML({HTMLAttributes:t}){return["div",Qe(t,{"data-type":"mermaid"})]},addNodeView(){return Eh(eY)},addCommands(){return{setMermaid:()=>({commands:t})=>t.insertContent({type:this.name})}}}),sh=2,Us=7,Ss=5,nY=12,mp=2,xi="columns",lr="column",g0="columnCleanupSkip";class ji{static calculateResizedWidths(e){const{deltaX:n,containerWidth:r,currentWidths:i,leftIndex:o,rightIndex:s}=e,a=n/r*100,l=i[o],c=i[s];let u=l+a,d=c-a;if(u<Ss?(u=Ss,d=l+c-Ss):d<Ss&&(d=Ss,u=l+c-Ss),!(Math.abs(u-l)>.1||Math.abs(d-c)>.1))return{changed:!1,newWidths:i};const f=[...i];return f[o]=u,f[s]=d,{changed:!0,newWidths:f}}static initializeWidths(e){const n=100/e;return Array(e).fill(n)}static widthsAfterAddColumn(e){return this.initializeWidths(e)}static widthsAfterRemoveColumn(e){return this.initializeWidths(e)}static shouldSyncWidths(e,n){return!e||e.length===0?!1:e.length!==n.length?!0:e.some((r,i)=>Math.abs(r-n[i])>.1)}}class rY{static canAddColumn(e){return e>=Us?{valid:!1,error:` ${Us}`}:{valid:!0}}static canRemoveColumn(e){return e<=sh?{valid:!1,error:` ${sh}`}:{valid:!0}}static addColumn(e){const{editor:n,node:r,nodePos:i,afterIndex:o,currentWidths:s}=e;j.multiColumn.debug(" ",{nodePos:i,afterIndex:o,currentWidths:s,currentColumnCount:s.length});const a=this.canAddColumn(s.length);if(!a.valid)return j.multiColumn.warn("",{error:a.error}),!1;const{tr:l}=n.state,c=ji.widthsAfterAddColumn(s.length+1);j.multiColumn.debug(" ",{oldWidths:s,newWidths:c,oldColumnCount:s.length,newColumnCount:c.length}),l.setNodeMarkup(i,void 0,{...r.attrs,count:c.length,columnWidths:c});const u=n.schema.nodes[lr],d=100/c.length,h=u.create({width:d},n.schema.nodes.paragraph.create());let f=i+1;for(let p=0;p<=o&&p<r.childCount;p++)f+=r.child(p).nodeSize;return j.multiColumn.debug(" ",{insertPos:f,afterIndex:o}),l.insert(f,h),l.setMeta(g0,!0),n.view.dispatch(l),j.multiColumn.info(" transaction  dispatch",{nodePos:i,afterIndex:o,columnCount:c.length}),!0}static removeColumn(e){const{editor:n,node:r,nodePos:i,columnIndex:o,currentWidths:s}=e,a=this.canRemoveColumn(s.length);if(!a.valid)return j.multiColumn.warn("",{error:a.error}),!1;if(o>=r.childCount)return j.multiColumn.warn("",{columnIndex:o,totalColumns:r.childCount}),!1;const{tr:l}=n.state,c=ji.widthsAfterRemoveColumn(s.length-1);l.setNodeMarkup(i,void 0,{...r.attrs,count:c.length,columnWidths:c});let u=i+1;for(let h=0;h<o&&h<r.childCount;h++)u+=r.child(h).nodeSize;const d=r.child(o);return l.delete(u,u+d.nodeSize),n.view.dispatch(l),!0}static updateColumnWidths(e,n,r,i){const{tr:o}=e.state;o.setNodeMarkup(r,void 0,{...n.attrs,columnWidths:i}),e.view.dispatch(o)}}class iY{static canCreateColumns(e){const{$from:n}=e.selection;for(let r=n.depth;r>0;r--)if(n.node(r).type.name===lr)return{valid:!1,error:""};return{valid:!0}}static isInsideColumn(e,n){const r=e.doc.resolve(n);for(let i=r.depth;i>0;i--)if(r.node(i).type.name===lr)return!0;return!1}}class dv{static detectCleanupAction(e,n){if(e.type.name!==xi)return{type:"none"};if(e.childCount<sh)return{type:"unwrap-single-column",columnsPos:n};const r=this.findFirstEmptyColumn(e);return r!==-1?{type:"remove-empty-column",columnsPos:n,columnIndex:r}:{type:"none"}}static executeCleanup(e,n){return n.type==="unwrap-single-column"?this.unwrapColumns(e,n.columnsPos):n.type==="remove-empty-column"?this.removeEmptyColumn(e,n.columnsPos,n.columnIndex):e}static findFirstEmptyColumn(e){for(let n=0;n<e.childCount;n++){const r=e.child(n);if(this.isColumnEmpty(r))return n}return-1}static isColumnEmpty(e){if(e.type.name!==lr)return!1;if(e.childCount===0)return!0;if(e.childCount===1){const n=e.child(0);if(n.type.name==="paragraph"&&n.childCount===0)return!0}return!1}static unwrapColumns(e,n){const r=e.doc.nodeAt(n);if(!r||r.type.name!==xi)return e;const i=[];return r.forEach(o=>{o.type.name===lr&&o.forEach(s=>{i.push(s)})}),e.delete(n,n+r.nodeSize),i.length>0&&e.insert(n,i),e}static removeEmptyColumn(e,n,r){const i=e.doc.nodeAt(n);if(!i||i.type.name!==xi)return e;let o=n+1;for(let u=0;u<r;u++)o+=i.child(u).nodeSize;const s=i.child(r),a=o+s.nodeSize;e.delete(o,a);const l=i.childCount-1;if(l<sh)return this.unwrapColumns(e,n);const c=ji.widthsAfterRemoveColumn(l);return e.setNodeMarkup(n,void 0,{...i.attrs,count:l,columnWidths:c}),e}}const oY=({node:t,editor:e,getPos:n,updateAttributes:r})=>{const[i,o]=O.useState(!1),[s,a]=O.useState(-1),[l,c]=O.useState(!1),[u,d]=O.useState(()=>ji.initializeWidths(t.content.childCount)),[h,f]=O.useState([]),g=(t.attrs.layout||"grid")==="stacked",m=O.useRef(null),y=O.useRef(0),b=O.useRef([]),C=O.useRef(u),v=O.useRef(!1);O.useEffect(()=>{v.current||ji.shouldSyncWidths(t.attrs.columnWidths,u)&&d(t.attrs.columnWidths)},[t.attrs.columnWidths,t.content.childCount,u]),O.useEffect(()=>{C.current=u},[u]),O.useEffect(()=>{const P=setTimeout(()=>{if(m.current){j.multiColumn.debug(" DOM"),j.multiColumn.debug(" Container className",{className:m.current.className}),j.multiColumn.debug(" Container computedStyle",{display:window.getComputedStyle(m.current).display,gridTemplateColumns:window.getComputedStyle(m.current).gridTemplateColumns});const B=m.current.querySelector(".columns-content-grid");B&&j.multiColumn.debug(" Content Grid computedStyle",{display:window.getComputedStyle(B).display,gridTemplateColumns:window.getComputedStyle(B).gridTemplateColumns});const A=m.current.querySelectorAll('[data-type="column"]');j.multiColumn.debug(" Columns",Array.from(A).map((M,L)=>({index:L,className:M.className,display:window.getComputedStyle(M).display,width:M.getBoundingClientRect().width})))}},100);return()=>clearTimeout(P)},[t.content.childCount]),O.useEffect(()=>{const P=m.current;if(!P||g){f([]);return}const B=()=>{j.multiColumn.debug(""),j.multiColumn.debug("Container ",{container:P}),j.multiColumn.debug("Container HTML",{html:P.outerHTML.substring(0,500)});const F=P.querySelectorAll('[data-type="column"], .multi-column-item');if(j.multiColumn.debug(" column ",{count:F.length}),F.length===0){j.multiColumn.warn(" column "),j.multiColumn.debug("Container ",Array.from(P.children).map(Z=>({tagName:Z.tagName,className:Z.className,dataType:Z.getAttribute("data-type")}))),f([]);return}const I=P.getBoundingClientRect(),q=[];F.forEach((Z,Q)=>{const H=Z.getBoundingClientRect();if(j.multiColumn.debug(`Column ${Q}`,{left:H.left,right:H.right,width:H.width,computedStyle:window.getComputedStyle(Z).display}),Q<F.length-1){const oe=F[Q+1].getBoundingClientRect(),K=(H.right+oe.left)/2-I.left;j.multiColumn.debug(`Handle ${Q} position`,{position:K}),q.push({index:Q,position:K})}}),j.multiColumn.debug("",{positions:q}),f(q)},A=setTimeout(B,0);if(typeof ResizeObserver>"u")return()=>clearTimeout(A);const M=new ResizeObserver(B);M.observe(P);const L=new MutationObserver(B);return L.observe(P,{childList:!0,subtree:!0}),()=>{clearTimeout(A),M.disconnect(),L.disconnect()}},[u,t.content.childCount,g]);const k=O.useCallback(P=>{if(typeof n!="function")return;const B=n();if(rY.addColumn({editor:e,node:t,nodePos:B,afterIndex:P,currentWidths:u})){const M=ji.widthsAfterAddColumn(u.length+1);d(M)}},[u,e,n,t]),w=O.useCallback((P,B)=>{B.preventDefault(),o(!0),v.current=!0,a(P),y.current=B.clientX,b.current=[...u];const A=L=>{if(!m.current)return;const F=L.clientX-y.current,I=m.current.offsetWidth,q=ji.calculateResizedWidths({deltaX:F,containerWidth:I,currentWidths:b.current,leftIndex:P,rightIndex:P+1});q.changed&&d(q.newWidths)},M=()=>{r({columnWidths:C.current}),o(!1),v.current=!1,a(-1),document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",A),document.addEventListener("mouseup",M)},[u,r]),S=O.useCallback(P=>{if(!m.current)return{left:"0px",width:"0px"};const A=m.current.querySelectorAll('[data-type="column"], .multi-column-item')[P];if(!A)return{left:"0px",width:"0px"};const M=m.current.getBoundingClientRect(),L=A.getBoundingClientRect();return{left:`${L.left-M.left}px`,width:`${L.width}px`}},[]),E=g?"1fr":u.map(P=>`${P}fr`).join(" "),R=l||i,$=u.length<Us,T={display:"grid",gridTemplateColumns:E,gap:`${nY}px`,minHeight:"100px"};return j.multiColumn.debug(" :",{columnCount:t.content.childCount,columnWidths:u,gridTemplate:E,stacked:g,gridStyle:T}),_.jsx(_h,{className:"columns-view-grid","data-show-styles":R,"data-dragging":i,"data-stacked":g?"true":void 0,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:_.jsxs("div",{ref:m,className:"columns-container-grid",style:T,children:[_.jsx(Zm,{className:"columns-content-grid",as:"div"}),!g&&i&&u.map((P,B)=>{const{left:A,width:M}=S(B);return _.jsx("div",{className:"percent-label-wrapper",style:{left:A,width:M},children:_.jsxs("span",{children:[Math.round(P),"%"]})},`label-${B}`)}),!g&&R&&h.map(({index:P,position:B})=>_.jsxs("div",{className:`multi-column-resize-handle ${P===s&&i?"active":""}`,style:{left:`${B}px`},onMouseDown:A=>w(P,A),children:[$&&_.jsxs("div",{className:"add-column-area",children:[_.jsx("div",{className:"column-dot-indicator"}),_.jsx("button",{className:"add-column-btn",onClick:A=>{A.stopPropagation(),k(P)},title:"",children:_.jsxs("svg",{width:"22",height:"24",viewBox:"0 0 22 24",fill:"none",children:[_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.153 20.721A10.999 10.999 0 0022 11c0-6.075-4.925-11-11-11S0 4.925 0 11c0 4.213 2.369 7.873 5.847 9.721L11 24l5.153-3.279z",fill:"var(--primary, #3370ff)"}),_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.45 6a.2.2 0 00-.2.2v4.05H6.2a.2.2 0 00-.2.2v1.1c0 .11.09.2.2.2h4.05v4.05c0 .11.09.2.2.2h1.1a.2.2 0 00.2-.2v-4.05h4.05a.2.2 0 00.2-.2v-1.1a.2.2 0 00-.2-.2h-4.05V6.2a.2.2 0 00-.2-.2h-1.1z",fill:"#fff"})]})})]}),_.jsx("div",{className:"resize-handle-dragger"})]},`handle-${P}`))]})})},sY=new Je("multiColumnCleanup");function aY(t){const e=[];return t.descendants((n,r)=>n.type.name===xi?(e.push({node:n,pos:r}),!1):!0),e}function lY(){return new Ge({key:sY,appendTransaction(t,e,n){if(!t.some(l=>l.docChanged)||t.some(l=>l.getMeta(g0)))return null;const o=aY(n.doc);if(o.length===0)return null;let s=n.tr,a=!1;for(let l=o.length-1;l>=0;l--){const{node:c,pos:u}=o[l],d=dv.detectCleanupAction(c,u);if(d.type!=="none"){s=dv.executeCleanup(s,d),a=!0;break}}return a?s:null}})}const cY=_t.create({name:xi,group:"block",content:`${lr} ${lr}+`,isolating:!0,addAttributes(){return{count:{default:mp,parseHTML:t=>parseInt(t.getAttribute("data-columns")||`${mp}`),renderHTML:t=>({"data-columns":t.count})},columnWidths:{default:[],parseHTML:t=>{const e=t.getAttribute("data-column-widths");return e?JSON.parse(e):[]},renderHTML:t=>{var e;return(e=t.columnWidths)!=null&&e.length?{"data-column-widths":JSON.stringify(t.columnWidths)}:{}}},layout:{default:"grid",parseHTML:t=>t.getAttribute("data-layout")||"grid",renderHTML:t=>({"data-layout":t.layout||"grid"})}}},parseHTML(){return[{tag:'div[data-type="columns"]'}]},renderHTML({HTMLAttributes:t}){return["div",Qe(t,{"data-type":"columns"}),0]},addNodeView(){return Eh(oY)},addCommands(){return{insertColumns:(t=mp)=>({commands:e,state:n})=>{const r=iY.canCreateColumns(n);if(!r.valid)return j.multiColumn.debug("[ColumnsExtension]",r.error),!1;const i=[],o=ji.initializeWidths(t);for(let a=0;a<t;a++)i.push({type:lr,attrs:{width:o[a]},content:[{type:"paragraph",content:[]}]});const s=e.insertContent({type:this.name,attrs:{count:t,columnWidths:o,layout:"grid"},content:i});if(s&&this.editor.view){const a=this.editor.state.tr;a.setMeta(g0,!0),a.docChanged||this.editor.view.dispatch(a)}return s},setColumnWidths:t=>({state:e,dispatch:n})=>{const{selection:r}=e,i=r.$from.node(r.$from.depth);if(i.type.name!==this.name)return!1;if(n){const{tr:o}=e;o.setNodeMarkup(r.$from.before(r.$from.depth),void 0,{...i.attrs,columnWidths:t}),n(o)}return!0},setColumnsLayout:t=>({state:e,dispatch:n})=>{const{selection:r}=e,i=r.$from.node(r.$from.depth);if(i.type.name!==this.name)return!1;if(n){const{tr:o}=e;o.setNodeMarkup(r.$from.before(r.$from.depth),void 0,{...i.attrs,layout:t}),n(o)}return!0}}},addKeyboardShortcuts(){return{"Mod-Alt-2":()=>this.editor.commands.insertColumns(2),"Mod-Alt-3":()=>this.editor.commands.insertColumns(3)}},addProseMirrorPlugins(){return[lY()]}}),uY=_t.create({name:lr,content:"block+",isolating:!0,addAttributes(){return{width:{default:null,parseHTML:t=>t.getAttribute("data-width")||null,renderHTML:t=>t.width?{"data-width":t.width}:{}}}},parseHTML(){return[{tag:'div[data-type="column"]'}]},renderHTML({HTMLAttributes:t}){return["div",Qe(t,{"data-type":"column",class:"multi-column-item"}),0]}});var rm,im;if(typeof WeakMap<"u"){let t=new WeakMap;rm=e=>t.get(e),im=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;rm=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},im=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var Ct=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let o=r+1,s=i+1;for(let a=1;o<this.width&&this.map[e+a]==n;a++)o++;for(let a=1;s<this.height&&this.map[e+this.width*a]==n;a++)s++;return{left:r,top:i,right:o,bottom:s}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:o,bottom:s}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[o*this.width+(n<0?r-1:i)]:(n<0?o==0:s==this.height)?null:this.map[r+this.width*(n<0?o-1:s)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:o}=this.findCell(t),{left:s,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(n,s),top:Math.min(i,l),right:Math.max(r,a),bottom:Math.max(o,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const o=r*this.width+i,s=this.map[o];n[s]||(n[s]=!0,!(i==t.left&&i&&this.map[o-1]==s||r==t.top&&r&&this.map[o-this.width]==s)&&e.push(s))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const o=i+n.child(r).nodeSize;if(r==t){let s=e+t*this.width;const a=(t+1)*this.width;for(;s<a&&this.map[s]<i;)s++;return s==a?o-1:this.map[s]}i=o}}static get(t){return rm(t)||im(t,dY(t))}};function dY(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=hY(t),n=t.childCount,r=[];let i=0,o=null;const s=[];for(let c=0,u=e*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const d=t.child(c);u++;for(let p=0;;p++){for(;i<r.length&&r[i]!=0;)i++;if(p==d.childCount)break;const g=d.child(p),{colspan:m,rowspan:y,colwidth:b}=g.attrs;for(let C=0;C<y;C++){if(C+c>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:u,n:y-C});break}const v=i+C*e;for(let k=0;k<m;k++){r[v+k]==0?r[v+k]=u:(o||(o=[])).push({type:"collision",row:c,pos:u,n:m-k});const w=b&&b[k];if(w){const S=(v+k)%e*2,E=s[S];E==null||E!=w&&s[S+1]==1?(s[S]=w,s[S+1]=1):E==w&&s[S+1]++}}}i+=m,u+=g.nodeSize}const h=(c+1)*e;let f=0;for(;i<h;)r[i++]==0&&f++;f&&(o||(o=[])).push({type:"missing",row:c,n:f}),u++}(e===0||n===0)&&(o||(o=[])).push({type:"zero_sized"});const a=new Ct(e,n,r,o);let l=!1;for(let c=0;!l&&c<s.length;c+=2)s[c]!=null&&s[c+1]<n&&(l=!0);return l&&fY(a,s,t),a}function hY(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let o=0;if(n)for(let s=0;s<r;s++){const a=t.child(s);for(let l=0;l<a.childCount;l++){const c=a.child(l);s+c.attrs.rowspan>r&&(o+=c.attrs.colspan)}}for(let s=0;s<i.childCount;s++){const a=i.child(s);o+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=o:e!=o&&(e=Math.max(e,o))}return e}function fY(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const o=t.map[i];if(r[o])continue;r[o]=!0;const s=n.nodeAt(o);if(!s)throw new RangeError(`No cell with offset ${o} found`);let a=null;const l=s.attrs;for(let c=0;c<l.colspan;c++){const u=(i+c)%t.width,d=e[u*2];d!=null&&(!l.colwidth||l.colwidth[c]!=d)&&((a||(a=pY(l)))[c]=d)}a&&t.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:a})}}function pY(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function yn(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}var Fi=new Je("selectingCells");function Sa(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function gY(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function Ar(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function tf(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=Sa(e.$head)||mY(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function mY(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function om(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function yY(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function m0(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function qA(t,e,n){const r=t.node(-1),i=Ct.get(r),o=t.start(-1),s=i.nextCell(t.pos-o,e,n);return s==null?null:t.node(0).resolve(o+s)}function ns(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function VA(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(e,0,0)}return r}function bY(t,e,n){const r=yn(e.type.schema).header_cell;for(let i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0}var pt=class hi extends Ie{constructor(e,n=e){const r=e.node(-1),i=Ct.get(r),o=e.start(-1),s=i.rectBetween(e.pos-o,n.pos-o),a=e.node(0),l=i.cellsInRect(s).filter(u=>u!=n.pos-o);l.unshift(n.pos-o);const c=l.map(u=>{const d=r.nodeAt(u);if(!d)throw RangeError(`No cell with offset ${u} found`);const h=o+u+1;return new Zw(a.resolve(h),a.resolve(h+d.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(om(r)&&om(i)&&m0(r,i)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?hi.rowSelection(r,i):o&&this.isColSelection()?hi.colSelection(r,i):new hi(r,i)}return _e.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=Ct.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},s=[];for(let l=i.top;l<i.bottom;l++){const c=[];for(let u=l*n.width+i.left,d=i.left;d<i.right;d++,u++){const h=n.map[u];if(o[h])continue;o[h]=!0;const f=n.findCell(h);let p=e.nodeAt(h);if(!p)throw RangeError(`No cell with offset ${h} found`);const g=i.left-f.left,m=f.right-i.right;if(g>0||m>0){let y=p.attrs;if(g>0&&(y=ns(y,0,g)),m>0&&(y=ns(y,y.colspan-m,m)),f.left<i.left){if(p=p.type.createAndFill(y),!p)throw RangeError(`Could not create cell with attrs ${JSON.stringify(y)}`)}else p=p.type.create(y,p.content)}if(f.top<i.top||f.bottom>i.bottom){const y={...p.attrs,rowspan:Math.min(f.bottom,i.bottom)-Math.max(f.top,i.top)};f.top<i.top?p=p.type.createAndFill(y):p=p.type.create(y,p.content)}c.push(p)}s.push(e.child(l).copy(V.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?e:s;return new re(V.from(a),1,1)}replace(e,n=re.empty){const r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){const{$from:a,$to:l}=i[s],c=e.mapping.slice(r);e.replace(c.map(a.pos),c.map(l.pos),s?re.empty:n)}const o=Ie.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,n){this.replace(e,new re(V.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Ct.get(n),i=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let s=0;s<o.length;s++)e(n.nodeAt(o[s]),i+o[s])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=Ct.get(r),o=e.start(-1),s=i.findCell(e.pos-o),a=i.findCell(n.pos-o),l=e.node(0);return s.top<=a.top?(s.top>0&&(e=l.resolve(o+i.map[s.left])),a.bottom<i.height&&(n=l.resolve(o+i.map[i.width*(i.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(o+i.map[a.left])),s.bottom<i.height&&(e=l.resolve(o+i.map[i.width*(i.height-1)+s.right-1]))),new hi(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Ct.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),o=n.colCount(this.$headCell.pos-r);if(Math.min(i,o)>0)return!1;const s=i+this.$anchorCell.nodeAfter.attrs.colspan,a=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(s,a)==n.width}eq(e){return e instanceof hi&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=Ct.get(r),o=e.start(-1),s=i.findCell(e.pos-o),a=i.findCell(n.pos-o),l=e.node(0);return s.left<=a.left?(s.left>0&&(e=l.resolve(o+i.map[s.top*i.width])),a.right<i.width&&(n=l.resolve(o+i.map[i.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(o+i.map[a.top*i.width])),s.right<i.width&&(e=l.resolve(o+i.map[i.width*(s.top+1)-1]))),new hi(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new hi(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new hi(e.resolve(n),e.resolve(r))}getBookmark(){return new xY(this.$anchorCell.pos,this.$headCell.pos)}};pt.prototype.visible=!1;Ie.jsonID("cell",pt);var xY=class GA{constructor(e,n){this.anchor=e,this.head=n}map(e){return new GA(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&m0(n,r)?new pt(n,r):Ie.near(r,1)}};function vY(t){if(!(t.selection instanceof pt))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(St.node(r,r+n.nodeSize,{class:"selectedCell"}))}),at.create(t.doc,e)}function wY({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,n++);for(let o=e.depth;o>=0&&!(e.before(o+1)>e.start(o));o--,r--);return n==r&&/row|table/.test(t.node(i).type.spec.tableRole)}function CY({$from:t,$to:e}){let n,r;for(let i=t.depth;i>0;i--){const o=t.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){n=o;break}}for(let i=e.depth;i>0;i--){const o=e.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){r=o;break}}return n!==r&&e.parentOffset===0}function kY(t,e,n){const r=(e||t).selection,i=(e||t).doc;let o,s;if(r instanceof xe&&(s=r.node.type.spec.tableRole)){if(s=="cell"||s=="header_cell")o=pt.create(i,r.from);else if(s=="row"){const a=i.resolve(r.from+1);o=pt.rowSelection(a,a)}else if(!n){const a=Ct.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];o=pt.create(i,l+1,c)}}else r instanceof _e&&wY(r)?o=_e.create(i,r.from):r instanceof _e&&CY(r)&&(o=_e.create(i,r.$from.start(),r.$from.end()));return o&&(e||(e=t.tr)).setSelection(o),e}var SY=new Je("fix-tables");function KA(t,e,n,r){const i=t.childCount,o=e.childCount;e:for(let s=0,a=0;s<o;s++){const l=e.child(s);for(let c=a,u=Math.min(i,s+3);c<u;c++)if(t.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<i&&t.child(a).sameMarkup(l)?KA(t.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function YA(t,e){let n;const r=(i,o)=>{i.type.spec.tableRole=="table"&&(n=_Y(t,i,o,n))};return e?e.doc!=t.doc&&KA(e.doc,t.doc,0,r):t.doc.descendants(r),n}function _Y(t,e,n,r){const i=Ct.get(e);if(!i.problems)return r;r||(r=t.tr);const o=[];for(let l=0;l<i.height;l++)o.push(0);for(let l=0;l<i.problems.length;l++){const c=i.problems[l];if(c.type=="collision"){const u=e.nodeAt(c.pos);if(!u)continue;const d=u.attrs;for(let h=0;h<d.rowspan;h++)o[c.row+h]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,ns(d,d.colspan-c.n,c.n))}else if(c.type=="missing")o[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const u=r.mapping.map(n);r.delete(u,u+e.nodeSize)}}let s,a;for(let l=0;l<o.length;l++)o[l]&&(s==null&&(s=l),a=l);for(let l=0,c=n+1;l<i.height;l++){const u=e.child(l),d=c+u.nodeSize,h=o[l];if(h>0){let f="cell";u.firstChild&&(f=u.firstChild.type.spec.tableRole);const p=[];for(let m=0;m<h;m++){const y=yn(t.schema)[f].createAndFill();y&&p.push(y)}const g=(l==0||s==l-1)&&a==l?c+1:d-1;r.insert(r.mapping.map(g),p)}c=d}return r.setMeta(SY,{fixTables:!0})}function ti(t){const e=t.selection,n=tf(t),r=n.node(-1),i=n.start(-1),o=Ct.get(r);return{...e instanceof pt?o.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):o.findCell(n.pos-i),tableStart:i,map:o,table:r}}function XA(t,{map:e,tableStart:n,table:r},i){let o=i>0?-1:0;bY(e,r,i+o)&&(o=i==0||i==e.width?null:0);for(let s=0;s<e.height;s++){const a=s*e.width+i;if(i>0&&i<e.width&&e.map[a-1]==e.map[a]){const l=e.map[a],c=r.nodeAt(l);t.setNodeMarkup(t.mapping.map(n+l),null,VA(c.attrs,i-e.colCount(l))),s+=c.attrs.rowspan-1}else{const l=o==null?yn(r.type.schema).cell:r.nodeAt(e.map[a+o]).type,c=e.positionAt(s,i,r);t.insert(t.mapping.map(n+c),l.createAndFill())}}return t}function ZA(t,e){if(!Ar(t))return!1;if(e){const n=ti(t);e(XA(t.tr,n,n.left))}return!0}function JA(t,e){if(!Ar(t))return!1;if(e){const n=ti(t);e(XA(t.tr,n,n.right))}return!0}function EY(t,{map:e,table:n,tableStart:r},i){const o=t.mapping.maps.length;for(let s=0;s<e.height;){const a=s*e.width+i,l=e.map[a],c=n.nodeAt(l),u=c.attrs;if(i>0&&e.map[a-1]==l||i<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(o).map(r+l),null,ns(u,i-e.colCount(l)));else{const d=t.mapping.slice(o).map(r+l);t.delete(d,d+c.nodeSize)}s+=u.rowspan}}function TY(t,e){if(!Ar(t))return!1;if(e){const n=ti(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;EY(r,n,i),i!=n.left;i--){const o=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!o)throw RangeError("No table found");n.table=o,n.map=Ct.get(o)}e(r)}return!0}function MY(t,e,n){var r;const i=yn(e.type.schema).header_cell;for(let o=0;o<t.width;o++)if(((r=e.nodeAt(t.map[o+n*t.width]))==null?void 0:r.type)!=i)return!1;return!0}function QA(t,{map:e,tableStart:n,table:r},i){var o;let s=n;for(let c=0;c<i;c++)s+=r.child(c).nodeSize;const a=[];let l=i>0?-1:0;MY(e,r,i+l)&&(l=i==0||i==e.height?null:0);for(let c=0,u=e.width*i;c<e.width;c++,u++)if(i>0&&i<e.height&&e.map[u]==e.map[u-e.width]){const d=e.map[u],h=r.nodeAt(d).attrs;t.setNodeMarkup(n+d,null,{...h,rowspan:h.rowspan+1}),c+=h.colspan-1}else{const d=l==null?yn(r.type.schema).cell:(o=r.nodeAt(e.map[u+l*e.width]))==null?void 0:o.type,h=d==null?void 0:d.createAndFill();h&&a.push(h)}return t.insert(s,yn(r.type.schema).row.create(null,a)),t}function eN(t,e){if(!Ar(t))return!1;if(e){const n=ti(t);e(QA(t.tr,n,n.top))}return!0}function tN(t,e){if(!Ar(t))return!1;if(e){const n=ti(t);e(QA(t.tr,n,n.bottom))}return!0}function AY(t,{map:e,table:n,tableStart:r},i){let o=0;for(let c=0;c<i;c++)o+=n.child(c).nodeSize;const s=o+n.child(i).nodeSize,a=t.mapping.maps.length;t.delete(o+r,s+r);const l=new Set;for(let c=0,u=i*e.width;c<e.width;c++,u++){const d=e.map[u];if(!l.has(d)){if(l.add(d),i>0&&d==e.map[u-e.width]){const h=n.nodeAt(d).attrs;t.setNodeMarkup(t.mapping.slice(a).map(d+r),null,{...h,rowspan:h.rowspan-1}),c+=h.colspan-1}else if(i<e.height&&d==e.map[u+e.width]){const h=n.nodeAt(d),f=h.attrs,p=h.type.create({...f,rowspan:h.attrs.rowspan-1},h.content),g=e.positionAt(i+1,c,n);t.insert(t.mapping.slice(a).map(r+g),p),c+=f.colspan-1}}}}function NY(t,e){if(!Ar(t))return!1;if(e){const n=ti(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;AY(r,n,i),i!=n.top;i--){const o=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!o)throw RangeError("No table found");n.table=o,n.map=Ct.get(n.table)}e(r)}return!0}function hv(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function OY({width:t,height:e,map:n},r){let i=r.top*t+r.left,o=i,s=(r.bottom-1)*t+r.left,a=i+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[o]==n[o-1]||r.right<t&&n[a]==n[a+1])return!0;o+=t,a+=t}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[i]==n[i-t]||r.bottom<e&&n[s]==n[s+t])return!0;i++,s++}return!1}function fv(t,e){const n=t.selection;if(!(n instanceof pt)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=ti(t),{map:i}=r;if(OY(i,r))return!1;if(e){const o=t.tr,s={};let a=V.empty,l,c;for(let u=r.top;u<r.bottom;u++)for(let d=r.left;d<r.right;d++){const h=i.map[u*i.width+d],f=r.table.nodeAt(h);if(!(s[h]||!f))if(s[h]=!0,l==null)l=h,c=f;else{hv(f)||(a=a.append(f.content));const p=o.mapping.map(h+r.tableStart);o.delete(p,p+f.nodeSize)}}if(l==null||c==null)return!0;if(o.setNodeMarkup(l+r.tableStart,null,{...VA(c.attrs,c.attrs.colspan,r.right-r.left-c.attrs.colspan),rowspan:r.bottom-r.top}),a.size){const u=l+1+c.content.size,d=hv(c)?l+1:u;o.replaceWith(d+r.tableStart,u+r.tableStart,a)}o.setSelection(new pt(o.doc.resolve(l+r.tableStart))),e(o)}return!0}function pv(t,e){const n=yn(t.schema);return LY(({node:r})=>n[r.type.spec.tableRole])(t,e)}function LY(t){return(e,n)=>{var r;const i=e.selection;let o,s;if(i instanceof pt){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;o=i.$anchorCell.nodeAfter,s=i.$anchorCell.pos}else{if(o=gY(i.$from),!o)return!1;s=(r=Sa(i.$from))==null?void 0:r.pos}if(o==null||s==null||o.attrs.colspan==1&&o.attrs.rowspan==1)return!1;if(n){let a=o.attrs;const l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const u=ti(e),d=e.tr;for(let f=0;f<u.right-u.left;f++)l.push(c?{...a,colwidth:c&&c[f]?[c[f]]:null}:a);let h;for(let f=u.top;f<u.bottom;f++){let p=u.map.positionAt(f,u.left,u.table);f==u.top&&(p+=o.nodeSize);for(let g=u.left,m=0;g<u.right;g++,m++)g==u.left&&f==u.top||d.insert(h=d.mapping.map(p+u.tableStart,1),t({node:o,row:f,col:g}).createAndFill(l[m]))}d.setNodeMarkup(s,t({node:o,row:u.top,col:u.left}),l[0]),i instanceof pt&&d.setSelection(new pt(d.doc.resolve(i.$anchorCell.pos),h?d.doc.resolve(h):void 0)),n(d)}return!0}}function RY(t,e){return function(n,r){if(!Ar(n))return!1;const i=tf(n);if(i.nodeAfter.attrs[t]===e)return!1;if(r){const o=n.tr;n.selection instanceof pt?n.selection.forEachCell((s,a)=>{s.attrs[t]!==e&&o.setNodeMarkup(a,null,{...s.attrs,[t]:e})}):o.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[t]:e}),r(o)}return!0}}function IY(t){return function(e,n){if(!Ar(e))return!1;if(n){const r=yn(e.schema),i=ti(e),o=e.tr,s=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),a=s.map(l=>i.table.nodeAt(l));for(let l=0;l<s.length;l++)a[l].type==r.header_cell&&o.setNodeMarkup(i.tableStart+s[l],r.cell,a[l].attrs);if(o.steps.length==0)for(let l=0;l<s.length;l++)o.setNodeMarkup(i.tableStart+s[l],r.header_cell,a[l].attrs);n(o)}return!0}}function gv(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const o=e.table.nodeAt(r[i]);if(o&&o.type!==n.header_cell)return!1}return!0}function Yl(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?IY(t):function(n,r){if(!Ar(n))return!1;if(r){const i=yn(n.schema),o=ti(n),s=n.tr,a=gv("row",o,i),l=gv("column",o,i),u=(t==="column"?a:t==="row"?l:!1)?1:0,d=t=="column"?{left:0,top:u,right:1,bottom:o.map.height}:t=="row"?{left:u,top:0,right:o.map.width,bottom:1}:o,h=t=="column"?l?i.cell:i.header_cell:t=="row"?a?i.cell:i.header_cell:i.cell;o.map.cellsInRect(d).forEach(f=>{const p=f+o.tableStart,g=s.doc.nodeAt(p);g&&s.setNodeMarkup(p,h,g.attrs)}),r(s)}return!0}}Yl("row",{useDeprecatedLogic:!0});Yl("column",{useDeprecatedLogic:!0});var DY=Yl("cell",{useDeprecatedLogic:!0});function BY(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,i=t.before();r>=0;r--){const o=t.node(-1).child(r),s=o.lastChild;if(s)return i-1-s.nodeSize;i-=o.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),i=t.after();r<n.childCount;r++){const o=n.child(r);if(o.childCount)return i+1;i+=o.nodeSize}}return null}function mv(t){return function(e,n){if(!Ar(e))return!1;const r=BY(tf(e),t);if(r==null)return!1;if(n){const i=e.doc.resolve(r);n(e.tr.setSelection(_e.between(i,yY(i))).scrollIntoView())}return!0}}function PY(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function nu(t,e){const n=t.selection;if(!(n instanceof pt))return!1;if(e){const r=t.tr,i=yn(t.schema).cell.createAndFill().content;n.forEachCell((o,s)=>{o.content.eq(i)||r.replace(r.mapping.map(s+1),r.mapping.map(s+o.nodeSize-1),new re(i,0,0))}),r.docChanged&&e(r)}return!0}function $Y(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const i=e.child(0),o=i.type.spec.tableRole,s=i.type.schema,a=[];if(o=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const u=l?0:Math.max(0,n-1),d=l<e.childCount-1?0:Math.max(0,r-1);(u||d)&&(c=sm(yn(s).row,new re(c,u,d)).content),a.push(c)}else if(o=="cell"||o=="header_cell")a.push(n||r?sm(yn(s).row,new re(e,n,r)).content:e);else return null;return FY(s,a)}function FY(t,e){const n=[];for(let i=0;i<e.length;i++){const o=e[i];for(let s=o.childCount-1;s>=0;s--){const{rowspan:a,colspan:l}=o.child(s).attrs;for(let c=i;c<i+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=e.length&&e.push(V.empty),n[i]<r){const o=yn(t).cell.createAndFill(),s=[];for(let a=n[i];a<r;a++)s.push(o);e[i]=e[i].append(V.from(s))}return{height:e.length,width:r,rows:e}}function sm(t,e){const n=t.createAndFill();return new wm(n).replace(0,n.content.size,e).doc}function zY({width:t,height:e,rows:n},r,i){if(t!=r){const o=[],s=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let u=o[a]||0,d=0;u<r;d++){let h=l.child(d%l.childCount);u+h.attrs.colspan>r&&(h=h.type.createChecked(ns(h.attrs,h.attrs.colspan,u+h.attrs.colspan-r),h.content)),c.push(h),u+=h.attrs.colspan;for(let f=1;f<h.attrs.rowspan;f++)o[a+f]=(o[a+f]||0)+h.attrs.colspan}s.push(V.from(c))}n=s,t=r}if(e!=i){const o=[];for(let s=0,a=0;s<i;s++,a++){const l=[],c=n[a%e];for(let u=0;u<c.childCount;u++){let d=c.child(u);s+d.attrs.rowspan>i&&(d=d.type.create({...d.attrs,rowspan:Math.max(1,i-d.attrs.rowspan)},d.content)),l.push(d)}o.push(V.from(l))}n=o,e=i}return{width:t,height:e,rows:n}}function HY(t,e,n,r,i,o,s){const a=t.doc.type.schema,l=yn(a);let c,u;if(i>e.width)for(let d=0,h=0;d<e.height;d++){const f=n.child(d);h+=f.nodeSize;const p=[];let g;f.lastChild==null||f.lastChild.type==l.cell?g=c||(c=l.cell.createAndFill()):g=u||(u=l.header_cell.createAndFill());for(let m=e.width;m<i;m++)p.push(g);t.insert(t.mapping.slice(s).map(h-1+r),p)}if(o>e.height){const d=[];for(let p=0,g=(e.height-1)*e.width;p<Math.max(e.width,i);p++){const m=p>=e.width?!1:n.nodeAt(e.map[g+p]).type==l.header_cell;d.push(m?u||(u=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const h=l.row.create(null,V.from(d)),f=[];for(let p=e.height;p<o;p++)f.push(h);t.insert(t.mapping.slice(s).map(r+n.nodeSize-2),f)}return!!(c||u)}function yv(t,e,n,r,i,o,s,a){if(s==0||s==e.height)return!1;let l=!1;for(let c=i;c<o;c++){const u=s*e.width+c,d=e.map[u];if(e.map[u-e.width]==d){l=!0;const h=n.nodeAt(d),{top:f,left:p}=e.findCell(d);t.setNodeMarkup(t.mapping.slice(a).map(d+r),null,{...h.attrs,rowspan:s-f}),t.insert(t.mapping.slice(a).map(e.positionAt(s,p,n)),h.type.createAndFill({...h.attrs,rowspan:f+h.attrs.rowspan-s})),c+=h.attrs.colspan-1}}return l}function bv(t,e,n,r,i,o,s,a){if(s==0||s==e.width)return!1;let l=!1;for(let c=i;c<o;c++){const u=c*e.width+s,d=e.map[u];if(e.map[u-1]==d){l=!0;const h=n.nodeAt(d),f=e.colCount(d),p=t.mapping.slice(a).map(d+r);t.setNodeMarkup(p,null,ns(h.attrs,s-f,h.attrs.colspan-(s-f))),t.insert(p+h.nodeSize,h.type.createAndFill(ns(h.attrs,0,s-f))),c+=h.attrs.rowspan-1}}return l}function xv(t,e,n,r,i){let o=n?t.doc.nodeAt(n-1):t.doc;if(!o)throw new Error("No table found");let s=Ct.get(o);const{top:a,left:l}=r,c=l+i.width,u=a+i.height,d=t.tr;let h=0;function f(){if(o=n?d.doc.nodeAt(n-1):d.doc,!o)throw new Error("No table found");s=Ct.get(o),h=d.mapping.maps.length}HY(d,s,o,n,c,u,h)&&f(),yv(d,s,o,n,l,c,a,h)&&f(),yv(d,s,o,n,l,c,u,h)&&f(),bv(d,s,o,n,a,u,l,h)&&f(),bv(d,s,o,n,a,u,c,h)&&f();for(let p=a;p<u;p++){const g=s.positionAt(p,l,o),m=s.positionAt(p,c,o);d.replace(d.mapping.slice(h).map(g+n),d.mapping.slice(h).map(m+n),new re(i.rows[p-a],0,0))}f(),d.setSelection(new pt(d.doc.resolve(n+s.positionAt(a,l,o)),d.doc.resolve(n+s.positionAt(u-1,c-1,o)))),e(d)}var WY=Pm({ArrowLeft:ru("horiz",-1),ArrowRight:ru("horiz",1),ArrowUp:ru("vert",-1),ArrowDown:ru("vert",1),"Shift-ArrowLeft":iu("horiz",-1),"Shift-ArrowRight":iu("horiz",1),"Shift-ArrowUp":iu("vert",-1),"Shift-ArrowDown":iu("vert",1),Backspace:nu,"Mod-Backspace":nu,Delete:nu,"Mod-Delete":nu});function Nu(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function ru(t,e){return(n,r,i)=>{if(!i)return!1;const o=n.selection;if(o instanceof pt)return Nu(n,r,Ie.near(o.$headCell,e));if(t!="horiz"&&!o.empty)return!1;const s=nN(i,t,e);if(s==null)return!1;if(t=="horiz")return Nu(n,r,Ie.near(n.doc.resolve(o.head+e),e));{const a=n.doc.resolve(s),l=qA(a,t,e);let c;return l?c=Ie.near(l,1):e<0?c=Ie.near(n.doc.resolve(a.before(-1)),-1):c=Ie.near(n.doc.resolve(a.after(-1)),1),Nu(n,r,c)}}}function iu(t,e){return(n,r,i)=>{if(!i)return!1;const o=n.selection;let s;if(o instanceof pt)s=o;else{const l=nN(i,t,e);if(l==null)return!1;s=new pt(n.doc.resolve(l))}const a=qA(s.$headCell,t,e);return a?Nu(n,r,new pt(s.$anchorCell,a)):!1}}function UY(t,e){const n=t.state.doc,r=Sa(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new pt(r))),!0):!1}function jY(t,e,n){if(!Ar(t.state))return!1;let r=$Y(n);const i=t.state.selection;if(i instanceof pt){r||(r={width:1,height:1,rows:[V.from(sm(yn(t.state.schema).cell,n))]});const o=i.$anchorCell.node(-1),s=i.$anchorCell.start(-1),a=Ct.get(o).rectBetween(i.$anchorCell.pos-s,i.$headCell.pos-s);return r=zY(r,a.right-a.left,a.bottom-a.top),xv(t.state,t.dispatch,s,a,r),!0}else if(r){const o=tf(t.state),s=o.start(-1);return xv(t.state,t.dispatch,s,Ct.get(o.node(-1)).findCell(o.pos-s),r),!0}else return!1}function qY(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=vv(t,e.target);let i;if(e.shiftKey&&t.state.selection instanceof pt)o(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=Sa(t.state.selection.$anchor))!=null&&((n=yp(t,e))==null?void 0:n.pos)!=i.pos)o(i,e),e.preventDefault();else if(!r)return;function o(l,c){let u=yp(t,c);const d=Fi.getState(t.state)==null;if(!u||!m0(l,u))if(d)u=l;else return;const h=new pt(l,u);if(d||!t.state.selection.eq(h)){const f=t.state.tr.setSelection(h);d&&f.setMeta(Fi,l.pos),t.dispatch(f)}}function s(){t.root.removeEventListener("mouseup",s),t.root.removeEventListener("dragstart",s),t.root.removeEventListener("mousemove",a),Fi.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Fi,-1))}function a(l){const c=l,u=Fi.getState(t.state);let d;if(u!=null)d=t.state.doc.resolve(u);else if(vv(t,c.target)!=r&&(d=yp(t,e),!d))return s();d&&o(d,c)}t.root.addEventListener("mouseup",s),t.root.addEventListener("dragstart",s),t.root.addEventListener("mousemove",a)}function nN(t,e,n){if(!(t.state.selection instanceof _e))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const o=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const a=r.before(i),l=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(l)?a:null}}return null}function vv(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function yp(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?Sa(t.state.doc.resolve(n.pos)):null}var VY=class{constructor(e,n){this.node=e,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),am(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,am(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function am(t,e,n,r,i,o){var s;let a=0,l=!0,c=e.firstChild;const u=t.firstChild;if(u){for(let d=0,h=0;d<u.childCount;d++){const{colspan:f,colwidth:p}=u.child(d).attrs;for(let g=0;g<f;g++,h++){const m=i==h?o:p&&p[g],y=m?m+"px":"";if(a+=m||r,m||(l=!1),c)c.style.width!=y&&(c.style.width=y),c=c.nextSibling;else{const b=document.createElement("col");b.style.width=y,e.appendChild(b)}}}for(;c;){const d=c.nextSibling;(s=c.parentNode)==null||s.removeChild(c),c=d}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var Gn=new Je("tableColumnResizing");function GY({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=VY,lastColumnResizable:i=!0}={}){const o=new Ge({key:Gn,state:{init(s,a){var l,c;const u=(c=(l=o.spec)==null?void 0:l.props)==null?void 0:c.nodeViews,d=yn(a.schema).table.name;return r&&u&&(u[d]=(h,f)=>new r(h,n,f)),new KY(-1,!1)},apply(s,a){return a.apply(s)}},props:{attributes:s=>{const a=Gn.getState(s);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(s,a)=>{YY(s,a,t,i)},mouseleave:s=>{XY(s)},mousedown:(s,a)=>{ZY(s,a,e,n)}},decorations:s=>{const a=Gn.getState(s);if(a&&a.activeHandle>-1)return nX(s,a.activeHandle)},nodeViews:{}}});return o}var KY=class Ou{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(Gn);if(r&&r.setHandle!=null)return new Ou(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new Ou(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let i=e.mapping.map(n.activeHandle,-1);return om(e.doc.resolve(i))||(i=-1),new Ou(i,n.dragging)}return n}};function YY(t,e,n,r){if(!t.editable)return;const i=Gn.getState(t.state);if(i&&!i.dragging){const o=QY(e.target);let s=-1;if(o){const{left:a,right:l}=o.getBoundingClientRect();e.clientX-a<=n?s=wv(t,e,"left",n):l-e.clientX<=n&&(s=wv(t,e,"right",n))}if(s!=i.activeHandle){if(!r&&s!==-1){const a=t.state.doc.resolve(s),l=a.node(-1),c=Ct.get(l),u=a.start(-1);if(c.colCount(a.pos-u)+a.nodeAfter.attrs.colspan-1==c.width-1)return}rN(t,s)}}}function XY(t){if(!t.editable)return;const e=Gn.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&rN(t,-1)}function ZY(t,e,n,r){var i;if(!t.editable)return!1;const o=(i=t.dom.ownerDocument.defaultView)!=null?i:window,s=Gn.getState(t.state);if(!s||s.activeHandle==-1||s.dragging)return!1;const a=t.state.doc.nodeAt(s.activeHandle),l=JY(t,s.activeHandle,a.attrs);t.dispatch(t.state.tr.setMeta(Gn,{setDragging:{startX:e.clientX,startWidth:l}}));function c(d){o.removeEventListener("mouseup",c),o.removeEventListener("mousemove",u);const h=Gn.getState(t.state);h!=null&&h.dragging&&(eX(t,h.activeHandle,Cv(h.dragging,d,n)),t.dispatch(t.state.tr.setMeta(Gn,{setDragging:null})))}function u(d){if(!d.which)return c(d);const h=Gn.getState(t.state);if(h&&h.dragging){const f=Cv(h.dragging,d,n);kv(t,h.activeHandle,f,r)}}return kv(t,s.activeHandle,l,r),o.addEventListener("mouseup",c),o.addEventListener("mousemove",u),e.preventDefault(),!0}function JY(t,e,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const o=t.domAtPos(e);let a=o.node.childNodes[o.offset].offsetWidth,l=n;if(r)for(let c=0;c<n;c++)r[c]&&(a-=r[c],l--);return a/l}function QY(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function wv(t,e,n,r){const i=n=="right"?-r:r,o=t.posAtCoords({left:e.clientX+i,top:e.clientY});if(!o)return-1;const{pos:s}=o,a=Sa(t.state.doc.resolve(s));if(!a)return-1;if(n=="right")return a.pos;const l=Ct.get(a.node(-1)),c=a.start(-1),u=l.map.indexOf(a.pos-c);return u%l.width==0?-1:c+l.map[u-1]}function Cv(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function rN(t,e){t.dispatch(t.state.tr.setMeta(Gn,{setHandle:e}))}function eX(t,e,n){const r=t.state.doc.resolve(e),i=r.node(-1),o=Ct.get(i),s=r.start(-1),a=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let c=0;c<o.height;c++){const u=c*o.width+a;if(c&&o.map[u]==o.map[u-o.width])continue;const d=o.map[u],h=i.nodeAt(d).attrs,f=h.colspan==1?0:a-o.colCount(d);if(h.colwidth&&h.colwidth[f]==n)continue;const p=h.colwidth?h.colwidth.slice():tX(h.colspan);p[f]=n,l.setNodeMarkup(s+d,null,{...h,colwidth:p})}l.docChanged&&t.dispatch(l)}function kv(t,e,n,r){const i=t.state.doc.resolve(e),o=i.node(-1),s=i.start(-1),a=Ct.get(o).colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1;let l=t.domAtPos(i.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&am(o,l.firstChild,l,r,a,n)}function tX(t){return Array(t).fill(0)}function nX(t,e){var n;const r=[],i=t.doc.resolve(e),o=i.node(-1);if(!o)return at.empty;const s=Ct.get(o),a=i.start(-1),l=s.colCount(i.pos-a)+i.nodeAfter.attrs.colspan-1;for(let c=0;c<s.height;c++){const u=l+c*s.width;if((l==s.width-1||s.map[u]!=s.map[u+1])&&(c==0||s.map[u]!=s.map[u-s.width])){const d=s.map[u],h=a+d+o.nodeAt(d).nodeSize-1,f=document.createElement("div");f.className="column-resize-handle",(n=Gn.getState(t))!=null&&n.dragging&&r.push(St.node(a+d,a+d+o.nodeAt(d).nodeSize,{class:"column-resize-dragging"})),r.push(St.widget(h,f))}}return at.create(t.doc,r)}function rX({allowTableNodeSelection:t=!1}={}){return new Ge({key:Fi,state:{init(){return null},apply(e,n){const r=e.getMeta(Fi);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:i,pos:o}=e.mapping.mapResult(n);return i?null:o}},props:{decorations:vY,handleDOMEvents:{mousedown:qY},createSelectionBetween(e){return Fi.getState(e.state)!=null?e.state.selection:null},handleTripleClick:UY,handleKeyDown:WY,handlePaste:jY},appendTransaction(e,n,r){return kY(r,YA(r,n),t)}})}var iN=_t.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{var e,n;const r=t.getAttribute("colwidth"),i=r?r.split(",").map(o=>parseInt(o,10)):null;if(!i){const o=(e=t.closest("table"))==null?void 0:e.querySelectorAll("colgroup > col"),s=Array.from(((n=t.parentElement)==null?void 0:n.children)||[]).indexOf(t);if(s&&s>-1&&o&&o[s]){const a=o[s].getAttribute("width");return a?[parseInt(a,10)]:null}}return i}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",Qe(this.options.HTMLAttributes,t),0]}}),oN=_t.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",Qe(this.options.HTMLAttributes,t),0]}}),sN=_t.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",Qe(this.options.HTMLAttributes,t),0]}});function lm(t,e){return e?["width",`${Math.max(e,t)}px`]:["min-width",`${t}px`]}function Sv(t,e,n,r,i,o){var s;let a=0,l=!0,c=e.firstChild;const u=t.firstChild;if(u!==null)for(let h=0,f=0;h<u.childCount;h+=1){const{colspan:p,colwidth:g}=u.child(h).attrs;for(let m=0;m<p;m+=1,f+=1){const y=i===f?o:g&&g[m],b=y?`${y}px`:"";if(a+=y||r,y||(l=!1),c){if(c.style.width!==b){const[C,v]=lm(r,y);c.style.setProperty(C,v)}c=c.nextSibling}else{const C=document.createElement("col"),[v,k]=lm(r,y);C.style.setProperty(v,k),e.appendChild(C)}}}for(;c;){const h=c.nextSibling;(s=c.parentNode)==null||s.removeChild(c),c=h}const d=t.attrs.style&&typeof t.attrs.style=="string"&&/\bwidth\s*:/i.test(t.attrs.style);l&&!d?(n.style.width=`${a}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${a}px`)}var iX=class{constructor(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),t.attrs.style&&(this.table.style.cssText=t.attrs.style),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Sv(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!==this.node.type?!1:(this.node=t,Sv(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){const e=t.target,n=this.dom.contains(e),r=this.contentDOM.contains(e);return!!(n&&!r&&(t.type==="attributes"||t.type==="childList"||t.type==="characterData"))}};function oX(t,e,n,r){let i=0,o=!0;const s=[],a=t.firstChild;if(!a)return{};for(let d=0,h=0;d<a.childCount;d+=1){const{colspan:f,colwidth:p}=a.child(d).attrs;for(let g=0;g<f;g+=1,h+=1){const m=n===h?r:p&&p[g];i+=m||e,m||(o=!1);const[y,b]=lm(e,m);s.push(["col",{style:`${y}: ${b}`}])}}const l=o?`${i}px`:"",c=o?"":`${i}px`;return{colgroup:["colgroup",{},...s],tableWidth:l,tableMinWidth:c}}function _v(t,e){return t.createAndFill()}function sX(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function aX(t,e,n,r,i){const o=sX(t),s=[],a=[];for(let c=0;c<n;c+=1){const u=_v(o.cell);if(u&&a.push(u),r){const d=_v(o.header_cell);d&&s.push(d)}}const l=[];for(let c=0;c<e;c+=1)l.push(o.row.createChecked(null,r&&c===0?s:a));return o.table.createChecked(null,l)}function lX(t){return t instanceof pt}var ou=({editor:t})=>{const{selection:e}=t.state;if(!lX(e))return!1;let n=0;const r=tk(e.ranges[0].$from,o=>o.type.name==="table");return r==null||r.node.descendants(o=>{if(o.type.name==="table")return!1;["tableCell","tableHeader"].includes(o.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},cX="";function uX(t){return(t||"").replace(/\s+/g," ").trim()}function dX(t,e,n={}){var r;const i=(r=n.cellLineSeparator)!=null?r:cX;if(!t||!t.content||t.content.length===0)return"";const o=[];t.content.forEach(p=>{const g=[];p.content&&p.content.forEach(m=>{let y="";m.content&&Array.isArray(m.content)&&m.content.length>1?y=m.content.map(k=>e.renderChildren(k)).join(i):y=m.content?e.renderChildren(m.content):"";const b=uX(y),C=m.type==="tableHeader";g.push({text:b,isHeader:C})}),o.push(g)});const s=o.reduce((p,g)=>Math.max(p,g.length),0);if(s===0)return"";const a=new Array(s).fill(0);o.forEach(p=>{var g;for(let m=0;m<s;m+=1){const b=(((g=p[m])==null?void 0:g.text)||"").length;b>a[m]&&(a[m]=b),a[m]<3&&(a[m]=3)}});const l=(p,g)=>p+" ".repeat(Math.max(0,g-p.length)),c=o[0],u=c.some(p=>p.isHeader);let d=`
`;const h=new Array(s).fill(0).map((p,g)=>u&&c[g]&&c[g].text||"");return d+=`| ${h.map((p,g)=>l(p,a[g])).join(" | ")} |
`,d+=`| ${a.map(p=>"-".repeat(Math.max(3,p))).join(" | ")} |
`,(u?o.slice(1):o).forEach(p=>{d+=`| ${new Array(s).fill(0).map((g,m)=>l(p[m]&&p[m].text||"",a[m])).join(" | ")} |
`}),d}var hX=dX,aN=_t.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,renderWrapper:!1,handleWidth:5,cellMinWidth:25,View:iX,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){const{colgroup:n,tableWidth:r,tableMinWidth:i}=oX(t,this.options.cellMinWidth),o=e.style;function s(){return o||(r?`width: ${r}`:`min-width: ${i}`)}const a=["table",Qe(this.options.HTMLAttributes,e,{style:s()}),n,["tbody",0]];return this.options.renderWrapper?["div",{class:"tableWrapper"},a]:a},parseMarkdown:(t,e)=>{const n=[];if(t.header){const r=[];t.header.forEach(i=>{r.push(e.createNode("tableHeader",{},[{type:"paragraph",content:e.parseInline(i.tokens)}]))}),n.push(e.createNode("tableRow",{},r))}return t.rows&&t.rows.forEach(r=>{const i=[];r.forEach(o=>{i.push(e.createNode("tableCell",{},[{type:"paragraph",content:e.parseInline(o.tokens)}]))}),n.push(e.createNode("tableRow",{},i))}),e.createNode("table",void 0,n)},renderMarkdown:(t,e)=>hX(t,e),addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:o})=>{const s=aX(o.schema,t,e,n);if(i){const a=r.selection.from+1;r.replaceSelectionWith(s).scrollIntoView().setSelection(_e.near(r.doc.resolve(a)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>ZA(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>JA(t,e),deleteColumn:()=>({state:t,dispatch:e})=>TY(t,e),addRowBefore:()=>({state:t,dispatch:e})=>eN(t,e),addRowAfter:()=>({state:t,dispatch:e})=>tN(t,e),deleteRow:()=>({state:t,dispatch:e})=>NY(t,e),deleteTable:()=>({state:t,dispatch:e})=>PY(t,e),mergeCells:()=>({state:t,dispatch:e})=>fv(t,e),splitCell:()=>({state:t,dispatch:e})=>pv(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>Yl("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>Yl("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>DY(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>fv(t,e)?!0:pv(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>RY(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>mv(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>mv(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&YA(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const r=pt.create(e.doc,t.anchorCell,t.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:ou,"Mod-Backspace":ou,Delete:ou,"Mod-Delete":ou}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[GY({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],rX({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:et(Se(t,"tableRole",e))}}});Ye.create({name:"tableKit",addExtensions(){const t=[];return this.options.table!==!1&&t.push(aN.configure(this.options.table)),this.options.tableCell!==!1&&t.push(iN.configure(this.options.tableCell)),this.options.tableHeader!==!1&&t.push(oN.configure(this.options.tableHeader)),this.options.tableRow!==!1&&t.push(sN.configure(this.options.tableRow)),t}});const fX=new Je("table-add-controls"),su=8;function pX(){let t=null,e={type:"none",index:-1,tableElement:null};function n(){const u=document.createElement("div");return u.className="table-add-controls-container",u.innerHTML=`
      <div class="table-add-control table-add-row" style="display: none;">
        <div class="table-add-line"></div>
        <button class="table-add-button" data-action="add-row">
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
            <path d="M6 2v8M2 6h8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>
      <div class="table-add-control table-add-column" style="display: none;">
        <div class="table-add-line"></div>
        <button class="table-add-button" data-action="add-column">
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
            <path d="M6 2v8M2 6h8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>
    `,document.body.appendChild(u),u}function r(){if(!t)return;const u=t.querySelector(".table-add-row"),d=t.querySelector(".table-add-column");u&&(u.style.display="none"),d&&(d.style.display="none"),e={type:"none",index:-1,position:{x:0,y:0},tableElement:null}}function i(u,d,h){if(!t)return;const f=t.querySelector(".table-add-row"),p=t.querySelector(".table-add-column");p&&(p.style.display="none"),f&&(f.style.display="flex",f.style.left=`${u}px`,f.style.top=`${d}px`,f.style.width=`${h}px`)}function o(u,d,h){if(!t)return;const f=t.querySelector(".table-add-row"),p=t.querySelector(".table-add-column");f&&(f.style.display="none"),p&&(p.style.display="flex",p.style.left=`${u}px`,p.style.top=`${d}px`,p.style.height=`${h}px`)}function s(u,d){const f=u.target.closest("table");if(!f)return{type:"none",index:-1,position:{x:0,y:0},tableElement:null};const p=f.getBoundingClientRect(),g=u.clientX,m=u.clientY,y=f.querySelectorAll("tr");for(let C=0;C<y.length;C++){const k=y[C].getBoundingClientRect();if(Math.abs(m-k.bottom)<su)return{type:"row",index:C+1,position:{x:p.left,y:k.bottom},tableElement:f};if(C===0&&Math.abs(m-k.top)<su)return{type:"row",index:0,position:{x:p.left,y:k.top},tableElement:f}}const b=y[0];if(b){const C=b.querySelectorAll("td, th");for(let v=0;v<C.length;v++){const w=C[v].getBoundingClientRect();if(Math.abs(g-w.right)<su)return{type:"column",index:v+1,position:{x:w.right,y:p.top},tableElement:f};if(v===0&&Math.abs(g-w.left)<su)return{type:"column",index:0,position:{x:w.left,y:p.top},tableElement:f}}}return{type:"none",index:-1,position:{x:0,y:0},tableElement:null}}function a(u,d,h,f){const p=d.querySelectorAll("tr");if(h<0||h>=p.length)return!1;const m=p[h].querySelectorAll("td, th");if(f<0||f>=m.length)return!1;const y=m[f];try{const b=u.posAtDOM(y,0);if(b!==null&&b>=0){const{state:C,dispatch:v}=u,k=C.doc.resolve(Math.min(b,C.doc.content.size)),w=C.tr.setSelection(_e.near(k));return v(w),u.focus(),!0}}catch(b){console.error("selectCellAt error:",b)}return!1}function l(u,d,h){const p=d.querySelectorAll("tr").length;let g,m;h===0?(g=0,m=!0):h>=p?(g=p-1,m=!1):(g=h,m=!0),a(u,d,g,0)&&setTimeout(()=>{const{state:y,dispatch:b}=u;m?eN(y,b):tN(y,b)},0)}function c(u,d,h){const f=d.querySelector("tr");if(!f)return;const g=f.querySelectorAll("td, th").length;let m,y;h===0?(m=0,y=!0):h>=g?(m=g-1,y=!1):(m=h,y=!0),a(u,d,0,m)&&setTimeout(()=>{const{state:b,dispatch:C}=u;y?ZA(b,C):JA(b,C)},0)}return new Ge({key:fX,view(u){t=n();const d=p=>{const m=p.target.closest(".table-add-button");if(!m)return;p.preventDefault(),p.stopPropagation();const y=m.dataset.action;y==="add-row"&&e.type==="row"&&e.tableElement?l(u,e.tableElement,e.index):y==="add-column"&&e.type==="column"&&e.tableElement&&c(u,e.tableElement,e.index),r()};t.addEventListener("click",d);const h=p=>{const g=s(p);if(g.type==="none"){(t==null?void 0:t.contains(p.target))||r();return}if(e=g,g.tableElement){const m=g.tableElement.getBoundingClientRect();g.type==="row"?i(m.left+window.scrollX,g.position.y+window.scrollY,m.width):g.type==="column"&&o(g.position.x+window.scrollX,m.top+window.scrollY,m.height)}},f=p=>{setTimeout(()=>{t==null||t.contains(document.activeElement)},100)};return document.addEventListener("mousemove",h),u.dom.addEventListener("mouseleave",f),{destroy(){document.removeEventListener("mousemove",h),u.dom.removeEventListener("mouseleave",f),t&&(t.removeEventListener("click",d),t.remove(),t=null)}}}})}const gX=Ye.create({name:"tableAddControls",addProseMirrorPlugins(){return[pX()]}});function mX(){return[aN.configure({resizable:!0,handleWidth:5,cellMinWidth:50,lastColumnResizable:!0}),sN,oN,iN,gX]}var nf="Popover",[lN]=uw(nf,[lw]),gc=lw(),[yX,ho]=lN(nf),cN=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:s=!1}=t,a=gc(e),l=O.useRef(null),[c,u]=O.useState(!1),[d,h]=cw({prop:r,defaultProp:i??!1,onChange:o,caller:nf});return _.jsx(kO,{...a,children:_.jsx(yX,{scope:e,contentId:jr(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:O.useCallback(()=>h(f=>!f),[h]),hasCustomAnchor:c,onCustomAnchorAdd:O.useCallback(()=>u(!0),[]),onCustomAnchorRemove:O.useCallback(()=>u(!1),[]),modal:s,children:n})})};cN.displayName=nf;var uN="PopoverAnchor",bX=O.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=ho(uN,n),o=gc(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:a}=i;return O.useEffect(()=>(s(),()=>a()),[s,a]),_.jsx(dw,{...o,...r,ref:e})});bX.displayName=uN;var dN="PopoverTrigger",hN=O.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=ho(dN,n),o=gc(n),s=Jl(e,i.triggerRef),a=_.jsx(as.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":yN(i.open),...r,ref:s,onClick:qr(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:_.jsx(dw,{asChild:!0,...o,children:a})});hN.displayName=dN;var y0="PopoverPortal",[xX,vX]=lN(y0,{forceMount:void 0}),fN=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,o=ho(y0,e);return _.jsx(xX,{scope:e,forceMount:n,children:_.jsx(Ql,{present:n||o.open,children:_.jsx(hw,{asChild:!0,container:i,children:r})})})};fN.displayName=y0;var ha="PopoverContent",pN=O.forwardRef((t,e)=>{const n=vX(ha,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,o=ho(ha,t.__scopePopover);return _.jsx(Ql,{present:r||o.open,children:o.modal?_.jsx(CX,{...i,ref:e}):_.jsx(kX,{...i,ref:e})})});pN.displayName=ha;var wX=gw("PopoverContent.RemoveScroll"),CX=O.forwardRef((t,e)=>{const n=ho(ha,t.__scopePopover),r=O.useRef(null),i=Jl(e,r),o=O.useRef(!1);return O.useEffect(()=>{const s=r.current;if(s)return fw(s)},[]),_.jsx(pw,{as:wX,allowPinchZoom:!0,children:_.jsx(gN,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qr(t.onCloseAutoFocus,s=>{var a;s.preventDefault(),o.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:qr(t.onPointerDownOutside,s=>{const a=s.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;o.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:qr(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),kX=O.forwardRef((t,e)=>{const n=ho(ha,t.__scopePopover),r=O.useRef(!1),i=O.useRef(!1);return _.jsx(gN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var s,a;(s=t.onCloseAutoFocus)==null||s.call(t,o),o.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const s=o.target;((c=n.triggerRef.current)==null?void 0:c.contains(s))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),gN=O.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,h=ho(ha,n),f=gc(n);return mw(),_.jsx(yw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:_.jsx(bw,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:_.jsx(SO,{"data-state":yN(h.open),role:"dialog",id:h.contentId,...f,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),mN="PopoverClose",SX=O.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=ho(mN,n);return _.jsx(as.button,{type:"button",...r,ref:e,onClick:qr(t.onClick,()=>i.onOpenChange(!1))})});SX.displayName=mN;var _X="PopoverArrow",EX=O.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=gc(n);return _.jsx(_O,{...i,...r,ref:e})});EX.displayName=_X;function yN(t){return t?"open":"closed"}var TX=cN,MX=hN,AX=fN,NX=pN;function OX({...t}){return _.jsx(TX,{"data-slot":"popover",...t})}function LX({...t}){return _.jsx(MX,{"data-slot":"popover-trigger",...t})}function RX({className:t,align:e="center",sideOffset:n=4,...r}){return _.jsx(AX,{children:_.jsx(NX,{"data-slot":"popover-content",align:e,sideOffset:n,className:Ot("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...r})})}var Ev=1,IX=.9,DX=.8,BX=.17,bp=.1,xp=.999,PX=.9999,$X=.99,FX=/[\\\/_+.#"@\[\(\{&]/,zX=/[\\\/_+.#"@\[\(\{&]/g,HX=/[\s-]/,bN=/[\s-]/g;function cm(t,e,n,r,i,o,s){if(o===e.length)return i===t.length?Ev:$X;var a=`${i},${o}`;if(s[a]!==void 0)return s[a];for(var l=r.charAt(o),c=n.indexOf(l,i),u=0,d,h,f,p;c>=0;)d=cm(t,e,n,r,c+1,o+1,s),d>u&&(c===i?d*=Ev:FX.test(t.charAt(c-1))?(d*=DX,f=t.slice(i,c-1).match(zX),f&&i>0&&(d*=Math.pow(xp,f.length))):HX.test(t.charAt(c-1))?(d*=IX,p=t.slice(i,c-1).match(bN),p&&i>0&&(d*=Math.pow(xp,p.length))):(d*=BX,i>0&&(d*=Math.pow(xp,c-i))),t.charAt(c)!==e.charAt(o)&&(d*=PX)),(d<bp&&n.charAt(c-1)===r.charAt(o+1)||r.charAt(o+1)===r.charAt(o)&&n.charAt(c-1)!==r.charAt(o))&&(h=cm(t,e,n,r,c+1,o+2,s),h*bp>d&&(d=h*bp)),d>u&&(u=d),c=n.indexOf(l,c+1);return s[a]=u,u}function Tv(t){return t.toLowerCase().replace(bN," ")}function WX(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,cm(t,e,Tv(t),Tv(e),0,0,{})}var rf="Dialog",[xN]=uw(rf),[UX,Nr]=xN(rf),vN=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:s=!0}=t,a=O.useRef(null),l=O.useRef(null),[c,u]=cw({prop:r,defaultProp:i??!1,onChange:o,caller:rf});return _.jsx(UX,{scope:e,triggerRef:a,contentRef:l,contentId:jr(),titleId:jr(),descriptionId:jr(),open:c,onOpenChange:u,onOpenToggle:O.useCallback(()=>u(d=>!d),[u]),modal:s,children:n})};vN.displayName=rf;var wN="DialogTrigger",jX=O.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Nr(wN,n),o=Jl(e,i.triggerRef);return _.jsx(as.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":v0(i.open),...r,ref:o,onClick:qr(t.onClick,i.onOpenToggle)})});jX.displayName=wN;var b0="DialogPortal",[qX,CN]=xN(b0,{forceMount:void 0}),kN=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,o=Nr(b0,e);return _.jsx(qX,{scope:e,forceMount:n,children:O.Children.map(r,s=>_.jsx(Ql,{present:n||o.open,children:_.jsx(hw,{asChild:!0,container:i,children:s})}))})};kN.displayName=b0;var ah="DialogOverlay",SN=O.forwardRef((t,e)=>{const n=CN(ah,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,o=Nr(ah,t.__scopeDialog);return o.modal?_.jsx(Ql,{present:r||o.open,children:_.jsx(GX,{...i,ref:e})}):null});SN.displayName=ah;var VX=gw("DialogOverlay.RemoveScroll"),GX=O.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Nr(ah,n);return _.jsx(pw,{as:VX,allowPinchZoom:!0,shards:[i.contentRef],children:_.jsx(as.div,{"data-state":v0(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),rs="DialogContent",_N=O.forwardRef((t,e)=>{const n=CN(rs,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,o=Nr(rs,t.__scopeDialog);return _.jsx(Ql,{present:r||o.open,children:o.modal?_.jsx(KX,{...i,ref:e}):_.jsx(YX,{...i,ref:e})})});_N.displayName=rs;var KX=O.forwardRef((t,e)=>{const n=Nr(rs,t.__scopeDialog),r=O.useRef(null),i=Jl(e,n.contentRef,r);return O.useEffect(()=>{const o=r.current;if(o)return fw(o)},[]),_.jsx(EN,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qr(t.onCloseAutoFocus,o=>{var s;o.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:qr(t.onPointerDownOutside,o=>{const s=o.detail.originalEvent,a=s.button===0&&s.ctrlKey===!0;(s.button===2||a)&&o.preventDefault()}),onFocusOutside:qr(t.onFocusOutside,o=>o.preventDefault())})}),YX=O.forwardRef((t,e)=>{const n=Nr(rs,t.__scopeDialog),r=O.useRef(!1),i=O.useRef(!1);return _.jsx(EN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var s,a;(s=t.onCloseAutoFocus)==null||s.call(t,o),o.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const s=o.target;((c=n.triggerRef.current)==null?void 0:c.contains(s))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),EN=O.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...s}=t,a=Nr(rs,n),l=O.useRef(null),c=Jl(e,l);return mw(),_.jsxs(_.Fragment,{children:[_.jsx(yw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:_.jsx(bw,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":v0(a.open),...s,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),_.jsxs(_.Fragment,{children:[_.jsx(XX,{titleId:a.titleId}),_.jsx(JX,{contentRef:l,descriptionId:a.descriptionId})]})]})}),x0="DialogTitle",TN=O.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Nr(x0,n);return _.jsx(as.h2,{id:i.titleId,...r,ref:e})});TN.displayName=x0;var MN="DialogDescription",AN=O.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Nr(MN,n);return _.jsx(as.p,{id:i.descriptionId,...r,ref:e})});AN.displayName=MN;var NN="DialogClose",ON=O.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Nr(NN,n);return _.jsx(as.button,{type:"button",...r,ref:e,onClick:qr(t.onClick,()=>i.onOpenChange(!1))})});ON.displayName=NN;function v0(t){return t?"open":"closed"}var LN="DialogTitleWarning",[bte,RN]=EO(LN,{contentName:rs,titleName:x0,docsSlug:"dialog"}),XX=({titleId:t})=>{const e=RN(LN),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return O.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},ZX="DialogDescriptionWarning",JX=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${RN(ZX).contentName}}.`;return O.useEffect(()=>{var o;const i=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},QX=vN,IN=kN,w0=SN,C0=_N,DN=TN,BN=AN,eZ=ON,tZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],fo=tZ.reduce((t,e)=>{const n=TO(`Primitive.${e}`),r=O.forwardRef((i,o)=>{const{asChild:s,...a}=i,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(l,{...a,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),Wa='[cmdk-group=""]',vp='[cmdk-group-items=""]',nZ='[cmdk-group-heading=""]',PN='[cmdk-item=""]',Mv=`${PN}:not([aria-disabled="true"])`,um="cmdk-item-select",Rs="data-value",rZ=(t,e,n)=>WX(t,e,n),$N=O.createContext(void 0),mc=()=>O.useContext($N),FN=O.createContext(void 0),k0=()=>O.useContext(FN),zN=O.createContext(void 0),HN=O.forwardRef((t,e)=>{let n=Is(()=>{var H,Y;return{search:"",value:(Y=(H=t.value)!=null?H:t.defaultValue)!=null?Y:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Is(()=>new Set),i=Is(()=>new Map),o=Is(()=>new Map),s=Is(()=>new Set),a=WN(t),{label:l,children:c,value:u,onValueChange:d,filter:h,shouldFilter:f,loop:p,disablePointerSelection:g=!1,vimBindings:m=!0,...y}=t,b=jr(),C=jr(),v=jr(),k=O.useRef(null),w=pZ();is(()=>{if(u!==void 0){let H=u.trim();n.current.value=H,S.emit()}},[u]),is(()=>{w(6,B)},[]);let S=O.useMemo(()=>({subscribe:H=>(s.current.add(H),()=>s.current.delete(H)),snapshot:()=>n.current,setState:(H,Y,oe)=>{var K,ne,ue,ke;if(!Object.is(n.current[H],Y)){if(n.current[H]=Y,H==="search")P(),$(),w(1,T);else if(H==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Oe=document.getElementById(v);Oe?Oe.focus():(K=document.getElementById(b))==null||K.focus()}if(w(7,()=>{var Oe;n.current.selectedItemId=(Oe=A())==null?void 0:Oe.id,S.emit()}),oe||w(5,B),((ne=a.current)==null?void 0:ne.value)!==void 0){let Oe=Y??"";(ke=(ue=a.current).onValueChange)==null||ke.call(ue,Oe);return}}S.emit()}},emit:()=>{s.current.forEach(H=>H())}}),[]),E=O.useMemo(()=>({value:(H,Y,oe)=>{var K;Y!==((K=o.current.get(H))==null?void 0:K.value)&&(o.current.set(H,{value:Y,keywords:oe}),n.current.filtered.items.set(H,R(Y,oe)),w(2,()=>{$(),S.emit()}))},item:(H,Y)=>(r.current.add(H),Y&&(i.current.has(Y)?i.current.get(Y).add(H):i.current.set(Y,new Set([H]))),w(3,()=>{P(),$(),n.current.value||T(),S.emit()}),()=>{o.current.delete(H),r.current.delete(H),n.current.filtered.items.delete(H);let oe=A();w(4,()=>{P(),(oe==null?void 0:oe.getAttribute("id"))===H&&T(),S.emit()})}),group:H=>(i.current.has(H)||i.current.set(H,new Set),()=>{o.current.delete(H),i.current.delete(H)}),filter:()=>a.current.shouldFilter,label:l||t["aria-label"],getDisablePointerSelection:()=>a.current.disablePointerSelection,listId:b,inputId:v,labelId:C,listInnerRef:k}),[]);function R(H,Y){var oe,K;let ne=(K=(oe=a.current)==null?void 0:oe.filter)!=null?K:rZ;return H?ne(H,n.current.search,Y):0}function $(){if(!n.current.search||a.current.shouldFilter===!1)return;let H=n.current.filtered.items,Y=[];n.current.filtered.groups.forEach(K=>{let ne=i.current.get(K),ue=0;ne.forEach(ke=>{let Oe=H.get(ke);ue=Math.max(Oe,ue)}),Y.push([K,ue])});let oe=k.current;M().sort((K,ne)=>{var ue,ke;let Oe=K.getAttribute("id"),De=ne.getAttribute("id");return((ue=H.get(De))!=null?ue:0)-((ke=H.get(Oe))!=null?ke:0)}).forEach(K=>{let ne=K.closest(vp);ne?ne.appendChild(K.parentElement===ne?K:K.closest(`${vp} > *`)):oe.appendChild(K.parentElement===oe?K:K.closest(`${vp} > *`))}),Y.sort((K,ne)=>ne[1]-K[1]).forEach(K=>{var ne;let ue=(ne=k.current)==null?void 0:ne.querySelector(`${Wa}[${Rs}="${encodeURIComponent(K[0])}"]`);ue==null||ue.parentElement.appendChild(ue)})}function T(){let H=M().find(oe=>oe.getAttribute("aria-disabled")!=="true"),Y=H==null?void 0:H.getAttribute(Rs);S.setState("value",Y||void 0)}function P(){var H,Y,oe,K;if(!n.current.search||a.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let ne=0;for(let ue of r.current){let ke=(Y=(H=o.current.get(ue))==null?void 0:H.value)!=null?Y:"",Oe=(K=(oe=o.current.get(ue))==null?void 0:oe.keywords)!=null?K:[],De=R(ke,Oe);n.current.filtered.items.set(ue,De),De>0&&ne++}for(let[ue,ke]of i.current)for(let Oe of ke)if(n.current.filtered.items.get(Oe)>0){n.current.filtered.groups.add(ue);break}n.current.filtered.count=ne}function B(){var H,Y,oe;let K=A();K&&(((H=K.parentElement)==null?void 0:H.firstChild)===K&&((oe=(Y=K.closest(Wa))==null?void 0:Y.querySelector(nZ))==null||oe.scrollIntoView({block:"nearest"})),K.scrollIntoView({block:"nearest"}))}function A(){var H;return(H=k.current)==null?void 0:H.querySelector(`${PN}[aria-selected="true"]`)}function M(){var H;return Array.from(((H=k.current)==null?void 0:H.querySelectorAll(Mv))||[])}function L(H){let Y=M()[H];Y&&S.setState("value",Y.getAttribute(Rs))}function F(H){var Y;let oe=A(),K=M(),ne=K.findIndex(ke=>ke===oe),ue=K[ne+H];(Y=a.current)!=null&&Y.loop&&(ue=ne+H<0?K[K.length-1]:ne+H===K.length?K[0]:K[ne+H]),ue&&S.setState("value",ue.getAttribute(Rs))}function I(H){let Y=A(),oe=Y==null?void 0:Y.closest(Wa),K;for(;oe&&!K;)oe=H>0?hZ(oe,Wa):fZ(oe,Wa),K=oe==null?void 0:oe.querySelector(Mv);K?S.setState("value",K.getAttribute(Rs)):F(H)}let q=()=>L(M().length-1),Z=H=>{H.preventDefault(),H.metaKey?q():H.altKey?I(1):F(1)},Q=H=>{H.preventDefault(),H.metaKey?L(0):H.altKey?I(-1):F(-1)};return O.createElement(fo.div,{ref:e,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:H=>{var Y;(Y=y.onKeyDown)==null||Y.call(y,H);let oe=H.nativeEvent.isComposing||H.keyCode===229;if(!(H.defaultPrevented||oe))switch(H.key){case"n":case"j":{m&&H.ctrlKey&&Z(H);break}case"ArrowDown":{Z(H);break}case"p":case"k":{m&&H.ctrlKey&&Q(H);break}case"ArrowUp":{Q(H);break}case"Home":{H.preventDefault(),L(0);break}case"End":{H.preventDefault(),q();break}case"Enter":{H.preventDefault();let K=A();if(K){let ne=new Event(um);K.dispatchEvent(ne)}}}}},O.createElement("label",{"cmdk-label":"",htmlFor:E.inputId,id:E.labelId,style:mZ},l),of(t,H=>O.createElement(FN.Provider,{value:S},O.createElement($N.Provider,{value:E},H))))}),iZ=O.forwardRef((t,e)=>{var n,r;let i=jr(),o=O.useRef(null),s=O.useContext(zN),a=mc(),l=WN(t),c=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:s==null?void 0:s.forceMount;is(()=>{if(!c)return a.item(i,s==null?void 0:s.id)},[c]);let u=UN(i,o,[t.value,t.children,o],t.keywords),d=k0(),h=io(w=>w.value&&w.value===u.current),f=io(w=>c||a.filter()===!1?!0:w.search?w.filtered.items.get(i)>0:!0);O.useEffect(()=>{let w=o.current;if(!(!w||t.disabled))return w.addEventListener(um,p),()=>w.removeEventListener(um,p)},[f,t.onSelect,t.disabled]);function p(){var w,S;g(),(S=(w=l.current).onSelect)==null||S.call(w,u.current)}function g(){d.setState("value",u.current,!0)}if(!f)return null;let{disabled:m,value:y,onSelect:b,forceMount:C,keywords:v,...k}=t;return O.createElement(fo.div,{ref:Cl(o,e),...k,id:i,"cmdk-item":"",role:"option","aria-disabled":!!m,"aria-selected":!!h,"data-disabled":!!m,"data-selected":!!h,onPointerMove:m||a.getDisablePointerSelection()?void 0:g,onClick:m?void 0:p},t.children)}),oZ=O.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:i,...o}=t,s=jr(),a=O.useRef(null),l=O.useRef(null),c=jr(),u=mc(),d=io(f=>i||u.filter()===!1?!0:f.search?f.filtered.groups.has(s):!0);is(()=>u.group(s),[]),UN(s,a,[t.value,t.heading,l]);let h=O.useMemo(()=>({id:s,forceMount:i}),[i]);return O.createElement(fo.div,{ref:Cl(a,e),...o,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&O.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),of(t,f=>O.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},O.createElement(zN.Provider,{value:h},f))))}),sZ=O.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,i=O.useRef(null),o=io(s=>!s.search);return!n&&!o?null:O.createElement(fo.div,{ref:Cl(i,e),...r,"cmdk-separator":"",role:"separator"})}),aZ=O.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,i=t.value!=null,o=k0(),s=io(c=>c.search),a=io(c=>c.selectedItemId),l=mc();return O.useEffect(()=>{t.value!=null&&o.setState("search",t.value)},[t.value]),O.createElement(fo.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":a,id:l.inputId,type:"text",value:i?t.value:s,onChange:c=>{i||o.setState("search",c.target.value),n==null||n(c.target.value)}})}),lZ=O.forwardRef((t,e)=>{let{children:n,label:r="Suggestions",...i}=t,o=O.useRef(null),s=O.useRef(null),a=io(c=>c.selectedItemId),l=mc();return O.useEffect(()=>{if(s.current&&o.current){let c=s.current,u=o.current,d,h=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let f=c.offsetHeight;u.style.setProperty("--cmdk-list-height",f.toFixed(1)+"px")})});return h.observe(c),()=>{cancelAnimationFrame(d),h.unobserve(c)}}},[]),O.createElement(fo.div,{ref:Cl(o,e),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":a,"aria-label":r,id:l.listId},of(t,c=>O.createElement("div",{ref:Cl(s,l.listInnerRef),"cmdk-list-sizer":""},c)))}),cZ=O.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:o,container:s,...a}=t;return O.createElement(QX,{open:n,onOpenChange:r},O.createElement(IN,{container:s},O.createElement(w0,{"cmdk-overlay":"",className:i}),O.createElement(C0,{"aria-label":t.label,"cmdk-dialog":"",className:o},O.createElement(HN,{ref:e,...a}))))}),uZ=O.forwardRef((t,e)=>io(n=>n.filtered.count===0)?O.createElement(fo.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),dZ=O.forwardRef((t,e)=>{let{progress:n,children:r,label:i="Loading...",...o}=t;return O.createElement(fo.div,{ref:e,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},of(t,s=>O.createElement("div",{"aria-hidden":!0},s)))}),yc=Object.assign(HN,{List:lZ,Item:iZ,Input:aZ,Group:oZ,Separator:sZ,Dialog:cZ,Empty:uZ,Loading:dZ});function hZ(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function fZ(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function WN(t){let e=O.useRef(t);return is(()=>{e.current=t}),e}var is=typeof window>"u"?O.useEffect:O.useLayoutEffect;function Is(t){let e=O.useRef();return e.current===void 0&&(e.current=t()),e}function io(t){let e=k0(),n=()=>t(e.snapshot());return O.useSyncExternalStore(e.subscribe,n,n)}function UN(t,e,n,r=[]){let i=O.useRef(),o=mc();return is(()=>{var s;let a=(()=>{var c;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(c=u.current.textContent)==null?void 0:c.trim():i.current}})(),l=r.map(c=>c.trim());o.value(t,a,l),(s=e.current)==null||s.setAttribute(Rs,a),i.current=a}),i}var pZ=()=>{let[t,e]=O.useState(),n=Is(()=>new Map);return is(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,i)=>{n.current.set(r,i),e({})}};function gZ(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function of({asChild:t,children:e},n){return t&&O.isValidElement(e)?O.cloneElement(gZ(e),{ref:e.ref},n(e.props.children)):n(e)}var mZ={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const yZ=IN,jN=O.forwardRef(({className:t,...e},n)=>_.jsx(w0,{ref:n,"data-slot":"dialog-overlay",className:Ot("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e}));jN.displayName=w0.displayName;const bZ=O.forwardRef(({className:t,children:e,showCloseButton:n=!0,...r},i)=>_.jsxs(yZ,{"data-slot":"dialog-portal",children:[_.jsx(jN,{}),_.jsxs(C0,{ref:i,"data-slot":"dialog-content",className:Ot("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r,children:[e,n&&_.jsxs(eZ,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[_.jsx(LO,{}),_.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));bZ.displayName=C0.displayName;const xZ=O.forwardRef(({className:t,...e},n)=>_.jsx("div",{ref:n,"data-slot":"dialog-header",className:Ot("flex flex-col gap-2 text-center sm:text-left",t),...e}));xZ.displayName="DialogHeader";const vZ=O.forwardRef(({className:t,...e},n)=>_.jsx("div",{ref:n,"data-slot":"dialog-footer",className:Ot("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e}));vZ.displayName="DialogFooter";const wZ=O.forwardRef(({className:t,...e},n)=>_.jsx(DN,{ref:n,"data-slot":"dialog-title",className:Ot("text-lg leading-none font-semibold",t),...e}));wZ.displayName=DN.displayName;const CZ=O.forwardRef(({className:t,...e},n)=>_.jsx(BN,{ref:n,"data-slot":"dialog-description",className:Ot("text-muted-foreground text-sm",t),...e}));CZ.displayName=BN.displayName;function kZ({className:t,...e}){return _.jsx(yc,{"data-slot":"command",className:Ot("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...e})}function SZ({className:t,...e}){return _.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[_.jsx(NO,{className:"size-4 shrink-0 opacity-50"}),_.jsx(yc.Input,{"data-slot":"command-input",className:Ot("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...e})]})}function _Z({...t}){return _.jsx(yc.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function EZ({className:t,...e}){return _.jsx(yc.Group,{"data-slot":"command-group",className:Ot("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...e})}function TZ({className:t,...e}){return _.jsx(yc.Item,{"data-slot":"command-item",className:Ot("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}_S(SS);const Av=[{value:"javascript",label:"JavaScript"},{value:"typescript",label:"TypeScript"},{value:"python",label:"Python"},{value:"html",label:"HTML"},{value:"css",label:"CSS"},{value:"json",label:"JSON"},{value:"bash",label:"Bash"},{value:"sql",label:"SQL"},{value:"java",label:"Java"},{value:"cpp",label:"C++"},{value:"csharp",label:"C#"},{value:"go",label:"Go"},{value:"rust",label:"Rust"},{value:"php",label:"PHP"},{value:"ruby",label:"Ruby"},{value:"swift",label:"Swift"},{value:"kotlin",label:"Kotlin"},{value:"xml",label:"XML"},{value:"yaml",label:"YAML"},{value:"markdown",label:"Markdown"},{value:"plaintext",label:"Plain Text"}],MZ=({node:t,updateAttributes:e,extension:n})=>{var d;const{t:r}=ki(),[i,o]=O.useState(!1),[s,a]=O.useState(!1),{language:l}=t.attrs,c=()=>{const h=t.textContent;navigator.clipboard.writeText(h).then(()=>{a(!0),setTimeout(()=>a(!1),2e3)})},u=((d=Av.find(h=>h.value===l))==null?void 0:d.label)||"Plain Text";return _.jsxs(_h,{className:"code-block-wrapper relative group rounded-lg border bg-muted/40 my-4",children:[_.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b bg-muted/20 rounded-t-lg",children:[_.jsxs(OX,{open:i,onOpenChange:o,children:[_.jsx(LX,{asChild:!0,children:_.jsxs("button",{role:"combobox","aria-expanded":i,className:"text-xs text-muted-foreground hover:text-foreground hover:bg-muted px-2 py-1 rounded transition-colors flex items-center gap-1",children:[u,_.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:Ot("opacity-50 transition-transform",i&&"rotate-180"),children:_.jsx("path",{d:"m6 9 6 6 6-6"})})]})}),_.jsx(RX,{className:"w-[200px] p-0",align:"start",children:_.jsxs(kZ,{children:[_.jsx(SZ,{placeholder:r("codeSearchLanguage")}),_.jsx(_Z,{children:r("codeNoLanguageFound")}),_.jsx(EZ,{className:"max-h-[300px] overflow-auto",children:Av.map(h=>_.jsxs(TZ,{value:h.value,onSelect:f=>{e({language:f}),o(!1)},className:"flex items-center justify-between",children:[h.label,l===h.value&&_.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-auto opacity-100",children:_.jsx("polyline",{points:"20 6 9 17 4 12"})})]},h.value))})]})})]}),_.jsx("button",{onClick:c,className:"text-xs text-muted-foreground hover:text-foreground hover:bg-muted px-2 py-1 rounded transition-colors",title:r(s?"codeCopied":"codeCopy"),children:s?_.jsxs("span",{className:"flex items-center gap-1 text-green-500",children:[_.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:_.jsx("polyline",{points:"20 6 9 17 4 12"})}),r("codeCopied")]}):_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),_.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),r("codeCopy")]})})]}),_.jsx("pre",{className:"p-4 m-0 overflow-x-auto rounded-b-lg",children:_.jsx(Zm,{as:"code",className:`language-${l}`})})]})},AZ={"default-hidden":{initialOpacity:"0",initialPointerEvents:"auto",hiddenOpacity:"0",hiddenPointerEvents:"auto",visibleOpacity:"1",visiblePointerEvents:"auto"},"default-visible":{initialOpacity:"0.3",initialPointerEvents:"auto",hiddenOpacity:"0.3",hiddenPointerEvents:"auto",visibleOpacity:"1",visiblePointerEvents:"auto"}},qN=["paragraph","heading","callout","codeBlock","mermaid","blockquote","bulletList","orderedList","taskList","taskItem"],NZ=["doc > paragraph","doc > heading","doc > blockquote","doc > codeBlock","doc > mermaid","doc > horizontalRule","doc > image","doc > table","doc > callout","doc > bulletList","doc > orderedList","doc > callout > paragraph","doc > callout > heading","doc > callout > blockquote","doc > callout > codeBlock","doc > callout > mermaid","doc > callout > image","doc > callout > table","doc > callout > bulletList","doc > callout > orderedList","doc > callout > taskList","doc > columns > column > paragraph","doc > columns > column > heading","doc > columns > column > blockquote","doc > columns > column > codeBlock","doc > columns > column > mermaid","doc > columns > column > image","doc > columns > column > table","doc > columns > column > callout","doc > columns > column > bulletList","doc > columns > column > orderedList","doc > columns > column > callout > paragraph","doc > columns > column > callout > heading","doc > columns > column > callout > blockquote","doc > columns > column > callout > codeBlock","doc > columns > column > callout > mermaid","doc > columns > column > callout > image","doc > columns > column > callout > table","doc > columns > column > callout > bulletList","doc > columns > column > callout > orderedList","doc > columnsFlex > column > paragraph","doc > columnsFlex > column > heading","doc > columnsFlex > column > blockquote","doc > columnsFlex > column > codeBlock","doc > columnsFlex > column > mermaid","doc > columnsFlex > column > image","doc > columnsFlex > column > table","doc > columnsFlex > column > callout","doc > columnsFlex > column > bulletList","doc > columnsFlex > column > orderedList","doc > columnsFlex > column > callout > paragraph","doc > columnsFlex > column > callout > heading","doc > columnsFlex > column > callout > blockquote","doc > columnsFlex > column > callout > codeBlock","doc > columnsFlex > column > callout > mermaid","doc > columnsFlex > column > callout > image","doc > columnsFlex > column > callout > table","doc > columnsFlex > column > callout > bulletList","doc > columnsFlex > column > callout > orderedList","doc > section","doc > section > paragraph","doc > section > heading","doc > section > blockquote","doc > section > codeBlock","doc > section > mermaid","doc > section > image","doc > section > table","doc > section > callout","doc > section > bulletList","doc > section > orderedList","doc > section > callout > paragraph","doc > section > callout > heading","doc > section > callout > blockquote","doc > section > callout > codeBlock","doc > section > callout > mermaid","doc > section > callout > image","doc > section > callout > table","doc > section > callout > bulletList","doc > section > callout > orderedList","doc > section > columns > column > paragraph","doc > section > columns > column > heading","doc > section > columns > column > blockquote","doc > section > columns > column > codeBlock","doc > section > columns > column > mermaid","doc > section > columns > column > image","doc > section > columns > column > table","doc > section > columns > column > callout","doc > section > columns > column > bulletList","doc > section > columns > column > orderedList","doc > section > columns > column > callout > paragraph","doc > section > columns > column > callout > heading","doc > section > columns > column > callout > blockquote","doc > section > columns > column > callout > codeBlock","doc > section > columns > column > callout > mermaid","doc > section > columns > column > callout > image","doc > section > columns > column > callout > table","doc > section > columns > column > callout > bulletList","doc > section > columns > column > callout > orderedList","doc > section > columnsFlex > column > paragraph","doc > section > columnsFlex > column > heading","doc > section > columnsFlex > column > blockquote","doc > section > columnsFlex > column > codeBlock","doc > section > columnsFlex > column > mermaid","doc > section > columnsFlex > column > image","doc > section > columnsFlex > column > table","doc > section > columnsFlex > column > callout","doc > section > columnsFlex > column > bulletList","doc > section > columnsFlex > column > orderedList","doc > section > columnsFlex > column > callout > paragraph","doc > section > columnsFlex > column > callout > heading","doc > section > columnsFlex > column > callout > blockquote","doc > section > columnsFlex > column > callout > codeBlock","doc > section > columnsFlex > column > callout > mermaid","doc > section > columnsFlex > column > callout > image","doc > section > columnsFlex > column > callout > table","doc > section > columnsFlex > column > callout > bulletList","doc > section > columnsFlex > column > callout > orderedList","doc > columns > column > blockquote","doc > section > columns > column > blockquote","doc > section > section","doc > section > section > paragraph","doc > table","doc > section > table","doc > columns > column > table","doc > taskList","doc > section > taskList","doc > columns > column > taskList","doc > columnsFlex > column > taskList","doc > section > columns > column > taskList","doc > section > columnsFlex > column > taskList","doc > callout > taskList","doc > columns > column > callout > taskList","doc > columnsFlex > column > callout > taskList","doc > section > columns > column > callout > taskList","doc > section > columnsFlex > column > callout > taskList"],OZ=50,LZ=16;class S0{constructor(e,n){this.draggableTypes=new Set(e||qN),typeof n<"u"?this.pathWhitelist=new Set(n):e?this.pathWhitelist=new Set:this.pathWhitelist=new Set(NZ)}isDraggable(e,n,r){return this.pathWhitelist.size>0?r?this.pathWhitelist.has(r):!1:this.draggableTypes.has(e.type.name)}getNodeId(e,n){return e.attrs.id||`node-${n}`}getBoundarySelector(e){return RZ[e]||null}}const RZ={paragraph:{primary:"p"},heading:{primary:"h1, h2, h3, h4, h5, h6"},blockquote:{primary:"blockquote"},codeBlock:{primary:"pre",fallback:"code"},bulletList:{primary:"ul"},orderedList:{primary:"ol"},listItem:{primary:"li"},callout:{primary:'[data-type="callout"]',fallback:".callout-wrapper"},taskList:{primary:'ul[data-type="taskList"]',fallback:"ul"},taskItem:{primary:'li[data-type="taskItem"]',fallback:"li"},columns:{primary:".columns-container-grid",fallback:".columns-view-grid"},columnsFlex:{primary:".columns-container-grid",fallback:'[data-type="columnsFlex"]'},column:{primary:'[data-type="column"]'},mermaid:{primary:'[data-type="mermaid"]',fallback:".mermaid-container"},table:{primary:".tableWrapper",fallback:"table"}};class IZ{constructor(e=50,n,r){this.lastCallTime=0,this.columnCache=null,this.COLUMN_CACHE_TTL=50,this.throttleMs=e,this.nodeMatcher=new S0(n,r)}handleMouseMove(e,n){var l,c;const r=performance.now();if(r-this.lastCallTime<this.throttleMs)return null;this.lastCallTime=r;const i=n.target,o=this.detectFromDOM(e,i);if(o)return console.log("[HoverDetector] Phase1 DOM First :",{nodeType:(l=o.node)==null?void 0:l.type.name,pos:o.pos,nodeId:o.nodeId}),o;const s=this.getColumnContext(i,r);console.log("[HoverDetector] Phase2 Raycast :",{inColumn:!!s,targetTag:i.tagName,targetClass:i.className});const a=this.detectFromRaycast(e,n,s);return a?(console.log("[HoverDetector] Phase2 Raycast :",{nodeType:(c=a.node)==null?void 0:c.type.name,pos:a.pos,nodeId:a.nodeId}),a):(console.log("[HoverDetector] "),null)}getColumnContext(e,n){if(this.columnCache&&this.columnCache.target===e&&n-this.columnCache.timestamp<this.COLUMN_CACHE_TTL)return this.columnCache.element;const r=e.closest('[data-type="column"]');return this.columnCache={element:r,target:e,timestamp:n},r}detectFromDOM(e,n){try{const i=n.closest("[data-node-view-wrapper]")||n,o=e.posAtDOM(i,0);return o===null||o<0?null:this.resolveNodeAtPos(e,o)}catch{const i=n.closest("[data-type]");if(i)try{const o=e.posAtDOM(i,0);if(o!==null&&o>=0)return this.resolveNodeAtPos(e,o)}catch{}return null}}detectFromRaycast(e,n,r){let i;if(r){const a=r.getBoundingClientRect(),l=window.getComputedStyle(r),c=parseInt(l.paddingLeft)||0;i=a.left+c+10}else{const a=e.dom.getBoundingClientRect(),l=window.getComputedStyle(e.dom),c=parseInt(l.paddingLeft)||0;i=a.left+c+10}const o=e.posAtCoords({left:i,top:n.clientY});if(!o)return null;const s=e.nodeDOM(o.pos);if(s&&s.nodeType===1){const a=s.getBoundingClientRect();if(n.clientY<a.top-5||n.clientY>a.bottom+5)return null}return this.resolveNodeAtPos(e,o.pos)}resolveNodeAtPos(e,n){const r=e.state.doc.resolve(n);console.log("[HoverDetector] resolveNodeAtPos :",{pos:n,depth:r.depth});for(let i=r.depth;i>=0;i--){const o=r.node(i);if(!o||o.type.name==="text"||o.type.name==="doc")continue;const s=i>0?r.before(i):0,a=this.buildNodePath(e,s,o);if(console.log("[HoverDetector] :",{depth:i,nodeType:o.type.name,path:a,nodePos:s}),this.nodeMatcher.isDraggable(o,s,a)){const l=this.nodeMatcher.getNodeId(o,s);return console.log("[HoverDetector]  :",{path:a,nodeType:o.type.name}),{nodeId:l,pos:s,isDraggable:!0,node:o}}else console.log("[HoverDetector]  :",{path:a,nodeType:o.type.name})}return null}buildNodePath(e,n,r){const i=e.state.doc.resolve(Math.max(0,n)),o=["doc"];for(let a=1;a<=i.depth;a++){const l=i.node(a);l&&o.push(l.type.name)}return o[o.length-1]!==r.type.name&&o.push(r.type.name),o.join(" > ")}}const wp=42,Nv=26;class DZ{constructor(e=50){this.offset=e}calculateHandlePosition(e,n,r,i){const o=this.getRelativeRect(e,n,r);if(!o)return null;const s=this.getHandleRect(i),a=this.offset-wp;return{left:o.left-(s.width+a),top:o.top,width:s.width,height:s.height}}calculateHighlightPosition(e,n,r){const i=this.getRelativeRect(e,n,r);return i?{left:i.left,top:i.top,width:i.width,height:i.height}:null}getRelativeRect(e,n,r){const i=r||e.nodeDOM(n);if(!i)return null;const o=i.getBoundingClientRect(),s=e.dom.parentElement;if(!s)return null;const a=s.getBoundingClientRect();let l=0,c=0,u=i,d=0;for(;u&&u!==s&&d<10;)l+=u.scrollLeft||0,c+=u.scrollTop||0,u=u.parentElement,d++;l+=s.scrollLeft||0,c+=s.scrollTop||0;const h=i.closest('[data-type="column"]'),f=h?h.getBoundingClientRect():null,p=["UL","OL","BLOCKQUOTE"].includes(i.tagName);let g=0;if(f&&h){const b=window.getComputedStyle(h);g=parseFloat(b.paddingLeft)||0}else if(!p){const b=window.getComputedStyle(i);g=parseFloat(b.paddingLeft)||0}const m=f?f.left+g-a.left+l:o.left+g-a.left+l,y=f?f.width-g*2:o.width-g;return{left:m,top:o.top-a.top+c,width:y,height:o.height}}getHandleRect(e){if(!e)return{width:wp,height:Nv};const n=e.getBoundingClientRect();return{width:n.width||wp,height:n.height||Nv}}}const BZ=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path class="feishu-drag-icon" d="M8.25 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm0 7.25a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm1.75 5.5a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0ZM14.753 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5ZM16.5 12a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0Zm-1.747 9a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Z" fill="currentColor"></path>
  </svg>
`,VN=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M2 3a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V4h-7v16h3a1 1 0 1 1 0 2H8a1 1 0 1 1 0-2h3V4H4v3a1 1 0 1 1-2 0V3Z" fill="currentColor"></path>
  </svg>
`,Ov={h1:`
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2 3a1 1 0 0 0-1 1v16a1 1 0 1 0 2 0v-7h9v7a1 1 0 1 0 2 0V4a1 1 0 1 0-2 0v7H3V4a1 1 0 0 0-1-1Zm15.604 9.91a.4.4 0 0 1-.585-.355c0-.533 0-.774.004-1.582a.4.4 0 0 1 .203-.347l2.769-1.568A.39.39 0 0 1 20.197 9h1.404c.234 0 .423.21.423.468V19.95c0 .593-.483 1.073-1.075 1.073a1.07 1.07 0 0 1-1.07-1.073v-8.228l-2.275 1.19Z" fill="currentColor"></path>
    </svg>
  `,h2:`
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2 3a1 1 0 0 0-1 1v16a1 1 0 1 0 2 0v-7h9v7a1 1 0 1 0 2 0V4a1 1 0 1 0-2 0v7H3V4a1 1 0 0 0-1-1Zm20.993 16.872c0-.561-.455-1.015-1.017-1.015h-3.121l3.407-4.272a3.35 3.35 0 0 0 .731-2.126c-.01-.992-.347-1.816-1.005-2.464-.647-.651-1.492-.984-2.523-.995-.931.011-1.72.34-2.356.982-.37.386-.941 1.044-.941 1.602 0 .591.48 1.07 1.07 1.07.563 0 .769-.347.993-.726.06-.101.12-.204.19-.304a1.36 1.36 0 0 1 .186-.214c.262-.252.584-.376.982-.376.447.01.784.15 1.02.423.234.28.35.606.35.987 0 .146-.019.303-.057.471-.05.152-.156.341-.315.548l-4.402 5.506a.4.4 0 0 0-.087.25v1.022c0 .221.267.65.606.65h5.272c.562 0 1.017-.457 1.017-1.019Z" fill="currentColor"></path>
    </svg>
  `,h3:`
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2 3a1 1 0 0 0-1 1v16a1 1 0 1 0 2 0v-7h9v7a1 1 0 1 0 2 0V4a1 1 0 1 0-2 0v7H3V4a1 1 0 0 0-1-1Zm21 14.296c0-.51-.108-.998-.324-1.461a2.923 2.923 0 0 0-.877-1.044c.377-.297.65-.63.816-1.001.17-.44.252-.886.252-1.348a3.48 3.48 0 0 0-.943-2.385C21.274 9.363 20.398 9.01 19.31 9a3.179 3.179 0 0 0-2.251.932c-.349.336-.848.879-.848 1.384a1 1 0 0 0 1 1c.482 0 .767-.352 1.043-.692l.09-.11c.057-.07.121-.132.192-.185.256-.2.53-.296.834-.296.431.01.779.144 1.049.405.267.267.406.61.415 1.04 0 .417-.133.75-.4 1.008-.335.335-.766.387-1.212.387a.958.958 0 1 0 0 1.917h.088c.452-.002.824-.003 1.205.353.29.277.442.674.452 1.201-.01.51-.16.894-.451 1.162-.296.296-.65.44-1.076.44-.4 0-.712-.107-.944-.316l-.008-.008a8.055 8.055 0 0 1-.213-.207c-.1-.099-.178-.207-.254-.31-.193-.264-.366-.5-.81-.5a1 1 0 0 0-1 1c0 .574.543 1.19.954 1.533.635.53 1.35.84 2.174.84 1.057-.01 1.93-.35 2.609-1.018.69-.651 1.04-1.545 1.052-2.664Z" fill="currentColor"></path>
    </svg>
  `,h4:`
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2 3a1 1 0 0 0-1 1v16a1 1 0 1 0 2 0v-7h9v7a1 1 0 1 0 2 0V4a1 1 0 1 0-2 0v7H3V4a1 1 0 0 0-1-1Zm19.681 7.19c0-.658-.486-1.19-1.143-1.19-.402 0-.824.204-1.043.542l-4.428 6.821a.266.266 0 0 0-.043.145v1.62c0 .22.18.4.4.4h4.404v1.363c0 .512.43.927.941.927a.914.914 0 0 0 .912-.927v-1.363h.4a.954.954 0 0 0 .943-.956.934.934 0 0 0-.944-.932h-.399v-6.45Zm-4.53 6.45 2.677-4.177v4.177H17.15Z" fill="currentColor"></path>
    </svg>
  `,h5:`
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2 3a1 1 0 0 0-1 1v16a1 1 0 1 0 2 0v-7h9v7a1 1 0 1 0 2 0V4a1 1 0 1 0-2 0v7H3V4a1 1 0 0 0-1-1Zm17.758 9.728a2.98 2.98 0 0 0-1.252.258c-.264.108-.509.26-.735.457l.21-2.395h3.422c.566 0 1.024-.475 1.024-1.04A1.01 1.01 0 0 0 21.403 9h-4.666a.4.4 0 0 0-.398.366l-.5 5.867a.4.4 0 0 0 .398.434l1.228.002c.116 0 .22-.069.278-.17.16-.275.36-.479.61-.622.258-.154.582-.23.975-.23.57 0 .986.19 1.262.574.301.403.46.973.46 1.69 0 .648-.18 1.163-.526 1.547a1.698 1.698 0 0 1-1.29.558c-.468 0-.841-.123-1.105-.351-.176-.154-.34-.508-.444-.858l-.004.001a.973.973 0 1 0-1.829.653c.218.65.557 1.251.992 1.64.657.595 1.458.899 2.377.899 1.004 0 1.874-.355 2.61-1.064.796-.795 1.19-1.807 1.19-3.04 0-1.266-.303-2.29-.903-3.037-.601-.75-1.397-1.131-2.36-1.131Z" fill="currentColor"></path>
    </svg>
  `,h6:`
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2 3a1 1 0 0 0-1 1v16a1 1 0 1 0 2 0v-7h9v7a1 1 0 1 0 2 0V4a1 1 0 1 0-2 0v7H3V4a1 1 0 0 0-1-1Zm17.47 6.843c1.379 0 2.463.659 2.995 1.64l.001.003c.116.214.219.404.219.638 0 .506-.41.915-.915.915-.477 0-.69-.327-.909-.662a3.585 3.585 0 0 0-.212-.304c-.262-.33-.675-.527-1.18-.527-.586 0-1.055.348-1.402.977-.312.527-.483 1.181-.518 1.975.234-.28.509-.498.825-.657.39-.21.84-.309 1.364-.309.989 0 1.784.34 2.378 1.027.594.685.887 1.568.887 2.627 0 1.081-.344 1.986-1.027 2.691a3.391 3.391 0 0 1-2.52 1.064c-1.23 0-2.183-.487-2.834-1.448-.637-.925-.946-2.187-.946-3.812 0-1.732.332-3.125 1.008-4.195.675-1.09 1.612-1.643 2.785-1.643Zm-.068 5.426c-.55 0-.958.171-1.249.523-.298.335-.45.82-.45 1.452 0 .607.16 1.081.475 1.42.318.342.719.511 1.224.511.515 0 .915-.18 1.233-.55.32-.37.48-.847.48-1.44 0-.582-.155-1.048-.45-1.393-.315-.352-.727-.523-1.263-.523Z" fill="currentColor"></path>
    </svg>
  `},PZ=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M3 3h7v7H3V3Zm11 0h7v7h-7V3ZM3 14h7v7H3v-7Zm11 0h7v7h-7v-7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M6.5 10v4M17.5 10v4M10 6.5h4M10 17.5h4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
  </svg>
`,$Z=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M8 6L3 12l5 6M16 6l5 6-5 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
`,FZ=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M10 8H6a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-1a2 2 0 0 0-2-2H6v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1h2Zm10 0h-4a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-1a2 2 0 0 0-2-2h-2v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1h2Z" fill="currentColor"/>
  </svg>
`,zZ=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="4" cy="6" r="2" fill="currentColor"/>
    <circle cx="4" cy="12" r="2" fill="currentColor"/>
    <circle cx="4" cy="18" r="2" fill="currentColor"/>
    <path d="M9 6h12M9 12h12M9 18h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
  </svg>
`,HZ=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M4 5V4h1v3H4V5ZM9 6h12M9 12h12M9 18h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    <path d="M3 10h2l-1.5 2H5v1H3v-1l1.5-2H3v-1ZM3 16h2v.5H4v.5h1v.5H3v.5h2v1H3v-3Z" fill="currentColor"/>
  </svg>
`,Lv=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="3" y="4" width="4" height="4" rx="1" stroke="currentColor" stroke-width="2"/>
    <path d="M4.5 12.5l1 1 2-2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <rect x="3" y="16" width="4" height="4" rx="1" stroke="currentColor" stroke-width="2"/>
    <path d="M10 6h11M10 12h11M10 18h11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
  </svg>
`,WZ=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M9 21h6M12 3a6 6 0 0 0-4 10.5V17h8v-3.5A6 6 0 0 0 12 3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
`,UZ=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
    <circle cx="8.5" cy="8.5" r="1.5" fill="currentColor"/>
    <path d="M21 15l-5-5L5 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
`,jZ=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
    <path d="M3 9h18M3 15h18M9 3v18M15 3v18" stroke="currentColor" stroke-width="2"/>
  </svg>
`,qZ=`
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M3 12h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    <circle cx="6" cy="12" r="1" fill="currentColor"/>
    <circle cx="12" cy="12" r="1" fill="currentColor"/>
    <circle cx="18" cy="12" r="1" fill="currentColor"/>
  </svg>
`,VZ=VN,GZ={paragraph:VZ,codeBlock:$Z,blockquote:FZ,bulletList:zZ,orderedList:HZ,taskList:Lv,taskItem:Lv,callout:WZ,mermaid:PZ,image:UZ,table:jZ,horizontalRule:qZ};function KZ(t,e){if((t==="heading"||t==="numberedHeading")&&(e!=null&&e.level)){const r=e.level;return Ov[`h${r}`]||Ov.h1}const n=GZ[t];return n||VN}const YZ=["font-family","font-size","font-weight","font-style","line-height","letter-spacing","text-align","text-decoration","text-transform","text-indent","color","background","background-color","background-image","background-size","background-position","background-repeat","border","border-width","border-style","border-color","border-radius","outline","padding","padding-top","padding-right","padding-bottom","padding-left","margin","margin-top","margin-right","margin-bottom","margin-left","width","height","min-width","min-height","max-width","max-height","display","flex-direction","flex-wrap","justify-content","align-items","gap","flex","flex-grow","flex-shrink","flex-basis","grid-template-columns","grid-template-rows","grid-gap","list-style","list-style-type","list-style-position","list-style-image","opacity","box-shadow","transform","overflow","overflow-x","overflow-y","white-space","word-break","word-wrap","position","top","right","bottom","left","z-index","vertical-align","box-sizing"];class XZ{create(e,n={}){const r=this.cloneElement(e),i=e.getBoundingClientRect(),o=Math.max(i.width,e.offsetWidth,e.scrollWidth),s=Math.max(i.height,e.offsetHeight,e.scrollHeight);r.style.width=`${o}px`,r.style.height=s>0?`${s}px`:"auto",r.style.opacity=String(n.opacity??1),r.style.pointerEvents="none",r.style.margin="0",r.style.boxSizing="border-box",r.style.overflow="visible",r.style.display=window.getComputedStyle(e).display||"block";const a=document.createElement("div");return a.dataset.dragPreview="true",a.style.position="fixed",a.style.top="-10000px",a.style.left="-10000px",a.style.width=`${o}px`,a.style.height=`${s}px`,a.style.pointerEvents="none",a.style.zIndex="2147483647",a.style.boxSizing="border-box",a.style.overflow="visible",this.copyRootStyles(a),a.appendChild(r),document.body.appendChild(a),{element:a,cleanup:()=>{a.remove()}}}copyRootStyles(e){const n=window.getComputedStyle(document.documentElement),r=window.getComputedStyle(document.body);for(let o=0;o<n.length;o++){const s=n[o];if(s.startsWith("--")){const a=n.getPropertyValue(s);a&&e.style.setProperty(s,a)}}["font-family","font-size","line-height","color"].forEach(o=>{const s=r.getPropertyValue(o);s&&e.style.setProperty(o,s)})}cloneElement(e){const n=e.cloneNode(!0);return n.querySelectorAll("input, textarea, select").forEach(o=>{var l;const s=document.createElement("div"),a=o;s.className=a.className,s.textContent=a.textContent,(l=a.parentNode)==null||l.replaceChild(s,a)}),n.querySelectorAll("button").forEach(o=>{o.disabled=!0,o.style.pointerEvents="none"}),this.copyStyles(e,n),n}copyStyles(e,n){const r=window.getComputedStyle(e);YZ.forEach(s=>{const a=r.getPropertyValue(s);a&&n.style.setProperty(s,a)});for(let s=0;s<r.length;s++){const a=r[s];if(a.startsWith("--")){const l=r.getPropertyValue(a);l&&n.style.setProperty(a,l)}}e.className&&!n.className&&(n.className=e.className),Array.from(e.attributes).forEach(s=>{s.name.startsWith("data-")&&!n.hasAttribute(s.name)&&n.setAttribute(s.name,s.value)}),e instanceof SVGElement&&n instanceof SVGElement&&this.copySVGAttributes(e,n);const i=Array.from(e.children),o=Array.from(n.children);i.forEach((s,a)=>{const l=o[a];s instanceof HTMLElement&&l instanceof HTMLElement?this.copyStyles(s,l):s instanceof SVGElement&&l instanceof SVGElement&&this.copySVGAttributes(s,l)})}copySVGAttributes(e,n){["fill","stroke","stroke-width","viewBox","width","height","xmlns"].forEach(s=>{const a=e.getAttribute(s);a&&!n.hasAttribute(s)&&n.setAttribute(s,a)});const i=window.getComputedStyle(e);["fill","stroke","stroke-width","opacity","color"].forEach(s=>{const a=i.getPropertyValue(s);a&&n.style.setProperty(s,a)})}}class ZZ{constructor(e,n={}){this.currentPreview=null,this.dragState=null,this.boundHandlers=new Map,this.editorView=e,this.options=n,this.previewRenderer=new XZ,this.boundaryMatcher=new S0}setupDraggable(e,n,r){e.draggable=!0;const i=s=>{this.handleDragStart(s,n,r)},o=()=>{this.handleDragEnd()};e.addEventListener("dragstart",i),e.addEventListener("dragend",o),this.boundHandlers.set(e,{start:i,end:o})}destroy(){this.boundHandlers.forEach((e,n)=>{n.removeEventListener("dragstart",e.start),n.removeEventListener("dragend",e.end)}),this.boundHandlers.clear(),this.cleanupPreview()}isDragging(){return!!this.dragState}handleDragStart(e,n,r){var f,p,g,m,y;if(!e.dataTransfer)return;const i=this.editorView.state.doc,o=((p=(f=this.options).resolveNodePosition)==null?void 0:p.call(f,n,r))??r,s=i.nodeAt(o);if(!s){j.handleDisplay.warn("drag-behavior: node not found",{nodeId:n,fallbackPos:r});return}let a=o,l=o+s.nodeSize;if(Ko(s)&&((g=s.attrs)!=null&&g.collapsed)){const b=kd(s.attrs),C=dy(o,b,i);C&&(a=o,l=C.to)}if(a>=l){j.handleDisplay.error("[DragBehavior] Invalid range: from >= to",{from:a,to:l,nodePos:o,nodeSize:s.nodeSize});return}j.handleDisplay.debug("[DragBehavior] Starting drag",{from:a,to:l,nodeType:s.type.name});const c=i.slice(a,l);e.dataTransfer.clearData(),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("application/json","{}");const u=this.editorView.state.tr;try{u.setSelection(_e.create(i,a,l)),j.handleDisplay.debug("[DragBehavior] TextSelection created successfully")}catch(b){j.handleDisplay.warn("[DragBehavior] TextSelection failed, using NodeSelection",{error:b});try{u.setSelection(xe.create(i,a)),j.handleDisplay.debug("[DragBehavior] NodeSelection created successfully")}catch(C){j.handleDisplay.error("[DragBehavior] NodeSelection also failed",{error:C})}}this.editorView.dispatch(u),this.editorView.dragging={slice:c,move:!0,from:a,to:l},j.handleDisplay.debug("[DragBehavior] view.dragging set",{from:a,to:l});const d=this.findBoundaryElement(s,o);if(d)try{const b=d.getBoundingClientRect(),C=Math.max(0,e.clientX-b.left),v=Math.max(0,e.clientY-b.top);this.currentPreview=this.previewRenderer.create(d,{opacity:.95}),e.dataTransfer.setDragImage(this.currentPreview.element,Math.min(C,b.width),Math.min(v,b.height))}catch(b){j.handleDisplay.warn("drag-behavior: preview creation failed",b)}const h=e.target;h&&(h.style.opacity="0.5",h.style.cursor="grabbing",h.setAttribute("data-dragging","true")),this.dragState={nodeId:n,handleElement:h},(y=(m=this.options).onDragStart)==null||y.call(m)}handleDragEnd(){var e,n,r;if(j.handleDisplay.debug("[DragBehavior] Drag ended",{hadDragState:!!this.dragState,viewDragging:!!this.editorView.dragging}),(e=this.dragState)!=null&&e.handleElement){const i=this.dragState.handleElement;i.style.opacity="",i.style.cursor="grab",i.setAttribute("data-dragging","false")}this.dragState=null,this.cleanupPreview(),(r=(n=this.options).onDragEnd)==null||r.call(n)}cleanupPreview(){this.currentPreview&&(this.currentPreview.cleanup(),this.currentPreview=null)}findBoundaryElement(e,n){let r=this.editorView.nodeDOM(n);if(!r){const o=this.editorView.domAtPos(n);o.node.nodeType===Node.TEXT_NODE?r=o.node.parentElement:r=o.node}if(!r)return null;const i=this.boundaryMatcher.getBoundarySelector(e.type.name);if(i!=null&&i.primary){const o=r.closest(i.primary);if(o&&o!==this.editorView.dom)return o}if(i!=null&&i.fallback){const o=r.closest(i.fallback);if(o&&o!==this.editorView.dom)return o}return r}}class JZ{constructor(e){this.editorView=e}updateView(e){this.editorView=e}turnInto(e,n){const r=this.editorView.state;if(!r.doc.nodeAt(e))return!1;const o=r.tr,s=r.schema;switch(n){case"text":case"paragraph":o.setNodeMarkup(e,s.nodes.paragraph);break;case"heading1":o.setNodeMarkup(e,s.nodes.heading,{level:1});break;case"heading2":o.setNodeMarkup(e,s.nodes.heading,{level:2});break;case"heading3":o.setNodeMarkup(e,s.nodes.heading,{level:3});break;case"bulletList":return this.convertToList(e,"bulletList");case"numberedList":return this.convertToList(e,"orderedList");case"todoList":return this.convertToList(e,"taskList");case"code":o.setNodeMarkup(e,s.nodes.codeBlock);break;case"quote":return this.wrapInBlockquote(e);default:return!1}return this.editorView.dispatch(o),!0}handleEmptyNodeSelect(e,n){const r=this.editorView.state;if(!r.doc.nodeAt(e))return!1;const o=r.tr,s=r.schema;switch(n){case"heading1":o.setNodeMarkup(e,s.nodes.heading,{level:1});break;case"heading2":o.setNodeMarkup(e,s.nodes.heading,{level:2});break;case"heading3":o.setNodeMarkup(e,s.nodes.heading,{level:3});break;case"numberedList":return this.convertToList(e,"orderedList");case"bulletList":return this.convertToList(e,"bulletList");case"todoList":return this.convertToList(e,"taskList");case"code":o.setNodeMarkup(e,s.nodes.codeBlock);break;case"quote":return this.wrapInBlockquote(e);case"table":return this.insertTable(e);case"columns":return this.insertColumns(e);case"callout":return this.insertCallout(e);default:return!1}return this.editorView.dispatch(o),!0}convertToList(e,n){const r=this.editorView.state,i=r.doc.nodeAt(e);if(!i)return!1;const o=r.schema,s=o.nodes[n],a=n==="taskList"?o.nodes.taskItem:o.nodes.listItem;if(!s||!a)return!1;const l=a.create(n==="taskList"?{checked:!1}:null,o.nodes.paragraph.create(null,i.content)),c=s.create(null,l),u=r.tr.replaceWith(e,e+i.nodeSize,c);return this.editorView.dispatch(u),!0}wrapInBlockquote(e){const n=this.editorView.state,r=n.doc.nodeAt(e);if(!r)return!1;const o=n.schema.nodes.blockquote;if(!o)return!1;const s=o.create(null,r),a=n.tr.replaceWith(e,e+r.nodeSize,s);return this.editorView.dispatch(a),!0}insertTable(e){const n=this.editorView.state,r=n.schema;if(!r.nodes.table)return j.handleDisplay.warn("Table node type not found in schema"),!1;const i=r.nodes.paragraph.create(),o=Array(3).fill(null).map(()=>r.nodes.tableCell.create(null,i)),s=Array(3).fill(null).map(()=>r.nodes.tableRow.create(null,o)),a=r.nodes.table.create(null,s),l=n.tr.replaceWith(e,e+1,a);return this.editorView.dispatch(l),!0}insertColumns(e){const n=this.editorView.state,r=n.schema;if(!r.nodes.columns||!r.nodes.column)return j.handleDisplay.warn("Columns node type not found in schema"),!1;const i=r.nodes.paragraph.create(),o=r.nodes.columns.create(null,[r.nodes.column.create(null,i),r.nodes.column.create(null,i.copy())]),s=n.tr.replaceWith(e,e+1,o);return this.editorView.dispatch(s),!0}insertCallout(e){const n=this.editorView.state,r=n.schema;if(!r.nodes.callout)return j.handleDisplay.warn("Callout node type not found in schema"),!1;const i=r.nodes.paragraph.create(),o=r.nodes.callout.create(null,i),s=n.tr.replaceWith(e,e+1,o);return this.editorView.dispatch(s),!0}changeColor(e,n,r){const i=this.editorView.state,o=i.doc.nodeAt(e);if(!o)return!1;const s=i.tr.setNodeMarkup(e,void 0,{...o.attrs,[r?"backgroundColor":"textColor"]:n==="default"?null:n});return this.editorView.dispatch(s),!0}duplicate(e){const n=this.editorView.state,r=n.doc.nodeAt(e);if(!r)return!1;const i=e+r.nodeSize,o=n.tr.insert(i,r.copy(r.content));return this.editorView.dispatch(o),!0}deleteNode(e){const n=this.editorView.state,r=n.doc.nodeAt(e);if(!r)return!1;const i=n.tr.delete(e,e+r.nodeSize);return this.editorView.dispatch(i),!0}}class QZ{constructor(e,n,r){this.handles=e,this.highlights=n,this.handleStyleConfig=r,this.currentHoveredNodeId=null}createHighlightElement(e){const n=document.createElement("div");return n.className="drag-node-highlight feishu-hover-mask",n.setAttribute("data-node-id",e),n.style.opacity="0",n.style.pointerEvents="none",n.style.zIndex="1",n}showHandleByNodeId(e){if(this.currentHoveredNodeId===e){this.showHandle(e);return}this.currentHoveredNodeId&&this.hideHandleAndHighlight(this.currentHoveredNodeId),this.currentHoveredNodeId=e,this.showHandle(e)}showHandle(e){const n=this.handles.get(e);n&&(n.style.opacity=this.handleStyleConfig.visibleOpacity,n.style.pointerEvents=this.handleStyleConfig.visiblePointerEvents,n.setAttribute("data-visible","true"))}hideHandle(e){const n=this.handles.get(e);n&&(n.style.opacity=this.handleStyleConfig.hiddenOpacity,n.style.pointerEvents=this.handleStyleConfig.hiddenPointerEvents,n.setAttribute("data-visible","false"))}showHighlight(e){const n=this.highlights.get(e);n&&(n.style.opacity="1")}hideHighlight(e){const n=this.highlights.get(e);n&&(n.style.opacity="0")}hideHandleAndHighlight(e){this.hideHandle(e),this.hideHighlight(e)}hideAll(e){e==null||e(),this.handles.forEach((n,r)=>{this.hideHandleAndHighlight(r)}),this.currentHoveredNodeId=null}getCurrentNodeId(){return this.currentHoveredNodeId}resetCurrentNode(){this.currentHoveredNodeId=null}isPointerWithinHandleArea(e,n,r=6){if(!this.currentHoveredNodeId)return!1;const i=this.handles.get(this.currentHoveredNodeId);if(!i)return!1;const o=i.getBoundingClientRect();return e>=o.left-r&&e<=o.right+r&&n>=o.top-r&&n<=o.bottom+r}isPointerWithinActiveZone(e,n,r=6){if(!this.currentHoveredNodeId)return!1;const i=this.highlights.get(this.currentHoveredNodeId);if(i){const o=i.getBoundingClientRect();if(e>=o.left-r&&e<=o.right+r&&n>=o.top-r&&n<=o.bottom+r)return!0}return this.isPointerWithinHandleArea(e,n,r)}}class eJ{constructor(e,n,r){this.editorView=e,this.handles=n,this.highlights=r,this.foldPreviewTargets=new Set}updateView(e){this.editorView=e}toggleHeadingFold(e){this.clearFoldPreviewHighlights();const n=this.editorView.state,r=n.doc.nodeAt(e);if(!r||r.type.name!=="heading"&&r.type.name!=="numberedHeading")return;const i=n.tr;i.setNodeMarkup(e,void 0,{...r.attrs,collapsed:!r.attrs.collapsed}),i.setMeta("fold-changed",!0),this.editorView.dispatch(i)}previewFoldRange(e){const n=this.editorView.state.doc.nodeAt(e);if(!n||!Ko(n))return;const r=typeof n.attrs.level=="number"?n.attrs.level:parseInt(String(n.attrs.level??1),10)||1,i=dy(e,r,this.editorView.state.doc);if(!i){this.clearFoldPreviewHighlights();return}this.applyFoldPreview(i.from,i.to,r)}applyFoldPreview(e,n,r){this.clearFoldPreviewHighlights();const i=this.editorView.state.doc,o=[];this.handles.forEach((a,l)=>{const c=a.getAttribute("data-pos");if(!c)return;const u=Number(c);if(!Number.isNaN(u)&&u>=e&&u<n){const d=a.getAttribute("data-node-type"),h=Number(a.getAttribute("data-heading-level")||"0");if(d&&(d==="heading"||d==="numberedHeading")&&h>0&&h<=r)return;const f=i.nodeAt(u);if(!f)return;o.push({nodeId:l,startPos:u,endPos:u+f.nodeSize,nodeType:d,handleLevel:h})}}),o.filter((a,l)=>!o.some((c,u)=>u===l?!1:c.startPos<=a.startPos&&c.endPos>=a.endPos)).forEach(a=>{const l=this.highlights.get(a.nodeId);l&&(l.classList.add("fold-preview-active"),this.foldPreviewTargets.add(a.nodeId))})}clearFoldPreviewHighlights(){this.foldPreviewTargets.forEach(e=>{const n=this.highlights.get(e);n&&n.classList.remove("fold-preview-active")}),this.foldPreviewTargets.clear()}}const dm=({open:t=!1,position:e={x:0,y:0},onClose:n,onDuplicate:r,onDelete:i,onMouseEnter:o,onMouseLeave:s})=>{const{t:a}=ki(),l=or.useRef(null);return or.useEffect(()=>{if(!t)return;const c=d=>{var f;const h=d.target;(f=l.current)!=null&&f.contains(h)||n==null||n()},u=setTimeout(()=>{document.addEventListener("mousedown",c)},10);return()=>{clearTimeout(u),document.removeEventListener("mousedown",c)}},[t,n]),t?_.jsx("div",{ref:l,className:"handle-menu-dialog",style:{left:`${e.x}px`,top:`${e.y}px`},onMouseEnter:o,onMouseLeave:s,children:_.jsxs("div",{className:"handle-menu-content",children:[_.jsxs("div",{className:"handle-menu-item notion-menu-item",onClick:()=>{r==null||r(),n==null||n()},children:[_.jsx("div",{className:"handle-menu-item-icon notion-text-secondary",children:_.jsx(tJ,{})}),_.jsx("div",{className:"handle-menu-item-label notion-text-primary",children:a("handleMenuDuplicate")}),_.jsx("div",{className:"handle-menu-item-shortcut notion-text-quaternary",children:"D"})]}),_.jsxs("div",{className:"handle-menu-item notion-menu-item",onClick:()=>{i==null||i(),n==null||n()},children:[_.jsx("div",{className:"handle-menu-item-icon",style:{color:"#eb5757"},children:_.jsx(nJ,{})}),_.jsx("div",{className:"handle-menu-item-label notion-text-primary",children:a("handleMenuDelete")}),_.jsx("div",{className:"handle-menu-item-shortcut notion-text-quaternary",children:"Del"})]})]})}):null};function tJ(){return _.jsx("svg",{viewBox:"0 0 20 20",className:"w-5 h-5",children:_.jsx("path",{d:"M4.5 2.375A2.125 2.125 0 0 0 2.375 4.5V12c0 1.174.951 2.125 2.125 2.125h1.625v1.625c0 1.174.951 2.125 2.125 2.125h7.5a2.125 2.125 0 0 0 2.125-2.125v-7.5a2.125 2.125 0 0 0-2.125-2.125h-1.625V4.5A2.125 2.125 0 0 0 12 2.375zm8.375 3.75H8.25A2.125 2.125 0 0 0 6.125 8.25v4.625H4.5A.875.875 0 0 1 3.625 12V4.5c0-.483.392-.875.875-.875H12c.483 0 .875.392.875.875zm-5.5 2.125c0-.483.392-.875.875-.875h7.5c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-7.5a.875.875 0 0 1-.875-.875z",fill:"currentColor"})})}function nJ(){return _.jsxs("svg",{viewBox:"0 0 20 20",className:"w-5 h-5",children:[_.jsx("path",{d:"M8.806 8.505a.55.55 0 0 0-1.1 0v5.979a.55.55 0 1 0 1.1 0zm3.488 0a.55.55 0 0 0-1.1 0v5.979a.55.55 0 1 0 1.1 0z",fill:"currentColor"}),_.jsx("path",{d:"M6.386 3.925v1.464H3.523a.625.625 0 1 0 0 1.25h.897l.393 8.646A2.425 2.425 0 0 0 7.236 17.6h5.528a2.425 2.425 0 0 0 2.422-2.315l.393-8.646h.898a.625.625 0 1 0 0-1.25h-2.863V3.925c0-.842-.683-1.525-1.525-1.525H7.91c-.842 0-1.524.683-1.524 1.525M7.91 3.65h4.18c.15 0 .274.123.274.275v1.464H7.636V3.925c0-.152.123-.275.274-.275m-.9 2.99h7.318l-.39 8.588a1.175 1.175 0 0 1-1.174 1.122H7.236a1.175 1.175 0 0 1-1.174-1.122l-.39-8.589z",fill:"currentColor"})]})}dm.displayName="HandleMenu";const _0=({open:t=!1,position:e={x:0,y:0},onClose:n,onSelect:r,onMouseEnter:i,onMouseLeave:o})=>{const{t:s}=ki(),a=[{type:"heading1",title:"Heading 1",icon:rJ},{type:"heading2",title:"Heading 2",icon:iJ},{type:"heading3",title:"Heading 3",icon:oJ},{type:"numberedList",title:"Numbered list",icon:sJ},{type:"bulletList",title:"Bulleted list",icon:aJ},{type:"todoList",title:"To-do list",icon:lJ},{type:"code",title:"Code",icon:cJ},{type:"quote",title:"Quote",icon:uJ}],l=[{type:"table",label:s("emptyMenuTable"),icon:dJ},{type:"columns",label:s("emptyMenuColumns"),icon:hJ},{type:"callout",label:s("emptyMenuCallout"),icon:fJ}];return t?_.jsx(_.Fragment,{children:_.jsx("div",{className:"empty-node-menu-dialog notion-bg-dialog notion-shadow-dialog",onMouseEnter:i,onMouseLeave:o,children:_.jsxs("div",{className:"empty-node-menu-content",children:[_.jsx("div",{className:"empty-node-menu-section basic-section",children:_.jsx("div",{className:"basic-grid",children:a.map(c=>_.jsx("div",{className:"basic-grid-item",title:c.title,onClick:()=>{r==null||r(c.type),n==null||n()},children:_.jsx(c.icon,{})},c.type))})}),_.jsx("div",{className:"empty-node-menu-separator-wrapper",children:_.jsx("div",{className:"empty-node-menu-separator notion-separator"})}),_.jsx("div",{className:"empty-node-menu-section common-section",children:l.map(c=>_.jsxs("div",{className:"common-list-item notion-menu-item",onClick:()=>{r==null||r(c.type),n==null||n()},children:[_.jsx("div",{className:"common-list-item-icon notion-text-secondary",children:_.jsx(c.icon,{})}),_.jsx("div",{className:"common-list-item-label notion-text-primary",children:c.label})]},c.type))})]})})}):null};function rJ(){return _.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:_.jsx("path",{d:"M2 3a1 1 0 0 0-1 1v16a1 1 0 1 0 2 0v-7h9v7a1 1 0 1 0 2 0V4a1 1 0 1 0-2 0v7H3V4a1 1 0 0 0-1-1Zm15.604 9.91a.4.4 0 0 1-.585-.355c0-.533 0-.774.004-1.582a.4.4 0 0 1 .203-.347l2.769-1.568A.39.39 0 0 1 20.197 9h1.404c.234 0 .423.21.423.468V19.95c0 .593-.483 1.073-1.075 1.073a1.07 1.07 0 0 1-1.07-1.073v-8.228l-2.275 1.19Z",fill:"currentColor"})})}function iJ(){return _.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:_.jsx("path",{d:"M2 3a1 1 0 0 0-1 1v16a1 1 0 1 0 2 0v-7h9v7a1 1 0 1 0 2 0V4a1 1 0 1 0-2 0v7H3V4a1 1 0 0 0-1-1Zm20.993 16.872c0-.561-.455-1.015-1.017-1.015h-3.121l3.407-4.272a3.35 3.35 0 0 0 .731-2.126c-.01-.992-.347-1.816-1.005-2.464-.647-.651-1.492-.984-2.523-.995-.931.011-1.72.34-2.356.982-.37.386-.941 1.044-.941 1.602 0 .591.48 1.07 1.07 1.07.563 0 .769-.347.993-.726.06-.101.12-.204.19-.304a1.36 1.36 0 0 1 .186-.214c.262-.252.584-.376.982-.376.447.01.784.15 1.02.423.234.28.35.606.35.987 0 .146-.019.303-.057.471-.05.152-.156.341-.315.548l-4.402 5.506a.4.4 0 0 0-.087.25v1.022c0 .221.267.65.606.65h5.272c.562 0 1.017-.457 1.017-1.019Z",fill:"currentColor"})})}function oJ(){return _.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:_.jsx("path",{d:"M2 3a1 1 0 0 0-1 1v16a1 1 0 1 0 2 0v-7h9v7a1 1 0 1 0 2 0V4a1 1 0 1 0-2 0v7H3V4a1 1 0 0 0-1-1Zm21 14.296c0-.51-.108-.998-.324-1.461a2.923 2.923 0 0 0-.877-1.044c.377-.297.65-.63.816-1.001.17-.44.252-.886.252-1.348a3.48 3.48 0 0 0-.943-2.385C21.274 9.363 20.398 9.01 19.31 9a3.179 3.179 0 0 0-2.251.932c-.349.336-.848.879-.848 1.384a1 1 0 0 0 1 1c.482 0 .767-.352 1.043-.692l.09-.11c.057-.07.121-.132.192-.185.256-.2.53-.296.834-.296.431.01.779.144 1.049.405.267.267.406.61.415 1.04 0 .417-.133.75-.4 1.008-.335.335-.766.387-1.212.387a.958.958 0 1 0 0 1.917h.088c.452-.002.824-.003 1.205.353.29.277.442.674.452 1.201-.01.51-.16.894-.451 1.162-.296.296-.65.44-1.076.44-.4 0-.712-.107-.944-.316l-.008-.008a8.055 8.055 0 0 1-.213-.207c-.1-.099-.178-.207-.254-.31-.193-.264-.366-.5-.81-.5a1 1 0 0 0-1 1c0 .574.543 1.19.954 1.533.635.53 1.35.84 2.174.84 1.057-.01 1.93-.35 2.609-1.018.69-.651 1.04-1.545 1.052-2.664Z",fill:"currentColor"})})}function sJ(){return _.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:_.jsx("path",{d:"M4.577 1.809a.543.543 0 0 0-.819-.469l-.502.296-.004.003-.309.187c-.342.207-.858.519-1.142.701a.573.573 0 0 0-.261.485c0 .482.544.774.948.522.227-.141.465-.287.642-.395v3.478a.723.723 0 1 0 1.447 0V1.81Zm-.899 7.128c-1.233 0-2.056.817-2.056 1.84a.25.25 0 0 0 .25.251h.891a.259.259 0 0 0 .26-.259c0-.32.227-.589.608-.589a.62.62 0 0 1 .428.15.52.52 0 0 1 .16.396c0 .315-.188.579-.538.949l-1.815 1.968a.672.672 0 0 0 .494 1.127h3.003a.63.63 0 0 0 0-1.26H3.744l.933-1.047c.61-.652.99-1.127.99-1.834a1.57 1.57 0 0 0-.563-1.226c-.356-.3-.852-.466-1.426-.466Zm.015 7.429c-1.006 0-1.692.478-1.946 1.178a.541.541 0 0 0 .107.553c.122.137.307.22.503.22a.773.773 0 0 0 .478-.18c.125-.098.23-.222.312-.33.096-.124.257-.224.511-.224.21 0 .37.063.472.152a.46.46 0 0 1 .16.359v.002a.503.503 0 0 1-.165.391.71.71 0 0 1-.483.16h-.14a.606.606 0 1 0 0 1.213h.168c.275 0 .468.074.59.178a.538.538 0 0 1 .186.42.554.554 0 0 1-.185.435c-.122.107-.314.184-.583.184-.32 0-.528-.114-.644-.264a1.776 1.776 0 0 0-.308-.323.766.766 0 0 0-.47-.174.678.678 0 0 0-.504.22.549.549 0 0 0-.114.55c.244.717.926 1.22 2.012 1.22.602 0 1.161-.168 1.575-.478.416-.311.683-.768.676-1.323-.01-.69-.376-1.122-.793-1.332.34-.231.63-.644.621-1.224-.019-.962-.92-1.583-2.036-1.583ZM8 4a1 1 0 0 1 1-1h13a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1Zm0 8a1 1 0 0 1 1-1h13a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1Zm0 8a1 1 0 0 1 1-1h13a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1Z",fill:"currentColor"})})}function aJ(){return _.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:_.jsx("path",{d:"M3.5 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3ZM9 3a1 1 0 0 0 0 2h13a1 1 0 1 0 0-2H9Zm0 8a1 1 0 1 0 0 2h13a1 1 0 1 0 0-2H9Zm-1 9a1 1 0 0 1 1-1h13a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1Zm-3-8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm-1.5 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z",fill:"currentColor"})})}function lJ(){return _.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[_.jsx("path",{d:"M17.207 10.207a1 1 0 0 0-1.414-1.414L11 13.586l-2.293-2.293a1 1 0 0 0-1.414 1.414l3 3a1 1 0 0 0 1.414 0l5.5-5.5Z",fill:"currentColor"}),_.jsx("path",{d:"M2 4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4Zm2 0v16h16V4H4Z",fill:"currentColor"})]})}function cJ(){return _.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:_.jsx("path",{d:"M6.865 21C4.275 21 2 18.88 2 15.037c0-4.5 3.143-9.725 6.518-12.422a.888.888 0 0 1 1.203.107c.398.424.32 1.11-.112 1.5-2.412 2.17-5.32 6.855-5.153 9.055.215-.113 1.277-.516 2.801-.516 2.197 0 3.845 1.726 3.845 4.002A4.22 4.22 0 0 1 6.865 21Zm10.898 0c-2.59 0-4.865-2.119-4.865-5.963 0-4.5 3.143-9.725 6.518-12.422a.888.888 0 0 1 1.203.107c.398.424.32 1.11-.112 1.5-2.412 2.17-5.32 6.855-5.153 9.055.215-.113 1.277-.516 2.801-.516 2.197 0 3.845 1.726 3.845 4.002A4.22 4.22 0 0 1 17.763 21Z",fill:"currentColor"})})}function uJ(){return _.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:_.jsx("path",{d:"M4 2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H4Zm16 2v6H4V4h16ZM3 16a1 1 0 0 1 1-1h16a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1Zm1 4a1 1 0 1 0 0 2h8a1 1 0 1 0 0-2H4Z",fill:"currentColor"})})}function dJ(){return _.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[_.jsx("path",{d:"M19.5 4.25v15.5H4V4.25h15.5ZM4 2.25a2 2 0 0 0-2 2v15.5a2 2 0 0 0 2 2h15.5a2 2 0 0 0 2-2V4.25a2 2 0 0 0-2-2H4Z",fill:"currentColor"}),_.jsx("path",{d:"M9.997 4.25v3.835H19.5v2H9.997v3.83H19.5v2H9.997v3.835h-2v-3.835H4v-2h3.997v-3.83H4v-2h3.997V4.25h2Z",fill:"currentColor"})]})}function hJ(){return _.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:_.jsx("path",{d:"M11 5a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2V5ZM4 5h5v14H4V5Zm18 0a2 2 0 0 0-2-2h-5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2V5Zm-7 0h5v14h-5V5Z",fill:"currentColor"})})}function fJ(){return _.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:_.jsx("path",{d:"M4 2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H4Zm16 2v6H4V4h16ZM3 16a1 1 0 0 1 1-1h16a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1Zm1 4a1 1 0 1 0 0 2h8a1 1 0 1 0 0-2H4Z",fill:"currentColor"})})}_0.displayName="EmptyNodeMenu";var Pn="top",fr="bottom",pr="right",$n="left",E0="auto",bc=[Pn,fr,pr,$n],fa="start",Xl="end",pJ="clippingParents",GN="viewport",Ua="popper",gJ="reference",Rv=bc.reduce(function(t,e){return t.concat([e+"-"+fa,e+"-"+Xl])},[]),KN=[].concat(bc,[E0]).reduce(function(t,e){return t.concat([e,e+"-"+fa,e+"-"+Xl])},[]),mJ="beforeRead",yJ="read",bJ="afterRead",xJ="beforeMain",vJ="main",wJ="afterMain",CJ="beforeWrite",kJ="write",SJ="afterWrite",_J=[mJ,yJ,bJ,xJ,vJ,wJ,CJ,kJ,SJ];function Jr(t){return t?(t.nodeName||"").toLowerCase():null}function Zn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ss(t){var e=Zn(t).Element;return t instanceof e||t instanceof Element}function cr(t){var e=Zn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function T0(t){if(typeof ShadowRoot>"u")return!1;var e=Zn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function EJ(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!cr(o)||!Jr(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function TJ(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=s.reduce(function(l,c){return l[c]="",l},{});!cr(i)||!Jr(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}const YN={name:"applyStyles",enabled:!0,phase:"write",fn:EJ,effect:TJ,requires:["computeStyles"]};function Gr(t){return t.split("-")[0]}var Ho=Math.max,lh=Math.min,pa=Math.round;function hm(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function XN(){return!/^((?!chrome|android).)*safari/i.test(hm())}function ga(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&cr(t)&&(i=t.offsetWidth>0&&pa(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&pa(r.height)/t.offsetHeight||1);var s=ss(t)?Zn(t):window,a=s.visualViewport,l=!XN()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/o,d=r.width/i,h=r.height/o;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function M0(t){var e=ga(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function ZN(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&T0(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Ci(t){return Zn(t).getComputedStyle(t)}function MJ(t){return["table","td","th"].indexOf(Jr(t))>=0}function po(t){return((ss(t)?t.ownerDocument:t.document)||window.document).documentElement}function sf(t){return Jr(t)==="html"?t:t.assignedSlot||t.parentNode||(T0(t)?t.host:null)||po(t)}function Iv(t){return!cr(t)||Ci(t).position==="fixed"?null:t.offsetParent}function AJ(t){var e=/firefox/i.test(hm()),n=/Trident/i.test(hm());if(n&&cr(t)){var r=Ci(t);if(r.position==="fixed")return null}var i=sf(t);for(T0(i)&&(i=i.host);cr(i)&&["html","body"].indexOf(Jr(i))<0;){var o=Ci(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function xc(t){for(var e=Zn(t),n=Iv(t);n&&MJ(n)&&Ci(n).position==="static";)n=Iv(n);return n&&(Jr(n)==="html"||Jr(n)==="body"&&Ci(n).position==="static")?e:n||AJ(t)||e}function A0(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function xl(t,e,n){return Ho(t,lh(e,n))}function NJ(t,e,n){var r=xl(t,e,n);return r>n?n:r}function JN(){return{top:0,right:0,bottom:0,left:0}}function QN(t){return Object.assign({},JN(),t)}function eO(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var OJ=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,QN(typeof e!="number"?e:eO(e,bc))};function LJ(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=Gr(n.placement),l=A0(a),c=[$n,pr].indexOf(a)>=0,u=c?"height":"width";if(!(!o||!s)){var d=OJ(i.padding,n),h=M0(o),f=l==="y"?Pn:$n,p=l==="y"?fr:pr,g=n.rects.reference[u]+n.rects.reference[l]-s[l]-n.rects.popper[u],m=s[l]-n.rects.reference[l],y=xc(o),b=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,C=g/2-m/2,v=d[f],k=b-h[u]-d[p],w=b/2-h[u]/2+C,S=xl(v,w,k),E=l;n.modifiersData[r]=(e={},e[E]=S,e.centerOffset=S-w,e)}}function RJ(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||ZN(e.elements.popper,i)&&(e.elements.arrow=i))}const IJ={name:"arrow",enabled:!0,phase:"main",fn:LJ,effect:RJ,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ma(t){return t.split("-")[1]}var DJ={top:"auto",right:"auto",bottom:"auto",left:"auto"};function BJ(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:pa(n*i)/i||0,y:pa(r*i)/i||0}}function Dv(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=s.x,f=h===void 0?0:h,p=s.y,g=p===void 0?0:p,m=typeof u=="function"?u({x:f,y:g}):{x:f,y:g};f=m.x,g=m.y;var y=s.hasOwnProperty("x"),b=s.hasOwnProperty("y"),C=$n,v=Pn,k=window;if(c){var w=xc(n),S="clientHeight",E="clientWidth";if(w===Zn(n)&&(w=po(n),Ci(w).position!=="static"&&a==="absolute"&&(S="scrollHeight",E="scrollWidth")),w=w,i===Pn||(i===$n||i===pr)&&o===Xl){v=fr;var R=d&&w===k&&k.visualViewport?k.visualViewport.height:w[S];g-=R-r.height,g*=l?1:-1}if(i===$n||(i===Pn||i===fr)&&o===Xl){C=pr;var $=d&&w===k&&k.visualViewport?k.visualViewport.width:w[E];f-=$-r.width,f*=l?1:-1}}var T=Object.assign({position:a},c&&DJ),P=u===!0?BJ({x:f,y:g},Zn(n)):{x:f,y:g};if(f=P.x,g=P.y,l){var B;return Object.assign({},T,(B={},B[v]=b?"0":"",B[C]=y?"0":"",B.transform=(k.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",B))}return Object.assign({},T,(e={},e[v]=b?g+"px":"",e[C]=y?f+"px":"",e.transform="",e))}function PJ(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,s=o===void 0?!0:o,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Gr(e.placement),variation:ma(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Dv(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Dv(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const $J={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:PJ,data:{}};var au={passive:!0};function FJ(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,a=s===void 0?!0:s,l=Zn(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach(function(u){u.addEventListener("scroll",n.update,au)}),a&&l.addEventListener("resize",n.update,au),function(){o&&c.forEach(function(u){u.removeEventListener("scroll",n.update,au)}),a&&l.removeEventListener("resize",n.update,au)}}const zJ={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:FJ,data:{}};var HJ={left:"right",right:"left",bottom:"top",top:"bottom"};function Lu(t){return t.replace(/left|right|bottom|top/g,function(e){return HJ[e]})}var WJ={start:"end",end:"start"};function Bv(t){return t.replace(/start|end/g,function(e){return WJ[e]})}function N0(t){var e=Zn(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function O0(t){return ga(po(t)).left+N0(t).scrollLeft}function UJ(t,e){var n=Zn(t),r=po(t),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var c=XN();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+O0(t),y:l}}function jJ(t){var e,n=po(t),r=N0(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=Ho(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Ho(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+O0(t),l=-r.scrollTop;return Ci(i||n).direction==="rtl"&&(a+=Ho(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function L0(t){var e=Ci(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function tO(t){return["html","body","#document"].indexOf(Jr(t))>=0?t.ownerDocument.body:cr(t)&&L0(t)?t:tO(sf(t))}function vl(t,e){var n;e===void 0&&(e=[]);var r=tO(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=Zn(r),s=i?[o].concat(o.visualViewport||[],L0(r)?r:[]):r,a=e.concat(s);return i?a:a.concat(vl(sf(s)))}function fm(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function qJ(t,e){var n=ga(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Pv(t,e,n){return e===GN?fm(UJ(t,n)):ss(e)?qJ(e,n):fm(jJ(po(t)))}function VJ(t){var e=vl(sf(t)),n=["absolute","fixed"].indexOf(Ci(t).position)>=0,r=n&&cr(t)?xc(t):t;return ss(r)?e.filter(function(i){return ss(i)&&ZN(i,r)&&Jr(i)!=="body"}):[]}function GJ(t,e,n,r){var i=e==="clippingParents"?VJ(t):[].concat(e),o=[].concat(i,[n]),s=o[0],a=o.reduce(function(l,c){var u=Pv(t,c,r);return l.top=Ho(u.top,l.top),l.right=lh(u.right,l.right),l.bottom=lh(u.bottom,l.bottom),l.left=Ho(u.left,l.left),l},Pv(t,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function nO(t){var e=t.reference,n=t.element,r=t.placement,i=r?Gr(r):null,o=r?ma(r):null,s=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case Pn:l={x:s,y:e.y-n.height};break;case fr:l={x:s,y:e.y+e.height};break;case pr:l={x:e.x+e.width,y:a};break;case $n:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?A0(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(o){case fa:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Xl:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function Zl(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.strategy,s=o===void 0?t.strategy:o,a=n.boundary,l=a===void 0?pJ:a,c=n.rootBoundary,u=c===void 0?GN:c,d=n.elementContext,h=d===void 0?Ua:d,f=n.altBoundary,p=f===void 0?!1:f,g=n.padding,m=g===void 0?0:g,y=QN(typeof m!="number"?m:eO(m,bc)),b=h===Ua?gJ:Ua,C=t.rects.popper,v=t.elements[p?b:h],k=GJ(ss(v)?v:v.contextElement||po(t.elements.popper),l,u,s),w=ga(t.elements.reference),S=nO({reference:w,element:C,placement:i}),E=fm(Object.assign({},C,S)),R=h===Ua?E:w,$={top:k.top-R.top+y.top,bottom:R.bottom-k.bottom+y.bottom,left:k.left-R.left+y.left,right:R.right-k.right+y.right},T=t.modifiersData.offset;if(h===Ua&&T){var P=T[i];Object.keys($).forEach(function(B){var A=[pr,fr].indexOf(B)>=0?1:-1,M=[Pn,fr].indexOf(B)>=0?"y":"x";$[B]+=P[M]*A})}return $}function KJ(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?KN:l,u=ma(r),d=u?a?Rv:Rv.filter(function(p){return ma(p)===u}):bc,h=d.filter(function(p){return c.indexOf(p)>=0});h.length===0&&(h=d);var f=h.reduce(function(p,g){return p[g]=Zl(t,{placement:g,boundary:i,rootBoundary:o,padding:s})[Gr(g)],p},{});return Object.keys(f).sort(function(p,g){return f[p]-f[g]})}function YJ(t){if(Gr(t)===E0)return[];var e=Lu(t);return[Bv(t),e,Bv(e)]}function XJ(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=f===void 0?!0:f,g=n.allowedAutoPlacements,m=e.options.placement,y=Gr(m),b=y===m,C=l||(b||!p?[Lu(m)]:YJ(m)),v=[m].concat(C).reduce(function(oe,K){return oe.concat(Gr(K)===E0?KJ(e,{placement:K,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:g}):K)},[]),k=e.rects.reference,w=e.rects.popper,S=new Map,E=!0,R=v[0],$=0;$<v.length;$++){var T=v[$],P=Gr(T),B=ma(T)===fa,A=[Pn,fr].indexOf(P)>=0,M=A?"width":"height",L=Zl(e,{placement:T,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),F=A?B?pr:$n:B?fr:Pn;k[M]>w[M]&&(F=Lu(F));var I=Lu(F),q=[];if(o&&q.push(L[P]<=0),a&&q.push(L[F]<=0,L[I]<=0),q.every(function(oe){return oe})){R=T,E=!1;break}S.set(T,q)}if(E)for(var Z=p?3:1,Q=function(K){var ne=v.find(function(ue){var ke=S.get(ue);if(ke)return ke.slice(0,K).every(function(Oe){return Oe})});if(ne)return R=ne,"break"},H=Z;H>0;H--){var Y=Q(H);if(Y==="break")break}e.placement!==R&&(e.modifiersData[r]._skip=!0,e.placement=R,e.reset=!0)}}const ZJ={name:"flip",enabled:!0,phase:"main",fn:XJ,requiresIfExists:["offset"],data:{_skip:!1}};function $v(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Fv(t){return[Pn,pr,fr,$n].some(function(e){return t[e]>=0})}function JJ(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=Zl(e,{elementContext:"reference"}),a=Zl(e,{altBoundary:!0}),l=$v(s,r),c=$v(a,i,o),u=Fv(l),d=Fv(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const QJ={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:JJ};function eQ(t,e,n){var r=Gr(t),i=[$n,Pn].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[$n,pr].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function tQ(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,s=KN.reduce(function(u,d){return u[d]=eQ(d,e.rects,o),u},{}),a=s[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=s}const nQ={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:tQ};function rQ(t){var e=t.state,n=t.name;e.modifiersData[n]=nO({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const iQ={name:"popperOffsets",enabled:!0,phase:"read",fn:rQ,data:{}};function oQ(t){return t==="x"?"y":"x"}function sQ(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,f=h===void 0?!0:h,p=n.tetherOffset,g=p===void 0?0:p,m=Zl(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),y=Gr(e.placement),b=ma(e.placement),C=!b,v=A0(y),k=oQ(v),w=e.modifiersData.popperOffsets,S=e.rects.reference,E=e.rects.popper,R=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,$=typeof R=="number"?{mainAxis:R,altAxis:R}:Object.assign({mainAxis:0,altAxis:0},R),T=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,P={x:0,y:0};if(w){if(o){var B,A=v==="y"?Pn:$n,M=v==="y"?fr:pr,L=v==="y"?"height":"width",F=w[v],I=F+m[A],q=F-m[M],Z=f?-E[L]/2:0,Q=b===fa?S[L]:E[L],H=b===fa?-E[L]:-S[L],Y=e.elements.arrow,oe=f&&Y?M0(Y):{width:0,height:0},K=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:JN(),ne=K[A],ue=K[M],ke=xl(0,S[L],oe[L]),Oe=C?S[L]/2-Z-ke-ne-$.mainAxis:Q-ke-ne-$.mainAxis,De=C?-S[L]/2+Z+ke+ue+$.mainAxis:H+ke+ue+$.mainAxis,Xe=e.elements.arrow&&xc(e.elements.arrow),Et=Xe?v==="y"?Xe.clientTop||0:Xe.clientLeft||0:0,bt=(B=T==null?void 0:T[v])!=null?B:0,Vt=F+Oe-bt-Et,rn=F+De-bt,He=xl(f?lh(I,Vt):I,F,f?Ho(q,rn):q);w[v]=He,P[v]=He-F}if(a){var on,Dt=v==="x"?Pn:$n,Fn=v==="x"?fr:pr,Gt=w[k],zn=k==="y"?"height":"width",Or=Gt+m[Dt],Jn=Gt-m[Fn],Kt=[Pn,$n].indexOf(y)!==-1,Hn=(on=T==null?void 0:T[k])!=null?on:0,Ht=Kt?Or:Gt-S[zn]-E[zn]-Hn+$.altAxis,sn=Kt?Gt+S[zn]+E[zn]-Hn-$.altAxis:Jn,Lr=f&&Kt?NJ(Ht,Gt,sn):xl(f?Ht:Or,Gt,f?sn:Jn);w[k]=Lr,P[k]=Lr-Gt}e.modifiersData[r]=P}}const aQ={name:"preventOverflow",enabled:!0,phase:"main",fn:sQ,requiresIfExists:["offset"]};function lQ(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function cQ(t){return t===Zn(t)||!cr(t)?N0(t):lQ(t)}function uQ(t){var e=t.getBoundingClientRect(),n=pa(e.width)/t.offsetWidth||1,r=pa(e.height)/t.offsetHeight||1;return n!==1||r!==1}function dQ(t,e,n){n===void 0&&(n=!1);var r=cr(e),i=cr(e)&&uQ(e),o=po(e),s=ga(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Jr(e)!=="body"||L0(o))&&(a=cQ(e)),cr(e)?(l=ga(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=O0(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function hQ(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function fQ(t){var e=hQ(t);return _J.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function pQ(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function gQ(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var zv={placement:"bottom",modifiers:[],strategy:"absolute"};function Hv(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function mQ(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?zv:i;return function(a,l,c){c===void 0&&(c=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},zv,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,f={state:u,setOptions:function(y){var b=typeof y=="function"?y(u.options):y;g(),u.options=Object.assign({},o,u.options,b),u.scrollParents={reference:ss(a)?vl(a):a.contextElement?vl(a.contextElement):[],popper:vl(l)};var C=fQ(gQ([].concat(r,u.options.modifiers)));return u.orderedModifiers=C.filter(function(v){return v.enabled}),p(),f.update()},forceUpdate:function(){if(!h){var y=u.elements,b=y.reference,C=y.popper;if(Hv(b,C)){u.rects={reference:dQ(b,xc(C),u.options.strategy==="fixed"),popper:M0(C)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function($){return u.modifiersData[$.name]=Object.assign({},$.data)});for(var v=0;v<u.orderedModifiers.length;v++){if(u.reset===!0){u.reset=!1,v=-1;continue}var k=u.orderedModifiers[v],w=k.fn,S=k.options,E=S===void 0?{}:S,R=k.name;typeof w=="function"&&(u=w({state:u,options:E,name:R,instance:f})||u)}}}},update:pQ(function(){return new Promise(function(m){f.forceUpdate(),m(u)})}),destroy:function(){g(),h=!0}};if(!Hv(a,l))return f;f.setOptions(c).then(function(m){!h&&c.onFirstUpdate&&c.onFirstUpdate(m)});function p(){u.orderedModifiers.forEach(function(m){var y=m.name,b=m.options,C=b===void 0?{}:b,v=m.effect;if(typeof v=="function"){var k=v({state:u,name:y,instance:f,options:C}),w=function(){};d.push(k||w)}})}function g(){d.forEach(function(m){return m()}),d=[]}return f}}var yQ=[zJ,iQ,$J,YN,nQ,ZJ,aQ,IJ,QJ],bQ=mQ({defaultModifiers:yQ}),xQ="tippy-box",rO="tippy-content",vQ="tippy-backdrop",iO="tippy-arrow",oO="tippy-svg-arrow",So={passive:!0,capture:!0},sO=function(){return document.body};function Cp(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function R0(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function aO(t,e){return typeof t=="function"?t.apply(void 0,e):t}function Wv(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function wQ(t){return t.split(/\s+/).filter(Boolean)}function Ds(t){return[].concat(t)}function Uv(t,e){t.indexOf(e)===-1&&t.push(e)}function CQ(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function kQ(t){return t.split("-")[0]}function ch(t){return[].slice.call(t)}function jv(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function wl(){return document.createElement("div")}function af(t){return["Element","Fragment"].some(function(e){return R0(t,e)})}function SQ(t){return R0(t,"NodeList")}function _Q(t){return R0(t,"MouseEvent")}function EQ(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function TQ(t){return af(t)?[t]:SQ(t)?ch(t):Array.isArray(t)?t:ch(document.querySelectorAll(t))}function kp(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function qv(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function MQ(t){var e,n=Ds(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function AQ(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var o=i.popperRect,s=i.popperState,a=i.props,l=a.interactiveBorder,c=kQ(s.placement),u=s.modifiersData.offset;if(!u)return!0;var d=c==="bottom"?u.top.y:0,h=c==="top"?u.bottom.y:0,f=c==="right"?u.left.x:0,p=c==="left"?u.right.x:0,g=o.top-r+d>l,m=r-o.bottom-h>l,y=o.left-n+f>l,b=n-o.right-p>l;return g||m||y||b})}function Sp(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function Vv(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var Ur={isTouch:!1},Gv=0;function NQ(){Ur.isTouch||(Ur.isTouch=!0,window.performance&&document.addEventListener("mousemove",lO))}function lO(){var t=performance.now();t-Gv<20&&(Ur.isTouch=!1,document.removeEventListener("mousemove",lO)),Gv=t}function OQ(){var t=document.activeElement;if(EQ(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function LQ(){document.addEventListener("touchstart",NQ,So),window.addEventListener("blur",OQ)}var RQ=typeof window<"u"&&typeof document<"u",IQ=RQ?!!window.msCrypto:!1,DQ={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},BQ={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},_r=Object.assign({appendTo:sO,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},DQ,BQ),PQ=Object.keys(_r),$Q=function(e){var n=Object.keys(e);n.forEach(function(r){_r[r]=e[r]})};function cO(t){var e=t.plugins||[],n=e.reduce(function(r,i){var o=i.name,s=i.defaultValue;if(o){var a;r[o]=t[o]!==void 0?t[o]:(a=_r[o])!=null?a:s}return r},{});return Object.assign({},t,n)}function FQ(t,e){var n=e?Object.keys(cO(Object.assign({},_r,{plugins:e}))):PQ,r=n.reduce(function(i,o){var s=(t.getAttribute("data-tippy-"+o)||"").trim();if(!s)return i;if(o==="content")i[o]=s;else try{i[o]=JSON.parse(s)}catch{i[o]=s}return i},{});return r}function Kv(t,e){var n=Object.assign({},e,{content:aO(e.content,[t])},e.ignoreAttributes?{}:FQ(t,e.plugins));return n.aria=Object.assign({},_r.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var zQ=function(){return"innerHTML"};function pm(t,e){t[zQ()]=e}function Yv(t){var e=wl();return t===!0?e.className=iO:(e.className=oO,af(t)?e.appendChild(t):pm(e,t)),e}function Xv(t,e){af(e.content)?(pm(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?pm(t,e.content):t.textContent=e.content)}function gm(t){var e=t.firstElementChild,n=ch(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(rO)}),arrow:n.find(function(r){return r.classList.contains(iO)||r.classList.contains(oO)}),backdrop:n.find(function(r){return r.classList.contains(vQ)})}}function uO(t){var e=wl(),n=wl();n.className=xQ,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=wl();r.className=rO,r.setAttribute("data-state","hidden"),Xv(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(o,s){var a=gm(e),l=a.box,c=a.content,u=a.arrow;s.theme?l.setAttribute("data-theme",s.theme):l.removeAttribute("data-theme"),typeof s.animation=="string"?l.setAttribute("data-animation",s.animation):l.removeAttribute("data-animation"),s.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?l.setAttribute("role",s.role):l.removeAttribute("role"),(o.content!==s.content||o.allowHTML!==s.allowHTML)&&Xv(c,t.props),s.arrow?u?o.arrow!==s.arrow&&(l.removeChild(u),l.appendChild(Yv(s.arrow))):l.appendChild(Yv(s.arrow)):u&&l.removeChild(u)}return{popper:e,onUpdate:i}}uO.$$tippy=!0;var HQ=1,lu=[],_p=[];function WQ(t,e){var n=Kv(t,Object.assign({},_r,cO(jv(e)))),r,i,o,s=!1,a=!1,l=!1,c=!1,u,d,h,f=[],p=Wv(Vt,n.interactiveDebounce),g,m=HQ++,y=null,b=CQ(n.plugins),C={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},v={id:m,reference:t,popper:wl(),popperInstance:y,props:n,state:C,plugins:b,clearDelayTimeouts:Ht,setProps:sn,setContent:Lr,show:ps,hide:gs,hideWithInteractivity:go,enable:Kt,disable:Hn,unmount:ms,destroy:Ti};if(!n.render)return v;var k=n.render(v),w=k.popper,S=k.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+v.id,v.popper=w,t._tippy=v,w._tippy=v;var E=b.map(function(W){return W.fn(v)}),R=t.hasAttribute("aria-expanded");return Xe(),Z(),F(),I("onCreate",[v]),n.showOnCreate&&Or(),w.addEventListener("mouseenter",function(){v.props.interactive&&v.state.isVisible&&v.clearDelayTimeouts()}),w.addEventListener("mouseleave",function(){v.props.interactive&&v.props.trigger.indexOf("mouseenter")>=0&&A().addEventListener("mousemove",p)}),v;function $(){var W=v.props.touch;return Array.isArray(W)?W:[W,0]}function T(){return $()[0]==="hold"}function P(){var W;return!!((W=v.props.render)!=null&&W.$$tippy)}function B(){return g||t}function A(){var W=B().parentNode;return W?MQ(W):document}function M(){return gm(w)}function L(W){return v.state.isMounted&&!v.state.isVisible||Ur.isTouch||u&&u.type==="focus"?0:Cp(v.props.delay,W?0:1,_r.delay)}function F(W){W===void 0&&(W=!1),w.style.pointerEvents=v.props.interactive&&!W?"":"none",w.style.zIndex=""+v.props.zIndex}function I(W,ae,Ee){if(Ee===void 0&&(Ee=!0),E.forEach(function($e){$e[W]&&$e[W].apply($e,ae)}),Ee){var qe;(qe=v.props)[W].apply(qe,ae)}}function q(){var W=v.props.aria;if(W.content){var ae="aria-"+W.content,Ee=w.id,qe=Ds(v.props.triggerTarget||t);qe.forEach(function($e){var Tt=$e.getAttribute(ae);if(v.state.isVisible)$e.setAttribute(ae,Tt?Tt+" "+Ee:Ee);else{var Mt=Tt&&Tt.replace(Ee,"").trim();Mt?$e.setAttribute(ae,Mt):$e.removeAttribute(ae)}})}}function Z(){if(!(R||!v.props.aria.expanded)){var W=Ds(v.props.triggerTarget||t);W.forEach(function(ae){v.props.interactive?ae.setAttribute("aria-expanded",v.state.isVisible&&ae===B()?"true":"false"):ae.removeAttribute("aria-expanded")})}}function Q(){A().removeEventListener("mousemove",p),lu=lu.filter(function(W){return W!==p})}function H(W){if(!(Ur.isTouch&&(l||W.type==="mousedown"))){var ae=W.composedPath&&W.composedPath()[0]||W.target;if(!(v.props.interactive&&Vv(w,ae))){if(Ds(v.props.triggerTarget||t).some(function(Ee){return Vv(Ee,ae)})){if(Ur.isTouch||v.state.isVisible&&v.props.trigger.indexOf("click")>=0)return}else I("onClickOutside",[v,W]);v.props.hideOnClick===!0&&(v.clearDelayTimeouts(),v.hide(),a=!0,setTimeout(function(){a=!1}),v.state.isMounted||ne())}}}function Y(){l=!0}function oe(){l=!1}function K(){var W=A();W.addEventListener("mousedown",H,!0),W.addEventListener("touchend",H,So),W.addEventListener("touchstart",oe,So),W.addEventListener("touchmove",Y,So)}function ne(){var W=A();W.removeEventListener("mousedown",H,!0),W.removeEventListener("touchend",H,So),W.removeEventListener("touchstart",oe,So),W.removeEventListener("touchmove",Y,So)}function ue(W,ae){Oe(W,function(){!v.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&ae()})}function ke(W,ae){Oe(W,ae)}function Oe(W,ae){var Ee=M().box;function qe($e){$e.target===Ee&&(Sp(Ee,"remove",qe),ae())}if(W===0)return ae();Sp(Ee,"remove",d),Sp(Ee,"add",qe),d=qe}function De(W,ae,Ee){Ee===void 0&&(Ee=!1);var qe=Ds(v.props.triggerTarget||t);qe.forEach(function($e){$e.addEventListener(W,ae,Ee),f.push({node:$e,eventType:W,handler:ae,options:Ee})})}function Xe(){T()&&(De("touchstart",bt,{passive:!0}),De("touchend",rn,{passive:!0})),wQ(v.props.trigger).forEach(function(W){if(W!=="manual")switch(De(W,bt),W){case"mouseenter":De("mouseleave",rn);break;case"focus":De(IQ?"focusout":"blur",He);break;case"focusin":De("focusout",He);break}})}function Et(){f.forEach(function(W){var ae=W.node,Ee=W.eventType,qe=W.handler,$e=W.options;ae.removeEventListener(Ee,qe,$e)}),f=[]}function bt(W){var ae,Ee=!1;if(!(!v.state.isEnabled||on(W)||a)){var qe=((ae=u)==null?void 0:ae.type)==="focus";u=W,g=W.currentTarget,Z(),!v.state.isVisible&&_Q(W)&&lu.forEach(function($e){return $e(W)}),W.type==="click"&&(v.props.trigger.indexOf("mouseenter")<0||s)&&v.props.hideOnClick!==!1&&v.state.isVisible?Ee=!0:Or(W),W.type==="click"&&(s=!Ee),Ee&&!qe&&Jn(W)}}function Vt(W){var ae=W.target,Ee=B().contains(ae)||w.contains(ae);if(!(W.type==="mousemove"&&Ee)){var qe=zn().concat(w).map(function($e){var Tt,Mt=$e._tippy,Wn=(Tt=Mt.popperInstance)==null?void 0:Tt.state;return Wn?{popperRect:$e.getBoundingClientRect(),popperState:Wn,props:n}:null}).filter(Boolean);AQ(qe,W)&&(Q(),Jn(W))}}function rn(W){var ae=on(W)||v.props.trigger.indexOf("click")>=0&&s;if(!ae){if(v.props.interactive){v.hideWithInteractivity(W);return}Jn(W)}}function He(W){v.props.trigger.indexOf("focusin")<0&&W.target!==B()||v.props.interactive&&W.relatedTarget&&w.contains(W.relatedTarget)||Jn(W)}function on(W){return Ur.isTouch?T()!==W.type.indexOf("touch")>=0:!1}function Dt(){Fn();var W=v.props,ae=W.popperOptions,Ee=W.placement,qe=W.offset,$e=W.getReferenceClientRect,Tt=W.moveTransition,Mt=P()?gm(w).arrow:null,Wn=$e?{getBoundingClientRect:$e,contextElement:$e.contextElement||B()}:t,mo={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(U){var X=U.state;if(P()){var Me=M(),ut=Me.box;["placement","reference-hidden","escaped"].forEach(function(it){it==="placement"?ut.setAttribute("data-placement",X.placement):X.attributes.popper["data-popper-"+it]?ut.setAttribute("data-"+it,""):ut.removeAttribute("data-"+it)}),X.attributes.popper={}}}},At=[{name:"offset",options:{offset:qe}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Tt}},mo];P()&&Mt&&At.push({name:"arrow",options:{element:Mt,padding:3}}),At.push.apply(At,(ae==null?void 0:ae.modifiers)||[]),v.popperInstance=bQ(Wn,w,Object.assign({},ae,{placement:Ee,onFirstUpdate:h,modifiers:At}))}function Fn(){v.popperInstance&&(v.popperInstance.destroy(),v.popperInstance=null)}function Gt(){var W=v.props.appendTo,ae,Ee=B();v.props.interactive&&W===sO||W==="parent"?ae=Ee.parentNode:ae=aO(W,[Ee]),ae.contains(w)||ae.appendChild(w),v.state.isMounted=!0,Dt()}function zn(){return ch(w.querySelectorAll("[data-tippy-root]"))}function Or(W){v.clearDelayTimeouts(),W&&I("onTrigger",[v,W]),K();var ae=L(!0),Ee=$(),qe=Ee[0],$e=Ee[1];Ur.isTouch&&qe==="hold"&&$e&&(ae=$e),ae?r=setTimeout(function(){v.show()},ae):v.show()}function Jn(W){if(v.clearDelayTimeouts(),I("onUntrigger",[v,W]),!v.state.isVisible){ne();return}if(!(v.props.trigger.indexOf("mouseenter")>=0&&v.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(W.type)>=0&&s)){var ae=L(!1);ae?i=setTimeout(function(){v.state.isVisible&&v.hide()},ae):o=requestAnimationFrame(function(){v.hide()})}}function Kt(){v.state.isEnabled=!0}function Hn(){v.hide(),v.state.isEnabled=!1}function Ht(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)}function sn(W){if(!v.state.isDestroyed){I("onBeforeUpdate",[v,W]),Et();var ae=v.props,Ee=Kv(t,Object.assign({},ae,jv(W),{ignoreAttributes:!0}));v.props=Ee,Xe(),ae.interactiveDebounce!==Ee.interactiveDebounce&&(Q(),p=Wv(Vt,Ee.interactiveDebounce)),ae.triggerTarget&&!Ee.triggerTarget?Ds(ae.triggerTarget).forEach(function(qe){qe.removeAttribute("aria-expanded")}):Ee.triggerTarget&&t.removeAttribute("aria-expanded"),Z(),F(),S&&S(ae,Ee),v.popperInstance&&(Dt(),zn().forEach(function(qe){requestAnimationFrame(qe._tippy.popperInstance.forceUpdate)})),I("onAfterUpdate",[v,W])}}function Lr(W){v.setProps({content:W})}function ps(){var W=v.state.isVisible,ae=v.state.isDestroyed,Ee=!v.state.isEnabled,qe=Ur.isTouch&&!v.props.touch,$e=Cp(v.props.duration,0,_r.duration);if(!(W||ae||Ee||qe)&&!B().hasAttribute("disabled")&&(I("onShow",[v],!1),v.props.onShow(v)!==!1)){if(v.state.isVisible=!0,P()&&(w.style.visibility="visible"),F(),K(),v.state.isMounted||(w.style.transition="none"),P()){var Tt=M(),Mt=Tt.box,Wn=Tt.content;kp([Mt,Wn],0)}h=function(){var At;if(!(!v.state.isVisible||c)){if(c=!0,w.offsetHeight,w.style.transition=v.props.moveTransition,P()&&v.props.animation){var N=M(),U=N.box,X=N.content;kp([U,X],$e),qv([U,X],"visible")}q(),Z(),Uv(_p,v),(At=v.popperInstance)==null||At.forceUpdate(),I("onMount",[v]),v.props.animation&&P()&&ke($e,function(){v.state.isShown=!0,I("onShown",[v])})}},Gt()}}function gs(){var W=!v.state.isVisible,ae=v.state.isDestroyed,Ee=!v.state.isEnabled,qe=Cp(v.props.duration,1,_r.duration);if(!(W||ae||Ee)&&(I("onHide",[v],!1),v.props.onHide(v)!==!1)){if(v.state.isVisible=!1,v.state.isShown=!1,c=!1,s=!1,P()&&(w.style.visibility="hidden"),Q(),ne(),F(!0),P()){var $e=M(),Tt=$e.box,Mt=$e.content;v.props.animation&&(kp([Tt,Mt],qe),qv([Tt,Mt],"hidden"))}q(),Z(),v.props.animation?P()&&ue(qe,v.unmount):v.unmount()}}function go(W){A().addEventListener("mousemove",p),Uv(lu,p),p(W)}function ms(){v.state.isVisible&&v.hide(),v.state.isMounted&&(Fn(),zn().forEach(function(W){W._tippy.unmount()}),w.parentNode&&w.parentNode.removeChild(w),_p=_p.filter(function(W){return W!==v}),v.state.isMounted=!1,I("onHidden",[v]))}function Ti(){v.state.isDestroyed||(v.clearDelayTimeouts(),v.unmount(),Et(),delete t._tippy,v.state.isDestroyed=!0,I("onDestroy",[v]))}}function vc(t,e){e===void 0&&(e={});var n=_r.plugins.concat(e.plugins||[]);LQ();var r=Object.assign({},e,{plugins:n}),i=TQ(t),o=i.reduce(function(s,a){var l=a&&WQ(a,r);return l&&s.push(l),s},[]);return af(t)?o[0]:o}vc.defaultProps=_r;vc.setDefaultProps=$Q;vc.currentInput=Ur;Object.assign({},YN,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});vc.setDefaultProps({render:uO});class UQ{constructor(e,n={}){this.handles=new Map,this.highlights=new Map,this.resizeObserver=null,this.resizeDebounceTimer=null,this.RESIZE_DEBOUNCE_MS=100,this.nodePositionCache=new Map,this.menuRoot=null,this.tippyInstance=null,this.currentMenuHandle=null,this.menuState={open:!1,position:{x:0,y:0},nodeId:null,nodePos:null,isEmptyNode:!1},this.isMouseOverHandle=!1,this.isMouseOverMenu=!1,this.handleMenuMouseEnter=()=>{this.isMouseOverMenu=!0,this.menuState.nodeId&&this.highlightManager.showHandleByNodeId(this.menuState.nodeId)},this.handleMenuMouseLeave=()=>{this.isMouseOverMenu=!1,this.tryHideMenu()},j.handleDisplay.info(" HandleView ",{options:n}),this.editorView=e;const r=n.visibilityMode||"default-hidden";this.handleStyleConfig=AZ[r],j.handleDisplay.info(" ",{visibilityMode:r,styleConfig:this.handleStyleConfig}),this.nodeMatcher=new S0(n.draggableNodeTypes,n.draggableNodePaths),this.positionCalculator=new DZ(n.offset||OZ),this.dragBehavior=new ZZ(e,{resolveNodePosition:(o,s)=>this.findNodePositionById(o)??s,onDragStart:()=>this.handleDragStarted(),onDragEnd:()=>this.handleDragEnded()}),this.nodeOperations=new JZ(e),this.highlightManager=new QZ(this.handles,this.highlights,this.handleStyleConfig),this.foldPreviewManager=new eJ(e,this.handles,this.highlights),this.overlay=document.createElement("div"),this.overlay.className="handle-display-overlay",this.overlay.style.position="absolute",this.overlay.style.top="0",this.overlay.style.left="0",this.overlay.style.pointerEvents="none",this.overlay.style.zIndex="10",j.handleDisplay.debug("Overlay created");const i=e.dom.parentElement;j.handleDisplay.debug("Editor container found",{tagName:i==null?void 0:i.tagName,originalPosition:i?getComputedStyle(i).position:null}),i?(i.style.position="relative",i.appendChild(this.overlay),j.handleDisplay.info(" Overlay ",{inDOM:document.contains(this.overlay)})):j.handleDisplay.error(" "),this.menuContainer=document.createElement("div"),this.menuContainer.className="handle-menu-container",this.menuRoot=MO.createRoot(this.menuContainer),j.handleDisplay.info(" ..."),this.update(e),this.setupResizeObserver(i)}update(e){if(this.editorView=e,this.nodeOperations.updateView(e),this.foldPreviewManager.updateView(e),!document.contains(this.overlay)){const s=e.dom.parentElement;s&&(s.style.position="relative",s.appendChild(this.overlay))}const n=new Set(this.handles.keys()),r=new Set(this.highlights.keys()),i=new Set,o=new WeakMap;o.set(e.state.doc,"doc"),this.nodePositionCache.clear(),e.state.doc.descendants((s,a,l)=>{const u=`${l&&o.get(l)||"doc"} > ${s.type.name}`;if(o.set(s,u),this.nodeMatcher.isDraggable(s,a,u)){const d=this.nodeMatcher.getNodeId(s,a);this.nodePositionCache.set(d,a),i.add(d),this.updateHandle(s,a,d),n.delete(d),r.delete(d)}}),n.forEach(s=>{const a=this.handles.get(s);a&&(a.remove(),this.handles.delete(s)),this.highlightManager.getCurrentNodeId()===s&&this.highlightManager.resetCurrentNode()}),r.forEach(s=>{const a=this.highlights.get(s);a&&(a.remove(),this.highlights.delete(s))})}setupResizeObserver(e){!e||typeof ResizeObserver>"u"||(this.resizeObserver=new ResizeObserver(()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=setTimeout(()=>{this.resizeDebounceTimer=null,this.handles.forEach((n,r)=>{const i=this.nodePositionCache.get(r);if(i!==void 0){const o=this.editorView.state.doc.nodeAt(i);o&&this.updateHandlePosition(o,i,r,n)}})},this.RESIZE_DEBOUNCE_MS)}),this.resizeObserver.observe(e))}updateHandle(e,n,r){let i=this.handles.get(r),o=this.highlights.get(r);i?this.renderHandleContent(i,e,n,r):(i=this.createHandleElement(e,n,r),this.overlay.appendChild(i),this.handles.set(r,i),this.dragBehavior.setupDraggable(i,r,n)),o||(o=this.highlightManager.createHighlightElement(r),this.overlay.appendChild(o),this.highlights.set(r,o)),this.updateHandlePosition(e,n,r,i)}updateHandlePosition(e,n,r,i){const o=this.highlights.get(r);if(!o)return;const s=this.findBoundaryElement(e,n),a=this.positionCalculator.calculateHandlePosition(this.editorView,n,s,i);a&&(i.style.position="absolute",i.style.left=`${a.left}px`,i.style.top=`${a.top}px`,i.style.width=`${a.width}px`,i.style.height=`${a.height}px`);const l=this.positionCalculator.calculateHighlightPosition(this.editorView,n,s);l&&(o.style.position="absolute",o.style.left=`${l.left}px`,o.style.top=`${l.top}px`,o.style.width=`${l.width}px`,o.style.height=`${l.height}px`)}findBoundaryElement(e,n){let r=this.editorView.nodeDOM(n);const i=this.editorView.domAtPos(n);let o=null;if(i.node.nodeType===Node.TEXT_NODE?o=i.node.parentElement:o=i.node,o&&o!==this.editorView.dom){const a=(r==null?void 0:r.hasAttribute("data-node-view-wrapper"))??!1;(!r||r===this.editorView.dom||a)&&(r=o)}if(!r)return null;const s=this.nodeMatcher.getBoundarySelector(e.type.name);return this.applyBoundarySelector(r,s)}applyBoundarySelector(e,n){if(n!=null&&n.primary){const r=e.closest(n.primary);if(r&&r!==this.editorView.dom)return r}if(n!=null&&n.fallback){const r=e.closest(n.fallback);if(r&&r!==this.editorView.dom)return r}return e}shouldShowMenu(){return this.isMouseOverHandle||this.isMouseOverMenu}tryHideMenu(){requestAnimationFrame(()=>{!this.shouldShowMenu()&&this.tippyInstance&&this.tippyInstance.hide()})}handleDragStarted(){this.tippyInstance&&this.tippyInstance.hide()}handleDragEnded(){this.isMouseOverHandle=!1,this.isMouseOverMenu=!1,this.tippyInstance&&(this.tippyInstance.destroy(),this.tippyInstance=null),this.currentMenuHandle=null,this.menuState={open:!1,position:{x:0,y:0},nodeId:null,nodePos:null,isEmptyNode:!1};const e=this.highlightManager.getCurrentNodeId();e&&this.highlightManager.hideHighlight(e),this.highlightManager.resetCurrentNode()}createHandleElement(e,n,r){const i=document.createElement("div");return i.className="drag-handle feishu-menu-trigger",i.style.opacity=this.handleStyleConfig.initialOpacity,i.style.pointerEvents=this.handleStyleConfig.initialPointerEvents,i.style.cursor="grab",i.style.transition="opacity 0.15s ease",i.style.zIndex="2",this.renderHandleContent(i,e,n,r),i.addEventListener("mouseenter",()=>{this.isMouseOverHandle=!0,this.highlightManager.showHandleByNodeId(r),this.highlightManager.showHighlight(r),this.showMenuForHandle(i,r,n)}),i.addEventListener("mouseleave",()=>{var o;this.isMouseOverHandle=!1,(o=this.tippyInstance)!=null&&o.state.isVisible||this.highlightManager.hideHighlight(r),this.tryHideMenu()}),i.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),!this.dragBehavior.isDragging()&&this.showMenuForHandle(i,r,n)}),i}showMenuForHandle(e,n,r){const i=e.getAttribute("data-empty")==="true";if(this.menuState={open:!0,position:{x:0,y:0},nodeId:n,nodePos:r,isEmptyNode:i},this.renderMenu(),this.tippyInstance&&this.currentMenuHandle===e){this.tippyInstance.show();return}this.tippyInstance&&(this.tippyInstance.destroy(),this.tippyInstance=null),this.currentMenuHandle=e;const o=e.getBoundingClientRect(),s=160,a=80,l=o.left,c=window.innerWidth-o.right,u=o.top,d=window.innerHeight-o.bottom;let h="left-start";l>=s?h="left-start":c>=s?h="right-start":d>=a?h="bottom-start":u>=a&&(h="top-start"),this.tippyInstance=vc(e,{content:this.menuContainer,interactive:!0,interactiveBorder:20,trigger:"manual",placement:h,arrow:!1,offset:[0,4],zIndex:1e3,appendTo:()=>document.body,animation:"shift-away",duration:[150,100],popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["left-start","right-start","bottom-start","top-start"]}},{name:"preventOverflow",options:{boundary:"viewport",padding:8}}]},onShow:f=>{const p=f.popper;p.addEventListener("mouseenter",this.handleMenuMouseEnter),p.addEventListener("mouseleave",this.handleMenuMouseLeave)},onHide:f=>{const p=f.popper;p.removeEventListener("mouseenter",this.handleMenuMouseEnter),p.removeEventListener("mouseleave",this.handleMenuMouseLeave),this.menuState.nodeId&&this.highlightManager.hideHighlight(this.menuState.nodeId),this.menuState.open=!1,this.renderMenuClosed()}}),this.tippyInstance.show()}renderHandleContent(e,n,r,i){e.setAttribute("data-node-id",i),e.setAttribute("data-pos",String(r)),e.setAttribute("data-node-type",n.type.name);const o=n.type.name==="paragraph"&&this.isEmptyNode(n);if(e.setAttribute("data-empty",o?"true":"false"),o){e.innerHTML=`
        <div class="feishu-menu-wrapper empty-node-wrapper">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
            <path d="M12 5v14m-7-7h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
      `;return}const s=n.type.name==="heading"||n.type.name==="numberedHeading",a=KZ(n.type.name,n.attrs),l=s?`
          <button
            class="heading-fold-toggle-inline"
            data-testid="fold-toggle"
            data-collapsed="${n.attrs.collapsed?"true":"false"}"
            type="button"
            contentEditable="false"
            draggable="false"
            aria-label="${n.attrs.collapsed?"":""}"
          >
            <svg width="12" height="12" viewBox="0 0 16 16" fill="none">
              <path d="M6.2 4.5c-.28 0-.53.16-.65.4a.7.7 0 00.05.71l2.5 3.9c.13.2.35.32.58.32h.16c.23 0 .45-.12.58-.32l2.5-3.9a.7.7 0 00.05-.7.75.75 0 00-.65-.41H6.2z" fill="currentColor" />
            </svg>
          </button>
        `:"";if(e.innerHTML=`
      <div class="feishu-menu-wrapper ${s?"heading-with-fold":""}">
        ${l}
        <div class="feishu-type-icon">
          <span>${a}</span>
        </div>
        <span class="feishu-drag-handle">
          ${BZ}
        </span>
      </div>
    `,s){const c=typeof n.attrs.level=="number"?n.attrs.level:Number(n.attrs.level||1);e.setAttribute("data-heading-level",String(c||1));const u=e.querySelector(".heading-fold-toggle-inline");u&&(u.onclick=d=>{d.preventDefault(),d.stopPropagation();const h=Number(e.getAttribute("data-pos"));isNaN(h)||requestAnimationFrame(()=>{this.foldPreviewManager.toggleHeadingFold(h)})},u.onmouseover=()=>{const d=Number(e.getAttribute("data-pos"));isNaN(d)||this.foldPreviewManager.previewFoldRange(d)},u.onmouseout=()=>{this.foldPreviewManager.clearFoldPreviewHighlights()})}}isEmptyNode(e){if(!e.content||e.content.size===0)return!0;let n=!1;return e.content.forEach(r=>{(r.type.name!=="text"||r.text&&r.text.trim()!=="")&&(n=!0)}),!n}findNodePositionById(e){let n=null;return this.editorView.state.doc.descendants((r,i)=>{if(r.attrs.id&&r.attrs.id===e)return n=i,!1}),n}showHandleByNodeId(e){this.highlightManager.showHandleByNodeId(e)}hideAllHandles(){this.highlightManager.hideAll(()=>this.foldPreviewManager.clearFoldPreviewHighlights())}getCurrentNodeId(){return this.highlightManager.getCurrentNodeId()}isPointerWithinHandleArea(e,n,r=6){return this.highlightManager.isPointerWithinHandleArea(e,n,r)}isPointerWithinActiveZone(e,n,r=6){return this.highlightManager.isPointerWithinActiveZone(e,n,r)}renderMenu(){this.menuRoot&&(this.menuState.isEmptyNode?this.menuRoot.render(O.createElement(hf,null,O.createElement(_0,{open:!0,position:{x:0,y:0},onClose:()=>this.hideMenu(),onSelect:e=>this.handleEmptyNodeSelect(e),onMouseEnter:this.handleMenuMouseEnter,onMouseLeave:this.handleMenuMouseLeave}))):this.menuRoot.render(O.createElement(hf,null,O.createElement(dm,{open:!0,position:{x:0,y:0},onClose:()=>this.hideMenu(),onDuplicate:()=>this.handleDuplicate(),onDelete:()=>this.handleDelete(),onMouseEnter:this.handleMenuMouseEnter,onMouseLeave:this.handleMenuMouseLeave}))))}renderMenuClosed(){this.menuRoot&&this.menuRoot.render(O.createElement(hf,null,O.createElement(dm,{open:!1,position:{x:0,y:0},onClose:()=>this.hideMenu(),onDuplicate:()=>this.handleDuplicate(),onDelete:()=>this.handleDelete(),onMouseEnter:this.handleMenuMouseEnter,onMouseLeave:this.handleMenuMouseLeave})))}hideMenu(){this.tippyInstance&&this.tippyInstance.hide(),this.menuState={open:!1,position:{x:0,y:0},nodeId:null,nodePos:null,isEmptyNode:!1}}handleEmptyNodeSelect(e){const{nodePos:n}=this.menuState;n!==null&&(this.nodeOperations.handleEmptyNodeSelect(n,e),this.hideMenu())}handleDuplicate(){const{nodePos:e}=this.menuState;e!==null&&(this.nodeOperations.duplicate(e),this.hideMenu())}handleDelete(){const{nodePos:e}=this.menuState;e!==null&&(this.nodeOperations.deleteNode(e),this.hideMenu())}destroy(){if(this.foldPreviewManager.clearFoldPreviewHighlights(),this.overlay.remove(),this.handles.clear(),this.highlights.clear(),this.dragBehavior.destroy(),this.tippyInstance&&(this.tippyInstance.destroy(),this.tippyInstance=null),this.menuRoot){const e=this.menuRoot;this.menuRoot=null,setTimeout(()=>{e.unmount()},0)}this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}}const jQ=Ye.create({name:"handleDisplay",addOptions(){return{enableHover:!0,visibilityMode:"default-hidden",offset:50,draggableNodeTypes:void 0,draggableNodePaths:void 0}},addStorage(){return{hoverState:null,handleView:null}},addProseMirrorPlugins(){j.handleDisplay.debug(" Adding ProseMirror plugins",{options:this.options});const t=this.options,e=this.storage,n=new IZ(LZ,t.draggableNodeTypes,t.draggableNodePaths);j.handleDisplay.debug(" HoverDetector instance created (singleton)");const r=(i,o)=>!i&&!o?!1:!!(!i&&o||i&&!o||i&&o&&i.nodeId!==o.nodeId);return[new Ge({key:new Je("handleDisplay"),view:i=>{j.handleDisplay.info("  HandleView ");const o=new UQ(i,{visibilityMode:t.visibilityMode,offset:t.offset,draggableNodeTypes:t.draggableNodeTypes,draggableNodePaths:t.draggableNodePaths});return e.handleView=o,j.handleDisplay.info(" HandleView  storage"),o}}),new Ge({key:new Je("handleDisplayHover"),props:{handleDOMEvents:{mousemove:(i,o)=>{if(!t.enableHover||!i.editable)return!1;const s=e.handleView;if(!s)return!1;const a=o.target,l=a==null?void 0:a.closest(".drag-handle");if(l){const d=l.getAttribute("data-node-id");return d&&s.showHandleByNodeId(d),!1}let c=n.handleMouseMove(i,o);if(!c&&s.getCurrentNodeId()&&s.isPointerWithinActiveZone(o.clientX,o.clientY,20))return!1;const u=e.hoverState;return r(u,c)&&(e.hoverState=c,c!=null&&c.isDraggable?s.showHandleByNodeId(c.nodeId):s.hideAllHandles()),!1}}}})]}}),qQ=jQ,br=new Je("horizontal-drag-guideline-v1"),uh={thickness:2,debug:!1},rr={isVisible:!1,left:null,right:null,top:null,bottom:null,reason:"idle"},VQ="syllo-dropcursor",GQ="syllo-dropcursor--horizontal";class KQ{constructor(e,n){this.editorView=e,this.element=null,this.options={...uh,...n}}update(e,n){const r=br.getState(e.state),i=br.getState(n);if(!r||!r.isVisible){this.hide();return}i&&i.isVisible&&i.left===r.left&&i.right===r.right&&i.top===r.top&&i.bottom===r.bottom||this.render(r)}destroy(){this.hide()}ensureElement(){var i;if(this.element)return this.element;const e=this.editorView.dom,r=(e.offsetParent??e.parentElement??((i=this.editorView.dom.ownerDocument)==null?void 0:i.body)??document.body).appendChild(document.createElement("div"));return r.classList.add(VQ,GQ),r.style.position="absolute",r.style.pointerEvents="none",r.style.zIndex="9999",this.element=r,r}hide(){this.element&&(this.element.remove(),this.element=null)}render(e){if(e.left==null||e.right==null||e.top==null||e.bottom==null||e.right<=e.left){this.hide();return}const n=this.ensureElement(),r=this.editorView.dom,i=r.getBoundingClientRect(),o=i.width/r.offsetWidth,s=i.height/r.offsetHeight,a=n.parentElement;let l,c;if(!a||a===document.body&&getComputedStyle(a).position==="static")l=-window.pageXOffset,c=-window.pageYOffset;else{const u=a.getBoundingClientRect(),d=u.width/(a.offsetWidth||1),h=u.height/(a.offsetHeight||1);l=u.left-a.scrollLeft*d,c=u.top-a.scrollTop*h}n.style.left=`${(e.left-l)/o}px`,n.style.top=`${(e.top-c)/s}px`,n.style.width=`${(e.right-e.left)/o}px`,n.style.height=`${(e.bottom-e.top)/s}px`}}class YQ{constructor(e,n){this.editorView=e,this.thickness=n}computeRect(e){const r=this.editorView.state.doc.resolve(e),i=!r.parent.inlineContent;let o=null;if(i){const s=r.nodeBefore,a=r.nodeAfter;if(s||a){const l=e-(s?s.nodeSize:0),c=this.editorView.nodeDOM(l);if(c&&c instanceof HTMLElement){const u=c.getBoundingClientRect();let d=s?u.bottom:u.top;if(s&&a){const f=this.editorView.nodeDOM(e);if(f&&f instanceof HTMLElement){const p=f.getBoundingClientRect();d=(d+p.top)/2}}const h=this.thickness/2;o={left:u.left,right:u.right,top:d-h,bottom:d+h}}}}if(!o){const s=this.editorView.coordsAtPos(e),a=this.thickness/2;o={left:s.left-a,right:s.left+a,top:s.top,bottom:s.bottom??s.top}}return o}}const Ep={containerSelector:".columns-container-grid",columnSelector:'[data-type="column"]',threshold:24};class XQ{constructor(e={}){this.rectCalculator=null,this.options={...uh,...e}}ensureRectCalculator(e){return this.rectCalculator||(this.rectCalculator=new YQ(e,this.options.thickness)),this.rectCalculator}isInsideColumnGapHotzone(e,n,r){const i=e.querySelectorAll(Ep.containerSelector);if(i.length===0)return!1;const o=Ep.threshold;for(const s of i){const a=s.getBoundingClientRect();if(r<a.top-o||r>a.bottom+o)continue;const l=s.querySelectorAll(Ep.columnSelector);if(l.length<2)continue;const c=Array.from(l).map(u=>u.getBoundingClientRect());for(let u=0;u<c.length-1;u++){const d=(c[u].right+c[u+1].left)/2;if(Math.abs(n-d)<=o)return!0}}return!1}calculate(e,n){var c;if(!e.editable)return{...rr,reason:"readonly"};if(!e.dragging)return{...rr,reason:"no-dragging"};const r=e.posAtCoords({left:n.clientX,top:n.clientY});if(!r)return{...rr,reason:"outside-editor"};const i=e.dragging;if(i.from!==void 0&&i.to!==void 0&&r.pos>=i.from&&r.pos<=i.to)return this.options.debug&&j.dragGuideline.debug("horizontal-v1: dropping on self, hide guideline",{targetPos:r.pos,from:i.from,to:i.to}),{...rr,reason:"drop-on-self"};if(this.isInsideColumnGapHotzone(e.dom,n.clientX,n.clientY))return this.options.debug&&j.dragGuideline.debug("horizontal-v1: inside column gap hotzone, hide guideline"),{...rr,reason:"column-gap-hotzone"};const o=(c=e.dragging)==null?void 0:c.slice;let s=r.pos;if(o)try{const u=vm(e.state.doc,r.pos,o);u!=null&&(s=u)}catch(u){this.options.debug&&j.dragGuideline.warn("horizontal-v1: dropPoint failed, fallback to raw pos",{error:u})}const l=this.ensureRectCalculator(e).computeRect(s);return l?(this.options.debug&&j.dragGuideline.debug("horizontal-v1: computed rect",l),{isVisible:!0,left:l.left,right:l.right,top:l.top,bottom:l.bottom,reason:"ok"}):{...rr,reason:"no-rect"}}clear(){return{...rr,reason:"cleared"}}}const un=new Je("vertical-drag-guideline"),Zv={columnContainerSelector:".columns-container-grid",columnSelector:'[data-type="column"]',columnHotzoneThreshold:24,enableColumnGuideline:!1,enableEditorBorderGuideline:!0,editorBorderHorizontalThreshold:1e3,editorBorderVerticalTolerance:50,debug:!1},Jv="syllo-vert-guideline",ZQ="syllo-vert-guideline--columns-edge",JQ="syllo-vert-guideline--editor-border",QQ="none",en={mode:QQ,isVisible:!1,edgeX:null,top:null,bottom:null,side:null,hotzoneType:null,targetColumnIndex:null,targetNodePos:null,isInsideColumns:!1};function eee(t,e){return t?t.isVisible===e.isVisible&&t.left===e.left&&t.right===e.right&&t.top===e.top&&t.bottom===e.bottom:!1}function tee(t,e){let n=null,r=null,i=null,o=null,s=null;return new Ge({key:br,state:{init(){return rr},apply(a,l){const c=a.getMeta(br);return c?{...l,...c}:a.docChanged?rr:l}},view(a){return e.view=a,n=new KQ(a,t),r=new XQ(t),i=l=>{if(!r)return;const c=un.getState(a.state);if(c!=null&&c.isVisible){console.log("[HorizontalPlugin] Vertical visible, forcing hide. VertState:",c);const f=br.getState(a.state);if(f!=null&&f.isVisible){const p=a.state.tr.setMeta(br,rr);a.dispatch(p)}return}const u=r.calculate(a,l);console.log("[HorizontalPlugin] Calculated state:",u);const d=br.getState(a.state);if(eee(d,u))return;const h=a.state.tr.setMeta(br,u);a.dispatch(h)},o=()=>{const l=a.state.tr.setMeta(br,rr);a.dispatch(l)},a.dom.addEventListener("dragover",i),a.dom.addEventListener("dragend",o),s=l=>{const c=a.dom.getBoundingClientRect();if(!(l.clientX>=c.left&&l.clientX<=c.right&&l.clientY>=c.top&&l.clientY<=c.bottom)){const d=br.getState(a.state);if(d!=null&&d.isVisible){const h=a.state.tr.setMeta(br,rr);a.dispatch(h)}}},document.addEventListener("dragover",s,!0),{update(l,c){n==null||n.update(l,c)},destroy(){n==null||n.destroy(),n=null,i&&(a.dom.removeEventListener("dragover",i),i=null),o&&(a.dom.removeEventListener("dragend",o),o=null),s&&(document.removeEventListener("dragover",s,!0),s=null),r=null,e.view=null}}}})}const nee=Ye.create({name:"horizontalDragGuidelineV1",addOptions(){return uh},addStorage(){return{view:null}},addProseMirrorPlugins(){const t={...uh,...this.options},e=this.storage;return j.dragGuideline.debug("HorizontalDragGuidelineV1Extension loaded",{options:t}),[tee(t,e)]}});class ree{constructor(e){this.editorView=e,this.element=null}update(e,n){const r=un.getState(e.state),i=un.getState(n);if(!r||!r.isVisible){this.hide();return}i&&i.isVisible&&i.mode===r.mode&&i.edgeX===r.edgeX&&i.top===r.top&&i.bottom===r.bottom||this.render(r)}destroy(){this.hide()}ensureElement(){var i;if(this.element)return this.element;const e=this.editorView.dom,r=(e.offsetParent??e.parentElement??((i=this.editorView.dom.ownerDocument)==null?void 0:i.body)??document.body).appendChild(document.createElement("div"));return r.classList.add(Jv),r.style.position="absolute",r.style.pointerEvents="none",r.style.zIndex="9999",this.element=r,r}hide(){this.element&&(this.element.remove(),this.element=null),this.editorView.dom.removeAttribute("data-vertical-guideline-visible")}render(e){const n=this.ensureElement(),r=this.editorView.dom;r.setAttribute("data-vertical-guideline-visible","true");const i=r.getBoundingClientRect(),o=i.width/(r.offsetWidth||1),s=i.height/(r.offsetHeight||1),a=n.parentElement;let l,c;if(!a||a===document.body&&getComputedStyle(a).position==="static")l=-window.pageXOffset,c=-window.pageYOffset;else{const h=a.getBoundingClientRect(),f=h.width/(a.offsetWidth||1),p=h.height/(a.offsetHeight||1);l=h.left-a.scrollLeft*f,c=h.top-a.scrollTop*p}if(n.className=Jv,e.mode==="columns-edge"?n.classList.add(ZQ):e.mode==="editor-border"&&n.classList.add(JQ),e.edgeX==null||e.top==null||e.bottom==null){this.hide();return}const u=e.bottom-e.top;if(u<=0){this.hide();return}const d=n.offsetWidth||4;n.style.left=`${(e.edgeX-d/2-l)/o}px`,n.style.top=`${(e.top-c)/s}px`,n.style.width=`${d/o}px`,n.style.height=`${u/s}px`}}class iee{constructor(e){this.config={threshold:e.columnHotzoneThreshold??24,containerSelector:e.columnContainerSelector??".columns-container-grid",columnSelector:e.columnSelector??'[data-type="column"]',debug:e.debug??!1}}update(e){this.config={threshold:e.columnHotzoneThreshold??this.config.threshold,containerSelector:e.columnContainerSelector??this.config.containerSelector,columnSelector:e.columnSelector??this.config.columnSelector,debug:e.debug??this.config.debug}}detect(e,n,r){const i=r.querySelectorAll(this.config.containerSelector);if(i.length===0)return null;for(const o of i){const s=o.getBoundingClientRect(),a=this.config.threshold;if(!(n>=s.top-a&&n<=s.bottom+a))continue;const c=o.querySelectorAll(this.config.columnSelector);if(c.length<2)continue;const u=Array.from(c).map(d=>d.getBoundingClientRect());for(let d=0;d<u.length-1;d++){const h=u[d],f=u[d+1],p=(h.right+f.left)/2;if(Math.abs(e-p)<=a)return this.config.debug&&j.dragGuideline.debug("vertical: Gap ",{mouseX:e,gapCenter:p,index:d}),{type:"gap",edgeX:p,top:s.top,bottom:s.bottom,columnIndex:d,columnsElement:o}}}return null}}class oee{constructor(e){this.options=e}detect(e,n,r){const{editorBorderHorizontalThreshold:i,editorBorderVerticalTolerance:o,debug:s}=this.options;if(!(n>=r.top-o&&n<=r.bottom+o))return null;const l=r.left-i,c=r.right+i;return e>=l&&e<r.left?(s&&j.dragGuideline.debug("vertical: ",{clientX:e,editorLeft:r.left,leftLimit:l}),{side:"left",edgeX:r.left,top:r.top,bottom:r.bottom}):e<=c&&e>r.right?(s&&j.dragGuideline.debug("vertical: ",{clientX:e,editorRight:r.right,rightLimit:c}),{side:"right",edgeX:r.right,top:r.top,bottom:r.bottom}):null}}class Qv{constructor(e){this.editorView=e}findTargetBlockAtY(e,n){const r=Math.max(n.top,Math.min(e,n.bottom)),i=(n.left+n.right)/2,o=this.editorView.posAtCoords({left:i,top:r});if(!o)return null;let a=this.editorView.domAtPos(o.pos).node;const l=this.findContainerNode(a);if(l)return l;const c=this.findBlockNode(a);return c||null}findContainerNode(e){let n=e;for(;n&&n!==this.editorView.dom;){if(n.nodeType!==1){n=n.parentElement;continue}if(n.matches('.columns-container-grid, [data-type="columns"], [data-type="columnsFlex"]')||n.matches('table, .tableWrapper, [data-type="table"]')||n.matches('.callout-wrapper, [data-type="callout"]'))return n;n=n.parentElement}return null}findBlockNode(e){const n=this.findTopLevelListContainer(e);if(n)return n;let r=e;for(;r&&r!==this.editorView.dom;){if(r.nodeType===1&&r.matches('h1, h2, h3, h4, h5, h6, p, blockquote, pre, .draggable-node, li[data-type="taskItem"]'))return r;r=r.parentElement}return null}findTopLevelListContainer(e){let n=e,r=null;for(;n&&n!==this.editorView.dom;)n.nodeType===1&&(n.matches("ul")||n.matches("ol"))&&(r=n),n=n.parentElement;return r}}class see{constructor(e){this.borderNodeFinder=null,this.options={columnContainerSelector:e.columnContainerSelector??".columns-container-grid",columnSelector:e.columnSelector??'[data-type="column"]',columnHotzoneThreshold:e.columnHotzoneThreshold??24,enableColumnGuideline:e.enableColumnGuideline??!0,enableEditorBorderGuideline:e.enableEditorBorderGuideline??!0,editorBorderHorizontalThreshold:e.editorBorderHorizontalThreshold??1e3,editorBorderVerticalTolerance:e.editorBorderVerticalTolerance??50,debug:e.debug??!1},this.columnDetector=new iee(this.options),this.borderDetector=new oee(this.options)}calculateForEditorDragover(e,n){if(!e.editable||!e.dragging||!this.options.enableColumnGuideline)return en;const r=this.columnDetector.detect(n.clientX,n.clientY,e.dom);return r?this.buildColumnEdgeState(e,r):(this.options.debug&&j.dragGuideline.debug("VerticalGuideline: editor dragover, no hotzone detected"),en)}calculateForGlobalDragover(e,n){if(!e.editable||!e.dragging||!this.options.enableEditorBorderGuideline)return en;const r=e.dom.getBoundingClientRect();if(n.clientX>=r.left&&n.clientX<=r.right&&n.clientY>=r.top&&n.clientY<=r.bottom)return en;const o=this.borderDetector.detect(n.clientX,n.clientY,r);if(!o)return en;const s=this.resolveBorderBlockRect(e,n.clientY,r);if(!s)return en;this.borderNodeFinder||(this.borderNodeFinder=new Qv(e));const a=this.borderNodeFinder.findTargetBlockAtY(n.clientY,r);if(!a)return en;const l=e.posAtDOM(a,0);if(l==null)return en;const c=e.state.doc.resolve(l);let u=!1;for(let d=c.depth;d>=0;d--)if(c.node(d).type.name===xi){u=!0;break}return this.buildEditorBorderState(o,s,l,u)}clear(){return en}buildColumnEdgeState(e,n){const r=e.posAtDOM(n.columnsElement,0);let i=null;return n.type==="left-edge"?i="left":(n.type==="right-edge"||n.type==="column-gap"||n.type==="gap")&&(i="right"),{mode:"columns-edge",isVisible:!0,edgeX:n.edgeX,top:n.top,bottom:n.bottom,side:i,hotzoneType:n.type,targetColumnIndex:n.columnIndex??null,targetNodePos:r??null,isInsideColumns:!0}}buildEditorBorderState(e,n,r,i){return{mode:"editor-border",isVisible:!0,edgeX:e.edgeX,top:n.top,bottom:n.bottom,side:e.side,hotzoneType:null,targetColumnIndex:null,targetNodePos:r,isInsideColumns:i}}resolveBorderBlockRect(e,n,r){this.borderNodeFinder||(this.borderNodeFinder=new Qv(e));const i=this.borderNodeFinder.findTargetBlockAtY(n,r);if(!i)return null;const o=i.getBoundingClientRect();return{top:Math.max(o.top,r.top),bottom:Math.min(o.bottom,r.bottom)}}}function aee(t,e,n,r){const{state:i,dragging:o}=t;if(console.log("[createTwoColumnLayoutAt] START",{targetPos:e,side:n,insertAfterIndex:r,hasDragging:!!o}),j.dragGuideline.debug("[createTwoColumnLayoutAt] START",{targetPos:e,side:n,hasDragging:!!o}),!o||o.from===void 0||o.to===void 0||!o.slice)return console.log("[createTwoColumnLayoutAt] skip: invalid dragging data"),j.dragGuideline.debug("[createTwoColumnLayoutAt] skip: invalid dragging data",{hasDragging:!!o}),!1;const s=lee(i.doc,e);if(!s)return console.log("[createTwoColumnLayoutAt] skip: could not resolve block node"),j.dragGuideline.debug("[createTwoColumnLayoutAt] skip: could not resolve block node",{targetPos:e}),!1;let{pos:a,node:l}=s;const c=i.doc.resolve(a);if(console.log("[createTwoColumnLayoutAt] Resolved target",{pos:a,nodeType:l.type.name}),j.dragGuideline.debug("[createTwoColumnLayoutAt] Resolved target",{pos:a,nodeType:l.type.name,depth:c.depth}),!l||!l.isBlock)return console.log("[createTwoColumnLayoutAt] skip: target node is not a block"),j.dragGuideline.debug("[createTwoColumnLayoutAt] skip: target node is not a block",{pos:a,nodeType:l==null?void 0:l.type.name}),!1;if(l.type.name===xi)return console.log("[createTwoColumnLayoutAt] Target IS a COLUMNS node"),j.dragGuideline.debug("[createTwoColumnLayoutAt]  Target IS a COLUMNS node, calling addColumnToExistingColumns",{columnsPos:a,side:n,columnsChildCount:l.childCount}),j.dragGuideline.debug("vertical-drop: target is columns node, add column",{columnsPos:a,side:n,insertAfterIndex:r,columnsChildCount:l.childCount}),ew(t,a,l,n,r);j.dragGuideline.debug("[createTwoColumnLayoutAt] Checking if target is inside columns...");for(let E=c.depth;E>=0;E--){const R=c.node(E);if(j.dragGuideline.debug(`[createTwoColumnLayoutAt] depth ${E}: ${R.type.name}`),R.type.name===xi){const $=E,T=R,P=c.before($);return console.log("[createTwoColumnLayoutAt] Found COLUMNS ancestor"),j.dragGuideline.debug("[createTwoColumnLayoutAt]  Found COLUMNS ancestor, calling addColumnToExistingColumns",{columnsPos:P,columnsDepth:$,side:n,columnsChildCount:T.childCount}),j.dragGuideline.debug("vertical-drop: target inside existing columns, add column",{columnsPos:P,side:n,insertAfterIndex:r,columnsChildCount:T.childCount}),ew(t,P,T,n,r)}}j.dragGuideline.debug("[createTwoColumnLayoutAt] No COLUMNS ancestor found, creating new two-column layout");for(let E=c.depth;E>=0;E--){const R=c.node(E);if(R.type.name===lr)return console.log("[createTwoColumnLayoutAt] skip: target inside column without columns ancestor"),j.dragGuideline.debug("[createTwoColumnLayoutAt] skip: target inside column without columns ancestor",{nodeType:R.type.name,depth:E}),!1}const u=i.schema.nodes[xi],d=i.schema.nodes[lr];if(!u||!d)return console.log("[createTwoColumnLayoutAt] schema missing columns/column"),j.dragGuideline.error("vertical-drop: columns / column node type not found in schema",{available:Object.keys(i.schema.nodes)}),!1;const h=o.slice.content.firstChild||i.schema.nodes.paragraph.create(),p=i.doc.slice(a,a+l.nodeSize).content.firstChild||i.schema.nodes.paragraph.create(),g=n==="left"?h:p,m=n==="left"?p:h,y=d.create({width:50},g),b=d.create({width:50},m),C=u.create({count:2,columnWidths:[50,50],layout:"grid"},[y,b]),v=i.tr;v.delete(a,a+l.nodeSize),v.insert(a,C);const{from:k,to:w,move:S}=o;if(S&&k!==void 0&&w!==void 0){const E=k<a?k:k+C.nodeSize-l.nodeSize,R=E+(w-k);v.delete(E,R)}return t.dispatch(v),console.log("[createTwoColumnLayoutAt] Success: columns created"),j.dragGuideline.debug("[createTwoColumnLayoutAt] columns created",{targetPos:a,from:o.from,to:o.to,move:o.move}),!0}function lee(t,e){const n=t.resolve(e);for(let i=n.depth;i>=0;i--){const o=n.node(i);if(o.isBlock&&o.type.name!=="doc"){const s=i>0?n.before(i):0;return{node:o,pos:s}}}const r=n.nodeAfter||n.nodeBefore;return r&&r.isBlock?{node:r,pos:n.pos}:null}function ew(t,e,n,r,i){const{state:o,dragging:s}=t;if(console.log("[addColumnToExistingColumns] START",{columnsPos:e,side:r,insertAfterIndex:i,currentCount:n.childCount}),j.dragGuideline.debug("[addColumnToExistingColumns] START",{columnsPos:e,side:r,currentCount:n.childCount,hasDragging:!!s}),!s||s.slice==null)return console.log("[addColumnToExistingColumns] skip: no dragging slice"),j.dragGuideline.debug("[addColumnToExistingColumns] skip: no dragging slice"),j.dragGuideline.debug("vertical-drop: addColumnToExistingColumns skipped, no dragging slice"),!1;const{schema:a}=o,l=a.nodes[lr];if(!l)return console.log("[addColumnToExistingColumns] skip: column node type not found"),j.dragGuideline.error("vertical-drop: column node type not found in schema",{available:Object.keys(a.nodes)}),!1;const c=n.childCount;if(c>=Us)return console.log("[addColumnToExistingColumns] skip: reached MAX_COLUMNS"),j.dragGuideline.debug("[addColumnToExistingColumns] skip: reached MAX_COLUMNS",{currentCount:c,MAX_COLUMNS:Us}),j.dragGuideline.debug("vertical-drop: reached MAX_COLUMNS, skip add column",{currentCount:c,MAX_COLUMNS:Us}),!1;const u=s.slice.content.firstChild||a.nodes.paragraph.create();j.dragGuideline.debug("[addColumnToExistingColumns] Building new columns structure",{side:r,insertAfterIndex:i,draggedContentType:u.type.name});const d=[],h=l.create({width:0},u);if(i!=null&&i>=0&&i<n.childCount)for(let w=0;w<n.childCount;w++)d.push(n.child(w)),w===i&&d.push(h);else{r==="left"&&d.push(h);for(let w=0;w<n.childCount;w++)d.push(n.child(w));r==="right"&&d.push(h)}const f=d.length,p=100/f,g=Array(f).fill(p);j.dragGuideline.debug("[addColumnToExistingColumns] Creating new columns node",{newCount:f,newWidths:g,oldCount:n.childCount});const m={...n.attrs,count:f,columnWidths:g},y=n.type.create(m,d);let b=o.tr.replaceWith(e,e+n.nodeSize,y);const{from:C,to:v,move:k}=s;if(k&&C!==void 0&&v!==void 0){const w=b.mapping.map(C),S=b.mapping.map(v);j.dragGuideline.debug("[addColumnToExistingColumns] Deleting dragging source",{from:C,to:v,mappedFrom:w,mappedTo:S}),b=b.delete(w,S)}return t.dispatch(b),j.dragGuideline.debug("[addColumnToExistingColumns]  SUCCESS: Added column to existing columns",{columnsPos:e,newCount:f,side:r}),!0}class tw{constructor(e){this.options=e}execute(e,n,r){const i=r();if(console.log("[VerticalDropExecutor] executing with state:",i),!i||!i.isVisible)return console.log("[VerticalDropExecutor] Failed: state empty or not visible"),!1;if(i.mode!=="editor-border"&&i.mode!=="columns-edge")return console.log("[VerticalDropExecutor] Failed: mode mismatch",i.mode),!1;if(!e.dragging)return console.log("[VerticalDropExecutor] Failed: view.dragging is null"),j.dragGuideline.debug("[VerticalDropExecutor] skip: no dragging data on view"),!1;const{debug:o}=this.options;if(o&&j.dragGuideline.debug("VerticalDropExecutor: drop with state",{mode:i.mode,side:i.side,targetNodePos:i.targetNodePos,targetColumnIndex:i.targetColumnIndex,isInsideColumns:i.isInsideColumns}),i.targetNodePos==null||!i.side)return j.dragGuideline.debug("[VerticalDropExecutor] skip: missing targetNodePos or side",{targetNodePos:i.targetNodePos,side:i.side}),!1;try{const s=i.side,a=i.targetColumnIndex;if(aee(e,i.targetNodePos,s,a))return e.dragging=null,n.preventDefault(),n.stopPropagation(),o&&j.dragGuideline.debug("VerticalDropExecutor: created two-column layout"),!0}catch(s){j.dragGuideline.error("VerticalDropExecutor: failed to handle drop",{error:s})}return j.dragGuideline.debug("[VerticalDropExecutor] finished: drop not handled, fallback to default"),!1}}function nw(t,e){return t?t.mode===e.mode&&t.isVisible===e.isVisible&&t.edgeX===e.edgeX&&t.top===e.top&&t.bottom===e.bottom&&t.side===e.side&&t.hotzoneType===e.hotzoneType&&t.targetColumnIndex===e.targetColumnIndex&&t.targetNodePos===e.targetNodePos&&t.isInsideColumns===e.isInsideColumns:!1}function cee(t,e){let n=null,r=null,i=null,o=null,s=null,a=null,l=null;return new Ge({key:un,props:{handleDOMEvents:{drop:(c,u)=>{const d=u;if(!c.dragging)return!1;if(j.dragGuideline.debug("[VerticalGuidelinePlugin] editor drop",{hasDragging:!!c.dragging,clientX:d.clientX,clientY:d.clientY}),new tw(t).execute(c,d,()=>un.getState(c.state))){const p=c.state.tr.setMeta(un,en);return c.dispatch(p),!0}return!1}}},state:{init(){return en},apply(c,u){const d=c.getMeta(un);return d?{...u,...d}:c.docChanged?en:u}},view(c){return e.view=c,n=new ree(c),r=new see(t),i=u=>{if(!r)return;const d=r.calculateForEditorDragover(c,u);console.log("[VerticalPlugin] Editor dragover state:",d);const h=un.getState(c.state);if(nw(h,d))return;const f=c.state.tr.setMeta(un,d);c.dispatch(f)},o=()=>{const u=c.state.tr.setMeta(un,en);c.dispatch(u)},c.dom.addEventListener("dragover",i),c.dom.addEventListener("dragend",o),s=u=>{if(!r)return;const d=r.calculateForGlobalDragover(c,u),h=un.getState(c.state);if((d.isVisible||c.dragging)&&(u.preventDefault(),u.dataTransfer.dropEffect="move"),nw(h,d))return;d.isVisible&&j.dragGuideline.debug("[VerticalGuidelinePlugin] Global dragover - showing guideline",{mode:d.mode,side:d.side,edgeX:d.edgeX});const f=c.state.tr.setMeta(un,d);c.dispatch(f)},a=u=>{const d=un.getState(c.state);if(!(d!=null&&d.isVisible))return;if(console.log("[VerticalPlugin] Global DROP event",{clientX:u.clientX,clientY:u.clientY,hasDragging:!!c.dragging}),!c.dragging){console.log("[VerticalPlugin] Drop skipped: No dragging data");const g=c.state.tr.setMeta(un,en);c.dispatch(g);return}const f=new tw(t).execute(c,u,()=>un.getState(c.state));console.log("[VerticalPlugin] Drop handled by executor?",f);const p=c.state.tr.setMeta(un,en);c.dispatch(p),f&&(u.preventDefault(),u.stopPropagation())},l=u=>{j.dragGuideline.debug("[VerticalGuidelinePlugin] Document drop event captured",{clientX:u.clientX,clientY:u.clientY,target:u.target,defaultPrevented:u.defaultPrevented})},document.addEventListener("drop",l,!0),document.addEventListener("dragover",s,!0),document.addEventListener("drop",a,!0),{update(u,d){n==null||n.update(u,d)},destroy(){n==null||n.destroy(),n=null,i&&(c.dom.removeEventListener("dragover",i),i=null),o&&(c.dom.removeEventListener("dragend",o),o=null),s&&(document.removeEventListener("dragover",s,!0),s=null),a&&(document.removeEventListener("drop",a,!0),a=null),l&&(document.removeEventListener("drop",l,!0),l=null),r=null,e.view=null}}}})}const uee=Ye.create({name:"verticalDragGuideline",addOptions(){return Zv},addStorage(){return{view:null}},addProseMirrorPlugins(){const t={...Zv,...this.options},e=this.storage;return j.dragGuideline.debug("VerticalDragGuidelineExtension loaded",{options:t}),[cee(t,e)]}}),dee=_S(SS);function hee(t=!1){const e=[cy.configure({heading:!1,dropcursor:!1}),tS.configure({placeholder:" / ...",emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",showOnlyWhenEditable:!0,showOnlyCurrent:!0})];return t?e.push(Dl({types:["heading","paragraph"]})):e.push(Dl({types:["heading"]})),e.push(hy.configure({levels:[1,2,3,4,5,6]})),e}function rw(t=!0){const e=[cy.configure({codeBlock:!1,heading:!1,dropcursor:!1}),z$.extend({addAttributes(){var n;return{...(n=this.parent)==null?void 0:n.call(this),language:{default:"javascript",parseHTML:r=>r.getAttribute("data-language"),renderHTML:r=>({"data-language":r.language,class:`language-${r.language}`})}}},addNodeView(){return Eh(MZ,{contentDOMElementTag:"code"})}}).configure({lowlight:dee,defaultLanguage:"javascript"}),tS.configure({placeholder:" / ...",emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",showOnlyWhenEditable:!0,showOnlyCurrent:!0}),c$,oS,Q$,V$.configure({multicolor:!0})];return t?e.push(Dl({types:qN})):e.push(Dl({types:["heading"]})),e.push(hy.configure({levels:[1,2,3,4,5,6]}),cY,uY,aF,tY,...mX(),H$.configure({HTMLAttributes:{class:"task-list"}}),W$.configure({nested:!0,HTMLAttributes:{class:"task-item"}})),e.push(qQ.configure({visibilityMode:"default-hidden",enableHover:!0,offset:50}),nee.configure({thickness:2,debug:!1}),uee.configure({enableColumnGuideline:!0,enableEditorBorderGuideline:!0,columnHotzoneThreshold:24,editorBorderHorizontalThreshold:1e3,editorBorderVerticalTolerance:50,debug:!1})),e}function fee(){return[cy.configure({heading:!1,dropcursor:!1}),Dl({types:["heading"]}),hy.configure({levels:[1,2,3,4,5,6]})]}const pee="full",gee=!0,mee={attributes:{class:"focus:outline-none min-h-[500px] max-w-4xl mx-auto p-6"}};class yee{static getPresetExtensions(e,n){switch(e){case"basic":return hee(n);case"full":return rw(n);case"demo":return fee();default:return rw(n)}}static build(e={}){const{preset:n=pee,additionalExtensions:r=[],enableUniversalId:i=gee,content:o,editable:s=!0,editorProps:a=mee}=e;return{extensions:[...this.getPresetExtensions(n,i),...r],content:o,editable:s,editorProps:a}}}function bee(t={}){return yee.build(t)}const xee=280,vee=48,dO=({headings:t,topOffset:e=64,onWidthChange:n,collapsedIds:r,onToggleFold:i,onScrollToHeading:o,activeIds:s})=>{const[a,l]=O.useState(!1),[c,u]=O.useState([]),[d,h]=O.useState(new Set),f=r??d,p=r!==void 0,g=s??c,m=s!==void 0,y=O.useMemo(()=>{const T=new Set;let P=1/0;for(const B of t){if(B.level<=P&&(P=1/0),B.level>P){T.add(B.id);continue}f.has(B.id)&&(P=B.level)}return T},[t,f]),b=O.useRef(null),C=O.useRef(null),v=O.useRef(!1),k=O.useRef(null),w=O.useCallback(()=>{l(T=>!T)},[]);O.useEffect(()=>{const P=t.length>0?a?vee:xee:0;n==null||n(P)},[t.length,a,n]);const S=O.useCallback((T,P)=>{if(T.preventDefault(),p){i==null||i(P);return}h(B=>{const A=new Set(B);return A.has(P)?A.delete(P):A.add(P),A})},[p,i]),E=O.useCallback(()=>{if(m){v.current=!1;return}const T=document.querySelectorAll("h1, h2, h3, h4, h5, h6"),P=window.scrollY,B=P+window.innerHeight,A=[];T.forEach(M=>{const L=M.id;if(!L)return;const F=M.offsetTop;F+M.offsetHeight>=P-100&&F<=B+100&&A.push(L)}),u(A),v.current=!1},[m]),R=O.useCallback(()=>{if(!b.current||!C.current)return;const T=b.current.querySelectorAll(".toc-link.active");if(T.length===0){C.current&&(C.current.style.setProperty("--toc-height","0px"),C.current.classList.add("hidden"));return}const P=T[0],B=T[T.length-1],A=b.current.getBoundingClientRect(),M=P.getBoundingClientRect(),L=B.getBoundingClientRect(),F=M.top-A.top,I=L.bottom-M.top;C.current&&(C.current.style.setProperty("--toc-top",`${F}px`),C.current.style.setProperty("--toc-height",`${I}px`),C.current.classList.remove("hidden"))},[]),$=O.useCallback((T,P)=>{if(T.preventDefault(),o&&P.pos!==void 0){o(P.pos,P.id);return}const B=document.getElementById(P.id);if(!B)return;const A=B.offsetTop-e-16;window.scrollTo({top:A,behavior:"smooth"}),k.current&&window.clearTimeout(k.current),setTimeout(()=>{B.classList.add("toc-heading-highlight"),k.current=window.setTimeout(()=>{B.classList.remove("toc-heading-highlight")},1e3)},300)},[e,o]);return O.useEffect(()=>{const T=()=>{v.current||(window.requestAnimationFrame(E),v.current=!0)};return window.addEventListener("scroll",T,{passive:!0}),E(),()=>{window.removeEventListener("scroll",T),k.current&&window.clearTimeout(k.current)}},[E]),O.useEffect(()=>{R()},[g,R]),t.length===0?null:_.jsx("aside",{className:`toc-container ${a?"collapsed":"expanded"} thin-scrollbar`,"aria-label":"Page sections",style:{"--toc-top-offset":`${e}px`,"--header-height":`${e}px`},children:_.jsxs("div",{className:"toc-inner",ref:b,children:[_.jsx("div",{className:"toc-indicator",ref:C,style:{"--toc-top":"0px","--toc-height":"0px"}}),_.jsx("div",{className:"toc-header",children:_.jsxs("button",{className:"toc-toggle-btn",onClick:w,title:a?"":"",children:[_.jsxs("svg",{className:"icon-expanded",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",style:{display:a?"none":"block"},children:[_.jsx("path",{d:"M16 5L11 10L16 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),_.jsx("path",{d:"M11 5L6 10L11 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),_.jsxs("svg",{className:"icon-collapsed",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",style:{display:a?"block":"none"},children:[_.jsx("path",{d:"M4 5L9 10L4 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),_.jsx("path",{d:"M9 5L14 10L9 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})]})}),_.jsx("div",{className:"toc-mini-nav thin-scrollbar",children:t.map(T=>{const P=y.has(T.id);return _.jsx("button",{className:`toc-mini-item level-${T.level} ${g.includes(T.id)?"active":""} ${P?"toc-mini-item-hidden":""}`,"data-id":T.id,title:T.text,onClick:B=>$(B,T)},`mini-${T.id}`)})}),_.jsx("div",{className:"toc-content",children:_.jsx("div",{className:"toc-scroll-area",children:_.jsx("div",{className:"toc-scroll-viewport","data-radix-scroll-area-viewport":"",children:_.jsx("div",{className:"toc-scroll-inner",children:_.jsx("ul",{className:"toc-list",children:t.map(T=>{const P=g.includes(T.id),B=.75+(T.level-1)*.75,A=f.has(T.id),M=y.has(T.id);return _.jsxs("li",{className:`toc-item ${M?"toc-item-hidden":""}`,children:[T.hasChildren?_.jsx("button",{className:`toc-fold-btn ${A?"":"expanded"}`,style:{marginLeft:`${B}rem`},onClick:L=>S(L,T.id),type:"button","aria-label":` ${T.text} `,children:_.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"none",children:_.jsx("path",{d:"M7.712 11.351L3.34 5.9a.45.45 0 010-.538.278.278 0 01.215-.112h8.89c.168 0 .305.17.305.381a.432.432 0 01-.09.269l-4.372 5.451c-.159.199-.417.199-.576 0z",fill:"currentColor",style:{opacity:.6}})})}):_.jsx("div",{className:"toc-spacer",style:{marginLeft:`${B}rem`}}),_.jsx("a",{href:`#${T.id}`,className:`toc-link ${P?"active":""}`,"data-id":T.id,onClick:L=>$(L,T),children:T.text})]},T.id)})})})})})})]})})};dO.displayName="TocNew";const wee=[{name:"default",color:"#37352f"},{name:"gray",color:"#9b9a97"},{name:"brown",color:"#64473a"},{name:"orange",color:"#d9730d"},{name:"yellow",color:"#cb912f"},{name:"green",color:"#448361"},{name:"blue",color:"#337ea9"},{name:"purple",color:"#9065b0"},{name:"pink",color:"#c14c8a"},{name:"red",color:"#d44c47"}],Cee=[{name:"default",color:"transparent"},{name:"gray",color:"#ebeced"},{name:"brown",color:"#e9e5e3"},{name:"orange",color:"#faebdd"},{name:"yellow",color:"#fbf3db"},{name:"green",color:"#ddedea"},{name:"blue",color:"#ddebf1"},{name:"purple",color:"#eae4f2"},{name:"pink",color:"#f4dfeb"},{name:"red",color:"#fbe4e4"}],hO=({open:t=!1,position:e={x:0,y:0},onClose:n,onFormat:r,onColorChange:i,activeFormats:o=[]})=>{const{t:s}=ki(),[a,l]=O.useState(!1),[c,u]=O.useState("#37352f"),d=or.useRef(null),h=or.useRef(null),f=O.useCallback(()=>{l(!1)},[]);or.useEffect(()=>{if(!t){l(!1);return}const C=k=>{var R,$;const w=k.target,S=(R=d.current)==null?void 0:R.contains(w),E=($=h.current)==null?void 0:$.contains(w);!S&&!E&&(n==null||n())},v=setTimeout(()=>{document.addEventListener("mousedown",C)},10);return()=>{clearTimeout(v),document.removeEventListener("mousedown",C)}},[t,n]);const p=O.useCallback(C=>{r==null||r(C)},[r]),g=O.useCallback(()=>{l(C=>!C)},[]),m=O.useCallback(C=>{u(C),i==null||i(C,!1),f()},[i,f]),y=O.useCallback(C=>{i==null||i(C,!0),f()},[i,f]);if(!t)return null;const b=C=>o.includes(C);return aw.createPortal(_.jsxs(_.Fragment,{children:[_.jsxs("div",{ref:d,className:"selection-toolbar",style:{left:`${e.x}px`,top:`${e.y}px`},onMouseDown:C=>C.preventDefault(),children:[_.jsxs("div",{className:"selection-toolbar-content",children:[_.jsxs("div",{className:"selection-toolbar-group",children:[_.jsx("button",{className:Ot("selection-toolbar-btn",b("bold")&&"active"),onClick:()=>p("bold"),title:`${s("formatBold")} B`,children:_.jsx(kee,{})}),_.jsx("button",{className:Ot("selection-toolbar-btn",b("italic")&&"active"),onClick:()=>p("italic"),title:`${s("formatItalic")} I`,children:_.jsx(See,{})}),_.jsx("button",{className:Ot("selection-toolbar-btn",b("underline")&&"active"),onClick:()=>p("underline"),title:`${s("formatUnderline")} U`,children:_.jsx(_ee,{})}),_.jsx("button",{className:Ot("selection-toolbar-btn",b("strike")&&"active"),onClick:()=>p("strike"),title:`${s("formatStrikethrough")} S`,children:_.jsx(Eee,{})}),_.jsx("button",{className:Ot("selection-toolbar-btn",b("code")&&"active"),onClick:()=>p("code"),title:`${s("formatCode")} E`,children:_.jsx(Tee,{})})]}),_.jsx("div",{className:"selection-toolbar-divider"}),_.jsx("div",{className:"selection-toolbar-group",children:_.jsx("button",{className:Ot("selection-toolbar-btn",a&&"active"),onClick:g,title:s("formatColor"),children:_.jsxs("div",{className:"color-indicator",children:[_.jsx(Mee,{}),_.jsx("div",{className:"color-indicator-bar",style:{background:c}})]})})})]}),_.jsx("div",{className:"selection-toolbar-arrow"})]}),a&&_.jsxs("div",{ref:h,className:"selection-color-picker",style:{left:`${e.x}px`,top:`${e.y+50}px`},children:[_.jsxs("div",{className:"color-section",children:[_.jsx("div",{className:"color-section-title",children:s("colorTextColor")}),_.jsx("div",{className:"color-grid",children:wee.map(C=>_.jsx("button",{className:Ot("color-option",`text-color-${C.name}`,c===C.color&&"selected"),onClick:()=>m(C.color),title:s(`color${C.name.charAt(0).toUpperCase()+C.name.slice(1)}`)},C.name))})]}),_.jsxs("div",{className:"color-section",children:[_.jsx("div",{className:"color-section-title",children:s("colorBackground")}),_.jsx("div",{className:"color-grid",children:Cee.map(C=>_.jsx("button",{className:Ot("color-option",`bg-color-${C.name}`),onClick:()=>y(C.color),title:s(`color${C.name.charAt(0).toUpperCase()+C.name.slice(1)}Bg`)},C.name))})]})]})]}),document.body)};function kee(){return _.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("path",{d:"M7 5h6a4 4 0 0 1 0 8H7z"}),_.jsx("path",{d:"M7 13h7a4 4 0 0 1 0 8H7z"}),_.jsx("line",{x1:"7",y1:"5",x2:"7",y2:"21"})]})}function See(){return _.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[_.jsx("line",{x1:"19",y1:"4",x2:"10",y2:"4"}),_.jsx("line",{x1:"14",y1:"20",x2:"5",y2:"20"}),_.jsx("line",{x1:"15",y1:"4",x2:"9",y2:"20"})]})}function _ee(){return _.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[_.jsx("path",{d:"M6 4v6a6 6 0 0 0 12 0V4"}),_.jsx("line",{x1:"4",y1:"20",x2:"20",y2:"20"})]})}function Eee(){return _.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("path",{d:"M16 4H9a4 4 0 0 0 0 8h6a4 4 0 0 1 0 8H8"}),_.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"})]})}function Tee(){return _.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("polyline",{points:"16 18 22 12 16 6"}),_.jsx("polyline",{points:"8 6 2 12 8 18"})]})}function Mee(){return _.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M12 4L5 20h2.5l1.5-4h6l1.5 4H19L12 4zm-1.5 10l1.5-4 1.5 4h-3z"})})}hO.displayName="SelectionToolbar";function iw(t){const e=[];return t.isActive("bold")&&e.push("bold"),t.isActive("italic")&&e.push("italic"),t.isActive("underline")&&e.push("underline"),t.isActive("strike")&&e.push("strike"),t.isActive("code")&&e.push("code"),e}function Aee(t,e){const{view:n,state:r}=t,{selection:i}=r;if(i.empty)return null;const{from:o,to:s}=i,a=n.coordsAtPos(o),l=n.coordsAtPos(s),c=(a.left+l.right)/2,u=Math.min(a.top,l.top)-e;return{x:c,y:u+window.scrollY}}function Nee(t){const{state:e}=t,{selection:n}=e;if(n.empty||n.node)return!1;const{from:r,to:i}=n;let o=!1;return e.doc.nodesBetween(r,i,s=>{if(s.isText)return o=!0,!1}),o}function Oee({editor:t,offsetY:e=50}){const[n,r]=O.useState({open:!1,position:{x:0,y:0},activeFormats:[]}),i=O.useRef(null),o=O.useCallback(()=>{r(c=>({...c,open:!1}))},[]),s=O.useCallback(()=>{if(!t)return;if(i.current&&(clearTimeout(i.current),i.current=null),!Nee(t)){i.current=window.setTimeout(()=>{r(d=>({...d,open:!1}))},100);return}const c=Aee(t,e);if(!c){r(d=>({...d,open:!1}));return}const u=iw(t);r({open:!0,position:c,activeFormats:u})},[t,e]),a=O.useCallback(c=>{if(t){switch(t.chain().focus(),c){case"bold":t.chain().toggleBold().run();break;case"italic":t.chain().toggleItalic().run();break;case"underline":t.chain().toggleUnderline().run();break;case"strike":t.chain().toggleStrike().run();break;case"code":t.chain().toggleCode().run();break}setTimeout(()=>{t&&r(u=>({...u,activeFormats:iw(t)}))},0)}},[t]),l=O.useCallback((c,u)=>{t&&(u?c==="transparent"?t.chain().focus().unsetHighlight().run():t.chain().focus().setHighlight({color:c}).run():c==="#37352f"?t.chain().focus().unsetColor().run():t.chain().focus().setColor(c).run())},[t]);return O.useEffect(()=>{if(!t)return;s();const c=()=>{s()},u=()=>{s()};return t.on("selectionUpdate",c),t.on("transaction",u),()=>{t.off("selectionUpdate",c),t.off("transaction",u),i.current&&clearTimeout(i.current)}},[t,s]),{...n,close:o,format:a,setColor:l}}function Lee({editor:t}){const[e,n]=O.useState({open:!1,position:{x:0,y:0}}),r=O.useRef(!1),i=O.useRef(null),o=O.useCallback(()=>{r.current||(n(d=>({...d,open:!1})),i.current=null)},[]),s=O.useCallback(()=>{n(d=>({...d,open:!1})),i.current=null,r.current=!1},[]),a=O.useCallback(()=>{r.current=!0},[]),l=O.useCallback(()=>{r.current=!1},[]),c=O.useCallback(()=>`node-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,[]),u=O.useCallback(d=>{if(!t)return;const{state:h}=t.view,{$from:f}=h.selection,p=f.before(),g=f.after(),{tr:m}=h,y=h.schema;switch(d){case"heading1":if(y.nodes.heading){const b=y.nodes.heading.create({level:1,id:c()});t.view.dispatch(m.replaceWith(p,g,b)),t.commands.focus()}break;case"heading2":if(y.nodes.heading){const b=y.nodes.heading.create({level:2,id:c()});t.view.dispatch(m.replaceWith(p,g,b)),t.commands.focus()}break;case"heading3":if(y.nodes.heading){const b=y.nodes.heading.create({level:3,id:c()});t.view.dispatch(m.replaceWith(p,g,b)),t.commands.focus()}break;case"numberedList":if(y.nodes.orderedList&&y.nodes.listItem&&y.nodes.paragraph){const b=y.nodes.paragraph.create({id:c()}),C=y.nodes.listItem.create(null,b),v=y.nodes.orderedList.create({id:c()},C);t.view.dispatch(m.replaceWith(p,g,v)),t.commands.focus()}break;case"bulletList":if(y.nodes.bulletList&&y.nodes.listItem&&y.nodes.paragraph){const b=y.nodes.paragraph.create({id:c()}),C=y.nodes.listItem.create(null,b),v=y.nodes.bulletList.create({id:c()},C);t.view.dispatch(m.replaceWith(p,g,v)),t.commands.focus()}break;case"todoList":if(y.nodes.taskList&&y.nodes.taskItem&&y.nodes.paragraph){const b=y.nodes.paragraph.create({id:c()}),C=y.nodes.taskItem.create({checked:!1},b),v=y.nodes.taskList.create({id:c()},C);t.view.dispatch(m.replaceWith(p,g,v)),t.commands.focus()}break;case"code":if(y.nodes.codeBlock){const b=y.nodes.codeBlock.create({id:c(),language:"javascript"});t.view.dispatch(m.replaceWith(p,g,b)),t.commands.focus()}break;case"quote":if(y.nodes.blockquote&&y.nodes.paragraph){const b=y.nodes.paragraph.create({id:c()}),C=y.nodes.blockquote.create({id:c()},b);t.view.dispatch(m.replaceWith(p,g,C)),t.commands.focus()}break;case"table":t.chain().focus().command(({tr:b,dispatch:C})=>(C&&b.delete(p,g),!0)).insertTable({rows:3,cols:3,withHeaderRow:!0}).run();break;case"columns":if(y.nodes.columns&&y.nodes.column&&y.nodes.paragraph){const b=y.nodes.paragraph.create({id:c()}),C=y.nodes.paragraph.create({id:c()}),v=y.nodes.column.create({id:c()},b),k=y.nodes.column.create({id:c()},C),w=y.nodes.columns.create({columns:2,columnWidths:[50,50],id:c()},[v,k]);t.view.dispatch(m.replaceWith(p,g,w)),t.commands.focus()}break;case"callout":if(y.nodes.callout&&y.nodes.paragraph){const b=y.nodes.paragraph.create({id:c()}),C=y.nodes.callout.create({theme:"blue",emoji:"",id:c()},b);t.view.dispatch(m.replaceWith(p,g,C)),t.commands.focus()}break}s()},[t,s,c]);return O.useEffect(()=>{if(!t)return;const d=f=>{if(f.key==="Escape"&&e.open){s();return}if(f.key==="/"){const{state:p}=t.view,{selection:g}=p,{$from:m}=g,y=m.parentOffset===0,b=m.parent.textContent==="";(y||b)&&(i.current=m.pos,setTimeout(()=>{const C=t.state.selection.$from;C.parent;const v=C.before();let k=t.view.nodeDOM(v);if(!k){const S=t.view.coordsAtPos(m.pos);n({open:!0,position:{x:S.left,y:S.bottom+4}});return}const w=k instanceof HTMLElement?k:k.parentElement;if(w){const S=w.getBoundingClientRect();n({open:!0,position:{x:S.left,y:S.bottom+4}})}else{const S=t.view.coordsAtPos(m.pos);n({open:!0,position:{x:S.left,y:S.bottom+4}})}},0))}},h=t.view.dom;return h.addEventListener("keydown",d),()=>{h.removeEventListener("keydown",d)}},[t,e.open,s]),O.useEffect(()=>{if(!t||!e.open)return;const d=()=>{const{state:h}=t.view,{from:f}=h.selection;h.doc.textBetween(Math.max(0,f-1),f)!=="/"&&setTimeout(()=>{r.current||s()},50)};return t.on("update",d),()=>{t.off("update",d)}},[t,e.open,s]),O.useEffect(()=>{if(!t||!e.open)return;const d=()=>{setTimeout(()=>{r.current||s()},200)};return t.on("blur",d),()=>{t.off("blur",d)}},[t,e.open,s]),{...e,close:o,selectBlockType:u,onMouseEnter:a,onMouseLeave:l}}function Ree(t){return`
<h1>${t("editorWelcomeTitle")}</h1>
<p>${t("editorWelcomeDesc")}</p>

<h2 data-numbered="true" data-manual-number="1.">${t("editorCalloutTitle")}</h2>
<p>${t("editorCalloutDesc")}</p>

<div data-type="callout" data-theme="blue" data-emoji="">
  <p>${t("editorCalloutInfo")}</p>
</div>

<div data-type="callout" data-theme="green" data-emoji="">
  <p>${t("editorCalloutSuccess")}</p>
</div>

<div data-type="callout" data-theme="yellow" data-emoji="">
  <p>${t("editorCalloutWarning")}</p>
</div>

<div data-type="callout" data-theme="red" data-emoji="">
  <p>${t("editorCalloutDanger")}</p>
</div>

<h2 data-numbered="true" data-manual-number="2.">${t("editorColumnsTitle")}</h2>
<p>${t("editorColumnsDesc")}</p>

<div data-type="columns" data-columns="2" data-column-widths="[50,50]">
  <div data-type="column">
    <p><strong>${t("editorLeftColumn")}</strong></p>
    <p>${t("editorLeftColumnContent")}</p>
    <ul>
      <li>${t("editorListItem1")}</li>
      <li>${t("editorListItem2")}</li>
    </ul>
  </div>
  <div data-type="column">
    <p><strong>${t("editorRightColumn")}</strong></p>
    <p>${t("editorRightColumnContent")}</p>
    <p>${t("editorRightColumnTip")}</p>
  </div>
</div>

<div data-type="columns" data-columns="3" data-column-widths="[33.33,33.33,33.34]">
  <div data-type="column">
    <p><strong>${t("editorFirstColumn")}</strong></p>
    <p>${t("editorThreeColumnExample")}</p>
  </div>
  <div data-type="column">
    <p><strong>${t("editorSecondColumn")}</strong></p>
    <p>${t("editorMiddleColumnContent")}</p>
  </div>
  <div data-type="column">
    <p><strong>${t("editorThirdColumn")}</strong></p>
    <p>${t("editorRightmostColumn")}</p>
  </div>
</div>

<h2 data-numbered="true" data-manual-number="3.">${t("editorCodeBlockTitle")}</h2>
<p>${t("editorCodeBlockDesc")}</p>

<pre data-language="typescript"><code class="language-typescript">// TypeScript Example
interface User {
  id: number
  name: string
  email: string
}

function greet(user: User): string {
  return \`Hello, \${user.name}!\`
}

const user: User = {
  id: 1,
  name: 'Syllo',
  email: 'hello@nova.dev'
}

console.log(greet(user))</code></pre>

<pre data-language="python"><code class="language-python"># Python Example
def fibonacci(n: int) -> list[int]:
    """Generate Fibonacci sequence"""
    if n <= 0:
        return []

    sequence = [0, 1]
    while len(sequence) < n:
        sequence.append(sequence[-1] + sequence[-2])

    return sequence[:n]

print(fibonacci(10))</code></pre>

<h2 data-numbered="true" data-manual-number="4.">${t("editorMermaidTitle")}</h2>
<p>${t("editorMermaidDesc")}</p>

<div data-type="mermaid"></div>

<h2 data-numbered="true" data-manual-number="5.">${t("editorTableTitle")}</h2>
<p>${t("editorTableDesc")}</p>

<table>
  <tbody>
    <tr>
      <th>${t("editorTableHeader1")}</th>
      <th>${t("editorTableHeader2")}</th>
      <th>${t("editorTableHeader3")}</th>
    </tr>
    <tr>
      <td>${t("editorTableCell1_1")}</td>
      <td>${t("editorTableCell1_2")}</td>
      <td>${t("editorTableCell1_3")}</td>
    </tr>
    <tr>
      <td>${t("editorTableCell2_1")}</td>
      <td>${t("editorTableCell2_2")}</td>
      <td>${t("editorTableCell2_3")}</td>
    </tr>
  </tbody>
</table>

<h2 data-numbered="true" data-manual-number="6.">${t("editorNumberedHeadingTitle")}</h2>
<p>${t("editorNumberedHeadingDesc")}</p>

<h2 data-indent="0">${t("editorChapter1")}</h2>
<p>${t("editorChapter1Content")}</p>

<h3 data-indent="1">${t("editorSection1_1")}</h3>
<p>${t("editorSection1_1Content")}</p>

<h3 data-indent="1">${t("editorSection1_2")}</h3>
<p>${t("editorSection1_2Content")}</p>

<h4 data-indent="2">${t("editorSection1_2_1")}</h4>
<p>${t("editorSection1_2_1Content")}</p>

<h2 data-indent="0">${t("editorChapter2")}</h2>
<p>${t("editorChapter2Content")}</p>

<h2 data-numbered="true" data-manual-number="7.">${t("editorBasicFormatTitle")}</h2>
<p>${t("editorBasicFormatDesc")}</p>
<ul>
  <li>${t("editorBold")}</li>
  <li>${t("editorItalic")}</li>
  <li>${t("editorStrikethrough")}</li>
  <li>${t("editorInlineCode")}</li>
</ul>

<blockquote>
  <p>${t("editorBlockquote")}</p>
</blockquote>

<h2 data-numbered="true" data-manual-number="8.">${t("editorListTitle")}</h2>
<p>${t("editorListDesc")}</p>

<ol>
  <li>${t("editorOrderedItem")} 1</li>
  <li>${t("editorOrderedItem")} 2</li>
  <li>${t("editorOrderedItem")} 3</li>
</ol>

<ul>
  <li>${t("editorUnorderedItem")}</li>
  <li>${t("editorUnorderedItem")}</li>
  <li>${t("editorUnorderedItem")}</li>
</ul>

<h2 data-numbered="true" data-manual-number="9.">${t("editorTaskListTitle")}</h2>
<p>${t("editorTaskListDesc")}</p>

<ul data-type="taskList">
  <li data-type="taskItem" data-checked="true"><p>${t("editorTaskItem1")}</p></li>
  <li data-type="taskItem" data-checked="true"><p>${t("editorTaskItem2")}</p></li>
  <li data-type="taskItem" data-checked="false"><p>${t("editorTaskItem3")}</p></li>
  <li data-type="taskItem" data-checked="false"><p>${t("editorTaskItem4")}</p></li>
</ul>

<h2>${t("editorStartCreating")}</h2>
<p>${t("editorStartCreatingDesc")}</p>
`}function Iee(t){if(!t)return new Set;const e=new Set;return t.state.doc.descendants(n=>{n.type.name==="heading"&&n.attrs.collapsed&&n.attrs.id&&e.add(n.attrs.id)}),e}function Dee(t){if(!t)return[];const e=[];return t.state.doc.descendants((r,i)=>{if(r.type.name==="heading"){const o=r.attrs.id||`heading-${i}`,s=r.attrs.level||1;let a=r.textContent;r.attrs.numbered&&r.attrs.manualNumber&&(a=`${r.attrs.manualNumber} ${a}`),e.push({id:o,level:s,text:a,pos:i})}}),e.map((r,i)=>{let o=!1;for(let s=i+1;s<e.length;s++){if(e[s].level>r.level){o=!0;break}if(e[s].level<=r.level)break}return{...r,hasChildren:o}})}function Bee(){const{t}=ki(),[e,n]=O.useState([]),[r,i]=O.useState(280),[o,s]=O.useState(new Set),[a,l]=O.useState([]),c=O.useMemo(()=>Ree(t),[t]),u=bee({preset:"full",enableUniversalId:!0,content:c,editorProps:{attributes:{class:"focus:outline-none min-h-[calc(100vh-120px)] p-8"}}}),d=KB(u),h=Oee({editor:d}),f=Lee({editor:d}),p=O.useCallback(()=>{d&&(n(Dee(d)),s(Iee(d)))},[d]);O.useEffect(()=>{d&&d.commands.setContent(c)},[d,c]),O.useEffect(()=>{if(!d)return;p();const S=({transaction:E})=>{p()};return d.on("update",S),()=>{d.off("update",S)}},[d,p]);const g=O.useCallback(()=>{if(!d||e.length===0)return;const S=window.scrollY,E=S+window.innerHeight,R=80,$=[];for(const T of e){const P=d.view.nodeDOM(T.pos);let B=null;if(P instanceof HTMLElement?B=P:P instanceof Text&&P.parentElement&&(B=P.parentElement),B){const A=B.getBoundingClientRect(),M=A.top+window.scrollY;M+A.height>=S+R-50&&M<=E+50&&$.push(T.id)}}l($)},[d,e]);O.useEffect(()=>{let S=!1;const E=()=>{S||(window.requestAnimationFrame(()=>{g(),S=!1}),S=!0)};return window.addEventListener("scroll",E,{passive:!0}),g(),()=>{window.removeEventListener("scroll",E)}},[g]);const m=O.useCallback(S=>{i(S)},[]),y=O.useCallback((S,E)=>{if(!d)return null;const R=d.view.nodeDOM(S);if(R instanceof HTMLElement||R instanceof Element)return R;if(R instanceof Text){const T=R.parentElement;if(T instanceof HTMLElement)return T}if(E){const T=document.getElementById(E);if(T instanceof HTMLElement)return T}const $=document.querySelectorAll("h1, h2, h3, h4, h5, h6");for(const T of Array.from($))if(T instanceof HTMLElement)try{const P=d.view.posAtDOM(T,0);if(Math.abs(P-S)<=2)return T}catch{}return null},[d]),b=O.useCallback(S=>{S.classList.remove("toc-heading-highlight"),S.offsetWidth,S.classList.add("toc-heading-highlight"),setTimeout(()=>{S.classList.remove("toc-heading-highlight")},1e3)},[]),C=O.useCallback((S,E)=>{if(!d)return;const R=y(S,E);if(!R)return;const T=R.offsetTop-80-32;window.scrollTo({top:T,behavior:"smooth"}),requestAnimationFrame(()=>b(R))},[d,y,b]),v=O.useCallback(S=>{if(!d)return;let E=null,R=null;if(d.state.doc.descendants(($,T)=>{if($.type.name==="heading"&&$.attrs.id===S)return E=T,R=$,!1}),E!==null&&R){const $=d.state.tr;$.setNodeMarkup(E,void 0,{...R.attrs,collapsed:!R.attrs.collapsed}),$.setMeta("fold-changed",!0),d.view.dispatch($)}},[d]),w=24+(r===0?0:Math.max(r,48))+24;return _.jsxs("div",{className:"editor-layout",children:[_.jsx("div",{className:"toc-wrapper",style:{paddingLeft:"24px"},children:_.jsx(dO,{headings:e,topOffset:80,onWidthChange:m,collapsedIds:o,onToggleFold:v,onScrollToHeading:C,activeIds:a})}),_.jsx("main",{className:"editor-main",style:{marginLeft:`${w}px`,marginRight:"120px"},children:_.jsx(HB,{editor:d})}),_.jsx(hO,{open:h.open,position:h.position,activeFormats:h.activeFormats,onClose:h.close,onFormat:h.format,onColorChange:h.setColor}),f.open&&_.jsx("div",{style:{position:"fixed",left:`${f.position.x}px`,top:`${f.position.y}px`,zIndex:1e3},children:_.jsx(_0,{open:f.open,onClose:f.close,onSelect:f.selectBlockType,onMouseEnter:f.onMouseEnter,onMouseLeave:f.onMouseLeave})})]})}const xte=Object.freeze(Object.defineProperty({__proto__:null,default:Bee},Symbol.toStringTag,{value:"Module"}));export{GS as $,pl as A,hF as B,R4 as C,Xy as D,pn as E,$S as F,uU as G,h9 as H,Mx as I,b8 as J,KF as K,oa as L,Uee as M,jh as N,f4 as O,gy as P,zx as Q,r9 as R,Cu as S,cU as T,sc as U,w4 as V,oc as W,pe as X,Te as Y,tU as Z,x as _,T4 as a,Dn as a$,Q6 as a0,My as a1,Yee as a2,Jee as a3,Cs as a4,s1 as a5,o1 as a6,ete as a7,Qee as a8,Zee as a9,Z7 as aA,UW as aB,j7 as aC,Hy as aD,ov as aE,Sj as aF,e9 as aG,Wee as aH,fc as aI,Cj as aJ,wj as aK,Sy as aL,Bi as aM,Qx as aN,RH as aO,$l as aP,cs as aQ,J7 as aR,B2 as aS,Fh as aT,Uh as aU,Kd as aV,$2 as aW,D2 as aX,M7 as aY,ye as aZ,S2 as a_,Gee as aa,Kee as ab,nte as ac,Xee as ad,tte as ae,Yj as af,VM as ag,fte as ah,v8 as ai,zt as aj,lo as ak,zy as al,bT as am,hs as an,j2 as ao,Be as ap,Xr as aq,zq as ar,hte as as,pte as at,ute as au,be as av,dte as aw,Cq as ax,yq as ay,mq as az,E4 as b,EH as b0,ky as b1,a_ as b2,lc as b3,u_ as b4,Vee as b5,dF as b6,X7 as b7,U7 as b8,NW as b9,Q7 as bA,Wh as bB,xte as bC,Wy as ba,S7 as bb,eU as bc,dc as bd,va as be,qd as bf,D7 as bg,cV as bh,uc as bi,Gd as bj,A7 as bk,A2 as bl,RW as bm,IW as bn,ko as bo,E1 as bp,DW as bq,Uy as br,LW as bs,$W as bt,wa as bu,ao as bv,w1 as bw,jy as bx,O2 as by,Qg as bz,tt as c,Ve as d,VS as e,$t as f,A4 as g,wi as h,dr as i,E8 as j,ba as k,G as l,V2 as m,jee as n,mte as o,N4 as p,O4 as q,gte as r,M4 as s,x8 as t,kr as u,fq as v,fU as w,rte as x,_4 as y,qee as z};
